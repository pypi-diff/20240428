# Comparing `tmp/inmanta_module_podman-0.3.1-py3-none-any.whl.zip` & `tmp/inmanta_module_podman-0.4.0-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,25 +1,25 @@
-Zip file size: 28897 bytes, number of entries: 23
--rw-r--r--  2.0 unx    10227 b- defN 24-Apr-18 21:42 inmanta_plugins/podman/__init__.py
--rw-r--r--  2.0 unx     2224 b- defN 24-Apr-18 21:43 inmanta_plugins/podman/setup.cfg
--rw-r--r--  2.0 unx        0 b- defN 24-Apr-18 21:42 inmanta_plugins/podman/files/.gitkeep
--rw-r--r--  2.0 unx     7114 b- defN 24-Apr-18 21:42 inmanta_plugins/podman/model/_init.cf
--rw-r--r--  2.0 unx     1841 b- defN 24-Apr-18 21:42 inmanta_plugins/podman/model/container.cf
--rw-r--r--  2.0 unx     4727 b- defN 24-Apr-18 21:42 inmanta_plugins/podman/model/container_like.cf
--rw-r--r--  2.0 unx     2345 b- defN 24-Apr-18 21:42 inmanta_plugins/podman/model/helpers.cf
--rw-r--r--  2.0 unx     1066 b- defN 24-Apr-18 21:42 inmanta_plugins/podman/model/network.cf
--rw-r--r--  2.0 unx     2560 b- defN 24-Apr-18 21:42 inmanta_plugins/podman/model/services/_init.cf
--rw-r--r--  2.0 unx     3906 b- defN 24-Apr-18 21:42 inmanta_plugins/podman/model/services/systemd_container.cf
--rw-r--r--  2.0 unx     3666 b- defN 24-Apr-18 21:42 inmanta_plugins/podman/model/services/systemd_pod.cf
--rw-r--r--  2.0 unx     5620 b- defN 24-Apr-18 21:42 inmanta_plugins/podman/model/services/systemd_service.cf
--rw-r--r--  2.0 unx      646 b- defN 24-Apr-18 21:42 inmanta_plugins/podman/resources/__init__.py
--rw-r--r--  2.0 unx     3054 b- defN 24-Apr-18 21:42 inmanta_plugins/podman/resources/abc.py
--rw-r--r--  2.0 unx     8073 b- defN 24-Apr-18 21:42 inmanta_plugins/podman/resources/image.py
--rw-r--r--  2.0 unx     3208 b- defN 24-Apr-18 21:42 inmanta_plugins/podman/resources/image_discovery.py
--rw-r--r--  2.0 unx     8616 b- defN 24-Apr-18 21:42 inmanta_plugins/podman/resources/network.py
--rw-r--r--  2.0 unx     2915 b- defN 24-Apr-18 21:42 inmanta_plugins/podman/resources/network_discovery.py
--rw-r--r--  2.0 unx        0 b- defN 24-Apr-18 21:42 inmanta_plugins/podman/templates/.gitkeep
--rw-r--r--  2.0 unx      821 b- defN 24-Apr-18 21:43 inmanta_module_podman-0.3.1.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 24-Apr-18 21:43 inmanta_module_podman-0.3.1.dist-info/WHEEL
--rw-r--r--  2.0 unx       16 b- defN 24-Apr-18 21:43 inmanta_module_podman-0.3.1.dist-info/top_level.txt
--rw-rw-r--  2.0 unx     2259 b- defN 24-Apr-18 21:43 inmanta_module_podman-0.3.1.dist-info/RECORD
-23 files, 74996 bytes uncompressed, 25101 bytes compressed:  66.5%
+Zip file size: 29171 bytes, number of entries: 23
+-rw-r--r--  2.0 unx    10417 b- defN 24-Apr-27 22:30 inmanta_plugins/podman/__init__.py
+-rw-r--r--  2.0 unx     2224 b- defN 24-Apr-27 22:30 inmanta_plugins/podman/setup.cfg
+-rw-r--r--  2.0 unx        0 b- defN 24-Apr-27 22:30 inmanta_plugins/podman/files/.gitkeep
+-rw-r--r--  2.0 unx     7388 b- defN 24-Apr-27 22:30 inmanta_plugins/podman/model/_init.cf
+-rw-r--r--  2.0 unx     1841 b- defN 24-Apr-27 22:30 inmanta_plugins/podman/model/container.cf
+-rw-r--r--  2.0 unx     5256 b- defN 24-Apr-27 22:30 inmanta_plugins/podman/model/container_like.cf
+-rw-r--r--  2.0 unx     2345 b- defN 24-Apr-27 22:30 inmanta_plugins/podman/model/helpers.cf
+-rw-r--r--  2.0 unx     1066 b- defN 24-Apr-27 22:30 inmanta_plugins/podman/model/network.cf
+-rw-r--r--  2.0 unx     2560 b- defN 24-Apr-27 22:30 inmanta_plugins/podman/model/services/_init.cf
+-rw-r--r--  2.0 unx     3906 b- defN 24-Apr-27 22:30 inmanta_plugins/podman/model/services/systemd_container.cf
+-rw-r--r--  2.0 unx     3666 b- defN 24-Apr-27 22:30 inmanta_plugins/podman/model/services/systemd_pod.cf
+-rw-r--r--  2.0 unx     5620 b- defN 24-Apr-27 22:30 inmanta_plugins/podman/model/services/systemd_service.cf
+-rw-r--r--  2.0 unx      646 b- defN 24-Apr-27 22:30 inmanta_plugins/podman/resources/__init__.py
+-rw-r--r--  2.0 unx     3054 b- defN 24-Apr-27 22:30 inmanta_plugins/podman/resources/abc.py
+-rw-r--r--  2.0 unx     8073 b- defN 24-Apr-27 22:30 inmanta_plugins/podman/resources/image.py
+-rw-r--r--  2.0 unx     3208 b- defN 24-Apr-27 22:30 inmanta_plugins/podman/resources/image_discovery.py
+-rw-r--r--  2.0 unx     8616 b- defN 24-Apr-27 22:30 inmanta_plugins/podman/resources/network.py
+-rw-r--r--  2.0 unx     2915 b- defN 24-Apr-27 22:30 inmanta_plugins/podman/resources/network_discovery.py
+-rw-r--r--  2.0 unx        0 b- defN 24-Apr-27 22:30 inmanta_plugins/podman/templates/.gitkeep
+-rw-r--r--  2.0 unx      821 b- defN 24-Apr-27 22:30 inmanta_module_podman-0.4.0.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 24-Apr-27 22:30 inmanta_module_podman-0.4.0.dist-info/WHEEL
+-rw-r--r--  2.0 unx       16 b- defN 24-Apr-27 22:30 inmanta_module_podman-0.4.0.dist-info/top_level.txt
+-rw-rw-r--  2.0 unx     2259 b- defN 24-Apr-27 22:30 inmanta_module_podman-0.4.0.dist-info/RECORD
+23 files, 75989 bytes uncompressed, 25375 bytes compressed:  66.6%
```

## zipnote {}

```diff
@@ -51,20 +51,20 @@
 
 Filename: inmanta_plugins/podman/resources/network_discovery.py
 Comment: 
 
 Filename: inmanta_plugins/podman/templates/.gitkeep
 Comment: 
 
-Filename: inmanta_module_podman-0.3.1.dist-info/METADATA
+Filename: inmanta_module_podman-0.4.0.dist-info/METADATA
 Comment: 
 
-Filename: inmanta_module_podman-0.3.1.dist-info/WHEEL
+Filename: inmanta_module_podman-0.4.0.dist-info/WHEEL
 Comment: 
 
-Filename: inmanta_module_podman-0.3.1.dist-info/top_level.txt
+Filename: inmanta_module_podman-0.4.0.dist-info/top_level.txt
 Comment: 
 
-Filename: inmanta_module_podman-0.3.1.dist-info/RECORD
+Filename: inmanta_module_podman-0.4.0.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## inmanta_plugins/podman/__init__.py

```diff
@@ -143,14 +143,16 @@
         option("cgroups", cgroups),
         option("pod-id-file", pod_id_file),
         option("sdnotify", sdnotify),
         "--detach" if detach else None,
         "--replace" if replace else None,
         *options("network", container.networks),
         *options("publish", container.publish),
+        *options("add-host", container.hosts),
+        "--no-hosts" if container.no_hosts else None,
         option("hostname", container.hostname),
         *options("uidmap", container.uidmap),
         *options("gidmap", container.gidmap),
         f"--name={container.name}",
         *options("volume", container.volumes),
         *[f"--env={k}={v}" for k, v in container.env.items()],
         option("env-file", container.env_file),
@@ -214,14 +216,16 @@
         "create",
         option("infra-conmon-pidfile", infra_conmon_pidfile),
         option("pod-id-file", pod_id_file),
         option("exit-policy", exit_policy),
         "--replace" if replace else None,
         *options("network", pod.networks),
         *options("publish", pod.publish),
+        *options("add-host", pod.hosts),
+        "--no-hosts" if pod.no_hosts else None,
         option("hostname", pod.hostname),
         *options("uidmap", pod.uidmap),
         *options("gidmap", pod.gidmap),
         f"--name={pod.name}",
     ]
     return " ".join(i for i in cmd if i is not None)
```

## inmanta_plugins/podman/setup.cfg

```diff
@@ -1,10 +1,10 @@
 [metadata]
 name = inmanta-module-podman
-version = 0.3.1
+version = 0.4.0
 description = Simple module to manage podman resources
 long_description = file: README.md
 long_description_content_type = text/markdown
 author = Guillaume Everarts de Velp
 author_email = edvgui@gmail.com
 license = ASL 2.0
 copyright = 2023 Guillaume Everarts de Velp
```

## inmanta_plugins/podman/model/_init.cf

```diff
@@ -85,21 +85,26 @@
 entity ContainerLike extends ResourceABC:
     """
     Abstraction gathering the properties that both containers and pods
     can have.
 
     :attr hostname: Set a hostname to the container.
     :attr labels: Add metadata to a container.
+    :attr no_hosts: Do not create /etc/hosts within the container, instead use the version from the image
     """
     string? hostname = null
     dict labels = {}
+    bool no_hosts = false
 end
 ContainerLike.networks [0:] -- podman::container_like::Network.container_like [1]
 """Set the network mode for the container."""
 
+ContainerLike.hosts [0:] -- podman::container_like::Host.container_like [1]
+"""Configure additional /etc/hosts entries for the container."""
+
 ContainerLike.publish [0:] -- podman::container_like::Publish.container_like [1]
 """Publish a container's port, or range of ports, to the host."""
 
 ContainerLike.gidmap [0:] -- podman::container_like::IdMap
 """Map the group ids of the container to ids on the host"""
 
 ContainerLike.uidmap [0:] -- podman::container_like::IdMap
```

## inmanta_plugins/podman/model/container_like.cf

```diff
@@ -47,14 +47,28 @@
     string? alias = null
     string? ip = null
     string? mac = null
     string? interface_name = null
 end
 
 
+entity Host:
+    """
+    Add a custom host-to-IP mapping (host:ip).
+
+    Add a line to /etc/hosts. The format is hostname:ip. The --add-host option can be set multiple times.
+    Conflicts with the --no-hosts option.
+    """
+    string host
+    string ip
+
+    string cli_option
+end
+
+
 entity Publish:
     """
     Publish a container's port, or range of ports, within this container or 
     pod to the host.
 
     Both hostPort and containerPort can be specified as a range of ports. When
     specifying ranges for both, the number of container ports in the range must
@@ -114,14 +128,23 @@
         }
     )
 
     self.cli_option = options == "" ? network_name : f"{network_name}:{options}"
 end
 
 
+implementation host_cli_option for Host:
+    """
+    Compose the cli option requried to add a host entry into the container's
+    /etc/hosts file.
+    """
+    self.cli_option = f"{self.host}:{self.ip}"
+end
+
+
 implementation publish_cli_option for Publish:
     """
     Compose the cli option required to expose some container port
     to the host network.
     """
     host = self.host_port is defined ? f"{self.host_port}:" : ":"
     host_with_ip = self.ip is defined ? f"{self.ip}:{host}" : host
@@ -140,9 +163,10 @@
 
     self.cli_option = self.amount is defined ? f"{mapping_start}:{self.amount}" : mapping_start
 end
 
 
 implement Network using std::none
 implement BridgeNetwork using bridge_cli_option
+implement Host using host_cli_option
 implement Publish using publish_cli_option
 implement IdMap using id_map_cli_option
```

## Comparing `inmanta_module_podman-0.3.1.dist-info/METADATA` & `inmanta_module_podman-0.4.0.dist-info/METADATA`

 * *Files 2% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: inmanta-module-podman
-Version: 0.3.1
+Version: 0.4.0
 Summary: Simple module to manage podman resources
 Author: Guillaume Everarts de Velp
 Author-email: edvgui@gmail.com
 License: ASL 2.0
 Description-Content-Type: text/markdown
 Requires-Dist: inmanta-module-std <6,>=4.0
 Requires-Dist: inmanta-module-exec <2,>=1.1
```

## Comparing `inmanta_module_podman-0.3.1.dist-info/RECORD` & `inmanta_module_podman-0.4.0.dist-info/RECORD`

 * *Files 11% similar despite different names*

```diff
@@ -1,23 +1,23 @@
-inmanta_plugins/podman/__init__.py,sha256=t2IriobufPMo-y4a0zbUYMFM7J9BAgBGUk01uXUa1x8,10227
-inmanta_plugins/podman/setup.cfg,sha256=KA_fOfeq0mBEzj4SVXbVtbnqBkz5Gs82s4f6Jbfa6qs,2224
+inmanta_plugins/podman/__init__.py,sha256=mZd53TyEBqx_fsfSTSlSiR4F24725fwaBsTCa546KnE,10417
+inmanta_plugins/podman/setup.cfg,sha256=7VifA1_tPBqt9-q5ym6lmAHDJ1s1gMOVje6aku93z2w,2224
 inmanta_plugins/podman/files/.gitkeep,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
-inmanta_plugins/podman/model/_init.cf,sha256=fxvbHsAtsFZ0xJ0SSkVcNqDhvjOVi9YDb4RUzWLq7pg,7114
+inmanta_plugins/podman/model/_init.cf,sha256=9v-fV9VIO2T80i05u7VXsJ0mnp_xNCLWZlrxYl8mYxo,7388
 inmanta_plugins/podman/model/container.cf,sha256=-GDpwZcNcskQUwxUap8Vjs9OqkLlhXJioWeoqjlK33g,1841
-inmanta_plugins/podman/model/container_like.cf,sha256=NP6PzP1HNh9L9zB8YccIkr_xjGhhmLPUlyg4yp2ONCg,4727
+inmanta_plugins/podman/model/container_like.cf,sha256=4QFxX9jOkNV417h89kh5DW-QLO0VyGDxXDG9IDRgQu4,5256
 inmanta_plugins/podman/model/helpers.cf,sha256=_aQ5OWhJ5gbPKV34FdIyR-_Rs4YlKu-C2A9rXTWZRmA,2345
 inmanta_plugins/podman/model/network.cf,sha256=nHluWQn-9b04IM8HpxgihKg_jhTUPyfKP5h4CStQ7MY,1066
 inmanta_plugins/podman/model/services/_init.cf,sha256=ZoPTYN4yJKHzgddg0x8qhjFb9EzM19D72X7FrV7JJ98,2560
 inmanta_plugins/podman/model/services/systemd_container.cf,sha256=48ynfEZTJlSh0C6cdKpGOKWeeLJVlt4mvvZ3qxb6oTQ,3906
 inmanta_plugins/podman/model/services/systemd_pod.cf,sha256=WZa_UEMjaTx-L6qVCdwKk1BSogFZW1dWv8qbl5Cum8Q,3666
 inmanta_plugins/podman/model/services/systemd_service.cf,sha256=SOL6ESyq8HCwdLDxQVFxQV64MtY5kSd3YFtrcH-nSqs,5620
 inmanta_plugins/podman/resources/__init__.py,sha256=NVBEWheGn8M9YTpErdDAYodvUfapWtad4ys81s9KUNs,646
 inmanta_plugins/podman/resources/abc.py,sha256=fVeKcATRa5ol3cP7AVu9aiIaq4hH_LsMO7QfK9F5oxk,3054
 inmanta_plugins/podman/resources/image.py,sha256=vmgYqp3bKShyiZKLWcczEXbvvwdW5ZCtc4W1wSktILE,8073
 inmanta_plugins/podman/resources/image_discovery.py,sha256=D7ziB25nwobV73E-Geq7suz5qef-AcR7FV3O9Sxw-2E,3208
 inmanta_plugins/podman/resources/network.py,sha256=6TkRhNOksstoorN-w3lN1BvIsRzHru9JsHieefy9qYk,8616
 inmanta_plugins/podman/resources/network_discovery.py,sha256=4_i5EgU_ieoNPL8iOKEIKxd9hf4fGzwOItJxIPjLBvQ,2915
 inmanta_plugins/podman/templates/.gitkeep,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
-inmanta_module_podman-0.3.1.dist-info/METADATA,sha256=1l8fwBD5V2InwdfKqIFFowKeJxJj7QhSfGBcbitojCQ,821
-inmanta_module_podman-0.3.1.dist-info/WHEEL,sha256=GJ7t_kWBFywbagK5eo9IoUwLW6oyOeTKmQ-9iHFVNxQ,92
-inmanta_module_podman-0.3.1.dist-info/top_level.txt,sha256=rb9c6eWQS8KFuSa3ktEcXpk-oSsCL9ZCVAgv7S0Eg_w,16
-inmanta_module_podman-0.3.1.dist-info/RECORD,,
+inmanta_module_podman-0.4.0.dist-info/METADATA,sha256=_yYNe8K6m32B2pt-7TsPND5_1kSOe0Fa1BAS5rcbZGE,821
+inmanta_module_podman-0.4.0.dist-info/WHEEL,sha256=GJ7t_kWBFywbagK5eo9IoUwLW6oyOeTKmQ-9iHFVNxQ,92
+inmanta_module_podman-0.4.0.dist-info/top_level.txt,sha256=rb9c6eWQS8KFuSa3ktEcXpk-oSsCL9ZCVAgv7S0Eg_w,16
+inmanta_module_podman-0.4.0.dist-info/RECORD,,
```


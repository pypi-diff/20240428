# Comparing `tmp/pygpt_net-2.1.9.tar.gz` & `tmp/pygpt_net-2.2.0.tar.gz`

## filetype from file(1)

```diff
@@ -1 +1 @@
-gzip compressed data, was "pygpt_net-2.1.9.tar", max compression
+gzip compressed data, was "pygpt_net-2.2.0.tar", max compression
```

## Comparing `pygpt_net-2.1.9.tar` & `pygpt_net-2.2.0.tar`

### file list

```diff
@@ -1,707 +1,844 @@
--rwxr-xr-x   0        0        0    43210 2024-03-04 20:11:18.535086 pygpt_net-2.1.9/CHANGELOG.md
--rwxr-xr-x   0        0        0     1077 2024-02-01 17:53:56.362106 pygpt_net-2.1.9/LICENSE
--rwxr-xr-x   0        0        0   124933 2024-03-04 20:11:13.503159 pygpt_net-2.1.9/README.md
--rwxr-xr-x   0        0        0    13970 2024-02-19 21:38:20.920806 pygpt_net-2.1.9/icon.png
--rw-r--r--   0        0        0     2798 2024-03-04 19:32:05.116881 pygpt_net-2.1.9/pyproject.toml
--rwxr-xr-x   0        0        0    42246 2024-03-04 20:11:25.894979 pygpt_net-2.1.9/src/pygpt_net/CHANGELOG.txt
--rwxr-xr-x   0        0        0     1146 2024-02-01 17:53:56.366106 pygpt_net-2.1.9/src/pygpt_net/LICENSE
--rwxr-xr-x   0        0        0      983 2024-03-04 19:33:21.748663 pygpt_net-2.1.9/src/pygpt_net/__init__.py
--rwxr-xr-x   0        0        0    13698 2024-03-03 03:52:54.350656 pygpt_net-2.1.9/src/pygpt_net/app.py
--rwxr-xr-x   0        0        0    11573 2024-03-04 20:31:17.344277 pygpt_net-2.1.9/src/pygpt_net/config.py
--rwxr-xr-x   0        0        0     3350 2024-02-24 01:55:58.445111 pygpt_net-2.1.9/src/pygpt_net/container.py
--rwxr-xr-x   0        0        0     4314 2024-02-15 05:07:04.118540 pygpt_net-2.1.9/src/pygpt_net/controller/__init__.py
--rw-r--r--   0        0        0     4662 2024-02-25 05:32:34.229344 pygpt_net-2.1.9/src/pygpt_net/controller/agent/__init__.py
--rw-r--r--   0        0        0     6569 2024-02-16 04:01:43.038864 pygpt_net-2.1.9/src/pygpt_net/controller/agent/flow.py
--rw-r--r--   0        0        0    10190 2024-02-21 19:09:37.240983 pygpt_net-2.1.9/src/pygpt_net/controller/assistant/__init__.py
--rw-r--r--   0        0        0     9873 2024-02-18 06:49:52.490113 pygpt_net-2.1.9/src/pygpt_net/controller/assistant/editor.py
--rw-r--r--   0        0        0    14478 2024-02-22 03:36:30.096422 pygpt_net-2.1.9/src/pygpt_net/controller/assistant/files.py
--rw-r--r--   0        0        0    12751 2024-02-22 03:36:30.096422 pygpt_net-2.1.9/src/pygpt_net/controller/assistant/threads.py
--rwxr-xr-x   0        0        0    14495 2024-02-22 03:36:30.096422 pygpt_net-2.1.9/src/pygpt_net/controller/attachment.py
--rwxr-xr-x   0        0        0     5234 2024-02-28 03:58:59.305445 pygpt_net-2.1.9/src/pygpt_net/controller/audio.py
--rw-r--r--   0        0        0     4498 2024-03-01 03:17:53.453929 pygpt_net-2.1.9/src/pygpt_net/controller/calendar/__init__.py
--rw-r--r--   0        0        0     7349 2024-03-01 03:17:53.453929 pygpt_net-2.1.9/src/pygpt_net/controller/calendar/note.py
--rwxr-xr-x   0        0        0    12787 2024-02-29 03:07:51.274132 pygpt_net-2.1.9/src/pygpt_net/controller/camera.py
--rw-r--r--   0        0        0     1436 2024-01-13 16:28:42.715718 pygpt_net-2.1.9/src/pygpt_net/controller/chat/__init__.py
--rwxr-xr-x   0        0        0     9758 2024-02-16 04:01:43.038864 pygpt_net-2.1.9/src/pygpt_net/controller/chat/common.py
--rw-r--r--   0        0        0     2149 2024-01-30 20:56:32.772879 pygpt_net-2.1.9/src/pygpt_net/controller/chat/files.py
--rwxr-xr-x   0        0        0     8583 2024-01-31 15:19:17.738030 pygpt_net-2.1.9/src/pygpt_net/controller/chat/image.py
--rwxr-xr-x   0        0        0     8575 2024-02-25 05:32:34.229344 pygpt_net-2.1.9/src/pygpt_net/controller/chat/input.py
--rwxr-xr-x   0        0        0    10083 2024-02-16 04:01:43.038864 pygpt_net-2.1.9/src/pygpt_net/controller/chat/output.py
--rwxr-xr-x   0        0        0     3647 2024-02-17 21:22:47.341663 pygpt_net-2.1.9/src/pygpt_net/controller/chat/render.py
--rw-r--r--   0        0        0    10821 2024-03-04 20:15:23.083974 pygpt_net-2.1.9/src/pygpt_net/controller/chat/text.py
--rw-r--r--   0        0        0     3054 2024-01-30 20:56:32.772879 pygpt_net-2.1.9/src/pygpt_net/controller/chat/vision.py
--rw-r--r--   0        0        0     4408 2024-01-31 21:39:19.384967 pygpt_net-2.1.9/src/pygpt_net/controller/command.py
--rw-r--r--   0        0        0     3885 2024-01-10 11:56:03.088017 pygpt_net-2.1.9/src/pygpt_net/controller/config/__init__.py
--rw-r--r--   0        0        0        0 2024-01-08 20:36:28.054492 pygpt_net-2.1.9/src/pygpt_net/controller/config/field/__init__.py
--rwxr-xr-x   0        0        0     2422 2024-01-30 20:56:32.772879 pygpt_net-2.1.9/src/pygpt_net/controller/config/field/checkbox.py
--rw-r--r--   0        0        0     2335 2024-01-30 20:56:32.772879 pygpt_net-2.1.9/src/pygpt_net/controller/config/field/combo.py
--rw-r--r--   0        0        0     6531 2024-02-25 00:27:02.858945 pygpt_net-2.1.9/src/pygpt_net/controller/config/field/dictionary.py
--rw-r--r--   0        0        0     3312 2024-01-30 20:56:32.772879 pygpt_net-2.1.9/src/pygpt_net/controller/config/field/input.py
--rw-r--r--   0        0        0     4582 2024-01-30 20:56:32.772879 pygpt_net-2.1.9/src/pygpt_net/controller/config/field/slider.py
--rw-r--r--   0        0        0     2281 2024-01-30 20:56:32.772879 pygpt_net-2.1.9/src/pygpt_net/controller/config/field/textarea.py
--rw-r--r--   0        0        0     5219 2024-03-01 17:40:19.825274 pygpt_net-2.1.9/src/pygpt_net/controller/config/placeholder.py
--rw-r--r--   0        0        0    15990 2024-02-27 05:21:39.767084 pygpt_net-2.1.9/src/pygpt_net/controller/ctx/__init__.py
--rw-r--r--   0        0        0     5692 2024-02-23 01:50:39.602419 pygpt_net-2.1.9/src/pygpt_net/controller/ctx/common.py
--rw-r--r--   0        0        0     2552 2024-01-25 22:43:11.543975 pygpt_net-2.1.9/src/pygpt_net/controller/ctx/summarizer.py
--rwxr-xr-x   0        0        0     6527 2024-02-28 03:58:59.305445 pygpt_net-2.1.9/src/pygpt_net/controller/debug.py
--rw-r--r--   0        0        0     1008 2023-12-31 03:09:04.107766 pygpt_net-2.1.9/src/pygpt_net/controller/dialogs/__init__.py
--rwxr-xr-x   0        0        0     6768 2024-02-23 02:31:25.633179 pygpt_net-2.1.9/src/pygpt_net/controller/dialogs/confirm.py
--rw-r--r--   0        0        0     5570 2024-02-25 22:01:41.690831 pygpt_net-2.1.9/src/pygpt_net/controller/dialogs/debug.py
--rwxr-xr-x   0        0        0     2471 2024-02-01 17:53:56.366106 pygpt_net-2.1.9/src/pygpt_net/controller/dialogs/info.py
--rwxr-xr-x   0        0        0    15200 2024-02-16 15:47:42.083541 pygpt_net-2.1.9/src/pygpt_net/controller/files.py
--rw-r--r--   0        0        0     5926 2024-02-23 01:50:39.602419 pygpt_net-2.1.9/src/pygpt_net/controller/idx/__init__.py
--rw-r--r--   0        0        0     2605 2024-02-29 03:07:51.274132 pygpt_net-2.1.9/src/pygpt_net/controller/idx/common.py
--rw-r--r--   0        0        0    17677 2024-02-29 03:07:51.274132 pygpt_net-2.1.9/src/pygpt_net/controller/idx/indexer.py
--rw-r--r--   0        0        0     7789 2024-03-03 03:52:54.350656 pygpt_net-2.1.9/src/pygpt_net/controller/idx/settings.py
--rw-r--r--   0        0        0     2971 2024-01-30 20:56:32.772879 pygpt_net-2.1.9/src/pygpt_net/controller/lang/__init__.py
--rw-r--r--   0        0        0     4016 2024-02-16 20:38:22.742568 pygpt_net-2.1.9/src/pygpt_net/controller/lang/custom.py
--rw-r--r--   0        0        0    13219 2024-02-29 03:07:51.274132 pygpt_net-2.1.9/src/pygpt_net/controller/lang/mapping.py
--rw-r--r--   0        0        0     3879 2024-01-15 13:47:55.919633 pygpt_net-2.1.9/src/pygpt_net/controller/lang/plugins.py
--rw-r--r--   0        0        0     2634 2024-01-22 12:10:21.917245 pygpt_net-2.1.9/src/pygpt_net/controller/lang/settings.py
--rwxr-xr-x   0        0        0     1566 2024-01-04 07:51:17.999390 pygpt_net-2.1.9/src/pygpt_net/controller/launcher.py
--rwxr-xr-x   0        0        0     8825 2024-02-24 01:55:58.445111 pygpt_net-2.1.9/src/pygpt_net/controller/layout.py
--rw-r--r--   0        0        0     6387 2024-02-18 20:56:31.559530 pygpt_net-2.1.9/src/pygpt_net/controller/mode.py
--rw-r--r--   0        0        0     4656 2024-01-30 20:56:32.772879 pygpt_net-2.1.9/src/pygpt_net/controller/model/__init__.py
--rw-r--r--   0        0        0    12599 2024-02-22 03:36:30.096422 pygpt_net-2.1.9/src/pygpt_net/controller/model/editor.py
--rwxr-xr-x   0        0        0     9567 2024-03-01 03:17:53.457929 pygpt_net-2.1.9/src/pygpt_net/controller/notepad.py
--rw-r--r--   0        0        0     2081 2024-02-15 05:07:04.118540 pygpt_net-2.1.9/src/pygpt_net/controller/painter/__init__.py
--rw-r--r--   0        0        0     4461 2024-01-23 23:46:30.495197 pygpt_net-2.1.9/src/pygpt_net/controller/painter/capture.py
--rw-r--r--   0        0        0     6292 2024-02-17 21:22:47.341663 pygpt_net-2.1.9/src/pygpt_net/controller/painter/common.py
--rw-r--r--   0        0        0    12925 2024-02-28 03:58:59.305445 pygpt_net-2.1.9/src/pygpt_net/controller/plugins/__init__.py
--rw-r--r--   0        0        0     5907 2024-02-03 15:51:10.611289 pygpt_net-2.1.9/src/pygpt_net/controller/plugins/settings.py
--rwxr-xr-x   0        0        0    14286 2024-02-18 20:56:31.559530 pygpt_net-2.1.9/src/pygpt_net/controller/presets/__init__.py
--rwxr-xr-x   0        0        0    14915 2024-02-18 20:56:31.559530 pygpt_net-2.1.9/src/pygpt_net/controller/presets/editor.py
--rw-r--r--   0        0        0     6564 2024-02-17 21:22:47.341663 pygpt_net-2.1.9/src/pygpt_net/controller/settings/__init__.py
--rw-r--r--   0        0        0    12750 2024-03-03 03:52:54.350656 pygpt_net-2.1.9/src/pygpt_net/controller/settings/editor.py
--rw-r--r--   0        0        0     5133 2024-01-23 23:46:30.499197 pygpt_net-2.1.9/src/pygpt_net/controller/theme/__init__.py
--rwxr-xr-x   0        0        0     5329 2024-01-27 21:42:30.960980 pygpt_net-2.1.9/src/pygpt_net/controller/theme/common.py
--rw-r--r--   0        0        0     4939 2024-01-23 20:16:03.144694 pygpt_net-2.1.9/src/pygpt_net/controller/theme/markdown.py
--rw-r--r--   0        0        0     3178 2024-01-23 23:46:30.499197 pygpt_net-2.1.9/src/pygpt_net/controller/theme/menu.py
--rw-r--r--   0        0        0     3357 2024-01-27 21:42:30.960980 pygpt_net-2.1.9/src/pygpt_net/controller/theme/nodes.py
--rw-r--r--   0        0        0     4585 2024-01-31 11:15:00.681079 pygpt_net-2.1.9/src/pygpt_net/controller/ui/__init__.py
--rw-r--r--   0        0        0     4936 2024-02-29 03:07:51.274132 pygpt_net-2.1.9/src/pygpt_net/controller/ui/mode.py
--rw-r--r--   0        0        0     1902 2024-01-23 23:46:30.499197 pygpt_net-2.1.9/src/pygpt_net/controller/ui/vision.py
--rw-r--r--   0        0        0        0 2024-01-26 16:05:36.561120 pygpt_net-2.1.9/src/pygpt_net/core/__init__.py
--rw-r--r--   0        0        0     7728 2024-02-21 19:09:37.240983 pygpt_net-2.1.9/src/pygpt_net/core/assistants/__init__.py
--rwxr-xr-x   0        0        0    10240 2024-01-31 15:19:17.738030 pygpt_net-2.1.9/src/pygpt_net/core/attachments.py
--rw-r--r--   0        0        0     2708 2024-02-24 01:55:58.445111 pygpt_net-2.1.9/src/pygpt_net/core/audio.py
--rw-r--r--   0        0        0     3354 2024-01-31 15:19:17.742029 pygpt_net-2.1.9/src/pygpt_net/core/bridge.py
--rw-r--r--   0        0        0     6646 2024-02-02 19:26:46.615683 pygpt_net-2.1.9/src/pygpt_net/core/calendar/__init__.py
--rwxr-xr-x   0        0        0     4034 2024-02-21 16:18:39.952987 pygpt_net-2.1.9/src/pygpt_net/core/camera.py
--rw-r--r--   0        0        0     3130 2024-01-27 01:08:27.560991 pygpt_net-2.1.9/src/pygpt_net/core/chain/__init__.py
--rw-r--r--   0        0        0     4656 2024-01-27 01:08:27.560991 pygpt_net-2.1.9/src/pygpt_net/core/chain/chat.py
--rw-r--r--   0        0        0     5089 2024-01-27 01:08:27.560991 pygpt_net-2.1.9/src/pygpt_net/core/chain/completion.py
--rwxr-xr-x   0        0        0     9759 2024-02-16 04:01:43.038864 pygpt_net-2.1.9/src/pygpt_net/core/command.py
--rw-r--r--   0        0        0    22242 2024-02-27 05:21:39.767084 pygpt_net-2.1.9/src/pygpt_net/core/ctx/__init__.py
--rw-r--r--   0        0        0     7709 2024-02-27 05:21:39.767084 pygpt_net-2.1.9/src/pygpt_net/core/ctx/idx.py
--rw-r--r--   0        0        0     6519 2024-01-23 23:46:30.499197 pygpt_net-2.1.9/src/pygpt_net/core/db/__init__.py
--rwxr-xr-x   0        0        0     7586 2024-02-22 03:36:30.096422 pygpt_net-2.1.9/src/pygpt_net/core/debug/__init__.py
--rw-r--r--   0        0        0     1467 2024-02-25 18:06:16.205368 pygpt_net-2.1.9/src/pygpt_net/core/debug/agent.py
--rwxr-xr-x   0        0        0     2259 2024-02-25 22:01:41.690831 pygpt_net-2.1.9/src/pygpt_net/core/debug/assistants.py
--rwxr-xr-x   0        0        0     1626 2024-02-25 22:01:41.690831 pygpt_net-2.1.9/src/pygpt_net/core/debug/attachments.py
--rwxr-xr-x   0        0        0     1458 2024-02-25 22:01:41.690831 pygpt_net-2.1.9/src/pygpt_net/core/debug/config.py
--rwxr-xr-x   0        0        0     2958 2024-03-04 19:53:48.502024 pygpt_net-2.1.9/src/pygpt_net/core/debug/context.py
--rw-r--r--   0        0        0     3377 2024-02-27 05:21:39.767084 pygpt_net-2.1.9/src/pygpt_net/core/debug/indexes.py
--rwxr-xr-x   0        0        0     1848 2024-02-25 22:01:41.690831 pygpt_net-2.1.9/src/pygpt_net/core/debug/models.py
--rwxr-xr-x   0        0        0     1258 2024-02-25 22:01:41.690831 pygpt_net-2.1.9/src/pygpt_net/core/debug/plugins.py
--rwxr-xr-x   0        0        0     1994 2024-02-25 22:01:41.690831 pygpt_net-2.1.9/src/pygpt_net/core/debug/presets.py
--rwxr-xr-x   0        0        0     2666 2024-02-25 22:01:41.690831 pygpt_net-2.1.9/src/pygpt_net/core/debug/ui.py
--rwxr-xr-x   0        0        0     7695 2024-03-04 21:11:59.595845 pygpt_net-2.1.9/src/pygpt_net/core/dispatcher.py
--rw-r--r--   0        0        0     7678 2024-02-21 19:09:37.240983 pygpt_net-2.1.9/src/pygpt_net/core/filesystem.py
--rwxr-xr-x   0        0        0     3092 2024-01-23 23:46:30.499197 pygpt_net-2.1.9/src/pygpt_net/core/history.py
--rwxr-xr-x   0        0        0    14729 2024-03-01 17:40:19.825274 pygpt_net-2.1.9/src/pygpt_net/core/idx/__init__.py
--rwxr-xr-x   0        0        0    11006 2024-03-04 19:26:42.821732 pygpt_net-2.1.9/src/pygpt_net/core/idx/chat.py
--rw-r--r--   0        0        0     2226 2024-02-28 03:58:59.309445 pygpt_net-2.1.9/src/pygpt_net/core/idx/context.py
--rwxr-xr-x   0        0        0    25008 2024-03-04 19:26:20.277786 pygpt_net-2.1.9/src/pygpt_net/core/idx/indexing.py
--rw-r--r--   0        0        0     2656 2024-02-28 03:58:59.309445 pygpt_net-2.1.9/src/pygpt_net/core/idx/llm.py
--rw-r--r--   0        0        0        0 2024-02-27 05:21:39.767084 pygpt_net-2.1.9/src/pygpt_net/core/idx/types/__init__.py
--rw-r--r--   0        0        0     3113 2024-02-27 05:21:39.767084 pygpt_net-2.1.9/src/pygpt_net/core/idx/types/ctx.py
--rw-r--r--   0        0        0     4722 2024-02-27 05:21:39.767084 pygpt_net-2.1.9/src/pygpt_net/core/idx/types/external.py
--rw-r--r--   0        0        0     3733 2024-02-27 05:21:39.771084 pygpt_net-2.1.9/src/pygpt_net/core/idx/types/files.py
--rw-r--r--   0        0        0     2766 2024-02-28 03:58:59.309445 pygpt_net-2.1.9/src/pygpt_net/core/idx/worker.py
--rwxr-xr-x   0        0        0     4629 2024-02-22 03:36:30.096422 pygpt_net-2.1.9/src/pygpt_net/core/image.py
--rwxr-xr-x   0        0        0      829 2023-12-31 03:18:56.426282 pygpt_net-2.1.9/src/pygpt_net/core/info.py
--rw-r--r--   0        0        0     2040 2024-01-11 15:56:53.273343 pygpt_net-2.1.9/src/pygpt_net/core/installer.py
--rw-r--r--   0        0        0     1168 2024-01-14 15:51:20.622630 pygpt_net-2.1.9/src/pygpt_net/core/llm/__init__.py
--rwxr-xr-x   0        0        0     4814 2024-01-23 23:46:30.499197 pygpt_net-2.1.9/src/pygpt_net/core/locale.py
--rw-r--r--   0        0        0     7573 2024-01-27 21:42:30.960980 pygpt_net-2.1.9/src/pygpt_net/core/models.py
--rw-r--r--   0        0        0     1913 2024-01-23 23:46:30.499197 pygpt_net-2.1.9/src/pygpt_net/core/modes.py
--rwxr-xr-x   0        0        0     3270 2024-01-27 21:42:30.960980 pygpt_net-2.1.9/src/pygpt_net/core/notepad.py
--rwxr-xr-x   0        0        0     4214 2024-01-23 23:46:30.499197 pygpt_net-2.1.9/src/pygpt_net/core/platforms.py
--rwxr-xr-x   0        0        0     8576 2024-02-24 01:55:58.445111 pygpt_net-2.1.9/src/pygpt_net/core/plugins.py
--rw-r--r--   0        0        0     9286 2024-02-01 18:18:38.554891 pygpt_net-2.1.9/src/pygpt_net/core/presets.py
--rw-r--r--   0        0        0     2167 2024-02-27 03:03:23.430567 pygpt_net-2.1.9/src/pygpt_net/core/prompt.py
--rw-r--r--   0        0        0      489 2024-01-05 12:12:41.797675 pygpt_net-2.1.9/src/pygpt_net/core/render/__init__.py
--rw-r--r--   0        0        0     2454 2024-02-17 21:22:47.341663 pygpt_net-2.1.9/src/pygpt_net/core/render/base.py
--rw-r--r--   0        0        0      489 2024-01-05 12:12:41.797675 pygpt_net-2.1.9/src/pygpt_net/core/render/markdown/__init__.py
--rwxr-xr-x   0        0        0     3111 2024-02-22 04:14:57.246812 pygpt_net-2.1.9/src/pygpt_net/core/render/markdown/parser.py
--rwxr-xr-x   0        0        0    14959 2024-02-21 19:09:37.240983 pygpt_net-2.1.9/src/pygpt_net/core/render/markdown/renderer.py
--rw-r--r--   0        0        0      489 2024-01-05 13:07:04.262555 pygpt_net-2.1.9/src/pygpt_net/core/render/plain/__init__.py
--rw-r--r--   0        0        0    12471 2024-02-17 21:22:47.341663 pygpt_net-2.1.9/src/pygpt_net/core/render/plain/renderer.py
--rwxr-xr-x   0        0        0     6333 2024-02-17 21:22:47.341663 pygpt_net-2.1.9/src/pygpt_net/core/settings.py
--rwxr-xr-x   0        0        0    14040 2024-02-25 18:06:16.205368 pygpt_net-2.1.9/src/pygpt_net/core/tokens.py
--rw-r--r--   0        0        0    13722 2024-02-21 19:09:37.240983 pygpt_net-2.1.9/src/pygpt_net/core/updater/__init__.py
--rw-r--r--   0        0        0     2343 2024-02-24 01:55:58.445111 pygpt_net-2.1.9/src/pygpt_net/core/web.py
--rw-r--r--   0        0        0      901 2024-01-25 22:43:11.543975 pygpt_net-2.1.9/src/pygpt_net/core/worker.py
--rwxr-xr-x   0        0        0     7577 2024-03-04 20:18:09.982252 pygpt_net-2.1.9/src/pygpt_net/data/config/config.json
--rwxr-xr-x   0        0        0    14349 2024-03-04 19:33:01.244722 pygpt_net-2.1.9/src/pygpt_net/data/config/models.json
--rw-r--r--   0        0        0     1440 2024-03-04 19:32:57.500732 pygpt_net-2.1.9/src/pygpt_net/data/config/modes.json
--rwxr-xr-x   0        0        0      459 2024-01-13 13:04:53.113674 pygpt_net-2.1.9/src/pygpt_net/data/config/presets/batman_and_joker.json
--rw-r--r--   0        0        0     2702 2024-01-30 17:23:19.885579 pygpt_net-2.1.9/src/pygpt_net/data/config/presets/current.agent.json
--rwxr-xr-x   0        0        0      368 2024-01-30 17:23:19.885579 pygpt_net-2.1.9/src/pygpt_net/data/config/presets/current.assistant.json
--rwxr-xr-x   0        0        0      396 2024-01-30 17:23:19.885579 pygpt_net-2.1.9/src/pygpt_net/data/config/presets/current.chat.json
--rwxr-xr-x   0        0        0      385 2024-01-30 17:23:19.885579 pygpt_net-2.1.9/src/pygpt_net/data/config/presets/current.completion.json
--rwxr-xr-x   0        0        0      368 2024-01-30 17:23:19.885579 pygpt_net-2.1.9/src/pygpt_net/data/config/presets/current.img.json
--rwxr-xr-x   0        0        0      382 2024-01-30 17:23:19.885579 pygpt_net-2.1.9/src/pygpt_net/data/config/presets/current.langchain.json
--rw-r--r--   0        0        0      368 2024-03-03 02:59:46.037803 pygpt_net-2.1.9/src/pygpt_net/data/config/presets/current.llama_index.json
--rwxr-xr-x   0        0        0      392 2024-03-03 03:52:54.350656 pygpt_net-2.1.9/src/pygpt_net/data/config/presets/current.vision.json
--rwxr-xr-x   0        0        0      501 2024-01-30 17:23:19.885579 pygpt_net-2.1.9/src/pygpt_net/data/config/presets/dalle_white_cat.json
--rwxr-xr-x   0        0        0    23304 2024-03-04 20:18:14.602208 pygpt_net-2.1.9/src/pygpt_net/data/config/settings.json
--rw-r--r--   0        0        0      736 2024-02-01 17:53:56.366106 pygpt_net-2.1.9/src/pygpt_net/data/config/settings_section.json
--rw-r--r--   0        0        0      664 2024-01-20 12:18:41.475899 pygpt_net-2.1.9/src/pygpt_net/data/css/fix_windows.css
--rw-r--r--   0        0        0      489 2024-01-04 08:28:16.417936 pygpt_net-2.1.9/src/pygpt_net/data/css/markdown.css
--rw-r--r--   0        0        0      516 2024-01-23 23:46:30.499197 pygpt_net-2.1.9/src/pygpt_net/data/css/markdown.dark.css
--rw-r--r--   0        0        0      461 2024-01-23 23:46:30.499197 pygpt_net-2.1.9/src/pygpt_net/data/css/markdown.light.css
--rw-r--r--   0        0        0      400 2024-01-12 03:59:56.290336 pygpt_net-2.1.9/src/pygpt_net/data/css/style.css
--rw-r--r--   0        0        0      559 2024-01-27 21:42:30.960980 pygpt_net-2.1.9/src/pygpt_net/data/css/style.dark.css
--rw-r--r--   0        0        0     1157 2024-01-27 21:42:30.960980 pygpt_net-2.1.9/src/pygpt_net/data/css/style.light.css
--rwxr-xr-x   0        0        0    69484 2023-12-08 15:03:16.000000 pygpt_net-2.1.9/src/pygpt_net/data/fonts/Lato/Lato-Black.ttf
--rwxr-xr-x   0        0        0    71948 2023-12-08 15:03:16.000000 pygpt_net-2.1.9/src/pygpt_net/data/fonts/Lato/Lato-BlackItalic.ttf
--rwxr-xr-x   0        0        0    73316 2023-12-08 15:03:16.000000 pygpt_net-2.1.9/src/pygpt_net/data/fonts/Lato/Lato-Bold.ttf
--rwxr-xr-x   0        0        0    77680 2023-12-08 15:03:16.000000 pygpt_net-2.1.9/src/pygpt_net/data/fonts/Lato/Lato-BoldItalic.ttf
--rwxr-xr-x   0        0        0    75744 2023-12-08 15:03:16.000000 pygpt_net-2.1.9/src/pygpt_net/data/fonts/Lato/Lato-Italic.ttf
--rwxr-xr-x   0        0        0    77192 2023-12-08 15:03:16.000000 pygpt_net-2.1.9/src/pygpt_net/data/fonts/Lato/Lato-Light.ttf
--rwxr-xr-x   0        0        0    49064 2023-12-08 15:03:16.000000 pygpt_net-2.1.9/src/pygpt_net/data/fonts/Lato/Lato-LightItalic.ttf
--rwxr-xr-x   0        0        0    75136 2023-12-08 15:03:16.000000 pygpt_net-2.1.9/src/pygpt_net/data/fonts/Lato/Lato-Regular.ttf
--rwxr-xr-x   0        0        0    69968 2023-12-08 15:03:16.000000 pygpt_net-2.1.9/src/pygpt_net/data/fonts/Lato/Lato-Thin.ttf
--rwxr-xr-x   0        0        0    48848 2023-12-08 15:03:16.000000 pygpt_net-2.1.9/src/pygpt_net/data/fonts/Lato/Lato-ThinItalic.ttf
--rwxr-xr-x   0        0        0     4500 2023-12-08 15:03:16.000000 pygpt_net-2.1.9/src/pygpt_net/data/fonts/Lato/OFL.txt
--rwxr-xr-x   0        0        0     3461 2023-04-14 00:10:28.000000 pygpt_net-2.1.9/src/pygpt_net/data/icon.ico
--rwxr-xr-x   0        0        0    13970 2023-04-14 00:10:28.000000 pygpt_net-2.1.9/src/pygpt_net/data/icon.png
--rw-r--r--   0        0        0     5471 2024-01-29 18:11:38.035830 pygpt_net-2.1.9/src/pygpt_net/data/icon_tray_busy.ico
--rw-r--r--   0        0        0    14837 2024-01-29 18:11:38.035830 pygpt_net-2.1.9/src/pygpt_net/data/icon_tray_error.ico
--rw-r--r--   0        0        0     4209 2024-01-29 18:11:38.035830 pygpt_net-2.1.9/src/pygpt_net/data/icon_tray_idle.ico
--rw-r--r--   0        0        0      538 2024-01-30 17:23:19.885579 pygpt_net-2.1.9/src/pygpt_net/data/icons/abc.svg
--rw-r--r--   0        0        0      178 2024-01-30 17:23:19.885579 pygpt_net-2.1.9/src/pygpt_net/data/icons/add.svg
--rw-r--r--   0        0        0      463 2024-01-30 17:23:19.885579 pygpt_net-2.1.9/src/pygpt_net/data/icons/add_circle.svg
--rw-r--r--   0        0        0      348 2024-01-30 17:23:19.885579 pygpt_net-2.1.9/src/pygpt_net/data/icons/add_folder.svg
--rw-r--r--   0        0        0      391 2024-01-30 17:23:19.885579 pygpt_net-2.1.9/src/pygpt_net/data/icons/add_library.svg
--rw-r--r--   0        0        0      558 2024-01-30 17:23:19.885579 pygpt_net-2.1.9/src/pygpt_net/data/icons/alarm.svg
--rw-r--r--   0        0        0     1027 2024-01-30 17:23:19.885579 pygpt_net-2.1.9/src/pygpt_net/data/icons/apps.svg
--rw-r--r--   0        0        0      267 2024-01-30 17:23:19.885579 pygpt_net-2.1.9/src/pygpt_net/data/icons/asterisk.svg
--rw-r--r--   0        0        0      429 2024-01-30 17:23:19.885579 pygpt_net-2.1.9/src/pygpt_net/data/icons/attachment.svg
--rw-r--r--   0        0        0      422 2024-01-30 17:23:19.885579 pygpt_net-2.1.9/src/pygpt_net/data/icons/attachments.svg
--rw-r--r--   0        0        0      185 2024-01-30 17:23:19.885579 pygpt_net-2.1.9/src/pygpt_net/data/icons/back.svg
--rw-r--r--   0        0        0      395 2024-01-30 17:23:19.885579 pygpt_net-2.1.9/src/pygpt_net/data/icons/backspace.svg
--rw-r--r--   0        0        0      472 2024-01-30 17:23:19.885579 pygpt_net-2.1.9/src/pygpt_net/data/icons/block.svg
--rw-r--r--   0        0        0      255 2024-01-30 17:23:19.885579 pygpt_net-2.1.9/src/pygpt_net/data/icons/bookmark.svg
--rw-r--r--   0        0        0      423 2024-01-30 17:23:19.885579 pygpt_net-2.1.9/src/pygpt_net/data/icons/brush.svg
--rw-r--r--   0        0        0      523 2024-01-30 17:23:19.885579 pygpt_net-2.1.9/src/pygpt_net/data/icons/build.svg
--rw-r--r--   0        0        0      927 2024-01-30 17:23:19.885579 pygpt_net-2.1.9/src/pygpt_net/data/icons/calendar.svg
--rw-r--r--   0        0        0      496 2024-01-30 17:23:19.885579 pygpt_net-2.1.9/src/pygpt_net/data/icons/camera.svg
--rw-r--r--   0        0        0      336 2024-01-30 17:23:19.885579 pygpt_net-2.1.9/src/pygpt_net/data/icons/chat.svg
--rw-r--r--   0        0        0      174 2024-01-30 17:23:19.885579 pygpt_net-2.1.9/src/pygpt_net/data/icons/check.svg
--rw-r--r--   0        0        0      459 2024-01-30 17:23:19.885579 pygpt_net-2.1.9/src/pygpt_net/data/icons/check_circle.svg
--rw-r--r--   0        0        0      265 2024-01-30 17:23:19.885579 pygpt_net-2.1.9/src/pygpt_net/data/icons/checklist.svg
--rw-r--r--   0        0        0      406 2024-01-30 17:23:19.885579 pygpt_net-2.1.9/src/pygpt_net/data/icons/circle.svg
--rw-r--r--   0        0        0      191 2024-01-30 17:23:19.885579 pygpt_net-2.1.9/src/pygpt_net/data/icons/clear.svg
--rw-r--r--   0        0        0      411 2024-01-30 17:23:19.885579 pygpt_net-2.1.9/src/pygpt_net/data/icons/clock.svg
--rw-r--r--   0        0        0      218 2024-01-30 17:23:19.885579 pygpt_net-2.1.9/src/pygpt_net/data/icons/close.svg
--rw-r--r--   0        0        0      503 2024-01-30 17:23:19.885579 pygpt_net-2.1.9/src/pygpt_net/data/icons/close_circle.svg
--rw-r--r--   0        0        0      224 2024-01-30 17:23:19.885579 pygpt_net-2.1.9/src/pygpt_net/data/icons/code.svg
--rw-r--r--   0        0        0      298 2024-01-30 17:23:19.885579 pygpt_net-2.1.9/src/pygpt_net/data/icons/computer.svg
--rw-r--r--   0        0        0      336 2024-01-30 17:23:19.885579 pygpt_net-2.1.9/src/pygpt_net/data/icons/copy.svg
--rw-r--r--   0        0        0      264 2024-01-30 17:23:19.885579 pygpt_net-2.1.9/src/pygpt_net/data/icons/crop.svg
--rw-r--r--   0        0        0      666 2024-01-30 17:23:19.885579 pygpt_net-2.1.9/src/pygpt_net/data/icons/cut.svg
--rw-r--r--   0        0        0      725 2024-01-30 17:23:19.885579 pygpt_net-2.1.9/src/pygpt_net/data/icons/db.svg
--rw-r--r--   0        0        0      271 2024-01-30 17:23:19.889579 pygpt_net-2.1.9/src/pygpt_net/data/icons/delete.svg
--rw-r--r--   0        0        0      174 2024-01-30 17:23:19.889579 pygpt_net-2.1.9/src/pygpt_net/data/icons/done.svg
--rw-r--r--   0        0        0      274 2024-01-30 17:23:19.889579 pygpt_net-2.1.9/src/pygpt_net/data/icons/download.svg
--rw-r--r--   0        0        0      283 2024-01-30 17:23:19.889579 pygpt_net-2.1.9/src/pygpt_net/data/icons/draft.svg
--rw-r--r--   0        0        0      323 2024-01-30 17:23:19.889579 pygpt_net-2.1.9/src/pygpt_net/data/icons/drag.svg
--rw-r--r--   0        0        0      325 2024-01-30 17:23:19.889579 pygpt_net-2.1.9/src/pygpt_net/data/icons/edit.svg
--rw-r--r--   0        0        0      497 2024-01-30 17:23:19.889579 pygpt_net-2.1.9/src/pygpt_net/data/icons/emergency.svg
--rw-r--r--   0        0        0      195 2024-01-30 17:23:19.889579 pygpt_net-2.1.9/src/pygpt_net/data/icons/equalizer.svg
--rw-r--r--   0        0        0      533 2024-01-30 17:23:19.889579 pygpt_net-2.1.9/src/pygpt_net/data/icons/error.svg
--rw-r--r--   0        0        0      372 2024-01-30 17:23:19.889579 pygpt_net-2.1.9/src/pygpt_net/data/icons/event_available.svg
--rw-r--r--   0        0        0      174 2024-01-30 17:23:19.889579 pygpt_net-2.1.9/src/pygpt_net/data/icons/expand.svg
--rw-r--r--   0        0        0      247 2024-01-30 17:23:19.889579 pygpt_net-2.1.9/src/pygpt_net/data/icons/fast_forward.svg
--rw-r--r--   0        0        0      250 2024-01-30 17:23:19.889579 pygpt_net-2.1.9/src/pygpt_net/data/icons/fast_rewind.svg
--rw-r--r--   0        0        0      504 2024-01-30 17:23:19.889579 pygpt_net-2.1.9/src/pygpt_net/data/icons/favorite.svg
--rw-r--r--   0        0        0      297 2024-01-30 17:23:19.889579 pygpt_net-2.1.9/src/pygpt_net/data/icons/folder.svg
--rw-r--r--   0        0        0      249 2024-01-30 17:23:19.889579 pygpt_net-2.1.9/src/pygpt_net/data/icons/folder_filled.svg
--rw-r--r--   0        0        0      186 2024-01-30 17:23:19.889579 pygpt_net-2.1.9/src/pygpt_net/data/icons/forward.svg
--rw-r--r--   0        0        0      194 2024-01-30 17:23:19.889579 pygpt_net-2.1.9/src/pygpt_net/data/icons/full.svg
--rw-r--r--   0        0        0      249 2024-01-30 17:23:19.889579 pygpt_net-2.1.9/src/pygpt_net/data/icons/fullscreen.svg
--rw-r--r--   0        0        0      459 2024-01-30 17:23:19.889579 pygpt_net-2.1.9/src/pygpt_net/data/icons/grid.svg
--rw-r--r--   0        0        0      602 2024-01-30 17:23:19.889579 pygpt_net-2.1.9/src/pygpt_net/data/icons/hearing.svg
--rw-r--r--   0        0        0      691 2024-01-30 17:23:19.889579 pygpt_net-2.1.9/src/pygpt_net/data/icons/help.svg
--rw-r--r--   0        0        0      440 2024-01-30 17:23:19.889579 pygpt_net-2.1.9/src/pygpt_net/data/icons/history.svg
--rw-r--r--   0        0        0      239 2024-01-30 17:23:19.889579 pygpt_net-2.1.9/src/pygpt_net/data/icons/home.svg
--rw-r--r--   0        0        0      176 2024-01-30 17:23:19.889579 pygpt_net-2.1.9/src/pygpt_net/data/icons/home_filled.svg
--rw-r--r--   0        0        0      323 2024-01-30 17:23:19.889579 pygpt_net-2.1.9/src/pygpt_net/data/icons/image.svg
--rw-r--r--   0        0        0      531 2024-01-30 17:23:19.889579 pygpt_net-2.1.9/src/pygpt_net/data/icons/info.svg
--rw-r--r--   0        0        0      337 2024-01-30 17:23:19.889579 pygpt_net-2.1.9/src/pygpt_net/data/icons/input.svg
--rw-r--r--   0        0        0      541 2024-01-30 17:23:19.889579 pygpt_net-2.1.9/src/pygpt_net/data/icons/key.svg
--rw-r--r--   0        0        0      517 2024-01-30 17:23:19.889579 pygpt_net-2.1.9/src/pygpt_net/data/icons/keyboard.svg
--rw-r--r--   0        0        0      972 2024-01-30 17:23:19.889579 pygpt_net-2.1.9/src/pygpt_net/data/icons/language.svg
--rw-r--r--   0        0        0      491 2024-01-30 17:23:19.889579 pygpt_net-2.1.9/src/pygpt_net/data/icons/list.svg
--rw-r--r--   0        0        0      495 2024-01-30 17:23:19.889579 pygpt_net-2.1.9/src/pygpt_net/data/icons/lock.svg
--rw-r--r--   0        0        0      273 2024-01-30 17:23:19.889579 pygpt_net-2.1.9/src/pygpt_net/data/icons/logout.svg
--rw-r--r--   0        0        0      392 2024-01-30 17:23:19.889579 pygpt_net-2.1.9/src/pygpt_net/data/icons/map.svg
--rw-r--r--   0        0        0      431 2024-01-30 17:23:19.889579 pygpt_net-2.1.9/src/pygpt_net/data/icons/memory.svg
--rw-r--r--   0        0        0      189 2024-01-30 17:23:19.889579 pygpt_net-2.1.9/src/pygpt_net/data/icons/menu.svg
--rw-r--r--   0        0        0      447 2024-01-30 17:23:19.889579 pygpt_net-2.1.9/src/pygpt_net/data/icons/mic.svg
--rw-r--r--   0        0        0      485 2024-01-30 17:23:19.889579 pygpt_net-2.1.9/src/pygpt_net/data/icons/mic_off.svg
--rw-r--r--   0        0        0      423 2024-01-30 17:23:19.889579 pygpt_net-2.1.9/src/pygpt_net/data/icons/more_horizontal.svg
--rw-r--r--   0        0        0      491 2024-01-30 17:23:19.889579 pygpt_net-2.1.9/src/pygpt_net/data/icons/mute.svg
--rw-r--r--   0        0        0      296 2024-01-30 17:23:19.889579 pygpt_net-2.1.9/src/pygpt_net/data/icons/open_tab.svg
--rw-r--r--   0        0        0      846 2024-01-30 17:23:19.889579 pygpt_net-2.1.9/src/pygpt_net/data/icons/palette.svg
--rw-r--r--   0        0        0      431 2024-01-30 17:23:19.889579 pygpt_net-2.1.9/src/pygpt_net/data/icons/paste.svg
--rw-r--r--   0        0        0      250 2024-01-30 17:23:19.889579 pygpt_net-2.1.9/src/pygpt_net/data/icons/pause.svg
--rw-r--r--   0        0        0      454 2024-01-30 17:23:19.889579 pygpt_net-2.1.9/src/pygpt_net/data/icons/pause_circle.svg
--rw-r--r--   0        0        0      377 2024-01-30 17:23:19.889579 pygpt_net-2.1.9/src/pygpt_net/data/icons/photos.svg
--rw-r--r--   0        0        0      441 2024-01-30 17:23:19.889579 pygpt_net-2.1.9/src/pygpt_net/data/icons/pin.svg
--rw-r--r--   0        0        0      186 2024-01-30 17:23:19.889579 pygpt_net-2.1.9/src/pygpt_net/data/icons/play.svg
--rw-r--r--   0        0        0      197 2024-01-30 17:23:19.889579 pygpt_net-2.1.9/src/pygpt_net/data/icons/play_pause.svg
--rw-r--r--   0        0        0      246 2024-01-30 17:23:19.889579 pygpt_net-2.1.9/src/pygpt_net/data/icons/playlist_add.svg
--rw-r--r--   0        0        0      318 2024-01-30 17:23:19.889579 pygpt_net-2.1.9/src/pygpt_net/data/icons/power.svg
--rw-r--r--   0        0        0      478 2024-01-30 17:23:19.889579 pygpt_net-2.1.9/src/pygpt_net/data/icons/print.svg
--rw-r--r--   0        0        0      598 2024-01-30 17:23:19.889579 pygpt_net-2.1.9/src/pygpt_net/data/icons/public_filled.svg
--rw-r--r--   0        0        0      283 2024-01-30 20:56:32.772879 pygpt_net-2.1.9/src/pygpt_net/data/icons/redo.svg
--rw-r--r--   0        0        0      329 2024-01-30 17:23:19.889579 pygpt_net-2.1.9/src/pygpt_net/data/icons/reload.svg
--rw-r--r--   0        0        0      260 2024-01-30 17:23:19.889579 pygpt_net-2.1.9/src/pygpt_net/data/icons/repeat.svg
--rw-r--r--   0        0        0      400 2024-01-30 17:23:19.889579 pygpt_net-2.1.9/src/pygpt_net/data/icons/replay.svg
--rw-r--r--   0        0        0      401 2024-01-30 17:23:19.889579 pygpt_net-2.1.9/src/pygpt_net/data/icons/resize.svg
--rw-r--r--   0        0        0      615 2024-01-30 17:23:19.889579 pygpt_net-2.1.9/src/pygpt_net/data/icons/robot.svg
--rw-r--r--   0        0        0      807 2024-01-30 17:23:19.889579 pygpt_net-2.1.9/src/pygpt_net/data/icons/router.svg
--rw-r--r--   0        0        0      384 2024-01-30 17:23:19.889579 pygpt_net-2.1.9/src/pygpt_net/data/icons/save.svg
--rw-r--r--   0        0        0      469 2024-01-30 17:23:19.889579 pygpt_net-2.1.9/src/pygpt_net/data/icons/schedule.svg
--rw-r--r--   0        0        0      396 2024-01-30 17:23:19.889579 pygpt_net-2.1.9/src/pygpt_net/data/icons/screenshot.svg
--rw-r--r--   0        0        0      372 2024-01-30 17:23:19.889579 pygpt_net-2.1.9/src/pygpt_net/data/icons/search.svg
--rw-r--r--   0        0        0      274 2024-01-30 17:23:19.889579 pygpt_net-2.1.9/src/pygpt_net/data/icons/security.svg
--rw-r--r--   0        0        0      660 2024-01-30 17:23:19.889579 pygpt_net-2.1.9/src/pygpt_net/data/icons/sensors.svg
--rw-r--r--   0        0        0      767 2024-01-30 17:23:19.889579 pygpt_net-2.1.9/src/pygpt_net/data/icons/settings.svg
--rw-r--r--   0        0        0      475 2024-01-30 17:23:19.889579 pygpt_net-2.1.9/src/pygpt_net/data/icons/settings_filled.svg
--rw-r--r--   0        0        0      792 2024-01-30 17:23:19.889579 pygpt_net-2.1.9/src/pygpt_net/data/icons/share.svg
--rw-r--r--   0        0        0      469 2024-01-30 17:23:19.889579 pygpt_net-2.1.9/src/pygpt_net/data/icons/shedule.svg
--rw-r--r--   0        0        0      189 2024-01-30 17:23:19.889579 pygpt_net-2.1.9/src/pygpt_net/data/icons/sort.svg
--rw-r--r--   0        0        0      386 2024-01-30 17:23:19.889579 pygpt_net-2.1.9/src/pygpt_net/data/icons/stack.svg
--rw-r--r--   0        0        0      306 2024-01-30 17:23:19.889579 pygpt_net-2.1.9/src/pygpt_net/data/icons/stacks.svg
--rw-r--r--   0        0        0      291 2024-01-30 17:23:19.889579 pygpt_net-2.1.9/src/pygpt_net/data/icons/star.svg
--rw-r--r--   0        0        0      188 2024-01-30 17:23:19.893578 pygpt_net-2.1.9/src/pygpt_net/data/icons/stop.svg
--rw-r--r--   0        0        0      432 2024-01-30 17:23:19.893578 pygpt_net-2.1.9/src/pygpt_net/data/icons/stop_circle.svg
--rw-r--r--   0        0        0      381 2024-01-30 17:23:19.893578 pygpt_net-2.1.9/src/pygpt_net/data/icons/sync.svg
--rw-r--r--   0        0        0      317 2024-01-30 17:23:19.893578 pygpt_net-2.1.9/src/pygpt_net/data/icons/tag.svg
--rw-r--r--   0        0        0      334 2024-01-30 17:23:19.893578 pygpt_net-2.1.9/src/pygpt_net/data/icons/task.svg
--rw-r--r--   0        0        0      336 2024-01-30 17:23:19.893578 pygpt_net-2.1.9/src/pygpt_net/data/icons/terminal.svg
--rw-r--r--   0        0        0      204 2024-01-30 17:23:19.893578 pygpt_net-2.1.9/src/pygpt_net/data/icons/text.svg
--rw-r--r--   0        0        0      329 2024-01-30 17:23:19.893578 pygpt_net-2.1.9/src/pygpt_net/data/icons/textfile.svg
--rw-r--r--   0        0        0      479 2024-01-30 17:23:19.893578 pygpt_net-2.1.9/src/pygpt_net/data/icons/timer.svg
--rw-r--r--   0        0        0      321 2024-01-30 17:23:19.893578 pygpt_net-2.1.9/src/pygpt_net/data/icons/today.svg
--rw-r--r--   0        0        0      308 2024-01-30 17:23:19.893578 pygpt_net-2.1.9/src/pygpt_net/data/icons/tune.svg
--rw-r--r--   0        0        0      282 2024-01-30 17:23:19.893578 pygpt_net-2.1.9/src/pygpt_net/data/icons/undo.svg
--rw-r--r--   0        0        0      444 2024-01-30 17:23:19.893578 pygpt_net-2.1.9/src/pygpt_net/data/icons/update.svg
--rw-r--r--   0        0        0      392 2024-01-30 17:23:19.893578 pygpt_net-2.1.9/src/pygpt_net/data/icons/updater.svg
--rw-r--r--   0        0        0      276 2024-01-30 17:23:19.893578 pygpt_net-2.1.9/src/pygpt_net/data/icons/upload.svg
--rw-r--r--   0        0        0      339 2024-01-30 17:23:19.893578 pygpt_net-2.1.9/src/pygpt_net/data/icons/video.svg
--rw-r--r--   0        0        0      550 2024-01-30 17:23:19.893578 pygpt_net-2.1.9/src/pygpt_net/data/icons/view.svg
--rw-r--r--   0        0        0      736 2024-01-30 17:23:19.893578 pygpt_net-2.1.9/src/pygpt_net/data/icons/voice.svg
--rw-r--r--   0        0        0      374 2024-01-30 17:23:19.893578 pygpt_net-2.1.9/src/pygpt_net/data/icons/volume.svg
--rw-r--r--   0        0        0      310 2024-01-30 17:23:19.893578 pygpt_net-2.1.9/src/pygpt_net/data/icons/warning.svg
--rw-r--r--   0        0        0      300 2024-01-30 17:23:19.893578 pygpt_net-2.1.9/src/pygpt_net/data/icons/webcam.svg
--rw-r--r--   0        0        0      375 2024-02-29 03:07:51.274132 pygpt_net-2.1.9/src/pygpt_net/data/icons/webcam_off.svg
--rw-r--r--   0        0        0      325 2024-01-30 17:23:19.893578 pygpt_net-2.1.9/src/pygpt_net/data/icons/width.svg
--rw-r--r--   0        0        0      336 2024-01-30 17:23:19.893578 pygpt_net-2.1.9/src/pygpt_net/data/icons/window.svg
--rw-r--r--   0        0        0      365 2024-01-30 17:23:19.893578 pygpt_net-2.1.9/src/pygpt_net/data/icons/work.svg
--rw-r--r--   0        0        0      422 2024-01-30 17:23:19.893578 pygpt_net-2.1.9/src/pygpt_net/data/icons/zoom_in.svg
--rw-r--r--   0        0        0      396 2024-01-30 17:23:19.893578 pygpt_net-2.1.9/src/pygpt_net/data/icons/zoom_out.svg
--rwxr-xr-x   0        0        0    29134 2024-03-01 03:17:53.457929 pygpt_net-2.1.9/src/pygpt_net/data/locale/locale.de.ini
--rwxr-xr-x   0        0        0    34612 2024-03-02 19:51:00.168984 pygpt_net-2.1.9/src/pygpt_net/data/locale/locale.en.ini
--rwxr-xr-x   0        0        0    29222 2024-03-01 17:40:19.825274 pygpt_net-2.1.9/src/pygpt_net/data/locale/locale.es.ini
--rwxr-xr-x   0        0        0    30122 2024-03-01 17:40:19.825274 pygpt_net-2.1.9/src/pygpt_net/data/locale/locale.fr.ini
--rwxr-xr-x   0        0        0    28666 2024-03-01 17:40:19.825274 pygpt_net-2.1.9/src/pygpt_net/data/locale/locale.it.ini
--rwxr-xr-x   0        0        0    28477 2024-03-01 17:40:19.825274 pygpt_net-2.1.9/src/pygpt_net/data/locale/locale.pl.ini
--rwxr-xr-x   0        0        0    40413 2024-03-01 03:17:53.457929 pygpt_net-2.1.9/src/pygpt_net/data/locale/locale.ua.ini
--rwxr-xr-x   0        0        0     1532 2024-02-25 05:32:34.229344 pygpt_net-2.1.9/src/pygpt_net/data/locale/plugin.agent.en.ini
--rwxr-xr-x   0        0        0     1713 2024-02-25 05:32:34.229344 pygpt_net-2.1.9/src/pygpt_net/data/locale/plugin.agent.pl.ini
--rwxr-xr-x   0        0        0     8006 2024-03-01 03:17:53.457929 pygpt_net-2.1.9/src/pygpt_net/data/locale/plugin.audio_input.en.ini
--rwxr-xr-x   0        0        0     7599 2024-02-28 03:58:59.309445 pygpt_net-2.1.9/src/pygpt_net/data/locale/plugin.audio_input.pl.ini
--rwxr-xr-x   0        0        0     2293 2024-02-25 00:27:02.862945 pygpt_net-2.1.9/src/pygpt_net/data/locale/plugin.audio_output.en.ini
--rwxr-xr-x   0        0        0     1390 2024-02-24 01:55:58.445111 pygpt_net-2.1.9/src/pygpt_net/data/locale/plugin.audio_output.pl.ini
--rw-r--r--   0        0        0      766 2024-02-25 05:32:34.229344 pygpt_net-2.1.9/src/pygpt_net/data/locale/plugin.cmd_api.en.ini
--rw-r--r--   0        0        0      850 2024-02-26 21:30:35.305131 pygpt_net-2.1.9/src/pygpt_net/data/locale/plugin.cmd_api.pl.ini
--rwxr-xr-x   0        0        0     2353 2024-02-16 20:38:22.746568 pygpt_net-2.1.9/src/pygpt_net/data/locale/plugin.cmd_code_interpreter.en.ini
--rwxr-xr-x   0        0        0     2573 2024-02-16 20:38:22.746568 pygpt_net-2.1.9/src/pygpt_net/data/locale/plugin.cmd_code_interpreter.pl.ini
--rwxr-xr-x   0        0        0      455 2024-02-25 05:32:34.229344 pygpt_net-2.1.9/src/pygpt_net/data/locale/plugin.cmd_custom.en.ini
--rwxr-xr-x   0        0        0      527 2024-01-30 20:56:32.776879 pygpt_net-2.1.9/src/pygpt_net/data/locale/plugin.cmd_custom.pl.ini
--rwxr-xr-x   0        0        0     7909 2024-03-03 22:43:17.403437 pygpt_net-2.1.9/src/pygpt_net/data/locale/plugin.cmd_files.en.ini
--rwxr-xr-x   0        0        0     7492 2024-02-25 05:32:34.229344 pygpt_net-2.1.9/src/pygpt_net/data/locale/plugin.cmd_files.pl.ini
--rw-r--r--   0        0        0     3998 2024-02-15 05:07:04.118540 pygpt_net-2.1.9/src/pygpt_net/data/locale/plugin.cmd_history.en.ini
--rw-r--r--   0        0        0     4450 2024-02-04 17:46:05.314114 pygpt_net-2.1.9/src/pygpt_net/data/locale/plugin.cmd_history.pl.ini
--rw-r--r--   0        0        0     1992 2024-01-30 20:56:32.776879 pygpt_net-2.1.9/src/pygpt_net/data/locale/plugin.cmd_serial.en.ini
--rw-r--r--   0        0        0     2186 2024-01-30 20:56:32.776879 pygpt_net-2.1.9/src/pygpt_net/data/locale/plugin.cmd_serial.pl.ini
--rwxr-xr-x   0        0        0     6548 2024-03-04 19:44:09.848653 pygpt_net-2.1.9/src/pygpt_net/data/locale/plugin.cmd_web.en.ini
--rwxr-xr-x   0        0        0     6485 2024-03-01 17:40:19.825274 pygpt_net-2.1.9/src/pygpt_net/data/locale/plugin.cmd_web.pl.ini
--rw-r--r--   0        0        0      888 2024-02-01 23:02:10.688691 pygpt_net-2.1.9/src/pygpt_net/data/locale/plugin.crontab.en.ini
--rw-r--r--   0        0        0     1014 2024-02-01 23:02:10.688691 pygpt_net-2.1.9/src/pygpt_net/data/locale/plugin.crontab.pl.ini
--rw-r--r--   0        0        0      409 2024-01-30 20:56:32.776879 pygpt_net-2.1.9/src/pygpt_net/data/locale/plugin.extra_prompt.en.ini
--rw-r--r--   0        0        0      474 2024-01-30 20:56:32.776879 pygpt_net-2.1.9/src/pygpt_net/data/locale/plugin.extra_prompt.pl.ini
--rw-r--r--   0        0        0     2407 2024-03-03 05:47:23.540140 pygpt_net-2.1.9/src/pygpt_net/data/locale/plugin.idx_llama_index.en.ini
--rw-r--r--   0        0        0     1090 2024-01-30 20:56:32.776879 pygpt_net-2.1.9/src/pygpt_net/data/locale/plugin.idx_llama_index.pl.ini
--rw-r--r--   0        0        0      592 2024-01-30 20:56:32.776879 pygpt_net-2.1.9/src/pygpt_net/data/locale/plugin.openai_dalle.en.ini
--rw-r--r--   0        0        0      609 2024-01-30 20:56:32.776879 pygpt_net-2.1.9/src/pygpt_net/data/locale/plugin.openai_dalle.pl.ini
--rw-r--r--   0        0        0     1576 2024-02-15 05:07:04.118540 pygpt_net-2.1.9/src/pygpt_net/data/locale/plugin.openai_vision.en.ini
--rw-r--r--   0        0        0     1764 2024-01-30 20:56:32.776879 pygpt_net-2.1.9/src/pygpt_net/data/locale/plugin.openai_vision.pl.ini
--rwxr-xr-x   0        0        0      631 2024-01-30 20:56:32.776879 pygpt_net-2.1.9/src/pygpt_net/data/locale/plugin.real_time.en.ini
--rwxr-xr-x   0        0        0      752 2024-01-30 20:56:32.776879 pygpt_net-2.1.9/src/pygpt_net/data/locale/plugin.real_time.pl.ini
--rwxr-xr-x   0        0        0    19418 2023-12-14 19:08:45.000000 pygpt_net-2.1.9/src/pygpt_net/data/logo.png
--rwxr-xr-x   0        0        0    31708 2024-02-20 19:10:03.189314 pygpt_net-2.1.9/src/pygpt_net/data/win32/README.rtf
--rwxr-xr-x   0        0        0     1633 2023-04-14 00:10:28.000000 pygpt_net-2.1.9/src/pygpt_net/data/win32/USER-LICENSE.rtf
--rwxr-xr-x   0        0        0    87160 2023-04-14 00:10:28.000000 pygpt_net-2.1.9/src/pygpt_net/data/win32/pygpt.aip
--rwxr-xr-x   0        0        0       45 2023-12-19 15:40:13.000000 pygpt_net-2.1.9/src/pygpt_net/data/win32/qt.conf
--rw-r--r--   0        0        0    21736 2024-03-02 20:04:01.386329 pygpt_net-2.1.9/src/pygpt_net/icons.qrc
--rw-r--r--   0        0        0    90430 2024-03-02 20:05:43.048414 pygpt_net-2.1.9/src/pygpt_net/icons_rc.py
--rw-r--r--   0        0        0      488 2023-12-31 03:12:36.955235 pygpt_net-2.1.9/src/pygpt_net/item/__init__.py
--rw-r--r--   0        0        0     5063 2024-02-21 00:32:47.130497 pygpt_net-2.1.9/src/pygpt_net/item/assistant.py
--rw-r--r--   0        0        0     1816 2024-01-27 21:42:30.960980 pygpt_net-2.1.9/src/pygpt_net/item/attachment.py
--rw-r--r--   0        0        0     2108 2024-01-27 21:42:30.960980 pygpt_net-2.1.9/src/pygpt_net/item/calendar_note.py
--rw-r--r--   0        0        0     9754 2024-03-04 21:08:00.701350 pygpt_net-2.1.9/src/pygpt_net/item/ctx.py
--rw-r--r--   0        0        0     1681 2024-01-27 21:42:30.960980 pygpt_net-2.1.9/src/pygpt_net/item/index.py
--rw-r--r--   0        0        0      600 2023-12-31 03:12:34.283242 pygpt_net-2.1.9/src/pygpt_net/item/mode.py
--rw-r--r--   0        0        0     6208 2024-01-27 21:42:30.960980 pygpt_net-2.1.9/src/pygpt_net/item/model.py
--rw-r--r--   0        0        0     1508 2024-01-27 21:42:30.960980 pygpt_net-2.1.9/src/pygpt_net/item/notepad.py
--rw-r--r--   0        0        0     4052 2024-02-15 05:07:04.122540 pygpt_net-2.1.9/src/pygpt_net/item/preset.py
--rwxr-xr-x   0        0        0     6616 2024-02-24 01:55:58.445111 pygpt_net-2.1.9/src/pygpt_net/launcher.py
--rw-r--r--   0        0        0     2849 2023-12-28 02:55:13.572642 pygpt_net-2.1.9/src/pygpt_net/migrations/Version20231227152900.py
--rw-r--r--   0        0        0      906 2023-12-30 08:47:37.360628 pygpt_net-2.1.9/src/pygpt_net/migrations/Version20231230095000.py
--rw-r--r--   0        0        0      901 2024-01-01 00:17:57.553256 pygpt_net-2.1.9/src/pygpt_net/migrations/Version20231231230000.py
--rw-r--r--   0        0        0     1303 2024-01-06 06:27:36.351928 pygpt_net-2.1.9/src/pygpt_net/migrations/Version20240106060000.py
--rw-r--r--   0        0        0      865 2024-01-07 09:35:02.638810 pygpt_net-2.1.9/src/pygpt_net/migrations/Version20240107060000.py
--rw-r--r--   0        0        0     1756 2024-02-23 01:50:39.602419 pygpt_net-2.1.9/src/pygpt_net/migrations/Version20240222160000.py
--rw-r--r--   0        0        0     1099 2024-02-23 06:06:25.510176 pygpt_net-2.1.9/src/pygpt_net/migrations/Version20240223050000.py
--rw-r--r--   0        0        0      847 2024-03-03 22:43:17.403437 pygpt_net-2.1.9/src/pygpt_net/migrations/Version20240303190000.py
--rw-r--r--   0        0        0     1635 2024-03-03 22:43:17.403437 pygpt_net-2.1.9/src/pygpt_net/migrations/__init__.py
--rw-r--r--   0        0        0      614 2023-12-28 02:55:13.572642 pygpt_net-2.1.9/src/pygpt_net/migrations/base.py
--rwxr-xr-x   0        0        0      488 2023-12-25 22:13:46.802302 pygpt_net-2.1.9/src/pygpt_net/plugin/__init__.py
--rwxr-xr-x   0        0        0    14479 2024-02-25 05:32:34.229344 pygpt_net-2.1.9/src/pygpt_net/plugin/agent/__init__.py
--rwxr-xr-x   0        0        0    22052 2024-03-01 03:17:53.457929 pygpt_net-2.1.9/src/pygpt_net/plugin/audio_input/__init__.py
--rw-r--r--   0        0        0     3787 2024-02-28 03:58:59.309445 pygpt_net-2.1.9/src/pygpt_net/plugin/audio_input/simple.py
--rw-r--r--   0        0        0     9606 2024-02-28 03:58:59.309445 pygpt_net-2.1.9/src/pygpt_net/plugin/audio_input/worker.py
--rwxr-xr-x   0        0        0     6589 2024-02-24 01:55:58.445111 pygpt_net-2.1.9/src/pygpt_net/plugin/audio_output/__init__.py
--rw-r--r--   0        0        0     1763 2024-03-04 20:35:51.194582 pygpt_net-2.1.9/src/pygpt_net/plugin/audio_output/worker.py
--rwxr-xr-x   0        0        0     9091 2024-03-04 21:10:30.303098 pygpt_net-2.1.9/src/pygpt_net/plugin/base.py
--rwxr-xr-x   0        0        0    11627 2024-02-25 05:32:34.229344 pygpt_net-2.1.9/src/pygpt_net/plugin/cmd_api/__init__.py
--rw-r--r--   0        0        0     6823 2024-02-25 00:58:54.512534 pygpt_net-2.1.9/src/pygpt_net/plugin/cmd_api/worker.py
--rwxr-xr-x   0        0        0     7757 2024-02-18 06:49:52.494117 pygpt_net-2.1.9/src/pygpt_net/plugin/cmd_code_interpreter/__init__.py
--rw-r--r--   0        0        0    10352 2024-03-03 22:43:17.403437 pygpt_net-2.1.9/src/pygpt_net/plugin/cmd_code_interpreter/runner.py
--rw-r--r--   0        0        0     4749 2024-03-03 22:43:17.403437 pygpt_net-2.1.9/src/pygpt_net/plugin/cmd_code_interpreter/worker.py
--rwxr-xr-x   0        0        0     5717 2024-02-25 00:27:02.862945 pygpt_net-2.1.9/src/pygpt_net/plugin/cmd_custom/__init__.py
--rw-r--r--   0        0        0     4409 2024-02-25 00:27:02.862945 pygpt_net-2.1.9/src/pygpt_net/plugin/cmd_custom/worker.py
--rwxr-xr-x   0        0        0    16896 2024-03-04 19:26:20.301786 pygpt_net-2.1.9/src/pygpt_net/plugin/cmd_files/__init__.py
--rw-r--r--   0        0        0    32458 2024-03-04 19:26:20.257786 pygpt_net-2.1.9/src/pygpt_net/plugin/cmd_files/worker.py
--rwxr-xr-x   0        0        0    23473 2024-02-15 05:07:04.122540 pygpt_net-2.1.9/src/pygpt_net/plugin/cmd_history/__init__.py
--rwxr-xr-x   0        0        0     6969 2024-02-18 06:49:52.494117 pygpt_net-2.1.9/src/pygpt_net/plugin/cmd_serial/__init__.py
--rw-r--r--   0        0        0     8680 2024-01-30 17:23:19.897578 pygpt_net-2.1.9/src/pygpt_net/plugin/cmd_serial/worker.py
--rwxr-xr-x   0        0        0    20351 2024-03-04 19:45:01.492395 pygpt_net-2.1.9/src/pygpt_net/plugin/cmd_web/__init__.py
--rwxr-xr-x   0        0        0    12576 2024-02-24 01:55:58.445111 pygpt_net-2.1.9/src/pygpt_net/plugin/cmd_web/websearch.py
--rw-r--r--   0        0        0    10601 2024-03-04 19:26:20.297786 pygpt_net-2.1.9/src/pygpt_net/plugin/cmd_web/worker.py
--rwxr-xr-x   0        0        0     8158 2024-02-15 05:07:04.122540 pygpt_net-2.1.9/src/pygpt_net/plugin/crontab/__init__.py
--rwxr-xr-x   0        0        0     2831 2024-02-18 01:14:49.758062 pygpt_net-2.1.9/src/pygpt_net/plugin/extra_prompt/__init__.py
--rwxr-xr-x   0        0        0    13103 2024-03-03 22:43:17.403437 pygpt_net-2.1.9/src/pygpt_net/plugin/idx_llama_index/__init__.py
--rwxr-xr-x   0        0        0     6330 2024-02-15 05:07:04.122540 pygpt_net-2.1.9/src/pygpt_net/plugin/openai_dalle/__init__.py
--rwxr-xr-x   0        0        0    11455 2024-02-15 05:07:04.122540 pygpt_net-2.1.9/src/pygpt_net/plugin/openai_vision/__init__.py
--rwxr-xr-x   0        0        0     4029 2024-02-04 17:46:05.314114 pygpt_net-2.1.9/src/pygpt_net/plugin/real_time/__init__.py
--rw-r--r--   0        0        0      488 2023-12-25 22:13:46.802302 pygpt_net-2.1.9/src/pygpt_net/provider/__init__.py
--rw-r--r--   0        0        0      488 2024-02-24 01:55:58.445111 pygpt_net-2.1.9/src/pygpt_net/provider/audio_input/__init__.py
--rw-r--r--   0        0        0     1819 2024-02-27 05:21:39.771084 pygpt_net-2.1.9/src/pygpt_net/provider/audio_input/base.py
--rw-r--r--   0        0        0     2818 2024-02-27 05:21:39.771084 pygpt_net-2.1.9/src/pygpt_net/provider/audio_input/bing_speech_recognition.py
--rw-r--r--   0        0        0     2904 2024-02-27 05:21:39.771084 pygpt_net-2.1.9/src/pygpt_net/provider/audio_input/google_cloud_speech_recognition.py
--rw-r--r--   0        0        0     2840 2024-02-27 05:21:39.771084 pygpt_net-2.1.9/src/pygpt_net/provider/audio_input/google_speech_recognition.py
--rw-r--r--   0        0        0     2244 2024-03-01 03:17:53.457929 pygpt_net-2.1.9/src/pygpt_net/provider/audio_input/openai_whisper.py
--rw-r--r--   0        0        0     3129 2024-03-01 03:17:53.457929 pygpt_net-2.1.9/src/pygpt_net/provider/audio_input/openai_whisper_local.py
--rw-r--r--   0        0        0      488 2024-02-24 01:55:58.449111 pygpt_net-2.1.9/src/pygpt_net/provider/audio_output/__init__.py
--rw-r--r--   0        0        0     1995 2024-02-27 05:21:39.771084 pygpt_net-2.1.9/src/pygpt_net/provider/audio_output/base.py
--rw-r--r--   0        0        0     4231 2024-02-25 00:27:02.862945 pygpt_net-2.1.9/src/pygpt_net/provider/audio_output/eleven_labs.py
--rw-r--r--   0        0        0     4286 2024-02-25 00:27:02.862945 pygpt_net-2.1.9/src/pygpt_net/provider/audio_output/google_tts.py
--rw-r--r--   0        0        0     4960 2024-02-24 01:55:58.449111 pygpt_net-2.1.9/src/pygpt_net/provider/audio_output/ms_azure_tts.py
--rw-r--r--   0        0        0     3056 2024-02-24 01:55:58.449111 pygpt_net-2.1.9/src/pygpt_net/provider/audio_output/openai_tts.py
--rw-r--r--   0        0        0      488 2024-01-23 23:46:30.499197 pygpt_net-2.1.9/src/pygpt_net/provider/core/__init__.py
--rw-r--r--   0        0        0      488 2024-01-23 23:46:30.499197 pygpt_net-2.1.9/src/pygpt_net/provider/core/assistant/__init__.py
--rw-r--r--   0        0        0     1186 2024-01-23 23:46:30.499197 pygpt_net-2.1.9/src/pygpt_net/provider/core/assistant/base.py
--rw-r--r--   0        0        0     5926 2024-01-23 23:46:30.499197 pygpt_net-2.1.9/src/pygpt_net/provider/core/assistant/json_file.py
--rw-r--r--   0        0        0      488 2024-01-23 23:46:30.499197 pygpt_net-2.1.9/src/pygpt_net/provider/core/attachment/__init__.py
--rw-r--r--   0        0        0     1204 2024-01-23 23:46:30.499197 pygpt_net-2.1.9/src/pygpt_net/provider/core/attachment/base.py
--rw-r--r--   0        0        0     5236 2024-01-23 23:46:30.499197 pygpt_net-2.1.9/src/pygpt_net/provider/core/attachment/json_file.py
--rw-r--r--   0        0        0      488 2024-01-23 23:46:30.499197 pygpt_net-2.1.9/src/pygpt_net/provider/core/calendar/__init__.py
--rw-r--r--   0        0        0     1322 2024-01-23 23:46:30.499197 pygpt_net-2.1.9/src/pygpt_net/provider/core/calendar/base.py
--rw-r--r--   0        0        0     3832 2024-02-02 19:26:46.619683 pygpt_net-2.1.9/src/pygpt_net/provider/core/calendar/db_sqlite/__init__.py
--rw-r--r--   0        0        0      837 2024-01-23 23:46:30.499197 pygpt_net-2.1.9/src/pygpt_net/provider/core/calendar/db_sqlite/patch.py
--rw-r--r--   0        0        0    10959 2024-01-23 23:46:30.499197 pygpt_net-2.1.9/src/pygpt_net/provider/core/calendar/db_sqlite/storage.py
--rw-r--r--   0        0        0      488 2024-01-23 23:46:30.499197 pygpt_net-2.1.9/src/pygpt_net/provider/core/config/__init__.py
--rw-r--r--   0        0        0     1235 2024-01-23 23:46:30.499197 pygpt_net-2.1.9/src/pygpt_net/provider/core/config/base.py
--rwxr-xr-x   0        0        0     5017 2024-01-23 23:46:30.499197 pygpt_net-2.1.9/src/pygpt_net/provider/core/config/json_file.py
--rwxr-xr-x   0        0        0    57620 2024-03-04 20:18:37.601991 pygpt_net-2.1.9/src/pygpt_net/provider/core/config/patch.py
--rw-r--r--   0        0        0      488 2024-01-23 23:46:30.499197 pygpt_net-2.1.9/src/pygpt_net/provider/core/ctx/__init__.py
--rw-r--r--   0        0        0     2085 2024-02-23 01:50:39.602419 pygpt_net-2.1.9/src/pygpt_net/provider/core/ctx/base.py
--rw-r--r--   0        0        0     7059 2024-02-23 01:50:39.602419 pygpt_net-2.1.9/src/pygpt_net/provider/core/ctx/db_sqlite/__init__.py
--rw-r--r--   0        0        0     3101 2024-01-23 23:46:30.499197 pygpt_net-2.1.9/src/pygpt_net/provider/core/ctx/db_sqlite/patch.py
--rw-r--r--   0        0        0    23675 2024-03-03 22:43:17.403437 pygpt_net-2.1.9/src/pygpt_net/provider/core/ctx/db_sqlite/storage.py
--rw-r--r--   0        0        0     6888 2024-03-03 22:43:17.403437 pygpt_net-2.1.9/src/pygpt_net/provider/core/ctx/db_sqlite/utils.py
--rw-r--r--   0        0        0    11665 2024-01-23 23:46:30.503197 pygpt_net-2.1.9/src/pygpt_net/provider/core/ctx/json_file.py
--rw-r--r--   0        0        0      488 2024-01-23 23:46:30.503197 pygpt_net-2.1.9/src/pygpt_net/provider/core/history/__init__.py
--rw-r--r--   0        0        0      863 2024-01-23 23:46:30.503197 pygpt_net-2.1.9/src/pygpt_net/provider/core/history/base.py
--rw-r--r--   0        0        0      837 2024-01-23 23:46:30.503197 pygpt_net-2.1.9/src/pygpt_net/provider/core/history/patch.py
--rw-r--r--   0        0        0     2969 2024-01-23 23:46:30.503197 pygpt_net-2.1.9/src/pygpt_net/provider/core/history/txt_file.py
--rw-r--r--   0        0        0      488 2024-01-23 23:46:30.503197 pygpt_net-2.1.9/src/pygpt_net/provider/core/index/__init__.py
--rw-r--r--   0        0        0     2814 2024-02-23 06:06:25.510176 pygpt_net-2.1.9/src/pygpt_net/provider/core/index/base.py
--rw-r--r--   0        0        0     8217 2024-02-23 06:06:25.510176 pygpt_net-2.1.9/src/pygpt_net/provider/core/index/db_sqlite/__init__.py
--rw-r--r--   0        0        0     2972 2024-02-23 06:06:25.510176 pygpt_net-2.1.9/src/pygpt_net/provider/core/index/db_sqlite/patch.py
--rw-r--r--   0        0        0    16519 2024-02-23 06:06:25.510176 pygpt_net-2.1.9/src/pygpt_net/provider/core/index/db_sqlite/storage.py
--rw-r--r--   0        0        0      870 2024-02-23 01:50:39.606418 pygpt_net-2.1.9/src/pygpt_net/provider/core/index/db_sqlite/utils.py
--rw-r--r--   0        0        0     6615 2024-02-23 01:50:39.606418 pygpt_net-2.1.9/src/pygpt_net/provider/core/index/json_file.py
--rw-r--r--   0        0        0      837 2024-01-23 23:46:30.503197 pygpt_net-2.1.9/src/pygpt_net/provider/core/index/patch.py
--rw-r--r--   0        0        0      488 2024-01-23 23:46:30.503197 pygpt_net-2.1.9/src/pygpt_net/provider/core/mode/__init__.py
--rw-r--r--   0        0        0     1062 2024-01-23 23:46:30.503197 pygpt_net-2.1.9/src/pygpt_net/provider/core/mode/base.py
--rw-r--r--   0        0        0     4142 2024-01-23 23:46:30.503197 pygpt_net-2.1.9/src/pygpt_net/provider/core/mode/json_file.py
--rw-r--r--   0        0        0      837 2024-01-23 23:46:30.503197 pygpt_net-2.1.9/src/pygpt_net/provider/core/mode/patch.py
--rw-r--r--   0        0        0      488 2024-01-23 23:46:30.503197 pygpt_net-2.1.9/src/pygpt_net/provider/core/model/__init__.py
--rw-r--r--   0        0        0     1246 2024-01-23 23:46:30.503197 pygpt_net-2.1.9/src/pygpt_net/provider/core/model/base.py
--rw-r--r--   0        0        0     6231 2024-01-23 23:46:30.503197 pygpt_net-2.1.9/src/pygpt_net/provider/core/model/json_file.py
--rw-r--r--   0        0        0     7363 2024-01-30 21:49:30.562821 pygpt_net-2.1.9/src/pygpt_net/provider/core/model/patch.py
--rw-r--r--   0        0        0      488 2024-01-23 23:46:30.503197 pygpt_net-2.1.9/src/pygpt_net/provider/core/notepad/__init__.py
--rw-r--r--   0        0        0     1262 2024-01-23 23:46:30.503197 pygpt_net-2.1.9/src/pygpt_net/provider/core/notepad/base.py
--rw-r--r--   0        0        0     3044 2024-01-23 23:46:30.503197 pygpt_net-2.1.9/src/pygpt_net/provider/core/notepad/db_sqlite/__init__.py
--rw-r--r--   0        0        0     2805 2024-01-23 23:46:30.503197 pygpt_net-2.1.9/src/pygpt_net/provider/core/notepad/db_sqlite/patch.py
--rw-r--r--   0        0        0     7263 2024-01-23 23:46:30.503197 pygpt_net-2.1.9/src/pygpt_net/provider/core/notepad/db_sqlite/storage.py
--rw-r--r--   0        0        0     7555 2024-01-23 23:46:30.503197 pygpt_net-2.1.9/src/pygpt_net/provider/core/notepad/json_file.py
--rwxr-xr-x   0        0        0      488 2024-01-23 23:46:30.503197 pygpt_net-2.1.9/src/pygpt_net/provider/core/preset/__init__.py
--rwxr-xr-x   0        0        0     1300 2024-02-01 01:48:09.374583 pygpt_net-2.1.9/src/pygpt_net/provider/core/preset/base.py
--rwxr-xr-x   0        0        0     7887 2024-02-15 05:07:04.122540 pygpt_net-2.1.9/src/pygpt_net/provider/core/preset/json_file.py
--rw-r--r--   0        0        0     3166 2024-01-23 23:46:30.503197 pygpt_net-2.1.9/src/pygpt_net/provider/core/preset/patch.py
--rw-r--r--   0        0        0     6739 2024-02-21 03:55:24.484309 pygpt_net-2.1.9/src/pygpt_net/provider/gpt/__init__.py
--rw-r--r--   0        0        0    13251 2024-02-21 19:09:37.240983 pygpt_net-2.1.9/src/pygpt_net/provider/gpt/assistants.py
--rw-r--r--   0        0        0     5763 2024-02-15 05:07:04.122540 pygpt_net-2.1.9/src/pygpt_net/provider/gpt/chat.py
--rw-r--r--   0        0        0     5169 2024-01-27 01:08:27.560991 pygpt_net-2.1.9/src/pygpt_net/provider/gpt/completion.py
--rw-r--r--   0        0        0     7904 2024-02-18 06:49:52.494117 pygpt_net-2.1.9/src/pygpt_net/provider/gpt/image.py
--rw-r--r--   0        0        0     2681 2024-01-27 01:08:27.560991 pygpt_net-2.1.9/src/pygpt_net/provider/gpt/summarizer.py
--rw-r--r--   0        0        0     7079 2024-02-16 04:34:22.756884 pygpt_net-2.1.9/src/pygpt_net/provider/gpt/vision.py
--rw-r--r--   0        0        0        0 2024-02-20 19:10:03.189314 pygpt_net-2.1.9/src/pygpt_net/provider/gpt/worker/__init__.py
--rw-r--r--   0        0        0     5916 2024-02-21 00:32:47.130497 pygpt_net-2.1.9/src/pygpt_net/provider/gpt/worker/assistants.py
--rw-r--r--   0        0        0     4665 2024-02-21 19:09:37.240983 pygpt_net-2.1.9/src/pygpt_net/provider/gpt/worker/importer.py
--rwxr-xr-x   0        0        0        0 2024-01-27 21:42:30.960980 pygpt_net-2.1.9/src/pygpt_net/provider/llms/__init__.py
--rwxr-xr-x   0        0        0     1641 2024-01-27 21:42:30.960980 pygpt_net-2.1.9/src/pygpt_net/provider/llms/anthropic.py
--rwxr-xr-x   0        0        0     1633 2024-02-28 03:58:59.309445 pygpt_net-2.1.9/src/pygpt_net/provider/llms/azure_openai.py
--rw-r--r--   0        0        0     2694 2024-01-27 21:42:30.960980 pygpt_net-2.1.9/src/pygpt_net/provider/llms/base.py
--rwxr-xr-x   0        0        0     1535 2024-01-27 21:42:30.960980 pygpt_net-2.1.9/src/pygpt_net/provider/llms/hugging_face.py
--rwxr-xr-x   0        0        0     1643 2024-01-27 21:42:30.960980 pygpt_net-2.1.9/src/pygpt_net/provider/llms/llama.py
--rwxr-xr-x   0        0        0     1517 2024-01-27 21:42:30.960980 pygpt_net-2.1.9/src/pygpt_net/provider/llms/ollama.py
--rwxr-xr-x   0        0        0     2048 2024-02-28 03:58:59.309445 pygpt_net-2.1.9/src/pygpt_net/provider/llms/openai.py
--rw-r--r--   0        0        0        0 2024-01-23 23:46:30.503197 pygpt_net-2.1.9/src/pygpt_net/provider/loaders/__init__.py
--rw-r--r--   0        0        0     2481 2024-03-01 03:17:53.457929 pygpt_net-2.1.9/src/pygpt_net/provider/loaders/base.py
--rw-r--r--   0        0        0     1149 2024-02-29 03:07:51.278132 pygpt_net-2.1.9/src/pygpt_net/provider/loaders/file_csv.py
--rw-r--r--   0        0        0     1032 2024-02-29 03:07:51.278132 pygpt_net-2.1.9/src/pygpt_net/provider/loaders/file_docx.py
--rw-r--r--   0        0        0     1022 2024-02-29 03:07:51.278132 pygpt_net-2.1.9/src/pygpt_net/provider/loaders/file_epub.py
--rw-r--r--   0        0        0     1032 2024-02-28 03:58:59.309445 pygpt_net-2.1.9/src/pygpt_net/provider/loaders/file_excel.py
--rw-r--r--   0        0        0     1163 2024-02-29 03:07:51.278132 pygpt_net-2.1.9/src/pygpt_net/provider/loaders/file_html.py
--rw-r--r--   0        0        0     1680 2024-03-01 03:17:53.457929 pygpt_net-2.1.9/src/pygpt_net/provider/loaders/file_image_vision.py
--rw-r--r--   0        0        0     1169 2024-02-29 03:07:51.278132 pygpt_net-2.1.9/src/pygpt_net/provider/loaders/file_ipynb.py
--rw-r--r--   0        0        0      996 2024-02-28 03:58:59.309445 pygpt_net-2.1.9/src/pygpt_net/provider/loaders/file_json.py
--rw-r--r--   0        0        0     1171 2024-02-29 03:07:51.278132 pygpt_net-2.1.9/src/pygpt_net/provider/loaders/file_markdown.py
--rw-r--r--   0        0        0     1127 2024-02-29 03:07:51.278132 pygpt_net-2.1.9/src/pygpt_net/provider/loaders/file_pdf.py
--rw-r--r--   0        0        0     1720 2024-03-01 03:17:53.457929 pygpt_net-2.1.9/src/pygpt_net/provider/loaders/file_video_audio.py
--rw-r--r--   0        0        0     1114 2024-02-29 03:07:51.278132 pygpt_net-2.1.9/src/pygpt_net/provider/loaders/file_xml.py
--rw-r--r--   0        0        0        0 2024-01-27 21:42:30.960980 pygpt_net-2.1.9/src/pygpt_net/provider/loaders/hub/__init__.py
--rw-r--r--   0        0        0        0 2024-03-01 17:40:19.825274 pygpt_net-2.1.9/src/pygpt_net/provider/loaders/hub/bitbucket/__init__.py
--rw-r--r--   0        0        0     6194 2024-03-01 17:40:19.825274 pygpt_net-2.1.9/src/pygpt_net/provider/loaders/hub/bitbucket/repo.py
--rw-r--r--   0        0        0        0 2024-03-01 17:40:19.825274 pygpt_net-2.1.9/src/pygpt_net/provider/loaders/hub/chatgpt_retrieval/__init__.py
--rw-r--r--   0        0        0     2460 2024-03-01 17:40:19.825274 pygpt_net-2.1.9/src/pygpt_net/provider/loaders/hub/chatgpt_retrieval/base.py
--rw-r--r--   0        0        0        0 2024-03-01 17:40:19.825274 pygpt_net-2.1.9/src/pygpt_net/provider/loaders/hub/database/__init__.py
--rw-r--r--   0        0        0     4228 2024-03-01 17:40:19.825274 pygpt_net-2.1.9/src/pygpt_net/provider/loaders/hub/database/base.py
--rw-r--r--   0        0        0        0 2024-03-01 17:40:19.825274 pygpt_net-2.1.9/src/pygpt_net/provider/loaders/hub/github/__init__.py
--rw-r--r--   0        0        0     4204 2024-03-01 17:40:19.825274 pygpt_net-2.1.9/src/pygpt_net/provider/loaders/hub/github/issues.py
--rw-r--r--   0        0        0     3550 2024-03-01 17:40:19.825274 pygpt_net-2.1.9/src/pygpt_net/provider/loaders/hub/github/repo.py
--rw-r--r--   0        0        0        0 2024-03-01 03:17:53.457929 pygpt_net-2.1.9/src/pygpt_net/provider/loaders/hub/google/__init__.py
--rw-r--r--   0        0        0     2658 2024-03-01 03:17:53.457929 pygpt_net-2.1.9/src/pygpt_net/provider/loaders/hub/google/calendar.py
--rw-r--r--   0        0        0     5370 2024-03-01 03:17:53.457929 pygpt_net-2.1.9/src/pygpt_net/provider/loaders/hub/google/docs.py
--rw-r--r--   0        0        0     6772 2024-03-01 03:17:53.457929 pygpt_net-2.1.9/src/pygpt_net/provider/loaders/hub/google/gmail.py
--rw-r--r--   0        0        0     1633 2024-03-01 03:17:53.457929 pygpt_net-2.1.9/src/pygpt_net/provider/loaders/hub/google/keep.py
--rw-r--r--   0        0        0     5282 2024-03-01 03:17:53.457929 pygpt_net-2.1.9/src/pygpt_net/provider/loaders/hub/google/sheets.py
--rw-r--r--   0        0        0        0 2024-03-01 03:17:53.457929 pygpt_net-2.1.9/src/pygpt_net/provider/loaders/hub/image_vision/__init__.py
--rw-r--r--   0        0        0     6940 2024-03-01 03:17:53.457929 pygpt_net-2.1.9/src/pygpt_net/provider/loaders/hub/image_vision/base.py
--rw-r--r--   0        0        0        0 2024-01-27 21:42:30.964980 pygpt_net-2.1.9/src/pygpt_net/provider/loaders/hub/json/__init__.py
--rw-r--r--   0        0        0     3862 2024-02-29 03:07:51.278132 pygpt_net-2.1.9/src/pygpt_net/provider/loaders/hub/json/base.py
--rw-r--r--   0        0        0        0 2024-01-27 21:42:30.964980 pygpt_net-2.1.9/src/pygpt_net/provider/loaders/hub/pandas_excel/__init__.py
--rw-r--r--   0        0        0     3940 2024-02-29 03:07:51.278132 pygpt_net-2.1.9/src/pygpt_net/provider/loaders/hub/pandas_excel/base.py
--rw-r--r--   0        0        0        0 2024-01-27 21:42:30.964980 pygpt_net-2.1.9/src/pygpt_net/provider/loaders/hub/simple_csv/__init__.py
--rw-r--r--   0        0        0     1481 2024-02-29 03:07:51.278132 pygpt_net-2.1.9/src/pygpt_net/provider/loaders/hub/simple_csv/base.py
--rw-r--r--   0        0        0        0 2024-03-01 03:17:53.457929 pygpt_net-2.1.9/src/pygpt_net/provider/loaders/hub/video_audio/__init__.py
--rw-r--r--   0        0        0     4960 2024-03-01 03:17:53.457929 pygpt_net-2.1.9/src/pygpt_net/provider/loaders/hub/video_audio/base.py
--rw-r--r--   0        0        0        0 2024-02-27 05:21:39.771084 pygpt_net-2.1.9/src/pygpt_net/provider/loaders/hub/web_page/__init__.py
--rw-r--r--   0        0        0      556 2024-02-29 03:07:51.278132 pygpt_net-2.1.9/src/pygpt_net/provider/loaders/hub/web_page/base.py
--rw-r--r--   0        0        0        0 2024-02-27 05:21:39.771084 pygpt_net-2.1.9/src/pygpt_net/provider/loaders/hub/yt/__init__.py
--rw-r--r--   0        0        0     2427 2024-02-29 03:07:51.278132 pygpt_net-2.1.9/src/pygpt_net/provider/loaders/hub/yt/base.py
--rw-r--r--   0        0        0      545 2024-02-27 05:21:39.771084 pygpt_net-2.1.9/src/pygpt_net/provider/loaders/hub/yt/utils.py
--rw-r--r--   0        0        0     3078 2024-03-01 17:40:19.825274 pygpt_net-2.1.9/src/pygpt_net/provider/loaders/web_bitbucket.py
--rw-r--r--   0        0        0     2280 2024-03-01 17:40:19.825274 pygpt_net-2.1.9/src/pygpt_net/provider/loaders/web_chatgpt_retrieval.py
--rw-r--r--   0        0        0     2392 2024-03-01 17:40:19.825274 pygpt_net-2.1.9/src/pygpt_net/provider/loaders/web_database.py
--rw-r--r--   0        0        0     3223 2024-03-01 17:40:19.825274 pygpt_net-2.1.9/src/pygpt_net/provider/loaders/web_github_issues.py
--rw-r--r--   0        0        0     3556 2024-03-01 17:40:19.825274 pygpt_net-2.1.9/src/pygpt_net/provider/loaders/web_github_repo.py
--rw-r--r--   0        0        0     2499 2024-03-01 03:17:53.457929 pygpt_net-2.1.9/src/pygpt_net/provider/loaders/web_google_calendar.py
--rw-r--r--   0        0        0     2236 2024-03-01 03:17:53.457929 pygpt_net-2.1.9/src/pygpt_net/provider/loaders/web_google_docs.py
--rw-r--r--   0        0        0     3180 2024-03-01 03:17:53.457929 pygpt_net-2.1.9/src/pygpt_net/provider/loaders/web_google_drive.py
--rw-r--r--   0        0        0     2319 2024-03-01 03:17:53.457929 pygpt_net-2.1.9/src/pygpt_net/provider/loaders/web_google_gmail.py
--rw-r--r--   0        0        0     2201 2024-03-01 03:17:53.457929 pygpt_net-2.1.9/src/pygpt_net/provider/loaders/web_google_keep.py
--rw-r--r--   0        0        0     2313 2024-03-01 03:17:53.457929 pygpt_net-2.1.9/src/pygpt_net/provider/loaders/web_google_sheets.py
--rw-r--r--   0        0        0     3443 2024-03-01 17:40:19.825274 pygpt_net-2.1.9/src/pygpt_net/provider/loaders/web_microsoft_onedrive.py
--rw-r--r--   0        0        0     1399 2024-03-01 03:17:53.457929 pygpt_net-2.1.9/src/pygpt_net/provider/loaders/web_page.py
--rw-r--r--   0        0        0     1404 2024-03-01 03:17:53.457929 pygpt_net-2.1.9/src/pygpt_net/provider/loaders/web_rss.py
--rw-r--r--   0        0        0     1575 2024-03-01 03:17:53.461929 pygpt_net-2.1.9/src/pygpt_net/provider/loaders/web_sitemap.py
--rw-r--r--   0        0        0     2512 2024-03-03 03:52:54.350656 pygpt_net-2.1.9/src/pygpt_net/provider/loaders/web_twitter.py
--rw-r--r--   0        0        0     1442 2024-03-01 03:17:53.461929 pygpt_net-2.1.9/src/pygpt_net/provider/loaders/web_yt.py
--rw-r--r--   0        0        0     5396 2024-03-03 22:43:17.403437 pygpt_net-2.1.9/src/pygpt_net/provider/vector_stores/__init__.py
--rw-r--r--   0        0        0     3112 2024-02-28 03:58:59.313445 pygpt_net-2.1.9/src/pygpt_net/provider/vector_stores/base.py
--rwxr-xr-x   0        0        0     3169 2024-03-03 03:52:54.350656 pygpt_net-2.1.9/src/pygpt_net/provider/vector_stores/chroma.py
--rw-r--r--   0        0        0     3152 2024-02-28 03:58:59.313445 pygpt_net-2.1.9/src/pygpt_net/provider/vector_stores/elasticsearch.py
--rw-r--r--   0        0        0     5177 2024-02-28 03:58:59.313445 pygpt_net-2.1.9/src/pygpt_net/provider/vector_stores/pinecode.py
--rw-r--r--   0        0        0     3183 2024-02-28 03:58:59.313445 pygpt_net-2.1.9/src/pygpt_net/provider/vector_stores/redis.py
--rw-r--r--   0        0        0     2524 2024-02-28 03:58:59.313445 pygpt_net-2.1.9/src/pygpt_net/provider/vector_stores/simple.py
--rw-r--r--   0        0        0     3923 2024-03-03 22:43:17.403437 pygpt_net-2.1.9/src/pygpt_net/provider/vector_stores/temp.py
--rw-r--r--   0        0        0      488 2024-02-24 01:55:58.449111 pygpt_net-2.1.9/src/pygpt_net/provider/web/__init__.py
--rw-r--r--   0        0        0     1994 2024-02-27 05:21:39.771084 pygpt_net-2.1.9/src/pygpt_net/provider/web/base.py
--rw-r--r--   0        0        0     4646 2024-02-25 00:27:02.862945 pygpt_net-2.1.9/src/pygpt_net/provider/web/google_custom_search.py
--rw-r--r--   0        0        0     4104 2024-02-25 00:27:02.862945 pygpt_net-2.1.9/src/pygpt_net/provider/web/microsoft_bing.py
--rwxr-xr-x   0        0        0     5680 2024-01-29 18:11:38.035830 pygpt_net-2.1.9/src/pygpt_net/ui/__init__.py
--rw-r--r--   0        0        0        0 2024-01-08 20:36:28.054492 pygpt_net-2.1.9/src/pygpt_net/ui/base/__init__.py
--rw-r--r--   0        0        0     9209 2024-02-27 05:21:39.771084 pygpt_net-2.1.9/src/pygpt_net/ui/base/config_dialog.py
--rwxr-xr-x   0        0        0      488 2023-12-28 18:11:19.000000 pygpt_net-2.1.9/src/pygpt_net/ui/dialog/__init__.py
--rwxr-xr-x   0        0        0     5579 2024-02-28 03:58:59.313445 pygpt_net-2.1.9/src/pygpt_net/ui/dialog/about.py
--rwxr-xr-x   0        0        0     4722 2024-02-15 05:07:04.122540 pygpt_net-2.1.9/src/pygpt_net/ui/dialog/applog.py
--rwxr-xr-x   0        0        0     6534 2024-02-15 05:07:04.122540 pygpt_net-2.1.9/src/pygpt_net/ui/dialog/assistant.py
--rwxr-xr-x   0        0        0     1765 2024-02-01 17:53:56.370106 pygpt_net-2.1.9/src/pygpt_net/ui/dialog/changelog.py
--rw-r--r--   0        0        0      973 2024-01-28 19:32:28.495073 pygpt_net-2.1.9/src/pygpt_net/ui/dialog/create.py
--rwxr-xr-x   0        0        0     1798 2024-02-26 21:30:35.305131 pygpt_net-2.1.9/src/pygpt_net/ui/dialog/debug.py
--rw-r--r--   0        0        0     5490 2024-01-31 21:39:19.388967 pygpt_net-2.1.9/src/pygpt_net/ui/dialog/dictionary.py
--rwxr-xr-x   0        0        0     2382 2024-01-27 21:42:30.964980 pygpt_net-2.1.9/src/pygpt_net/ui/dialog/editor.py
--rwxr-xr-x   0        0        0     2867 2024-01-19 21:21:41.774598 pygpt_net-2.1.9/src/pygpt_net/ui/dialog/image.py
--rwxr-xr-x   0        0        0     2272 2024-02-01 17:53:56.370106 pygpt_net-2.1.9/src/pygpt_net/ui/dialog/license.py
--rwxr-xr-x   0        0        0     1706 2024-01-27 21:42:30.964980 pygpt_net-2.1.9/src/pygpt_net/ui/dialog/logger.py
--rw-r--r--   0        0        0    12634 2024-02-15 05:07:04.122540 pygpt_net-2.1.9/src/pygpt_net/ui/dialog/models.py
--rwxr-xr-x   0        0        0    19464 2024-03-02 19:51:00.168984 pygpt_net-2.1.9/src/pygpt_net/ui/dialog/plugins.py
--rwxr-xr-x   0        0        0     6644 2024-02-15 05:07:04.122540 pygpt_net-2.1.9/src/pygpt_net/ui/dialog/preset.py
--rwxr-xr-x   0        0        0      973 2024-01-28 19:32:28.495073 pygpt_net-2.1.9/src/pygpt_net/ui/dialog/rename.py
--rwxr-xr-x   0        0        0    14557 2024-02-29 03:07:51.278132 pygpt_net-2.1.9/src/pygpt_net/ui/dialog/settings.py
--rw-r--r--   0        0        0      954 2024-02-26 22:26:37.124323 pygpt_net-2.1.9/src/pygpt_net/ui/dialog/snap.py
--rwxr-xr-x   0        0        0     2436 2024-02-25 05:55:37.513980 pygpt_net-2.1.9/src/pygpt_net/ui/dialog/start.py
--rwxr-xr-x   0        0        0      842 2023-12-28 18:11:19.000000 pygpt_net-2.1.9/src/pygpt_net/ui/dialog/update.py
--rwxr-xr-x   0        0        0     7005 2024-02-28 03:58:59.313445 pygpt_net-2.1.9/src/pygpt_net/ui/dialogs.py
--rwxr-xr-x   0        0        0      488 2023-12-28 21:20:40.362230 pygpt_net-2.1.9/src/pygpt_net/ui/layout/__init__.py
--rwxr-xr-x   0        0        0     1535 2023-12-29 00:18:50.793125 pygpt_net-2.1.9/src/pygpt_net/ui/layout/chat/__init__.py
--rwxr-xr-x   0        0        0     5149 2024-01-28 22:32:36.115407 pygpt_net-2.1.9/src/pygpt_net/ui/layout/chat/attachments.py
--rwxr-xr-x   0        0        0     4376 2024-01-27 21:42:30.964980 pygpt_net-2.1.9/src/pygpt_net/ui/layout/chat/attachments_uploaded.py
--rw-r--r--   0        0        0     5118 2024-02-23 01:50:39.606418 pygpt_net-2.1.9/src/pygpt_net/ui/layout/chat/calendar.py
--rwxr-xr-x   0        0        0     9051 2024-02-26 21:30:35.305131 pygpt_net-2.1.9/src/pygpt_net/ui/layout/chat/input.py
--rwxr-xr-x   0        0        0    18656 2024-01-01 00:17:57.553256 pygpt_net-2.1.9/src/pygpt_net/ui/layout/chat/markdown.py
--rwxr-xr-x   0        0        0     9142 2024-02-29 03:07:51.278132 pygpt_net-2.1.9/src/pygpt_net/ui/layout/chat/output.py
--rw-r--r--   0        0        0     5199 2024-02-17 21:22:47.345663 pygpt_net-2.1.9/src/pygpt_net/ui/layout/chat/painter.py
--rwxr-xr-x   0        0        0     1697 2024-01-27 21:42:30.964980 pygpt_net-2.1.9/src/pygpt_net/ui/layout/ctx/__init__.py
--rwxr-xr-x   0        0        0     4902 2024-02-02 19:26:46.619683 pygpt_net-2.1.9/src/pygpt_net/ui/layout/ctx/ctx_list.py
--rwxr-xr-x   0        0        0     1441 2024-01-07 09:35:02.638810 pygpt_net-2.1.9/src/pygpt_net/ui/layout/ctx/search_input.py
--rwxr-xr-x   0        0        0     1068 2023-12-31 01:26:09.880264 pygpt_net-2.1.9/src/pygpt_net/ui/layout/ctx/video.py
--rwxr-xr-x   0        0        0     1405 2024-01-31 15:19:17.742029 pygpt_net-2.1.9/src/pygpt_net/ui/layout/status.py
--rwxr-xr-x   0        0        0     3475 2024-01-27 21:42:30.964980 pygpt_net-2.1.9/src/pygpt_net/ui/layout/toolbox/__init__.py
--rw-r--r--   0        0        0     2378 2024-01-30 17:23:19.901578 pygpt_net-2.1.9/src/pygpt_net/ui/layout/toolbox/agent.py
--rwxr-xr-x   0        0        0     4414 2024-01-27 21:42:30.964980 pygpt_net-2.1.9/src/pygpt_net/ui/layout/toolbox/assistants.py
--rwxr-xr-x   0        0        0     4254 2024-02-29 03:07:51.278132 pygpt_net-2.1.9/src/pygpt_net/ui/layout/toolbox/footer.py
--rwxr-xr-x   0        0        0     2382 2024-01-21 16:42:14.672394 pygpt_net-2.1.9/src/pygpt_net/ui/layout/toolbox/image.py
--rw-r--r--   0        0        0     5075 2024-01-27 21:42:30.964980 pygpt_net-2.1.9/src/pygpt_net/ui/layout/toolbox/indexes.py
--rwxr-xr-x   0        0        0     3169 2024-02-21 03:55:24.484309 pygpt_net-2.1.9/src/pygpt_net/ui/layout/toolbox/mode.py
--rwxr-xr-x   0        0        0     3067 2024-02-21 03:55:24.484309 pygpt_net-2.1.9/src/pygpt_net/ui/layout/toolbox/model.py
--rwxr-xr-x   0        0        0     4127 2024-02-01 00:24:56.153509 pygpt_net-2.1.9/src/pygpt_net/ui/layout/toolbox/presets.py
--rwxr-xr-x   0        0        0     3502 2024-02-01 13:33:50.646121 pygpt_net-2.1.9/src/pygpt_net/ui/layout/toolbox/prompt.py
--rwxr-xr-x   0        0        0     2447 2023-12-31 01:26:09.000000 pygpt_net-2.1.9/src/pygpt_net/ui/layout/toolbox/vision.py
--rw-r--r--   0        0        0     7682 2024-02-24 01:55:58.449111 pygpt_net-2.1.9/src/pygpt_net/ui/main.py
--rw-r--r--   0        0        0     1618 2024-02-29 03:07:51.278132 pygpt_net-2.1.9/src/pygpt_net/ui/menu/__init__.py
--rw-r--r--   0        0        0     4667 2024-02-16 20:38:22.746568 pygpt_net-2.1.9/src/pygpt_net/ui/menu/about.py
--rw-r--r--   0        0        0     1654 2024-02-28 03:58:59.313445 pygpt_net-2.1.9/src/pygpt_net/ui/menu/audio.py
--rw-r--r--   0        0        0     5142 2024-02-16 20:38:22.746568 pygpt_net-2.1.9/src/pygpt_net/ui/menu/config.py
--rw-r--r--   0        0        0     4875 2024-02-25 18:06:16.209368 pygpt_net-2.1.9/src/pygpt_net/ui/menu/debug.py
--rw-r--r--   0        0        0     2014 2024-02-16 20:38:22.746568 pygpt_net-2.1.9/src/pygpt_net/ui/menu/file.py
--rw-r--r--   0        0        0      897 2024-01-27 21:42:30.964980 pygpt_net-2.1.9/src/pygpt_net/ui/menu/lang.py
--rw-r--r--   0        0        0     1549 2024-02-16 20:38:22.746568 pygpt_net-2.1.9/src/pygpt_net/ui/menu/plugins.py
--rw-r--r--   0        0        0     2685 2024-02-16 20:38:22.746568 pygpt_net-2.1.9/src/pygpt_net/ui/menu/theme.py
--rw-r--r--   0        0        0     2026 2024-02-29 03:07:51.278132 pygpt_net-2.1.9/src/pygpt_net/ui/menu/video.py
--rw-r--r--   0        0        0     6672 2024-02-01 23:02:10.688691 pygpt_net-2.1.9/src/pygpt_net/ui/tray.py
--rwxr-xr-x   0        0        0      488 2023-12-28 18:11:19.000000 pygpt_net-2.1.9/src/pygpt_net/ui/widget/__init__.py
--rwxr-xr-x   0        0        0      488 2023-12-28 21:20:40.362230 pygpt_net-2.1.9/src/pygpt_net/ui/widget/audio/__init__.py
--rwxr-xr-x   0        0        0     1721 2023-12-28 21:20:40.362230 pygpt_net-2.1.9/src/pygpt_net/ui/widget/audio/input.py
--rw-r--r--   0        0        0     2198 2024-02-29 03:07:51.278132 pygpt_net-2.1.9/src/pygpt_net/ui/widget/audio/input_button.py
--rwxr-xr-x   0        0        0     1586 2023-12-28 21:20:40.362230 pygpt_net-2.1.9/src/pygpt_net/ui/widget/audio/output.py
--rw-r--r--   0        0        0        0 2024-01-06 03:25:04.270157 pygpt_net-2.1.9/src/pygpt_net/ui/widget/calendar/__init__.py
--rw-r--r--   0        0        0     8116 2024-02-17 21:22:47.345663 pygpt_net-2.1.9/src/pygpt_net/ui/widget/calendar/select.py
--rwxr-xr-x   0        0        0      488 2023-12-28 21:20:40.362230 pygpt_net-2.1.9/src/pygpt_net/ui/widget/dialog/__init__.py
--rwxr-xr-x   0        0        0     1308 2024-02-16 17:50:31.993013 pygpt_net-2.1.9/src/pygpt_net/ui/widget/dialog/alert.py
--rw-r--r--   0        0        0     1502 2024-02-17 21:22:47.345663 pygpt_net-2.1.9/src/pygpt_net/ui/widget/dialog/applog.py
--rw-r--r--   0        0        0     3163 2024-02-28 03:58:59.313445 pygpt_net-2.1.9/src/pygpt_net/ui/widget/dialog/base.py
--rwxr-xr-x   0        0        0     1977 2024-01-24 15:53:01.386042 pygpt_net-2.1.9/src/pygpt_net/ui/widget/dialog/confirm.py
--rw-r--r--   0        0        0     2191 2024-01-28 19:32:28.495073 pygpt_net-2.1.9/src/pygpt_net/ui/widget/dialog/create.py
--rwxr-xr-x   0        0        0     1572 2024-02-21 16:35:35.211671 pygpt_net-2.1.9/src/pygpt_net/ui/widget/dialog/debug.py
--rwxr-xr-x   0        0        0     1749 2024-02-17 21:22:47.345663 pygpt_net-2.1.9/src/pygpt_net/ui/widget/dialog/editor.py
--rwxr-xr-x   0        0        0     1638 2024-02-17 21:22:47.345663 pygpt_net-2.1.9/src/pygpt_net/ui/widget/dialog/editor_file.py
--rwxr-xr-x   0        0        0      816 2024-02-17 21:22:47.345663 pygpt_net-2.1.9/src/pygpt_net/ui/widget/dialog/image.py
--rwxr-xr-x   0        0        0     1568 2024-02-17 21:22:47.345663 pygpt_net-2.1.9/src/pygpt_net/ui/widget/dialog/info.py
--rw-r--r--   0        0        0     1717 2024-02-17 21:22:47.345663 pygpt_net-2.1.9/src/pygpt_net/ui/widget/dialog/license.py
--rwxr-xr-x   0        0        0     1627 2024-02-17 21:22:47.345663 pygpt_net-2.1.9/src/pygpt_net/ui/widget/dialog/logger.py
--rw-r--r--   0        0        0     1625 2024-02-17 21:22:47.345663 pygpt_net-2.1.9/src/pygpt_net/ui/widget/dialog/model.py
--rwxr-xr-x   0        0        0     2191 2024-01-28 19:32:28.495073 pygpt_net-2.1.9/src/pygpt_net/ui/widget/dialog/rename.py
--rwxr-xr-x   0        0        0     1614 2024-02-17 21:22:47.345663 pygpt_net-2.1.9/src/pygpt_net/ui/widget/dialog/settings.py
--rwxr-xr-x   0        0        0     1696 2024-02-17 21:22:47.345663 pygpt_net-2.1.9/src/pygpt_net/ui/widget/dialog/settings_plugin.py
--rw-r--r--   0        0        0     2724 2024-02-26 22:26:37.124323 pygpt_net-2.1.9/src/pygpt_net/ui/widget/dialog/snap.py
--rwxr-xr-x   0        0        0     6789 2024-02-17 21:22:47.345663 pygpt_net-2.1.9/src/pygpt_net/ui/widget/dialog/update.py
--rwxr-xr-x   0        0        0      488 2024-01-11 15:56:53.277343 pygpt_net-2.1.9/src/pygpt_net/ui/widget/draw/__init__.py
--rw-r--r--   0        0        0     9057 2024-03-01 17:40:19.825274 pygpt_net-2.1.9/src/pygpt_net/ui/widget/draw/painter.py
--rwxr-xr-x   0        0        0      488 2023-12-28 21:20:40.362230 pygpt_net-2.1.9/src/pygpt_net/ui/widget/element/__init__.py
--rw-r--r--   0        0        0      947 2024-01-13 00:42:12.107250 pygpt_net-2.1.9/src/pygpt_net/ui/widget/element/button.py
--rwxr-xr-x   0        0        0     2559 2024-01-27 21:42:30.964980 pygpt_net-2.1.9/src/pygpt_net/ui/widget/element/group.py
--rw-r--r--   0        0        0     3789 2024-02-28 03:58:59.313445 pygpt_net-2.1.9/src/pygpt_net/ui/widget/element/labels.py
--rwxr-xr-x   0        0        0        0 2023-12-28 21:20:40.362230 pygpt_net-2.1.9/src/pygpt_net/ui/widget/filesystem/__init__.py
--rwxr-xr-x   0        0        0    21480 2024-03-02 19:51:00.168984 pygpt_net-2.1.9/src/pygpt_net/ui/widget/filesystem/explorer.py
--rwxr-xr-x   0        0        0      488 2023-12-28 21:20:40.362230 pygpt_net-2.1.9/src/pygpt_net/ui/widget/image/__init__.py
--rwxr-xr-x   0        0        0     2823 2024-01-29 13:41:53.379769 pygpt_net-2.1.9/src/pygpt_net/ui/widget/image/display.py
--rwxr-xr-x   0        0        0      488 2023-12-28 21:20:40.362230 pygpt_net-2.1.9/src/pygpt_net/ui/widget/lists/__init__.py
--rwxr-xr-x   0        0        0     2682 2024-01-29 13:41:53.379769 pygpt_net-2.1.9/src/pygpt_net/ui/widget/lists/assistant.py
--rwxr-xr-x   0        0        0     4750 2024-01-29 13:41:53.379769 pygpt_net-2.1.9/src/pygpt_net/ui/widget/lists/attachment.py
--rwxr-xr-x   0        0        0     2446 2023-12-28 21:20:40.362230 pygpt_net-2.1.9/src/pygpt_net/ui/widget/lists/base.py
--rwxr-xr-x   0        0        0    11603 2024-02-25 00:27:02.862945 pygpt_net-2.1.9/src/pygpt_net/ui/widget/lists/context.py
--rw-r--r--   0        0        0     3653 2024-02-25 22:01:41.690831 pygpt_net-2.1.9/src/pygpt_net/ui/widget/lists/debug.py
--rw-r--r--   0        0        0     4821 2024-01-31 21:39:19.388967 pygpt_net-2.1.9/src/pygpt_net/ui/widget/lists/index.py
--rwxr-xr-x   0        0        0     1080 2023-12-28 21:20:40.362230 pygpt_net-2.1.9/src/pygpt_net/ui/widget/lists/mode.py
--rwxr-xr-x   0        0        0     1912 2024-01-29 13:41:53.379769 pygpt_net-2.1.9/src/pygpt_net/ui/widget/lists/model.py
--rw-r--r--   0        0        0     1919 2024-01-29 13:41:53.379769 pygpt_net-2.1.9/src/pygpt_net/ui/widget/lists/model_editor.py
--rwxr-xr-x   0        0        0     1028 2024-01-12 09:25:47.589375 pygpt_net-2.1.9/src/pygpt_net/ui/widget/lists/plugin.py
--rwxr-xr-x   0        0        0     4071 2024-02-01 01:48:09.378583 pygpt_net-2.1.9/src/pygpt_net/ui/widget/lists/preset.py
--rw-r--r--   0        0        0     1052 2024-01-12 09:25:47.589375 pygpt_net-2.1.9/src/pygpt_net/ui/widget/lists/settings.py
--rwxr-xr-x   0        0        0     4002 2024-01-29 13:41:53.379769 pygpt_net-2.1.9/src/pygpt_net/ui/widget/lists/uploaded.py
--rwxr-xr-x   0        0        0      488 2023-12-28 21:20:40.362230 pygpt_net-2.1.9/src/pygpt_net/ui/widget/option/__init__.py
--rwxr-xr-x   0        0        0     2068 2024-01-19 21:21:41.774598 pygpt_net-2.1.9/src/pygpt_net/ui/widget/option/checkbox.py
--rw-r--r--   0        0        0     2797 2024-03-03 03:52:54.350656 pygpt_net-2.1.9/src/pygpt_net/ui/widget/option/combo.py
--rwxr-xr-x   0        0        0    12690 2024-01-30 01:28:33.748573 pygpt_net-2.1.9/src/pygpt_net/ui/widget/option/dictionary.py
--rwxr-xr-x   0        0        0     5968 2024-02-16 20:38:22.746568 pygpt_net-2.1.9/src/pygpt_net/ui/widget/option/input.py
--rwxr-xr-x   0        0        0     3569 2024-01-08 20:36:28.058493 pygpt_net-2.1.9/src/pygpt_net/ui/widget/option/slider.py
--rwxr-xr-x   0        0        0     2077 2024-02-18 20:56:31.563530 pygpt_net-2.1.9/src/pygpt_net/ui/widget/option/textarea.py
--rw-r--r--   0        0        0     1668 2024-01-29 13:41:53.379769 pygpt_net-2.1.9/src/pygpt_net/ui/widget/tabs/Input.py
--rw-r--r--   0        0        0      488 2023-12-30 09:04:29.205425 pygpt_net-2.1.9/src/pygpt_net/ui/widget/tabs/__init__.py
--rw-r--r--   0        0        0     2781 2024-02-16 20:38:22.746568 pygpt_net-2.1.9/src/pygpt_net/ui/widget/tabs/output.py
--rwxr-xr-x   0        0        0      488 2023-12-28 21:20:40.366230 pygpt_net-2.1.9/src/pygpt_net/ui/widget/textarea/__init__.py
--rw-r--r--   0        0        0     4216 2024-01-30 17:23:19.901578 pygpt_net-2.1.9/src/pygpt_net/ui/widget/textarea/calendar_note.py
--rw-r--r--   0        0        0     1358 2024-01-28 19:32:28.495073 pygpt_net-2.1.9/src/pygpt_net/ui/widget/textarea/create.py
--rwxr-xr-x   0        0        0     4894 2024-02-25 00:27:02.862945 pygpt_net-2.1.9/src/pygpt_net/ui/widget/textarea/input.py
--rwxr-xr-x   0        0        0     1132 2024-01-27 21:42:30.964980 pygpt_net-2.1.9/src/pygpt_net/ui/widget/textarea/name.py
--rwxr-xr-x   0        0        0     5736 2024-02-25 00:27:02.862945 pygpt_net-2.1.9/src/pygpt_net/ui/widget/textarea/notepad.py
--rwxr-xr-x   0        0        0     5241 2024-02-25 00:27:02.862945 pygpt_net-2.1.9/src/pygpt_net/ui/widget/textarea/output.py
--rwxr-xr-x   0        0        0     1358 2024-01-28 19:32:28.495073 pygpt_net-2.1.9/src/pygpt_net/ui/widget/textarea/rename.py
--rwxr-xr-x   0        0        0     1659 2024-02-03 15:51:10.611289 pygpt_net-2.1.9/src/pygpt_net/ui/widget/textarea/search_input.py
--rwxr-xr-x   0        0        0      488 2023-12-28 21:20:40.366230 pygpt_net-2.1.9/src/pygpt_net/ui/widget/vision/__init__.py
--rwxr-xr-x   0        0        0     2584 2023-12-28 21:20:40.366230 pygpt_net-2.1.9/src/pygpt_net/ui/widget/vision/camera.py
--rwxr-xr-x   0        0        0     3581 2024-02-28 03:58:59.313445 pygpt_net-2.1.9/src/pygpt_net/utils.py
--rw-r--r--   0        0        0   128383 1970-01-01 00:00:00.000000 pygpt_net-2.1.9/PKG-INFO
+-rwxr-xr-x   0        0        0    57305 2024-04-28 06:16:26.300027 pygpt_net-2.2.0/CHANGELOG.md
+-rwxr-xr-x   0        0        0     1077 2024-02-01 17:53:56.362106 pygpt_net-2.2.0/LICENSE
+-rwxr-xr-x   0        0        0   131419 2024-04-28 06:16:26.304027 pygpt_net-2.2.0/README.md
+-rwxr-xr-x   0        0        0    13970 2024-02-19 21:38:20.920806 pygpt_net-2.2.0/icon.png
+-rw-r--r--   0        0        0     2979 2024-04-28 06:16:26.320027 pygpt_net-2.2.0/pyproject.toml
+-rwxr-xr-x   0        0        0    56289 2024-04-28 06:16:26.324027 pygpt_net-2.2.0/src/pygpt_net/CHANGELOG.txt
+-rwxr-xr-x   0        0        0     1146 2024-02-01 17:53:56.366106 pygpt_net-2.2.0/src/pygpt_net/LICENSE
+-rwxr-xr-x   0        0        0     1024 2024-04-28 06:16:26.324027 pygpt_net-2.2.0/src/pygpt_net/__init__.py
+-rwxr-xr-x   0        0        0    14345 2024-04-17 01:35:30.422055 pygpt_net-2.2.0/src/pygpt_net/app.py
+-rwxr-xr-x   0        0        0    14787 2024-04-11 03:43:59.058733 pygpt_net-2.2.0/src/pygpt_net/config.py
+-rwxr-xr-x   0        0        0     3350 2024-02-24 01:55:58.445111 pygpt_net-2.2.0/src/pygpt_net/container.py
+-rwxr-xr-x   0        0        0     5997 2024-04-28 06:16:26.324027 pygpt_net-2.2.0/src/pygpt_net/controller/__init__.py
+-rw-r--r--   0        0        0     4662 2024-02-25 05:32:34.229344 pygpt_net-2.2.0/src/pygpt_net/controller/agent/__init__.py
+-rw-r--r--   0        0        0     6829 2024-03-17 13:18:45.622350 pygpt_net-2.2.0/src/pygpt_net/controller/agent/flow.py
+-rw-r--r--   0        0        0     8924 2024-04-27 07:58:32.750704 pygpt_net-2.2.0/src/pygpt_net/controller/assistant/__init__.py
+-rw-r--r--   0        0        0    12703 2024-04-27 07:58:32.750704 pygpt_net-2.2.0/src/pygpt_net/controller/assistant/batch.py
+-rw-r--r--   0        0        0    13203 2024-04-27 14:05:11.727541 pygpt_net-2.2.0/src/pygpt_net/controller/assistant/editor.py
+-rw-r--r--   0        0        0    14001 2024-04-27 07:58:32.750704 pygpt_net-2.2.0/src/pygpt_net/controller/assistant/files.py
+-rwxr-xr-x   0        0        0    14251 2024-04-27 14:05:11.727541 pygpt_net-2.2.0/src/pygpt_net/controller/assistant/store.py
+-rw-r--r--   0        0        0    17258 2024-04-28 06:16:26.324027 pygpt_net-2.2.0/src/pygpt_net/controller/assistant/threads.py
+-rwxr-xr-x   0        0        0    15463 2024-04-26 21:55:50.675598 pygpt_net-2.2.0/src/pygpt_net/controller/attachment.py
+-rw-r--r--   0        0        0     5972 2024-03-20 16:01:43.275339 pygpt_net-2.2.0/src/pygpt_net/controller/audio/__init__.py
+-rw-r--r--   0        0        0     3848 2024-03-09 00:22:17.287774 pygpt_net-2.2.0/src/pygpt_net/controller/calendar/__init__.py
+-rw-r--r--   0        0        0     8585 2024-04-11 03:43:59.058733 pygpt_net-2.2.0/src/pygpt_net/controller/calendar/note.py
+-rwxr-xr-x   0        0        0    12774 2024-03-15 15:31:21.786121 pygpt_net-2.2.0/src/pygpt_net/controller/camera.py
+-rw-r--r--   0        0        0     1436 2024-01-13 16:28:42.715718 pygpt_net-2.2.0/src/pygpt_net/controller/chat/__init__.py
+-rwxr-xr-x   0        0        0    11360 2024-04-23 23:11:13.256158 pygpt_net-2.2.0/src/pygpt_net/controller/chat/common.py
+-rw-r--r--   0        0        0     2144 2024-03-15 15:31:21.786121 pygpt_net-2.2.0/src/pygpt_net/controller/chat/files.py
+-rwxr-xr-x   0        0        0     6279 2024-03-26 17:12:51.286309 pygpt_net-2.2.0/src/pygpt_net/controller/chat/image.py
+-rwxr-xr-x   0        0        0     9801 2024-03-15 15:31:21.786121 pygpt_net-2.2.0/src/pygpt_net/controller/chat/input.py
+-rwxr-xr-x   0        0        0    10189 2024-04-26 21:55:50.675598 pygpt_net-2.2.0/src/pygpt_net/controller/chat/output.py
+-rwxr-xr-x   0        0        0     9610 2024-04-25 00:06:58.371551 pygpt_net-2.2.0/src/pygpt_net/controller/chat/render.py
+-rw-r--r--   0        0        0    12003 2024-04-28 06:16:26.324027 pygpt_net-2.2.0/src/pygpt_net/controller/chat/text.py
+-rw-r--r--   0        0        0     3382 2024-04-11 20:50:24.189030 pygpt_net-2.2.0/src/pygpt_net/controller/chat/vision.py
+-rw-r--r--   0        0        0     5292 2024-03-26 17:12:51.286309 pygpt_net-2.2.0/src/pygpt_net/controller/command.py
+-rw-r--r--   0        0        0     4485 2024-04-26 21:55:50.675598 pygpt_net-2.2.0/src/pygpt_net/controller/config/__init__.py
+-rw-r--r--   0        0        0        0 2024-01-08 20:36:28.054492 pygpt_net-2.2.0/src/pygpt_net/controller/config/field/__init__.py
+-rwxr-xr-x   0        0        0     2422 2024-01-30 20:56:32.772879 pygpt_net-2.2.0/src/pygpt_net/controller/config/field/checkbox.py
+-rw-r--r--   0        0        0     4863 2024-03-12 06:49:17.164785 pygpt_net-2.2.0/src/pygpt_net/controller/config/field/cmd.py
+-rw-r--r--   0        0        0     3237 2024-04-27 14:05:11.727541 pygpt_net-2.2.0/src/pygpt_net/controller/config/field/combo.py
+-rw-r--r--   0        0        0     6657 2024-03-12 06:49:17.164785 pygpt_net-2.2.0/src/pygpt_net/controller/config/field/dictionary.py
+-rw-r--r--   0        0        0     3556 2024-03-15 15:31:21.786121 pygpt_net-2.2.0/src/pygpt_net/controller/config/field/input.py
+-rw-r--r--   0        0        0     4580 2024-04-21 01:33:54.239765 pygpt_net-2.2.0/src/pygpt_net/controller/config/field/slider.py
+-rw-r--r--   0        0        0     2337 2024-04-22 21:31:19.988317 pygpt_net-2.2.0/src/pygpt_net/controller/config/field/textarea.py
+-rw-r--r--   0        0        0     7245 2024-04-24 02:39:32.054775 pygpt_net-2.2.0/src/pygpt_net/controller/config/placeholder.py
+-rw-r--r--   0        0        0    29296 2024-04-28 06:16:26.324027 pygpt_net-2.2.0/src/pygpt_net/controller/ctx/__init__.py
+-rw-r--r--   0        0        0     5434 2024-04-10 01:07:30.184635 pygpt_net-2.2.0/src/pygpt_net/controller/ctx/common.py
+-rwxr-xr-x   0        0        0     7477 2024-04-24 05:19:32.002030 pygpt_net-2.2.0/src/pygpt_net/controller/ctx/extra.py
+-rw-r--r--   0        0        0     2552 2024-01-25 22:43:11.543975 pygpt_net-2.2.0/src/pygpt_net/controller/ctx/summarizer.py
+-rw-r--r--   0        0        0     7633 2024-04-26 21:55:50.675598 pygpt_net-2.2.0/src/pygpt_net/controller/debug/__init__.py
+-rw-r--r--   0        0        0     1008 2023-12-31 03:09:04.107766 pygpt_net-2.2.0/src/pygpt_net/controller/dialogs/__init__.py
+-rwxr-xr-x   0        0        0    12973 2024-04-27 07:58:32.750704 pygpt_net-2.2.0/src/pygpt_net/controller/dialogs/confirm.py
+-rw-r--r--   0        0        0     5634 2024-03-07 01:04:26.437955 pygpt_net-2.2.0/src/pygpt_net/controller/dialogs/debug.py
+-rwxr-xr-x   0        0        0     2582 2024-04-19 00:32:20.498428 pygpt_net-2.2.0/src/pygpt_net/controller/dialogs/info.py
+-rwxr-xr-x   0        0        0    15576 2024-03-26 17:12:51.286309 pygpt_net-2.2.0/src/pygpt_net/controller/files.py
+-rwxr-xr-x   0        0        0     4874 2024-04-21 01:33:54.239765 pygpt_net-2.2.0/src/pygpt_net/controller/finder.py
+-rwxr-xr-x   0        0        0     7017 2024-04-27 14:05:11.727541 pygpt_net-2.2.0/src/pygpt_net/controller/idx/__init__.py
+-rw-r--r--   0        0        0     2605 2024-02-29 03:07:51.274132 pygpt_net-2.2.0/src/pygpt_net/controller/idx/common.py
+-rwxr-xr-x   0        0        0    21150 2024-04-17 04:14:11.980074 pygpt_net-2.2.0/src/pygpt_net/controller/idx/indexer.py
+-rw-r--r--   0        0        0     7789 2024-03-03 03:52:54.350656 pygpt_net-2.2.0/src/pygpt_net/controller/idx/settings.py
+-rw-r--r--   0        0        0     3186 2024-04-11 16:41:32.664297 pygpt_net-2.2.0/src/pygpt_net/controller/lang/__init__.py
+-rw-r--r--   0        0        0     5080 2024-04-27 14:05:11.727541 pygpt_net-2.2.0/src/pygpt_net/controller/lang/custom.py
+-rw-r--r--   0        0        0    19922 2024-04-27 14:05:11.727541 pygpt_net-2.2.0/src/pygpt_net/controller/lang/mapping.py
+-rw-r--r--   0        0        0     3879 2024-01-15 13:47:55.919633 pygpt_net-2.2.0/src/pygpt_net/controller/lang/plugins.py
+-rw-r--r--   0        0        0     2634 2024-01-22 12:10:21.917245 pygpt_net-2.2.0/src/pygpt_net/controller/lang/settings.py
+-rwxr-xr-x   0        0        0     1566 2024-01-04 07:51:17.999390 pygpt_net-2.2.0/src/pygpt_net/controller/launcher.py
+-rwxr-xr-x   0        0        0    11220 2024-04-21 01:33:54.243764 pygpt_net-2.2.0/src/pygpt_net/controller/layout.py
+-rw-r--r--   0        0        0     6470 2024-03-15 15:31:21.786121 pygpt_net-2.2.0/src/pygpt_net/controller/mode.py
+-rw-r--r--   0        0        0     4656 2024-01-30 20:56:32.772879 pygpt_net-2.2.0/src/pygpt_net/controller/model/__init__.py
+-rw-r--r--   0        0        0    12599 2024-02-22 03:36:30.096422 pygpt_net-2.2.0/src/pygpt_net/controller/model/editor.py
+-rwxr-xr-x   0        0        0    11579 2024-04-11 03:43:59.058733 pygpt_net-2.2.0/src/pygpt_net/controller/notepad.py
+-rw-r--r--   0        0        0     2499 2024-04-10 01:07:30.184635 pygpt_net-2.2.0/src/pygpt_net/controller/painter/__init__.py
+-rw-r--r--   0        0        0     4461 2024-01-23 23:46:30.495197 pygpt_net-2.2.0/src/pygpt_net/controller/painter/capture.py
+-rw-r--r--   0        0        0     6292 2024-02-17 21:22:47.341663 pygpt_net-2.2.0/src/pygpt_net/controller/painter/common.py
+-rw-r--r--   0        0        0    14032 2024-03-26 17:12:51.286309 pygpt_net-2.2.0/src/pygpt_net/controller/plugins/__init__.py
+-rw-r--r--   0        0        0    11914 2024-03-07 01:04:26.441956 pygpt_net-2.2.0/src/pygpt_net/controller/plugins/presets.py
+-rw-r--r--   0        0        0     6040 2024-04-10 03:33:51.491189 pygpt_net-2.2.0/src/pygpt_net/controller/plugins/settings.py
+-rwxr-xr-x   0        0        0    15779 2024-04-22 22:35:26.796424 pygpt_net-2.2.0/src/pygpt_net/controller/presets/__init__.py
+-rwxr-xr-x   0        0        0    14997 2024-04-22 22:35:26.800429 pygpt_net-2.2.0/src/pygpt_net/controller/presets/editor.py
+-rw-r--r--   0        0        0     7562 2024-04-10 01:07:30.184635 pygpt_net-2.2.0/src/pygpt_net/controller/settings/__init__.py
+-rwxr-xr-x   0        0        0    14833 2024-04-24 02:39:32.054775 pygpt_net-2.2.0/src/pygpt_net/controller/settings/editor.py
+-rw-r--r--   0        0        0    20893 2024-04-19 00:32:20.498428 pygpt_net-2.2.0/src/pygpt_net/controller/settings/profile.py
+-rwxr-xr-x   0        0        0     8597 2024-04-14 16:40:07.849541 pygpt_net-2.2.0/src/pygpt_net/controller/settings/workdir.py
+-rwxr-xr-x   0        0        0     5988 2024-04-24 23:37:32.612565 pygpt_net-2.2.0/src/pygpt_net/controller/theme/__init__.py
+-rwxr-xr-x   0        0        0     5435 2024-04-11 16:41:32.664297 pygpt_net-2.2.0/src/pygpt_net/controller/theme/common.py
+-rw-r--r--   0        0        0     5085 2024-04-24 23:37:32.612565 pygpt_net-2.2.0/src/pygpt_net/controller/theme/markdown.py
+-rw-r--r--   0        0        0     4631 2024-04-24 02:39:32.054775 pygpt_net-2.2.0/src/pygpt_net/controller/theme/menu.py
+-rw-r--r--   0        0        0     5028 2024-04-24 23:37:32.612565 pygpt_net-2.2.0/src/pygpt_net/controller/theme/nodes.py
+-rw-r--r--   0        0        0     6093 2024-04-11 03:43:59.058733 pygpt_net-2.2.0/src/pygpt_net/controller/ui/__init__.py
+-rw-r--r--   0        0        0     4980 2024-04-27 14:05:11.727541 pygpt_net-2.2.0/src/pygpt_net/controller/ui/mode.py
+-rw-r--r--   0        0        0     1902 2024-01-23 23:46:30.499197 pygpt_net-2.2.0/src/pygpt_net/controller/ui/vision.py
+-rw-r--r--   0        0        0        0 2024-01-26 16:05:36.561120 pygpt_net-2.2.0/src/pygpt_net/core/__init__.py
+-rw-r--r--   0        0        0     4330 2024-04-26 21:55:50.675598 pygpt_net-2.2.0/src/pygpt_net/core/assistants/__init__.py
+-rw-r--r--   0        0        0     9275 2024-04-26 21:55:50.675598 pygpt_net-2.2.0/src/pygpt_net/core/assistants/files.py
+-rw-r--r--   0        0        0     7998 2024-04-27 14:05:11.727541 pygpt_net-2.2.0/src/pygpt_net/core/assistants/store.py
+-rwxr-xr-x   0        0        0    10240 2024-01-31 15:19:17.738030 pygpt_net-2.2.0/src/pygpt_net/core/attachments.py
+-rw-r--r--   0        0        0     2708 2024-02-24 01:55:58.445111 pygpt_net-2.2.0/src/pygpt_net/core/audio.py
+-rw-r--r--   0        0        0     4466 2024-03-15 15:31:21.786121 pygpt_net-2.2.0/src/pygpt_net/core/bridge.py
+-rw-r--r--   0        0        0     6634 2024-03-12 06:49:17.164785 pygpt_net-2.2.0/src/pygpt_net/core/calendar/__init__.py
+-rwxr-xr-x   0        0        0     4034 2024-02-21 16:18:39.952987 pygpt_net-2.2.0/src/pygpt_net/core/camera.py
+-rw-r--r--   0        0        0     3130 2024-01-27 01:08:27.560991 pygpt_net-2.2.0/src/pygpt_net/core/chain/__init__.py
+-rw-r--r--   0        0        0     4656 2024-01-27 01:08:27.560991 pygpt_net-2.2.0/src/pygpt_net/core/chain/chat.py
+-rw-r--r--   0        0        0     5089 2024-01-27 01:08:27.560991 pygpt_net-2.2.0/src/pygpt_net/core/chain/completion.py
+-rwxr-xr-x   0        0        0    10217 2024-03-17 14:26:02.923314 pygpt_net-2.2.0/src/pygpt_net/core/command.py
+-rwxr-xr-x   0        0        0    31384 2024-04-17 06:16:54.016653 pygpt_net-2.2.0/src/pygpt_net/core/ctx/__init__.py
+-rw-r--r--   0        0        0     7709 2024-02-27 05:21:39.767084 pygpt_net-2.2.0/src/pygpt_net/core/ctx/idx.py
+-rw-r--r--   0        0        0    15726 2024-04-26 21:55:50.675598 pygpt_net-2.2.0/src/pygpt_net/core/db/__init__.py
+-rw-r--r--   0        0        0     8884 2024-04-17 01:35:30.422055 pygpt_net-2.2.0/src/pygpt_net/core/db/viewer.py
+-rwxr-xr-x   0        0        0     9240 2024-03-26 17:12:51.290309 pygpt_net-2.2.0/src/pygpt_net/core/debug/__init__.py
+-rw-r--r--   0        0        0     1467 2024-02-25 18:06:16.205368 pygpt_net-2.2.0/src/pygpt_net/core/debug/agent.py
+-rwxr-xr-x   0        0        0     2532 2024-04-26 21:55:50.675598 pygpt_net-2.2.0/src/pygpt_net/core/debug/assistants.py
+-rwxr-xr-x   0        0        0     1626 2024-02-25 22:01:41.690831 pygpt_net-2.2.0/src/pygpt_net/core/debug/attachments.py
+-rwxr-xr-x   0        0        0     2305 2024-04-10 01:07:30.184635 pygpt_net-2.2.0/src/pygpt_net/core/debug/config.py
+-rwxr-xr-x   0        0        0     3543 2024-04-14 04:42:08.288289 pygpt_net-2.2.0/src/pygpt_net/core/debug/context.py
+-rw-r--r--   0        0        0      776 2024-03-07 01:04:26.441956 pygpt_net-2.2.0/src/pygpt_net/core/debug/db.py
+-rw-r--r--   0        0        0     5194 2024-03-12 06:49:17.164785 pygpt_net-2.2.0/src/pygpt_net/core/debug/indexes.py
+-rwxr-xr-x   0        0        0     1848 2024-02-25 22:01:41.690831 pygpt_net-2.2.0/src/pygpt_net/core/debug/models.py
+-rwxr-xr-x   0        0        0     1258 2024-02-25 22:01:41.690831 pygpt_net-2.2.0/src/pygpt_net/core/debug/plugins.py
+-rwxr-xr-x   0        0        0     1994 2024-02-25 22:01:41.690831 pygpt_net-2.2.0/src/pygpt_net/core/debug/presets.py
+-rwxr-xr-x   0        0        0     2666 2024-02-25 22:01:41.690831 pygpt_net-2.2.0/src/pygpt_net/core/debug/ui.py
+-rwxr-xr-x   0        0        0     9012 2024-03-26 17:12:51.290309 pygpt_net-2.2.0/src/pygpt_net/core/dispatcher.py
+-rwxr-xr-x   0        0        0    14537 2024-04-21 01:33:54.243764 pygpt_net-2.2.0/src/pygpt_net/core/filesystem/__init__.py
+-rw-r--r--   0        0        0     4074 2024-03-26 17:12:51.290309 pygpt_net-2.2.0/src/pygpt_net/core/filesystem/actions.py
+-rw-r--r--   0        0        0     4123 2024-04-22 03:13:23.727782 pygpt_net-2.2.0/src/pygpt_net/core/filesystem/editor.py
+-rw-r--r--   0        0        0     3385 2024-03-19 09:04:41.050928 pygpt_net-2.2.0/src/pygpt_net/core/filesystem/types.py
+-rw-r--r--   0        0        0     2753 2024-04-21 01:33:54.243764 pygpt_net-2.2.0/src/pygpt_net/core/filesystem/url.py
+-rwxr-xr-x   0        0        0     3092 2024-01-23 23:46:30.499197 pygpt_net-2.2.0/src/pygpt_net/core/history.py
+-rwxr-xr-x   0        0        0    17238 2024-04-17 01:35:30.422055 pygpt_net-2.2.0/src/pygpt_net/core/idx/__init__.py
+-rwxr-xr-x   0        0        0    12300 2024-04-17 01:35:30.422055 pygpt_net-2.2.0/src/pygpt_net/core/idx/chat.py
+-rw-r--r--   0        0        0     2226 2024-02-28 03:58:59.309445 pygpt_net-2.2.0/src/pygpt_net/core/idx/context.py
+-rwxr-xr-x   0        0        0    31850 2024-04-17 01:35:30.422055 pygpt_net-2.2.0/src/pygpt_net/core/idx/indexing.py
+-rw-r--r--   0        0        0     4016 2024-04-26 23:49:43.379197 pygpt_net-2.2.0/src/pygpt_net/core/idx/llm.py
+-rw-r--r--   0        0        0     5304 2024-04-17 01:35:30.422055 pygpt_net-2.2.0/src/pygpt_net/core/idx/metadata.py
+-rw-r--r--   0        0        0        0 2024-02-27 05:21:39.767084 pygpt_net-2.2.0/src/pygpt_net/core/idx/types/__init__.py
+-rw-r--r--   0        0        0     3113 2024-02-27 05:21:39.767084 pygpt_net-2.2.0/src/pygpt_net/core/idx/types/ctx.py
+-rw-r--r--   0        0        0     4722 2024-02-27 05:21:39.767084 pygpt_net-2.2.0/src/pygpt_net/core/idx/types/external.py
+-rw-r--r--   0        0        0     3733 2024-02-27 05:21:39.771084 pygpt_net-2.2.0/src/pygpt_net/core/idx/types/files.py
+-rwxr-xr-x   0        0        0     3774 2024-04-17 04:14:11.980074 pygpt_net-2.2.0/src/pygpt_net/core/idx/worker.py
+-rwxr-xr-x   0        0        0     3288 2024-03-17 13:18:45.634349 pygpt_net-2.2.0/src/pygpt_net/core/image.py
+-rwxr-xr-x   0        0        0      829 2023-12-31 03:18:56.426282 pygpt_net-2.2.0/src/pygpt_net/core/info.py
+-rw-r--r--   0        0        0     2040 2024-03-25 10:26:39.426403 pygpt_net-2.2.0/src/pygpt_net/core/installer.py
+-rw-r--r--   0        0        0     1168 2024-01-14 15:51:20.622630 pygpt_net-2.2.0/src/pygpt_net/core/llm/__init__.py
+-rwxr-xr-x   0        0        0     5112 2024-04-11 16:41:32.664297 pygpt_net-2.2.0/src/pygpt_net/core/locale.py
+-rw-r--r--   0        0        0     7573 2024-01-27 21:42:30.960980 pygpt_net-2.2.0/src/pygpt_net/core/models.py
+-rw-r--r--   0        0        0     1913 2024-01-23 23:46:30.499197 pygpt_net-2.2.0/src/pygpt_net/core/modes.py
+-rwxr-xr-x   0        0        0     3378 2024-04-10 01:07:30.184635 pygpt_net-2.2.0/src/pygpt_net/core/notepad.py
+-rwxr-xr-x   0        0        0     4395 2024-03-09 21:41:28.185853 pygpt_net-2.2.0/src/pygpt_net/core/platforms.py
+-rwxr-xr-x   0        0        0    14783 2024-04-28 06:16:26.324027 pygpt_net-2.2.0/src/pygpt_net/core/plugins.py
+-rw-r--r--   0        0        0     9279 2024-03-17 13:18:45.634349 pygpt_net-2.2.0/src/pygpt_net/core/presets.py
+-rw-r--r--   0        0        0     7650 2024-04-10 01:07:30.184635 pygpt_net-2.2.0/src/pygpt_net/core/profile.py
+-rw-r--r--   0        0        0     2427 2024-04-22 22:35:26.800429 pygpt_net-2.2.0/src/pygpt_net/core/prompt/__init__.py
+-rw-r--r--   0        0        0     2798 2024-04-22 22:35:26.800429 pygpt_net-2.2.0/src/pygpt_net/core/prompt/template.py
+-rw-r--r--   0        0        0      489 2024-01-05 12:12:41.797675 pygpt_net-2.2.0/src/pygpt_net/core/render/__init__.py
+-rw-r--r--   0        0        0     5024 2024-04-24 23:37:32.612565 pygpt_net-2.2.0/src/pygpt_net/core/render/base.py
+-rwxr-xr-x   0        0        0      489 2024-04-21 01:33:54.243764 pygpt_net-2.2.0/src/pygpt_net/core/render/markdown/__init__.py
+-rwxr-xr-x   0        0        0     5450 2024-04-22 05:35:04.663179 pygpt_net-2.2.0/src/pygpt_net/core/render/markdown/parser.py
+-rwxr-xr-x   0        0        0    23291 2024-04-24 23:37:32.612565 pygpt_net-2.2.0/src/pygpt_net/core/render/markdown/renderer.py
+-rw-r--r--   0        0        0      489 2024-01-05 13:07:04.262555 pygpt_net-2.2.0/src/pygpt_net/core/render/plain/__init__.py
+-rw-r--r--   0        0        0    15716 2024-04-21 01:33:54.243764 pygpt_net-2.2.0/src/pygpt_net/core/render/plain/renderer.py
+-rwxr-xr-x   0        0        0      489 2024-04-21 01:33:54.000000 pygpt_net-2.2.0/src/pygpt_net/core/render/web/__init__.py
+-rwxr-xr-x   0        0        0     8564 2024-04-28 06:16:26.324027 pygpt_net-2.2.0/src/pygpt_net/core/render/web/parser.py
+-rwxr-xr-x   0        0        0    42149 2024-04-25 03:37:50.192528 pygpt_net-2.2.0/src/pygpt_net/core/render/web/renderer.py
+-rwxr-xr-x   0        0        0     7512 2024-04-24 23:37:32.612565 pygpt_net-2.2.0/src/pygpt_net/core/settings.py
+-rw-r--r--   0        0        0        0 2024-04-21 01:33:54.243764 pygpt_net-2.2.0/src/pygpt_net/core/text/__init__.py
+-rwxr-xr-x   0        0        0     6566 2024-04-21 01:33:54.243764 pygpt_net-2.2.0/src/pygpt_net/core/text/finder.py
+-rw-r--r--   0        0        0     1970 2024-04-23 23:11:13.256158 pygpt_net-2.2.0/src/pygpt_net/core/text/utils.py
+-rw-r--r--   0        0        0     6487 2024-04-21 01:33:54.243764 pygpt_net-2.2.0/src/pygpt_net/core/text/web_finder.py
+-rwxr-xr-x   0        0        0    14040 2024-02-25 18:06:16.205368 pygpt_net-2.2.0/src/pygpt_net/core/tokens.py
+-rw-r--r--   0        0        0    13722 2024-02-21 19:09:37.240983 pygpt_net-2.2.0/src/pygpt_net/core/updater/__init__.py
+-rw-r--r--   0        0        0     2343 2024-02-24 01:55:58.445111 pygpt_net-2.2.0/src/pygpt_net/core/web.py
+-rw-r--r--   0        0        0      901 2024-01-25 22:43:11.543975 pygpt_net-2.2.0/src/pygpt_net/core/worker.py
+-rwxr-xr-x   0        0        0    10587 2024-04-28 06:16:26.324027 pygpt_net-2.2.0/src/pygpt_net/data/config/config.json
+-rwxr-xr-x   0        0        0    18526 2024-04-28 06:16:26.324027 pygpt_net-2.2.0/src/pygpt_net/data/config/models.json
+-rw-r--r--   0        0        0     1440 2024-04-28 06:16:26.324027 pygpt_net-2.2.0/src/pygpt_net/data/config/modes.json
+-rwxr-xr-x   0        0        0      459 2024-01-13 13:04:53.113674 pygpt_net-2.2.0/src/pygpt_net/data/config/presets/batman_and_joker.json
+-rw-r--r--   0        0        0     2702 2024-01-30 17:23:19.885579 pygpt_net-2.2.0/src/pygpt_net/data/config/presets/current.agent.json
+-rwxr-xr-x   0        0        0      368 2024-01-30 17:23:19.885579 pygpt_net-2.2.0/src/pygpt_net/data/config/presets/current.assistant.json
+-rwxr-xr-x   0        0        0      396 2024-01-30 17:23:19.885579 pygpt_net-2.2.0/src/pygpt_net/data/config/presets/current.chat.json
+-rwxr-xr-x   0        0        0      385 2024-01-30 17:23:19.885579 pygpt_net-2.2.0/src/pygpt_net/data/config/presets/current.completion.json
+-rwxr-xr-x   0        0        0      368 2024-01-30 17:23:19.885579 pygpt_net-2.2.0/src/pygpt_net/data/config/presets/current.img.json
+-rwxr-xr-x   0        0        0      382 2024-01-30 17:23:19.885579 pygpt_net-2.2.0/src/pygpt_net/data/config/presets/current.langchain.json
+-rw-r--r--   0        0        0      368 2024-03-03 02:59:46.037803 pygpt_net-2.2.0/src/pygpt_net/data/config/presets/current.llama_index.json
+-rwxr-xr-x   0        0        0      392 2024-03-03 03:52:54.350656 pygpt_net-2.2.0/src/pygpt_net/data/config/presets/current.vision.json
+-rwxr-xr-x   0        0        0      501 2024-01-30 17:23:19.885579 pygpt_net-2.2.0/src/pygpt_net/data/config/presets/dalle_white_cat.json
+-rwxr-xr-x   0        0        0    32203 2024-04-21 01:33:54.243764 pygpt_net-2.2.0/src/pygpt_net/data/config/settings.json
+-rw-r--r--   0        0        0      804 2024-03-17 13:18:45.634349 pygpt_net-2.2.0/src/pygpt_net/data/config/settings_section.json
+-rwxr-xr-x   0        0        0      664 2024-03-18 04:54:07.000000 pygpt_net-2.2.0/src/pygpt_net/data/css/fix_windows.css
+-rwxr-xr-x   0        0        0     1122 2024-04-19 00:29:50.000000 pygpt_net-2.2.0/src/pygpt_net/data/css/markdown.css
+-rwxr-xr-x   0        0        0      730 2024-04-19 00:29:50.000000 pygpt_net-2.2.0/src/pygpt_net/data/css/markdown.dark.css
+-rwxr-xr-x   0        0        0      833 2024-04-19 00:29:50.000000 pygpt_net-2.2.0/src/pygpt_net/data/css/markdown.light.css
+-rwxr-xr-x   0        0        0      400 2024-04-20 05:54:38.000000 pygpt_net-2.2.0/src/pygpt_net/data/css/style.css
+-rwxr-xr-x   0        0        0      729 2024-04-21 01:33:54.243764 pygpt_net-2.2.0/src/pygpt_net/data/css/style.dark.css
+-rwxr-xr-x   0        0        0     1726 2024-04-20 05:55:02.000000 pygpt_net-2.2.0/src/pygpt_net/data/css/style.light.css
+-rwxr-xr-x   0        0        0     3407 2024-04-24 23:37:32.612565 pygpt_net-2.2.0/src/pygpt_net/data/css/web.css
+-rwxr-xr-x   0        0        0     1260 2024-04-25 03:37:50.192528 pygpt_net-2.2.0/src/pygpt_net/data/css/web.dark.css
+-rwxr-xr-x   0        0        0     1235 2024-04-25 03:07:07.934949 pygpt_net-2.2.0/src/pygpt_net/data/css/web.light.css
+-rwxr-xr-x   0        0        0    69484 2023-12-08 15:03:16.000000 pygpt_net-2.2.0/src/pygpt_net/data/fonts/Lato/Lato-Black.ttf
+-rwxr-xr-x   0        0        0    71948 2023-12-08 15:03:16.000000 pygpt_net-2.2.0/src/pygpt_net/data/fonts/Lato/Lato-BlackItalic.ttf
+-rwxr-xr-x   0        0        0    73316 2023-12-08 15:03:16.000000 pygpt_net-2.2.0/src/pygpt_net/data/fonts/Lato/Lato-Bold.ttf
+-rwxr-xr-x   0        0        0    77680 2023-12-08 15:03:16.000000 pygpt_net-2.2.0/src/pygpt_net/data/fonts/Lato/Lato-BoldItalic.ttf
+-rwxr-xr-x   0        0        0    75744 2023-12-08 15:03:16.000000 pygpt_net-2.2.0/src/pygpt_net/data/fonts/Lato/Lato-Italic.ttf
+-rwxr-xr-x   0        0        0    77192 2023-12-08 15:03:16.000000 pygpt_net-2.2.0/src/pygpt_net/data/fonts/Lato/Lato-Light.ttf
+-rwxr-xr-x   0        0        0    49064 2023-12-08 15:03:16.000000 pygpt_net-2.2.0/src/pygpt_net/data/fonts/Lato/Lato-LightItalic.ttf
+-rwxr-xr-x   0        0        0    75136 2023-12-08 15:03:16.000000 pygpt_net-2.2.0/src/pygpt_net/data/fonts/Lato/Lato-Regular.ttf
+-rwxr-xr-x   0        0        0    69968 2023-12-08 15:03:16.000000 pygpt_net-2.2.0/src/pygpt_net/data/fonts/Lato/Lato-Thin.ttf
+-rwxr-xr-x   0        0        0    48848 2023-12-08 15:03:16.000000 pygpt_net-2.2.0/src/pygpt_net/data/fonts/Lato/Lato-ThinItalic.ttf
+-rwxr-xr-x   0        0        0     4500 2023-12-08 15:03:16.000000 pygpt_net-2.2.0/src/pygpt_net/data/fonts/Lato/OFL.txt
+-rw-r--r--   0        0        0    77432 2024-04-08 04:19:15.417912 pygpt_net-2.2.0/src/pygpt_net/data/fonts/MonaspaceArgon/MonaspaceArgon-Bold.otf
+-rw-r--r--   0        0        0    82112 2024-04-08 04:19:15.417912 pygpt_net-2.2.0/src/pygpt_net/data/fonts/MonaspaceArgon/MonaspaceArgon-BoldItalic.otf
+-rw-r--r--   0        0        0    81240 2024-04-08 04:19:15.417912 pygpt_net-2.2.0/src/pygpt_net/data/fonts/MonaspaceArgon/MonaspaceArgon-Italic.otf
+-rw-r--r--   0        0        0    75476 2024-04-08 04:19:15.421912 pygpt_net-2.2.0/src/pygpt_net/data/fonts/MonaspaceArgon/MonaspaceArgon-Regular.otf
+-rw-r--r--   0        0        0    75000 2024-04-08 04:19:15.421912 pygpt_net-2.2.0/src/pygpt_net/data/fonts/MonaspaceKrypton/MonaspaceKrypton-Bold.otf
+-rw-r--r--   0        0        0    77804 2024-04-08 04:19:15.421912 pygpt_net-2.2.0/src/pygpt_net/data/fonts/MonaspaceKrypton/MonaspaceKrypton-BoldItalic.otf
+-rw-r--r--   0        0        0    76752 2024-04-08 04:19:15.421912 pygpt_net-2.2.0/src/pygpt_net/data/fonts/MonaspaceKrypton/MonaspaceKrypton-Italic.otf
+-rw-r--r--   0        0        0    74248 2024-04-08 04:19:15.421912 pygpt_net-2.2.0/src/pygpt_net/data/fonts/MonaspaceKrypton/MonaspaceKrypton-Regular.otf
+-rw-r--r--   0        0        0    74120 2024-04-08 04:19:15.421912 pygpt_net-2.2.0/src/pygpt_net/data/fonts/MonaspaceNeon/MonaspaceNeon-Bold.otf
+-rw-r--r--   0        0        0    79236 2024-04-08 04:19:15.421912 pygpt_net-2.2.0/src/pygpt_net/data/fonts/MonaspaceNeon/MonaspaceNeon-BoldItalic.otf
+-rw-r--r--   0        0        0    78488 2024-04-08 04:19:15.425912 pygpt_net-2.2.0/src/pygpt_net/data/fonts/MonaspaceNeon/MonaspaceNeon-Italic.otf
+-rw-r--r--   0        0        0    73232 2024-04-08 04:19:15.425912 pygpt_net-2.2.0/src/pygpt_net/data/fonts/MonaspaceNeon/MonaspaceNeon-Regular.otf
+-rw-r--r--   0        0        0    88992 2024-04-08 04:19:15.425912 pygpt_net-2.2.0/src/pygpt_net/data/fonts/MonaspaceRadon/MonaspaceRadon-Bold.otf
+-rw-r--r--   0        0        0    94348 2024-04-08 04:19:15.425912 pygpt_net-2.2.0/src/pygpt_net/data/fonts/MonaspaceRadon/MonaspaceRadon-BoldItalic.otf
+-rw-r--r--   0        0        0    93720 2024-04-08 04:19:15.425912 pygpt_net-2.2.0/src/pygpt_net/data/fonts/MonaspaceRadon/MonaspaceRadon-Italic.otf
+-rw-r--r--   0        0        0    88668 2024-04-08 04:19:15.429912 pygpt_net-2.2.0/src/pygpt_net/data/fonts/MonaspaceRadon/MonaspaceRadon-Regular.otf
+-rw-r--r--   0        0        0    79280 2024-04-08 04:19:15.429912 pygpt_net-2.2.0/src/pygpt_net/data/fonts/MonaspaceXenon/MonaspaceXenon-Bold.otf
+-rw-r--r--   0        0        0    85648 2024-04-08 04:19:15.429912 pygpt_net-2.2.0/src/pygpt_net/data/fonts/MonaspaceXenon/MonaspaceXenon-BoldItalic.otf
+-rw-r--r--   0        0        0    85824 2024-04-08 04:19:15.429912 pygpt_net-2.2.0/src/pygpt_net/data/fonts/MonaspaceXenon/MonaspaceXenon-Italic.otf
+-rw-r--r--   0        0        0    80200 2024-04-08 04:19:15.429912 pygpt_net-2.2.0/src/pygpt_net/data/fonts/MonaspaceXenon/MonaspaceXenon-Regular.otf
+-rwxr-xr-x   0        0        0     4352 2024-03-18 04:54:07.633826 pygpt_net-2.2.0/src/pygpt_net/data/fonts/SpaceMono/OFL.txt
+-rwxr-xr-x   0        0        0    86636 2024-03-18 04:54:07.633826 pygpt_net-2.2.0/src/pygpt_net/data/fonts/SpaceMono/SpaceMono-Bold.ttf
+-rwxr-xr-x   0        0        0    95292 2024-03-18 04:54:07.633826 pygpt_net-2.2.0/src/pygpt_net/data/fonts/SpaceMono/SpaceMono-BoldItalic.ttf
+-rwxr-xr-x   0        0        0   103524 2024-03-18 04:54:07.633826 pygpt_net-2.2.0/src/pygpt_net/data/fonts/SpaceMono/SpaceMono-Italic.ttf
+-rwxr-xr-x   0        0        0    90904 2024-03-18 04:54:07.637826 pygpt_net-2.2.0/src/pygpt_net/data/fonts/SpaceMono/SpaceMono-Regular.ttf
+-rwxr-xr-x   0        0        0     3461 2023-04-14 00:10:28.000000 pygpt_net-2.2.0/src/pygpt_net/data/icon.ico
+-rwxr-xr-x   0        0        0    13970 2023-04-14 00:10:28.000000 pygpt_net-2.2.0/src/pygpt_net/data/icon.png
+-rw-r--r--   0        0        0     5471 2024-01-29 18:11:38.035830 pygpt_net-2.2.0/src/pygpt_net/data/icon_tray_busy.ico
+-rw-r--r--   0        0        0    14837 2024-01-29 18:11:38.035830 pygpt_net-2.2.0/src/pygpt_net/data/icon_tray_error.ico
+-rw-r--r--   0        0        0     4209 2024-01-29 18:11:38.035830 pygpt_net-2.2.0/src/pygpt_net/data/icon_tray_idle.ico
+-rw-r--r--   0        0        0      538 2024-01-30 17:23:19.885579 pygpt_net-2.2.0/src/pygpt_net/data/icons/abc.svg
+-rw-r--r--   0        0        0      178 2024-01-30 17:23:19.885579 pygpt_net-2.2.0/src/pygpt_net/data/icons/add.svg
+-rw-r--r--   0        0        0      463 2024-01-30 17:23:19.885579 pygpt_net-2.2.0/src/pygpt_net/data/icons/add_circle.svg
+-rw-r--r--   0        0        0      348 2024-01-30 17:23:19.885579 pygpt_net-2.2.0/src/pygpt_net/data/icons/add_folder.svg
+-rw-r--r--   0        0        0      391 2024-01-30 17:23:19.885579 pygpt_net-2.2.0/src/pygpt_net/data/icons/add_library.svg
+-rw-r--r--   0        0        0      558 2024-01-30 17:23:19.885579 pygpt_net-2.2.0/src/pygpt_net/data/icons/alarm.svg
+-rw-r--r--   0        0        0     1027 2024-01-30 17:23:19.885579 pygpt_net-2.2.0/src/pygpt_net/data/icons/apps.svg
+-rw-r--r--   0        0        0      267 2024-01-30 17:23:19.885579 pygpt_net-2.2.0/src/pygpt_net/data/icons/asterisk.svg
+-rw-r--r--   0        0        0      429 2024-01-30 17:23:19.885579 pygpt_net-2.2.0/src/pygpt_net/data/icons/attachment.svg
+-rw-r--r--   0        0        0      422 2024-01-30 17:23:19.885579 pygpt_net-2.2.0/src/pygpt_net/data/icons/attachments.svg
+-rw-r--r--   0        0        0      185 2024-01-30 17:23:19.885579 pygpt_net-2.2.0/src/pygpt_net/data/icons/back.svg
+-rw-r--r--   0        0        0      395 2024-01-30 17:23:19.885579 pygpt_net-2.2.0/src/pygpt_net/data/icons/backspace.svg
+-rw-r--r--   0        0        0      472 2024-01-30 17:23:19.885579 pygpt_net-2.2.0/src/pygpt_net/data/icons/block.svg
+-rw-r--r--   0        0        0      255 2024-01-30 17:23:19.885579 pygpt_net-2.2.0/src/pygpt_net/data/icons/bookmark.svg
+-rw-r--r--   0        0        0      423 2024-01-30 17:23:19.885579 pygpt_net-2.2.0/src/pygpt_net/data/icons/brush.svg
+-rw-r--r--   0        0        0      523 2024-01-30 17:23:19.885579 pygpt_net-2.2.0/src/pygpt_net/data/icons/build.svg
+-rw-r--r--   0        0        0      927 2024-01-30 17:23:19.885579 pygpt_net-2.2.0/src/pygpt_net/data/icons/calendar.svg
+-rw-r--r--   0        0        0      496 2024-01-30 17:23:19.885579 pygpt_net-2.2.0/src/pygpt_net/data/icons/camera.svg
+-rw-r--r--   0        0        0      987 2024-03-09 21:41:28.185853 pygpt_net-2.2.0/src/pygpt_net/data/icons/chat/audio.png
+-rw-r--r--   0        0        0      798 2024-03-09 21:41:28.185853 pygpt_net-2.2.0/src/pygpt_net/data/icons/chat/copy.png
+-rw-r--r--   0        0        0      737 2024-03-09 21:41:28.185853 pygpt_net-2.2.0/src/pygpt_net/data/icons/chat/delete.png
+-rw-r--r--   0        0        0      837 2024-03-09 21:41:28.185853 pygpt_net-2.2.0/src/pygpt_net/data/icons/chat/edit.png
+-rw-r--r--   0        0        0      715 2024-03-10 08:19:22.357281 pygpt_net-2.2.0/src/pygpt_net/data/icons/chat/join.png
+-rw-r--r--   0        0        0      956 2024-03-09 21:41:28.185853 pygpt_net-2.2.0/src/pygpt_net/data/icons/chat/reload.png
+-rw-r--r--   0        0        0      336 2024-01-30 17:23:19.885579 pygpt_net-2.2.0/src/pygpt_net/data/icons/chat.svg
+-rw-r--r--   0        0        0      174 2024-01-30 17:23:19.885579 pygpt_net-2.2.0/src/pygpt_net/data/icons/check.svg
+-rw-r--r--   0        0        0      459 2024-01-30 17:23:19.885579 pygpt_net-2.2.0/src/pygpt_net/data/icons/check_circle.svg
+-rw-r--r--   0        0        0      265 2024-01-30 17:23:19.885579 pygpt_net-2.2.0/src/pygpt_net/data/icons/checklist.svg
+-rw-r--r--   0        0        0      406 2024-01-30 17:23:19.885579 pygpt_net-2.2.0/src/pygpt_net/data/icons/circle.svg
+-rw-r--r--   0        0        0      191 2024-01-30 17:23:19.885579 pygpt_net-2.2.0/src/pygpt_net/data/icons/clear.svg
+-rw-r--r--   0        0        0      411 2024-01-30 17:23:19.885579 pygpt_net-2.2.0/src/pygpt_net/data/icons/clock.svg
+-rw-r--r--   0        0        0      218 2024-01-30 17:23:19.885579 pygpt_net-2.2.0/src/pygpt_net/data/icons/close.svg
+-rw-r--r--   0        0        0      503 2024-01-30 17:23:19.885579 pygpt_net-2.2.0/src/pygpt_net/data/icons/close_circle.svg
+-rw-r--r--   0        0        0      224 2024-01-30 17:23:19.885579 pygpt_net-2.2.0/src/pygpt_net/data/icons/code.svg
+-rw-r--r--   0        0        0      298 2024-01-30 17:23:19.885579 pygpt_net-2.2.0/src/pygpt_net/data/icons/computer.svg
+-rw-r--r--   0        0        0      336 2024-01-30 17:23:19.885579 pygpt_net-2.2.0/src/pygpt_net/data/icons/copy.svg
+-rw-r--r--   0        0        0      264 2024-01-30 17:23:19.885579 pygpt_net-2.2.0/src/pygpt_net/data/icons/crop.svg
+-rw-r--r--   0        0        0      666 2024-01-30 17:23:19.885579 pygpt_net-2.2.0/src/pygpt_net/data/icons/cut.svg
+-rw-r--r--   0        0        0      725 2024-01-30 17:23:19.885579 pygpt_net-2.2.0/src/pygpt_net/data/icons/db.svg
+-rw-r--r--   0        0        0      271 2024-01-30 17:23:19.889579 pygpt_net-2.2.0/src/pygpt_net/data/icons/delete.svg
+-rw-r--r--   0        0        0      174 2024-01-30 17:23:19.889579 pygpt_net-2.2.0/src/pygpt_net/data/icons/done.svg
+-rw-r--r--   0        0        0      274 2024-01-30 17:23:19.889579 pygpt_net-2.2.0/src/pygpt_net/data/icons/download.svg
+-rw-r--r--   0        0        0      283 2024-01-30 17:23:19.889579 pygpt_net-2.2.0/src/pygpt_net/data/icons/draft.svg
+-rw-r--r--   0        0        0      323 2024-01-30 17:23:19.889579 pygpt_net-2.2.0/src/pygpt_net/data/icons/drag.svg
+-rw-r--r--   0        0        0      325 2024-01-30 17:23:19.889579 pygpt_net-2.2.0/src/pygpt_net/data/icons/edit.svg
+-rw-r--r--   0        0        0      497 2024-01-30 17:23:19.889579 pygpt_net-2.2.0/src/pygpt_net/data/icons/emergency.svg
+-rw-r--r--   0        0        0      195 2024-01-30 17:23:19.889579 pygpt_net-2.2.0/src/pygpt_net/data/icons/equalizer.svg
+-rw-r--r--   0        0        0      533 2024-01-30 17:23:19.889579 pygpt_net-2.2.0/src/pygpt_net/data/icons/error.svg
+-rw-r--r--   0        0        0      372 2024-01-30 17:23:19.889579 pygpt_net-2.2.0/src/pygpt_net/data/icons/event_available.svg
+-rw-r--r--   0        0        0      174 2024-01-30 17:23:19.889579 pygpt_net-2.2.0/src/pygpt_net/data/icons/expand.svg
+-rw-r--r--   0        0        0      247 2024-01-30 17:23:19.889579 pygpt_net-2.2.0/src/pygpt_net/data/icons/fast_forward.svg
+-rw-r--r--   0        0        0      250 2024-01-30 17:23:19.889579 pygpt_net-2.2.0/src/pygpt_net/data/icons/fast_rewind.svg
+-rw-r--r--   0        0        0      504 2024-01-30 17:23:19.889579 pygpt_net-2.2.0/src/pygpt_net/data/icons/favorite.svg
+-rw-r--r--   0        0        0      297 2024-01-30 17:23:19.889579 pygpt_net-2.2.0/src/pygpt_net/data/icons/folder.svg
+-rw-r--r--   0        0        0      249 2024-01-30 17:23:19.889579 pygpt_net-2.2.0/src/pygpt_net/data/icons/folder_filled.svg
+-rw-r--r--   0        0        0      186 2024-01-30 17:23:19.889579 pygpt_net-2.2.0/src/pygpt_net/data/icons/forward.svg
+-rw-r--r--   0        0        0      194 2024-01-30 17:23:19.889579 pygpt_net-2.2.0/src/pygpt_net/data/icons/full.svg
+-rw-r--r--   0        0        0      249 2024-01-30 17:23:19.889579 pygpt_net-2.2.0/src/pygpt_net/data/icons/fullscreen.svg
+-rw-r--r--   0        0        0      459 2024-01-30 17:23:19.889579 pygpt_net-2.2.0/src/pygpt_net/data/icons/grid.svg
+-rw-r--r--   0        0        0      602 2024-01-30 17:23:19.889579 pygpt_net-2.2.0/src/pygpt_net/data/icons/hearing.svg
+-rw-r--r--   0        0        0      691 2024-01-30 17:23:19.889579 pygpt_net-2.2.0/src/pygpt_net/data/icons/help.svg
+-rw-r--r--   0        0        0      440 2024-01-30 17:23:19.889579 pygpt_net-2.2.0/src/pygpt_net/data/icons/history.svg
+-rw-r--r--   0        0        0      239 2024-01-30 17:23:19.889579 pygpt_net-2.2.0/src/pygpt_net/data/icons/home.svg
+-rw-r--r--   0        0        0      176 2024-01-30 17:23:19.889579 pygpt_net-2.2.0/src/pygpt_net/data/icons/home_filled.svg
+-rw-r--r--   0        0        0      323 2024-01-30 17:23:19.889579 pygpt_net-2.2.0/src/pygpt_net/data/icons/image.svg
+-rw-r--r--   0        0        0      531 2024-01-30 17:23:19.889579 pygpt_net-2.2.0/src/pygpt_net/data/icons/info.svg
+-rw-r--r--   0        0        0      337 2024-01-30 17:23:19.889579 pygpt_net-2.2.0/src/pygpt_net/data/icons/input.svg
+-rw-r--r--   0        0        0      541 2024-01-30 17:23:19.889579 pygpt_net-2.2.0/src/pygpt_net/data/icons/key.svg
+-rw-r--r--   0        0        0      517 2024-01-30 17:23:19.889579 pygpt_net-2.2.0/src/pygpt_net/data/icons/keyboard.svg
+-rw-r--r--   0        0        0      972 2024-01-30 17:23:19.889579 pygpt_net-2.2.0/src/pygpt_net/data/icons/language.svg
+-rw-r--r--   0        0        0      491 2024-01-30 17:23:19.889579 pygpt_net-2.2.0/src/pygpt_net/data/icons/list.svg
+-rw-r--r--   0        0        0      495 2024-01-30 17:23:19.889579 pygpt_net-2.2.0/src/pygpt_net/data/icons/lock.svg
+-rw-r--r--   0        0        0      273 2024-01-30 17:23:19.889579 pygpt_net-2.2.0/src/pygpt_net/data/icons/logout.svg
+-rw-r--r--   0        0        0      392 2024-01-30 17:23:19.889579 pygpt_net-2.2.0/src/pygpt_net/data/icons/map.svg
+-rw-r--r--   0        0        0      431 2024-01-30 17:23:19.889579 pygpt_net-2.2.0/src/pygpt_net/data/icons/memory.svg
+-rw-r--r--   0        0        0      189 2024-01-30 17:23:19.889579 pygpt_net-2.2.0/src/pygpt_net/data/icons/menu.svg
+-rw-r--r--   0        0        0      447 2024-01-30 17:23:19.889579 pygpt_net-2.2.0/src/pygpt_net/data/icons/mic.svg
+-rw-r--r--   0        0        0      485 2024-01-30 17:23:19.889579 pygpt_net-2.2.0/src/pygpt_net/data/icons/mic_off.svg
+-rw-r--r--   0        0        0      423 2024-01-30 17:23:19.889579 pygpt_net-2.2.0/src/pygpt_net/data/icons/more_horizontal.svg
+-rw-r--r--   0        0        0      491 2024-01-30 17:23:19.889579 pygpt_net-2.2.0/src/pygpt_net/data/icons/mute.svg
+-rw-r--r--   0        0        0      296 2024-01-30 17:23:19.889579 pygpt_net-2.2.0/src/pygpt_net/data/icons/open_tab.svg
+-rw-r--r--   0        0        0      846 2024-01-30 17:23:19.889579 pygpt_net-2.2.0/src/pygpt_net/data/icons/palette.svg
+-rw-r--r--   0        0        0      431 2024-01-30 17:23:19.889579 pygpt_net-2.2.0/src/pygpt_net/data/icons/paste.svg
+-rw-r--r--   0        0        0      250 2024-01-30 17:23:19.889579 pygpt_net-2.2.0/src/pygpt_net/data/icons/pause.svg
+-rw-r--r--   0        0        0      454 2024-01-30 17:23:19.889579 pygpt_net-2.2.0/src/pygpt_net/data/icons/pause_circle.svg
+-rw-r--r--   0        0        0      377 2024-01-30 17:23:19.889579 pygpt_net-2.2.0/src/pygpt_net/data/icons/photos.svg
+-rw-r--r--   0        0        0      441 2024-01-30 17:23:19.889579 pygpt_net-2.2.0/src/pygpt_net/data/icons/pin.svg
+-rw-r--r--   0        0        0      186 2024-01-30 17:23:19.889579 pygpt_net-2.2.0/src/pygpt_net/data/icons/play.svg
+-rw-r--r--   0        0        0      197 2024-01-30 17:23:19.889579 pygpt_net-2.2.0/src/pygpt_net/data/icons/play_pause.svg
+-rw-r--r--   0        0        0      246 2024-01-30 17:23:19.889579 pygpt_net-2.2.0/src/pygpt_net/data/icons/playlist_add.svg
+-rw-r--r--   0        0        0      318 2024-01-30 17:23:19.889579 pygpt_net-2.2.0/src/pygpt_net/data/icons/power.svg
+-rw-r--r--   0        0        0      478 2024-01-30 17:23:19.889579 pygpt_net-2.2.0/src/pygpt_net/data/icons/print.svg
+-rw-r--r--   0        0        0      598 2024-01-30 17:23:19.889579 pygpt_net-2.2.0/src/pygpt_net/data/icons/public_filled.svg
+-rw-r--r--   0        0        0      283 2024-01-30 20:56:32.772879 pygpt_net-2.2.0/src/pygpt_net/data/icons/redo.svg
+-rw-r--r--   0        0        0      329 2024-01-30 17:23:19.889579 pygpt_net-2.2.0/src/pygpt_net/data/icons/reload.svg
+-rw-r--r--   0        0        0      260 2024-01-30 17:23:19.889579 pygpt_net-2.2.0/src/pygpt_net/data/icons/repeat.svg
+-rw-r--r--   0        0        0      400 2024-01-30 17:23:19.889579 pygpt_net-2.2.0/src/pygpt_net/data/icons/replay.svg
+-rw-r--r--   0        0        0      401 2024-01-30 17:23:19.889579 pygpt_net-2.2.0/src/pygpt_net/data/icons/resize.svg
+-rw-r--r--   0        0        0      615 2024-01-30 17:23:19.889579 pygpt_net-2.2.0/src/pygpt_net/data/icons/robot.svg
+-rw-r--r--   0        0        0      807 2024-01-30 17:23:19.889579 pygpt_net-2.2.0/src/pygpt_net/data/icons/router.svg
+-rw-r--r--   0        0        0      384 2024-01-30 17:23:19.889579 pygpt_net-2.2.0/src/pygpt_net/data/icons/save.svg
+-rw-r--r--   0        0        0      469 2024-01-30 17:23:19.889579 pygpt_net-2.2.0/src/pygpt_net/data/icons/schedule.svg
+-rw-r--r--   0        0        0      396 2024-01-30 17:23:19.889579 pygpt_net-2.2.0/src/pygpt_net/data/icons/screenshot.svg
+-rw-r--r--   0        0        0      372 2024-01-30 17:23:19.889579 pygpt_net-2.2.0/src/pygpt_net/data/icons/search.svg
+-rw-r--r--   0        0        0      274 2024-01-30 17:23:19.889579 pygpt_net-2.2.0/src/pygpt_net/data/icons/security.svg
+-rw-r--r--   0        0        0      660 2024-01-30 17:23:19.889579 pygpt_net-2.2.0/src/pygpt_net/data/icons/sensors.svg
+-rw-r--r--   0        0        0      767 2024-01-30 17:23:19.889579 pygpt_net-2.2.0/src/pygpt_net/data/icons/settings.svg
+-rw-r--r--   0        0        0      475 2024-01-30 17:23:19.889579 pygpt_net-2.2.0/src/pygpt_net/data/icons/settings_filled.svg
+-rw-r--r--   0        0        0      792 2024-01-30 17:23:19.889579 pygpt_net-2.2.0/src/pygpt_net/data/icons/share.svg
+-rw-r--r--   0        0        0      469 2024-01-30 17:23:19.889579 pygpt_net-2.2.0/src/pygpt_net/data/icons/shedule.svg
+-rw-r--r--   0        0        0      189 2024-01-30 17:23:19.889579 pygpt_net-2.2.0/src/pygpt_net/data/icons/sort.svg
+-rw-r--r--   0        0        0      386 2024-01-30 17:23:19.889579 pygpt_net-2.2.0/src/pygpt_net/data/icons/stack.svg
+-rw-r--r--   0        0        0      306 2024-01-30 17:23:19.889579 pygpt_net-2.2.0/src/pygpt_net/data/icons/stacks.svg
+-rw-r--r--   0        0        0      291 2024-01-30 17:23:19.889579 pygpt_net-2.2.0/src/pygpt_net/data/icons/star.svg
+-rw-r--r--   0        0        0      188 2024-01-30 17:23:19.893578 pygpt_net-2.2.0/src/pygpt_net/data/icons/stop.svg
+-rw-r--r--   0        0        0      432 2024-01-30 17:23:19.893578 pygpt_net-2.2.0/src/pygpt_net/data/icons/stop_circle.svg
+-rw-r--r--   0        0        0      381 2024-01-30 17:23:19.893578 pygpt_net-2.2.0/src/pygpt_net/data/icons/sync.svg
+-rw-r--r--   0        0        0      317 2024-01-30 17:23:19.893578 pygpt_net-2.2.0/src/pygpt_net/data/icons/tag.svg
+-rw-r--r--   0        0        0      334 2024-01-30 17:23:19.893578 pygpt_net-2.2.0/src/pygpt_net/data/icons/task.svg
+-rw-r--r--   0        0        0      336 2024-01-30 17:23:19.893578 pygpt_net-2.2.0/src/pygpt_net/data/icons/terminal.svg
+-rw-r--r--   0        0        0      204 2024-01-30 17:23:19.893578 pygpt_net-2.2.0/src/pygpt_net/data/icons/text.svg
+-rw-r--r--   0        0        0      329 2024-01-30 17:23:19.893578 pygpt_net-2.2.0/src/pygpt_net/data/icons/textfile.svg
+-rw-r--r--   0        0        0      479 2024-01-30 17:23:19.893578 pygpt_net-2.2.0/src/pygpt_net/data/icons/timer.svg
+-rw-r--r--   0        0        0      321 2024-01-30 17:23:19.893578 pygpt_net-2.2.0/src/pygpt_net/data/icons/today.svg
+-rw-r--r--   0        0        0      308 2024-01-30 17:23:19.893578 pygpt_net-2.2.0/src/pygpt_net/data/icons/tune.svg
+-rw-r--r--   0        0        0      282 2024-01-30 17:23:19.893578 pygpt_net-2.2.0/src/pygpt_net/data/icons/undo.svg
+-rw-r--r--   0        0        0      444 2024-01-30 17:23:19.893578 pygpt_net-2.2.0/src/pygpt_net/data/icons/update.svg
+-rw-r--r--   0        0        0      392 2024-01-30 17:23:19.893578 pygpt_net-2.2.0/src/pygpt_net/data/icons/updater.svg
+-rw-r--r--   0        0        0      276 2024-01-30 17:23:19.893578 pygpt_net-2.2.0/src/pygpt_net/data/icons/upload.svg
+-rw-r--r--   0        0        0      339 2024-01-30 17:23:19.893578 pygpt_net-2.2.0/src/pygpt_net/data/icons/video.svg
+-rw-r--r--   0        0        0      550 2024-01-30 17:23:19.893578 pygpt_net-2.2.0/src/pygpt_net/data/icons/view.svg
+-rw-r--r--   0        0        0      736 2024-01-30 17:23:19.893578 pygpt_net-2.2.0/src/pygpt_net/data/icons/voice.svg
+-rw-r--r--   0        0        0      374 2024-01-30 17:23:19.893578 pygpt_net-2.2.0/src/pygpt_net/data/icons/volume.svg
+-rw-r--r--   0        0        0      310 2024-01-30 17:23:19.893578 pygpt_net-2.2.0/src/pygpt_net/data/icons/warning.svg
+-rw-r--r--   0        0        0      300 2024-01-30 17:23:19.893578 pygpt_net-2.2.0/src/pygpt_net/data/icons/webcam.svg
+-rw-r--r--   0        0        0      375 2024-02-29 03:07:51.274132 pygpt_net-2.2.0/src/pygpt_net/data/icons/webcam_off.svg
+-rw-r--r--   0        0        0      325 2024-01-30 17:23:19.893578 pygpt_net-2.2.0/src/pygpt_net/data/icons/width.svg
+-rw-r--r--   0        0        0      336 2024-01-30 17:23:19.893578 pygpt_net-2.2.0/src/pygpt_net/data/icons/window.svg
+-rw-r--r--   0        0        0      365 2024-01-30 17:23:19.893578 pygpt_net-2.2.0/src/pygpt_net/data/icons/work.svg
+-rw-r--r--   0        0        0      422 2024-01-30 17:23:19.893578 pygpt_net-2.2.0/src/pygpt_net/data/icons/zoom_in.svg
+-rw-r--r--   0        0        0      396 2024-01-30 17:23:19.893578 pygpt_net-2.2.0/src/pygpt_net/data/icons/zoom_out.svg
+-rwxr-xr-x   0        0        0    45043 2024-04-26 21:55:50.675598 pygpt_net-2.2.0/src/pygpt_net/data/locale/locale.de.ini
+-rwxr-xr-x   0        0        0    53434 2024-04-28 06:16:26.324027 pygpt_net-2.2.0/src/pygpt_net/data/locale/locale.en.ini
+-rwxr-xr-x   0        0        0    45213 2024-04-26 21:55:50.675598 pygpt_net-2.2.0/src/pygpt_net/data/locale/locale.es.ini
+-rwxr-xr-x   0        0        0    46829 2024-04-26 21:55:50.675598 pygpt_net-2.2.0/src/pygpt_net/data/locale/locale.fr.ini
+-rwxr-xr-x   0        0        0    44302 2024-04-26 21:55:50.679597 pygpt_net-2.2.0/src/pygpt_net/data/locale/locale.it.ini
+-rwxr-xr-x   0        0        0    44211 2024-04-26 21:55:50.679597 pygpt_net-2.2.0/src/pygpt_net/data/locale/locale.pl.ini
+-rwxr-xr-x   0        0        0    62420 2024-04-26 21:55:50.679597 pygpt_net-2.2.0/src/pygpt_net/data/locale/locale.uk.ini
+-rwxr-xr-x   0        0        0    48001 2024-04-26 21:55:50.679597 pygpt_net-2.2.0/src/pygpt_net/data/locale/locale.zh.ini
+-rwxr-xr-x   0        0        0     1477 2024-03-12 06:49:17.164785 pygpt_net-2.2.0/src/pygpt_net/data/locale/plugin.agent.en.ini
+-rwxr-xr-x   0        0        0     1394 2024-03-12 06:49:17.164785 pygpt_net-2.2.0/src/pygpt_net/data/locale/plugin.agent.pl.ini
+-rwxr-xr-x   0        0        0     5371 2024-03-12 06:49:17.168786 pygpt_net-2.2.0/src/pygpt_net/data/locale/plugin.audio_input.en.ini
+-rwxr-xr-x   0        0        0     5129 2024-03-12 06:49:17.168786 pygpt_net-2.2.0/src/pygpt_net/data/locale/plugin.audio_input.pl.ini
+-rwxr-xr-x   0        0        0     1721 2024-03-12 06:49:17.168786 pygpt_net-2.2.0/src/pygpt_net/data/locale/plugin.audio_output.en.ini
+-rwxr-xr-x   0        0        0     1395 2024-03-12 06:49:17.168786 pygpt_net-2.2.0/src/pygpt_net/data/locale/plugin.audio_output.pl.ini
+-rw-r--r--   0        0        0      622 2024-03-12 06:49:17.168786 pygpt_net-2.2.0/src/pygpt_net/data/locale/plugin.cmd_api.en.ini
+-rw-r--r--   0        0        0      853 2024-03-12 06:49:17.168786 pygpt_net-2.2.0/src/pygpt_net/data/locale/plugin.cmd_api.pl.ini
+-rwxr-xr-x   0        0        0     2365 2024-03-19 03:42:00.618910 pygpt_net-2.2.0/src/pygpt_net/data/locale/plugin.cmd_code_interpreter.en.ini
+-rwxr-xr-x   0        0        0     1614 2024-03-12 06:49:17.168786 pygpt_net-2.2.0/src/pygpt_net/data/locale/plugin.cmd_code_interpreter.pl.ini
+-rwxr-xr-x   0        0        0      455 2024-03-12 06:49:17.168786 pygpt_net-2.2.0/src/pygpt_net/data/locale/plugin.cmd_custom.en.ini
+-rwxr-xr-x   0        0        0      528 2024-03-12 06:49:17.168786 pygpt_net-2.2.0/src/pygpt_net/data/locale/plugin.cmd_custom.pl.ini
+-rwxr-xr-x   0        0        0     4234 2024-03-13 17:35:47.179523 pygpt_net-2.2.0/src/pygpt_net/data/locale/plugin.cmd_files.en.ini
+-rwxr-xr-x   0        0        0     3584 2024-03-13 17:35:47.179523 pygpt_net-2.2.0/src/pygpt_net/data/locale/plugin.cmd_files.pl.ini
+-rw-r--r--   0        0        0     2280 2024-03-12 06:49:17.168786 pygpt_net-2.2.0/src/pygpt_net/data/locale/plugin.cmd_history.en.ini
+-rw-r--r--   0        0        0     2765 2024-03-12 06:49:17.168786 pygpt_net-2.2.0/src/pygpt_net/data/locale/plugin.cmd_history.pl.ini
+-rw-r--r--   0        0        0     1042 2024-03-12 06:49:17.168786 pygpt_net-2.2.0/src/pygpt_net/data/locale/plugin.cmd_serial.en.ini
+-rw-r--r--   0        0        0     1511 2024-03-12 06:49:17.168786 pygpt_net-2.2.0/src/pygpt_net/data/locale/plugin.cmd_serial.pl.ini
+-rwxr-xr-x   0        0        0     4840 2024-03-12 06:49:17.168786 pygpt_net-2.2.0/src/pygpt_net/data/locale/plugin.cmd_web.en.ini
+-rwxr-xr-x   0        0        0     4660 2024-03-12 06:49:17.168786 pygpt_net-2.2.0/src/pygpt_net/data/locale/plugin.cmd_web.pl.ini
+-rw-r--r--   0        0        0      758 2024-03-12 06:49:17.168786 pygpt_net-2.2.0/src/pygpt_net/data/locale/plugin.crontab.en.ini
+-rw-r--r--   0        0        0      871 2024-03-12 06:49:17.168786 pygpt_net-2.2.0/src/pygpt_net/data/locale/plugin.crontab.pl.ini
+-rw-r--r--   0        0        0      338 2024-03-12 06:49:17.168786 pygpt_net-2.2.0/src/pygpt_net/data/locale/plugin.extra_prompt.en.ini
+-rw-r--r--   0        0        0      474 2024-03-12 03:34:38.663323 pygpt_net-2.2.0/src/pygpt_net/data/locale/plugin.extra_prompt.pl.ini
+-rwxr-xr-x   0        0        0     1970 2024-03-13 17:35:47.179523 pygpt_net-2.2.0/src/pygpt_net/data/locale/plugin.idx_llama_index.en.ini
+-rwxr-xr-x   0        0        0     1180 2024-03-13 17:35:47.179523 pygpt_net-2.2.0/src/pygpt_net/data/locale/plugin.idx_llama_index.pl.ini
+-rw-r--r--   0        0        0      396 2024-03-17 13:18:45.662349 pygpt_net-2.2.0/src/pygpt_net/data/locale/plugin.openai_dalle.en.ini
+-rw-r--r--   0        0        0      427 2024-03-17 13:18:45.662349 pygpt_net-2.2.0/src/pygpt_net/data/locale/plugin.openai_dalle.pl.ini
+-rw-r--r--   0        0        0     1393 2024-03-12 06:49:17.168786 pygpt_net-2.2.0/src/pygpt_net/data/locale/plugin.openai_vision.en.ini
+-rw-r--r--   0        0        0     1426 2024-03-12 06:49:17.168786 pygpt_net-2.2.0/src/pygpt_net/data/locale/plugin.openai_vision.pl.ini
+-rwxr-xr-x   0        0        0      631 2024-01-30 20:56:32.776879 pygpt_net-2.2.0/src/pygpt_net/data/locale/plugin.real_time.en.ini
+-rwxr-xr-x   0        0        0      752 2024-01-30 20:56:32.776879 pygpt_net-2.2.0/src/pygpt_net/data/locale/plugin.real_time.pl.ini
+-rwxr-xr-x   0        0        0    19418 2023-12-14 19:08:45.000000 pygpt_net-2.2.0/src/pygpt_net/data/logo.png
+-rw-r--r--   0        0        0    83051 2024-04-22 22:35:26.800429 pygpt_net-2.2.0/src/pygpt_net/data/prompts.csv
+-rwxr-xr-x   0        0        0    31708 2024-02-20 19:10:03.189314 pygpt_net-2.2.0/src/pygpt_net/data/win32/README.rtf
+-rwxr-xr-x   0        0        0     1633 2023-04-14 00:10:28.000000 pygpt_net-2.2.0/src/pygpt_net/data/win32/USER-LICENSE.rtf
+-rwxr-xr-x   0        0        0    87160 2023-04-14 00:10:28.000000 pygpt_net-2.2.0/src/pygpt_net/data/win32/pygpt.aip
+-rwxr-xr-x   0        0        0       45 2023-12-19 15:40:13.000000 pygpt_net-2.2.0/src/pygpt_net/data/win32/qt.conf
+-rw-r--r--   0        0        0    21736 2024-03-02 20:04:01.386329 pygpt_net-2.2.0/src/pygpt_net/icons.qrc
+-rw-r--r--   0        0        0    90430 2024-03-02 20:05:43.048414 pygpt_net-2.2.0/src/pygpt_net/icons_rc.py
+-rw-r--r--   0        0        0      488 2023-12-31 03:12:36.955235 pygpt_net-2.2.0/src/pygpt_net/item/__init__.py
+-rw-r--r--   0        0        0     9587 2024-04-26 21:55:50.679597 pygpt_net-2.2.0/src/pygpt_net/item/assistant.py
+-rw-r--r--   0        0        0     2110 2024-04-26 21:55:50.679597 pygpt_net-2.2.0/src/pygpt_net/item/attachment.py
+-rw-r--r--   0        0        0     2108 2024-01-27 21:42:30.960980 pygpt_net-2.2.0/src/pygpt_net/item/calendar_note.py
+-rw-r--r--   0        0        0    11455 2024-04-10 01:07:30.188635 pygpt_net-2.2.0/src/pygpt_net/item/ctx.py
+-rw-r--r--   0        0        0     1681 2024-01-27 21:42:30.960980 pygpt_net-2.2.0/src/pygpt_net/item/index.py
+-rw-r--r--   0        0        0      600 2023-12-31 03:12:34.283242 pygpt_net-2.2.0/src/pygpt_net/item/mode.py
+-rw-r--r--   0        0        0     6208 2024-01-27 21:42:30.960980 pygpt_net-2.2.0/src/pygpt_net/item/model.py
+-rw-r--r--   0        0        0     1508 2024-01-27 21:42:30.960980 pygpt_net-2.2.0/src/pygpt_net/item/notepad.py
+-rw-r--r--   0        0        0     4052 2024-02-15 05:07:04.122540 pygpt_net-2.2.0/src/pygpt_net/item/preset.py
+-rwxr-xr-x   0        0        0     7995 2024-04-21 18:06:27.128064 pygpt_net-2.2.0/src/pygpt_net/launcher.py
+-rw-r--r--   0        0        0     2849 2023-12-28 02:55:13.572642 pygpt_net-2.2.0/src/pygpt_net/migrations/Version20231227152900.py
+-rw-r--r--   0        0        0      906 2023-12-30 08:47:37.360628 pygpt_net-2.2.0/src/pygpt_net/migrations/Version20231230095000.py
+-rw-r--r--   0        0        0      901 2024-01-01 00:17:57.553256 pygpt_net-2.2.0/src/pygpt_net/migrations/Version20231231230000.py
+-rw-r--r--   0        0        0     1303 2024-01-06 06:27:36.351928 pygpt_net-2.2.0/src/pygpt_net/migrations/Version20240106060000.py
+-rw-r--r--   0        0        0      865 2024-01-07 09:35:02.638810 pygpt_net-2.2.0/src/pygpt_net/migrations/Version20240107060000.py
+-rw-r--r--   0        0        0     1756 2024-02-23 01:50:39.602419 pygpt_net-2.2.0/src/pygpt_net/migrations/Version20240222160000.py
+-rw-r--r--   0        0        0     1099 2024-02-23 06:06:25.510176 pygpt_net-2.2.0/src/pygpt_net/migrations/Version20240223050000.py
+-rw-r--r--   0        0        0      847 2024-03-03 22:43:17.403437 pygpt_net-2.2.0/src/pygpt_net/migrations/Version20240303190000.py
+-rw-r--r--   0        0        0     1110 2024-04-10 01:07:30.188635 pygpt_net-2.2.0/src/pygpt_net/migrations/Version20240408180000.py
+-rw-r--r--   0        0        0     1745 2024-04-26 21:55:50.679597 pygpt_net-2.2.0/src/pygpt_net/migrations/Version20240426050000.py
+-rw-r--r--   0        0        0     1862 2024-04-26 21:55:50.679597 pygpt_net-2.2.0/src/pygpt_net/migrations/__init__.py
+-rw-r--r--   0        0        0      614 2023-12-28 02:55:13.572642 pygpt_net-2.2.0/src/pygpt_net/migrations/base.py
+-rwxr-xr-x   0        0        0      488 2023-12-25 22:13:46.802302 pygpt_net-2.2.0/src/pygpt_net/plugin/__init__.py
+-rwxr-xr-x   0        0        0    15161 2024-03-07 01:04:26.445956 pygpt_net-2.2.0/src/pygpt_net/plugin/agent/__init__.py
+-rwxr-xr-x   0        0        0    23567 2024-03-26 17:12:51.294309 pygpt_net-2.2.0/src/pygpt_net/plugin/audio_input/__init__.py
+-rw-r--r--   0        0        0     4669 2024-04-24 23:37:32.612565 pygpt_net-2.2.0/src/pygpt_net/plugin/audio_input/simple.py
+-rwxr-xr-x   0        0        0    10466 2024-03-19 09:04:41.054930 pygpt_net-2.2.0/src/pygpt_net/plugin/audio_input/worker.py
+-rwxr-xr-x   0        0        0     6940 2024-03-10 10:31:05.897000 pygpt_net-2.2.0/src/pygpt_net/plugin/audio_output/__init__.py
+-rw-r--r--   0        0        0     1806 2024-03-10 10:31:05.897000 pygpt_net-2.2.0/src/pygpt_net/plugin/audio_output/worker.py
+-rwxr-xr-x   0        0        0    12704 2024-03-18 04:54:07.637826 pygpt_net-2.2.0/src/pygpt_net/plugin/base.py
+-rwxr-xr-x   0        0        0    11734 2024-03-12 06:49:17.168786 pygpt_net-2.2.0/src/pygpt_net/plugin/cmd_api/__init__.py
+-rw-r--r--   0        0        0     6243 2024-03-16 12:28:31.211383 pygpt_net-2.2.0/src/pygpt_net/plugin/cmd_api/worker.py
+-rwxr-xr-x   0        0        0     9571 2024-03-26 17:12:51.294309 pygpt_net-2.2.0/src/pygpt_net/plugin/cmd_code_interpreter/__init__.py
+-rw-r--r--   0        0        0    14580 2024-04-28 01:03:40.864507 pygpt_net-2.2.0/src/pygpt_net/plugin/cmd_code_interpreter/runner.py
+-rw-r--r--   0        0        0     8841 2024-04-28 01:03:50.072481 pygpt_net-2.2.0/src/pygpt_net/plugin/cmd_code_interpreter/worker.py
+-rwxr-xr-x   0        0        0     5875 2024-03-12 06:49:17.168786 pygpt_net-2.2.0/src/pygpt_net/plugin/cmd_custom/__init__.py
+-rw-r--r--   0        0        0     4507 2024-03-16 12:28:31.211383 pygpt_net-2.2.0/src/pygpt_net/plugin/cmd_custom/worker.py
+-rwxr-xr-x   0        0        0    17031 2024-04-25 01:16:54.112014 pygpt_net-2.2.0/src/pygpt_net/plugin/cmd_files/__init__.py
+-rwxr-xr-x   0        0        0    37969 2024-04-25 01:16:54.112014 pygpt_net-2.2.0/src/pygpt_net/plugin/cmd_files/worker.py
+-rwxr-xr-x   0        0        0    20140 2024-03-16 12:28:31.211383 pygpt_net-2.2.0/src/pygpt_net/plugin/cmd_history/__init__.py
+-rw-r--r--   0        0        0     6673 2024-03-16 12:28:31.211383 pygpt_net-2.2.0/src/pygpt_net/plugin/cmd_history/worker.py
+-rwxr-xr-x   0        0        0     6124 2024-03-16 12:28:31.211383 pygpt_net-2.2.0/src/pygpt_net/plugin/cmd_serial/__init__.py
+-rw-r--r--   0        0        0     8562 2024-03-16 12:28:31.211383 pygpt_net-2.2.0/src/pygpt_net/plugin/cmd_serial/worker.py
+-rwxr-xr-x   0        0        0    21060 2024-03-17 14:26:02.923314 pygpt_net-2.2.0/src/pygpt_net/plugin/cmd_web/__init__.py
+-rwxr-xr-x   0        0        0    12576 2024-02-24 01:55:58.445111 pygpt_net-2.2.0/src/pygpt_net/plugin/cmd_web/websearch.py
+-rw-r--r--   0        0        0    10794 2024-03-26 17:12:51.294309 pygpt_net-2.2.0/src/pygpt_net/plugin/cmd_web/worker.py
+-rwxr-xr-x   0        0        0     8163 2024-03-15 15:31:21.786121 pygpt_net-2.2.0/src/pygpt_net/plugin/crontab/__init__.py
+-rwxr-xr-x   0        0        0     2831 2024-02-18 01:14:49.758062 pygpt_net-2.2.0/src/pygpt_net/plugin/extra_prompt/__init__.py
+-rwxr-xr-x   0        0        0    14334 2024-04-17 01:35:30.426055 pygpt_net-2.2.0/src/pygpt_net/plugin/idx_llama_index/__init__.py
+-rw-r--r--   0        0        0     2825 2024-03-16 16:19:22.432875 pygpt_net-2.2.0/src/pygpt_net/plugin/idx_llama_index/worker.py
+-rwxr-xr-x   0        0        0     6272 2024-03-17 13:18:45.662349 pygpt_net-2.2.0/src/pygpt_net/plugin/openai_dalle/__init__.py
+-rwxr-xr-x   0        0        0    11659 2024-04-11 20:50:24.193030 pygpt_net-2.2.0/src/pygpt_net/plugin/openai_vision/__init__.py
+-rwxr-xr-x   0        0        0     3865 2024-03-17 13:18:45.662349 pygpt_net-2.2.0/src/pygpt_net/plugin/real_time/__init__.py
+-rw-r--r--   0        0        0      488 2023-12-25 22:13:46.802302 pygpt_net-2.2.0/src/pygpt_net/provider/__init__.py
+-rw-r--r--   0        0        0      488 2024-02-24 01:55:58.445111 pygpt_net-2.2.0/src/pygpt_net/provider/audio_input/__init__.py
+-rw-r--r--   0        0        0     1819 2024-02-27 05:21:39.771084 pygpt_net-2.2.0/src/pygpt_net/provider/audio_input/base.py
+-rw-r--r--   0        0        0     2818 2024-02-27 05:21:39.771084 pygpt_net-2.2.0/src/pygpt_net/provider/audio_input/bing_speech_recognition.py
+-rw-r--r--   0        0        0     2904 2024-02-27 05:21:39.771084 pygpt_net-2.2.0/src/pygpt_net/provider/audio_input/google_cloud_speech_recognition.py
+-rw-r--r--   0        0        0     2840 2024-02-27 05:21:39.771084 pygpt_net-2.2.0/src/pygpt_net/provider/audio_input/google_speech_recognition.py
+-rw-r--r--   0        0        0     2244 2024-03-01 03:17:53.457929 pygpt_net-2.2.0/src/pygpt_net/provider/audio_input/openai_whisper.py
+-rw-r--r--   0        0        0     3129 2024-03-01 03:17:53.457929 pygpt_net-2.2.0/src/pygpt_net/provider/audio_input/openai_whisper_local.py
+-rw-r--r--   0        0        0      488 2024-02-24 01:55:58.449111 pygpt_net-2.2.0/src/pygpt_net/provider/audio_output/__init__.py
+-rw-r--r--   0        0        0     1995 2024-02-27 05:21:39.771084 pygpt_net-2.2.0/src/pygpt_net/provider/audio_output/base.py
+-rw-r--r--   0        0        0     4231 2024-02-25 00:27:02.862945 pygpt_net-2.2.0/src/pygpt_net/provider/audio_output/eleven_labs.py
+-rw-r--r--   0        0        0     4286 2024-02-25 00:27:02.862945 pygpt_net-2.2.0/src/pygpt_net/provider/audio_output/google_tts.py
+-rw-r--r--   0        0        0     4960 2024-02-24 01:55:58.449111 pygpt_net-2.2.0/src/pygpt_net/provider/audio_output/ms_azure_tts.py
+-rw-r--r--   0        0        0     3056 2024-02-24 01:55:58.449111 pygpt_net-2.2.0/src/pygpt_net/provider/audio_output/openai_tts.py
+-rw-r--r--   0        0        0      488 2024-01-23 23:46:30.499197 pygpt_net-2.2.0/src/pygpt_net/provider/core/__init__.py
+-rw-r--r--   0        0        0      488 2024-01-23 23:46:30.499197 pygpt_net-2.2.0/src/pygpt_net/provider/core/assistant/__init__.py
+-rw-r--r--   0        0        0     1186 2024-01-23 23:46:30.499197 pygpt_net-2.2.0/src/pygpt_net/provider/core/assistant/base.py
+-rw-r--r--   0        0        0     6399 2024-04-26 21:55:50.679597 pygpt_net-2.2.0/src/pygpt_net/provider/core/assistant/json_file.py
+-rw-r--r--   0        0        0      488 2024-04-26 21:55:50.679597 pygpt_net-2.2.0/src/pygpt_net/provider/core/assistant_file/__init__.py
+-rw-r--r--   0        0        0     1291 2024-04-26 21:55:50.679597 pygpt_net-2.2.0/src/pygpt_net/provider/core/assistant_file/base.py
+-rw-r--r--   0        0        0     5125 2024-04-26 21:55:50.679597 pygpt_net-2.2.0/src/pygpt_net/provider/core/assistant_file/db_sqlite/__init__.py
+-rw-r--r--   0        0        0      885 2024-04-26 21:55:50.679597 pygpt_net-2.2.0/src/pygpt_net/provider/core/assistant_file/db_sqlite/patch.py
+-rw-r--r--   0        0        0    10392 2024-04-26 21:55:50.679597 pygpt_net-2.2.0/src/pygpt_net/provider/core/assistant_file/db_sqlite/storage.py
+-rw-r--r--   0        0        0     1796 2024-04-26 21:55:50.679597 pygpt_net-2.2.0/src/pygpt_net/provider/core/assistant_file/db_sqlite/utils.py
+-rw-r--r--   0        0        0      488 2024-04-26 21:55:50.679597 pygpt_net-2.2.0/src/pygpt_net/provider/core/assistant_store/__init__.py
+-rw-r--r--   0        0        0     1314 2024-04-26 21:55:50.679597 pygpt_net-2.2.0/src/pygpt_net/provider/core/assistant_store/base.py
+-rw-r--r--   0        0        0     3557 2024-04-26 21:55:50.679597 pygpt_net-2.2.0/src/pygpt_net/provider/core/assistant_store/db_sqlite/__init__.py
+-rw-r--r--   0        0        0      885 2024-04-26 21:55:50.679597 pygpt_net-2.2.0/src/pygpt_net/provider/core/assistant_store/db_sqlite/patch.py
+-rw-r--r--   0        0        0     7438 2024-04-26 21:55:50.679597 pygpt_net-2.2.0/src/pygpt_net/provider/core/assistant_store/db_sqlite/storage.py
+-rw-r--r--   0        0        0     2120 2024-04-26 21:55:50.679597 pygpt_net-2.2.0/src/pygpt_net/provider/core/assistant_store/db_sqlite/utils.py
+-rw-r--r--   0        0        0     4377 2024-04-26 21:55:50.679597 pygpt_net-2.2.0/src/pygpt_net/provider/core/assistant_store/json_file.py
+-rw-r--r--   0        0        0      488 2024-01-23 23:46:30.499197 pygpt_net-2.2.0/src/pygpt_net/provider/core/attachment/__init__.py
+-rw-r--r--   0        0        0     1204 2024-01-23 23:46:30.499197 pygpt_net-2.2.0/src/pygpt_net/provider/core/attachment/base.py
+-rw-r--r--   0        0        0     5404 2024-04-26 21:55:50.679597 pygpt_net-2.2.0/src/pygpt_net/provider/core/attachment/json_file.py
+-rw-r--r--   0        0        0      488 2024-01-23 23:46:30.499197 pygpt_net-2.2.0/src/pygpt_net/provider/core/calendar/__init__.py
+-rw-r--r--   0        0        0     1322 2024-01-23 23:46:30.499197 pygpt_net-2.2.0/src/pygpt_net/provider/core/calendar/base.py
+-rw-r--r--   0        0        0     3953 2024-03-08 00:36:17.343108 pygpt_net-2.2.0/src/pygpt_net/provider/core/calendar/db_sqlite/__init__.py
+-rw-r--r--   0        0        0      837 2024-01-23 23:46:30.499197 pygpt_net-2.2.0/src/pygpt_net/provider/core/calendar/db_sqlite/patch.py
+-rw-r--r--   0        0        0    11113 2024-03-07 01:04:26.445956 pygpt_net-2.2.0/src/pygpt_net/provider/core/calendar/db_sqlite/storage.py
+-rw-r--r--   0        0        0      488 2024-01-23 23:46:30.499197 pygpt_net-2.2.0/src/pygpt_net/provider/core/config/__init__.py
+-rw-r--r--   0        0        0     1235 2024-01-23 23:46:30.499197 pygpt_net-2.2.0/src/pygpt_net/provider/core/config/base.py
+-rwxr-xr-x   0        0        0     5017 2024-04-11 01:27:21.134184 pygpt_net-2.2.0/src/pygpt_net/provider/core/config/json_file.py
+-rwxr-xr-x   0        0        0    75483 2024-04-26 21:55:50.679597 pygpt_net-2.2.0/src/pygpt_net/provider/core/config/patch.py
+-rw-r--r--   0        0        0      488 2024-01-23 23:46:30.499197 pygpt_net-2.2.0/src/pygpt_net/provider/core/ctx/__init__.py
+-rw-r--r--   0        0        0     2577 2024-04-17 05:13:33.075416 pygpt_net-2.2.0/src/pygpt_net/provider/core/ctx/base.py
+-rw-r--r--   0        0        0     9171 2024-04-17 05:13:33.075416 pygpt_net-2.2.0/src/pygpt_net/provider/core/ctx/db_sqlite/__init__.py
+-rw-r--r--   0        0        0     3101 2024-01-23 23:46:30.499197 pygpt_net-2.2.0/src/pygpt_net/provider/core/ctx/db_sqlite/patch.py
+-rw-r--r--   0        0        0    31650 2024-04-17 05:13:33.075416 pygpt_net-2.2.0/src/pygpt_net/provider/core/ctx/db_sqlite/storage.py
+-rw-r--r--   0        0        0     7644 2024-04-10 01:07:30.188635 pygpt_net-2.2.0/src/pygpt_net/provider/core/ctx/db_sqlite/utils.py
+-rw-r--r--   0        0        0    11665 2024-01-23 23:46:30.503197 pygpt_net-2.2.0/src/pygpt_net/provider/core/ctx/json_file.py
+-rw-r--r--   0        0        0      488 2024-01-23 23:46:30.503197 pygpt_net-2.2.0/src/pygpt_net/provider/core/history/__init__.py
+-rw-r--r--   0        0        0      863 2024-01-23 23:46:30.503197 pygpt_net-2.2.0/src/pygpt_net/provider/core/history/base.py
+-rw-r--r--   0        0        0      837 2024-01-23 23:46:30.503197 pygpt_net-2.2.0/src/pygpt_net/provider/core/history/patch.py
+-rw-r--r--   0        0        0     2969 2024-01-23 23:46:30.503197 pygpt_net-2.2.0/src/pygpt_net/provider/core/history/txt_file.py
+-rw-r--r--   0        0        0      488 2024-01-23 23:46:30.503197 pygpt_net-2.2.0/src/pygpt_net/provider/core/index/__init__.py
+-rw-r--r--   0        0        0     2875 2024-03-07 01:04:26.445956 pygpt_net-2.2.0/src/pygpt_net/provider/core/index/base.py
+-rw-r--r--   0        0        0     8502 2024-03-07 01:04:26.445956 pygpt_net-2.2.0/src/pygpt_net/provider/core/index/db_sqlite/__init__.py
+-rw-r--r--   0        0        0     2972 2024-02-23 06:06:25.510176 pygpt_net-2.2.0/src/pygpt_net/provider/core/index/db_sqlite/patch.py
+-rw-r--r--   0        0        0    17470 2024-03-07 01:04:26.445956 pygpt_net-2.2.0/src/pygpt_net/provider/core/index/db_sqlite/storage.py
+-rw-r--r--   0        0        0      934 2024-03-07 01:04:26.445956 pygpt_net-2.2.0/src/pygpt_net/provider/core/index/db_sqlite/utils.py
+-rw-r--r--   0        0        0     6615 2024-02-23 01:50:39.606418 pygpt_net-2.2.0/src/pygpt_net/provider/core/index/json_file.py
+-rw-r--r--   0        0        0      837 2024-01-23 23:46:30.503197 pygpt_net-2.2.0/src/pygpt_net/provider/core/index/patch.py
+-rw-r--r--   0        0        0      488 2024-01-23 23:46:30.503197 pygpt_net-2.2.0/src/pygpt_net/provider/core/mode/__init__.py
+-rw-r--r--   0        0        0     1062 2024-01-23 23:46:30.503197 pygpt_net-2.2.0/src/pygpt_net/provider/core/mode/base.py
+-rw-r--r--   0        0        0     4142 2024-01-23 23:46:30.503197 pygpt_net-2.2.0/src/pygpt_net/provider/core/mode/json_file.py
+-rw-r--r--   0        0        0      837 2024-01-23 23:46:30.503197 pygpt_net-2.2.0/src/pygpt_net/provider/core/mode/patch.py
+-rw-r--r--   0        0        0      488 2024-01-23 23:46:30.503197 pygpt_net-2.2.0/src/pygpt_net/provider/core/model/__init__.py
+-rw-r--r--   0        0        0     1246 2024-01-23 23:46:30.503197 pygpt_net-2.2.0/src/pygpt_net/provider/core/model/base.py
+-rw-r--r--   0        0        0     6231 2024-01-23 23:46:30.503197 pygpt_net-2.2.0/src/pygpt_net/provider/core/model/json_file.py
+-rw-r--r--   0        0        0     9769 2024-04-11 20:50:24.193030 pygpt_net-2.2.0/src/pygpt_net/provider/core/model/patch.py
+-rw-r--r--   0        0        0      488 2024-01-23 23:46:30.503197 pygpt_net-2.2.0/src/pygpt_net/provider/core/notepad/__init__.py
+-rw-r--r--   0        0        0     1262 2024-01-23 23:46:30.503197 pygpt_net-2.2.0/src/pygpt_net/provider/core/notepad/base.py
+-rw-r--r--   0        0        0     3044 2024-01-23 23:46:30.503197 pygpt_net-2.2.0/src/pygpt_net/provider/core/notepad/db_sqlite/__init__.py
+-rw-r--r--   0        0        0     2805 2024-01-23 23:46:30.503197 pygpt_net-2.2.0/src/pygpt_net/provider/core/notepad/db_sqlite/patch.py
+-rw-r--r--   0        0        0     7263 2024-01-23 23:46:30.503197 pygpt_net-2.2.0/src/pygpt_net/provider/core/notepad/db_sqlite/storage.py
+-rw-r--r--   0        0        0     7555 2024-01-23 23:46:30.503197 pygpt_net-2.2.0/src/pygpt_net/provider/core/notepad/json_file.py
+-rw-r--r--   0        0        0      488 2024-03-07 01:04:26.445956 pygpt_net-2.2.0/src/pygpt_net/provider/core/plugin_preset/__init__.py
+-rw-r--r--   0        0        0      987 2024-03-07 01:04:26.445956 pygpt_net-2.2.0/src/pygpt_net/provider/core/plugin_preset/base.py
+-rwxr-xr-x   0        0        0     3198 2024-03-07 01:04:26.445956 pygpt_net-2.2.0/src/pygpt_net/provider/core/plugin_preset/json_file.py
+-rwxr-xr-x   0        0        0     1766 2024-03-07 01:04:26.445956 pygpt_net-2.2.0/src/pygpt_net/provider/core/plugin_preset/patch.py
+-rwxr-xr-x   0        0        0      488 2024-01-23 23:46:30.503197 pygpt_net-2.2.0/src/pygpt_net/provider/core/preset/__init__.py
+-rwxr-xr-x   0        0        0     1300 2024-02-01 01:48:09.374583 pygpt_net-2.2.0/src/pygpt_net/provider/core/preset/base.py
+-rwxr-xr-x   0        0        0     7887 2024-02-15 05:07:04.122540 pygpt_net-2.2.0/src/pygpt_net/provider/core/preset/json_file.py
+-rw-r--r--   0        0        0     3166 2024-01-23 23:46:30.503197 pygpt_net-2.2.0/src/pygpt_net/provider/core/preset/patch.py
+-rw-r--r--   0        0        0     6961 2024-03-08 00:36:17.343108 pygpt_net-2.2.0/src/pygpt_net/provider/gpt/__init__.py
+-rw-r--r--   0        0        0    26543 2024-04-26 21:55:50.679597 pygpt_net-2.2.0/src/pygpt_net/provider/gpt/assistants.py
+-rw-r--r--   0        0        0     5763 2024-03-08 00:03:22.338417 pygpt_net-2.2.0/src/pygpt_net/provider/gpt/chat.py
+-rw-r--r--   0        0        0     5354 2024-03-09 21:41:28.193853 pygpt_net-2.2.0/src/pygpt_net/provider/gpt/completion.py
+-rw-r--r--   0        0        0     7903 2024-03-17 13:18:45.662349 pygpt_net-2.2.0/src/pygpt_net/provider/gpt/image.py
+-rw-r--r--   0        0        0     1848 2024-03-17 13:18:45.662349 pygpt_net-2.2.0/src/pygpt_net/provider/gpt/summarizer.py
+-rw-r--r--   0        0        0     7341 2024-03-12 21:25:35.838043 pygpt_net-2.2.0/src/pygpt_net/provider/gpt/vision.py
+-rw-r--r--   0        0        0        0 2024-02-20 19:10:03.189314 pygpt_net-2.2.0/src/pygpt_net/provider/gpt/worker/__init__.py
+-rw-r--r--   0        0        0    15828 2024-04-28 06:16:26.324027 pygpt_net-2.2.0/src/pygpt_net/provider/gpt/worker/assistants.py
+-rw-r--r--   0        0        0    10157 2024-04-27 07:58:32.750704 pygpt_net-2.2.0/src/pygpt_net/provider/gpt/worker/importer.py
+-rwxr-xr-x   0        0        0        0 2024-01-27 21:42:30.960980 pygpt_net-2.2.0/src/pygpt_net/provider/llms/__init__.py
+-rwxr-xr-x   0        0        0     1641 2024-01-27 21:42:30.960980 pygpt_net-2.2.0/src/pygpt_net/provider/llms/anthropic.py
+-rwxr-xr-x   0        0        0     2800 2024-03-13 15:08:01.569797 pygpt_net-2.2.0/src/pygpt_net/provider/llms/azure_openai.py
+-rw-r--r--   0        0        0     3940 2024-03-15 15:31:21.790122 pygpt_net-2.2.0/src/pygpt_net/provider/llms/base.py
+-rwxr-xr-x   0        0        0     1535 2024-01-27 21:42:30.960980 pygpt_net-2.2.0/src/pygpt_net/provider/llms/hugging_face.py
+-rwxr-xr-x   0        0        0     1643 2024-01-27 21:42:30.960980 pygpt_net-2.2.0/src/pygpt_net/provider/llms/llama.py
+-rwxr-xr-x   0        0        0     1517 2024-01-27 21:42:30.960980 pygpt_net-2.2.0/src/pygpt_net/provider/llms/ollama.py
+-rwxr-xr-x   0        0        0     2727 2024-03-13 15:08:01.569797 pygpt_net-2.2.0/src/pygpt_net/provider/llms/openai.py
+-rw-r--r--   0        0        0        0 2024-01-23 23:46:30.503197 pygpt_net-2.2.0/src/pygpt_net/provider/loaders/__init__.py
+-rw-r--r--   0        0        0     2515 2024-04-17 01:35:30.426055 pygpt_net-2.2.0/src/pygpt_net/provider/loaders/base.py
+-rw-r--r--   0        0        0     1258 2024-04-17 01:35:30.426055 pygpt_net-2.2.0/src/pygpt_net/provider/loaders/file_csv.py
+-rw-r--r--   0        0        0     1032 2024-02-29 03:07:51.278132 pygpt_net-2.2.0/src/pygpt_net/provider/loaders/file_docx.py
+-rw-r--r--   0        0        0     1022 2024-02-29 03:07:51.278132 pygpt_net-2.2.0/src/pygpt_net/provider/loaders/file_epub.py
+-rw-r--r--   0        0        0     1032 2024-02-28 03:58:59.309445 pygpt_net-2.2.0/src/pygpt_net/provider/loaders/file_excel.py
+-rw-r--r--   0        0        0     1268 2024-04-17 01:35:30.426055 pygpt_net-2.2.0/src/pygpt_net/provider/loaders/file_html.py
+-rw-r--r--   0        0        0     1923 2024-04-17 01:35:30.426055 pygpt_net-2.2.0/src/pygpt_net/provider/loaders/file_image_vision.py
+-rw-r--r--   0        0        0     1284 2024-04-17 01:35:30.426055 pygpt_net-2.2.0/src/pygpt_net/provider/loaders/file_ipynb.py
+-rw-r--r--   0        0        0      996 2024-02-28 03:58:59.309445 pygpt_net-2.2.0/src/pygpt_net/provider/loaders/file_json.py
+-rw-r--r--   0        0        0     1292 2024-04-17 01:35:30.426055 pygpt_net-2.2.0/src/pygpt_net/provider/loaders/file_markdown.py
+-rw-r--r--   0        0        0     1214 2024-04-17 01:35:30.426055 pygpt_net-2.2.0/src/pygpt_net/provider/loaders/file_pdf.py
+-rw-r--r--   0        0        0     1832 2024-04-17 01:35:30.426055 pygpt_net-2.2.0/src/pygpt_net/provider/loaders/file_video_audio.py
+-rw-r--r--   0        0        0     1196 2024-04-17 01:35:30.426055 pygpt_net-2.2.0/src/pygpt_net/provider/loaders/file_xml.py
+-rw-r--r--   0        0        0        0 2024-01-27 21:42:30.960980 pygpt_net-2.2.0/src/pygpt_net/provider/loaders/hub/__init__.py
+-rw-r--r--   0        0        0        0 2024-03-01 17:40:19.825274 pygpt_net-2.2.0/src/pygpt_net/provider/loaders/hub/bitbucket/__init__.py
+-rw-r--r--   0        0        0     6194 2024-03-01 17:40:19.825274 pygpt_net-2.2.0/src/pygpt_net/provider/loaders/hub/bitbucket/repo.py
+-rw-r--r--   0        0        0        0 2024-03-01 17:40:19.825274 pygpt_net-2.2.0/src/pygpt_net/provider/loaders/hub/chatgpt_retrieval/__init__.py
+-rw-r--r--   0        0        0     2460 2024-03-01 17:40:19.825274 pygpt_net-2.2.0/src/pygpt_net/provider/loaders/hub/chatgpt_retrieval/base.py
+-rw-r--r--   0        0        0        0 2024-03-01 17:40:19.825274 pygpt_net-2.2.0/src/pygpt_net/provider/loaders/hub/database/__init__.py
+-rw-r--r--   0        0        0     4228 2024-03-01 17:40:19.825274 pygpt_net-2.2.0/src/pygpt_net/provider/loaders/hub/database/base.py
+-rw-r--r--   0        0        0        0 2024-03-01 17:40:19.825274 pygpt_net-2.2.0/src/pygpt_net/provider/loaders/hub/github/__init__.py
+-rw-r--r--   0        0        0     4204 2024-03-01 17:40:19.825274 pygpt_net-2.2.0/src/pygpt_net/provider/loaders/hub/github/issues.py
+-rw-r--r--   0        0        0     3550 2024-03-01 17:40:19.825274 pygpt_net-2.2.0/src/pygpt_net/provider/loaders/hub/github/repo.py
+-rw-r--r--   0        0        0        0 2024-03-01 03:17:53.457929 pygpt_net-2.2.0/src/pygpt_net/provider/loaders/hub/google/__init__.py
+-rw-r--r--   0        0        0     2658 2024-03-01 03:17:53.457929 pygpt_net-2.2.0/src/pygpt_net/provider/loaders/hub/google/calendar.py
+-rw-r--r--   0        0        0     5370 2024-03-01 03:17:53.457929 pygpt_net-2.2.0/src/pygpt_net/provider/loaders/hub/google/docs.py
+-rw-r--r--   0        0        0     6772 2024-03-01 03:17:53.457929 pygpt_net-2.2.0/src/pygpt_net/provider/loaders/hub/google/gmail.py
+-rw-r--r--   0        0        0     1633 2024-03-01 03:17:53.457929 pygpt_net-2.2.0/src/pygpt_net/provider/loaders/hub/google/keep.py
+-rw-r--r--   0        0        0     5282 2024-03-01 03:17:53.457929 pygpt_net-2.2.0/src/pygpt_net/provider/loaders/hub/google/sheets.py
+-rw-r--r--   0        0        0        0 2024-03-01 03:17:53.457929 pygpt_net-2.2.0/src/pygpt_net/provider/loaders/hub/image_vision/__init__.py
+-rw-r--r--   0        0        0     6940 2024-03-01 03:17:53.457929 pygpt_net-2.2.0/src/pygpt_net/provider/loaders/hub/image_vision/base.py
+-rw-r--r--   0        0        0        0 2024-01-27 21:42:30.964980 pygpt_net-2.2.0/src/pygpt_net/provider/loaders/hub/json/__init__.py
+-rw-r--r--   0        0        0     3862 2024-02-29 03:07:51.278132 pygpt_net-2.2.0/src/pygpt_net/provider/loaders/hub/json/base.py
+-rw-r--r--   0        0        0        0 2024-01-27 21:42:30.964980 pygpt_net-2.2.0/src/pygpt_net/provider/loaders/hub/pandas_excel/__init__.py
+-rw-r--r--   0        0        0     3940 2024-02-29 03:07:51.278132 pygpt_net-2.2.0/src/pygpt_net/provider/loaders/hub/pandas_excel/base.py
+-rw-r--r--   0        0        0        0 2024-01-27 21:42:30.964980 pygpt_net-2.2.0/src/pygpt_net/provider/loaders/hub/simple_csv/__init__.py
+-rw-r--r--   0        0        0     1481 2024-02-29 03:07:51.278132 pygpt_net-2.2.0/src/pygpt_net/provider/loaders/hub/simple_csv/base.py
+-rw-r--r--   0        0        0        0 2024-03-01 03:17:53.457929 pygpt_net-2.2.0/src/pygpt_net/provider/loaders/hub/video_audio/__init__.py
+-rw-r--r--   0        0        0     4960 2024-03-01 03:17:53.457929 pygpt_net-2.2.0/src/pygpt_net/provider/loaders/hub/video_audio/base.py
+-rw-r--r--   0        0        0        0 2024-02-27 05:21:39.771084 pygpt_net-2.2.0/src/pygpt_net/provider/loaders/hub/web_page/__init__.py
+-rw-r--r--   0        0        0      556 2024-02-29 03:07:51.278132 pygpt_net-2.2.0/src/pygpt_net/provider/loaders/hub/web_page/base.py
+-rw-r--r--   0        0        0        0 2024-02-27 05:21:39.771084 pygpt_net-2.2.0/src/pygpt_net/provider/loaders/hub/yt/__init__.py
+-rw-r--r--   0        0        0     2427 2024-02-29 03:07:51.278132 pygpt_net-2.2.0/src/pygpt_net/provider/loaders/hub/yt/base.py
+-rw-r--r--   0        0        0      545 2024-02-27 05:21:39.771084 pygpt_net-2.2.0/src/pygpt_net/provider/loaders/hub/yt/utils.py
+-rw-r--r--   0        0        0     3626 2024-04-17 01:35:30.426055 pygpt_net-2.2.0/src/pygpt_net/provider/loaders/web_bitbucket.py
+-rw-r--r--   0        0        0     2580 2024-04-17 01:35:30.426055 pygpt_net-2.2.0/src/pygpt_net/provider/loaders/web_chatgpt_retrieval.py
+-rw-r--r--   0        0        0     2834 2024-04-17 01:35:30.426055 pygpt_net-2.2.0/src/pygpt_net/provider/loaders/web_database.py
+-rw-r--r--   0        0        0     3832 2024-04-17 01:35:30.426055 pygpt_net-2.2.0/src/pygpt_net/provider/loaders/web_github_issues.py
+-rw-r--r--   0        0        0     4377 2024-04-17 01:35:30.426055 pygpt_net-2.2.0/src/pygpt_net/provider/loaders/web_github_repo.py
+-rw-r--r--   0        0        0     2834 2024-04-17 01:35:30.430055 pygpt_net-2.2.0/src/pygpt_net/provider/loaders/web_google_calendar.py
+-rw-r--r--   0        0        0     2480 2024-04-17 01:35:30.430055 pygpt_net-2.2.0/src/pygpt_net/provider/loaders/web_google_docs.py
+-rw-r--r--   0        0        0     3582 2024-04-17 01:35:30.430055 pygpt_net-2.2.0/src/pygpt_net/provider/loaders/web_google_drive.py
+-rw-r--r--   0        0        0     2710 2024-04-17 01:35:30.430055 pygpt_net-2.2.0/src/pygpt_net/provider/loaders/web_google_gmail.py
+-rw-r--r--   0        0        0     2412 2024-04-17 01:35:30.430055 pygpt_net-2.2.0/src/pygpt_net/provider/loaders/web_google_keep.py
+-rw-r--r--   0        0        0     2590 2024-04-17 01:35:30.430055 pygpt_net-2.2.0/src/pygpt_net/provider/loaders/web_google_sheets.py
+-rw-r--r--   0        0        0     4004 2024-04-17 01:35:30.430055 pygpt_net-2.2.0/src/pygpt_net/provider/loaders/web_microsoft_onedrive.py
+-rw-r--r--   0        0        0     1572 2024-03-12 06:49:17.168786 pygpt_net-2.2.0/src/pygpt_net/provider/loaders/web_page.py
+-rw-r--r--   0        0        0     1584 2024-03-12 06:49:17.172787 pygpt_net-2.2.0/src/pygpt_net/provider/loaders/web_rss.py
+-rw-r--r--   0        0        0     1853 2024-04-17 01:35:30.430055 pygpt_net-2.2.0/src/pygpt_net/provider/loaders/web_sitemap.py
+-rw-r--r--   0        0        0     2831 2024-04-17 01:35:30.430055 pygpt_net-2.2.0/src/pygpt_net/provider/loaders/web_twitter.py
+-rw-r--r--   0        0        0     1617 2024-03-12 06:49:17.172787 pygpt_net-2.2.0/src/pygpt_net/provider/loaders/web_yt.py
+-rw-r--r--   0        0        0     5976 2024-03-08 22:55:56.889343 pygpt_net-2.2.0/src/pygpt_net/provider/vector_stores/__init__.py
+-rw-r--r--   0        0        0     3791 2024-03-11 03:15:21.875594 pygpt_net-2.2.0/src/pygpt_net/provider/vector_stores/base.py
+-rwxr-xr-x   0        0        0     3036 2024-03-11 03:15:21.875594 pygpt_net-2.2.0/src/pygpt_net/provider/vector_stores/chroma.py
+-rw-r--r--   0        0        0     3016 2024-03-11 03:15:21.875594 pygpt_net-2.2.0/src/pygpt_net/provider/vector_stores/elasticsearch.py
+-rw-r--r--   0        0        0     5041 2024-03-11 03:15:21.875594 pygpt_net-2.2.0/src/pygpt_net/provider/vector_stores/pinecode.py
+-rw-r--r--   0        0        0     3047 2024-03-11 03:15:21.875594 pygpt_net-2.2.0/src/pygpt_net/provider/vector_stores/redis.py
+-rw-r--r--   0        0        0     2455 2024-03-11 03:15:21.875594 pygpt_net-2.2.0/src/pygpt_net/provider/vector_stores/simple.py
+-rw-r--r--   0        0        0     4322 2024-03-11 03:15:21.875594 pygpt_net-2.2.0/src/pygpt_net/provider/vector_stores/temp.py
+-rw-r--r--   0        0        0      488 2024-02-24 01:55:58.449111 pygpt_net-2.2.0/src/pygpt_net/provider/web/__init__.py
+-rw-r--r--   0        0        0     1994 2024-02-27 05:21:39.771084 pygpt_net-2.2.0/src/pygpt_net/provider/web/base.py
+-rw-r--r--   0        0        0     4646 2024-02-25 00:27:02.862945 pygpt_net-2.2.0/src/pygpt_net/provider/web/google_custom_search.py
+-rw-r--r--   0        0        0     4104 2024-02-25 00:27:02.862945 pygpt_net-2.2.0/src/pygpt_net/provider/web/microsoft_bing.py
+-rw-r--r--   0        0        0     3917 2024-04-19 00:32:20.498428 pygpt_net-2.2.0/src/pygpt_net/tools/__init__.py
+-rwxr-xr-x   0        0        0     9791 2024-03-26 17:12:51.294309 pygpt_net-2.2.0/src/pygpt_net/tools/audio_transcriber/__init__.py
+-rw-r--r--   0        0        0        0 2024-03-26 17:12:51.294309 pygpt_net-2.2.0/src/pygpt_net/tools/audio_transcriber/ui/__init__.py
+-rw-r--r--   0        0        0     5666 2024-03-26 17:12:51.294309 pygpt_net-2.2.0/src/pygpt_net/tools/audio_transcriber/ui/dialogs.py
+-rw-r--r--   0        0        0     2116 2024-04-19 00:32:20.498428 pygpt_net-2.2.0/src/pygpt_net/tools/base.py
+-rwxr-xr-x   0        0        0    11427 2024-04-19 00:32:20.498428 pygpt_net-2.2.0/src/pygpt_net/tools/code_interpreter/__init__.py
+-rw-r--r--   0        0        0        0 2024-03-26 17:12:51.294309 pygpt_net-2.2.0/src/pygpt_net/tools/code_interpreter/ui/__init__.py
+-rw-r--r--   0        0        0     6580 2024-03-26 17:12:51.294309 pygpt_net-2.2.0/src/pygpt_net/tools/code_interpreter/ui/dialogs.py
+-rw-r--r--   0        0        0     3518 2024-03-26 17:12:51.294309 pygpt_net-2.2.0/src/pygpt_net/tools/code_interpreter/ui/widgets.py
+-rwxr-xr-x   0        0        0     9063 2024-04-14 16:40:07.849541 pygpt_net-2.2.0/src/pygpt_net/tools/image_viewer/__init__.py
+-rw-r--r--   0        0        0        0 2024-03-26 17:12:51.294309 pygpt_net-2.2.0/src/pygpt_net/tools/image_viewer/ui/__init__.py
+-rw-r--r--   0        0        0     4962 2024-03-26 17:12:51.294309 pygpt_net-2.2.0/src/pygpt_net/tools/image_viewer/ui/dialogs.py
+-rwxr-xr-x   0        0        0    18833 2024-04-19 00:32:20.498428 pygpt_net-2.2.0/src/pygpt_net/tools/indexer/__init__.py
+-rw-r--r--   0        0        0        0 2024-04-17 01:35:30.430055 pygpt_net-2.2.0/src/pygpt_net/tools/indexer/ui/__init__.py
+-rw-r--r--   0        0        0     1438 2024-04-17 01:35:30.430055 pygpt_net-2.2.0/src/pygpt_net/tools/indexer/ui/browse.py
+-rw-r--r--   0        0        0     4355 2024-04-17 01:35:30.430055 pygpt_net-2.2.0/src/pygpt_net/tools/indexer/ui/ctx.py
+-rw-r--r--   0        0        0     7985 2024-04-17 01:35:30.430055 pygpt_net-2.2.0/src/pygpt_net/tools/indexer/ui/dialogs.py
+-rw-r--r--   0        0        0     4034 2024-04-17 01:35:30.430055 pygpt_net-2.2.0/src/pygpt_net/tools/indexer/ui/files.py
+-rw-r--r--   0        0        0    10477 2024-04-17 01:35:30.430055 pygpt_net-2.2.0/src/pygpt_net/tools/indexer/ui/web.py
+-rw-r--r--   0        0        0     3562 2024-04-17 01:35:30.430055 pygpt_net-2.2.0/src/pygpt_net/tools/indexer/ui/widgets.py
+-rwxr-xr-x   0        0        0     6028 2024-03-26 17:12:51.294309 pygpt_net-2.2.0/src/pygpt_net/tools/media_player/__init__.py
+-rw-r--r--   0        0        0        0 2024-03-26 17:12:51.294309 pygpt_net-2.2.0/src/pygpt_net/tools/media_player/ui/__init__.py
+-rw-r--r--   0        0        0     3590 2024-03-26 17:12:51.294309 pygpt_net-2.2.0/src/pygpt_net/tools/media_player/ui/dialogs.py
+-rw-r--r--   0        0        0    15702 2024-03-26 17:12:51.294309 pygpt_net-2.2.0/src/pygpt_net/tools/media_player/ui/widgets.py
+-rw-r--r--   0        0        0     8018 2024-04-14 16:40:07.849541 pygpt_net-2.2.0/src/pygpt_net/tools/text_editor/__init__.py
+-rw-r--r--   0        0        0        0 2024-03-26 17:12:51.294309 pygpt_net-2.2.0/src/pygpt_net/tools/text_editor/ui/__init__.py
+-rw-r--r--   0        0        0     2906 2024-04-11 00:43:06.922864 pygpt_net-2.2.0/src/pygpt_net/tools/text_editor/ui/dialogs.py
+-rw-r--r--   0        0        0     2754 2024-04-11 03:43:59.058733 pygpt_net-2.2.0/src/pygpt_net/tools/text_editor/ui/widgets.py
+-rwxr-xr-x   0        0        0     6639 2024-04-10 01:07:30.188635 pygpt_net-2.2.0/src/pygpt_net/ui/__init__.py
+-rw-r--r--   0        0        0        0 2024-01-08 20:36:28.054492 pygpt_net-2.2.0/src/pygpt_net/ui/base/__init__.py
+-rw-r--r--   0        0        0     9209 2024-03-11 07:32:25.337990 pygpt_net-2.2.0/src/pygpt_net/ui/base/config_dialog.py
+-rw-r--r--   0        0        0     3430 2024-03-26 17:12:51.294309 pygpt_net-2.2.0/src/pygpt_net/ui/base/context_menu.py
+-rwxr-xr-x   0        0        0      488 2023-12-28 18:11:19.000000 pygpt_net-2.2.0/src/pygpt_net/ui/dialog/__init__.py
+-rwxr-xr-x   0        0        0     5730 2024-04-11 20:50:24.193030 pygpt_net-2.2.0/src/pygpt_net/ui/dialog/about.py
+-rwxr-xr-x   0        0        0     5140 2024-03-26 17:12:51.294309 pygpt_net-2.2.0/src/pygpt_net/ui/dialog/applog.py
+-rwxr-xr-x   0        0        0     6480 2024-04-28 06:16:26.324027 pygpt_net-2.2.0/src/pygpt_net/ui/dialog/assistant.py
+-rw-r--r--   0        0        0    17707 2024-04-27 07:58:32.754704 pygpt_net-2.2.0/src/pygpt_net/ui/dialog/assistant_store.py
+-rwxr-xr-x   0        0        0     1765 2024-03-18 02:45:45.661442 pygpt_net-2.2.0/src/pygpt_net/ui/dialog/changelog.py
+-rw-r--r--   0        0        0      973 2024-01-28 19:32:28.495073 pygpt_net-2.2.0/src/pygpt_net/ui/dialog/create.py
+-rw-r--r--   0        0        0    18520 2024-04-17 01:35:30.430055 pygpt_net-2.2.0/src/pygpt_net/ui/dialog/db.py
+-rwxr-xr-x   0        0        0     1864 2024-03-18 04:54:07.637826 pygpt_net-2.2.0/src/pygpt_net/ui/dialog/debug.py
+-rw-r--r--   0        0        0     5835 2024-03-12 06:49:17.172787 pygpt_net-2.2.0/src/pygpt_net/ui/dialog/dictionary.py
+-rwxr-xr-x   0        0        0     2926 2024-04-10 01:07:30.188635 pygpt_net-2.2.0/src/pygpt_net/ui/dialog/editor.py
+-rw-r--r--   0        0        0      957 2024-04-08 04:19:15.433912 pygpt_net-2.2.0/src/pygpt_net/ui/dialog/find.py
+-rwxr-xr-x   0        0        0     2876 2024-03-26 17:12:51.294309 pygpt_net-2.2.0/src/pygpt_net/ui/dialog/image.py
+-rwxr-xr-x   0        0        0     2272 2024-03-18 02:45:42.817463 pygpt_net-2.2.0/src/pygpt_net/ui/dialog/license.py
+-rwxr-xr-x   0        0        0     1823 2024-03-26 17:12:51.294309 pygpt_net-2.2.0/src/pygpt_net/ui/dialog/logger.py
+-rw-r--r--   0        0        0    13166 2024-03-10 12:05:00.639613 pygpt_net-2.2.0/src/pygpt_net/ui/dialog/models.py
+-rwxr-xr-x   0        0        0    20679 2024-03-12 06:49:17.172787 pygpt_net-2.2.0/src/pygpt_net/ui/dialog/plugins.py
+-rwxr-xr-x   0        0        0     6644 2024-02-15 05:07:04.122540 pygpt_net-2.2.0/src/pygpt_net/ui/dialog/preset.py
+-rw-r--r--   0        0        0     3796 2024-03-07 01:04:26.445956 pygpt_net-2.2.0/src/pygpt_net/ui/dialog/preset_plugins.py
+-rw-r--r--   0        0        0     4105 2024-04-10 01:07:30.188635 pygpt_net-2.2.0/src/pygpt_net/ui/dialog/profile.py
+-rwxr-xr-x   0        0        0      973 2024-01-28 19:32:28.495073 pygpt_net-2.2.0/src/pygpt_net/ui/dialog/rename.py
+-rwxr-xr-x   0        0        0    15113 2024-03-10 12:05:00.639613 pygpt_net-2.2.0/src/pygpt_net/ui/dialog/settings.py
+-rw-r--r--   0        0        0      954 2024-02-26 22:26:37.124323 pygpt_net-2.2.0/src/pygpt_net/ui/dialog/snap.py
+-rwxr-xr-x   0        0        0     2436 2024-02-25 05:55:37.513980 pygpt_net-2.2.0/src/pygpt_net/ui/dialog/start.py
+-rwxr-xr-x   0        0        0      842 2023-12-28 18:11:19.000000 pygpt_net-2.2.0/src/pygpt_net/ui/dialog/update.py
+-rw-r--r--   0        0        0     4275 2024-03-26 17:12:51.294309 pygpt_net-2.2.0/src/pygpt_net/ui/dialog/workdir.py
+-rwxr-xr-x   0        0        0     9009 2024-04-26 21:55:50.679597 pygpt_net-2.2.0/src/pygpt_net/ui/dialogs.py
+-rwxr-xr-x   0        0        0      488 2023-12-28 21:20:40.362230 pygpt_net-2.2.0/src/pygpt_net/ui/layout/__init__.py
+-rwxr-xr-x   0        0        0     1535 2024-04-09 20:34:52.308546 pygpt_net-2.2.0/src/pygpt_net/ui/layout/chat/__init__.py
+-rwxr-xr-x   0        0        0     5518 2024-04-14 20:50:29.556142 pygpt_net-2.2.0/src/pygpt_net/ui/layout/chat/attachments.py
+-rwxr-xr-x   0        0        0     5356 2024-04-27 07:58:32.754704 pygpt_net-2.2.0/src/pygpt_net/ui/layout/chat/attachments_uploaded.py
+-rw-r--r--   0        0        0     5996 2024-04-10 01:07:30.188635 pygpt_net-2.2.0/src/pygpt_net/ui/layout/chat/calendar.py
+-rwxr-xr-x   0        0        0     9885 2024-04-09 20:35:55.668463 pygpt_net-2.2.0/src/pygpt_net/ui/layout/chat/input.py
+-rwxr-xr-x   0        0        0    18656 2024-01-01 00:17:57.553256 pygpt_net-2.2.0/src/pygpt_net/ui/layout/chat/markdown.py
+-rwxr-xr-x   0        0        0    10452 2024-04-21 18:06:27.128064 pygpt_net-2.2.0/src/pygpt_net/ui/layout/chat/output.py
+-rw-r--r--   0        0        0     5199 2024-02-17 21:22:47.345663 pygpt_net-2.2.0/src/pygpt_net/ui/layout/chat/painter.py
+-rwxr-xr-x   0        0        0     1697 2024-01-27 21:42:30.964980 pygpt_net-2.2.0/src/pygpt_net/ui/layout/ctx/__init__.py
+-rwxr-xr-x   0        0        0     6648 2024-04-21 19:42:04.971470 pygpt_net-2.2.0/src/pygpt_net/ui/layout/ctx/ctx_list.py
+-rwxr-xr-x   0        0        0     1441 2024-01-07 09:35:02.638810 pygpt_net-2.2.0/src/pygpt_net/ui/layout/ctx/search_input.py
+-rwxr-xr-x   0        0        0     1068 2023-12-31 01:26:09.880264 pygpt_net-2.2.0/src/pygpt_net/ui/layout/ctx/video.py
+-rwxr-xr-x   0        0        0     1405 2024-01-31 15:19:17.742029 pygpt_net-2.2.0/src/pygpt_net/ui/layout/status.py
+-rwxr-xr-x   0        0        0     3477 2024-04-27 14:05:11.727541 pygpt_net-2.2.0/src/pygpt_net/ui/layout/toolbox/__init__.py
+-rw-r--r--   0        0        0     2378 2024-01-30 17:23:19.901578 pygpt_net-2.2.0/src/pygpt_net/ui/layout/toolbox/agent.py
+-rwxr-xr-x   0        0        0     4427 2024-04-27 07:58:32.754704 pygpt_net-2.2.0/src/pygpt_net/ui/layout/toolbox/assistants.py
+-rwxr-xr-x   0        0        0     4254 2024-02-29 03:07:51.278132 pygpt_net-2.2.0/src/pygpt_net/ui/layout/toolbox/footer.py
+-rwxr-xr-x   0        0        0     2382 2024-01-21 16:42:14.672394 pygpt_net-2.2.0/src/pygpt_net/ui/layout/toolbox/image.py
+-rw-r--r--   0        0        0     6999 2024-04-27 14:05:11.727541 pygpt_net-2.2.0/src/pygpt_net/ui/layout/toolbox/indexes.py
+-rwxr-xr-x   0        0        0     3169 2024-02-21 03:55:24.484309 pygpt_net-2.2.0/src/pygpt_net/ui/layout/toolbox/mode.py
+-rwxr-xr-x   0        0        0     3067 2024-02-21 03:55:24.484309 pygpt_net-2.2.0/src/pygpt_net/ui/layout/toolbox/model.py
+-rwxr-xr-x   0        0        0     4125 2024-03-15 15:31:21.790122 pygpt_net-2.2.0/src/pygpt_net/ui/layout/toolbox/presets.py
+-rwxr-xr-x   0        0        0     3242 2024-03-15 15:31:21.790122 pygpt_net-2.2.0/src/pygpt_net/ui/layout/toolbox/prompt.py
+-rwxr-xr-x   0        0        0     2447 2023-12-31 01:26:09.000000 pygpt_net-2.2.0/src/pygpt_net/ui/layout/toolbox/vision.py
+-rw-r--r--   0        0        0     9613 2024-04-21 01:33:54.247764 pygpt_net-2.2.0/src/pygpt_net/ui/main.py
+-rw-r--r--   0        0        0     1784 2024-03-26 17:12:51.294309 pygpt_net-2.2.0/src/pygpt_net/ui/menu/__init__.py
+-rw-r--r--   0        0        0     5067 2024-04-19 00:32:20.498428 pygpt_net-2.2.0/src/pygpt_net/ui/menu/about.py
+-rw-r--r--   0        0        0     1655 2024-03-20 16:01:43.283339 pygpt_net-2.2.0/src/pygpt_net/ui/menu/audio.py
+-rw-r--r--   0        0        0     7870 2024-04-21 01:33:54.247764 pygpt_net-2.2.0/src/pygpt_net/ui/menu/config.py
+-rw-r--r--   0        0        0     5185 2024-03-07 01:04:26.445956 pygpt_net-2.2.0/src/pygpt_net/ui/menu/debug.py
+-rw-r--r--   0        0        0     3356 2024-04-17 05:13:33.075416 pygpt_net-2.2.0/src/pygpt_net/ui/menu/file.py
+-rw-r--r--   0        0        0      897 2024-01-27 21:42:30.964980 pygpt_net-2.2.0/src/pygpt_net/ui/menu/lang.py
+-rw-r--r--   0        0        0     2880 2024-03-07 01:04:26.445956 pygpt_net-2.2.0/src/pygpt_net/ui/menu/plugins.py
+-rwxr-xr-x   0        0        0     3440 2024-04-24 23:37:32.616565 pygpt_net-2.2.0/src/pygpt_net/ui/menu/theme.py
+-rw-r--r--   0        0        0     1134 2024-03-26 17:12:51.298308 pygpt_net-2.2.0/src/pygpt_net/ui/menu/tools.py
+-rw-r--r--   0        0        0     2026 2024-03-20 16:01:43.283339 pygpt_net-2.2.0/src/pygpt_net/ui/menu/video.py
+-rw-r--r--   0        0        0     6711 2024-04-14 20:50:29.556142 pygpt_net-2.2.0/src/pygpt_net/ui/tray.py
+-rwxr-xr-x   0        0        0      488 2023-12-28 18:11:19.000000 pygpt_net-2.2.0/src/pygpt_net/ui/widget/__init__.py
+-rwxr-xr-x   0        0        0      488 2023-12-28 21:20:40.362230 pygpt_net-2.2.0/src/pygpt_net/ui/widget/audio/__init__.py
+-rwxr-xr-x   0        0        0     1721 2023-12-28 21:20:40.362230 pygpt_net-2.2.0/src/pygpt_net/ui/widget/audio/input.py
+-rw-r--r--   0        0        0     2198 2024-02-29 03:07:51.278132 pygpt_net-2.2.0/src/pygpt_net/ui/widget/audio/input_button.py
+-rwxr-xr-x   0        0        0     1586 2023-12-28 21:20:40.362230 pygpt_net-2.2.0/src/pygpt_net/ui/widget/audio/output.py
+-rw-r--r--   0        0        0        0 2024-01-06 03:25:04.270157 pygpt_net-2.2.0/src/pygpt_net/ui/widget/calendar/__init__.py
+-rw-r--r--   0        0        0     8120 2024-04-27 07:58:32.754704 pygpt_net-2.2.0/src/pygpt_net/ui/widget/calendar/select.py
+-rwxr-xr-x   0        0        0      488 2023-12-28 21:20:40.362230 pygpt_net-2.2.0/src/pygpt_net/ui/widget/dialog/__init__.py
+-rwxr-xr-x   0        0        0     1429 2024-04-17 01:35:30.430055 pygpt_net-2.2.0/src/pygpt_net/ui/widget/dialog/alert.py
+-rw-r--r--   0        0        0     1502 2024-02-17 21:22:47.345663 pygpt_net-2.2.0/src/pygpt_net/ui/widget/dialog/applog.py
+-rw-r--r--   0        0        0     1712 2024-04-26 21:55:50.679597 pygpt_net-2.2.0/src/pygpt_net/ui/widget/dialog/assistant_store.py
+-rw-r--r--   0        0        0      551 2024-03-26 17:12:51.298308 pygpt_net-2.2.0/src/pygpt_net/ui/widget/dialog/audio.py
+-rwxr-xr-x   0        0        0     3802 2024-04-11 03:43:59.058733 pygpt_net-2.2.0/src/pygpt_net/ui/widget/dialog/base.py
+-rwxr-xr-x   0        0        0     2302 2024-04-12 10:08:45.275113 pygpt_net-2.2.0/src/pygpt_net/ui/widget/dialog/confirm.py
+-rw-r--r--   0        0        0     2191 2024-01-28 19:32:28.495073 pygpt_net-2.2.0/src/pygpt_net/ui/widget/dialog/create.py
+-rw-r--r--   0        0        0     1585 2024-03-07 01:04:26.445956 pygpt_net-2.2.0/src/pygpt_net/ui/widget/dialog/db.py
+-rwxr-xr-x   0        0        0     1572 2024-02-21 16:35:35.211671 pygpt_net-2.2.0/src/pygpt_net/ui/widget/dialog/debug.py
+-rwxr-xr-x   0        0        0     1749 2024-02-17 21:22:47.345663 pygpt_net-2.2.0/src/pygpt_net/ui/widget/dialog/editor.py
+-rwxr-xr-x   0        0        0     6185 2024-04-14 16:40:07.849541 pygpt_net-2.2.0/src/pygpt_net/ui/widget/dialog/editor_file.py
+-rw-r--r--   0        0        0     3242 2024-04-11 03:43:59.058733 pygpt_net-2.2.0/src/pygpt_net/ui/widget/dialog/find.py
+-rwxr-xr-x   0        0        0      816 2024-03-26 17:12:51.298308 pygpt_net-2.2.0/src/pygpt_net/ui/widget/dialog/image.py
+-rwxr-xr-x   0        0        0     1568 2024-02-17 21:22:47.345663 pygpt_net-2.2.0/src/pygpt_net/ui/widget/dialog/info.py
+-rw-r--r--   0        0        0     1717 2024-02-17 21:22:47.345663 pygpt_net-2.2.0/src/pygpt_net/ui/widget/dialog/license.py
+-rwxr-xr-x   0        0        0     1627 2024-02-17 21:22:47.345663 pygpt_net-2.2.0/src/pygpt_net/ui/widget/dialog/logger.py
+-rw-r--r--   0        0        0     1625 2024-02-17 21:22:47.345663 pygpt_net-2.2.0/src/pygpt_net/ui/widget/dialog/model.py
+-rw-r--r--   0        0        0     1694 2024-04-10 01:07:30.188635 pygpt_net-2.2.0/src/pygpt_net/ui/widget/dialog/preset_plugins.py
+-rw-r--r--   0        0        0     6686 2024-04-19 00:32:20.502428 pygpt_net-2.2.0/src/pygpt_net/ui/widget/dialog/profile.py
+-rwxr-xr-x   0        0        0     2191 2024-01-28 19:32:28.495073 pygpt_net-2.2.0/src/pygpt_net/ui/widget/dialog/rename.py
+-rwxr-xr-x   0        0        0     1614 2024-02-17 21:22:47.345663 pygpt_net-2.2.0/src/pygpt_net/ui/widget/dialog/settings.py
+-rwxr-xr-x   0        0        0     1696 2024-02-17 21:22:47.345663 pygpt_net-2.2.0/src/pygpt_net/ui/widget/dialog/settings_plugin.py
+-rw-r--r--   0        0        0     2724 2024-02-26 22:26:37.124323 pygpt_net-2.2.0/src/pygpt_net/ui/widget/dialog/snap.py
+-rwxr-xr-x   0        0        0     6789 2024-02-17 21:22:47.345663 pygpt_net-2.2.0/src/pygpt_net/ui/widget/dialog/update.py
+-rw-r--r--   0        0        0     1523 2024-03-26 17:12:51.298308 pygpt_net-2.2.0/src/pygpt_net/ui/widget/dialog/workdir.py
+-rwxr-xr-x   0        0        0      488 2024-01-11 15:56:53.277343 pygpt_net-2.2.0/src/pygpt_net/ui/widget/draw/__init__.py
+-rw-r--r--   0        0        0    10903 2024-04-12 07:23:35.946682 pygpt_net-2.2.0/src/pygpt_net/ui/widget/draw/painter.py
+-rwxr-xr-x   0        0        0      488 2023-12-28 21:20:40.362230 pygpt_net-2.2.0/src/pygpt_net/ui/widget/element/__init__.py
+-rw-r--r--   0        0        0     2854 2024-04-14 20:50:29.556142 pygpt_net-2.2.0/src/pygpt_net/ui/widget/element/button.py
+-rw-r--r--   0        0        0     2532 2024-03-07 01:04:26.445956 pygpt_net-2.2.0/src/pygpt_net/ui/widget/element/checkbox.py
+-rwxr-xr-x   0        0        0     2559 2024-01-27 21:42:30.964980 pygpt_net-2.2.0/src/pygpt_net/ui/widget/element/group.py
+-rw-r--r--   0        0        0     3789 2024-02-28 03:58:59.313445 pygpt_net-2.2.0/src/pygpt_net/ui/widget/element/labels.py
+-rwxr-xr-x   0        0        0        0 2023-12-28 21:20:40.362230 pygpt_net-2.2.0/src/pygpt_net/ui/widget/filesystem/__init__.py
+-rwxr-xr-x   0        0        0    22934 2024-04-17 01:35:30.430055 pygpt_net-2.2.0/src/pygpt_net/ui/widget/filesystem/explorer.py
+-rwxr-xr-x   0        0        0      488 2023-12-28 21:20:40.362230 pygpt_net-2.2.0/src/pygpt_net/ui/widget/image/__init__.py
+-rwxr-xr-x   0        0        0     3797 2024-03-26 17:12:51.298308 pygpt_net-2.2.0/src/pygpt_net/ui/widget/image/display.py
+-rwxr-xr-x   0        0        0      488 2023-12-28 21:20:40.362230 pygpt_net-2.2.0/src/pygpt_net/ui/widget/lists/__init__.py
+-rwxr-xr-x   0        0        0     2682 2024-01-29 13:41:53.379769 pygpt_net-2.2.0/src/pygpt_net/ui/widget/lists/assistant.py
+-rw-r--r--   0        0        0     1956 2024-04-26 21:55:50.679597 pygpt_net-2.2.0/src/pygpt_net/ui/widget/lists/assistant_store.py
+-rwxr-xr-x   0        0        0     7055 2024-04-14 20:50:29.556142 pygpt_net-2.2.0/src/pygpt_net/ui/widget/lists/attachment.py
+-rwxr-xr-x   0        0        0     2446 2024-04-10 01:07:30.188635 pygpt_net-2.2.0/src/pygpt_net/ui/widget/lists/base.py
+-rwxr-xr-x   0        0        0    17502 2024-04-17 01:35:30.430055 pygpt_net-2.2.0/src/pygpt_net/ui/widget/lists/context.py
+-rw-r--r--   0        0        0     5861 2024-04-17 01:35:30.430055 pygpt_net-2.2.0/src/pygpt_net/ui/widget/lists/db.py
+-rw-r--r--   0        0        0     3658 2024-03-07 01:04:26.449956 pygpt_net-2.2.0/src/pygpt_net/ui/widget/lists/debug.py
+-rw-r--r--   0        0        0     4818 2024-04-17 01:35:30.430055 pygpt_net-2.2.0/src/pygpt_net/ui/widget/lists/index.py
+-rw-r--r--   0        0        0     6794 2024-04-27 14:05:11.727541 pygpt_net-2.2.0/src/pygpt_net/ui/widget/lists/index_combo.py
+-rwxr-xr-x   0        0        0     1080 2023-12-28 21:20:40.362230 pygpt_net-2.2.0/src/pygpt_net/ui/widget/lists/mode.py
+-rwxr-xr-x   0        0        0     1912 2024-01-29 13:41:53.379769 pygpt_net-2.2.0/src/pygpt_net/ui/widget/lists/model.py
+-rw-r--r--   0        0        0     1919 2024-01-29 13:41:53.379769 pygpt_net-2.2.0/src/pygpt_net/ui/widget/lists/model_editor.py
+-rwxr-xr-x   0        0        0     1028 2024-01-12 09:25:47.589375 pygpt_net-2.2.0/src/pygpt_net/ui/widget/lists/plugin.py
+-rwxr-xr-x   0        0        0     4071 2024-02-01 01:48:09.378583 pygpt_net-2.2.0/src/pygpt_net/ui/widget/lists/preset.py
+-rw-r--r--   0        0        0     3899 2024-03-07 01:04:26.449956 pygpt_net-2.2.0/src/pygpt_net/ui/widget/lists/preset_plugins.py
+-rw-r--r--   0        0        0     4432 2024-04-10 01:07:30.192635 pygpt_net-2.2.0/src/pygpt_net/ui/widget/lists/profile.py
+-rw-r--r--   0        0        0     1052 2024-01-12 09:25:47.589375 pygpt_net-2.2.0/src/pygpt_net/ui/widget/lists/settings.py
+-rwxr-xr-x   0        0        0     4382 2024-04-26 21:55:50.679597 pygpt_net-2.2.0/src/pygpt_net/ui/widget/lists/uploaded.py
+-rwxr-xr-x   0        0        0      488 2023-12-28 21:20:40.362230 pygpt_net-2.2.0/src/pygpt_net/ui/widget/option/__init__.py
+-rwxr-xr-x   0        0        0     2068 2024-01-19 21:21:41.774598 pygpt_net-2.2.0/src/pygpt_net/ui/widget/option/checkbox.py
+-rw-r--r--   0        0        0     5503 2024-03-12 06:49:17.172787 pygpt_net-2.2.0/src/pygpt_net/ui/widget/option/cmd.py
+-rw-r--r--   0        0        0     3592 2024-04-27 10:44:46.049374 pygpt_net-2.2.0/src/pygpt_net/ui/widget/option/combo.py
+-rwxr-xr-x   0        0        0    12672 2024-03-11 03:15:21.879593 pygpt_net-2.2.0/src/pygpt_net/ui/widget/option/dictionary.py
+-rwxr-xr-x   0        0        0     9304 2024-04-26 21:55:50.679597 pygpt_net-2.2.0/src/pygpt_net/ui/widget/option/input.py
+-rw-r--r--   0        0        0     2601 2024-04-22 22:35:26.800429 pygpt_net-2.2.0/src/pygpt_net/ui/widget/option/prompt.py
+-rwxr-xr-x   0        0        0     3569 2024-01-08 20:36:28.058493 pygpt_net-2.2.0/src/pygpt_net/ui/widget/option/slider.py
+-rwxr-xr-x   0        0        0     2684 2024-04-26 21:55:50.679597 pygpt_net-2.2.0/src/pygpt_net/ui/widget/option/textarea.py
+-rw-r--r--   0        0        0     1668 2024-01-29 13:41:53.379769 pygpt_net-2.2.0/src/pygpt_net/ui/widget/tabs/Input.py
+-rw-r--r--   0        0        0      488 2023-12-30 09:04:29.205425 pygpt_net-2.2.0/src/pygpt_net/ui/widget/tabs/__init__.py
+-rw-r--r--   0        0        0     2814 2024-04-10 01:07:30.192635 pygpt_net-2.2.0/src/pygpt_net/ui/widget/tabs/output.py
+-rwxr-xr-x   0        0        0      488 2023-12-28 21:20:40.366230 pygpt_net-2.2.0/src/pygpt_net/ui/widget/textarea/__init__.py
+-rw-r--r--   0        0        0     5098 2024-04-21 01:33:54.247764 pygpt_net-2.2.0/src/pygpt_net/ui/widget/textarea/calendar_note.py
+-rw-r--r--   0        0        0     1358 2024-01-28 19:32:28.495073 pygpt_net-2.2.0/src/pygpt_net/ui/widget/textarea/create.py
+-rw-r--r--   0        0        0     5450 2024-04-21 01:33:54.247764 pygpt_net-2.2.0/src/pygpt_net/ui/widget/textarea/editor.py
+-rw-r--r--   0        0        0     1543 2024-04-11 03:43:59.058733 pygpt_net-2.2.0/src/pygpt_net/ui/widget/textarea/find.py
+-rwxr-xr-x   0        0        0     6059 2024-04-22 22:35:26.800429 pygpt_net-2.2.0/src/pygpt_net/ui/widget/textarea/input.py
+-rwxr-xr-x   0        0        0     1132 2024-01-27 21:42:30.964980 pygpt_net-2.2.0/src/pygpt_net/ui/widget/textarea/name.py
+-rwxr-xr-x   0        0        0     6583 2024-04-21 01:33:54.247764 pygpt_net-2.2.0/src/pygpt_net/ui/widget/textarea/notepad.py
+-rwxr-xr-x   0        0        0     5086 2024-04-23 23:11:13.260159 pygpt_net-2.2.0/src/pygpt_net/ui/widget/textarea/output.py
+-rwxr-xr-x   0        0        0     1358 2024-01-28 19:32:28.495073 pygpt_net-2.2.0/src/pygpt_net/ui/widget/textarea/rename.py
+-rwxr-xr-x   0        0        0     1833 2024-04-12 10:08:45.275113 pygpt_net-2.2.0/src/pygpt_net/ui/widget/textarea/search_input.py
+-rwxr-xr-x   0        0        0    10060 2024-04-27 14:05:11.727541 pygpt_net-2.2.0/src/pygpt_net/ui/widget/textarea/web.py
+-rwxr-xr-x   0        0        0      488 2023-12-28 21:20:40.366230 pygpt_net-2.2.0/src/pygpt_net/ui/widget/vision/__init__.py
+-rwxr-xr-x   0        0        0     2584 2023-12-28 21:20:40.366230 pygpt_net-2.2.0/src/pygpt_net/ui/widget/vision/camera.py
+-rwxr-xr-x   0        0        0     5470 2024-04-26 21:55:50.679597 pygpt_net-2.2.0/src/pygpt_net/utils.py
+-rw-r--r--   0        0        0   135135 1970-01-01 00:00:00.000000 pygpt_net-2.2.0/PKG-INFO
```

### Comparing `pygpt_net-2.1.9/CHANGELOG.md` & `pygpt_net-2.2.0/src/pygpt_net/CHANGELOG.txt`

 * *Files 16% similar despite different names*

```diff
@@ -1,1138 +1,1556 @@
-# CHANGELOG
+2.2.0 (2024-04-28)
 
-# 2.1.9 (2024-03-04)
+- Improved code interpreter stream handling in Assistant mode.
+- Improved preset plugins reloading on profile switch.
+- Fixes and core improvements.
+- Updated docs to v2.2.0.
 
-- A new option has been added to the `Web Search` plugin: `web_index_query`, which allows for indexing a web and external content in a temporary index (in memory) and quickly querying its content. Works similar to `query_file` command.
-- The `read_file` command has been expanded to handle multiple files at once.
+2.1.83 (2024-04-27)
+
+- Index list in 'Chat with files' mode moved to combo-box at bottom.
+- Enabled display of remote images in chat output.
+- Updated docs.
+
+2.1.82 (2024-04-27)
+
+- Fixed correct store id saving if hidden thread stores on list.
+
+2.1.81 (2024-04-27)
+
+- Improved remote vector stores management.
+
+2.1.80 (2024-04-27)
+
+- Fixed missing selection in Assistant store select combo.
+- Fixed store deletion.
+- Added tooltip to Stores button.
+
+2.1.79 (2024-04-26)
+
+- OpenAI API upgraded to version 1.23.6.
+- Assistants API: added tool: File search and removed deprecated tool: Retrieval.
+- Support for remote Assistant Vector Stores added (accessible through the Assistants API).
+- Remote Vector Stores management tool introduced (right-click on an Assistant, select 'Edit', then click the database icon to open Remote Vector Stores editor).
+- Importer for Remote Assistant Vector Stores and files included.
+- Files uploaded in Assistants mode can now be shared between threads using Vector Stores.
+
+2.1.78 (2024-04-25)
+
+- Removed redundant names in block view.
+- Scrollbars background integrated with blocks bg.
+
+2.1.77 (2024-04-25)
+
+- Added the "tree" command to the I/O Files plugin to retrieve the full directory tree.
+
+2.1.76 (2024-04-25)
+
+- Chat items now displayed in blocks.
+
+2.1.75 (2024-04-24)
+
+- Copy to clipboard in web view fixed and moved to JS bridge.
+
+2.1.74 (2024-04-24)
+
+- Added syntax highlight choose to Theme menu.
+- Syntax highlight style colors integrated with Dark/Light app themes.
+
+2.1.73 (2024-04-24)
+
+- Fixed issue #50 - missing type key in config.
+
+2.1.72 (2024-04-24)
+
+- Fixed context initialization in web view on app load.
+- Improved and optimized items rendering.
+- Refactored web view CSS.
+- Rendering optimization.
+- Added real-time items reload and append.
+- Added theme CSS to scrollbars.
+- Added JS console debug to Logger window.
+
+2.1.71 (2024-04-23)
+
+- Added 160+ prompt templates from "Awesome ChatGPT Prompts" repository - to use them, right-click on the input or system prompt textarea and select the "Paste from template..." option.
+
+2.1.70 (2024-04-22)
+
+- Added web view CSS reload on theme switch.
+- Fixed time display CSS in web view.
+
+2.1.69 (2024-04-22)
+
+- Added html buffer to speed-up context initialization in web view.
+- Fixed items append in web view in agent mode.
+
+2.1.68 (2024-04-22)
+
+- Fix: CPU usage on multiple items.
+
+2.1.67 (2024-04-22)
+
+- Optimized items rendering.
+
+2.1.66 (2024-04-22)
+
+- Improved content formatting in HTML export.
+
+2.1.65 (2024-04-22)
+
+- Improved save as in Web View output.
+- Added save as text and save as html separated options.
+
+2.1.64 (2024-04-22)
+
+- Improved real-time CSS reloading.
+
+2.1.63 (2024-04-22)
+
+- Improved rendering output.
+- Updated CSS.
+
+2.1.62 (2024-04-22)
+
+- Added default lexer for code syntax highlighting if no language provided.
+
+2.1.61 (2024-04-21)
+
+- Added real-time HTML formatting of text chunks in stream mode.
+
+2.1.60 (2024-04-21)
+
+- Fixed "Save as" option in WebEngine view.
+- Added hiding of empty groups on search.
+- Updated formatting and CSS.
+
+2.1.59 (2024-04-20)
+
+- Added output renderer: WebEngine/Chromium – with full HTML/CSS/JS support. (Experimental)
+- Added a new option to choose a render engine in Settings -> General -> Rendering engine to select between WebEngine / Chromium mode and the Legacy mode (old, with simple markdown CSS support only - for compatibility reasons and troubleshooting).
+- Added syntax highlighting to code blocks – issue #43.
+- Added a new option in Settings -> Layout -> Code syntax highlight to select a highlight theme.
+- Added a new option in Settings -> Context -> Convert lists to paragraphs to enable/disable converting ul and li into p for better copying.
+- Copy to clipboard and regenerate response icons are now visible by default.
+
+2.1.58 (2024-04-19)
+
+- Fixed Markdown rendering if the content starts with a code block.
+- Added a "Switch to created profile" option in the profile creation/duplication dialogs.
+- Updated the locale.
+- Added a donate option.
+
+2.1.57 (2024-04-17)
+
+- Fixed new ctx create on empty profile if previously group was selected.
+
+2.1.56 (2024-04-17)
+
+- Added a new menu option: Clear history + groups.
+- Improved profile switching.
+
+2.1.55 (2024-04-17)
+
+- Improved result handling from Indexer tool.
+
+2.1.54 (2024-04-17)
+
+- Added data loaders reload and loaders config reload in real time on profile switch.
+
+2.1.53 (2024-04-17)
+
+- Added a new tool: Indexer, for manually indexing files, contexts, and web content, as well as managing indexes. (beta)
+
+2.1.52 (2024-04-15)
+
+- Added real-time output from code interpreter in Assistants mode.
+- Added new option in Settings > Context: Show code interpreter output.
+
+2.1.51 (2024-04-14)
+
+- Added RMB context menu to the New... context button.
+- Added filesize info to attachments and uploaded files lists.
+- Improved Assistants API stream handling.
+
+2.1.50 (2024-04-14)
+
+- Fixed selection update after group rename.
+- Added img resolution and filesize info in image preview dialog title.
+- Added filesize info in text editor dialog title.
+
+2.1.49 (2024-04-14)
+
+- Improved context group handling.
+
+2.1.48 (2024-04-14)
+
+- OpenAI API upgraded to version 1.17.1.
+- Added a stream mode to the Assistant mode (beta).
+- Fixed an issue where context group ID were not copied when duplicating context.
+
+2.1.47 (2024-04-12)
+
+- Added auto-creating new context in current group if the group is active.
+- Added sending input also with Ctrl+Enter in Shift+Enter mode.
+- Extended light style markdown CSS.
+
+2.1.46 (2024-04-12)
+
+- Improved code blocks formatting.
+- Improved attachment copy/paste.
+
+2.1.45 (2024-04-11)
+
+- Added the ability to paste images as attachments using Ctrl+V in chat input and to copy-paste images in the draw/painter.
+- Added a "Copy to Clipboard" option in code blocks.
+- Introduced a new model: gpt-4-turbo-2024-04-09.
+
+2.1.44 (2024-04-11)
+
+- Optimized "Find" option.
+- Added copy database and copy data dir checkbox options in profile duplicate dialog.
+- Added ability to reset current active profile.
+- Added missing translations.
+
+2.1.43 (2024-04-11)
+
+- The "Find" option has been extended and added to all text fields.
+- Fixed menu reload issue when switching profiles.
+- Other small fixes and improvements.
+
+2.1.42 (2024-04-10)
+
+- Improved profile switching.
+- Added interpreter internal files to excluded when indexing.
+
+2.1.41 (2024-04-10)
+
+- Added support for multiple profiles (separated config, settings and workdir), menu: Config -> Profile...
+- Added context groups for context items organizing, menu: File -> New context group...
+- Added ability to change the model on response edit and regenerate.
+- Added real-time updating number of notepads.
+- UI/theme fixes.
+
+2.1.40-post1 (2024-04-08)
+
+- Llama-index core downgraded to 0.10.13 due to issue #41
+
+2.1.40 (2024-04-08)
+
+- Added "Find" option - text search and highlighting of the found phrase in the chat and notepad window, available via CTRL + F or right-click menu / Find... (beta)
+- Added GitHub's Monaspace font family: Argon, Krypton, Neon, Radon, Xenon (reset CSS to defaults or manual replacement in CSS files is required for older versions of application to take effect).
+- Added an "Restore Default CSS" option in the "Config / Edit CSS" menu.
+- Added the ability to use custom .ttf and .otf fonts (just place them in %workdir%/fonts directory).
+
+2.1.39 (2024-03-26)
+
+- Added "Change working directory..." option in "Config" menu.
+- Improved handling reply from multiple commands at once.
+- Tools have been moved to separate parts of the app.
+- Added the ability to create custom Tools, with an example tool in the "examples" directory.
+
+2.1.38 (2024-03-20)
+
+- Added new Tools menu, with: Media player, Transcribe audio/video files, Image viewer, Text editor and Code interpreter.
+- Improved tools.
+
+2.1.38 (2024-03-20)
+
+- Added a new menu Tools with: Media player, Transcribe audio/video files, Image viewer, Text editor and Code interpreter.
+
+2.1.37 (2024-03-19)
+
+- Added generation of audio transcriptions from audio/video files.
+
+2.1.36 (2024-03-19)
+
+- Added split screen view (output/edit) to code interpreter.
+
+2.1.35 (2024-03-19)
+
+- Added text files editor and image viewer.
+- Improved video player and code interpreter.
+
+2.1.34 (2024-03-18)
+
+- Added video player.
+- Fixed audio input message append in agent mode.
+
+2.1.33 (2024-03-18)
+
+- Code interpreter enabled even if interpreter plugin is disabled.
+- Added "Connect to the Python code interpreter window" config option in Code interpreter plugin.
+- Added Monospace font support - issue #37.
+- Improved raw JSON command outputs.
+
+2.1.32 (2024-03-17)
+
+- Global prompts config moved to a separated settings section "Prompts".
+- Added auto-clear option in code interpreter.
+- Added "Use extra context output" config option in "Settings -> Context".
+
+2.1.31 (2024-03-17)
+
+- Improved code interpreter integration with sandbox/docker.
+- Added display of hidden files in Files explorer.
+- Added "Use as image" context menu action in Files explorer.
+
+2.1.30 (2024-03-16)
+
+- Improved real-time Python code interpreter: added edit mode and whole code execution (history).
+
+2.1.29 (2024-03-16)
+
+- Added real-time Python code interpreter (<> icon), connected with the Code Interpreter plugin's input and output.
+- Improved plugin command execution.
+
+2.1.28 (2024-03-15)
+
+- Fixed local commands handling in Assistant API.
+- Fixed system prompt replace after mode changed on app start.
+- Improved related links rendering in chat output.
+- Added RPM limit config option for embeddings API.
+- UI improvements.
+
+2.1.27 (2024-03-13)
+
+- Added the "find" command to the Files I/O plugin for searching for files and directories.
+- Added "Append metadata" config option in Chat with files plugin.
+- Added missing locales to translations.
+
+2.1.26 (2024-03-13)
+
+- Added async command execution in History and Chat with files plugins.
+- Improved plugin prompts.
+- Improved command execution in autonomous mode.
+- Improved logging and debugging.
+
+2.1.25 (2024-03-13)
+
+- Llama index logging improvement.
+
+2.1.24 (2024-03-13)
+
+- Added AzureOpenAI embeddings provider.
+- Added metadata append to indexed context from DB.
+
+2.1.23 (2024-03-12)
+
+- Added configuration options for embeddings model and provider in Settings -> Llama-Index.
+- Added plain-text responses in web_open commands.
+- Improved web_open commands in Web Search plugin.
+- Added a check to determine if the provided URL is an image when sending URLs within text.
+
+2.1.22 (2024-03-12)
+
+- Added custom metadata appending to indexing documents for web/external loaders.
+
+2.1.21 (2024-03-12)
+
+- Refactored commands core and command handling to a JSON schema-based config.
+- Fixed calls in the API plugin.
+- Fixed web_urls in the Web search plugin.
+- Fixed adding new notes in the Calendar plugin..
+
+2.1.19 (2024-03-11)
+
+- Added "Force exclude files" config option to force exclude extensions in: Settings -> Llama-index -> Indexing (enables file extension exclusion even if a data loader for the extension is available).
+- Added custom metadata appending to indexing documents via list in: Settings -> Llama-index -> Indexing.
+- Added base API endpoint config arguments in models params.
+
+2.1.18 (2024-03-10)
+
+- Added horizontal splitters and min width for lists in settings dialogs - issue #30.
+- Added audio icon display config option in Settings -> Context.
+
+2.1.17 (2024-03-10)
+
+- Improved audio handling.
+- Added options to context debug.
+- Added context meta load on demand if not on list.
+
+2.1.16 (2024-03-10)
+
+- Added "merge" icon in context responses (allows merging selected response with the previous response).
+- Added display of Llama-index used sources in the context response.
+- Fixed word-wrap in code blocks - issue #27.
+- Fixed context visibility when filters are applied and new ctx is created in the background.
+- Improved audio playback status indication for responses.
+
+2.1.15 (2024-03-09)
+
+- Added Edit mode in chat output with options: read response (audio), copy to clipboard, regenerate response, edit and regenerate, and delete context item.
+- Added dynamic max output tokens calculation in completion mode - issue #28.
+- Added config option "Modes to auto-index" in Llama-index settings.
+- Fixed typo in gpt-4-turbo-preview model config args for Llama-index provider - issue #29.
+
+2.1.14 (2024-03-09)
+
+- Added restoration of "All counters" checkbox status in calendar on tab init.
+- Added new line with Shift+Enter in input if sending mode is "Enter" - issue #26.
+
+2.1.13 (2024-03-08)
+
+- Fixed context auto-indexing in autonomous/agent mode - issue #23.
+- Added AzureOpenAI provider for Llama.
+- Added configuration option for the model in query file/web options in plugins.
+- Added removal of temporary index from memory after use.
+
+2.1.12 (2024-03-08)
+
+- Added config option for max requests per minute (RPM) in "Settings -> Model" - issue #23.
+- Added config for continue prompt in "Settings -> Agent".
+- Added config option for custom API endpoint URL in "Settings -> General" - issue #21.
+- Added "Allow context item delete" option in "Settings -> Context".
+- Added checkbox "All counters" in filters in Calendar view - when disabled, calendar displays filtered record counters instead of all records.
+- Improved the reset to default option in "Settings" to persist all non-settings config options.
+
+2.1.11 (2024-03-07)
+
+- Fixed search query if multiple labels selected
+- Added prevent from saving empty notes in calendar
+- Added display empty dates in DB Viewer if timestamp = 0
+
+2.1.10 (2024-03-06)
+
+- Added "DB Viewer" in Developer menu.
+- Added label color filter in context list - issue #23
+- Added context item delete option - issue #23
+- Added presets for plugins - issue #23
+- Fixed and improved autonomous agents run - issue #23
+- Chinese language added to locales - issue #24
+
+2.1.9 (2024-03-04)
+
+- A new option has been added to the "Web Search" plugin: "web_index_query", which allows for indexing a web and external content in a temporary index (in memory) and quickly querying its content. Works similar to "query_file" command.
+- The "read_file" command has been expanded to handle multiple files at once.
 - Added `Log and debug events` option to Developer settings.
 
-# 2.1.8 (2024-03-03)
+2.1.8 (2024-03-03)
 
-- A new option has been added to the `Files I/O` plugin: `query_file`, which allows for indexing a file in a temporary index (in memory) and quickly querying its content. This enables the use of Llama-index for fast querying or adding context from individual files. From now on, you can ask questions about individual files without indexing them to the main vector store. See the "Querying single files" in "Modes -> Chat with files" section in a README for more info.
-- The `read_file` command has been expanded to return just the exact file content, without wrapping it in JSON.
+- A new option has been added to the "Files I/O" plugin: "query_file", which allows for indexing a file in a temporary index (in memory) and quickly querying its content. This enables the use of Llama-index for fast querying or adding context from individual files. From now on, you can ask questions about individual files without indexing them to the main vector store. See the "Querying single files" in "Modes -> Chat with files" section in a README for more info.
+- The "read_file" command has been expanded to return just the exact file content, without wrapping it in JSON.
 - Improved prompt for preparing queries in the Chat with files plugin.
 - Updated docs.
 
-# 2.1.7 (2024-03-03)
+2.1.7 (2024-03-03)
 
 - Enhanced the Llama-index plugin with additional options for automatically refining queries before requesting additional context from Llama-index.
 
-# 2.1.6 (2024-03-03)
+2.1.6 (2024-03-03)
 
 - Added Twitter/X data loader.
 - Added check if message is not a reply when calling Llama-index using a plugin.
 - Added list of Agent indexes auto-reload after Llama-index list has changed.
 - Disabled anonymized telemetry in Chroma by default.
 
-# 2.1.5 (2024-03-02)
+2.1.5 (2024-03-02)
 
 - Recompiled SVG resources.
 - Fixed file explorer update after file commands execute.
 - Updated docs.
 
-# 2.1.4 (2024-03-02)
+2.1.4 (2024-03-02)
 
 - PySide6 downgraded to 6.4.2 due to a bug in signals emitting.
 
-# 2.1.3 (2024-03-01)
+2.1.3 (2024-03-01)
 
 - Added data loaders: Bitbucket, ChatGPT Retrieval Plugin, SQL Databases, GitHub, Microsoft OneDrive.
-- Added indexing configuration tab in `Web Search` plugin.
+- Added indexing configuration tab in Web Search plugin.
 
-# 2.1.2 (2024-03-01)
+2.1.2 (2024-03-01)
 
 - Added data loaders: Google Drive, Google Docs, Google Gmail, Google Calendar, Google Sheets, Google Keep.
 - Added data loaders: Video/Audio and Images, with local model and API modes.
-- Added Whisper (local hosted) model to `Audio Input` providers, available only in Python version.
+- Added Whisper (local hosted) model to Audio Input providers, available only in Python version.
 
-# 2.1.1 (2024-02-29)
+2.1.1 (2024-02-29)
 
 - Llama-index settings split into tabs.
 - Added keyword argument settings for data loaders.
 - Added data loaders for RSS, XML sitemaps, IPYNB notebooks, and XML and HTML files.
 - Added audio notes - simply use speech recognition in the Notepad tab to append transcribed audio to the Notepad.
 - Added an icon for quick toggling of video camera capture.
 - Added a Video menu.
 - Moved video capture toggle checkboxes to the Video menu.
 
-# 2.1.0 (2024-02-28)
+2.1.0 (2024-02-28)
 
-- Upgraded Llama-index from the legacy version `0.9` to the current version `0.10` (note: upgrading PyPi version of PyGPT to `2.1.0` requires reinstallation in a virtual environment to remove old library versions).
-- Upgraded Langchain to `0.1.9`.
-- Upgraded PyInstaller (and compiled versions) to version `6`.
-- Removed LlamaHub and restored support for Python `3.12`.
+- Upgraded Llama-index from the legacy version 0.9 to the current version 0.10 (note: upgrading PyPi version of PyGPT to 2.1.0 requires reinstallation in a virtual environment to remove old library versions).
+- Upgraded Langchain to 0.1.9.
+- Upgraded PyInstaller (and compiled versions) to version 6.
+- Removed LlamaHub and restored support for Python 3.12.
 - Fixed imports for Llama-index in the compiled versions.
 - Added icons for quickly toggling audio input/output.
 - UI fixes.
 
-# 2.0.171 (2024-02-27)
+2.0.171 (2024-02-27)
 
 - Added core for loading web resources (not only webpages) to Llama-index.
-- Added a data loader for transcriptions of YouTube videos (simply ask for index a YouTube video URL using the `Command: Web Search` plugin - the `web_index` command must be enabled).
+- Added a data loader for transcriptions of YouTube videos (simply ask for index a YouTube video URL using the "Command: Web Search" plugin - the "web_index" command must be enabled).
 - Fixed the "Initial token count exceeds token limit" error in Chat with files mode.
 - Added missing translations for dictionary items in settings dialogs.
 
-# 2.0.170 (2024-02-26)
+2.0.170 (2024-02-26)
 
 - Added "simplified" mode to the "Audio Input" plugin, now set as default, allowing for faster and simpler speech recognition without requiring any configuration. Meanwhile, all current options have been moved to "advanced" mode.
 - Improved microphone support in Snap version.
 - Improved file browser update after performing file operations.
 - Added check for file availability for indexing in the file browser.
 
-# 2.0.169 (2024-02-25)
+2.0.169 (2024-02-25)
 
 - Improved and refactored debugging
 
-# 2.0.168 (2024-02-25)
+2.0.168 (2024-02-25)
 
 - Added auto index file on read option in the `Files I/O` plugin
 - Improved debugger
 - Fixed Bing speech recognition
 
-# 2.0.167 (2024-02-25)
+2.0.167 (2024-02-25)
 
 - Fixed empty API key dialog.
 
-# 2.0.166 (2024-02-25)
+2.0.166 (2024-02-25)
 
-- Enabled the use of data loaders from Llama-index in the `Files I/O` plugin for reading files, which allows for reading not only text files using the plugin's `read_file` command.
-- Added a command for indexing files to the `Files I/O` plugin.
-- The `self_loop` plugin has been internally renamed to the `agent` plugin.
+- Enabled the use of data loaders from Llama-index in the "Files I/O" plugin for reading files, which allows for reading not only text files using the plugin's "read_file" command.
+- Added a command for indexing files to the "Files I/O" plugin.
+- The "self_loop" plugin has been internally renamed to the "agent" plugin.
 - Fixed the display of pinned contexts when the indexed filter is enabled.
 
-# 2.0.165 (2024-02-25)
+2.0.165 (2024-02-25)
 
-- Added search provider: `Bing`.
-- Added audio output providers: `Google` and `Eleven Labs`.
-- Added audio input providers: `Google`, `Google Cloud`, and `Bing`.
-- Added a new plugin: `Command: API calls` which allows defining commands for API calls to external services.
-- Added an `Excluded file extensions` configuration option in `Settings -> Llama-index`.
+- Added search provider: Bing.
+- Added audio output providers: Google and Eleven Labs.
+- Added audio input providers: Google, Google Cloud, and Bing.
+- Added a new plugin: "Command: API calls" which allows defining commands for API calls to external services.
+- Added an "Excluded file extensions" configuration option in Settings -> Llama-index.
 - Fixed audio input listener initialization in the Audio Input plugin.
 
-# 2.0.164 (2024-02-24)
+2.0.164 (2024-02-24)
 
 - Refactored the Audio Input, Audio Output, and Google Web Search plugins to support multiple audio and search engine providers.
 - Introduced the option to add your own audio input, output, and web search providers.
 
-# 2.0.163 (2024-02-23)
+2.0.163 (2024-02-23)
 
 - Added storage of indexed urls
 - Added info about used library versions in About dialog
 
-# 2.0.162 (2024-02-23)
+2.0.162 (2024-02-23)
 
 - Index data storage migrated from JSON to DB.
 - Added add/remove to index context menu on ctx list.
 - Added last indexed info on ctx list.
 - Added option "Replace old document versions in the index during re-indexing" in "Settings -> Llama-index".
 - Refactored, optimized and improved file and context indexing.
 - Fixed context search SQL query.
 
-# 2.0.161 (2024-02-22)
+2.0.161 (2024-02-22)
 
 - Added the option to search within conversation content, not just by titles (disabled by default, can be enabled in: "Settings -> Context -> Search also in conversation content, not only in titles").
 - Added a "download" subdirectory for files downloaded in Assistants mode and an option to configure the directory in: "Settings -> Files and attachments -> Directory for file downloads")
 - Added logging of options available in: "Config -> Debug" to the logger window, not just to the console.
 - Added descriptions in the models editor.
 
-# 2.0.160 (2024-02-21)
+2.0.160 (2024-02-21)
 
 - Added auto-replacement of sandbox download links in Assistants with links to downloaded local files.
 - Added setup for Poetry.
 - Added connection timeout config option to Google Search plugin.
 - Fixed recursion error on app exit.
 - Updated dependencies.
 
-# 2.0.159 (2024-02-21)
+2.0.159 (2024-02-21)
 
 - Added workdir placeholders to images stored from Assistants.
 - Added tooltips on modes list.
 - Added force synchronous command call if more than one command to execute.
 
-# 2.0.158 (2024-02-21)
+2.0.158 (2024-02-21)
 
 - Improved Assistants: added annotations handling, added async function outputs submit
 - Fixed creating function duplicates on re-import existing Assistant
 
-# 2.0.157 (2024-02-20)
+2.0.157 (2024-02-20)
 
 - Added webpage (URL) indexing using Llama-Index; new options were added to the Google Search plugin: the command "web_index" for indexing a specified page (just ask to index any URL) and "Auto-index", which enables automatic indexing of URLs used by the plugin (disabled by default).
 - Decreased the default chunk size in the Google Search plugin.
 - Assistant run creation and message sending moved to an async thread.
 - Improved files receive from Assistants.
 
-# 2.0.156 (2024-02-19)
+2.0.156 (2024-02-19)
 
-- Added disable SSL verify option for search engine calls (not only for search results) in `Google Search plugin` - issue #20.
+- Added disable SSL verify option for search engine calls (not only for search results) in "Google Search plugin" - issue #20.
 - Updated certifi to 2024.2.2.
-- Added custom launcher, custom plugin, custom vector store, custom LLM provider and custom data loader code examples in `examples` directory in repository.
+- Added custom launcher, custom plugin, custom vector store, custom LLM provider and custom data loader code examples in "examples" directory in repository.
 - Updated documentation.
 
-# 2.0.155 (2024-02-18)
+2.0.155 (2024-02-18)
 
 - Importing assistants and assistant files (from API) has been moved to an asynchronous thread.
 - Upgraded OpenAI API to 1.12.0.
 
-# 2.0.154 (2024-02-18)
+2.0.154 (2024-02-18)
 
 - Fixed hidden user input in Assistants mode
 - Fixed system prompt change when switching to Assistants mode without selected Assistant
 
-# 2.0.153 (2024-02-17)
+2.0.153 (2024-02-17)
 
 - Added image display in the chat window when a file received from the Assistant is an image
 - Added color labels in color select combo boxes
 - Added dialog window position save and restore (+ option in Settings to enable/disable this feature)
 - Added command "web_url_raw" to the Google Search Plugin which allows you to get the raw HTML/txt content from web pages (without summary)
 - Fixed CSS backup path
 - Updated documentation
 
-# 2.0.152 (2024-02-16)
+2.0.152 (2024-02-16)
 
 - Improved updater, added direct links to new releases
 - Improved command execute system prompt
 - Added `cwd` command to `Files I/O` plugin
 - Added automatic current working directory passing to `sys_exec` command prompt in `Code Interpreter`.
 - Added `Refresh` option in File Explorer
 - Added monit about camera connect in Snap version with command to execute
 - Disabled MenuRoles on MacOS-affected menu items - issue #19
 
-# 2.0.151 (2024-02-16)
+2.0.151 (2024-02-16)
 
 - Improved integration between Chat and Vision when functions are provided
 
-# 2.0.150 (2024-02-16)
+2.0.150 (2024-02-16)
 
 - Added a new command for the `Google Web Search` plugin - `get_urls`, which allows retrieving a full list of searched URLs and passing it to the model for further use.
 - Implemented execution of `functions` defined in the API and their full integration with modes: `Chat` and `Assistant`. For more details, see the new section in the documentation: `Functions and commands`.
 - Fixed the tray icon change while the model is generating a response.
 - Improved stopping of agents using `Stop`.
 
-# 2.0.149 (2024-02-15)
+2.0.149 (2024-02-15)
 
 - Fixed and improved Assistants API (file handling, run handling, token usage, stopping)
 - Added vertical canvas resolutions in Painter
 - Added brush settings restore in Painter
 - Added log file viewer in Debug menu
 - Added log level switch in runtime (Developer settings)
 - Added functions defining and handling in Presets (works in ChatCompletion API)
 - Improved presets and assistants editor dialogs
 - Improved debugger and Developer settings
 
-# 2.0.148 (2024-02-07)
+2.0.148 (2024-02-07)
 
 - Fixed input/output timestamps in renderer
 - Added aspect ratio check and fit on image open in Painter tool
 
-# 2.0.147 (2024-02-04)
+2.0.147 (2024-02-04)
 
 - Added `@` tags for quick access to context from previous discussions in the `Context History` plugin (must be enabled in plugin settings, default: disabled).
 - Added automatic passing of the day of the week in the `Context History` and `Real Time` plugins.
 
-# 2.0.146 (2024-02-03)
+2.0.146 (2024-02-03)
 
 - Disabled online loaders for Llama-index if compiled version is detected (they work properly only in Python version)
 
-# 2.0.145 (2024-02-03)
+2.0.145 (2024-02-03)
 
 - Enabled the use of the Context history plugin in inline mode (without the need for the Command execution option).
 - Added automatic provision of the current date in the Context History plugin if the Real-Time plugin is disabled.
 - Added the ability to count contexts within a specified date range.
 - Added an option to limit the maximum number of contexts retrieved per query.
 - Enabled the "undo" option in the painter when clearing and opening a new image.
 
-# 2.0.144 (2024-02-02)
+2.0.144 (2024-02-02)
 
 - Improved Command: Context history plugin prompts
 
-# 2.0.143 (2024-02-02)
+2.0.143 (2024-02-02)
 
-- Added a new plugin: `Command: Context history (calendar)`
-- Added a new feature to context list: `Pin on top`
-- Added `Minimize to tray on exit` option
+- Added a new plugin: Command: Context history (calendar)
+- Added a new feature to context list: Pin on top
+- Added Minimize to tray on exit option
 
-# 2.0.142 (2024-02-01)
+2.0.142 (2024-02-01)
 
 - Added tray notification on scheduled task run.
 - Added tray notification on Agent goal achieved.
 - Small fixes.
 
-# 2.0.141 (2024-02-01)
+2.0.141 (2024-02-01)
 
 - Improved window hide/restore from tray icon
 - Removed capture disable/enable options and Start minimized from settings dialog
 
-# 2.0.140 (2024-02-01)
+2.0.140 (2024-02-01)
 
 - Fixed preset duplicating
 
-# 2.0.139 (2024-02-01)
+2.0.139 (2024-02-01)
 
 - Improved the generation of names for preset duplicates.
 - Added background updates check (with an option in settings to disable it).
 - Added dialog to accept license terms at the first launch.
 - Fixed calendar content save on month change.
 - Small UI improvements.
 
-# 2.0.138 (2024-02-01)
+2.0.138 (2024-02-01)
 
 - Added "Duplicate" option to current * (default) presets
 - Added "Restore to default" option to current * (default) presets
 - Added "Minimize to tray" settings option
 - Fixed preset selection when clicked on list with RMB
 - Improved calendar records count on month break
 
-# 2.0.137 (2024-01-31)
+2.0.137 (2024-01-31)
 
 - Improved Agent / Autonomous mode handling
 - Added "Remove file from index" option in file-explorer
 - Other small fixes 
 
-# 2.0.136 (2024-01-31)
+2.0.136 (2024-01-31)
 
 - Improved integration of Agent mode with llama-index sub-mode
 - Updated documentation and locales
 
-# 2.0.135 (2024-01-31)
+2.0.135 (2024-01-31)
 
 - Fixed issue where the agent would stop after the first run in Agent mode when the number of iterations was set to non-infinity.
 - Added "Agent" section in the settings, with options to select the sub-mode to use (Chat, Completion, Langchain, Llama-index, etc.) and an option to choose the index to use.
 - Implemented a feature to display the current run status in Agent mode.
 
-# 2.0.134 (2024-01-30)
+2.0.134 (2024-01-30)
 
 - Updated models list
 
-# 2.0.133 (2024-01-30)
+2.0.133 (2024-01-30)
 
-- Added the ability for autonomous image generation using the `DALL-E (inline)` plugin in `Agent mode`.
-- Added a `Redo` option to the `Painter/Draw` tool.
-- Enabled Vision in `Agent mode`.
+- Added the ability for autonomous image generation using the "DALL-E (inline)" plugin in "Agent mode".
+- Added a "Redo" option to the "Painter/Draw" tool.
+- Enabled Vision in "Agent mode".
 
-# 2.0.132 (2024-01-30)
+2.0.132 (2024-01-30)
 
-- Experimental: Added new working mode: `Agent (autonomous)`, which works similarly to the `Autonomous Mode` plugin but as a separate mode with editable system prompt presets.
-- Renamed `Autonomous Mode` plugin to `Autonomous Mode (inline)`.
+- Experimental: Added new working mode: "Agent (autonomous)", which works similarly to the "Autonomous Mode" plugin but as a separate mode with editable system prompt presets.
+- Renamed "Autonomous Mode" plugin to "Autonomous Mode (inline)".
 - Fixed real-time system prompt tokens calculation update.
 - Fixed preset saving in editor.
 - Updated icons' fill color.
 
-# 2.0.131 (2024-01-30)
+2.0.131 (2024-01-30)
 
 - Fix: set a limited height for list items in editable lists within the options.
 - Added new plugin: `System Prompt Extra`: plugin appends additional system prompts (extra data) from a list to every current system prompt. You can enhance every system prompt with extra instructions that will be automatically appended to the system prompt.
 - Added a list of prompts for define and use in the `Autonomous Mode` plugin (the previous division into "normal" and "extended" prompts has been replaced with an unlimited, user-editable list).
 - Added textarea stretch on dialog resize in dictionary options editor
 - Introduced a new `duplicate` option in the context list (it copies the selected context to a new one).
 
-# 2.0.130 (2024-01-29)
+2.0.130 (2024-01-29)
 
-- Added status indicator in Tray - feature [#12](https://github.com/szczyglis-dev/py-gpt/issues/12)
+- Added status indicator in Tray - issue #12
 - Added icons to tabs, tray and context menus
 - Added "Files and attachments" section in Settings
 
-# 2.0.129 (2024-01-29)
+2.0.129 (2024-01-29)
 
 - Added Material Design SVG icons (by Google)
 - Added icon resources compiler script
 - Improved file explorer
 
-# 2.0.128 (2024-01-29)
+2.0.128 (2024-01-29)
 
 - Added improvements to RMB context menu handling in Files
 - Improved generation of names for duplicated files
 
-# 2.0.127 (2024-01-28)
+2.0.127 (2024-01-28)
 
-- Added ability to auto-store (in the `%workdir%/upload` directory) local copies of attachments uploaded from outside the workdir.
-- Added an option in the general settings dialog: `Store attachments in the workdir upload directory`, default: True
-- Added an option for storing everything in the `data` directory: `Store images, capture and uploads in data directory`, default: False
+- Added ability to auto-store (in the "%workdir%/upload" directory) local copies of attachments uploaded from outside the workdir.
+- Added an option in the general settings dialog: "Store attachments in the workdir upload directory", default: True
+- Added an option for storing everything in the "data" directory: "Store images, capture and uploads in data directory", default: False
 
-# 2.0.126 (2024-01-28)
+2.0.126 (2024-01-28)
 
-- New features in file explorer (`Files` tab):
+- New features in file explorer (Files tab):
 
 - Create empty file
 - Create directory
 - Upload files to selected directory
 - Download file or directory
 - Duplicate file or directory
 - Use as attachment
 - Ask for read this file
 - Copy working/system path to input and clipboard
 
-# 2.0.125 (2024-01-28)
+2.0.125 (2024-01-28)
 
 - Fixed chars encoding in save text to file option
 
-# 2.0.124 (2024-01-28)
+2.0.124 (2024-01-28)
 
 - Fixed Vision checkbox visibility when switching to plain-text mode
 - Added RMB context menu option "Save as..." to selected text for saving selected text (or whole document) to a text file
 - Added remembering the last used directory for uploading attachments/saving files
 
-# 2.0.123 (2024-01-27)
+2.0.123 (2024-01-27)
 
 - Standarized models names
-- Added `Recursive directory indexing` option in `Settings / Indexes (Llama-index)` (default: False)
+- Added "Recursive directory indexing" option in "Settings / Indexes (Llama-index)" (default: False)
 
-# 2.0.122 (2024-01-27)
+2.0.122 (2024-01-27)
 
-- Added new OpenAI model released on 2024-01-25: `gpt-4-0125-preview`
+- Added new OpenAI model released on 2024-01-25: "gpt-4-0125-preview"
 - Added ability to add custom offline data loaders for Llama-index
-- Improved debugging and logging, added debug levels, and introduced a new section `Debugging and Logging` in the documentation
+- Improved debugging and logging, added debug levels, and introduced a new section "Debugging and Logging" in the documentation
 - Moved inline styles to external CSS classes
-- Renamed `pygpt_net.provider.llm` to `pygpt_net.provider.llms`
+- Renamed "pygpt_net.provider.llm" to "pygpt_net.provider.llms"
 
-# 2.0.121 (2024-01-27)
+2.0.121 (2024-01-27)
 
 - Fixed query error when using Query mode in Chat with files mode with enabled plugins
 - Added a bridge/abstraction layer between modes
 - Hid the assistant checkbox in the preset editor
 
-# 2.0.120 (2024-01-26)
+2.0.120 (2024-01-26)
 
 - Fixed font-size restore when switching between plain text and markdown renderer
 - Added RMB context menu option "Clear files" to input Attachments tab.
 
-# 2.0.119 (2024-01-25)
+2.0.119 (2024-01-25)
 
 - Fixed list selection loose after async command execution
 - Added "Start minimized" option in settings
 - Updated docs
 
-# 2.0.118 (2024-01-25)
+2.0.118 (2024-01-25)
 
 - Added "Show tray icon" option in "Settings"
 - Added launcher arguments
 - Updated docs
 - Small fixes
 
-# 2.0.117 (2024-01-24)
+2.0.117 (2024-01-24)
 
-- Added a new feature to the `Command: Files I/O` plugin - `Get and upload file as attachment`. It lets automatically read files from `data` folder and send them as attachments - just ask to send a file as an attachment and the model will send it to itself (like sending an image for analysis). Option is disabled by default in the plugin`s settings.
-- Added a new plugin: `Command: Serial port / USB`. This plugin lets you read and send any commands to USB ports (so you can control robots now ;) ).
+- Added a new feature to the "Command: Files I/O" plugin - "Get and upload file as attachment". It lets automatically read files from "data" folder and send them as attachments - just ask to send a file as an attachment and the model will send it to itself (like sending an image for analysis). Option is disabled by default in the plugin"s settings.
+- Added a new plugin: "Command: Serial port / USB". This plugin lets you read and send any commands to USB ports (so you can control robots now ;) ).
 - Made it possible to use URLs for images when not using the vision feature.
 - Fixed saving and reloading prompts in Assistant mode.
 - Removed display of empty external images from the output.
 
-# 2.0.116 (2024-01-24)
+2.0.116 (2024-01-24)
 
 - Fixed font color in light themes
 - Fixed layout display on Windows systems
-- Theme, Language and Debug menus moved to Config menu - feature [#10](https://github.com/szczyglis-dev/py-gpt/issues/10)
+- Theme, Language and Debug menus moved to Config menu - issue #10
 - Added Developer section in Settings
 - Fixed list options editing
 - Refactored code and updated tests
 
-# 2.0.115 (2024-01-22)
+2.0.115 (2024-01-22)
 
 - Added token recalculation after the attachments list is changed and upon copy/pasting into the input field.
 - Added descriptions to the settings.
 - Improved the "Copy selected text to..." option.
 
-# 2.0.114 (2024-01-21)
+2.0.114 (2024-01-21)
 
 - Fixed broken CSS on Windows
-- Added support for Vector Store databases: `Chroma`, `Elasticsearch`, `Pinecone` and `Redis` (beta)
+- Added support for Vector Store databases: "Chroma", "Elasticsearch", "Pinecone" and "Redis" (beta)
 - Added config options for selecting and configuring Vector Store providers
 - Added ability to extend PyGPT with custom Vector Store providers
-- Added commands to the `Vision (inline)` plugin: get camera capture and make screenshot. Options must be enabled in the plugin settings. When enabled, they allow the model to capture images from the camera and make screenshots itself.
-- Added `Query index only (without chat)` option to `Chat with files` mode.
-- Added stream mode support to query index mode in `Chat with files`.
+- Added commands to the "Vision (inline)" plugin: get camera capture and make screenshot. Options must be enabled in the plugin settings. When enabled, they allow the model to capture images from the camera and make screenshots itself.
+- Added "Query index only (without chat)" option to "Chat with files" mode.
+- Added stream mode support to query index mode in "Chat with files".
 
-# 2.0.113 (2024-01-20)
+2.0.113 (2024-01-20)
 
 - Added %workdir% placeholder to attachments and images files paths storage for more flexibility in moving data between environments
 - Refactored base plugin options handling
 
-# 2.0.112 (2024-01-19)
+2.0.112 (2024-01-19)
 
 - Fixed image variants slider in image mode
 - Fixed vision checkbox visibility
 - Fixed user directory path when handling different directories/symlinks
 - Added config option for disable opening image dialog after image generate
 - Added Scheduled tasks entry in taskbar dropdown
 - Added * (asterisk) indicator after date modified if newer than last indexed time
 - Date of modified in file explorer changed to format YYYY-MM-DD HH:MM:SS
 
-# 2.0.111 (2024-01-19)
+2.0.111 (2024-01-19)
 
 - Fixed: opening files and directories in Snap and Windows versions
 - Fixed: camera capture handling between mode switch
 - Added: info about snap connect camera in Snap version (if not connected)
 - Added: missing app/tray icon in compiled versions
 
-# 2.0.110 (2024-01-19)
+2.0.110 (2024-01-19)
 
-- Fixed bug: history file clear on ctx remove - Issue [#9](https://github.com/szczyglis-dev/py-gpt/issues/9)
+- Fixed bug: history file clear on ctx remove - issue #9
 - Vision inline allowed in modes: Langchain and Chat with files (llama-index)
 - Event names moved to Event class
 
-# 2.0.109 (2024-01-18)
+2.0.109 (2024-01-18)
 
-- Fixed bug: float inputs value update behaviour - Issue [#8](https://github.com/szczyglis-dev/py-gpt/issues/8)
-- Added: plugin description tooltips - Issue [#7](https://github.com/szczyglis-dev/py-gpt/issues/7)
-- Added: focus window on "New context..." in tray - Issue [#13](https://github.com/szczyglis-dev/py-gpt/issues/13)
-- Added: Ask with screenshot option to tray menu - Issue [#11](https://github.com/szczyglis-dev/py-gpt/issues/11)
-- Added: Open Notepad option to tray menu - Issue [#14](https://github.com/szczyglis-dev/py-gpt/issues/14)
+- Fixed bug: float inputs value update behaviour - issue #8
+- Added: plugin description tooltips - issue #7
+- Added: focus window on "New context..." in tray - issue #13
+- Added: Ask with screenshot option to tray menu - issue #11
+- Added: Open Notepad option to tray menu - issue #14
 
-# 2.0.108 (2024-01-16)
+2.0.108 (2024-01-16)
 
 - Added confirmation dialogs on indexing
 - Added missing translations
 - Updated dependencies: openai, cryptography, certifi, urllib, jinja
 
-# 2.0.107 (2024-01-16)
+2.0.107 (2024-01-16)
 
 - Fixed model change in vision plugin
 - Fixed completion API error
 - Removed deprecated davinci and replaced with 3.5-turbo-instruct model
 
-# 2.0.106 (2024-01-15)
+2.0.106 (2024-01-15)
 
 - Added "undo" action in drawing window
 - Refactored locale handling
 - Improved locale and theme overriding
 
-# 2.0.105 (2024-01-15)
+2.0.105 (2024-01-15)
 
-- Extended `Theme` menu with new options
-- `Index (llama-index)` mode changed name to `Chat with files` mode
+- Extended 'Theme' menu with new options
+- 'Index (llama-index)' mode changed name to 'Chat with files' mode
 - Refactored theme controller
 - Fixed model config providing to llama-index mode
 
-# 2.0.104 (2024-01-14)
+2.0.104 (2024-01-14)
 
 - Langchain support refactored and fixed
 - Added editor for models
 - Added options for customize arguments and environment vars passed to langchain and llama providers
 - Added context length limit in modes: langchain and llama-index
 - Models configuration integrated between GPT/Langchain/Llama-index
 
-# 2.0.103 (2024-01-13)
+2.0.103 (2024-01-13)
 
 - Llama-index mode, now integrated with context from the database, streaming, plugins, and more, can be utilized as any other mode and is no longer limited to just querying indexes.
 
-# 2.0.102 (2024-01-13)
+2.0.102 (2024-01-13)
 
 - Added presets for llama-index mode
 - Added custom system prompt in llama-index mode
 - Added option to use online data loaders in settings
 - Added hiding of chat footer in non-chat tabs
 - Added missing libraryfor epub data loader
 
-# 2.0.101 (2024-01-13)
+2.0.101 (2024-01-13)
 
 - User interface improvements
 - Added help tips
 
-# 2.0.100 (2024-01-13)
+2.0.100 (2024-01-13)
 
 - Llama-index integrated with database - you can now indexing all conversations and use them as additional context
 - Added support for multiple indexes at once
 - Added configuration for llama-indexes
 - Data-dir in home directory changed name from 'output' to 'data'
 
-# 2.0.99 (2024-01-12)
+2.0.99 (2024-01-12)
 
 - Added configuration sections in settings dialog
 - Added translations to file explorer
 - Langchain migrated to langchain community
 - Config patchers moved to separated classes
 - Fixed some UI issues
 
-# 2.0.98 (2024-01-12)
+2.0.98 (2024-01-12)
 
 - UI fixes
 
-# 2.0.97 (2024-01-11)
+2.0.97 (2024-01-11)
 
 - DALL-E config fix
 
-# 2.0.96 (2024-01-11)
+2.0.96 (2024-01-11)
 
 - Added integration with Llama-index (experimental): you can now index/embed files from the data directory and use them as additional data in context.
 - Added an inline plugin for Llama-index (allows providing additional context from Llama-index in any chat mode).
 - Built-in file loaders: text files, pdf, csv, md, docx, json, epub, xlsx
 - Added a new mode: Index (llama-index), it is a mode for querying the index directly.
 - Improved DALL-E 3 configuration, 16:9 images set as default, added config option for standard and HD mode.
 - Improved drawing mode.
 
-# 2.0.95 (2024-01-10)
+2.0.95 (2024-01-10)
 
 - Added capture from camera feature in image drawing mode
 
-# 2.0.94 (2024-01-10)
+2.0.94 (2024-01-10)
 
 - Improved drawing: added canvas, image load/save, store and restore drawing on start and more
 - Improved dict option editor: added type fields
 
-# 2.0.93 (2024-01-10)
+2.0.93 (2024-01-10)
 
 - Added painter (simple image drawing) - it allows to quick draw images and provide them into vision model
 - Small UI fixes
 
-# 2.0.92 (2024-01-10)
+2.0.92 (2024-01-10)
 
 - Fixed bug with system prompt append from main window
 - Added editor for list options (via RMB -> Edit...)
 - User/AI names and temperature removed from main window
 - UI fixes
 
-# 2.0.91 (2024-01-09)
+2.0.91 (2024-01-09)
 
 - Added new plugin: Crontab / Task scheduler: the plugin provides cron-based job scheduling - you can now schedule tasks/prompts to be sent at any time using cron-based syntax for task setup.
 - Added combo-box to configuration option types
 - Fixed incorrect contexts count in date calculation when timezone is different from UTC
 - Fixed incorrect paragraph formatting after command DIV in the last line of response
 - Other small fixes and improvements
 
-# 2.0.90 (2024-01-08)
+2.0.90 (2024-01-08)
 
 - Fixed config load defaults bug
 - Refactored configurations core
 - Small UI fixes
 
-# 2.0.89 (2024-01-07)
+2.0.89 (2024-01-07)
 
 - Added secondary, extended prompt to autonomous mode configuration (it allows quick switching between standard and more extended reasoning).
 - Fixed user input disappearance in history when appending inside autonomous mode.
 
-# 2.0.88 (2024-01-07)
+2.0.88 (2024-01-07)
 
 - Added color labels to context items (you can now mark item on list with 'Set label color...' context menu option)
 - Improved storage of notepad and calendar items
 
-# 2.0.87 (2024-01-07)
+2.0.87 (2024-01-07)
 
 - Fixed paragraph formatting and font color.
 - Implemented automatic database backup creation prior to all migrations.
 - Added functionality to search contexts using both fields in a single query: search string and date range.
 
-# 2.0.86 (2024-01-07)
+2.0.86 (2024-01-07)
 
 - Fixed window state saving on exit
 - Added focus on input on creating new context
 
-## 2.0.85 (2024-01-07)
+2.0.85 (2024-01-07)
 
 - Improved Autonomous mode
 - Added synchronous command execution from plugins, which now allows the Autonomous mode to use the output of other plugins (such as access to the websearch engine, access to filesystem and code execution or generating images in DALL-E) and retrieve and use response from them internally
 - Fixed system prompt for Autonomous mode: resolved the problem of command generation interruptions between responses, and incorporated the capability for user to send additional instructions and update goals in real-time
 - Fixed loss of selection on the modes and models list in Autonomous mode
 
-## 2.0.84 (2024-01-06)
+2.0.84 (2024-01-06)
 
 - The "Self-Loop" plugin has been completely redesigned, improved, and renamed to the Autonomous Mode, which enables the launch of autonomous reasoning in a looped AI-with-AI conversation mode.
 - A system prompt option has been added to the plugin configuration with instructions for the autonomous mode.
 - Auto-stop after goal is reached option is added also to plugin settings.
 
-## 2.0.83 (2024-01-06)
+2.0.83 (2024-01-06)
 
 - Added calendar, day notes (memos) and color labels
 - Added context search filter by date (days selected in calendar)
 - Added 'clear' icon in search input
 - Small fixes and improvements
 
-## 2.0.82 (2024-01-05)
+2.0.82 (2024-01-05)
 
 - Plain text append scroll fix
 
-## 2.0.81 (2024-01-05)
+2.0.81 (2024-01-05)
 
 - Added Edit context menu option in models list (JSON file edit)
 - Fixed link color in light theme css
 - Fixed font color restore when switching to plain text
 
-## 2.0.80 (2024-01-05)
+2.0.80 (2024-01-05)
 
 - Added Plain Text checkbox at the bottom of chat window
 - Removed datetime append when copying text to notepad
 - Improved plain-text mode
 
-## 2.0.79 (2024-01-05)
+2.0.79 (2024-01-05)
 
 - Fixed bug: notepad save/load content from DB
 
-## 2.0.78 (2024-01-05)
+2.0.78 (2024-01-05)
 
 - Improved markdown formatting
 - Output text renderers moved to separated modules
 - Added plain-text render option in settings
 - Vision inline disabled in unsupported modes (Image generation and Assistant) and hidden in Vision (always enabled here)
 - Updated OpenAI Chat Completion API
 
-## 2.0.77 (2024-01-05)
+2.0.77 (2024-01-05)
 
 - Fixed inline plugins disable when pausing command plugins by unchecking 'Execute commands' checkbox
 - Added real-time image appending into chat window when generating images in Image Generation mode
 - Added automatic creation of context after deletion from the list when no other context is selected
 - Updated docs
 
-## 2.0.76 (2024-01-04)
+2.0.76 (2024-01-04)
 
 - Markdown post-process changed from markdown extension to BS4 html parser.
 
-## 2.0.75 (2024-01-04)
+2.0.75 (2024-01-04)
 
 - Improved default theme for markdown styling
 - Added "Check for updates on start-up" config option in updater dialog
 - Added custom CSS stylesheets editor in Config menu
 - Added password show/hide in password/secret input fields (click on the right corner of input reveals plain text)
 - Fixed JSON files editing (added data reloading after save to prevent overwrite on exit)
 - Added tests for plugins and extended tests for core/controllers
 
-## 2.0.74 (2024-01-03)
+2.0.74 (2024-01-03)
 
 - Fixed timestamp position when appending input to the chat window.
-- Extended the Markdown parser with an extension for converting `li` to `p` (it allows copying lists bullets with Ctrl-C).
+- Extended the Markdown parser with an extension for converting <li> to <p> (it allows copying lists bullets with Ctrl-C).
 - Added notebook titles to the "Copy to..." context menu.
 - Added an "Open file" option in the file explorer and attachments list.
 
-## 2.0.73 (2024-01-03)
+2.0.73 (2024-01-03)
 
 - Fixed vision prompt appending
 - Improved inline vision: removed the "keep" option and added a vision indicator with a checkbox for quickly enabling/disabling the vision model if needed (will auto-enable when an image is provided if the plugin is active)
 
-## 2.0.72 (2024-01-02)
+2.0.72 (2024-01-02)
 
 - Fixed markdown / HTML formatting
 - Added config option "Use color theme in chat window" in main settings
 - Added configuration for system prompt to use with vision in Vision Inline plugin settings
 
-## 2.0.71 (2024-01-01)
+2.0.71 (2024-01-01)
 
 - Added Markdown and HTML formatting in the chat window (beta version)
 - Added the display of images, files and URLs internally in the chat window
 - Added fully integration with images, attachments, and files inside the chat window
 - Added vision capture and image generation directly into the chat window (via the DALL-E Inline plugin)
 - Improved audio speech generation (eliminated the silence that prematurely truncated the previous audio output before generating the next speech synthesis)
 
-## 2.0.70 (2023-12-31)
+2.0.70 (2023-12-31)
 
 - Added commands part strip from speech generation
 - Added img check for links sending to vision in auto mode
 
-## 2.0.69 (2023-12-31)
+2.0.69 (2023-12-31)
 
 - Added a new plugin: GPT-4 Vision (inline - in any chat). Plugin integrates vision capabilities with any chat mode, not just Vision mode. When the plugin is enabled, the model temporarily switches to vision in the background when an image attachment or vision capture is provided.
 
-
-## 2.0.68 (2023-12-31)
+2.0.68 (2023-12-31)
 
 - Added a new plugin: DALL-E 3 Image Generation (inline) which enables image generation in any chat and mode, seamlessly in the background - just request an image from any model, like GPT-4, and it will generate it "inline."
 - User Interface optimizations.
 - Added type hints to the code.
 - Fixed issue with sending attachments in Assistant mode.
 
-## 2.0.67 (2023-12-30)
+2.0.67 (2023-12-30)
 
 - Notepad restore fix
 
-## 2.0.66 (2023-12-30)
+2.0.66 (2023-12-30)
 
 - Added "Rename" option to Notepad Tabs (via RMB)
 - Improved language switching
 
-## 2.0.65 (2023-12-30)
+2.0.65 (2023-12-30)
 
 - Image generation, vision capture and assistants run listeners moved to async threadpool
 - Added saving state of scroll value in chat window
 - Added search string save and restore
 - Added input text save and restore
 - Updated tests and code cleanup
-- Added translations (only main app): DE, ES, FR, IT, UA 
+- Added translations (only main app): DE, ES, FR, IT, UA
 - Small fixes and optimizations
 
-## 2.0.64 (2023-12-29)
+2.0.64 (2023-12-29)
 
 - Commands and plugins execution moved to asynchronous native QT threadpool
 - Improved theme switching
 - Improved debugger window
 - Small fixes and optimizations
 
-# 2.0.63 (2023-12-28)
+2.0.63 (2023-12-28)
 
 - Fixed context append bug
 - Improved layout resize
 
-## 2.0.62 (2023-12-28)
+2.0.62 (2023-12-28)
 
 - Fixed date display on context list
 - Added mode display in context tooltips
 - Added "Contexts list records limit" config option in settings
 - Added tokens calculator tooltips
 
-## 2.0.61 (2023-12-28)
+2.0.61 (2023-12-28)
 
 - DALL-E multiple messages in one context fix
 
-## 2.0.60 (2023-12-28)
+2.0.60 (2023-12-28)
 
 - Message append fix
 
-## 2.0.59 (2023-12-28)
+2.0.59 (2023-12-28)
 
 - Storage of context has been changed from JSON files to SQLite database, automatic migration is included - you will not lose your existing data after update :)
 - Added "Search" functionality for contexts and a search input at the bottom.
 - Updated contexts now automatically land at the top of the list.
 - Added the ability to store more information about each context.
 - Integration of searching, utilizing SQLite, and vector database search coming soon.
 - Improved DALL-E image generation.
 
-## 2.0.58 (2023-12-27)
+2.0.58 (2023-12-27)
 
 - Code refactor
 - Added stream response mode to Vision mode
 - Added token calculation to Langchain mode
 - Optimizations and small fixes
 
-## 2.0.57 (2023-12-26)
+2.0.57 (2023-12-26)
 
 - Added threadpool for async workers handling
 - Fixed segmentation fault error on app exit
 - Refactored class names
 
-## 2.0.56 (2023-12-25)
+2.0.56 (2023-12-25)
 
 - Reorganized project structure
 - Relative imports changed to absolute imports
 - Updated core paths
 - Fixed plugin response hanging
 - Fixed recursion problem in error logger
 - Fixed platform module name
 
-## 2.0.55 (2023-12-25)
+2.0.55 (2023-12-25)
 
 - Fixed max model ctx tokens 
 
-## 2.0.54 (2023-12-25)
+2.0.54 (2023-12-25)
 
 - Updater new version check moved to post-setup
 - Fixed default assistant preset
 - Added link to Snap Store to updater window
 
-## 2.0.52 (2023-12-25)
+2.0.52 (2023-12-25)
 
 - Added DPI option in settings: enable/disable and scale factor
 - Fixed font-size change with mouse scroll on notepad window
 
-## 2.0.51 (2023-12-25)
+2.0.51 (2023-12-25)
 
 - Added auto-content truncate before tokens limit exceeded
 - Added dynamic max tokens switching
 - Fixed real-time tokens calculation
 
-## 2.0.50 (2023-12-25)
+2.0.50 (2023-12-25)
 
 - Fixed async logging
 - Updated tests
 
-## 2.0.49 (2023-12-24)
+2.0.49 (2023-12-24)
 
 - Fixed crash on async command call
 - Fixed UI issues
 - Added data providers
 - Refactored classes
 
-## 2.0.48 (2023-12-23)
+2.0.48 (2023-12-23)
 
 - Added custom errors handler with logging.
 
-## 2.0.47 (2023-12-23)
+2.0.47 (2023-12-23)
 
 - Added "Copy to Notepad/Input" to the context menu for selected text.
 - Added an option to read selected text using speech synthesis in the Notepad window.
 - Added a configurable number of notepads.
 - Refactored UI classes.
 - Added a thread-safe plugin debugger/logger.
 - Fixed UI issues.
 
-## 2.0.46 (2023-12-22)
+2.0.46 (2023-12-22)
 
 - Improved tokens calculation (added extra tokens from plugins to real-time calculation)
 - Added new context menu option to selected text in output/input: "Read with speech synthesis"
 
-## 2.0.45 (2023-12-22)
+2.0.45 (2023-12-22)
 
 - Added "light" themes
 - Fixed tokens calculation
 - Updated tests
 
-## 2.0.44 (2023-12-21)
+2.0.44 (2023-12-21)
 
 - Fixed language switch in plugins settings
 
-## 2.0.43 (2023-12-21)
+2.0.43 (2023-12-21)
 
 - PyGPT publicated at Snap Store: https://snapcraft.io/pygpt
 - Added link to Snap Store in app menu
 
-## 2.0.42 (2023-12-20)
+2.0.42 (2023-12-20)
 
 - Audio output library changed to `PyGame` mixer (instead of `PyDub`)
 - Added `PyGame` as a dependency and removed `PyDub` and `simpleaudio` dependencies
 - Added audio input/output stop immediately on plugin disable
 
-## 2.0.41 (2023-12-20)
+2.0.41 (2023-12-20)
 
 - Added "sandbox" feature to the Code Interpreter – it allows the use of any Docker image as an environment for code and commands execution.
 - Context auto-summary moved to an async thread.
 - Command execution moved to an async thread.
 
-## 2.0.40 (2023-12-19)
+2.0.40 (2023-12-19)
 
 - Totally improved material themes support
 - Added QSS-configurable themes to chat output window and code highlighter
 - Added ability to overriding styles per any theme in user directory
 - Fixed UI layout elements
 - Fixed DPI issues in Windows systems
 
-## 2.0.39 (2023-12-18)
+2.0.39 (2023-12-18)
 
 - Fixed dialogs closing with the Esc key
 - Added an indicator for "can append to context in this mode"
 - Added functionality to fetch filenames from the API when importing files uploaded to Assistants
 - Enabled switching to newly created Assistants after creation
 - Optimized class structure
 
-## 2.0.38 (2023-12-18)
+2.0.38 (2023-12-18)
 
 - Multi-language support added to plugins
 - Implemented feature to override locale and CSS files by overwriting them in the home directory
 - Bug fixes
 
-## 2.0.37 (2023-12-18)
+2.0.37 (2023-12-18)
 
 - Fixed prompt typing in real-time on the right toolbox
 - Added toolbox font change option
 - Simplified custom plugins and wrappers for LLMs application (see Docs for more details)
 - Bug fixes
 - UI fixes
 
-## 2.0.36 (2023-12-18)
+2.0.36 (2023-12-18)
 
 - Improved plugins handling
 - Added Event Dispatcher and event-based system
 
-## 2.0.35 (2023-12-18)
+2.0.35 (2023-12-18)
 
 - Fixed lists focus lost and selection disappearing
 - Added clickable links to API keys pages
 - Added scroll position store in notepads
 - Auto auto-switch to preset after create
 - Assistants files and thread moved to external classes
 - UI fixes
 - Code fixes
 
-## 2.0.34 (2023-12-17)
+2.0.34 (2023-12-17)
 
 - Added option "Lock incompatible modes" to prevent mixing of incompatible contexts.
 - Added PyPI link to the About menu. 
 
-## 2.0.33 (2023-12-17)
+2.0.33 (2023-12-17)
 
 - Fixed dialog's save/update button handlers
 - Fixed uploaded files reload in assistants
 - Fixed focus loss on assistants list
 - Fixed Output Files header
 - Fixed UI
 - Added delete confirmation to dictionary options
 - Added context change lock before response generation
 - Added allowed types for contexts
 - Added a link to the documentation in the menu
 - Added saving state of opened advanced options in plugins
 - Disabled mouse scroll on sliders
 
-## 2.0.32 (2023-12-16)
+2.0.32 (2023-12-16)
 
 - Added real-time font-size change with CTRL + mouse scroll in input, output and notepad windows
 - Increased allowed font-size to 42
 - Fixed line display in plugin settings
 
-## 2.0.31 (2023-12-16)
+2.0.31 (2023-12-16)
 
 - Speech recognition (Whisper) small fixes, optimization and improvements
 - Added advanced internal options to speech recognition config
 
-## 2.0.30 (2023-12-15)
+2.0.30 (2023-12-15)
 
 - Speech recognition and synthesis fixes and improvements
 - Fixed and improved speech recognition via Whisper
 - Fixed and improved voice synthesis via OpenAI TTS and MS Azure
-- Added new options to speech recognition: magic words, stop words, auto-send and wait for response
+- Added new options to speech recognition: magic words, stop words, prefix words, auto-send and wait for response
 - Added new more intuitive voice input/output control panel in UI
 
-## 2.0.29 (2023-12-14)
+2.0.29 (2023-12-14)
 
 - Added config and plugin options getters/setters
 - Changed logo
 - Small UI fixes
 
-## 2.0.28 (2023-12-14)
+2.0.28 (2023-12-14)
 
 - Added new hidden Credentials/API Key field type (asterisks against plain-text)
 - Simplified presets editing
 - Fixed Assistants function management
 - Improved UI
 - Improved settings editing
 
-## 2.0.27 (2023-12-14)
+
+2.0.27 (2023-12-14)
 
 - Added specified "url open" command to Web Search plugin
 - Added additional advanced options to above plugins
 - Improved Web Search and Commands Execution
 - Improved updater and config patcher
 - Improved command execution logging
 
-## 2.0.26 (2023-12-13)
+2.0.26 (2023-12-13)
 
 - Added advanced config options for plugins
 - Added additional file operations to Files I/O plugin
 
-## 2.0.25 (2023-12-13)
+2.0.25 (2023-12-13)
 
 - Added advanced settings
 - Added clear on capture config option
 - Added capture quality config option
 - Added launcher shortcuts
 - Improved plugins
 - Improved WebSearch
 - Optimized commands response
 - Fixed UI issues
 
-## 2.0.24 (2023-12-12)
+2.0.24 (2023-12-12)
 
 - Fixed empty string in tokens calculator
 - Added attachments reset before auto-capture from camera
 
-## 2.0.23 (2023-12-12)
+2.0.23 (2023-12-12)
 
 - Improved python code execution
 
-## 2.0.22 (2023-12-12)
+2.0.22 (2023-12-12)
 
 - Fix: env API KEY name for Langchain mode
 
-## 2.0.21 (2023-12-12)
+2.0.21 (2023-12-12)
 
 - Simplified assistant configuration
 - Added assistant configuration validation
 - Improved UI
 - Improved language switcher
 
-## 2.0.20 (2023-12-11)
+2.0.20 (2023-12-11)
 
 - Improved Assistants API
 - Added assistant uploaded files storage
 - Added assistant uploaded files management
 - Added assistant remote functions management
 - Fixed "open in directory" option on Windows in DALL-E image generation
 - Improved attachments and file upload management
 - Improved UI and more
 
-## 2.0.19 (2023-12-10)
+2.0.19 (2023-12-10)
 
 - Optimized DALL-E prompt generator helper
 
-## 2.0.18 (2023-12-10)
+2.0.18 (2023-12-10)
 
 - Config fix
 
-## 2.0.17 (2023-12-10)
+2.0.17 (2023-12-10)
 
 - Small fixes
 
-## 2.0.16 (2023-12-10)
+2.0.16 (2023-12-10)
 
 - Added multiple cameras config
 - Added DALL-E prompt generation RAW MODE ON/OFF switch
 - Improved camera handling
 
-## 2.0.15 (2023-12-10)
+2.0.15 (2023-12-10)
 
 - Added camera release / disable on camera off
 
-## 2.0.14 (2023-12-10)
+2.0.14 (2023-12-10)
 
 - Added real-time video capture from camera in "Vision" mode
 
-## 2.0.13 (2023-12-10)
+2.0.13 (2023-12-10)
 
 - Fixed path resolving in "open in directory" option on Windows OS
 - Added real-time apply of "layout density" (after "save changes" in Settings)
 - Default "layout density" changed to 0
 - Updated locale
 
-## 2.0.12 (2023-12-09)
+2.0.12 (2023-12-09)
 
 - Improved system commands execution
 
-## 2.0.11 (2023-12-09)
+2.0.11 (2023-12-09)
 
 - Small fixes
 
-## 2.0.10 (2023-12-09)
+2.0.10 (2023-12-09)
 
 - Updated locale
 
-## 2.0.9 (2023-12-09)
+2.0.9 (2023-12-09)
 
-- Added `Command: Custom Commands` feature; plugin allows to easily create and execute custom commands
-- Added new features to `Command: Files I/O`: downloading files, copying files and dirs, moving files and dirs
+- Added Command: Custom Commands feature; plugin allows to easily create and execute custom commands
+- Added new features to Command: Files I/O: downloading files, copying files and dirs, moving files and dirs
 
-## 2.0.8 (2023-12-08)
+2.0.8 (2023-12-08)
 
 - Improved Web Search plugin
 
-## 2.0.7 (2023-12-08)
+2.0.7 (2023-12-08)
 
 - Improved code execution with Code Interpreter / Files I/O plugins
 
-## 2.0.6 (2023-12-08)
+2.0.6 (2023-12-08)
 
 - Added layout density configuration
 
-## 2.0.5 (2023-12-08)
+2.0.5 (2023-12-08)
 
 - Added support for external CSS
 - Added custom fonts support
 - Improved material theme support
 
-## 2.0.4 (2023-12-08)
+2.0.4 (2023-12-08)
 
 - Added configuration options for plugins: Files I/O, Code Interpreter
 - UI fixes
 
-## 2.0.3 (2023-12-07)
+2.0.3 (2023-12-07)
 
 - Python code execution fix
 
-## 2.0.2 (2023-12-07)
+2.0.2 (2023-12-07)
 
 - Added python command template settings
 - Added layout state restore
 - Refactored settings
 - Improved settings window
 - Bugfixes
 
-## 2.0.1 (2023-12-07)
+2.0.1 (2023-12-07)
 
 - Fixed settings dialog initialization
 - Fixed models.json migration
 - Added enter key behaviour settings
 - Added font size settings for input and context list
 - Added ctx auto-summary settings
 - Added python command plugin settings
 
-## 2.0.0 (2023-12-05)
-
-New features in version 2.0.0:
+2.0.0 (2023-12-05)
 
 - Added support for new models: GPT-4 Turbo, GPT-4 Vision, and DALL-E 3
 - Integrated Langchain with support for any model it provides
 - Assistants API and simple assistant configuration setup
 - Vision and image analysis capabilities through GPT-4 Vision
 - Image generation with DALL-E 3
 - File and attachment support including upload, download, and management
@@ -1140,47 +1558,47 @@
 - Multiple assistants support
 - Command execution support
 - Filesystem access allows GPT to read and write files
 - Asynchronous (stream) mode added
 - Local Python code interpreter that enables code execution by GPT
 - System command executions directly from GPT
 - Voice synthesis provided via Microsoft Azure TTS and OpenAI TTS (Text-To-Speech)
-- Voice recognition provided by OpenAI Whisper
+- Voice recognition facilitated by OpenAI Whisper
 - Automatic summarization of context titles
 - Upgraded Web Browser plugin
 - More precise token calculation functionality
 - Added output markup highlight
 - Improved UX
 - Bug fixes
 - Plus additional enhancements and expanded capabilities
 
-## 0.9.6 (2023.04.16)
+0.9.6 (2023.04.16)
 
 - Added real-time logger
 - Improved debug mode
 
-## 0.9.5 (2023.04.16)
+0.9.5 (2023.04.16)
 
 - Added web plugin (adds access to the Internet using Google Custom Search Engine and Wikipedia API)
 - Added voice output plugin (adds voice synthesis using Microsoft Azure)
 
-## 0.9.4 (2023.04.15)
+0.9.4 (2023.04.15)
 
 - Added plugins support
 
-## 0.9.3 (2023.04.14)
+0.9.3 (2023.04.14)
 
 - Packed into PyPI package
 
-## 0.9.2 (2023.04.12)
+0.9.2 (2023.04.12)
 
 - Added theme color settings
 - Small UI fixes
 
-## 0.9.1 (2023.04.11)
+0.9.1 (2023.04.11)
 
 - Added organization key configuration (by @kaneda2004, PR#1)
 - Added config versions patching
 
-## 0.9.0 (2023.04.09)
+0.9.0 (2023.04.09)
 
-- Initial release
+- Initial release
```

### Comparing `pygpt_net-2.1.9/LICENSE` & `pygpt_net-2.2.0/LICENSE`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/README.md` & `pygpt_net-2.2.0/README.md`

 * *Files 5% similar despite different names*

```diff
@@ -1,12 +1,12 @@
 # PyGPT - Desktop AI Assistant
 
 [![pygpt](https://snapcraft.io/pygpt/badge.svg)](https://snapcraft.io/pygpt)
 
-Release: **2.1.9** | build: **2024.03.04** | Python: **>=3.10, <3.12**
+Release: **2.2.0** | build: **2024.04.28** | Python: **>=3.10, <3.12**
 
 Official website: https://pygpt.net | Documentation: https://pygpt.readthedocs.io
 
 Snap Store: https://snapcraft.io/pygpt | PyPi: https://pypi.org/project/pygpt-net
 
 Compiled version for Linux (`tar.gz`) and Windows 10/11 (`msi`) 64-bit: https://pygpt.net/#download
 
@@ -18,21 +18,21 @@
 
 For audio interactions, **PyGPT** includes speech synthesis using the `Microsoft Azure`, `Google`, `Eleven Labs` and `OpenAI` Text-To-Speech services. Additionally, it features speech recognition capabilities provided by `OpenAI Whisper`, `Google` and `Bing` enabling the application to understand spoken commands and transcribe audio inputs into text. It features context memory with save and load functionality, enabling users to resume interactions from predefined points in the conversation. Prompt creation and management are streamlined through an intuitive preset system.
 
 **PyGPT**'s functionality extends through plugin support, allowing for custom enhancements. Its multi-modal capabilities make it an adaptable tool for a range of AI-assisted operations, such as text-based interactions, system automation, daily assisting, vision applications, natural language processing, code generation and image creation.
 
 Multiple operation modes are included, such as chat, text completion, assistant, vision, Langchain, Chat with files (via `Llama-index`), commands execution, external API calls and image generation, making **PyGPT** a multi-tool for many AI-driven tasks.
 
-**Video** (mp4, version `2.0.153`, build `2024-02-18`):
+**Video** (mp4, version `2.2.0`, build `2024-04-28`):
 
-https://github.com/szczyglis-dev/py-gpt/assets/61396542/996db435-fea3-4836-85b5-4f93505df6c4
+https://github.com/szczyglis-dev/py-gpt/assets/61396542/7140ded4-1639-4c12-ac33-201b68b99a16
 
-**Screenshot** (version `2.0.153` build `2024-02-18`):
+**Screenshot** (version `2.2.0`, build `2024-04-28`):
 
-![v2_main](https://github.com/szczyglis-dev/py-gpt/assets/61396542/3a7fe49f-b6c4-4daa-b3ba-521affd5af28)
+![v2_main](https://github.com/szczyglis-dev/py-gpt/assets/61396542/d9f2e67f-919c-4faa-b059-6e2f5efd23e6)
 
 You can download compiled 64-bit versions for Windows and Linux here: https://pygpt.net/#download
 
 ## Features
 
 - Desktop AI Assistant for `Linux`, `Windows` and `Mac`, written in Python.
 - Works similarly to `ChatGPT`, but locally (on a desktop computer).
@@ -60,14 +60,15 @@
 - Supports multiple languages.
 - Enables the use of all the powerful features of `GPT-4`, `GPT-4V`, and `GPT-3.5`.
 - Requires no previous knowledge of using AI models.
 - Simplifies image generation using `DALL-E 3` and `DALL-E 2`.
 - Possesses the potential to support future OpenAI models.
 - Fully configurable.
 - Themes support.
+- Real-time code syntax highlighting.
 - Plugins support.
 - Built-in token usage calculation.
 - It's open source; source code is available on `GitHub`.
 - Utilizes the user's own API key.
 
 The application is free, open-source, and runs on PCs with `Linux`, `Windows 10`, `Windows 11` and `Mac`. 
 Full Python source code is available on `GitHub`.
@@ -257,14 +258,35 @@
 https://learn.microsoft.com/en-us/cpp/windows/latest-supported-vc-redist
 
 The libraries from this environment are used by `PySide6` - one of the base packages used by PyGPT. 
 The absence of the installed libraries may cause display errors or completely prevent the application from running.
 
 It may also be necessary to add the path `C:\path\to\venv\Lib\python3.x\site-packages\PySide6` to the `PATH` variable.
 
+**WebEngine/Chromium renderer and OpenGL problems**
+
+If you have a problems with `WebEngine / Chromium` renderer you can force the legacy mode by launching the app with command line arguments:
+
+``` ini
+python3 run.py --legacy=1
+```
+
+and to force disable OpenGL hardware acceleration:
+
+``` ini
+python3 run.py --disable-gpu=1
+```
+
+You can also manualy enable legacy mode by editing config file - open the `%WORKDIR%/config.json` config file in editor and set the following options:
+
+``` json
+"render.engine": "legacy",
+"render.open_gl": false,
+```
+
 ## Other requirements
 
 For operation, an internet connection is needed (for API connectivity), a registered OpenAI account, 
 and an active API key that must be input into the program.
 
 ## Debugging and logging
 
@@ -281,111 +303,125 @@
 
 ``` ini
 Config -> Settings...
 ```
 
 and then paste the API key into the `OpenAI API KEY` field.
 
-## Overview
-
-![v2_settings](https://github.com/szczyglis-dev/py-gpt/assets/61396542/21d7e43d-858f-4bc7-a06f-ec848338e7a9)
+![v2_settings](https://github.com/szczyglis-dev/py-gpt/assets/61396542/43622c58-6cdb-4ed8-b47d-47729763db04)
 
 The API key can be obtained by registering on the OpenAI website:
 
 <https://platform.openai.com>
 
 Your API keys will be available here:
 
 <https://platform.openai.com/account/api-keys>
 
 **Note:** The ability to use models within the application depends on the API user's access to a given model!
 
-# Chat, completion, assistants and vision (GPT-4, GPT-3.5, Langchain)
+# Working modes
 
 ## Chat
 
 **+ inline Vision and Image generation**
 
 This mode in **PyGPT** mirrors `ChatGPT`, allowing you to chat with models such as `GPT-4`, `GPT-4 Turbo` and `GPT-3.5`. It's easy to switch models whenever you want. It works by using the `ChatCompletion API`.
 
 The main part of the interface is a chat window where conversations appear. Right below that is where you type your messages. On the right side of the screen, there's a section to set up or change your system prompts. You can also save these setups as presets to quickly switch between different models or tasks.
 
 Above where you type your messages, the interface shows you the number of tokens your message will use up as you type it – this helps to keep track of usage. There's also a feature to upload files in this area. Go to the `Files` tab to manage your uploads or add attachments to send to the OpenAI API (but this makes effect only in `Assisant` and `Vision` modes).
 
-![v2_mode_chat](https://github.com/szczyglis-dev/py-gpt/assets/61396542/931a07f3-9fd5-40b3-a446-1540d2587899)
+![v2_mode_chat](https://github.com/szczyglis-dev/py-gpt/assets/61396542/f573ee22-8539-4259-b180-f97e54bc0d94)
 
 **Vision:** If you want to send photos or image from camera to analysis you must enable plugin **GPT-4 Vision Inline** in the Plugins menu.
 Plugin allows you to send photos or image from camera to analysis in any Chat mode:
 
 ![v3_vision_plugins](https://github.com/szczyglis-dev/py-gpt/assets/61396542/104b0a80-7cf8-4a02-aa74-27e89ad2e409)
 
 With this plugin, you can capture an image with your camera or attach an image and send it for analysis to discuss the photograph:
 
-![v3_vision_chat](https://github.com/szczyglis-dev/py-gpt/assets/61396542/93d3928c-f86a-4313-b645-6277c26a39b9)
+![v3_vision_chat](https://github.com/szczyglis-dev/py-gpt/assets/61396542/3fbd99e2-5bbf-4bd4-81d8-fd4d7db9d8eb)
 
 **Image generation:** If you want to generate images (using DALL-E) directly in chat you must enable plugin **DALL-E 3 Inline** in the Plugins menu.
 Plugin allows you to generate images in Chat mode:
 
-![v3_img_chat](https://github.com/szczyglis-dev/py-gpt/assets/61396542/52715d3e-725b-4e8c-b62d-669bd5da595d)
+![v3_img_chat](https://github.com/szczyglis-dev/py-gpt/assets/61396542/c288a4b3-c932-4201-b5a3-8452aea49817)
 
 ## Completion
 
 This mode provides in-depth access to a broader range of capabilities offered by Large Language Models (LLMs). While it maintains a chat-like interface for user interaction, it introduces additional settings and functional richness beyond typical chat exchanges. Users can leverage this mode to prompt models for complex text completions, role-play dialogues between different characters, perform text analysis, and execute a variety of other sophisticated tasks. It supports any model provided by the OpenAI API as well as other models through `Langchain`.
 
 Similar to chat mode, on the right-hand side of the interface, there are convenient presets. These allow you to fine-tune instructions and swiftly transition between varied configurations and pre-made prompt templates.
 
 Additionally, this mode offers options for labeling the AI and the user, making it possible to simulate dialogues between specific characters - for example, you could create a conversation between Batman and the Joker, as predefined in the prompt. This feature presents a range of creative possibilities for setting up different conversational scenarios in an engaging and exploratory manner.
 
-![v2_mode_completion](https://github.com/szczyglis-dev/py-gpt/assets/61396542/56e45c45-067c-4d63-9f41-f26dbbf08660)
+![v2_mode_completion](https://github.com/szczyglis-dev/py-gpt/assets/61396542/045ecb99-edcb-4eb1-9ff0-0b493dee0e27)
 
 From version `2.0.107` the `davinci` models are deprecated and has been replaced with `gpt-3.5-turbo-instruct` model in Completion mode.
 
 ## Assistants
 
 This mode uses the new OpenAI's **Assistants API**.
 
 This mode expands on the basic chat functionality by including additional external tools like a `Code Interpreter` for executing code, `Retrieval Files` for accessing files, and custom `Functions` for enhanced interaction and integration with other APIs or services. In this mode, you can easily upload and download files. **PyGPT** streamlines file management, enabling you to quickly upload documents and manage files created by the model.
 
 Setting up new assistants is simple - a single click is all it takes, and they instantly sync with the `OpenAI API`. Importing assistants you've previously created with OpenAI into **PyGPT** is also a seamless process.
 
-![v2_mode_assistant](https://github.com/szczyglis-dev/py-gpt/assets/61396542/e0c2c248-82c4-41d2-a0f5-5fa595911745)
+![v2_mode_assistant](https://github.com/szczyglis-dev/py-gpt/assets/61396542/5c3b5604-928d-4f29-940a-21cc83c8dc34)
 
 In Assistant mode you are allowed to storage your files (per Assistant) and manage them easily from app:
 
-![v2_mode_assistant_upload](https://github.com/szczyglis-dev/py-gpt/assets/61396542/0a25c34d-e989-4d00-b049-6acf8c271606)
+![v2_mode_assistant_upload](https://github.com/szczyglis-dev/py-gpt/assets/61396542/b2c835ea-2816-4b85-bb6f-e08874e758f7)
 
 Please note that token usage calculation is unavailable in this mode. Nonetheless, file (attachment) 
 uploads are supported. Simply navigate to the `Files` tab to effortlessly manage files and attachments which 
 can be sent to the OpenAI API.
 
+### Vector stores (via Assistants API)
+
+Assistant mode supports the use of external vector databases offered by the OpenAI API. This feature allows you to store your files in a database and then search them using the Assistant's API. Each assistant can be linked to one vector database—if a database is linked, all files uploaded in this mode will be stored in the linked vector database. If an assistant does not have a linked vector database, a temporary database is automatically created during the file upload, which is accessible only in the current thread. Files from temporary databases are automatically deleted after 7 days.
+
+To enable the use of vector stores, enable the `Chat with files` checkbox in the Assistant settings. This enables the `File search` tool in Assistants API.
+
+To manage external vector databases, click the DB icon next to the vector database selection list in the Assistant creation and editing window. In this management window, you can create a new database, edit an existing one, or import a list of all existing databases from the OpenAI server:
+
+![v2_assistant_stores](https://github.com/szczyglis-dev/py-gpt/assets/61396542/2f605326-5bf5-4c82-8dfd-cb1c0edf6724)
+
+You can define, using `Expire days`, how long files should be automatically kept in the database before deletion (as storing files on OpenAI incurs costs). If the value is set to 0, files will not be automatically deleted.
+
+The vector database in use will be displayed in the list of uploaded files, on the field to the right—if a file is stored in a database, the name of the database will be displayed there; if not, information will be shown indicating that the file is only accessible within the thread:
+
+![v2_assistant_stores_upload](https://github.com/szczyglis-dev/py-gpt/assets/61396542/8f13c2eb-f961-4eae-b08b-0b4937f06ca9)
+
 ## Vision (GPT-4 Vision)
 
 This mode enables image analysis using the `GPT-4 Vision` model. Functioning much like the chat mode, 
 it also allows you to upload images or provide URLs to images. The vision feature can analyze both local 
 images and those found online. 
 
-**From version 2.0.68** - Vision is integrated into any chat mode via plugin `GPT-4 Vision (inline)`. Just enable the plugin and use Vision in standard modes.
+Vision is integrated into any chat mode via plugin `GPT-4 Vision (inline)`. Just enable the plugin and use Vision in standard modes.
 
-**From version 2.0.14** - Vision mode also includes real-time video capture from camera. To enable capture check the option `Camera` on the right-bottom corner. It will enable real-time capturing from your camera. To capture image from camera and append it to chat just click on video at left side. You can also enable `Auto capture` - image will be captured and appended to chat message every time you send message.
+Vision mode also includes real-time video capture from camera. To enable capture check the option `Camera` on the right-bottom corner. It will enable real-time capturing from your camera. To capture image from camera and append it to chat just click on video at left side. You can also enable `Auto capture` - image will be captured and appended to chat message every time you send message.
 
 ![v2_capture_enable](https://github.com/szczyglis-dev/py-gpt/assets/61396542/c40ce0b4-57c8-4643-9982-25d15e68377e)
 
 **1) Video camera real-time image capture**
 
-![v2_capture1](https://github.com/szczyglis-dev/py-gpt/assets/61396542/d6d26a81-c559-470f-ba28-8d2d836dc138)
+![v2_capture1](https://github.com/szczyglis-dev/py-gpt/assets/61396542/477bb7fa-4639-42bb-8466-937e88e4a835)
 
-![v3_vision_chat](https://github.com/szczyglis-dev/py-gpt/assets/61396542/93d3928c-f86a-4313-b645-6277c26a39b9)
+![v3_vision_chat](https://github.com/szczyglis-dev/py-gpt/assets/61396542/3fbd99e2-5bbf-4bd4-81d8-fd4d7db9d8eb)
 
 **2) you can also provide an image URL**
 
-![v2_mode_vision](https://github.com/szczyglis-dev/py-gpt/assets/61396542/6c8bbec7-6f67-46d9-bb5f-e833c015b39c)
+![v2_mode_vision](https://github.com/szczyglis-dev/py-gpt/assets/61396542/d1b68225-bf7f-4aa5-9562-b973211b57d7)
 
 **3) or you can just upload your local images or use the inline Vision in the standard chat mode:**
 
-![v2_mode_vision_upload](https://github.com/szczyglis-dev/py-gpt/assets/61396542/68d26c32-9c7e-4068-b7d2-6c00e27a1d80)
+![v2_mode_vision_upload](https://github.com/szczyglis-dev/py-gpt/assets/61396542/7885d7d0-072e-4053-a81b-6374711fd348)
 
 **Tip:** When using `Vision (inline)` by utilizing a plugin in standard mode, such as `Chat` (not `Vision` mode), the `+ Vision` special checkbox will appear at the bottom of the Chat window. It will be automatically enabled any time you provide content for analysis (like an uploaded photo). When the checkbox is enabled, the vision model is used. If you wish to exit the vision model after image analysis, simply uncheck the checkbox. It will activate again automatically when the next image content for analysis is provided.
 
 ## Langchain
 
 This mode enables you to work with models that are supported by `Langchain`. The Langchain support is integrated 
 into the application, allowing you to interact with any LLM by simply supplying a configuration 
@@ -399,28 +435,28 @@
 - Azure OpenAI
 - HuggingFace
 - Anthropic
 - Llama 2
 - Ollama
 ```
 
-![v2_mode_langchain](https://github.com/szczyglis-dev/py-gpt/assets/61396542/85e95c38-86db-4c75-b994-ba42521c278b)
+![v2_mode_langchain](https://github.com/szczyglis-dev/py-gpt/assets/61396542/0471b6f9-7953-42cc-92bd-007f2c2e59d0)
 
 You have the ability to add custom model wrappers for models that are not available by default in **PyGPT**. 
 To integrate a new model, you can create your own wrapper and register it with the application. 
 Detailed instructions for this process are provided in the section titled `Managing models / Adding models via Langchain`.
 
 ##  Chat with files (Llama-index)
 
 This mode enables chat interaction with your documents and entire context history through conversation. 
 It seamlessly incorporates `Llama-index` into the chat interface, allowing for immediate querying of your indexed documents.
 
 **Querying single files**
 
-From version `2.1.8`, you can also query individual files "on the fly" using the `query_file` command from the `Files I/O` plugin. This allows you to query any file by simply asking a question about that file. A temporary index will be created in memory for the file being queried, and an answer will be returned from it. From version `2.1.9` similar command is available for querying web and external content: `Directly query web content with Llama-index`.
+You can also query individual files "on the fly" using the `query_file` command from the `Files I/O` plugin. This allows you to query any file by simply asking a question about that file. A temporary index will be created in memory for the file being queried, and an answer will be returned from it. From version `2.1.9` similar command is available for querying web and external content: `Directly query web content with Llama-index`.
 
 For example:
 
 If you have a file: `data/my_cars.txt` with content `My car is red.`
 
 You can ask for: `Query the file my_cars.txt about what color my car is.`
 
@@ -444,15 +480,15 @@
 
 To index your files, simply copy or upload them  into the `data` directory and initiate indexing (embedding) by clicking the `Index all` button, or right-click on a file and select `Index...`. Additionally, you have the option to utilize data from indexed files in any Chat mode by activating the `Chat with files (Llama-index, inline)` plugin.
 
 ![v2_idx1](https://github.com/szczyglis-dev/py-gpt/assets/61396542/c3dfbc89-cbfe-4ae3-b7e7-821401d755cd)
 
 After the file(s) are indexed (embedded in vector store), you can use context from them in chat mode:
 
-![v2_idx2](https://github.com/szczyglis-dev/py-gpt/assets/61396542/29c89de9-ba3c-49ca-97b3-e6397fd648ad)
+![v2_idx2](https://github.com/szczyglis-dev/py-gpt/assets/61396542/70c9ab66-82d9-4f61-81ed-268743bfa6b4)
 
 Built-in file loaders: 
 
 **Files:**
 
 - CSV files (csv)
 - Epub files (epub)
@@ -487,18 +523,18 @@
 - Twitter/X posts
 - Webpages (crawling any webpage content)
 - YouTube (transcriptions)
 
 You can configure data loaders in `Settings / Llama-index / Data Loaders` by providing list of keyword arguments for specified loaders.
 You can also develop and provide your own custom loader and register it within the application.
 
-**From version `2.0.100` Llama-index is also integrated with context database - you can use data from database (your context history) as additional context in discussion. 
-Options for indexing existing context history or enabling real-time indexing new ones (from database) are available in `Settings / Llama-index` section.**
+Llama-index is also integrated with context database - you can use data from database (your context history) as additional context in discussion. 
+Options for indexing existing context history or enabling real-time indexing new ones (from database) are available in `Settings / Llama-index` section.
 
-**WARNING:** remember that when indexing content, API calls to the embedding model (`text-embedding-ada-002`) are used. Each indexing consumes additional tokens. Always control the number of tokens used on the OpenAI page.
+**WARNING:** remember that when indexing content, API calls to the embedding model are used. Each indexing consumes additional tokens. Always control the number of tokens used on the OpenAI page.
 
 **Tip:** when using `Chat with files` you are using additional context from db data and files indexed from `data` directory, not the files sending via `Attachments` tab. 
 Attachments tab in `Chat with files` mode can be used to provide images to `Vision (inline)` plugin only.
 
 **Token limit:** When you use `Chat with files` in non-query mode, Llama-index adds extra context to the system prompt. If you use a plugins (which also adds more instructions to system prompt), you might go over the maximum number of tokens allowed. If you get a warning that says you've used too many tokens, turn off plugins you're not using or turn off the "Execute commands" option to reduce the number of tokens used by the system prompt.
 
 **Available vector stores** (provided by `Llama-index`):
@@ -794,15 +830,15 @@
 
 # Files and attachments
 
 ## Input attachments (upload)
 
 **PyGPT** makes it simple for users to upload files to the server and send them to the model for tasks like analysis, similar to attaching files in `ChatGPT`. There's a separate `Files` tab next to the text input area specifically for managing file uploads. Users can opt to have files automatically deleted after each upload or keep them on the list for repeated use.
 
-![v2_file_input](https://github.com/szczyglis-dev/py-gpt/assets/61396542/00263f3d-ec62-4daa-85b3-5a5ce178dce0)
+![v2_file_input](https://github.com/szczyglis-dev/py-gpt/assets/61396542/bd3d9840-2bc4-4ba8-a603-69724f9eb620)
 
 The attachment feature is available in both the `Assistant` and `Vision` modes at default.
 In `Assistant` mode, you can send documents and files to analyze, while in `Vision` mode, you can send images.
 In other modes, you can enable attachments by activating the `Vision (inline)` plugin (for providing images only).
 
 ## Files (download, code generation)
 
@@ -886,20 +922,20 @@
 
 ## DALL-E 3
 
 **PyGPT** enables quick and easy image creation with `DALL-E 3`. 
 The older model version, `DALL-E 2`, is also accessible. Generating images is akin to a chat conversation  -  a user's prompt triggers the generation, followed by downloading, saving to the computer, 
 and displaying the image onscreen. You can send raw prompt to `DALL-E` in `Image generation` mode or ask the model for the best prompt.
 
-**From version 2.0.68 (released 2023-12-31) image generation using DALL-E is available in every mode via plugin `DALL-E 3 Image Generation (inline)`. Just ask any model, in any mode, like e.g. GPT-4 to generate an image and it will do it inline, without need to mode change.**
+Image generation using DALL-E is available in every mode via plugin `DALL-E 3 Image Generation (inline)`. Just ask any model, in any mode, like e.g. GPT-4 to generate an image and it will do it inline, without need to mode change.
 
 If you want to generate images (using DALL-E) directly in chat you must enable plugin **DALL-E 3 Inline** in the Plugins menu.
 Plugin allows you to generate images in Chat mode:
 
-![v3_img_chat](https://github.com/szczyglis-dev/py-gpt/assets/61396542/52715d3e-725b-4e8c-b62d-669bd5da595d)
+![v3_img_chat](https://github.com/szczyglis-dev/py-gpt/assets/61396542/c288a4b3-c932-4201-b5a3-8452aea49817)
 
 ## Multiple variants
 
 You can generate up to **4 different variants** (DALL-E 2) for a given prompt in one session. DALL-E 3 allows one image.
 To select the desired number of variants to create, use the slider located in the right-hand corner at 
 the bottom of the screen. This replaces the conversation temperature slider when you switch to image generation mode.
 
@@ -1474,15 +1510,15 @@
 *Default:* `3`
 
 **WARNING**: Setting this option to `0` activates an **infinity loop** which can generate a large number of requests and cause very high token consumption, so use this option with caution!
 
 - `Prompts` *prompts*
 
 Editable list of prompts used to instruct how to handle autonomous mode, you can create as many prompts as you want. 
-First active prompt on list will be used to handle autonomous mode.
+First active prompt on list will be used to handle autonomous mode. **INFO:** At least one active prompt is required!
 
 - `Auto-stop after goal is reached` *auto_stop*
 
 If enabled, plugin will stop after goal is reached." *Default:* `True`
 
 - `Reverse roles between iterations` *reverse_roles*
 
@@ -1493,43 +1529,47 @@
 
 ## Chat with files (Llama-index, inline)
 
 Plugin integrates `Llama-index` storage in any chat and provides additional knowledge into context.
 
 - `Ask Llama-index first` *ask_llama_first*
 
-When enabled, then `Llama-index` will be asked first, and response will be used as additional knowledge in prompt. When disabled, then `Llama-index` will be asked only when needed.
+When enabled, then `Llama-index` will be asked first, and response will be used as additional knowledge in prompt. When disabled, then `Llama-index` will be asked only when needed. **INFO: Disabled in autonomous mode (via plugin)!** *Default:* `False`
 
 - `Auto-prepare question before asking Llama-index first` *prepare_question*
 
-When enabled, then question will be prepared before asking Llama-index first to create best query.
+When enabled, then question will be prepared before asking Llama-index first to create best query. *Default:* `False`
 
 - `Model for question preparation` *model_prepare_question*
 
-Model used to prepare question before asking Llama-index, default: gpt-3.5-turbo
+Model used to prepare question before asking Llama-index. *Default:* `gpt-3.5-turbo`
 
 - `Max output tokens for question preparation` *prepare_question_max_tokens*
 
-Max tokens in output when preparing question before asking Llama-index
+Max tokens in output when preparing question before asking Llama-index. *Default:* `500`
 
 - `Prompt for question preparation` *syntax_prepare_question*
 
-System prompt for question preparation
+System prompt for question preparation.
 
 - `Max characters in question` *max_question_chars*
 
-Max characters in question when querying Llama-index, 0 = no limit, default: 1000
+Max characters in question when querying Llama-index, 0 = no limit. *Default:* `1000`
+
+- `Append metadata to context` *append_meta*
+
+If enabled, then metadata from Llama-index will be appended to additional context. *Default:* `False`
 
 - `Model` *model_query*
 
-Model used for querying `Llama-index`, default: `gpt-3.5-turbo`
+Model used for querying `Llama-index`. *Default:* `gpt-3.5-turbo`
 
 - `Indexes IDs` *idx*
 
-Indexes to use, default: base, if you want to use multiple indexes at once then separate them by comma.
+Indexes to use. If you want to use multiple indexes at once then separate them by comma. *Default:* `base`
 
 
 ## Command: API calls
 
 **PyGPT** lets you connect the model to the external services using custom defined API calls.
 
 To activate this feature, turn on the `Command: API calls` plugin found in the `Plugins` menu.
@@ -1570,67 +1610,93 @@
 
 In the `POST JSON` request you must provide JSON object template to be send, using `%param%` placeholders in the JSON object to be replaced with the model.
 
 You can also provide any required credentials, like Authorization headers, API keys, tokens, etc. using the `headers` field - you can provide a JSON object here with a dictionary `key => value` - provided JSON object will be converted to headers dictonary and send with the request.
 
 - `Disable SSL verify` *disable_ssl*
 
-Disables SSL verification when making requests
+Disables SSL verification when making requests. *Default:* `False`
 
 - `Timeout` *timeout*
 
-Connection timeout (seconds)
+Connection timeout (seconds). *Default:* `5`
 
 - `User agent` *user_agent*
 
-User agent to use when making requests, default: `Mozilla/5.0`
+User agent to use when making requests. *Default:* `Mozilla/5.0`
 
 
 ## Command: Code Interpreter
 
 ### Executing Code
 
 The plugin operates similarly to the `Code Interpreter` in `ChatGPT`, with the key difference that it works locally on the user's system. It allows for the execution of any Python code on the computer that the model may generate. When combined with the `Command: Files I/O` plugin, it facilitates running code from files saved in the `data` directory. You can also prepare your own code files and enable the model to use them or add your own plugin for this purpose. You can execute commands and code on the host machine or in Docker container.
 
+**Code interpreter:** a real-time Python code interpreter is built-in. Click the `<>` icon to open the interpreter window. Both the input and output of the interpreter are connected to the plugin. Any output generated by the executed code will be displayed in the interpreter. Additionally, you can request the model to retrieve contents from the interpreter window output.
+
+![v2_python](https://github.com/szczyglis-dev/py-gpt/assets/61396542/793e554c-7619-402a-8370-ab89c7464fec)
+
 ### Executing system commands
 
 Another feature is the ability to execute system commands and return their results. With this functionality, the plugin can run any system command, retrieve the output, and then feed the result back to the model. When used with other features, this provides extensive integration capabilities with the system.
 
+
+
 **Tip:** always remember to enable the `Execute commands` option to allow execute commands from the plugins.
 
 
 **Options:**
 
 - `Python command template` *python_cmd_tpl*
 
 Python command template (use {filename} as path to file placeholder). *Default:* `python3 {filename}`
 
-- `Enable: Python Code Generate and Execute` *cmd_code_execute*
+- `Enable: code_execute` *cmd.code_execute*
+
+Allows `code_execute` command execution. If enabled, provides Python code execution (generate and execute from file). *Default:* `True`
+
+- `Enable: code_execute_all` *cmd.code_execute_all*
 
-Allows Python code execution (generate and execute from file). *Default:* `True`
+Allows `code_execute_all` command execution. If enabled, provides execution of all the Python code in interpreter window. *Default:* `True`
 
-- `Enable: Python Code Execute (File)` *cmd_code_execute_file*
+- `Enable: code_execute_file` *cmd.code_execute_file*
 
-Allows Python code execution from existing file. *Default:* `True`
+Allows `code_execute_file` command execution. If enabled, provides Python code execution from existing .py file. *Default:* `True`
  
-- `Enable: System Command Execute` *cmd_sys_exec*
+- `Enable: sys_exec` *cmd.sys_exec*
+
+Allows `sys_exec` command execution. If enabled, provides system commands execution. *Default:* `True`
+
+- `Enable: get_python_output` *cmd.get_python_output*
+
+Allows `get_python_output` command execution. If enabled, it allows retrieval of the output from the Python code interpreter window. *Default:* `True`
+
+- `Enable: get_python_input` *cmd.get_python_input*
+
+Allows `get_python_input` command execution. If enabled, it allows retrieval all input code (from edit section) from the Python code interpreter window. *Default:* `True`
+
+- `Enable: clear_python_output` *cmd.clear_python_output*
 
-Allows system commands execution. *Default:* `True`
+Allows `clear_python_output` command execution. If enabled, it allows clear the output of the Python code interpreter window. *Default:* `True`
 
 - `Sandbox (docker container)` *sandbox_docker*
 
 Execute commands in sandbox (docker container). Docker must be installed and running. *Default:* `False`
 
 - `Docker image` *sandbox_docker_image*
 
 Docker image to use for sandbox *Default:* `python:3.8-alpine`
 
 - `Auto-append CWD to sys_exec` *auto_cwd*
 
-Automatically append current working directory to sys_exec command. *Default:* `True`
+Automatically append current working directory to `sys_exec` command. *Default:* `True`
+
+- `Connect to the Python code interpreter window` *attach_output*
+
+Automatically attach code input/output to the Python code interpreter window. *Default:* `True`
 
 
 ## Command: Custom Commands
 
 With the `Custom Commands` plugin, you can integrate **PyGPT** with your operating system and scripts or applications. You can define an unlimited number of custom commands and instruct GPT on when and how to execute them. Configuration is straightforward, and **PyGPT** includes a simple tutorial command for testing and learning how it works:
 
 ![v2_custom_cmd](https://github.com/szczyglis-dev/py-gpt/assets/61396542/b30b8724-9ca1-44b1-abc7-78241588e1f6)
@@ -1685,15 +1751,15 @@
 
 **Example tutorial command**
 
 **PyGPT** provides simple tutorial command to show how it works, to run it just ask GPT for execute `tutorial test command` and it will show you how it works:
 
 ```> please execute tutorial test command```
 
-![v2_custom_cmd_example](https://github.com/szczyglis-dev/py-gpt/assets/61396542/64a95a9c-634c-4d71-ad7d-4eabe8b2509b)
+![v2_custom_cmd_example](https://github.com/szczyglis-dev/py-gpt/assets/61396542/97cbc5b9-0dd9-487e-9182-d9873dea42ab)
 
 ## Command: Files I/O
 
 The plugin allows for file management within the local filesystem. It enables the model to create, read, write and query files located in the `data` directory, which can be found in the user's work directory. With this plugin, the AI can also generate Python code files and thereafter execute that code within the user's system.
 
 Plugin capabilities include:
 
@@ -1706,128 +1772,142 @@
 - Creating directories
 - Downloading files
 - Copying files and directories
 - Moving (renaming) files and directories
 - Reading file info
 - Indexing files and directories using Llama-index
 - Querying files using Llama-index
+- Searching for files and directories
 
 If a file being created (with the same name) already exists, a prefix including the date and time is added to the file name.
 
 **Options:**
 
-- `Enable: Send (upload) file as attachment` *cmd_send_file*
-
-Allows `cmd_send_file` command execution. *Default:* `True`
+**General**
 
-- `Enable: Read file` *cmd_read_file*
+- `Enable: send (upload) file as attachment` *cmd.send_file*
 
-Allows `read_file` command execution. *Default:* `True`
+Allows `cmd.send_file` command execution. *Default:* `True`
 
-- `Enable: Query file with Llama-index` *cmd_query_file*
+- `Enable: read file` *cmd.read_file*
 
-Allows `query_file` command execution  (temporary index, on the fly) *Default:* `True`
+Allows `read_file` command execution. *Default:* `True`
 
-- `Enable: Append to file` *cmd_append_file*
+- `Enable: append to file` *cmd.append_file*
 
-Allows `append_file` command execution. *Default:* `True`
+Allows `append_file` command execution. Text-based files only (plain text, JSON, CSV, etc.) *Default:* `True`
 
-- `Enable: Save file` *cmd_save_file*
+- `Enable: save file` *cmd.save_file*
 
-Allows `save_file` command execution. *Default:* `True`
+Allows `save_file` command execution. Text-based files only (plain text, JSON, CSV, etc.) *Default:* `True`
 
-- `Enable: Delete file` *cmd_delete_file*
+- `Enable: delete file` *cmd.delete_file*
 
 Allows `delete_file` command execution. *Default:* `True`
 
-- `Enable: List files (ls)` *cmd_list_files*
+- `Enable: list files (ls)` *cmd.list_files*
 
 Allows `list_dir` command execution. *Default:* `True`
 
-- `Enable: List files in dirs in directory (ls)` *cmd_list_dir*
+- `Enable: list files in dirs in directory (ls)` *cmd.list_dir*
 
 Allows `mkdir` command execution. *Default:* `True`
 
-- `Enable: Downloading files` *cmd_download_file*
+- `Enable: downloading files` *cmd.download_file*
 
 Allows `download_file` command execution. *Default:* `True`
 
-- `Enable: Removing directories` *cmd_rmdir*
+- `Enable: removing directories` *cmd.rmdir*
 
 Allows `rmdir` command execution. *Default:* `True`
 
-- `Enable: Copying files` *cmd_copy_file*
+- `Enable: copying files` *cmd.copy_file*
 
 Allows `copy_file` command execution. *Default:* `True`
 
-- `Enable: Copying directories (recursive)` *cmd_copy_dir*
+- `Enable: copying directories (recursive)` *cmd.copy_dir*
 
 Allows `copy_dir` command execution. *Default:* `True`
 
-- `Enable: Move files and directories (rename)` *cmd_move*
+- `Enable: move files and directories (rename)` *cmd.move*
 
 Allows `move` command execution. *Default:* `True`
 
-- `Enable: Check if path is directory` *cmd_is_dir*
+- `Enable: check if path is directory` *cmd.is_dir*
 
 Allows `is_dir` command execution. *Default:* `True`
 
-- `Enable: Check if path is file` *cmd_is_file*
+- `Enable: check if path is file` *cmd.is_file*
 
 Allows `is_file` command execution. *Default:* `True`
 
-- `Enable: Check if file or directory exists` *cmd_file_exists*
+- `Enable: check if file or directory exists` *cmd.file_exists*
 
 Allows `file_exists` command execution. *Default:* `True`
 
-- `Enable: Get file size` *cmd_file_size*
+- `Enable: get file size` *cmd.file_size*
 
 Allows `file_size` command execution. *Default:* `True`
 
-- `Enable: Get file info` *cmd_file_info*
+- `Enable: get file info` *cmd.file_info*
 
 Allows `file_info` command execution. *Default:* `True`
 
-- `Enable: Get current working directory` *cmd_cwd*
+- `Enable: find file or directory` *cmd.find*
+
+Allows `find` command execution. *Default:* `True`
+
+- `Enable: get current working directory` *cmd.cwd*
 
 Allows `cwd` command execution. *Default:* `True`
 
-- `Enable: indexing files` *cmd_file_index*
+- `Use data loaders` *use_loaders*
 
-If enabled, model will be able to index file or directory using Llama-index (`file_index` command). *Default:* `True`
+Use data loaders from Llama-index for file reading (`read_file` command). *Default:* `True`
 
-- `Index to use when indexing files` *idx*
+**Indexing**
 
-ID of index to use for files indexing. *Default:* `base`
+- `Enable: quick query the file with Llama-index` *cmd.query_file*
 
-- `Use data loaders` *use_loaders*
+Allows `query_file` command execution (in-memory index). If enabled, model will be able to quick index file into memory and query it for data (in-memory index) *Default:* `True`
 
-Use data loaders from Llama-index for file reading (`read_file` command). *Default:* `True`
+- `Model for query in-memory index` *model_tmp_query*
+
+Model used for query temporary index for `query_file` command (in-memory index). *Default:* `gpt-3.5-turbo`
+
+- `Enable: indexing files to persistent index` *cmd.file_index*
+
+Allows `file_index` command execution. If enabled, model will be able to index file or directory using Llama-index (persistent index). *Default:* `True`
+
+- `Index to use when indexing files` *idx*
+
+ID of index to use for indexing files (persistent index). *Default:* `base`
 
 - `Auto index reading files` *auto_index*
 
-If enabled, every time file is read, it will be automatically indexed. *Default:* `False`
+If enabled, every time file is read, it will be automatically indexed (persistent index). *Default:* `False`
 
 - `Only index reading files` *only_index*
 
-If enabled, file will be indexed without return its content on file read. *Default:* `False`
+If enabled, file will be indexed without return its content on file read (persistent index). *Default:* `False`
+
 
 ## Command: Web Search
 
 **PyGPT** lets you connect GPT to the internet and carry out web searches in real time as you make queries.
 
 To activate this feature, turn on the `Command: Web Search` plugin found in the `Plugins` menu.
 
 Web searches are provided by `Google Custom Search Engine` and `Microsoft Bing` APIs and can be extended with other search engine providers. 
 
 **Options**
 
 - `Provider` *provider*
 
-Choose the provider. *Default:* `OpenAI TTS`
+Choose the provider. *Default:* `Google`
 
 Available providers:
 
 - Google
 - Microsoft Bing
 
 **Google**
@@ -1868,107 +1948,87 @@
 
 API endpoint for Bing Search API, default: https://api.bing.microsoft.com/v7.0/search
 
 **General options**
 
 - `Number of pages to search` *num_pages*
 
-Number of max pages to search per query
+Number of max pages to search per query. *Default:* `10`
 
-- ` Max content characters` *max_page_content_length*
+- `Max content characters` *max_page_content_length*
 
-Max characters of page content to get (0 = unlimited)
+Max characters of page content to get (0 = unlimited). *Default:* `0`
 
 - `Per-page content chunk size` *chunk_size*
 
-Per-page content chunk size (max characters per chunk)
+Per-page content chunk size (max characters per chunk). *Default:* `20000`
 
 - `Disable SSL verify` *disable_ssl*
 
-Disables SSL verification when crawling web pages
+Disables SSL verification when crawling web pages. *Default:* `False`
 
 - `Timeout` *timeout*
 
-Connection timeout (seconds)
+Connection timeout (seconds). *Default:* `5`
 
 - `User agent` *user_agent*
 
-User agent to use when making requests, default: Mozilla/5.0
+User agent to use when making requests. *Default:* `Mozilla/5.0`.
 
 - `Max result length` *max_result_length*
 
-Max length of summarized result (characters)
+Max length of summarized result (characters). *Default:* `1500`
 
 - `Max summary tokens` *summary_max_tokens*
 
-Max tokens in output when generating summary
+Max tokens in output when generating summary. *Default:* `1500`
 
-- `Enable: "web_search" command` *cmd_web_search*
+- `Enable: search the Web` *cmd.web_search*
 
-If enabled, model will be able to search the Web
+Allows `web_search` command execution. If enabled, model will be able to search the Web. *Default:* `True`
 
-- `Enable: "web_url_open" command` *cmd_web_url_open*
+- `Enable: opening URLs` *cmd.web_url_open*
 
-If enabled, model will be able to open specified URL and summarize content
+Allows `web_url_open` command execution. If enabled, model will be able to open specified URL and summarize content. *Default:* `True`
 
-- `Enable: "web_url_raw" command` *cmd_web_url_raw*
+- `Enable: reading the raw content from URLs` *cmd.web_url_raw*
 
-If enabled, model will be able to open specified URL and get raw content
+Allows `web_url_raw` command execution. If enabled, model will be able to open specified URL and get the raw content. *Default:* `True`
 
-- `Enable: "web_urls" command` *cmd_web_urls*
+- `Enable: getting a list of URLs from search results` *cmd.web_urls*
 
-If enabled, model will be able to search the Web and get founded URLs list
+Allows `web_urls` command execution. If enabled, model will be able to search the Web and get founded URLs list. *Default:* `True`
 
-- `Enable: "web_index" command` *cmd_web_index*
+- `Enable: indexing web and external content` *cmd.web_index*
 
-If enabled, model will be able to index (on the fly) web pages using Llama-index (persistent index)
+Allows `web_index` command execution. If enabled, model will be able to index pages and external content using Llama-index (persistent index). *Default:* `True`
 
-- `Enable: "web_index_query" command - quick query the web content with Llama-index` *cmd_web_index_query*
+- `Enable: quick query the web and external content` *cmd.web_index_query*
 
-If enabled, model will be able to index and query web content using Llama-index (temporary index, on the fly)
+Allows `web_index_query` command execution. If enabled, model will be able to quick index and query web content using Llama-index (in-memory index). *Default:* `True`
 
 - `Auto-index all used URLs using Llama-index` *auto_index*
 
-If enabled, every URL used by the model will be automatically indexed using Llama-index (persistent index)
+If enabled, every URL used by the model will be automatically indexed using Llama-index (persistent index). *Default:* `False`
 
 - `Index to use` *idx*
 
-ID of index to use for web page indexing (persistent index)
+ID of index to use for web page indexing (persistent index). *Default:* `base`
 
 - `Model used for web page summarize` *summary_model*
 
-Model used for web page summarize, default: gpt-3.5-turbo-1106
+Model used for web page summarize. *Default:* `gpt-3.5-turbo-1106`
 
 - `Summarize prompt` *prompt_summarize*
 
-Prompt used for web search results summarize, use {query} as a placeholder for search query
+Prompt used for web search results summarize, use {query} as a placeholder for search query.
 
 - `Summarize prompt (URL open)` *prompt_summarize_url*
 
-Prompt used for specified URL page summarize
-
-- `Syntax: web_search` *syntax_web_search*
-
-Syntax for web_search command
-
-- `Syntax: web_url_open` *syntax_web_url_open*
-
-Syntax for web_url_open command
-
-- `Syntax: web_url_raw` *syntax_web_url_raw*
-
-Syntax for web_url_raw command
-
-- `Syntax: web_urls` *syntax_web_urls*
-
-Syntax for web_urls command
-
-- `Syntax: web_index` *syntax_web_index*
-
-Syntax for web_index command
+Prompt used for specified URL page summarize.
 
 ## Command: Serial port / USB
 
 Provides commands for reading and sending data to USB ports.
 
 **Tip:** in Snap version you must connect the interface first: https://snapcraft.io/docs/serial-port-interface
 
@@ -1995,51 +2055,39 @@
 }
 ```
 
 **Options**
 
 - `USB port` *serial_port*
 
-USB port name, e.g. `/dev/ttyUSB0`, `/dev/ttyACM0`, `COM3` *Default:* `/dev/ttyUSB0`
+USB port name, e.g. `/dev/ttyUSB0`, `/dev/ttyACM0`, `COM3`. *Default:* `/dev/ttyUSB0`
 
 - `Connection speed (baudrate, bps)` *serial_bps*
 
-Port connection speed, in bps *Default:* `9600`
+Port connection speed, in bps. *Default:* `9600`
 
 - `Timeout` *timeout*
 
-Timeout in seconds *Default:* `1`
+Timeout in seconds. *Default:* `1`
 
 - `Sleep` *sleep*
 
 Sleep in seconds after connection *Default:* `2`
 
-- `Enable: Send text commands to USB port` *cmd_serial_send*
-
-Allows `serial_send` command execution" *Default:* `True`
-
-- `Enable: Send raw bytes to USB port` *cmd_serial_send_bytes*
-
-Allows `serial_send_bytes` command execution *Default:* `True`
-
-- `Enable: Read data from USB port` *cmd_serial_read*
+- `Enable: Send text commands to USB port` *cmd.serial_send*
 
-Allows `serial_read` command execution *Default:* `True`
+Allows `serial_send` command execution. *Default:* `True`
 
-- `Syntax: serial_send` *syntax_serial_send*
+- `Enable: Send raw bytes to USB port` *cmd.serial_send_bytes*
 
-Syntax for sending text command to USB port *Default:* `"serial_send": send text command to USB port, params: "command"`
+Allows `serial_send_bytes` command execution. *Default:* `True`
 
-- `Syntax: serial_send_bytes` *syntax_serial_send_bytes*
+- `Enable: Read data from USB port` *cmd.serial_read*
 
-Syntax for sending raw bytes to USB port *Default:* `"serial_send_bytes": send raw bytes to USB port, params: "bytes"`
-
-- `Syntax: serial_read` *syntax_serial_read*
-
-Syntax for reading data from USB port *Default:* `"serial_read": read data from serial port in seconds duration, params: "duration"`
+Allows `serial_read` command execution. *Default:* `True`
 
 ## Context history (calendar, inline)
 
 Provides access to context history database.
 Plugin also provides access to reading and creating day notes.
 
 Examples of use, you can ask e.g. for the following:
@@ -2052,15 +2100,15 @@
 
 ```Get the list of yesterday conversations```
 
 ```Get contents of conversation ID 123```
 
 etc.
 
-From version `2.0.147` it is possible to use `@` ID tags to automatically use summary of previous contexts in current discussion.
+You can also use `@` ID tags to automatically use summary of previous contexts in current discussion.
 To use context from previous discussion with specified ID use following syntax in your query:
 
 ```@123```
 
 Where `123` is the ID of previous context (conversation) in database, example of use:
 
 ```Let's talk about discussion @123```
@@ -2068,41 +2116,41 @@
 
 **Options**
 
 - `Enable: using context @ ID tags` *use_tags*
 
 When enabled, it allows to automatically retrieve context history using @ tags, e.g. use @123 in question to use summary of context with ID 123 as additional context. *Default:* `False`
 
-- `Enable: get date range context list` *cmd_get_ctx_list_in_date_range*
+- `Enable: get date range context list` *cmd.get_ctx_list_in_date_range*
 
-When enabled, it allows getting the list of context history (previous conversations). *Default:* `True`
+Allows `get_ctx_list_in_date_range` command execution. If enabled, it allows getting the list of context history (previous conversations). *Default:* `True
 
-- `Enable: get context content by ID` *cmd_get_ctx_content_by_id*
+- `Enable: get context content by ID` *cmd.get_ctx_content_by_id*
 
-When enabled, it allows getting summarized content of context with defined ID. *Default:* `True`
+Allows `get_ctx_content_by_id` command execution. If enabled, it allows getting summarized content of context with defined ID. *Default:* `True`
 
-- `Enable: count contexts in date range` *cmd_count_ctx_in_date*
+- `Enable: count contexts in date range` *cmd.count_ctx_in_date*
 
-When enabled, it allows counting contexts in date range. *Default:* `True`
+Allows `count_ctx_in_date` command execution. If enabled, it allows counting contexts in date range. *Default:* `True`
 
-- `Enable: get day note` *cmd_get_day_note*
+- `Enable: get day note` *cmd.get_day_note*
 
-When enabled, it allows retrieving day note for specific date. *Default:* `True`
+Allows `get_day_note` command execution. If enabled, it allows retrieving day note for specific date. *Default:* `True`
 
-- `Enable: add day note` *cmd_add_day_note*
+- `Enable: add day note` *cmd.add_day_note*
 
-When enabled, it allows adding day note for specific date. *Default:* `True`
+Allows `add_day_note` command execution. If enabled, it allows adding day note for specific date. *Default:* `True`
 
-- `Enable: update day note` *cmd_update_day_note*
+- `Enable: update day note` *cmd.update_day_note*
 
-When enabled, it allows updating day note for specific date. *Default:* `True`
+Allows `update_day_note` command execution. If enabled, it allows updating day note for specific date. *Default:* `True`
 
-- `Enable: remove day note` *cmd_remove_day_note*
+- `Enable: remove day note` *cmd.remove_day_note*
 
-When enabled, it allows removing day note for specific date. *Default:* `True`
+Allows `remove_day_note` command execution. If enabled, it allows removing day note for specific date. *Default:* `True`
 
 - `Model` *model_summarize*
 
 Model used for summarize. *Default:* `gpt-3.5-turbo`
 
 - `Max summary tokens` *summary_max_tokens*
 
@@ -2114,42 +2162,14 @@
 
 - `Per-context items content chunk size` *chunk_size*
 
 Per-context content chunk size (max characters per chunk). *Default:* `100000 chars`
 
 **Options (advanced)**
 
-- `Syntax: get_ctx_list_in_date_range` *syntax_get_ctx_list_in_date_range*
-
-Syntax for get_ctx_list_in_date_range command.
-
-- `Syntax: get_ctx_content_by_id` *syntax_get_ctx_content_by_id*
-
-Syntax for get_ctx_content_by_id command.
-
-- `Syntax: count_ctx_in_date` *syntax_count_ctx_in_date*
-
-Syntax for count_ctx_in_date command
-
-- `Syntax: get_day_note` *syntax_get_day_note*
-
-Syntax for get_day_note command
-
-- `Syntax: add_day_note` *syntax_add_day_note*
-
-Syntax for add_day_note command.
-
-- `Syntax: update_day_note` *syntax_update_day_note*
-
-Syntax for update_day_note command.
-
-- `Syntax: remove_day_note` *syntax_remove_day_note*
-
-Syntax for remove_day_note command.
-
 - `Prompt: @ tags (system)` *prompt_tag_system*
 
 Prompt for use @ tag (system).
 
 - `Prompt: @ tags (summary)` *prompt_tag_summary*
 
 Prompt for use @ tag (summary).
@@ -2196,37 +2216,31 @@
 
 **Tip:** When using `Vision (inline)` by utilizing a plugin in standard mode, such as `Chat` (not `Vision` mode), the `+ Vision` special checkbox will appear at the bottom of the Chat window. It will be automatically enabled any time you provide content for analysis (like an uploaded photo). When the checkbox is enabled, the vision model is used. If you wish to exit the vision model after image analysis, simply uncheck the checkbox. It will activate again automatically when the next image content for analysis is provided.
 
 **Options**
 
 - `Model` *model*
 
-The model used to temporarily provide vision capabilities; default is `gpt-4-vision-preview`.
-
+The model used to temporarily provide vision capabilities. *Default:* `gpt-4-vision-preview`.
 
 - `Prompt` *prompt*
 
 The prompt used for vision mode. It will append or replace current system prompt when using vision model.
 
-
 - `Replace prompt` *replace_prompt*
 
-Replace whole system prompt with vision prompt against appending it to the current prompt.
+Replace whole system prompt with vision prompt against appending it to the current prompt. *Default:* `False`
 
+- `Enable: capturing images from camera` *cmd.camera_capture*
 
-- `Enable: "camera capture" command` *cmd_capture*
+Allows `capture` command execution. If enabled, model will be able to capture images from camera itself. The `Execute commands` option must be enabled. *Default:* `False`
 
-Allows using command: camera capture (`Execute commands` option enabled is required).
-If enabled, model will be able to capture images from camera itself.
+- `Enable: making screenshots` *cmd.make_screenshot*
 
-
-- `Enable: "make screenshot" command` *cmd_screenshot*
-
-Allows using command: make screenshot (`Execute commands` option enabled is required).
-If enabled, model will be able to making screenshots itself.
+Allows `screenshot` command execution. If enabled, model will be able to making screenshots itself. The `Execute commands` option must be enabled. *Default:* `False`
 
 ## Real Time
 
 This plugin automatically adds the current date and time to each system prompt you send. 
 You have the option to include just the date, just the time, or both.
 
 When enabled, it quietly enhances each system prompt with current time information before sending it to GPT.
@@ -2491,15 +2505,15 @@
 These are functions - defined on the OpenAI API side and described using JSON objects. You can find a complete guide on how to define functions here:
 
 https://platform.openai.com/docs/guides/function-calling
 
 https://cookbook.openai.com/examples/how_to_call_functions_with_chat_models
 
 
-From version **2.0.150**, PyGPT offers compatibility of these functions with commands used in the application. All you need to do is define the appropriate functions using the syntax required by OpenAI, and PyGPT will do the rest, translating such syntax on the fly into its own internal format.
+PyGPT offers compatibility of these functions with commands used in the application. All you need to do is define the appropriate functions using the syntax required by OpenAI, and PyGPT will do the rest, translating such syntax on the fly into its own internal format.
 
 You can define functions for modes: `Chat` and `Assistants`.
 Note that - in Chat mode, they should be defined in `Presets`, and for Assistants, in the `Assistant` settings.
 
 **Example of usage:**
 
 1) Chat
@@ -2556,14 +2570,64 @@
 
 2) Assistant
 
 In this mode (via Assistants API), it should be done similarly, with the difference that here the functions should be defined in the assistant's settings.
 
 With this flow you can use both forms - OpenAI and PyGPT - to define and execute commands and functions in the application. They will cooperate with each other and you can use them interchangeably.
 
+# Tools
+
+PyGPT features several useful tools, including:
+
+- Indexer
+- Media Player
+- Image viewer
+- Text editor
+- Transcribe audio/video files
+- Python code interpreter
+
+![v2_tool_menu](https://github.com/szczyglis-dev/py-gpt/assets/61396542/fb3f44af-f0de-4e18-bcac-e20389a651c9)
+
+
+### Indexer
+
+
+This tool allows indexing of local files or directories and external web content to a vector database, which can then be used with the `Chat with Files` mode. Using this tool, you can manage local indexes and add new data with built-in `Llama-index` integration.
+
+![v2_tool_indexer](https://github.com/szczyglis-dev/py-gpt/assets/61396542/1caeab6e-6119-44e2-a7cb-ed34f8fe9e30)
+
+### Media Player
+
+
+A simple video/audio player that allows you to play video files directly from within the app.
+
+
+### Image Viewer
+
+
+A simple image browser that lets you preview images directly within the app.
+
+
+### Text Editor
+
+
+A simple text editor that enables you to edit text files directly within the app.
+
+
+### Transcribe Audio/Video Files
+
+
+An audio transcription tool with which you can prepare a transcript from a video or audio file. It will use a speech recognition plugin to generate the text from the file.
+
+
+### Python Code Interpreter
+
+
+This tool allows you to run Python code directly from within the app. It is integrated with the `Code Interpreter` plugin, ensuring that code generated by the model is automatically available from the interpreter. In the plugin settings, you can enable the execution of code in a Docker environment.
+
 # Token usage calculation
 
 ## Input tokens
 
 The application features a token calculator. It attempts to forecast the number of tokens that 
 a particular query will consume and displays this estimate in real time. This gives you improved 
 control over your token usage. The app provides detailed information about the tokens used for the user's prompt, 
@@ -2585,29 +2649,39 @@
 
 The following basic options can be modified directly within the application:
 
 ``` ini
 Config -> Settings...
 ```
 
-![v2_settings](https://github.com/szczyglis-dev/py-gpt/assets/61396542/21d7e43d-858f-4bc7-a06f-ec848338e7a9)
+![v2_settings](https://github.com/szczyglis-dev/py-gpt/assets/61396542/43622c58-6cdb-4ed8-b47d-47729763db04)
 
 **General**
 
 - `OpenAI API KEY`: The personal API key you'll need to enter into the application for it to function.
 
 - `OpenAI ORGANIZATION KEY`: The organization's API key, which is optional for use within the application.
 
+- `API Endpoint`: OpenAI API endpoint URL, default: https://api.openai.com/v1.
+
 - `Number of notepads`: Number of notepad tabs. Restart of the application is required for this option to take effect.
 
 - `Minimize to tray on exit`: Minimize to tray icon on exit. Tray icon enabled is required for this option to work. Default: False.
 
+- `Render engine`: chat output render engine: `WebEngine / Chromium` - for full HTML/CSS and `Legacy (markdown)` for legacy, simple markdown CSS output. Default: WebEngine / Chromium.
+
+- `OpenGL hardware acceleration`: enables hardware acceleration in `WebEngine / Chromium` renderer.  Default: False.
+
 **Layout**
 
-- `Font Size (chat window)`: Adjusts the font size in the chat window.
+- `Zoom`: Adjusts the zoom in chat window (web render view). `WebEngine / Chromium` render mode only.
+
+- `Code syntax highlight`: Syntax highlight theme in code blocks. `WebEngine / Chromium` render mode only.
+
+- `Font Size (chat window)`: Adjusts the font size in the chat window (plain-text) and notepads.
 
 - `Font Size (input)`: Adjusts the font size in the input window.
 
 - `Font Size (ctx list)`: Adjusts the font size in contexts list.
 
 - `Font Size (toolbox)`: Adjusts the font size in toolbox on right.
 
@@ -2647,47 +2721,67 @@
 
 - `Context Auto-summary`: Enables automatic generation of titles for contexts, Default: True.
 
 - `Lock incompatible modes`: If enabled, the app will create a new context when switched to an incompatible mode within an existing context.
 
 - `Search also in conversation content, not only in titles`: When enabled, context search will also consider the content of conversations, not just the titles of conversations.
 
-- `Model used for auto-summary`: Model used for context auto-summary (default: *gpt-3.5-turbo-1106*).
+- `Show Llama-index sources`: If enabled, sources utilized will be displayed in the response (if available, it will not work in streamed chat).
 
-- `Prompt (sys): auto summary`: System prompt for context auto-summary.
+- `Show code interpreter output`: If enabled, output from the code interpreter in the Assistant API will be displayed in real-time (in stream mode), Default: True.
 
-- `Prompt (user): auto summary`: User prompt for context auto-summary.
+- `Use extra context output`: If enabled, plain text output (if available) from command results will be displayed alongside the JSON output, Default: True.
+
+- `Convert lists to paragraphs`: If enabled, lists (ul, ol) will be converted to paragraphs (p), Default: True.
+
+- `Model used for auto-summary`: Model used for context auto-summary (default: *gpt-3.5-turbo-1106*).
 
 **Models**
 
-- `Max Output Tokens`: Determines the maximum number of tokens the model can generate for a single response.
+- `Max Output Tokens`: Sets the maximum number of tokens the model can generate for a single response.
 
-- `Max Total Tokens`: Defines the maximum token count that the application can send to the model, including the conversation context.
+- `Max Total Tokens`: Sets the maximum token count that the application can send to the model, including the conversation context.
+
+- `RPM limit`: Sets the limit of maximum requests per minute (RPM), 0 = no limit.
 
 - `Temperature`: Sets the randomness of the conversation. A lower value makes the model's responses more deterministic, while a higher value increases creativity and abstraction.
 
 - `Top-p`: A parameter that influences the model's response diversity, similar to temperature. For more information, please check the OpenAI documentation.
 
 - `Frequency Penalty`: Decreases the likelihood of repetition in the model's responses.
 
 - `Presence Penalty`: Discourages the model from mentioning topics that have already been brought up in the conversation.
 
-- `Prompt (append): command execute instruction`: Prompt for appending command execution instructions.
+**Prompts**
+
+- `Command execute: instruction`: Prompt for appending command execution instructions. Placeholders: {schema}, {extra}
+
+- `Command execute: extra footer (non-Assistant modes)`: Extra footer to append after commands JSON schema.
+
+- `Command execute: extra footer (Assistant mode only)`: PAdditional instructions to separate local commands from the remote environment that is already configured in the Assistants.
+
+- `Context: auto-summary (system prompt)`: System prompt for context auto-summary.
+
+- `Context: auto-summary (user message)`: User message for context auto-summary. Placeholders: {input}, {output}
+
+- `Agent: continue`: Prompt sent to automatically continue the conversation. Default: `continue...`
+
+- `Agent: goal update`: Prompt to instruct how to update current goal status.
+
+- `DALL-E: image generate`: Prompt for generating prompts for DALL-E (if raw-mode is disabled).
 
 **Images**
 
 - `DALL-E Image size`: The resolution of the generated images (DALL-E). Default: 1792x1024.
 
 - `DALL-E Image quality`: The image quality of the generated images (DALL-E). Default: standard.
 
 - `Open image dialog after generate`: Enable the image dialog to open after an image is generated in Image mode.
 
-- `DALL-E: Prompt (sys): prompt generation`: Prompt for generating prompts for DALL-E (if RAW mode is disabled).
-
-- `DALL-E: prompt generation model`: Model used for generating prompts for DALL-E (if RAW mode is disabled).
+- `DALL-E: prompt generation model`: Model used for generating prompts for DALL-E (if raw-mode is disabled).
 
 **Vision**
 
 - `Vision: Camera capture width (px)`: Video capture resolution (width).
 
 - `Vision: Camera capture height (px)`: Video capture resolution (height).
 
@@ -2695,32 +2789,48 @@
 
 - `Vision: Image capture quality`: Video capture image JPEG quality (%).
 
 **Indexes (Llama-index)**
 
 - `Indexes`: List of created indexes.
 
-- `Vector Store`: Vector store in use (vector database provided by Llama-index).
+- `Vector Store`: Vector store to use (vector database provided by Llama-index).
+
+- `Vector Store (**kwargs)`: Keyword arguments for vector store provider (api_key, index_name, etc.).
+
+- `Embeddings provider`: Embeddings provider.
 
-- `Vector Store (**kwargs)`: Arguments for vector store (api_key, index_name, etc.).
+- `Embeddings provider (ENV)`: ENV vars to embeddings provider (API keys, etc.).
+
+- `Embeddings provider (**kwargs)`: Keyword arguments for embeddings provider (model name, etc.).
+
+- `RPM limit for embeddings API calls`: Specify the limit of maximum requests per minute (RPM), 0 = no limit.
 
 - `Recursive directory indexing`: Enables recursive directory indexing, default is False.
 
 - `Replace old document versions in the index during re-indexing`: If enabled, previous versions of documents will be deleted from the index when the newest versions are indexed, default is True.
 
 - `Excluded file extensions`: File extensions to exclude if no data loader for this extension, separated by comma.
 
+- `Force exclude files`: If enabled, the exclusion list will be applied even when the data loader for the extension is active. Default: False.
+
+- `Custom metadata to append/replace to indexed documents (file)`: Define custom metadata key => value fields for specified file extensions, separate extensions by comma.\nAllowed placeholders: {path}, {relative_path} {filename}, {dirname}, {relative_dir} {ext}, {size}, {mtime}, {date}, {date_time}, {time}, {timestamp}. Use * (asterisk) as extension if you want to apply field to all files. Set empty value to remove field with specified key from metadata.
+
+- `Custom metadata to append/replace to indexed documents (web)`: Define custom metadata key => value fields for specified external data loaders.\nAllowed placeholders: {date}, {date_time}, {time}, {timestamp} + {data loader args}
+
 - `Additional keyword arguments (**kwargs) for data loaders`: Additional keyword arguments, such as settings, API keys, for the data loader. These arguments will be passed to the loader; please refer to the Llama-index or LlamaHub loaders reference for a list of allowed arguments for the specified data loader.
 
-- `Use local models in Video/Audio and Image (vision) loaders`: Enable usage of local models in Video/Audio and Image (vision) loaders. If disabled then API models will be used (GPT-4 Vision and Whisper). Note: local models will work only in Python version (not compiled/Snap). Default: False.
+- `Use local models in Video/Audio and Image (vision) loaders`: Enables usage of local models in Video/Audio and Image (vision) loaders. If disabled then API models will be used (GPT-4 Vision and Whisper). Note: local models will work only in Python version (not compiled/Snap). Default: False.
 
-- `Auto-index DB in real time`: Enables conversation context auto-indexing.
+- `Auto-index DB in real time`: Enables conversation context auto-indexing in defined modes.
 
 - `ID of index for auto-indexing`: Index to use if auto-indexing of conversation context is enabled.
 
+- `Enable auto-index in modes`: List of modes with enabled context auto-index, separated by comma.
+
 - `DB (ALL), DB (UPDATE), FILES (ALL)`: Index the data – batch indexing is available here.
 
 **Agent (autonomous)**
 
 - `Sub-mode to use`: Sub-mode to use in Agent mode (chat, completion, langchain, llama_index, etc.). Default: chat.
 
 - `Index to use`: Only if sub-mode is llama_index (Chat with files), choose the index to use in Agent mode.
@@ -2731,17 +2841,19 @@
 
 - `Check for updates on start`: Enables checking for updates on start. Default: True.
 
 - `Check for updates in background`: Enables checking for updates in background (checking every 5 minutes). Default: True.
 
 **Developer**
 
-- `Show debug menu`: enables debug (developer) menu.
+- `Show debug menu`: Enables debug (developer) menu.
 
-- `Log and debug events`: Enables logging of events dispatch.
+- `Log and debug context`: Enables logging of context input/output.
+
+- `Log and debug events`: Enables logging of event dispatch.
 
 - `Log plugin usage to console`: Enables logging of plugin usage to console.
 
 - `Log DALL-E usage to console`: Enables logging of DALL-E usage to console.
 
 - `Log Llama-index usage to console`: Enables logging of Llama-index usage to console.
 
@@ -2761,14 +2873,30 @@
 
 # Notepad
 
 The application has a built-in notepad, divided into several tabs. This can be useful for storing information in a convenient way, without the need to open an external text editor. The content of the notepad is automatically saved whenever the content changes.
 
 ![v2_notepad](https://github.com/szczyglis-dev/py-gpt/assets/61396542/f6aa0126-bad1-4e6c-ace6-72e979186433)
 
+# Profiles
+
+You can create many "profiles" for an app and switch between them. Each profile uses its own configuration, settings, history of contexts, and a separate folder for user files. This allows you to make many setups and quickly switch between them, changing the whole setting with one click.
+
+The app allows you to make new profiles, edit existing ones, and duplicate current ones.
+
+To make a new profile, select the option from the menu `Config -> Profile -> New profile...`
+
+To edit saved profiles, choose the option from the menu `Config -> Profile -> Edit profiles...`
+
+To switch to a created profile, pick the profile from the menu: `Config -> Profile -> (profile name)`
+
+Each profile uses its own user directory (workdir). You can link a newly created (or edited) profile to an already existing workdir with its configuration.
+
+The name of the currently active profile is shown in (Profile Name) in the window title.
+
 # Advanced configuration
 
 ## Manual configuration
 
 
 You can manually edit the configuration files in this directory (this is your work directory):
 
@@ -2807,27 +2935,50 @@
 
 ``` ini
 locale.es.ini   
 ```
 
 This will add Spanish as a selectable language in the application's language menu.
 
-**Overwriting CSS and locales with your own files:**
+**Overwriting CSS and locales with Your Own Files:**
 
 You can also overwrite files in the `locale` and `css` app directories with your own files in the user directory. 
 This allows you to overwrite language files or CSS styles in a very simple way - by just creating files in your working directory.
 
 
 ``` ini
 {HOME_DIR}/.config/pygpt-net/
 ```
 
 - `locale` - a directory for locales in `.ini` format.
 - `css` - a directory for CSS styles in `.css` format.
 
+**Adding Your Own Fonts**
+
+You can add your own fonts and use them in CSS files. To load your own fonts, you should place them in the `%workdir%/fonts` directory. Supported font types include: `otf`, `ttf`.
+You can see the list of loaded fonts in `Debug / Config`.
+
+**Example:**
+
+```
+%workdir%
+|_css
+|_data
+|_fonts
+   |_MyFont
+     |_MyFont-Regular.ttf
+     |_MyFont-Bold.ttf
+     |...
+```
+
+```css
+pre {{
+    font-family: 'MyFont';
+}}
+```
 
 ## Debugging and Logging
 
 In `Settings -> Developer` dialog, you can enable the `Show debug menu` option to turn on the debugging menu. The menu allows you to inspect the status of application elements. In the debugging menu, there is a `Logger` option that opens a log window. In the window, the program's operation is displayed in real-time.
 
 **Logging levels**:
 
@@ -2849,14 +3000,35 @@
 python3 run.py --debug=2
 ```
 
 The value `1` enables the `INFO`logging level.
 
 The value `2` enables the `DEBUG` logging level (most information).
 
+## Compatibility (legacy) mode
+
+If you have a problems with `WebEngine / Chromium` renderer you can force the legacy mode by launching the app with command line arguments:
+
+``` ini
+python3 run.py --legacy=1
+```
+
+and to force disable OpenGL hardware acceleration:
+
+``` ini
+python3 run.py --disable-gpu=1
+```
+
+You can also manualy enable legacy mode by editing config file - open the `%WORKDIR%/config.json` config file in editor and set the following options:
+
+``` json
+"render.engine": "legacy",
+"render.open_gl": false,
+```
+
 ## Updates
 
 ### Updating PyGPT
 
 **PyGPT** comes with an integrated update notification system. When a new version with additional features is released, you'll receive an alert within the app. 
 
 To get the new version, simply download it and start using it in place of the old one. All your custom settings like configuration, presets, indexes, and past conversations will be kept and ready to use right away in the new version.
@@ -2880,244 +3052,207 @@
 
 ---
 
 # CHANGELOG
 
 ## Recent changes:
 
-# 2.1.9 (2024-03-04)
-
-- A new option has been added to the `Web Search` plugin: `web_index_query`, which allows for indexing a web and external content in a temporary index (in memory) and quickly querying its content. Works similar to `query_file` command.
-- The `read_file` command has been expanded to handle multiple files at once.
-- Added `Log and debug events` option to Developer settings.
-
-# 2.1.8 (2024-03-03)
-
-- A new option has been added to the `Files I/O` plugin: `query_file`, which allows for indexing a file in a temporary index (in memory) and quickly querying its content. This enables the use of Llama-index for fast querying or adding context from individual files. From now on, you can ask questions about individual files without indexing them to the main vector store. See the "Querying single files" in "Modes -> Chat with files" section in a README for more info.
-- The `read_file` command has been expanded to return just the exact file content, without wrapping it in JSON.
-- Improved prompt for preparing queries in the Chat with files plugin.
-- Updated docs.
-
-# 2.1.7 (2024-03-03)
-
-- Enhanced the Llama-index plugin with additional options for automatically refining queries before requesting additional context from Llama-index.
-
-# 2.1.6 (2024-03-03)
+**2.2.0 (2024-04-28)**
 
-- Added Twitter/X data loader.
-- Added check if message is not a reply when calling Llama-index using a plugin.
-- Added list of Agent indexes auto-reload after Llama-index list has changed.
-- Disabled anonymized telemetry in Chroma by default.
+- Improved code interpreter stream handling in Assistant mode.
+- Improved preset plugins reloading on profile switch.
+- Fixes and core improvements.
+- Updated docs to v2.2.0.
 
-# 2.1.5 (2024-03-02)
+**2.1.83 (2024-04-27)**
 
-- Recompiled SVG resources.
-- Fixed file explorer update after file commands execute.
+- Index list in 'Chat with files' mode moved to combo-box at bottom.
+- Enabled display of remote images in chat output.
 - Updated docs.
 
-# 2.1.4 (2024-03-02)
+**2.1.82 (2024-04-27)**
 
-- PySide6 downgraded to 6.4.2 due to a bug in signals emitting.
+- Fixed correct store id saving if hidden thread stores on list.
 
-# 2.1.3 (2024-03-01)
+**2.1.81 (2024-04-27)**
 
-- Added data loaders: Bitbucket, ChatGPT Retrieval Plugin, SQL Databases, GitHub, Microsoft OneDrive.
-- Added indexing configuration tab in `Web Search` plugin.
+- Improved remote vector stores management.
 
-# 2.1.2 (2024-03-01)
+**2.1.80 (2024-04-27)**
 
-- Added data loaders: Google Drive, Google Docs, Google Gmail, Google Calendar, Google Sheets, Google Keep.
-- Added data loaders: Video/Audio and Images, with local model and API modes.
-- Added Whisper (local hosted) model to `Audio Input` providers, available only in Python version.
+- Fixed missing selection in Assistant store select combo.
+- Fixed store deletion.
+- Added tooltip to Stores button.
 
-# 2.1.1 (2024-02-29)
+**2.1.79 (2024-04-26)**
 
-- Llama-index settings split into tabs.
-- Added keyword argument settings for data loaders.
-- Added data loaders for RSS, XML sitemaps, IPYNB notebooks, and XML and HTML files.
-- Added audio notes - simply use speech recognition in the Notepad tab to append transcribed audio to the Notepad.
-- Added an icon for quick toggling of video camera capture.
-- Added a Video menu.
-- Moved video capture toggle checkboxes to the Video menu.
+- OpenAI API upgraded to version 1.23.6.
+- Assistants API: added tool: File search and removed deprecated tool: Retrieval.
+- Support for remote Assistant Vector Stores added (accessible through the Assistants API).
+- Remote Vector Stores management tool introduced (right-click on an Assistant, select 'Edit', then click the database icon to open Remote Vector Stores editor).
+- Importer for Remote Assistant Vector Stores and files included.
+- Files uploaded in Assistants mode can now be shared between threads using Vector Stores.
 
-# 2.1.0 (2024-02-28)
+**2.1.78 (2024-04-25)**
 
-- Upgraded Llama-index from the legacy version `0.9` to the current version `0.10` (note: upgrading PyPi version of PyGPT to `2.1.0` requires reinstallation in a virtual environment to remove old library versions).
-- Upgraded Langchain to `0.1.9`.
-- Upgraded PyInstaller (and compiled versions) to version `6`.
-- Removed LlamaHub and restored support for Python `3.12`.
-- Fixed imports for Llama-index in the compiled versions.
-- Added icons for quickly toggling audio input/output.
-- UI fixes.
+- Removed redundant names in block view.
+- Scrollbars background integrated with blocks bg.
 
-# 2.0.171 (2024-02-27)
+**2.1.77 (2024-04-25)**
 
-- Added core for loading web resources (not only webpages) to Llama-index.
-- Added a data loader for transcriptions of YouTube videos (simply ask for index a YouTube video URL using the `Command: Web Search` plugin - the `web_index` command must be enabled).
-- Fixed the "Initial token count exceeds token limit" error in Chat with files mode.
-- Added missing translations for dictionary items in settings dialogs.
+- Added the "tree" command to the I/O Files plugin to retrieve the full directory tree.
 
-# 2.0.170 (2024-02-26)
+**2.1.76 (2024-04-25)**
 
-- Added "simplified" mode to the "Audio Input" plugin, now set as default, allowing for faster and simpler speech recognition without requiring any configuration. Meanwhile, all current options have been moved to "advanced" mode.
-- Improved microphone support in Snap version.
-- Improved file browser update after performing file operations.
-- Added check for file availability for indexing in the file browser.
+- Chat items now displayed in blocks.
 
-# 2.0.169 (2024-02-25)
+**2.1.75 (2024-04-24)**
 
-- Improved and refactored debugging
+- Copy to clipboard in web view fixed and moved to JS bridge.
 
-# 2.0.168 (2024-02-25)
+**2.1.74 (2024-04-24)**
 
-- Added auto index file on read option in the `Files I/O` plugin
-- Improved debugger
-- Fixed Bing speech recognition
+- Added syntax highlight choose to Theme menu.
+- Syntax highlight style colors integrated with Dark/Light app themes.
 
-# 2.0.167 (2024-02-25)
+**2.1.73 (2024-04-24)**
 
-- Fixed empty API key dialog.
+- Fixed issue #50 - missing type key in config.
 
-# 2.0.166 (2024-02-25)
+**2.1.72 (2024-04-24)**
 
-- Enabled the use of data loaders from Llama-index in the `Files I/O` plugin for reading files, which allows for reading not only text files using the plugin's `read_file` command.
-- Added a command for indexing files to the `Files I/O` plugin.
-- The `self_loop` plugin has been internally renamed to the `agent` plugin.
-- Fixed the display of pinned contexts when the indexed filter is enabled.
+- Fixed context initialization in web view on app load.
+- Improved and optimized items rendering.
+- Refactored web view CSS.
+- Rendering optimization.
+- Added real-time items reload and append.
+- Added theme CSS to scrollbars.
+- Added JS console debug to Logger window.
 
-# 2.0.165 (2024-02-25)
+**2.1.71 (2024-04-23)**
 
-- Added search provider: `Bing`.
-- Added audio output providers: `Google` and `Eleven Labs`.
-- Added audio input providers: `Google`, `Google Cloud`, and `Bing`.
-- Added a new plugin: `Command: API calls` which allows defining commands for API calls to external services.
-- Added an `Excluded file extensions` configuration option in `Settings -> Llama-index`.
-- Fixed audio input listener initialization in the Audio Input plugin.
+- Added 160+ prompt templates from ["Awesome ChatGPT Prompts"](https://github.com/f/awesome-chatgpt-prompts) repository - to use them, right-click on the input or system prompt textarea and select the "Paste from template..." option.
 
-# 2.0.164 (2024-02-24)
+**2.1.70 (2024-04-22)**
 
-- Refactored the Audio Input, Audio Output, and Google Web Search plugins to support multiple audio and search engine providers.
-- Introduced the option to add your own audio input, output, and web search providers.
+- Added web view CSS reload on theme switch.
+- Fixed time display CSS in web view.
 
-# 2.0.163 (2024-02-23)
+**2.1.69 (2024-04-22)**
 
-- Added storage of indexed urls
-- Added info about used library versions in About dialog
+- Added html buffer to speed-up context initialization in web view.
+- Fixed items append in web view in agent mode.
 
-# 2.0.162 (2024-02-23)
+**2.1.68 (2024-04-22)**
 
-- Index data storage migrated from JSON to DB.
-- Added add/remove to index context menu on ctx list.
-- Added last indexed info on ctx list.
-- Added option "Replace old document versions in the index during re-indexing" in "Settings -> Llama-index".
-- Refactored, optimized and improved file and context indexing.
-- Fixed context search SQL query.
+- Fix: CPU usage on multiple items.
 
-# 2.0.161 (2024-02-22)
+**2.1.67 (2024-04-22)**
 
-- Added the option to search within conversation content, not just by titles (disabled by default, can be enabled in: "Settings -> Context -> Search also in conversation content, not only in titles").
-- Added a "download" subdirectory for files downloaded in Assistants mode and an option to configure the directory in: "Settings -> Files and attachments -> Directory for file downloads")
-- Added logging of options available in: "Config -> Debug" to the logger window, not just to the console.
-- Added descriptions in the models editor.
+- Optimized items rendering.
 
-# 2.0.160 (2024-02-21)
+**2.1.66 (2024-04-22)**
 
-- Added auto-replacement of sandbox download links in Assistants with links to downloaded local files.
-- Added setup for Poetry.
-- Added connection timeout config option to Google Search plugin.
-- Fixed recursion error on app exit.
-- Updated dependencies.
+- Improved content formatting in HTML export.
 
-# 2.0.159 (2024-02-21)
+**2.1.65 (2024-04-22)**
 
-- Added workdir placeholders to images stored from Assistants.
-- Added tooltips on modes list.
-- Added force synchronous command call if more than one command to execute.
+- Improved save as in Web View output.
+- Added save as text and save as html separated options.
 
-# 2.0.158 (2024-02-21)
+**2.1.64 (2024-04-22)**
 
-- Improved Assistants: added annotations handling, added async function outputs submit
-- Fixed creating function duplicates on re-import existing Assistant
+- Improved real-time CSS reloading.
 
-# 2.0.157 (2024-02-20)
+**2.1.63 (2024-04-22)**
 
-- Added webpage (URL) indexing using Llama-Index; new options were added to the Google Search plugin: the command "web_index" for indexing a specified page (just ask to index any URL) and "Auto-index", which enables automatic indexing of URLs used by the plugin (disabled by default).
-- Decreased the default chunk size in the Google Search plugin.
-- Assistant run creation and message sending moved to an async thread.
-- Improved files receive from Assistants.
+- Improved rendering output.
+- Updated CSS.
 
-# 2.0.156 (2024-02-19)
+**2.1.62 (2024-04-22)**
 
-- Added disable SSL verify option for search engine calls (not only for search results) in `Google Search plugin` - issue #20.
-- Updated certifi to 2024.2.2.
-- Added custom launcher, custom plugin, custom vector store, custom LLM provider and custom data loader code examples in `examples` directory in repository.
-- Updated documentation.
+- Added default lexer for code syntax highlighting if no language provided.
 
-# 2.0.155 (2024-02-18)
+**2.1.61 (2024-04-21)**
 
-- Importing assistants and assistant files (from API) has been moved to an asynchronous thread.
-- Upgraded OpenAI API to 1.12.0.
+- Added real-time HTML formatting of text chunks in stream mode.
 
-# 2.0.154 (2024-02-18)
+**2.1.60 (2024-04-21)**
 
-- Fixed hidden user input in Assistants mode
-- Fixed system prompt change when switching to Assistants mode without selected Assistant
+- Fixed "Save as" option in WebEngine view.
+- Added hiding of empty groups on search.
+- Updated formatting and CSS.
 
-# 2.0.153 (2024-02-17)
+**2.1.59 (2024-04-20)**
 
-- Added image display in the chat window when a file received from the Assistant is an image
-- Added color labels in color select combo boxes
-- Added dialog window position save and restore (+ option in Settings to enable/disable this feature)
-- Added command "web_url_raw" to the Google Search Plugin which allows you to get the raw HTML/txt content from web pages (without summary)
-- Fixed CSS backup path
-- Updated documentation
+- Added output renderer: WebEngine/Chromium – with full HTML/CSS/JS support. (Experimental)
+- Added a new option to choose a render engine in Settings -> General -> Rendering engine to select between WebEngine / Chromium mode and the Legacy mode (old, with simple markdown CSS support only - for compatibility reasons and troubleshooting).
+- Added syntax highlighting to code blocks – issue #43.
+- Added a new option in Settings -> Layout -> Code syntax highlight to select a highlight theme.
+- Added a new option in Settings -> Context -> Convert lists to paragraphs to enable/disable converting ul and li into p for better copying.
+- Copy to clipboard and regenerate response icons are now visible by default.
 
-# 2.0.152 (2024-02-16)
+**2.1.58 (2024-04-19)**
 
-- Improved updater, added direct links to new releases
-- Improved command execute system prompt
-- Added `cwd` command to `Files I/O` plugin
-- Added automatic current working directory passing to `sys_exec` command prompt in `Code Interpreter`.
-- Added `Refresh` option in File Explorer
-- Added monit about camera connect in Snap version with command to execute
-- Disabled MenuRoles on MacOS-affected menu items - issue #19
+- Fixed Markdown rendering if the content starts with a code block.
+- Added a "Switch to created profile" option in the profile creation/duplication dialogs.
+- Updated the locale.
+- Added a donate option.
 
-The full changelog is located in the **[CHANGELOG.md](CHANGELOG.md)** file in the main folder of this repository.
+The full changelog is located in the [CHANGELOG.md](https://github.com/szczyglis-dev/py-gpt/blob/master/CHANGELOG.md) file in the main folder of this repository.
 
 
 # Credits and links
 
 **Official website:** <https://pygpt.net>
 
 **Documentation:** <https://pygpt.readthedocs.io>
 
+**Support and donate:** <https://pygpt.net/#donate>
+
 **GitHub:** <https://github.com/szczyglis-dev/py-gpt>
 
 **Snap Store:** <https://snapcraft.io/pygpt>
 
 **PyPI:** <https://pypi.org/project/pygpt-net>
 
 **Author:** Marcin Szczygliński (Poland, EU)
 
 **Contact:** <info@pygpt.net>
 
 **License:** MIT License
 
 # Special thanks
 
-GitHub community:
+GitHub's community:
+
+- [@BillionShields](https://github.com/BillionShields)
+
+- [@gfsysa](https://github.com/gfsysa)
 
-- **kaneda2004**
+- [@glinkot](https://github.com/glinkot)
 
-- **moritz-t-w**
+- [@kaneda2004](https://github.com/kaneda2004)
+
+- [@linnflux](https://github.com/linnflux)
+
+- [@moritz-t-w](https://github.com/moritz-t-w)
+
+- [@oleksii-honchar](https://github.com/oleksii-honchar)
+
+- [@yf007](https://github.com/yf007)
 
 ## Third-party libraries
 
-Full list of external libraries used in this project is located in the **[requirements.txt](requirements.txt)** file in the main folder of this repository.
+Full list of external libraries used in this project is located in the [requirements.txt](https://github.com/szczyglis-dev/py-gpt/blob/master/requirements.txt) file in the main folder of the repository.
 
 All used SVG icons are from `Material Design Icons` provided by Google:
 
 https://github.com/google/material-design-icons
 
 https://fonts.google.com/icons
 
-Code of the Llama-index offline loaders integrated into app is taken from LlamaHub: https://llamahub.ai
+Monaspace fonts provided by GitHub: https://github.com/githubnext/monaspace
+
+Code of the Llama-index offline loaders integrated into app is taken from LlamaHub: https://llamahub.ai
+
+Awesome ChatGPT Prompts (used in templates): https://github.com/f/awesome-chatgpt-prompts/
```

### Comparing `pygpt_net-2.1.9/icon.png` & `pygpt_net-2.2.0/icon.png`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/pyproject.toml` & `pygpt_net-2.2.0/pyproject.toml`

 * *Files 6% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 [tool.poetry]
 name = "pygpt-net"
-version = "2.1.9"
+version = "2.2.0"
 description = "Desktop AI Assistant powered by GPT-4, GPT-4V, GPT-3.5, DALL-E 3, Langchain LLMs, Llama-index, Whisper with chatbot, assistant, text completion, vision and image generation, internet access, chat with files, commands and code execution, file upload and download and more"
 authors = ["Marcin Szczyglinski <info@pygpt.net>"]
 license = "MIT"
 readme = "README.md"
 homepage = "https://github.com/szczyglis-dev/py-gpt"
 repository = "https://github.com/szczyglis-dev/py-gpt"
 documentation = "https://pygpt.readthedocs.io/"
@@ -31,38 +31,43 @@
 chromadb = "^0.4.23"
 croniter = "^2.0.1"
 docker = "^7.0.0"
 docx2txt = "^0.8"
 EbookLib = "^0.18"
 langchain = "^0.1.9"
 langchain-community = "^0.0.24"
-langchain-experimental = "^0.0.49"
+langchain-experimental = "^0.0.52"
 langchain-openai = "^0.0.2.post1"
 llama-index = "^0.10.13.post1"
+llama-index-core = "0.10.13"
+llama-index-embeddings-azure-openai = "^0.1.6"
+llama-index-llms-openai = "0.1.6"
+llama-index-llms-azure-openai = "^0.1.5"
 llama-index-vector-stores-chroma = "^0.1.4"
 llama-index-vector-stores-elasticsearch = "^0.1.4"
 llama-index-vector-stores-pinecone = "^0.1.3"
 llama-index-vector-stores-redis = "^0.1.2"
 llama-index-readers-chatgpt-plugin = "^0.1.3"
 llama-index-readers-database = "^0.1.3"
 llama-index-readers-file = "^0.1.6"
 llama-index-readers-github = "^0.1.7"
 llama-index-readers-google = "^0.1.4"
 llama-index-readers-microsoft-onedrive = "^0.1.3"
 llama-index-readers-twitter = "^0.1.3"
 llama-index-readers-web = "^0.1.6"
 Markdown = "^3.5.1"
 nbconvert = "^7.16.1"
-openai = "^1.12.0"
+openai = ">=1.23.6,<1.24.0"
 opencv-python = "^4.8.1.78"
 packaging = "^23.2"
 pandas = "^2.1.4"
 pillow = "^10.2.0"
 pinecone-client = "^3.1.0"
 PyAudio = "^0.2.14"
+Pygments = "^2.15.0"
 pydub = "^0.25.1"
 pygame = "^2.5.2"
 pypdf = "^4.0.2"
 pyserial = "^3.5"
 PySide6 = "6.4.2"
 PySide6-Addons = "6.4.2"
 PySide6-Essentials = "6.4.2"
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/CHANGELOG.txt` & `pygpt_net-2.2.0/CHANGELOG.md`

 * *Files 20% similar despite different names*

```diff
@@ -1,1134 +1,1556 @@
-2.1.9 (2024-03-04)
+# CHANGELOG
 
-- A new option has been added to the "Web Search" plugin: "web_index_query", which allows for indexing a web and external content in a temporary index (in memory) and quickly querying its content. Works similar to "query_file" command.
-- The "read_file" command has been expanded to handle multiple files at once.
+# 2.2.0 (2024-04-28)
+
+- Improved code interpreter stream handling in Assistant mode.
+- Improved preset plugins reloading on profile switch.
+- Fixes and core improvements.
+- Updated docs to v2.2.0.
+
+# 2.1.83 (2024-04-27)
+
+- Index list in 'Chat with files' mode moved to combo-box at bottom.
+- Enabled display of remote images in chat output.
+- Updated docs.
+
+# 2.1.82 (2024-04-27)
+
+- Fixed correct store id saving if hidden thread stores on list.
+
+# 2.1.81 (2024-04-27)
+
+- Improved remote vector stores management.
+
+# 2.1.80 (2024-04-27)
+
+- Fixed missing selection in Assistant store select combo.
+- Fixed store deletion.
+- Added tooltip to Stores button.
+
+# 2.1.79 (2024-04-26)
+
+- OpenAI API upgraded to version 1.23.6.
+- Assistants API: added tool: File search and removed deprecated tool: Retrieval.
+- Support for remote Assistant Vector Stores added (accessible through the Assistants API).
+- Remote Vector Stores management tool introduced (right-click on an Assistant, select 'Edit', then click the database icon to open Remote Vector Stores editor).
+- Importer for Remote Assistant Vector Stores and files included.
+- Files uploaded in Assistants mode can now be shared between threads using Vector Stores.
+
+# 2.1.78 (2024-04-25)
+
+- Removed redundant names in block view.
+- Scrollbars background integrated with blocks bg.
+
+# 2.1.77 (2024-04-25)
+
+- Added the "tree" command to the I/O Files plugin to retrieve the full directory tree.
+
+# 2.1.76 (2024-04-25)
+
+- Chat items now displayed in blocks.
+
+# 2.1.75 (2024-04-24)
+
+- Copy to clipboard in web view fixed and moved to JS bridge.
+
+# 2.1.74 (2024-04-24)
+
+- Added syntax highlight choose to Theme menu.
+- Syntax highlight style colors integrated with Dark/Light app themes.
+
+# 2.1.73 (2024-04-24)
+
+- Fixed issue #50 - missing type key in config.
+
+# 2.1.72 (2024-04-24)
+
+- Fixed context initialization in web view on app load.
+- Improved and optimized items rendering.
+- Refactored web view CSS.
+- Rendering optimization.
+- Added real-time items reload and append.
+- Added theme CSS to scrollbars.
+- Added JS console debug to Logger window.
+
+# 2.1.71 (2024-04-23)
+
+- Added 160+ prompt templates from ["Awesome ChatGPT Prompts"](https://github.com/f/awesome-chatgpt-prompts) repository - to use them, right-click on the input or system prompt textarea and select the "Paste from template..." option.
+
+# 2.1.70 (2024-04-22)
+
+- Added web view CSS reload on theme switch.
+- Fixed time display CSS in web view.
+
+# 2.1.69 (2024-04-22)
+
+- Added html buffer to speed-up context initialization in web view.
+- Fixed items append in web view in agent mode.
+
+# 2.1.68 (2024-04-22)
+
+- Fix: CPU usage on multiple items.
+
+# 2.1.67 (2024-04-22)
+
+- Optimized items rendering.
+
+# 2.1.66 (2024-04-22)
+
+- Improved content formatting in HTML export.
+
+# 2.1.65 (2024-04-22)
+
+- Improved save as in Web View output.
+- Added save as text and save as html separated options.
+
+# 2.1.64 (2024-04-22)
+
+- Improved real-time CSS reloading.
+
+# 2.1.63 (2024-04-22)
+
+- Improved rendering output.
+- Updated CSS.
+
+# 2.1.62 (2024-04-22)
+
+- Added default lexer for code syntax highlighting if no language provided.
+
+# 2.1.61 (2024-04-21)
+
+- Added real-time HTML formatting of text chunks in stream mode.
+
+# 2.1.60 (2024-04-21)
+
+- Fixed "Save as" option in WebEngine view.
+- Added hiding of empty groups on search.
+- Updated formatting and CSS.
+
+# 2.1.59 (2024-04-20)
+
+- Added output renderer: WebEngine/Chromium – with full HTML/CSS/JS support. (Experimental)
+- Added a new option to choose a render engine in Settings -> General -> Rendering engine to select between WebEngine / Chromium mode and the Legacy mode (old, with simple markdown CSS support only - for compatibility reasons and troubleshooting).
+- Added syntax highlighting to code blocks – issue #43.
+- Added a new option in Settings -> Layout -> Code syntax highlight to select a highlight theme.
+- Added a new option in Settings -> Context -> Convert lists to paragraphs to enable/disable converting ul and li into p for better copying.
+- Copy to clipboard and regenerate response icons are now visible by default.
+
+# 2.1.58 (2024-04-19)
+
+- Fixed Markdown rendering if the content starts with a code block.
+- Added a "Switch to created profile" option in the profile creation/duplication dialogs.
+- Updated the locale.
+- Added a donate option.
+
+# 2.1.57 (2024-04-17)
+
+- Fixed new ctx create on empty profile if previously group was selected.
+
+# 2.1.56 (2024-04-17)
+
+- Added a new menu option: Clear history + groups.
+- Improved profile switching.
+
+# 2.1.55 (2024-04-17)
+
+- Improved result handling from Indexer tool.
+
+# 2.1.54 (2024-04-17)
+
+- Added data loaders reload and loaders config reload in real time on profile switch.
+
+# 2.1.53 (2024-04-17)
+
+- Added a new tool: Indexer, for manually indexing files, contexts, and web content, as well as managing indexes. (beta)
+
+# 2.1.52 (2024-04-15)
+
+- Added real-time output from code interpreter in Assistants mode.
+- Added new option in Settings > Context: Show code interpreter output.
+
+# 2.1.51 (2024-04-14)
+
+- Added RMB context menu to the New... context button.
+- Added filesize info to attachments and uploaded files lists.
+- Improved Assistants API stream handling.
+
+# 2.1.50 (2024-04-14)
+
+- Fixed selection update after group rename.
+- Added img resolution and filesize info in image preview dialog title.
+- Added filesize info in text editor dialog title.
+
+# 2.1.49 (2024-04-14)
+
+- Improved context group handling.
+
+# 2.1.48 (2024-04-14)
+
+- OpenAI API upgraded to version 1.17.1.
+- Added a stream mode to the Assistant mode (beta).
+- Fixed an issue where context group ID were not copied when duplicating context.
+
+# 2.1.47 (2024-04-12)
+
+- Added auto-creating new context in current group if the group is active.
+- Added sending input also with Ctrl+Enter in Shift+Enter mode.
+- Extended light style markdown CSS.
+
+# 2.1.46 (2024-04-12)
+
+- Improved code blocks formatting.
+- Improved attachment copy/paste.
+
+# 2.1.45 (2024-04-11)
+
+- Added the ability to paste images as attachments using Ctrl+V in chat input and to copy-paste images in the draw/painter.
+- Added a "Copy to Clipboard" option in code blocks.
+- Introduced a new model: gpt-4-turbo-2024-04-09.
+
+# 2.1.44 (2024-04-11)
+
+- Optimized "Find" option.
+- Added copy database and copy data dir checkbox options in profile duplicate dialog.
+- Added ability to reset current active profile.
+- Added missing translations.
+
+# 2.1.43 (2024-04-11)
+
+- The "Find" option has been extended and added to all text fields.
+- Fixed menu reload issue when switching profiles.
+- Other small fixes and improvements.
+
+# 2.1.42 (2024-04-10)
+
+- Improved profile switching.
+- Added interpreter internal files to excluded when indexing.
+
+# 2.1.41 (2024-04-10)
+
+- Added support for multiple profiles (separated config, settings and workdir), menu: Config -> Profile...
+- Added context groups for context items organizing, menu: File -> New context group...
+- Added ability to change the model on response edit and regenerate.
+- Added real-time updating number of notepads.
+- UI/theme fixes.
+
+# 2.1.40-post1 (2024-04-08)
+
+- Llama-index core downgraded to 0.10.13 due to issue #41
+
+# 2.1.40 (2024-04-08)
+
+- Added "Find" option - text search and highlighting of the found phrase in the chat and notepad window, available via CTRL + F or right-click menu / Find... (beta)
+- Added GitHub's Monaspace font family: Argon, Krypton, Neon, Radon, Xenon (reset CSS to defaults or manual replacement in CSS files is required for older versions of application to take effect).
+- Added an "Restore Default CSS" option in the "Config / Edit CSS" menu.
+- Added the ability to use custom .ttf and .otf fonts (just place them in %workdir%/fonts directory).
+
+# 2.1.39 (2024-03-26)
+
+- Added "Change working directory..." option in "Config" menu.
+- Improved handling reply from multiple commands at once.
+- Tools have been moved to separate parts of the app.
+- Added the ability to create custom Tools, with an example tool in the "examples" directory.
+
+# 2.1.38 (2024-03-20)
+
+- Added new Tools menu, with: Media player, Transcribe audio/video files, Image viewer, Text editor and Code interpreter.
+- Improved tools.
+
+# 2.1.37 (2024-03-19)
+
+- Added generation of audio transcriptions from audio/video files.
+
+# 2.1.36 (2024-03-19)
+
+- Added split screen view (output/edit) to code interpreter.
+
+# 2.1.35 (2024-03-19)
+
+- Added text files editor and image viewer.
+- Improved video player and code interpreter.
+
+# 2.1.34 (2024-03-18)
+
+- Added video player.
+- Fixed audio input message append in agent mode.
+
+# 2.1.33 (2024-03-18)
+
+- Code interpreter enabled even if interpreter plugin is disabled.
+- Added "Connect to the Python code interpreter window" config option in Code interpreter plugin.
+- Added Monospace font support - issue #37.
+- Improved raw JSON command outputs.
+
+# 2.1.32 (2024-03-17)
+
+- Global prompts config moved to a separated settings section "Prompts".
+- Added auto-clear option in code interpreter.
+- Added "Use extra context output" config option in "Settings -> Context".
+
+# 2.1.31 (2024-03-17)
+
+- Improved code interpreter integration with sandbox/docker.
+- Added display of hidden files in Files explorer.
+- Added "Use as image" context menu action in Files explorer.
+
+# 2.1.30 (2024-03-16)
+
+- Improved real-time Python code interpreter: added edit mode and whole code execution (history).
+
+# 2.1.29 (2024-03-16)
+
+- Added real-time Python code interpreter (<> icon), connected with the Code Interpreter plugin's input and output.
+- Improved plugin command execution.
+
+# 2.1.28 (2024-03-15)
+
+- Fixed local commands handling in Assistant API.
+- Fixed system prompt replace after mode changed on app start.
+- Improved related links rendering in chat output.
+- Added RPM limit config option for Embeddings API.
+- UI improvements.
+
+# 2.1.27 (2024-03-13)
+
+- Added the "find" command to the Files I/O plugin for searching for files and directories.
+- Added "Append metadata" config option in Chat with files plugin.
+- Added missing locales to translations.
+
+# 2.1.26 (2024-03-13)
+
+- Added async command execution in History and Chat with files plugins.
+- Improved plugin prompts.
+- Improved command execution in autonomous mode.
+- Improved logging and debugging.
+
+# 2.1.25 (2024-03-13)
+
+- Llama index logging improvement.
+
+# 2.1.24 (2024-03-13)
+
+- Added AzureOpenAI embeddings provider.
+- Added metadata append to indexed context from DB.
+
+# 2.1.23 (2024-03-12)
+
+- Added configuration options for embeddings model and provider in Settings -> Llama-Index.
+- Added plain-text responses in web_open commands.
+- Improved web_open commands in Web Search plugin.
+- Added a check to determine if the provided URL is an image when sending URLs within text.
+
+# 2.1.22 (2024-03-12)
+
+- Added custom metadata appending to indexing documents for web/external loaders.
+
+# 2.1.21 (2024-03-12)
+
+- Refactored commands core and command handling to a JSON schema-based config.
+- Fixed calls in the API plugin.
+- Fixed web_urls in the Web search plugin.
+- Fixed adding new notes in the Calendar plugin.
+
+# 2.1.19 (2024-03-11)
+
+- Added "Force exclude files" config option to force exclude extensions in: Settings -> Llama-index -> Indexing (enables file extension exclusion even if a data loader for the extension is available).
+- Added custom metadata appending to indexing documents via list in: Settings -> Llama-index -> Indexing.
+- Added base API endpoint config arguments in models params.
+
+# 2.1.18 (2024-03-10)
+
+- Added horizontal splitters and min width for lists in settings dialogs - issue #30.
+- Added audio icon display config option in Settings -> Context.
+
+# 2.1.17 (2024-03-10)
+
+- Improved audio handling.
+- Added options to context debug.
+- Added context meta load on demand if not on list.
+
+# 2.1.16 (2024-03-10)
+
+- Added "merge" icon in context responses (allows merging selected response with the previous response).
+- Added display of Llama-index used sources in the context response.
+- Fixed word-wrap in code blocks - issue #27.
+- Fixed context visibility when filters are applied and new ctx is created in the background.
+- Improved audio playback status indication for responses.
+
+# 2.1.15 (2024-03-09)
+
+- Added Edit mode in chat output with options: read response (audio), copy to clipboard, regenerate response, edit and regenerate, and delete context item.
+- Added dynamic max output tokens calculation in completion mode - issue #28.
+- Added config option "Modes to auto-index" in Llama-index settings.
+- Fixed typo in gpt-4-turbo-preview model config args for Llama-index provider - issue #29.
+
+# 2.1.14 (2024-03-09)
+
+- Added restoration of "All counters" checkbox status in calendar on tab init.
+- Added new line with Shift+Enter in input if sending mode is "Enter" - issue #26.
+
+# 2.1.13 (2024-03-08)
+
+- Fixed context auto-indexing in autonomous/agent mode - issue #23.
+- Added AzureOpenAI provider for Llama.
+- Added configuration option for the model in query file/web options in plugins.
+- Added removal of temporary index from memory after use.
+
+# 2.1.12 (2024-03-08)
+
+- Added config option for max requests per minute (RPM) in `Settings -> Model` - issue #23.
+- Added config for continue prompt in `Settings -> Agent`.
+- Added config option for custom API endpoint URL in `Settings -> General` - issue #21.
+- Added `Allow context item delete` option in `Settings -> Context`.
+- Added checkbox `All counters` in filters in Calendar view - when disabled, calendar displays filtered record counters instead of all records.
+- Improved the reset to default option in `Settings` to persist all non-settings config options.
+
+# 2.1.11 (2024-03-07)
+
+- Fixed search query if multiple labels selected
+- Added prevent from saving empty notes in calendar
+- Added display empty dates in DB Viewer if timestamp = 0
+
+# 2.1.10 (2024-03-06)
+
+- Added `DB Viewer` in Developer menu.
+- Added label color filter in context list - issue #23
+- Added context item delete option - issue #23
+- Added presets for plugins - issue #23
+- Fixed and improved autonomous agents run - issue #23
+- Chinese language added to locales - issue #24
+
+# 2.1.9 (2024-03-04)
+
+- A new option has been added to the `Web Search` plugin: `web_index_query`, which allows for indexing a web and external content in a temporary index (in memory) and quickly querying its content. Works similar to `query_file` command.
+- The `read_file` command has been expanded to handle multiple files at once.
 - Added `Log and debug events` option to Developer settings.
 
-2.1.8 (2024-03-03)
+# 2.1.8 (2024-03-03)
 
-- A new option has been added to the "Files I/O" plugin: "query_file", which allows for indexing a file in a temporary index (in memory) and quickly querying its content. This enables the use of Llama-index for fast querying or adding context from individual files. From now on, you can ask questions about individual files without indexing them to the main vector store. See the "Querying single files" in "Modes -> Chat with files" section in a README for more info.
-- The "read_file" command has been expanded to return just the exact file content, without wrapping it in JSON.
+- A new option has been added to the `Files I/O` plugin: `query_file`, which allows for indexing a file in a temporary index (in memory) and quickly querying its content. This enables the use of Llama-index for fast querying or adding context from individual files. From now on, you can ask questions about individual files without indexing them to the main vector store. See the "Querying single files" in "Modes -> Chat with files" section in a README for more info.
+- The `read_file` command has been expanded to return just the exact file content, without wrapping it in JSON.
 - Improved prompt for preparing queries in the Chat with files plugin.
 - Updated docs.
 
-2.1.7 (2024-03-03)
+# 2.1.7 (2024-03-03)
 
 - Enhanced the Llama-index plugin with additional options for automatically refining queries before requesting additional context from Llama-index.
 
-2.1.6 (2024-03-03)
+# 2.1.6 (2024-03-03)
 
 - Added Twitter/X data loader.
 - Added check if message is not a reply when calling Llama-index using a plugin.
 - Added list of Agent indexes auto-reload after Llama-index list has changed.
 - Disabled anonymized telemetry in Chroma by default.
 
-2.1.5 (2024-03-02)
+# 2.1.5 (2024-03-02)
 
 - Recompiled SVG resources.
 - Fixed file explorer update after file commands execute.
 - Updated docs.
 
-2.1.4 (2024-03-02)
+# 2.1.4 (2024-03-02)
 
 - PySide6 downgraded to 6.4.2 due to a bug in signals emitting.
 
-2.1.3 (2024-03-01)
+# 2.1.3 (2024-03-01)
 
 - Added data loaders: Bitbucket, ChatGPT Retrieval Plugin, SQL Databases, GitHub, Microsoft OneDrive.
-- Added indexing configuration tab in Web Search plugin.
+- Added indexing configuration tab in `Web Search` plugin.
 
-2.1.2 (2024-03-01)
+# 2.1.2 (2024-03-01)
 
 - Added data loaders: Google Drive, Google Docs, Google Gmail, Google Calendar, Google Sheets, Google Keep.
 - Added data loaders: Video/Audio and Images, with local model and API modes.
-- Added Whisper (local hosted) model to Audio Input providers, available only in Python version.
+- Added Whisper (local hosted) model to `Audio Input` providers, available only in Python version.
 
-2.1.1 (2024-02-29)
+# 2.1.1 (2024-02-29)
 
 - Llama-index settings split into tabs.
 - Added keyword argument settings for data loaders.
 - Added data loaders for RSS, XML sitemaps, IPYNB notebooks, and XML and HTML files.
 - Added audio notes - simply use speech recognition in the Notepad tab to append transcribed audio to the Notepad.
 - Added an icon for quick toggling of video camera capture.
 - Added a Video menu.
 - Moved video capture toggle checkboxes to the Video menu.
 
-2.1.0 (2024-02-28)
+# 2.1.0 (2024-02-28)
 
-- Upgraded Llama-index from the legacy version 0.9 to the current version 0.10 (note: upgrading PyPi version of PyGPT to 2.1.0 requires reinstallation in a virtual environment to remove old library versions).
-- Upgraded Langchain to 0.1.9.
-- Upgraded PyInstaller (and compiled versions) to version 6.
-- Removed LlamaHub and restored support for Python 3.12.
+- Upgraded Llama-index from the legacy version `0.9` to the current version `0.10` (note: upgrading PyPi version of PyGPT to `2.1.0` requires reinstallation in a virtual environment to remove old library versions).
+- Upgraded Langchain to `0.1.9`.
+- Upgraded PyInstaller (and compiled versions) to version `6`.
+- Removed LlamaHub and restored support for Python `3.12`.
 - Fixed imports for Llama-index in the compiled versions.
 - Added icons for quickly toggling audio input/output.
 - UI fixes.
 
-2.0.171 (2024-02-27)
+# 2.0.171 (2024-02-27)
 
 - Added core for loading web resources (not only webpages) to Llama-index.
-- Added a data loader for transcriptions of YouTube videos (simply ask for index a YouTube video URL using the "Command: Web Search" plugin - the "web_index" command must be enabled).
+- Added a data loader for transcriptions of YouTube videos (simply ask for index a YouTube video URL using the `Command: Web Search` plugin - the `web_index` command must be enabled).
 - Fixed the "Initial token count exceeds token limit" error in Chat with files mode.
 - Added missing translations for dictionary items in settings dialogs.
 
-2.0.170 (2024-02-26)
+# 2.0.170 (2024-02-26)
 
 - Added "simplified" mode to the "Audio Input" plugin, now set as default, allowing for faster and simpler speech recognition without requiring any configuration. Meanwhile, all current options have been moved to "advanced" mode.
 - Improved microphone support in Snap version.
 - Improved file browser update after performing file operations.
 - Added check for file availability for indexing in the file browser.
 
-2.0.169 (2024-02-25)
+# 2.0.169 (2024-02-25)
 
 - Improved and refactored debugging
 
-2.0.168 (2024-02-25)
+# 2.0.168 (2024-02-25)
 
 - Added auto index file on read option in the `Files I/O` plugin
 - Improved debugger
 - Fixed Bing speech recognition
 
-2.0.167 (2024-02-25)
+# 2.0.167 (2024-02-25)
 
 - Fixed empty API key dialog.
 
-2.0.166 (2024-02-25)
+# 2.0.166 (2024-02-25)
 
-- Enabled the use of data loaders from Llama-index in the "Files I/O" plugin for reading files, which allows for reading not only text files using the plugin's "read_file" command.
-- Added a command for indexing files to the "Files I/O" plugin.
-- The "self_loop" plugin has been internally renamed to the "agent" plugin.
+- Enabled the use of data loaders from Llama-index in the `Files I/O` plugin for reading files, which allows for reading not only text files using the plugin's `read_file` command.
+- Added a command for indexing files to the `Files I/O` plugin.
+- The `self_loop` plugin has been internally renamed to the `agent` plugin.
 - Fixed the display of pinned contexts when the indexed filter is enabled.
 
-2.0.165 (2024-02-25)
+# 2.0.165 (2024-02-25)
 
-- Added search provider: Bing.
-- Added audio output providers: Google and Eleven Labs.
-- Added audio input providers: Google, Google Cloud, and Bing.
-- Added a new plugin: "Command: API calls" which allows defining commands for API calls to external services.
-- Added an "Excluded file extensions" configuration option in Settings -> Llama-index.
+- Added search provider: `Bing`.
+- Added audio output providers: `Google` and `Eleven Labs`.
+- Added audio input providers: `Google`, `Google Cloud`, and `Bing`.
+- Added a new plugin: `Command: API calls` which allows defining commands for API calls to external services.
+- Added an `Excluded file extensions` configuration option in `Settings -> Llama-index`.
 - Fixed audio input listener initialization in the Audio Input plugin.
 
-2.0.164 (2024-02-24)
+# 2.0.164 (2024-02-24)
 
 - Refactored the Audio Input, Audio Output, and Google Web Search plugins to support multiple audio and search engine providers.
 - Introduced the option to add your own audio input, output, and web search providers.
 
-2.0.163 (2024-02-23)
+# 2.0.163 (2024-02-23)
 
 - Added storage of indexed urls
 - Added info about used library versions in About dialog
 
-2.0.162 (2024-02-23)
+# 2.0.162 (2024-02-23)
 
 - Index data storage migrated from JSON to DB.
 - Added add/remove to index context menu on ctx list.
 - Added last indexed info on ctx list.
 - Added option "Replace old document versions in the index during re-indexing" in "Settings -> Llama-index".
 - Refactored, optimized and improved file and context indexing.
 - Fixed context search SQL query.
 
-2.0.161 (2024-02-22)
+# 2.0.161 (2024-02-22)
 
 - Added the option to search within conversation content, not just by titles (disabled by default, can be enabled in: "Settings -> Context -> Search also in conversation content, not only in titles").
 - Added a "download" subdirectory for files downloaded in Assistants mode and an option to configure the directory in: "Settings -> Files and attachments -> Directory for file downloads")
 - Added logging of options available in: "Config -> Debug" to the logger window, not just to the console.
 - Added descriptions in the models editor.
 
-2.0.160 (2024-02-21)
+# 2.0.160 (2024-02-21)
 
 - Added auto-replacement of sandbox download links in Assistants with links to downloaded local files.
 - Added setup for Poetry.
 - Added connection timeout config option to Google Search plugin.
 - Fixed recursion error on app exit.
 - Updated dependencies.
 
-2.0.159 (2024-02-21)
+# 2.0.159 (2024-02-21)
 
 - Added workdir placeholders to images stored from Assistants.
 - Added tooltips on modes list.
 - Added force synchronous command call if more than one command to execute.
 
-2.0.158 (2024-02-21)
+# 2.0.158 (2024-02-21)
 
 - Improved Assistants: added annotations handling, added async function outputs submit
 - Fixed creating function duplicates on re-import existing Assistant
 
-2.0.157 (2024-02-20)
+# 2.0.157 (2024-02-20)
 
 - Added webpage (URL) indexing using Llama-Index; new options were added to the Google Search plugin: the command "web_index" for indexing a specified page (just ask to index any URL) and "Auto-index", which enables automatic indexing of URLs used by the plugin (disabled by default).
 - Decreased the default chunk size in the Google Search plugin.
 - Assistant run creation and message sending moved to an async thread.
 - Improved files receive from Assistants.
 
-2.0.156 (2024-02-19)
+# 2.0.156 (2024-02-19)
 
-- Added disable SSL verify option for search engine calls (not only for search results) in "Google Search plugin" - issue #20.
+- Added disable SSL verify option for search engine calls (not only for search results) in `Google Search plugin` - issue #20.
 - Updated certifi to 2024.2.2.
-- Added custom launcher, custom plugin, custom vector store, custom LLM provider and custom data loader code examples in "examples" directory in repository.
+- Added custom launcher, custom plugin, custom vector store, custom LLM provider and custom data loader code examples in `examples` directory in repository.
 - Updated documentation.
 
-2.0.155 (2024-02-18)
+# 2.0.155 (2024-02-18)
 
 - Importing assistants and assistant files (from API) has been moved to an asynchronous thread.
 - Upgraded OpenAI API to 1.12.0.
 
-2.0.154 (2024-02-18)
+# 2.0.154 (2024-02-18)
 
 - Fixed hidden user input in Assistants mode
 - Fixed system prompt change when switching to Assistants mode without selected Assistant
 
-2.0.153 (2024-02-17)
+# 2.0.153 (2024-02-17)
 
 - Added image display in the chat window when a file received from the Assistant is an image
 - Added color labels in color select combo boxes
 - Added dialog window position save and restore (+ option in Settings to enable/disable this feature)
 - Added command "web_url_raw" to the Google Search Plugin which allows you to get the raw HTML/txt content from web pages (without summary)
 - Fixed CSS backup path
 - Updated documentation
 
-2.0.152 (2024-02-16)
+# 2.0.152 (2024-02-16)
 
 - Improved updater, added direct links to new releases
 - Improved command execute system prompt
 - Added `cwd` command to `Files I/O` plugin
 - Added automatic current working directory passing to `sys_exec` command prompt in `Code Interpreter`.
 - Added `Refresh` option in File Explorer
 - Added monit about camera connect in Snap version with command to execute
 - Disabled MenuRoles on MacOS-affected menu items - issue #19
 
-2.0.151 (2024-02-16)
+# 2.0.151 (2024-02-16)
 
 - Improved integration between Chat and Vision when functions are provided
 
-2.0.150 (2024-02-16)
+# 2.0.150 (2024-02-16)
 
 - Added a new command for the `Google Web Search` plugin - `get_urls`, which allows retrieving a full list of searched URLs and passing it to the model for further use.
 - Implemented execution of `functions` defined in the API and their full integration with modes: `Chat` and `Assistant`. For more details, see the new section in the documentation: `Functions and commands`.
 - Fixed the tray icon change while the model is generating a response.
 - Improved stopping of agents using `Stop`.
 
-2.0.149 (2024-02-15)
+# 2.0.149 (2024-02-15)
 
 - Fixed and improved Assistants API (file handling, run handling, token usage, stopping)
 - Added vertical canvas resolutions in Painter
 - Added brush settings restore in Painter
 - Added log file viewer in Debug menu
 - Added log level switch in runtime (Developer settings)
 - Added functions defining and handling in Presets (works in ChatCompletion API)
 - Improved presets and assistants editor dialogs
 - Improved debugger and Developer settings
 
-2.0.148 (2024-02-07)
+# 2.0.148 (2024-02-07)
 
 - Fixed input/output timestamps in renderer
 - Added aspect ratio check and fit on image open in Painter tool
 
-2.0.147 (2024-02-04)
+# 2.0.147 (2024-02-04)
 
 - Added `@` tags for quick access to context from previous discussions in the `Context History` plugin (must be enabled in plugin settings, default: disabled).
 - Added automatic passing of the day of the week in the `Context History` and `Real Time` plugins.
 
-2.0.146 (2024-02-03)
+# 2.0.146 (2024-02-03)
 
 - Disabled online loaders for Llama-index if compiled version is detected (they work properly only in Python version)
 
-2.0.145 (2024-02-03)
+# 2.0.145 (2024-02-03)
 
 - Enabled the use of the Context history plugin in inline mode (without the need for the Command execution option).
 - Added automatic provision of the current date in the Context History plugin if the Real-Time plugin is disabled.
 - Added the ability to count contexts within a specified date range.
 - Added an option to limit the maximum number of contexts retrieved per query.
 - Enabled the "undo" option in the painter when clearing and opening a new image.
 
-2.0.144 (2024-02-02)
+# 2.0.144 (2024-02-02)
 
 - Improved Command: Context history plugin prompts
 
-2.0.143 (2024-02-02)
+# 2.0.143 (2024-02-02)
 
-- Added a new plugin: Command: Context history (calendar)
-- Added a new feature to context list: Pin on top
-- Added Minimize to tray on exit option
+- Added a new plugin: `Command: Context history (calendar)`
+- Added a new feature to context list: `Pin on top`
+- Added `Minimize to tray on exit` option
 
-2.0.142 (2024-02-01)
+# 2.0.142 (2024-02-01)
 
 - Added tray notification on scheduled task run.
 - Added tray notification on Agent goal achieved.
 - Small fixes.
 
-2.0.141 (2024-02-01)
+# 2.0.141 (2024-02-01)
 
 - Improved window hide/restore from tray icon
 - Removed capture disable/enable options and Start minimized from settings dialog
 
-2.0.140 (2024-02-01)
+# 2.0.140 (2024-02-01)
 
 - Fixed preset duplicating
 
-2.0.139 (2024-02-01)
+# 2.0.139 (2024-02-01)
 
 - Improved the generation of names for preset duplicates.
 - Added background updates check (with an option in settings to disable it).
 - Added dialog to accept license terms at the first launch.
 - Fixed calendar content save on month change.
 - Small UI improvements.
 
-2.0.138 (2024-02-01)
+# 2.0.138 (2024-02-01)
 
 - Added "Duplicate" option to current * (default) presets
 - Added "Restore to default" option to current * (default) presets
 - Added "Minimize to tray" settings option
 - Fixed preset selection when clicked on list with RMB
 - Improved calendar records count on month break
 
-2.0.137 (2024-01-31)
+# 2.0.137 (2024-01-31)
 
 - Improved Agent / Autonomous mode handling
 - Added "Remove file from index" option in file-explorer
 - Other small fixes 
 
-2.0.136 (2024-01-31)
+# 2.0.136 (2024-01-31)
 
 - Improved integration of Agent mode with llama-index sub-mode
 - Updated documentation and locales
 
-2.0.135 (2024-01-31)
+# 2.0.135 (2024-01-31)
 
 - Fixed issue where the agent would stop after the first run in Agent mode when the number of iterations was set to non-infinity.
 - Added "Agent" section in the settings, with options to select the sub-mode to use (Chat, Completion, Langchain, Llama-index, etc.) and an option to choose the index to use.
 - Implemented a feature to display the current run status in Agent mode.
 
-2.0.134 (2024-01-30)
+# 2.0.134 (2024-01-30)
 
 - Updated models list
 
-2.0.133 (2024-01-30)
+# 2.0.133 (2024-01-30)
 
-- Added the ability for autonomous image generation using the "DALL-E (inline)" plugin in "Agent mode".
-- Added a "Redo" option to the "Painter/Draw" tool.
-- Enabled Vision in "Agent mode".
+- Added the ability for autonomous image generation using the `DALL-E (inline)` plugin in `Agent mode`.
+- Added a `Redo` option to the `Painter/Draw` tool.
+- Enabled Vision in `Agent mode`.
 
-2.0.132 (2024-01-30)
+# 2.0.132 (2024-01-30)
 
-- Experimental: Added new working mode: "Agent (autonomous)", which works similarly to the "Autonomous Mode" plugin but as a separate mode with editable system prompt presets.
-- Renamed "Autonomous Mode" plugin to "Autonomous Mode (inline)".
+- Experimental: Added new working mode: `Agent (autonomous)`, which works similarly to the `Autonomous Mode` plugin but as a separate mode with editable system prompt presets.
+- Renamed `Autonomous Mode` plugin to `Autonomous Mode (inline)`.
 - Fixed real-time system prompt tokens calculation update.
 - Fixed preset saving in editor.
 - Updated icons' fill color.
 
-2.0.131 (2024-01-30)
+# 2.0.131 (2024-01-30)
 
 - Fix: set a limited height for list items in editable lists within the options.
 - Added new plugin: `System Prompt Extra`: plugin appends additional system prompts (extra data) from a list to every current system prompt. You can enhance every system prompt with extra instructions that will be automatically appended to the system prompt.
 - Added a list of prompts for define and use in the `Autonomous Mode` plugin (the previous division into "normal" and "extended" prompts has been replaced with an unlimited, user-editable list).
 - Added textarea stretch on dialog resize in dictionary options editor
 - Introduced a new `duplicate` option in the context list (it copies the selected context to a new one).
 
-2.0.130 (2024-01-29)
+# 2.0.130 (2024-01-29)
 
-- Added status indicator in Tray - issue #12
+- Added status indicator in Tray - feature [#12](https://github.com/szczyglis-dev/py-gpt/issues/12)
 - Added icons to tabs, tray and context menus
 - Added "Files and attachments" section in Settings
 
-2.0.129 (2024-01-29)
+# 2.0.129 (2024-01-29)
 
 - Added Material Design SVG icons (by Google)
 - Added icon resources compiler script
 - Improved file explorer
 
-2.0.128 (2024-01-29)
+# 2.0.128 (2024-01-29)
 
 - Added improvements to RMB context menu handling in Files
 - Improved generation of names for duplicated files
 
-2.0.127 (2024-01-28)
+# 2.0.127 (2024-01-28)
 
-- Added ability to auto-store (in the "%workdir%/upload" directory) local copies of attachments uploaded from outside the workdir.
-- Added an option in the general settings dialog: "Store attachments in the workdir upload directory", default: True
-- Added an option for storing everything in the "data" directory: "Store images, capture and uploads in data directory", default: False
+- Added ability to auto-store (in the `%workdir%/upload` directory) local copies of attachments uploaded from outside the workdir.
+- Added an option in the general settings dialog: `Store attachments in the workdir upload directory`, default: True
+- Added an option for storing everything in the `data` directory: `Store images, capture and uploads in data directory`, default: False
 
-2.0.126 (2024-01-28)
+# 2.0.126 (2024-01-28)
 
-- New features in file explorer (Files tab):
+- New features in file explorer (`Files` tab):
 
 - Create empty file
 - Create directory
 - Upload files to selected directory
 - Download file or directory
 - Duplicate file or directory
 - Use as attachment
 - Ask for read this file
 - Copy working/system path to input and clipboard
 
-2.0.125 (2024-01-28)
+# 2.0.125 (2024-01-28)
 
 - Fixed chars encoding in save text to file option
 
-2.0.124 (2024-01-28)
+# 2.0.124 (2024-01-28)
 
 - Fixed Vision checkbox visibility when switching to plain-text mode
 - Added RMB context menu option "Save as..." to selected text for saving selected text (or whole document) to a text file
 - Added remembering the last used directory for uploading attachments/saving files
 
-2.0.123 (2024-01-27)
+# 2.0.123 (2024-01-27)
 
 - Standarized models names
-- Added "Recursive directory indexing" option in "Settings / Indexes (Llama-index)" (default: False)
+- Added `Recursive directory indexing` option in `Settings / Indexes (Llama-index)` (default: False)
 
-2.0.122 (2024-01-27)
+# 2.0.122 (2024-01-27)
 
-- Added new OpenAI model released on 2024-01-25: "gpt-4-0125-preview"
+- Added new OpenAI model released on 2024-01-25: `gpt-4-0125-preview`
 - Added ability to add custom offline data loaders for Llama-index
-- Improved debugging and logging, added debug levels, and introduced a new section "Debugging and Logging" in the documentation
+- Improved debugging and logging, added debug levels, and introduced a new section `Debugging and Logging` in the documentation
 - Moved inline styles to external CSS classes
-- Renamed "pygpt_net.provider.llm" to "pygpt_net.provider.llms"
+- Renamed `pygpt_net.provider.llm` to `pygpt_net.provider.llms`
 
-2.0.121 (2024-01-27)
+# 2.0.121 (2024-01-27)
 
 - Fixed query error when using Query mode in Chat with files mode with enabled plugins
 - Added a bridge/abstraction layer between modes
 - Hid the assistant checkbox in the preset editor
 
-2.0.120 (2024-01-26)
+# 2.0.120 (2024-01-26)
 
 - Fixed font-size restore when switching between plain text and markdown renderer
 - Added RMB context menu option "Clear files" to input Attachments tab.
 
-2.0.119 (2024-01-25)
+# 2.0.119 (2024-01-25)
 
 - Fixed list selection loose after async command execution
 - Added "Start minimized" option in settings
 - Updated docs
 
-2.0.118 (2024-01-25)
+# 2.0.118 (2024-01-25)
 
 - Added "Show tray icon" option in "Settings"
 - Added launcher arguments
 - Updated docs
 - Small fixes
 
-2.0.117 (2024-01-24)
+# 2.0.117 (2024-01-24)
 
-- Added a new feature to the "Command: Files I/O" plugin - "Get and upload file as attachment". It lets automatically read files from "data" folder and send them as attachments - just ask to send a file as an attachment and the model will send it to itself (like sending an image for analysis). Option is disabled by default in the plugin"s settings.
-- Added a new plugin: "Command: Serial port / USB". This plugin lets you read and send any commands to USB ports (so you can control robots now ;) ).
+- Added a new feature to the `Command: Files I/O` plugin - `Get and upload file as attachment`. It lets automatically read files from `data` folder and send them as attachments - just ask to send a file as an attachment and the model will send it to itself (like sending an image for analysis). Option is disabled by default in the plugin`s settings.
+- Added a new plugin: `Command: Serial port / USB`. This plugin lets you read and send any commands to USB ports (so you can control robots now ;) ).
 - Made it possible to use URLs for images when not using the vision feature.
 - Fixed saving and reloading prompts in Assistant mode.
 - Removed display of empty external images from the output.
 
-2.0.116 (2024-01-24)
+# 2.0.116 (2024-01-24)
 
 - Fixed font color in light themes
 - Fixed layout display on Windows systems
-- Theme, Language and Debug menus moved to Config menu - issue #10
+- Theme, Language and Debug menus moved to Config menu - feature [#10](https://github.com/szczyglis-dev/py-gpt/issues/10)
 - Added Developer section in Settings
 - Fixed list options editing
 - Refactored code and updated tests
 
-2.0.115 (2024-01-22)
+# 2.0.115 (2024-01-22)
 
 - Added token recalculation after the attachments list is changed and upon copy/pasting into the input field.
 - Added descriptions to the settings.
 - Improved the "Copy selected text to..." option.
 
-2.0.114 (2024-01-21)
+# 2.0.114 (2024-01-21)
 
 - Fixed broken CSS on Windows
-- Added support for Vector Store databases: "Chroma", "Elasticsearch", "Pinecone" and "Redis" (beta)
+- Added support for Vector Store databases: `Chroma`, `Elasticsearch`, `Pinecone` and `Redis` (beta)
 - Added config options for selecting and configuring Vector Store providers
 - Added ability to extend PyGPT with custom Vector Store providers
-- Added commands to the "Vision (inline)" plugin: get camera capture and make screenshot. Options must be enabled in the plugin settings. When enabled, they allow the model to capture images from the camera and make screenshots itself.
-- Added "Query index only (without chat)" option to "Chat with files" mode.
-- Added stream mode support to query index mode in "Chat with files".
+- Added commands to the `Vision (inline)` plugin: get camera capture and make screenshot. Options must be enabled in the plugin settings. When enabled, they allow the model to capture images from the camera and make screenshots itself.
+- Added `Query index only (without chat)` option to `Chat with files` mode.
+- Added stream mode support to query index mode in `Chat with files`.
 
-2.0.113 (2024-01-20)
+# 2.0.113 (2024-01-20)
 
 - Added %workdir% placeholder to attachments and images files paths storage for more flexibility in moving data between environments
 - Refactored base plugin options handling
 
-2.0.112 (2024-01-19)
+# 2.0.112 (2024-01-19)
 
 - Fixed image variants slider in image mode
 - Fixed vision checkbox visibility
 - Fixed user directory path when handling different directories/symlinks
 - Added config option for disable opening image dialog after image generate
 - Added Scheduled tasks entry in taskbar dropdown
 - Added * (asterisk) indicator after date modified if newer than last indexed time
 - Date of modified in file explorer changed to format YYYY-MM-DD HH:MM:SS
 
-2.0.111 (2024-01-19)
+# 2.0.111 (2024-01-19)
 
 - Fixed: opening files and directories in Snap and Windows versions
 - Fixed: camera capture handling between mode switch
 - Added: info about snap connect camera in Snap version (if not connected)
 - Added: missing app/tray icon in compiled versions
 
-2.0.110 (2024-01-19)
+# 2.0.110 (2024-01-19)
 
-- Fixed bug: history file clear on ctx remove - issue #9
+- Fixed bug: history file clear on ctx remove - Issue [#9](https://github.com/szczyglis-dev/py-gpt/issues/9)
 - Vision inline allowed in modes: Langchain and Chat with files (llama-index)
 - Event names moved to Event class
 
-2.0.109 (2024-01-18)
+# 2.0.109 (2024-01-18)
 
-- Fixed bug: float inputs value update behaviour - issue #8
-- Added: plugin description tooltips - issue #7
-- Added: focus window on "New context..." in tray - issue #13
-- Added: Ask with screenshot option to tray menu - issue #11
-- Added: Open Notepad option to tray menu - issue #14
+- Fixed bug: float inputs value update behaviour - Issue [#8](https://github.com/szczyglis-dev/py-gpt/issues/8)
+- Added: plugin description tooltips - Issue [#7](https://github.com/szczyglis-dev/py-gpt/issues/7)
+- Added: focus window on "New context..." in tray - Issue [#13](https://github.com/szczyglis-dev/py-gpt/issues/13)
+- Added: Ask with screenshot option to tray menu - Issue [#11](https://github.com/szczyglis-dev/py-gpt/issues/11)
+- Added: Open Notepad option to tray menu - Issue [#14](https://github.com/szczyglis-dev/py-gpt/issues/14)
 
-2.0.108 (2024-01-16)
+# 2.0.108 (2024-01-16)
 
 - Added confirmation dialogs on indexing
 - Added missing translations
 - Updated dependencies: openai, cryptography, certifi, urllib, jinja
 
-2.0.107 (2024-01-16)
+# 2.0.107 (2024-01-16)
 
 - Fixed model change in vision plugin
 - Fixed completion API error
 - Removed deprecated davinci and replaced with 3.5-turbo-instruct model
 
-2.0.106 (2024-01-15)
+# 2.0.106 (2024-01-15)
 
 - Added "undo" action in drawing window
 - Refactored locale handling
 - Improved locale and theme overriding
 
-2.0.105 (2024-01-15)
+# 2.0.105 (2024-01-15)
 
-- Extended 'Theme' menu with new options
-- 'Index (llama-index)' mode changed name to 'Chat with files' mode
+- Extended `Theme` menu with new options
+- `Index (llama-index)` mode changed name to `Chat with files` mode
 - Refactored theme controller
 - Fixed model config providing to llama-index mode
 
-2.0.104 (2024-01-14)
+# 2.0.104 (2024-01-14)
 
 - Langchain support refactored and fixed
 - Added editor for models
 - Added options for customize arguments and environment vars passed to langchain and llama providers
 - Added context length limit in modes: langchain and llama-index
 - Models configuration integrated between GPT/Langchain/Llama-index
 
-2.0.103 (2024-01-13)
+# 2.0.103 (2024-01-13)
 
 - Llama-index mode, now integrated with context from the database, streaming, plugins, and more, can be utilized as any other mode and is no longer limited to just querying indexes.
 
-2.0.102 (2024-01-13)
+# 2.0.102 (2024-01-13)
 
 - Added presets for llama-index mode
 - Added custom system prompt in llama-index mode
 - Added option to use online data loaders in settings
 - Added hiding of chat footer in non-chat tabs
 - Added missing libraryfor epub data loader
 
-2.0.101 (2024-01-13)
+# 2.0.101 (2024-01-13)
 
 - User interface improvements
 - Added help tips
 
-2.0.100 (2024-01-13)
+# 2.0.100 (2024-01-13)
 
 - Llama-index integrated with database - you can now indexing all conversations and use them as additional context
 - Added support for multiple indexes at once
 - Added configuration for llama-indexes
 - Data-dir in home directory changed name from 'output' to 'data'
 
-2.0.99 (2024-01-12)
+# 2.0.99 (2024-01-12)
 
 - Added configuration sections in settings dialog
 - Added translations to file explorer
 - Langchain migrated to langchain community
 - Config patchers moved to separated classes
 - Fixed some UI issues
 
-2.0.98 (2024-01-12)
+# 2.0.98 (2024-01-12)
 
 - UI fixes
 
-2.0.97 (2024-01-11)
+# 2.0.97 (2024-01-11)
 
 - DALL-E config fix
 
-2.0.96 (2024-01-11)
+# 2.0.96 (2024-01-11)
 
 - Added integration with Llama-index (experimental): you can now index/embed files from the data directory and use them as additional data in context.
 - Added an inline plugin for Llama-index (allows providing additional context from Llama-index in any chat mode).
 - Built-in file loaders: text files, pdf, csv, md, docx, json, epub, xlsx
 - Added a new mode: Index (llama-index), it is a mode for querying the index directly.
 - Improved DALL-E 3 configuration, 16:9 images set as default, added config option for standard and HD mode.
 - Improved drawing mode.
 
-2.0.95 (2024-01-10)
+# 2.0.95 (2024-01-10)
 
 - Added capture from camera feature in image drawing mode
 
-2.0.94 (2024-01-10)
+# 2.0.94 (2024-01-10)
 
 - Improved drawing: added canvas, image load/save, store and restore drawing on start and more
 - Improved dict option editor: added type fields
 
-2.0.93 (2024-01-10)
+# 2.0.93 (2024-01-10)
 
 - Added painter (simple image drawing) - it allows to quick draw images and provide them into vision model
 - Small UI fixes
 
-2.0.92 (2024-01-10)
+# 2.0.92 (2024-01-10)
 
 - Fixed bug with system prompt append from main window
 - Added editor for list options (via RMB -> Edit...)
 - User/AI names and temperature removed from main window
 - UI fixes
 
-2.0.91 (2024-01-09)
+# 2.0.91 (2024-01-09)
 
 - Added new plugin: Crontab / Task scheduler: the plugin provides cron-based job scheduling - you can now schedule tasks/prompts to be sent at any time using cron-based syntax for task setup.
 - Added combo-box to configuration option types
 - Fixed incorrect contexts count in date calculation when timezone is different from UTC
 - Fixed incorrect paragraph formatting after command DIV in the last line of response
 - Other small fixes and improvements
 
-2.0.90 (2024-01-08)
+# 2.0.90 (2024-01-08)
 
 - Fixed config load defaults bug
 - Refactored configurations core
 - Small UI fixes
 
-2.0.89 (2024-01-07)
+# 2.0.89 (2024-01-07)
 
 - Added secondary, extended prompt to autonomous mode configuration (it allows quick switching between standard and more extended reasoning).
 - Fixed user input disappearance in history when appending inside autonomous mode.
 
-2.0.88 (2024-01-07)
+# 2.0.88 (2024-01-07)
 
 - Added color labels to context items (you can now mark item on list with 'Set label color...' context menu option)
 - Improved storage of notepad and calendar items
 
-2.0.87 (2024-01-07)
+# 2.0.87 (2024-01-07)
 
 - Fixed paragraph formatting and font color.
 - Implemented automatic database backup creation prior to all migrations.
 - Added functionality to search contexts using both fields in a single query: search string and date range.
 
-2.0.86 (2024-01-07)
+# 2.0.86 (2024-01-07)
 
 - Fixed window state saving on exit
 - Added focus on input on creating new context
 
-2.0.85 (2024-01-07)
+## 2.0.85 (2024-01-07)
 
 - Improved Autonomous mode
 - Added synchronous command execution from plugins, which now allows the Autonomous mode to use the output of other plugins (such as access to the websearch engine, access to filesystem and code execution or generating images in DALL-E) and retrieve and use response from them internally
 - Fixed system prompt for Autonomous mode: resolved the problem of command generation interruptions between responses, and incorporated the capability for user to send additional instructions and update goals in real-time
 - Fixed loss of selection on the modes and models list in Autonomous mode
 
-2.0.84 (2024-01-06)
+## 2.0.84 (2024-01-06)
 
 - The "Self-Loop" plugin has been completely redesigned, improved, and renamed to the Autonomous Mode, which enables the launch of autonomous reasoning in a looped AI-with-AI conversation mode.
 - A system prompt option has been added to the plugin configuration with instructions for the autonomous mode.
 - Auto-stop after goal is reached option is added also to plugin settings.
 
-2.0.83 (2024-01-06)
+## 2.0.83 (2024-01-06)
 
 - Added calendar, day notes (memos) and color labels
 - Added context search filter by date (days selected in calendar)
 - Added 'clear' icon in search input
 - Small fixes and improvements
 
-2.0.82 (2024-01-05)
+## 2.0.82 (2024-01-05)
 
 - Plain text append scroll fix
 
-2.0.81 (2024-01-05)
+## 2.0.81 (2024-01-05)
 
 - Added Edit context menu option in models list (JSON file edit)
 - Fixed link color in light theme css
 - Fixed font color restore when switching to plain text
 
-2.0.80 (2024-01-05)
+## 2.0.80 (2024-01-05)
 
 - Added Plain Text checkbox at the bottom of chat window
 - Removed datetime append when copying text to notepad
 - Improved plain-text mode
 
-2.0.79 (2024-01-05)
+## 2.0.79 (2024-01-05)
 
 - Fixed bug: notepad save/load content from DB
 
-2.0.78 (2024-01-05)
+## 2.0.78 (2024-01-05)
 
 - Improved markdown formatting
 - Output text renderers moved to separated modules
 - Added plain-text render option in settings
 - Vision inline disabled in unsupported modes (Image generation and Assistant) and hidden in Vision (always enabled here)
 - Updated OpenAI Chat Completion API
 
-2.0.77 (2024-01-05)
+## 2.0.77 (2024-01-05)
 
 - Fixed inline plugins disable when pausing command plugins by unchecking 'Execute commands' checkbox
 - Added real-time image appending into chat window when generating images in Image Generation mode
 - Added automatic creation of context after deletion from the list when no other context is selected
 - Updated docs
 
-2.0.76 (2024-01-04)
+## 2.0.76 (2024-01-04)
 
 - Markdown post-process changed from markdown extension to BS4 html parser.
 
-2.0.75 (2024-01-04)
+## 2.0.75 (2024-01-04)
 
 - Improved default theme for markdown styling
 - Added "Check for updates on start-up" config option in updater dialog
 - Added custom CSS stylesheets editor in Config menu
 - Added password show/hide in password/secret input fields (click on the right corner of input reveals plain text)
 - Fixed JSON files editing (added data reloading after save to prevent overwrite on exit)
 - Added tests for plugins and extended tests for core/controllers
 
-2.0.74 (2024-01-03)
+## 2.0.74 (2024-01-03)
 
 - Fixed timestamp position when appending input to the chat window.
-- Extended the Markdown parser with an extension for converting <li> to <p> (it allows copying lists bullets with Ctrl-C).
+- Extended the Markdown parser with an extension for converting `li` to `p` (it allows copying lists bullets with Ctrl-C).
 - Added notebook titles to the "Copy to..." context menu.
 - Added an "Open file" option in the file explorer and attachments list.
 
-2.0.73 (2024-01-03)
+## 2.0.73 (2024-01-03)
 
 - Fixed vision prompt appending
 - Improved inline vision: removed the "keep" option and added a vision indicator with a checkbox for quickly enabling/disabling the vision model if needed (will auto-enable when an image is provided if the plugin is active)
 
-2.0.72 (2024-01-02)
+## 2.0.72 (2024-01-02)
 
 - Fixed markdown / HTML formatting
 - Added config option "Use color theme in chat window" in main settings
 - Added configuration for system prompt to use with vision in Vision Inline plugin settings
 
-2.0.71 (2024-01-01)
+## 2.0.71 (2024-01-01)
 
 - Added Markdown and HTML formatting in the chat window (beta version)
 - Added the display of images, files and URLs internally in the chat window
 - Added fully integration with images, attachments, and files inside the chat window
 - Added vision capture and image generation directly into the chat window (via the DALL-E Inline plugin)
 - Improved audio speech generation (eliminated the silence that prematurely truncated the previous audio output before generating the next speech synthesis)
 
-2.0.70 (2023-12-31)
+## 2.0.70 (2023-12-31)
 
 - Added commands part strip from speech generation
 - Added img check for links sending to vision in auto mode
 
-2.0.69 (2023-12-31)
+## 2.0.69 (2023-12-31)
 
 - Added a new plugin: GPT-4 Vision (inline - in any chat). Plugin integrates vision capabilities with any chat mode, not just Vision mode. When the plugin is enabled, the model temporarily switches to vision in the background when an image attachment or vision capture is provided.
 
-2.0.68 (2023-12-31)
+
+## 2.0.68 (2023-12-31)
 
 - Added a new plugin: DALL-E 3 Image Generation (inline) which enables image generation in any chat and mode, seamlessly in the background - just request an image from any model, like GPT-4, and it will generate it "inline."
 - User Interface optimizations.
 - Added type hints to the code.
 - Fixed issue with sending attachments in Assistant mode.
 
-2.0.67 (2023-12-30)
+## 2.0.67 (2023-12-30)
 
 - Notepad restore fix
 
-2.0.66 (2023-12-30)
+## 2.0.66 (2023-12-30)
 
 - Added "Rename" option to Notepad Tabs (via RMB)
 - Improved language switching
 
-2.0.65 (2023-12-30)
+## 2.0.65 (2023-12-30)
 
 - Image generation, vision capture and assistants run listeners moved to async threadpool
 - Added saving state of scroll value in chat window
 - Added search string save and restore
 - Added input text save and restore
 - Updated tests and code cleanup
-- Added translations (only main app): DE, ES, FR, IT, UA
+- Added translations (only main app): DE, ES, FR, IT, UA 
 - Small fixes and optimizations
 
-2.0.64 (2023-12-29)
+## 2.0.64 (2023-12-29)
 
 - Commands and plugins execution moved to asynchronous native QT threadpool
 - Improved theme switching
 - Improved debugger window
 - Small fixes and optimizations
 
-2.0.63 (2023-12-28)
+# 2.0.63 (2023-12-28)
 
 - Fixed context append bug
 - Improved layout resize
 
-2.0.62 (2023-12-28)
+## 2.0.62 (2023-12-28)
 
 - Fixed date display on context list
 - Added mode display in context tooltips
 - Added "Contexts list records limit" config option in settings
 - Added tokens calculator tooltips
 
-2.0.61 (2023-12-28)
+## 2.0.61 (2023-12-28)
 
 - DALL-E multiple messages in one context fix
 
-2.0.60 (2023-12-28)
+## 2.0.60 (2023-12-28)
 
 - Message append fix
 
-2.0.59 (2023-12-28)
+## 2.0.59 (2023-12-28)
 
 - Storage of context has been changed from JSON files to SQLite database, automatic migration is included - you will not lose your existing data after update :)
 - Added "Search" functionality for contexts and a search input at the bottom.
 - Updated contexts now automatically land at the top of the list.
 - Added the ability to store more information about each context.
 - Integration of searching, utilizing SQLite, and vector database search coming soon.
 - Improved DALL-E image generation.
 
-2.0.58 (2023-12-27)
+## 2.0.58 (2023-12-27)
 
 - Code refactor
 - Added stream response mode to Vision mode
 - Added token calculation to Langchain mode
 - Optimizations and small fixes
 
-2.0.57 (2023-12-26)
+## 2.0.57 (2023-12-26)
 
 - Added threadpool for async workers handling
 - Fixed segmentation fault error on app exit
 - Refactored class names
 
-2.0.56 (2023-12-25)
+## 2.0.56 (2023-12-25)
 
 - Reorganized project structure
 - Relative imports changed to absolute imports
 - Updated core paths
 - Fixed plugin response hanging
 - Fixed recursion problem in error logger
 - Fixed platform module name
 
-2.0.55 (2023-12-25)
+## 2.0.55 (2023-12-25)
 
 - Fixed max model ctx tokens 
 
-2.0.54 (2023-12-25)
+## 2.0.54 (2023-12-25)
 
 - Updater new version check moved to post-setup
 - Fixed default assistant preset
 - Added link to Snap Store to updater window
 
-2.0.52 (2023-12-25)
+## 2.0.52 (2023-12-25)
 
 - Added DPI option in settings: enable/disable and scale factor
 - Fixed font-size change with mouse scroll on notepad window
 
-2.0.51 (2023-12-25)
+## 2.0.51 (2023-12-25)
 
 - Added auto-content truncate before tokens limit exceeded
 - Added dynamic max tokens switching
 - Fixed real-time tokens calculation
 
-2.0.50 (2023-12-25)
+## 2.0.50 (2023-12-25)
 
 - Fixed async logging
 - Updated tests
 
-2.0.49 (2023-12-24)
+## 2.0.49 (2023-12-24)
 
 - Fixed crash on async command call
 - Fixed UI issues
 - Added data providers
 - Refactored classes
 
-2.0.48 (2023-12-23)
+## 2.0.48 (2023-12-23)
 
 - Added custom errors handler with logging.
 
-2.0.47 (2023-12-23)
+## 2.0.47 (2023-12-23)
 
 - Added "Copy to Notepad/Input" to the context menu for selected text.
 - Added an option to read selected text using speech synthesis in the Notepad window.
 - Added a configurable number of notepads.
 - Refactored UI classes.
 - Added a thread-safe plugin debugger/logger.
 - Fixed UI issues.
 
-2.0.46 (2023-12-22)
+## 2.0.46 (2023-12-22)
 
 - Improved tokens calculation (added extra tokens from plugins to real-time calculation)
 - Added new context menu option to selected text in output/input: "Read with speech synthesis"
 
-2.0.45 (2023-12-22)
+## 2.0.45 (2023-12-22)
 
 - Added "light" themes
 - Fixed tokens calculation
 - Updated tests
 
-2.0.44 (2023-12-21)
+## 2.0.44 (2023-12-21)
 
 - Fixed language switch in plugins settings
 
-2.0.43 (2023-12-21)
+## 2.0.43 (2023-12-21)
 
 - PyGPT publicated at Snap Store: https://snapcraft.io/pygpt
 - Added link to Snap Store in app menu
 
-2.0.42 (2023-12-20)
+## 2.0.42 (2023-12-20)
 
 - Audio output library changed to `PyGame` mixer (instead of `PyDub`)
 - Added `PyGame` as a dependency and removed `PyDub` and `simpleaudio` dependencies
 - Added audio input/output stop immediately on plugin disable
 
-2.0.41 (2023-12-20)
+## 2.0.41 (2023-12-20)
 
 - Added "sandbox" feature to the Code Interpreter – it allows the use of any Docker image as an environment for code and commands execution.
 - Context auto-summary moved to an async thread.
 - Command execution moved to an async thread.
 
-2.0.40 (2023-12-19)
+## 2.0.40 (2023-12-19)
 
 - Totally improved material themes support
 - Added QSS-configurable themes to chat output window and code highlighter
 - Added ability to overriding styles per any theme in user directory
 - Fixed UI layout elements
 - Fixed DPI issues in Windows systems
 
-2.0.39 (2023-12-18)
+## 2.0.39 (2023-12-18)
 
 - Fixed dialogs closing with the Esc key
 - Added an indicator for "can append to context in this mode"
 - Added functionality to fetch filenames from the API when importing files uploaded to Assistants
 - Enabled switching to newly created Assistants after creation
 - Optimized class structure
 
-2.0.38 (2023-12-18)
+## 2.0.38 (2023-12-18)
 
 - Multi-language support added to plugins
 - Implemented feature to override locale and CSS files by overwriting them in the home directory
 - Bug fixes
 
-2.0.37 (2023-12-18)
+## 2.0.37 (2023-12-18)
 
 - Fixed prompt typing in real-time on the right toolbox
 - Added toolbox font change option
 - Simplified custom plugins and wrappers for LLMs application (see Docs for more details)
 - Bug fixes
 - UI fixes
 
-2.0.36 (2023-12-18)
+## 2.0.36 (2023-12-18)
 
 - Improved plugins handling
 - Added Event Dispatcher and event-based system
 
-2.0.35 (2023-12-18)
+## 2.0.35 (2023-12-18)
 
 - Fixed lists focus lost and selection disappearing
 - Added clickable links to API keys pages
 - Added scroll position store in notepads
 - Auto auto-switch to preset after create
 - Assistants files and thread moved to external classes
 - UI fixes
 - Code fixes
 
-2.0.34 (2023-12-17)
+## 2.0.34 (2023-12-17)
 
 - Added option "Lock incompatible modes" to prevent mixing of incompatible contexts.
 - Added PyPI link to the About menu. 
 
-2.0.33 (2023-12-17)
+## 2.0.33 (2023-12-17)
 
 - Fixed dialog's save/update button handlers
 - Fixed uploaded files reload in assistants
 - Fixed focus loss on assistants list
 - Fixed Output Files header
 - Fixed UI
 - Added delete confirmation to dictionary options
 - Added context change lock before response generation
 - Added allowed types for contexts
 - Added a link to the documentation in the menu
 - Added saving state of opened advanced options in plugins
 - Disabled mouse scroll on sliders
 
-2.0.32 (2023-12-16)
+## 2.0.32 (2023-12-16)
 
 - Added real-time font-size change with CTRL + mouse scroll in input, output and notepad windows
 - Increased allowed font-size to 42
 - Fixed line display in plugin settings
 
-2.0.31 (2023-12-16)
+## 2.0.31 (2023-12-16)
 
 - Speech recognition (Whisper) small fixes, optimization and improvements
 - Added advanced internal options to speech recognition config
 
-2.0.30 (2023-12-15)
+## 2.0.30 (2023-12-15)
 
 - Speech recognition and synthesis fixes and improvements
 - Fixed and improved speech recognition via Whisper
 - Fixed and improved voice synthesis via OpenAI TTS and MS Azure
-- Added new options to speech recognition: magic words, stop words, prefix words, auto-send and wait for response
+- Added new options to speech recognition: magic words, stop words, auto-send and wait for response
 - Added new more intuitive voice input/output control panel in UI
 
-2.0.29 (2023-12-14)
+## 2.0.29 (2023-12-14)
 
 - Added config and plugin options getters/setters
 - Changed logo
 - Small UI fixes
 
-2.0.28 (2023-12-14)
+## 2.0.28 (2023-12-14)
 
 - Added new hidden Credentials/API Key field type (asterisks against plain-text)
 - Simplified presets editing
 - Fixed Assistants function management
 - Improved UI
 - Improved settings editing
 
-
-2.0.27 (2023-12-14)
+## 2.0.27 (2023-12-14)
 
 - Added specified "url open" command to Web Search plugin
 - Added additional advanced options to above plugins
 - Improved Web Search and Commands Execution
 - Improved updater and config patcher
 - Improved command execution logging
 
-2.0.26 (2023-12-13)
+## 2.0.26 (2023-12-13)
 
 - Added advanced config options for plugins
 - Added additional file operations to Files I/O plugin
 
-2.0.25 (2023-12-13)
+## 2.0.25 (2023-12-13)
 
 - Added advanced settings
 - Added clear on capture config option
 - Added capture quality config option
 - Added launcher shortcuts
 - Improved plugins
 - Improved WebSearch
 - Optimized commands response
 - Fixed UI issues
 
-2.0.24 (2023-12-12)
+## 2.0.24 (2023-12-12)
 
 - Fixed empty string in tokens calculator
 - Added attachments reset before auto-capture from camera
 
-2.0.23 (2023-12-12)
+## 2.0.23 (2023-12-12)
 
 - Improved python code execution
 
-2.0.22 (2023-12-12)
+## 2.0.22 (2023-12-12)
 
 - Fix: env API KEY name for Langchain mode
 
-2.0.21 (2023-12-12)
+## 2.0.21 (2023-12-12)
 
 - Simplified assistant configuration
 - Added assistant configuration validation
 - Improved UI
 - Improved language switcher
 
-2.0.20 (2023-12-11)
+## 2.0.20 (2023-12-11)
 
 - Improved Assistants API
 - Added assistant uploaded files storage
 - Added assistant uploaded files management
 - Added assistant remote functions management
 - Fixed "open in directory" option on Windows in DALL-E image generation
 - Improved attachments and file upload management
 - Improved UI and more
 
-2.0.19 (2023-12-10)
+## 2.0.19 (2023-12-10)
 
 - Optimized DALL-E prompt generator helper
 
-2.0.18 (2023-12-10)
+## 2.0.18 (2023-12-10)
 
 - Config fix
 
-2.0.17 (2023-12-10)
+## 2.0.17 (2023-12-10)
 
 - Small fixes
 
-2.0.16 (2023-12-10)
+## 2.0.16 (2023-12-10)
 
 - Added multiple cameras config
 - Added DALL-E prompt generation RAW MODE ON/OFF switch
 - Improved camera handling
 
-2.0.15 (2023-12-10)
+## 2.0.15 (2023-12-10)
 
 - Added camera release / disable on camera off
 
-2.0.14 (2023-12-10)
+## 2.0.14 (2023-12-10)
 
 - Added real-time video capture from camera in "Vision" mode
 
-2.0.13 (2023-12-10)
+## 2.0.13 (2023-12-10)
 
 - Fixed path resolving in "open in directory" option on Windows OS
 - Added real-time apply of "layout density" (after "save changes" in Settings)
 - Default "layout density" changed to 0
 - Updated locale
 
-2.0.12 (2023-12-09)
+## 2.0.12 (2023-12-09)
 
 - Improved system commands execution
 
-2.0.11 (2023-12-09)
+## 2.0.11 (2023-12-09)
 
 - Small fixes
 
-2.0.10 (2023-12-09)
+## 2.0.10 (2023-12-09)
 
 - Updated locale
 
-2.0.9 (2023-12-09)
+## 2.0.9 (2023-12-09)
 
-- Added Command: Custom Commands feature; plugin allows to easily create and execute custom commands
-- Added new features to Command: Files I/O: downloading files, copying files and dirs, moving files and dirs
+- Added `Command: Custom Commands` feature; plugin allows to easily create and execute custom commands
+- Added new features to `Command: Files I/O`: downloading files, copying files and dirs, moving files and dirs
 
-2.0.8 (2023-12-08)
+## 2.0.8 (2023-12-08)
 
 - Improved Web Search plugin
 
-2.0.7 (2023-12-08)
+## 2.0.7 (2023-12-08)
 
 - Improved code execution with Code Interpreter / Files I/O plugins
 
-2.0.6 (2023-12-08)
+## 2.0.6 (2023-12-08)
 
 - Added layout density configuration
 
-2.0.5 (2023-12-08)
+## 2.0.5 (2023-12-08)
 
 - Added support for external CSS
 - Added custom fonts support
 - Improved material theme support
 
-2.0.4 (2023-12-08)
+## 2.0.4 (2023-12-08)
 
 - Added configuration options for plugins: Files I/O, Code Interpreter
 - UI fixes
 
-2.0.3 (2023-12-07)
+## 2.0.3 (2023-12-07)
 
 - Python code execution fix
 
-2.0.2 (2023-12-07)
+## 2.0.2 (2023-12-07)
 
 - Added python command template settings
 - Added layout state restore
 - Refactored settings
 - Improved settings window
 - Bugfixes
 
-2.0.1 (2023-12-07)
+## 2.0.1 (2023-12-07)
 
 - Fixed settings dialog initialization
 - Fixed models.json migration
 - Added enter key behaviour settings
 - Added font size settings for input and context list
 - Added ctx auto-summary settings
 - Added python command plugin settings
 
-2.0.0 (2023-12-05)
+## 2.0.0 (2023-12-05)
+
+New features in version 2.0.0:
 
 - Added support for new models: GPT-4 Turbo, GPT-4 Vision, and DALL-E 3
 - Integrated Langchain with support for any model it provides
 - Assistants API and simple assistant configuration setup
 - Vision and image analysis capabilities through GPT-4 Vision
 - Image generation with DALL-E 3
 - File and attachment support including upload, download, and management
@@ -1136,47 +1558,47 @@
 - Multiple assistants support
 - Command execution support
 - Filesystem access allows GPT to read and write files
 - Asynchronous (stream) mode added
 - Local Python code interpreter that enables code execution by GPT
 - System command executions directly from GPT
 - Voice synthesis provided via Microsoft Azure TTS and OpenAI TTS (Text-To-Speech)
-- Voice recognition facilitated by OpenAI Whisper
+- Voice recognition provided by OpenAI Whisper
 - Automatic summarization of context titles
 - Upgraded Web Browser plugin
 - More precise token calculation functionality
 - Added output markup highlight
 - Improved UX
 - Bug fixes
 - Plus additional enhancements and expanded capabilities
 
-0.9.6 (2023.04.16)
+## 0.9.6 (2023.04.16)
 
 - Added real-time logger
 - Improved debug mode
 
-0.9.5 (2023.04.16)
+## 0.9.5 (2023.04.16)
 
 - Added web plugin (adds access to the Internet using Google Custom Search Engine and Wikipedia API)
 - Added voice output plugin (adds voice synthesis using Microsoft Azure)
 
-0.9.4 (2023.04.15)
+## 0.9.4 (2023.04.15)
 
 - Added plugins support
 
-0.9.3 (2023.04.14)
+## 0.9.3 (2023.04.14)
 
 - Packed into PyPI package
 
-0.9.2 (2023.04.12)
+## 0.9.2 (2023.04.12)
 
 - Added theme color settings
 - Small UI fixes
 
-0.9.1 (2023.04.11)
+## 0.9.1 (2023.04.11)
 
 - Added organization key configuration (by @kaneda2004, PR#1)
 - Added config versions patching
 
-0.9.0 (2023.04.09)
+## 0.9.0 (2023.04.09)
 
-- Initial release
+- Initial release
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/LICENSE` & `pygpt_net-2.2.0/src/pygpt_net/LICENSE`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/__init__.py` & `pygpt_net-2.2.0/src/pygpt_net/__init__.py`

 * *Files 13% similar despite different names*

```diff
@@ -2,23 +2,24 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.03.04 20:00:00                  #
+# Updated Date: 2024.04.28 08:00:00                  #
 # ================================================== #
 
 __author__ = "Marcin Szczygliński"
 __copyright__ = "Copyright 2024, Marcin Szczygliński"
 __credits__ = ["Marcin Szczygliński"]
 __license__ = "MIT"
-__version__ = "2.1.9"
-__build__ = "2024.03.04"
+__version__ = "2.2.0"
+__build__ = "2024.04.28"
 __maintainer__ = "Marcin Szczygliński"
 __github__ = "https://github.com/szczyglis-dev/py-gpt"
 __website__ = "https://pygpt.net"
 __pypi__ = "https://pypi.org/project/pygpt-net"
 __snap__ = "https://snapcraft.io/pygpt"
+__donate__ = "https://pygpt.net/#donate"
 __documentation__ = "https://pygpt.readthedocs.io"
 __email__ = "info@pygpt.net"
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/app.py` & `pygpt_net-2.2.0/src/pygpt_net/app.py`

 * *Files 6% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.03.03 02:00:00                  #
+# Updated Date: 2024.04.17 01:00:00                  #
 # ================================================== #
 
 from pygpt_net.launcher import Launcher
 
 # plugins
 from pygpt_net.plugin.audio_output import Plugin as AudioOutputPlugin
 from pygpt_net.plugin.audio_input import Plugin as AudioInputPlugin
@@ -25,124 +25,137 @@
 from pygpt_net.plugin.extra_prompt import Plugin as ExtraPromptPlugin
 from pygpt_net.plugin.idx_llama_index import Plugin as IdxLlamaIndexPlugin
 from pygpt_net.plugin.openai_dalle import Plugin as OpenAIDallePlugin
 from pygpt_net.plugin.openai_vision import Plugin as OpenAIVisionPlugin
 from pygpt_net.plugin.real_time import Plugin as RealTimePlugin
 from pygpt_net.plugin.agent import Plugin as AgentPlugin
 
-# LLMs wrappers providers (langchain, llama-index)
+# LLM wrapper providers (langchain, llama-index, embeddings)
 from pygpt_net.provider.llms.anthropic import AnthropicLLM
 from pygpt_net.provider.llms.azure_openai import AzureOpenAILLM
 from pygpt_net.provider.llms.hugging_face import HuggingFaceLLM
 from pygpt_net.provider.llms.llama import Llama2LLM
 from pygpt_net.provider.llms.ollama import OllamaLLM
 from pygpt_net.provider.llms.openai import OpenAILLM
 
-# vector stores providers (llama-index)
+# vector store providers (llama-index)
 from pygpt_net.provider.vector_stores.chroma import ChromaProvider
 from pygpt_net.provider.vector_stores.elasticsearch import ElasticsearchProvider
 from pygpt_net.provider.vector_stores.pinecode import PinecodeProvider
 from pygpt_net.provider.vector_stores.redis import RedisProvider
 from pygpt_net.provider.vector_stores.simple import SimpleProvider
 
-# data loaders providers (llama-index)
-from pygpt_net.provider.loaders.file_csv import Loader as CsvLoader  # file: CSV
-from pygpt_net.provider.loaders.file_docx import Loader as DocxLoader  # file: DOCX
-from pygpt_net.provider.loaders.file_epub import Loader as EpubLoader  # file: EPUB
-from pygpt_net.provider.loaders.file_excel import Loader as ExcelLoader  # file: Excel
-from pygpt_net.provider.loaders.file_html import Loader as HtmlLoader  # file: HTML
-from pygpt_net.provider.loaders.file_image_vision import Loader as ImageVisionLoader  # file: Image (vision)
-from pygpt_net.provider.loaders.file_ipynb import Loader as IPYNBLoader  # file: IPYNB
-from pygpt_net.provider.loaders.file_json import Loader as JsonLoader  # file: JSON
-from pygpt_net.provider.loaders.file_markdown import Loader as MarkdownLoader  # file: Markdown
-from pygpt_net.provider.loaders.file_pdf import Loader as PdfLoader  # file: PDF
-from pygpt_net.provider.loaders.file_video_audio import Loader as VideoAudioLoader  # file: mp4
-from pygpt_net.provider.loaders.file_xml import Loader as XmlLoader  # file: XML
-from pygpt_net.provider.loaders.web_bitbucket import Loader as BitbucketRepoLoader  # web: Bitbucket Repository
-from pygpt_net.provider.loaders.web_chatgpt_retrieval import Loader as ChatGptRetrievalLoader  # web: ChatGPT Retrieval Plugin
-from pygpt_net.provider.loaders.web_database import Loader as DatabaseLoader  # web: Database
-from pygpt_net.provider.loaders.web_github_issues import Loader as GithubIssuesLoader  # web: GitHub Issues
-from pygpt_net.provider.loaders.web_github_repo import Loader as GithubRepoLoader  # web: GitHub Repository
-from pygpt_net.provider.loaders.web_google_calendar import Loader as GoogleCalendarLoader  # web: Google Calendar
-from pygpt_net.provider.loaders.web_google_docs import Loader as GoogleDocsLoader  # web: Google Docs
-from pygpt_net.provider.loaders.web_google_drive import Loader as GoogleDriveLoader  # web: Google Drive
-from pygpt_net.provider.loaders.web_google_gmail import Loader as GoogleGmailLoader  # web: Google Gmail
-from pygpt_net.provider.loaders.web_google_keep import Loader as GoogleKeepLoader  # web: Google Keep
-from pygpt_net.provider.loaders.web_google_sheets import Loader as GoogleSheetsLoader  # web: Google Sheets
-from pygpt_net.provider.loaders.web_microsoft_onedrive import Loader as MicrosoftOneDriveLoader  # web: Microsoft OneDrive
-from pygpt_net.provider.loaders.web_rss import Loader as RssLoader  # web: RSS feed
-from pygpt_net.provider.loaders.web_sitemap import Loader as SitemapLoader  # web: Sitemap XML
-from pygpt_net.provider.loaders.web_twitter import Loader as TwitterLoader  # web: Twitter
-from pygpt_net.provider.loaders.web_page import Loader as WebPageLoader  # web: Webpages
-from pygpt_net.provider.loaders.web_yt import Loader as YouTubeLoader  # web: YouTube
+# data loader providers (llama-index)
+from pygpt_net.provider.loaders.file_csv import Loader as CsvLoader
+from pygpt_net.provider.loaders.file_docx import Loader as DocxLoader
+from pygpt_net.provider.loaders.file_epub import Loader as EpubLoader
+from pygpt_net.provider.loaders.file_excel import Loader as ExcelLoader
+from pygpt_net.provider.loaders.file_html import Loader as HtmlLoader
+from pygpt_net.provider.loaders.file_image_vision import Loader as ImageVisionLoader
+from pygpt_net.provider.loaders.file_ipynb import Loader as IPYNBLoader
+from pygpt_net.provider.loaders.file_json import Loader as JsonLoader
+from pygpt_net.provider.loaders.file_markdown import Loader as MarkdownLoader
+from pygpt_net.provider.loaders.file_pdf import Loader as PdfLoader
+from pygpt_net.provider.loaders.file_video_audio import Loader as VideoAudioLoader
+from pygpt_net.provider.loaders.file_xml import Loader as XmlLoader
+from pygpt_net.provider.loaders.web_bitbucket import Loader as BitbucketRepoLoader
+from pygpt_net.provider.loaders.web_chatgpt_retrieval import Loader as ChatGptRetrievalLoader
+from pygpt_net.provider.loaders.web_database import Loader as DatabaseLoader
+from pygpt_net.provider.loaders.web_github_issues import Loader as GithubIssuesLoader
+from pygpt_net.provider.loaders.web_github_repo import Loader as GithubRepoLoader
+from pygpt_net.provider.loaders.web_google_calendar import Loader as GoogleCalendarLoader
+from pygpt_net.provider.loaders.web_google_docs import Loader as GoogleDocsLoader
+from pygpt_net.provider.loaders.web_google_drive import Loader as GoogleDriveLoader
+from pygpt_net.provider.loaders.web_google_gmail import Loader as GoogleGmailLoader
+from pygpt_net.provider.loaders.web_google_keep import Loader as GoogleKeepLoader
+from pygpt_net.provider.loaders.web_google_sheets import Loader as GoogleSheetsLoader
+from pygpt_net.provider.loaders.web_microsoft_onedrive import Loader as MicrosoftOneDriveLoader
+from pygpt_net.provider.loaders.web_rss import Loader as RssLoader
+from pygpt_net.provider.loaders.web_sitemap import Loader as SitemapLoader
+from pygpt_net.provider.loaders.web_twitter import Loader as TwitterLoader
+from pygpt_net.provider.loaders.web_page import Loader as WebPageLoader
+from pygpt_net.provider.loaders.web_yt import Loader as YouTubeLoader
 
-# audio providers
+# audio providers (input, output)
 from pygpt_net.provider.audio_input.openai_whisper import OpenAIWhisper
 from pygpt_net.provider.audio_input.openai_whisper_local import OpenAIWhisperLocal
 from pygpt_net.provider.audio_input.google_speech_recognition import GoogleSpeechRecognition
 from pygpt_net.provider.audio_input.google_cloud_speech_recognition import GoogleCloudSpeechRecognition
 from pygpt_net.provider.audio_input.bing_speech_recognition import BingSpeechRecognition
 from pygpt_net.provider.audio_output.openai_tts import OpenAITextToSpeech
 from pygpt_net.provider.audio_output.ms_azure_tts import MSAzureTextToSpeech
 from pygpt_net.provider.audio_output.google_tts import GoogleTextToSpeech
 from pygpt_net.provider.audio_output.eleven_labs import ElevenLabsTextToSpeech
 
-# web search providers
+# web search engine providers
 from pygpt_net.provider.web.google_custom_search import GoogleCustomSearch
 from pygpt_net.provider.web.microsoft_bing import MicrosoftBingSearch
 
+# tools
+from pygpt_net.tools.indexer import IndexerTool
+from pygpt_net.tools.audio_transcriber import AudioTranscriber as AudioTranscriberTool
+from pygpt_net.tools.code_interpreter import CodeInterpreter as CodeInterpreterTool
+from pygpt_net.tools.image_viewer import ImageViewer as ImageViewerTool
+from pygpt_net.tools.media_player import MediaPlayer as MediaPlayerTool
+from pygpt_net.tools.text_editor import TextEditor as TextEditorTool
+
 
 def run(**kwargs):
     """
     PyGPT launcher.
 
     :param kwargs: keyword arguments for launcher
 
     PyGPT can be extended with:
 
     - Custom plugins
-    - Custom LLMs wrappers
+    - Custom LLM wrappers
     - Custom vector store providers
     - Custom data loaders
     - Custom audio input providers
     - Custom audio output providers
     - Custom web search engine providers
+    - Custom tools
 
-    - You can pass custom plugin instances, LLMs wrappers, vector store providers and more to the launcher.
-    - This is useful if you want to extend PyGPT with your own plugins, vectors storage, LLMs or other data providers.
+    - You can pass custom plugin instances, LLM wrappers, vector store providers and more to the launcher.
+    - This is useful if you want to extend PyGPT with your own plugins, vector storage, LLMs, or other data providers.
 
     First, create a custom launcher file, for example, "custom_launcher.py," and register your extensions in it.
 
-    To register custom plugins create custom launcher, e.g. "custom_launcher.py" and:
+    To register a custom plugin - create the custom launcher, e.g. "custom_launcher.py" and:
+
+    - Pass a list with the plugin instances as the 'plugins' keyword argument.
+
+    To register a custom LLM wrapper:
 
-    - Pass a list with the plugin instances as 'plugins' keyword argument.
+    - Pass a list with the LLM wrapper instances as the 'llms' keyword argument.
 
-    To register custom LLMs wrappers:
+    To register a custom vector store provider:
 
-    - Pass a list with the LLMs wrappers instances as 'llms' keyword argument.
+    - Pass a list with the vector store provider instances as the 'vector_stores' keyword argument.
 
-    To register custom vector store providers:
+    To register a custom data loader:
 
-    - Pass a list with the vector store provider instances as 'vector_stores' keyword argument.
+    - Pass a list with the data loader instances as the 'loaders' keyword argument.
 
-    To register custom data loaders:
+    To register a custom audio input provider:
 
-    - Pass a list with the data loader instances as 'loaders' keyword argument.
+    - Pass a list with the audio input provider instances as the 'audio_input' keyword argument.
 
-    To register custom audio input providers:
+    To register a custom audio output provider:
 
-    - Pass a list with the audio input provider instances as 'audio_input' keyword argument.
+    - Pass a list with the audio output provider instances as the 'audio_output' keyword argument.
 
-    To register custom audio output providers:
+    To register a custom web provider:
 
-    - Pass a list with the audio output provider instances as 'audio_output' keyword argument.
+    - Pass a list with the web provider instances as the 'web' keyword argument.
 
-    To register custom web providers:
+    To register a custom tool:
 
-    - Pass a list with the web provider instances as 'web' keyword argument.
+    - Pass a list with the tool instances as the 'tools' keyword argument.
 
     Example:
     --------
     ::
 
         # custom_launcher.py
 
@@ -150,14 +163,15 @@
         from plugins import CustomPlugin, OtherCustomPlugin
         from llms import CustomLLM
         from vector_stores import CustomVectorStore
         from loaders import CustomLoader
         from audio_input import CustomAudioInput
         from audio_output import CustomAudioOutput
         from web import CustomWebSearch
+        from tools import CustomTool
 
         plugins = [
             CustomPlugin(),
             OtherCustomPlugin(),
         ]
         llms = [
             CustomLLM(),
@@ -173,23 +187,27 @@
         ]
         audio_output = [
             CustomAudioOutput(),
         ]
         web = [
             CustomWebSearch(),
         ]
+        tools = [
+            CustomTool(),
+        ]
 
         run(
             plugins=plugins,
             llms=llms,
             vector_stores=vector_stores,
             loaders=loaders,
             audio_input=audio_input,
             audio_output=audio_output,
-            web=web
+            web=web,
+            tools=tools,
         )
 
     """
     # initialize app launcher
     launcher = Launcher()
     launcher.init()
 
@@ -309,13 +327,27 @@
 
     # register custom vector store providers (llama-index)
     vector_stores = kwargs.get('vector_stores', None)
     if isinstance(vector_stores, list):
         for store in vector_stores:
             launcher.add_vector_store(store)
 
-    # run app
+    # register base tools
+    launcher.add_tool(IndexerTool())
+    launcher.add_tool(MediaPlayerTool())
+    launcher.add_tool(ImageViewerTool())
+    launcher.add_tool(TextEditorTool())
+    launcher.add_tool(AudioTranscriberTool())
+    launcher.add_tool(CodeInterpreterTool())
+
+    # register custom tools
+    tools = kwargs.get('tools', None)
+    if isinstance(tools, list):
+        for tool in tools:
+            launcher.add_tool(tool)
+
+    # run the app
     launcher.run()
     
 
 if __name__ == '__main__':
     run()
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/config.py` & `pygpt_net-2.2.0/src/pygpt_net/config.py`

 * *Files 12% similar despite different names*

```diff
@@ -2,24 +2,26 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.03.04 22:00:00                  #
+# Updated Date: 2024.04.11 02:00:00                  #
 # ================================================== #
 
 import copy
 import datetime
 import os
 import re
+
 from pathlib import Path
 from packaging.version import Version
 
+from pygpt_net.core.profile import Profile
 from pygpt_net.provider.core.config.json_file import JsonFileProvider
 
 
 class Config:
     CONFIG_DIR = 'pygpt-net'
     SNAP_NAME = 'pygpt'
     TYPE_STR = 0
@@ -29,56 +31,123 @@
 
     def __init__(self, window=None):
         """
         Config handler
 
         :param window: Window instance
         """
+        version = self.get_version()
         self.window = window
-        self.path = str(Path(os.path.join(Path.home(), '.config', self.CONFIG_DIR)))
+        self.profile = Profile(window)
+        self.profile.version = version
+        self.profile.init(Config.get_base_workdir())
+        self.path = None
         self.initialized = False
         self.initialized_base = False
+        self.initialized_workdir = False
         self.db_echo = False
         self.data = {}  # user config
         self.data_base = {}  # base config
         self.data_session = {}  # temporary config (session only)
-        self.version = self.get_version()
+        self.version = version
         self.dirs = {
             "capture": "capture",
             "css": "css",
             "data": "data",
             "history": "history",
             "idx": "idx",
             "img": "img",
             "locale": "locale",
             "presets": "presets",
             "upload": "upload",
         }
         self.provider = JsonFileProvider(window)
-        self.provider.path = self.get_user_path()
         self.provider.path_app = self.get_app_path()
         self.provider.meta = self.append_meta()
 
+        if not self.initialized_workdir:
+            workdir = self.prepare_workdir()
+            self.set_workdir(workdir)
+
     def is_compiled(self) -> bool:
         """
         Return True if compiled version
 
         :return: True if compiled version
         """
         return __file__.endswith('.pyc')
 
     def install(self):
         """Install database and provider data"""
-        # install database
-        self.window.core.db.echo = self.db_echo
+        self.window.core.db.echo = self.db_echo  # verbose on/off
         self.window.core.db.init()
 
         # install provider configs
         self.provider.install()
 
+    def get_path(self) -> str:
+        """
+        Return workdir path
+
+        :return: workdir path
+        """
+        if not self.initialized_workdir:
+            workdir = self.prepare_workdir()
+            self.set_workdir(workdir)
+        return self.path
+
+    @staticmethod
+    def get_base_workdir() -> str:
+        """
+        Return base workdir path
+
+        :return: base workdir path
+        """
+        return os.path.join(Path.home(), '.config', Config.CONFIG_DIR)
+
+    @staticmethod
+    def prepare_workdir() -> str:
+        """
+        Prepare workdir
+
+        :return: workdir path
+        """
+        is_test = os.environ.get('ENV_TEST') == '1'
+        path = Path(Config.get_base_workdir())
+        if not path.exists() and not is_test:  # DISABLE in tests!!!
+            path.mkdir(parents=True, exist_ok=True)
+        path_file = "path.cfg"
+        p = os.path.join(str(path), path_file)
+        if not os.path.exists(p) and not is_test:  # DISABLE in tests!!!
+            with open(p, 'w', encoding='utf-8') as f:
+                f.write("")
+        else:
+            with open(p, 'r', encoding='utf-8') as f:
+                tmp_path = f.read().strip()
+            if tmp_path:
+                tmp_path = tmp_path.replace("%HOME%", str(Path.home()))
+                if os.path.exists(tmp_path):
+                    path = Path(tmp_path)
+                else:
+                    print("CRITICAL: Workdir path not exists: {}".format(tmp_path))
+        return str(path)
+
+    def set_workdir(self, path: str, reload: bool = False):
+        """
+        Update workdir path
+
+        :param path: new path
+        :param reload: reload config
+        """
+        self.path = path
+        self.provider.path = path
+        if reload:
+            self.initialized = False
+            self.init(True)
+
     def patch(self, app_version: Version) -> bool:
         """
         Patch provider data
 
         :param app_version: app version
         :return: True if patched
         """
@@ -133,25 +202,26 @@
         :param all: load all configs
         """
         if not self.initialized:
 
             # if app initialization
             if all:
                 v = self.get_version()
+                build = self.get_build()
                 os = self.window.core.platforms.get_os()
                 architecture = self.window.core.platforms.get_architecture()
-                print("PyGPT v{} ({}, {})".format(v, os, architecture))
+                print("PyGPT v{}, build {} ({}, {})".format(v, build, os, architecture))
                 print("Author: Marcin Szczyglinski")
                 print("GitHub: https://github.com/szczyglis-dev/py-gpt")
                 print("WWW: https://pygpt.net")
                 print("Email: info@pygpt.net")
                 print("")
                 print("Initializing...")
 
-                # install all
+                # prepare and install
                 self.window.core.installer.install()
 
             self.load(all)
             self.initialized = True
 
     def get_version(self) -> str:
         """
@@ -167,14 +237,32 @@
                 return result.group(1)
         except Exception as e:
             if self.window is not None:
                 self.window.core.debug.log(e)
             else:
                 print("Error loading version file: {}".format(e))
 
+    def get_build(self) -> str:
+        """
+        Return build
+
+        :return: build string
+        """
+        path = os.path.abspath(os.path.join(self.get_app_path(), '__init__.py'))
+        try:
+            with open(path, 'r', encoding="utf-8") as f:
+                data = f.read()
+                result = re.search(r'{}\s*=\s*[\'"]([^\'"]*)[\'"]'.format("__build__"), data)
+                return result.group(1)
+        except Exception as e:
+            if self.window is not None:
+                self.window.core.debug.log(e)
+            else:
+                print("Error loading version file: {}".format(e))
+
     def get_options(self) -> dict:
         """
         Return settings options
 
         :return: settings options
         """
         return self.provider.get_options()
@@ -335,14 +423,15 @@
         """
         self.load_config(all)
 
         if all:
             self.window.core.modes.load()
             self.window.core.models.load()
             self.window.core.presets.load()
+            self.window.core.plugins.load_presets()
 
     def load_config(self, all: bool = True):
         """
         Load user config from JSON file
 
         :param all: load all configs
         """
@@ -399,14 +488,28 @@
         if not self.initialized_base:
             self.load_base_config()
         if option is None:
             return self.data_base
         elif option in self.data_base:
             return self.data_base[option]
 
+    def replace_key(self, data: dict, key_from: str, key_to: str) -> dict:
+        """
+        Replace key in dict
+
+        :param data: dict
+        :param key_from: key to replace
+        :param key_to: new key
+        :return: dict with replaced keys
+        """
+        if key_from in data:
+            data[key_to] = copy.deepcopy(data[key_from])
+            del data[key_from]
+        return data
+
     def save(self, filename: str = "config.json"):
         """
         Save config
 
         :param filename: filename
         """
         self.provider.save(self.data, filename)
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/container.py` & `pygpt_net-2.2.0/src/pygpt_net/container.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/controller/agent/__init__.py` & `pygpt_net-2.2.0/src/pygpt_net/controller/agent/__init__.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/controller/agent/flow.py` & `pygpt_net-2.2.0/src/pygpt_net/controller/agent/flow.py`

 * *Files 14% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.16 02:00:00                  #
+# Updated Date: 2024.03.17 13:00:00                  #
 # ================================================== #
 
 from pygpt_net.item.ctx import CtxItem
 from pygpt_net.utils import trans
 
 
 class Flow:
@@ -42,20 +42,15 @@
         :param prompt: prompt
         :param append_prompt: extra prompt (instruction)
         :param auto_stop: auto stop
         :return: updated prompt
         """
         stop_cmd = ""
         if auto_stop:
-            stop_cmd = '\n\nON FINISH: When you believe that the task has been completed 100% and all goals have ' \
-                       'been achieved, include the following command in your response, which will stop further ' \
-                       'conversation. Remember to put it in the form as given, at the end of response and including ' \
-                       'the surrounding ~###~ marks: ~###~{"cmd": "goal_update", "params": {"status": "finished"}}~###~'
-
-        # select prompt to use
+            stop_cmd = "\n\n" + self.window.core.prompt.get("agent.goal")
         if append_prompt is not None and append_prompt.strip() != "":
             append_prompt = "\n" + append_prompt
         prompt += str(append_prompt) + stop_cmd
         return prompt
 
     def on_input_before(self, prompt: str) -> str:
         """
@@ -101,21 +96,22 @@
             self.window.controller.agent.update()  # update status
 
         if iterations == 0 or self.iteration < int(iterations):
             self.iteration += 1
             self.window.controller.agent.update()  # update status
             if self.prev_output is not None and self.prev_output != "":
                 self.window.controller.chat.input.send(
-                    self.prev_output,
+                    text=self.prev_output,
                     force=True,
                     internal=True,
+                    prev_ctx=ctx,
                 )
-            # internal call will not trigger async mode and will hide the message from previous iteration
+        # internal call will not trigger async mode and will hide the message from previous iteration
         elif self.iteration >= int(iterations):
-            self.on_stop()
+            self.on_stop(auto=True)
             if self.window.core.config.get("agent.goal.notify"):
                 self.window.ui.tray.show_msg(
                     trans("notify.agent.stop.title"),
                     trans("notify.agent.stop.content"),
                 )
 
     def on_ctx_before(
@@ -145,15 +141,17 @@
 
     def on_ctx_after(self, ctx: CtxItem):
         """
         Event: After ctx
 
         :param ctx: CtxItem
         """
-        self.prev_output = ctx.output
+        self.prev_output = self.window.core.prompt.get("agent.continue")  # continue...
+        if ctx.extra_ctx is not None and ctx.extra_ctx != "":
+            self.prev_output = ctx.extra_ctx
 
     def on_cmd(
             self,
             ctx: CtxItem,
             cmds: list,
     ):
         """
@@ -182,32 +180,44 @@
             if item["cmd"] in self.allowed_cmds:
                 my_commands.append(item)
                 is_cmd = True
 
         if not is_cmd:
             return
 
+        pause_status = ["pause", "failed", "wait"]
+
         for item in my_commands:
             try:
                 if item["cmd"] == "goal_update":
                     if item["params"]["status"] == "finished":
-                        self.on_stop()
+                        self.on_stop(auto=True)
                         self.window.ui.status(trans('status.finished'))  # show info
                         self.finished = True
                         if self.window.core.config.get("agent.goal.notify"):
                             self.window.ui.tray.show_msg(
                                 trans("notify.agent.goal.title"),
                                 trans("notify.agent.goal.content"),
                             )
+                    elif item["params"]["status"] in pause_status:
+                        self.on_stop(auto=True)
+                        self.window.ui.status(trans('status.finished'))  # show info
+                        self.finished = True
             except Exception as e:
                 self.window.core.debug.error(e)
                 return
 
-    def on_stop(self):
+    def on_stop(self, auto: bool = False):
         """
         Event: On force stop
+
+        :param auto: auto
         """
         self.window.controller.chat.common.unlock_input()
         self.iteration = 0
         self.prev_output = None
         self.stop = True
         self.finished = False  # reset finished flag
+
+        # update index if auto-index enabled
+        if auto:
+            self.window.controller.idx.on_ctx_end(ctx=None, mode="agent")
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/controller/assistant/__init__.py` & `pygpt_net-2.2.0/src/pygpt_net/controller/assistant/__init__.py`

 * *Files 9% similar despite different names*

```diff
@@ -2,38 +2,43 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.18 18:00:00                  #
+# Updated Date: 2024.04.27 10:00:00                  #
 # ================================================== #
 
 import webbrowser
 
-from pygpt_net.controller.assistant.editor import Editor
-from pygpt_net.controller.assistant.files import Files
-from pygpt_net.controller.assistant.threads import Threads
 from pygpt_net.item.assistant import AssistantItem
 
+from .batch import Batch
+from .editor import Editor
+from .files import Files
+from .store import VectorStore
+from .threads import Threads
+
 from pygpt_net.utils import trans
 
 
 class Assistant:
     def __init__(self, window=None):
         """
         Assistant controller
 
         :param window: Window instance
         """
         self.window = window
+        self.batch = Batch(window)
         self.editor = Editor(window)
         self.files = Files(window)
         self.threads = Threads(window)
+        self.store = VectorStore(window)
 
     def setup(self):
         """Setup assistants"""
         self.window.core.assistants.load()
         self.editor.setup()
         self.update()
 
@@ -41,42 +46,41 @@
         """
         Update assistants list
 
         :param update_list: update list
         """
         if update_list:
             self.update_list()
-        self.window.controller.assistant.files.update_list()
+        self.files.update_list()
         self.select_current()
 
     def update_list(self):
         """Update assistants list"""
         items = self.window.core.assistants.get_all()
         self.window.ui.toolbox.assistants.update(items)
 
     def run_stop(self):
         """Stop assistant run"""
         ctx = self.window.core.ctx.last_item
         if ctx is not None:
             if ctx.run_id is not None and ctx.thread is not None:
-                print("Stopping Run: ", ctx.run_id)
                 status = self.window.core.gpt.assistants.run_stop(ctx)
                 if status == "cancelling":
                     print("Run has been canceled.")
 
     def prepare(self):
         """Prepare assistants"""
         # create or get current thread, it is required before conversation start
         if self.window.core.config.get('assistant_thread') is None:
             try:
-                self.window.ui.status(trans('status.starting'))
+                self.window.ui.status(trans('status.sending'))
                 self.window.core.config.set('assistant_thread', self.threads.create_thread())
             except Exception as e:
                 self.window.core.debug.log(e)
-                self.window.ui.dialogs.alert(str(e))
+                self.window.ui.dialogs.alert(e)
 
     def refresh(self):
         """Update assistants"""
         self.select_default()
 
     def select(self, idx: int):
         """
@@ -99,18 +103,14 @@
         :param id: assistant ID
         """
         self.window.core.config.set('assistant', id)
 
         # update attachments list with list of attachments from assistant
         mode = self.window.core.config.get('mode')
         assistant = self.window.core.assistants.get_by_id(id)
-        self.window.controller.attachment.import_from_assistant(
-            mode,
-            assistant,
-        )
         self.window.controller.attachment.update()
         self.update(False)
 
         # update model if exists in assistant
         if assistant is not None:
             model = assistant.model
             if model is not None and model != "":
@@ -164,62 +164,28 @@
         """
         assistant = self.window.core.assistants.create()
         self.editor.assign_data(assistant)
         try:
             return self.window.core.gpt.assistants.create(assistant)
         except Exception as e:
             self.window.core.debug.log(e)
-            self.window.ui.dialogs.alert(str(e))
+            self.window.ui.dialogs.alert(e)
 
     def update_data(self, assistant: AssistantItem):
-        """Update assistant"""
+        """
+        Update assistant
+
+        :param assistant: AssistantItem
+        """
         self.editor.assign_data(assistant)
         try:
             return self.window.core.gpt.assistants.update(assistant)
         except Exception as e:
             self.window.core.debug.log(e)
-            self.window.ui.dialogs.alert(str(e))
-
-    def import_api(self, force: bool = False):
-        """
-        Import all remote assistants from API
-
-        :param force: if true, imports without confirmation
-        """
-        if not force:
-            self.window.ui.dialogs.confirm(
-                type='assistant_import',
-                id='',
-                msg=trans('confirm.assistant.import'),
-            )
-            return
-
-        # run asynchronous
-        self.window.ui.status("Importing assistants...please wait...")
-        self.window.core.gpt.assistants.importer.import_assistants()
-
-    def handle_imported_assistants(self, num: int):
-        """
-        Handle imported assistants
-
-        :param num: number of imported assistants
-        """
-        self.window.ui.status("OK. Imported assistants: " + str(num) + ".")
-        self.update()
-
-    def handle_imported_assistants_failed(self, error: any):
-        """
-        Handle error on importing assistants
-
-        :param error: error message
-        """
-        self.window.core.debug.log(error)
-        print("Error importing assistants")
-        self.window.ui.dialogs.alert(str(error))
-        self.update()
+            self.window.ui.dialogs.alert(e)
 
     def clear(self, force: bool = False):
         """
         Clear assistant data
 
         :param force: force clear data
         """
@@ -266,15 +232,15 @@
                         self.window.core.config.set('assistant', None)
                         self.window.core.config.set('assistant_thread', None)
 
                     # delete in API
                     try:
                         self.window.core.gpt.assistants.delete(id)
                     except Exception as e:
-                        self.window.ui.dialogs.alert(str(e))
+                        self.window.ui.dialogs.alert(e)
 
                     self.window.core.assistants.delete(id)
                     self.update()
                     self.window.ui.status(trans('status.assistant.deleted'))
 
     def goto_online(self):
         """Open Assistants page"""
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/controller/assistant/editor.py` & `pygpt_net-2.2.0/src/pygpt_net/controller/assistant/editor.py`

 * *Files 23% similar despite different names*

```diff
@@ -2,17 +2,21 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.18 05:00:00                  #
+# Updated Date: 2024.04.27 12:00:00                  #
 # ================================================== #
 
+import copy
+
+from PySide6.QtWidgets import QApplication
+
 from pygpt_net.item.assistant import AssistantItem
 from pygpt_net.utils import trans
 
 
 class Editor:
     def __init__(self, window=None):
         """
@@ -21,14 +25,15 @@
         :param window: Window instance
         """
         self.window = window
         self.options = {
             "id": {
                 "type": "text",
                 "label": "assistant.id",
+                "read_only": True,
             },
             "name": {
                 "type": "text",
                 "label": "assistant.name",
             },
             "description": {
                 "type": "text",
@@ -40,76 +45,147 @@
                 "keys": [],
                 "label": "assistant.model",
             },
             "instructions": {
                 "type": "textarea",
                 "label": "assistant.instructions",
             },
+            "vector_store": {
+                "type": "combo",
+                "label": "assistant.vector_store",
+            },
             "tool.code_interpreter": {
                 "type": "bool",
                 "label": "assistant.tool.code_interpreter",
                 "value": True,
             },
-            "tool.retrieval": {
+            "tool.file_search": {
                 "type": "bool",
-                "label": "assistant.tool.retrieval",
+                "label": "assistant.tool.file_search",
                 "value": False,
             },
             "tool.function": {
                 "type": "dict",
                 "label": "assistant.tool.function",
                 "keys": {
                     'name': 'text',
                     'params': 'textarea',
                     'desc': 'textarea',
                 },
             },
         }
         self.id = "assistant"
+        self.current = None
 
-    def get_options(self):
+    def get_options(self) -> dict:
         """
         Get options list
 
-        :return: options list
+        :return: options dict
         """
         return self.options
 
-    def get_option(self, key: str):
+    def get_option(self, key: str) -> dict:
         """
         Get option by key
 
         :param key: option key
-        :return: option
+        :return: option dict
         """
         if key in self.options:
             return self.options[key]
 
     def setup(self):
         """Setup editor"""
         parent = "assistant"
         key = "tool.function"
         self.window.ui.dialogs.register_dictionary(
             key,
             parent,
             self.get_option(key),
         )
+        self.update_store_list()  # vector store list
+
+    def update_store_list(self):
+        """Update vector store list"""
+        items = {}
+        items["--"] = "--"  # none
+        current_idx = 0
+        current_id = self.get_selected_store_id()
+        if current_id is not None:
+            current_idx = self.get_choice_idx_by_id(current_id)
+        stores = self.window.core.assistants.store.get_all()
+        for id in list(stores.keys()):
+            if self.window.core.assistants.store.is_hidden(id):
+                continue
+            if stores[id].name is None or stores[id].name == "":
+                items[id] = id
+            else:
+                items[id] = stores[id].name
+        self.window.controller.config.update_combo(self.id, "vector_store", items)
+        if current_id is not None:
+            current_idx = self.get_choice_idx_by_id(current_id)
+        option = copy.deepcopy(self.options["vector_store"])
+        option["idx"] = current_idx
+        self.window.controller.config.apply_value(
+            parent_id=self.id,
+            key="vector_store",
+            option=option,
+            value="",
+        )
+
+    def get_selected_store_id(self) -> str or None:
+        """
+        Return current selected vector store ID
+
+        :return: vector store ID or None
+        """
+        idx = self.window.controller.config.get_value(
+            parent_id=self.id,
+            key='vector_store',
+            option=self.options['vector_store'],
+            idx=True,  # return idx, not the text value
+        )  # empty or not
+        if idx > 0:
+            return self.window.ui.config[self.id]['vector_store'].combo.itemData(idx)
+        return None
+
+    def get_choice_idx_by_id(self, store_id) -> int:
+        """
+        Return combo choice index by vector store ID
+
+        :param store_id: store ID
+        :return: combo idx
+        """
+        stores = self.window.core.assistants.store.get_all()
+        i = 1
+        for id in list(stores.keys()):
+            if self.window.core.assistants.store.is_hidden(id):
+                continue  # ignore empty names
+            if id == store_id:
+                return i
+            i += 1
+        return 0  # none
 
     def edit(self, idx: int = None):
         """
         Open assistant editor
 
         :param idx: assistant index (row index)
         """
         id = None
         if idx is not None:
             id = self.window.core.assistants.get_by_idx(idx)
 
         self.init(id)
-        self.window.ui.dialogs.open_editor('editor.assistants', idx, width=800)
+        self.window.ui.dialogs.open_editor('editor.assistants', idx, width=900)
+
+    def close(self):
+        """Close assistant editor"""
+        self.window.ui.dialogs.close('editor.assistants')
 
     def init(self, id: str = None):
         """
         Initialize assistant editor
 
         :param id: assistant ID (in API)
         """
@@ -120,34 +196,43 @@
         if id is not None and id != "":
             if self.window.core.assistants.has(id):
                 assistant = self.window.core.assistants.get_by_id(id)
         else:
             # defaults
             assistant.instructions = 'You are a helpful assistant.'
             assistant.tools['code_interpreter'] = True
-            assistant.tools['retrieval'] = True
+            assistant.tools['file_search'] = True
+
+        self.update_store_list()
+
+        self.current = assistant
 
         if assistant.name is None:
             assistant.name = ""
         if assistant.description is None:
             assistant.description = ""
         if assistant.instructions is None:
             assistant.instructions = ""
         if assistant.model is None:
             assistant.model = ""
 
         options = {}
         data_dict = assistant.to_dict()
         for key in self.options:
-            options[key] = self.options[key]
+            options[key] = copy.deepcopy(self.options[key])
             options[key]['value'] = data_dict[key]
             if options[key]['value'] is None:
                 options[key]['value'] = ""
 
-        self.window.controller.config.load_options(self.id, options)
+            # if vector store, set by idx, not by value
+            if key == "vector_store":
+                idx = self.get_choice_idx_by_id(data_dict[key])
+                options[key]['idx'] = idx  # set by idx
+
+        self.window.controller.config.load_options(self.id, options)  # set combo by idx
 
         # restore functions
         if assistant.has_functions():
             functions = assistant.get_functions()
             values = []
             for function in functions:
                 values.append(
@@ -165,14 +250,16 @@
 
         # set focus to name field
         self.window.ui.config[self.id]['name'].setFocus()
 
     def save(self):
         """Save assistant"""
         created = False
+
+        # get data from fields
         id = self.window.controller.config.get_value(
             parent_id=self.id, 
             key='id', 
             option=self.options['id'],
         )  # empty or not
         name = self.window.controller.config.get_value(
             parent_id=self.id, 
@@ -189,16 +276,19 @@
         if name is None or name == "" or model is None or model == "":
             self.window.ui.dialogs.alert(
                 trans('assistant.form.empty.fields')
             )
             return
 
         if id is None or id == "" or not self.window.core.assistants.has(id):
+            self.window.ui.status(trans('status.sending'))
+            QApplication.processEvents()
             assistant = self.window.controller.assistant.create()  # id is created in API here
             if assistant is None:
+                self.window.ui.status("status.error")
                 print("ERROR: Assistant not created!")
                 return
             id = assistant.id  # set to ID created in API
             self.window.core.assistants.add(assistant)
             self.window.controller.config.apply_value(
                 parent_id=self.id,
                 key="id",
@@ -210,14 +300,16 @@
             assistant = self.window.core.assistants.get_by_id(id)
 
         # assign data from fields to assistant object
         self.assign_data(assistant)
 
         # update data in API if only updating data here (not creating)
         if not created:
+            self.window.ui.status(trans('status.sending'))
+            QApplication.processEvents()
             self.window.controller.assistant.update_data(assistant)
 
         # save
         self.window.core.assistants.save()
         self.window.controller.assistant.refresh()
         self.window.controller.assistant.update()
 
@@ -259,18 +351,18 @@
         )
         assistant.tools = {
             'code_interpreter': self.window.controller.config.get_value(
                 parent_id=self.id,
                 key='tool.code_interpreter',
                 option=self.options['tool.code_interpreter'],
             ),
-            'retrieval': self.window.controller.config.get_value(
+            'file_search': self.window.controller.config.get_value(
                 parent_id=self.id,
-                key='tool.retrieval',
-                option=self.options['tool.retrieval'],
+                key='tool.file_search',
+                option=self.options['tool.file_search'],
             ),
             'function': [],  # functions are assigned separately (below)
         }
 
         # assign assistant's functions tool
         values = self.window.controller.config.get_value(
                 parent_id=self.id,
@@ -296,7 +388,11 @@
                 }
             )
 
         if len(functions) > 0:
             assistant.tools['function'] = functions
         else:
             assistant.tools['function'] = []
+
+        # vector store
+        store_id = self.get_selected_store_id()
+        assistant.vector_store = store_id
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/controller/assistant/files.py` & `pygpt_net-2.2.0/src/pygpt_net/controller/assistant/files.py`

 * *Files 11% similar despite different names*

```diff
@@ -2,19 +2,21 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.22 02:00:00                  #
+# Updated Date: 2024.04.27 10:00:00                  #
 # ================================================== #
 
 import os
 
+from PySide6.QtWidgets import QApplication
+
 from pygpt_net.item.assistant import AssistantItem
 from pygpt_net.item.attachment import AttachmentItem
 from pygpt_net.item.ctx import CtxItem
 from pygpt_net.utils import trans
 
 
 class Files:
@@ -38,16 +40,19 @@
         """
         id = self.window.core.config.get('assistant')
         if id is None or id == "":
             return
         assistant = self.window.core.assistants.get_by_id(id)
         if assistant is None:
             return
-        self.window.core.assistants.current_file = \
-            self.window.core.assistants.get_file_id_by_idx(assistant, idx)
+
+        # get file by list index
+        thread_id = self.window.core.config.get('assistant_thread')
+        file_id = self.window.core.assistants.files.get_file_id_by_idx(idx, assistant.vector_store, thread_id)
+        self.window.core.assistants.current_file = file_id
 
     def count_upload(self, attachments: dict) -> int:
         """
         Count attachments for upload
 
         :param attachments: attachments dict
         :return: number of files need to be uploaded
@@ -65,136 +70,81 @@
 
         :param assistant: assistant
         """
         # run asynchronous
         self.window.ui.status("Importing files...please wait...")
         self.window.core.gpt.assistants.importer.import_files(assistant)
 
-    def handle_imported_files(self, num: int):
-        """
-        Handle imported files
-
-        :param num: number of imported files
-        """
-        self.window.ui.status("OK. Imported files: " + str(num) + ".")
-        self.update()
-
-    def handle_imported_files_failed(self, error: any):
-        """
-        Handle error on importing files
-
-        :param error: error message
-        """
-        self.window.core.debug.log(error)
-        print("Error importing files")
-        self.window.ui.dialogs.alert(str(error))
-        self.update()
-
     def download(self, idx: int):
         """
         Download file
 
         :param idx: selected attachment index
         """
         id = self.window.core.config.get('assistant')
         if id is None or id == "":
             return
         assistant = self.window.core.assistants.get_by_id(id)
         if assistant is None:
             return
 
-        # get attachment ID by index
-        file_id = self.window.core.assistants.get_file_id_by_idx(assistant, idx)
+        # get file by list index
+        thread_id = self.window.core.config.get('assistant_thread')
+        file_id = self.window.core.assistants.files.get_file_id_by_idx(idx, assistant.vector_store, thread_id)
 
         # download file
         self.window.controller.attachment.download(file_id)
 
-    def sync(self, force: bool = False):
-        """
-        Sync files with API
-
-        :param force: force sync files
-        """
-        if not force:
-            self.window.ui.dialogs.confirm(
-                type='assistant_import_files',
-                id='',
-                msg=trans('confirm.assistant.import_files'),
-            )
-            return
-
-        id = self.window.core.config.get('assistant')
-        if id is None or id == "":
-            return
-        assistant = self.window.core.assistants.get_by_id(id)
-        if assistant is None:
-            return
-        try:
-            self.import_files(assistant)
-        except Exception as e:
-            self.window.core.debug.log(e)
-            self.window.ui.dialogs.alert(str(e))
-
     def rename(self, idx: int):
         """
         Rename file
 
         :param idx: selected attachment index
         """
         id = self.window.core.config.get('assistant')
         if id is None or id == "":
             return
         assistant = self.window.core.assistants.get_by_id(id)
         if assistant is None:
             return
 
-        # get attachment ID by index
-        file_id = self.window.core.assistants.get_file_id_by_idx(assistant, idx)
+        thread_id = self.window.core.config.get('assistant_thread')
 
-        # get attachment object by ID
-        data = self.window.core.assistants.get_file_by_id(assistant, file_id)
-        if data is None:
+        # get file by list index
+        file = self.window.core.assistants.files.get_file_by_idx(idx, assistant.vector_store, thread_id)
+        if file is None:
             return
 
         # set dialog and show
         self.window.ui.dialog['rename'].id = 'attachment_uploaded'
-        self.window.ui.dialog['rename'].input.setText(data['name'])
-        self.window.ui.dialog['rename'].current = file_id
+        self.window.ui.dialog['rename'].input.setText(file.name)
+        self.window.ui.dialog['rename'].current = file.record_id
         self.window.ui.dialog['rename'].show()
         self.update()
 
     def rename_close(self):
         """Close rename dialog"""
         # close rename dialog and update attachments list
         self.window.ui.dialog['rename'].close()
         self.update()
 
-    def update_name(self, file_id: str, name: str):
+    def update_name(self, record_id: str, name: str):
         """
         Rename uploaded remote file name
 
-        :param file_id: file_id
+        :param record_id: file record ID
         :param name: new name
         """
-        id = self.window.core.config.get('assistant')
-        if id is None or id == "":
-            self.rename_close()
-            return
-        assistant = self.window.core.assistants.get_by_id(id)
-        if assistant is None:
-            self.rename_close()
-            return
-        self.window.core.assistants.rename_file(
-            assistant,
-            file_id,
+        self.window.core.assistants.files.rename(
+            record_id,
             name,
         )
         self.rename_close()
 
-    def clear_files(self, force: bool = False):
+    def clear(self, force: bool = False):
         """
         Delete all files
 
         :param force: force clear files
         """
         if not force:
             self.window.ui.dialogs.confirm(
@@ -204,33 +154,32 @@
             )
             return
 
         id = self.window.core.config.get('assistant')
         if id is None or id == "":
             return
 
-        # delete all files
+        # delete all files in current thread
         if self.window.core.assistants.has(id):
             assistant = self.window.core.assistants.get_by_id(id)
-            for file_id in list(assistant.files):
+            thread_id = self.window.core.config.get('assistant_thread')
+            items = self.window.core.assistants.files.get_by_store_or_thread(assistant.vector_store, thread_id)
+            self.window.ui.status(trans('status.sending'))
+            QApplication.processEvents()
+
+            for id in list(items.keys()):
+                file = items[id]
                 try:
-                    self.window.core.gpt.assistants.file_delete(id, file_id)
-                    assistant.delete_file(file_id)
+                    self.window.core.assistants.files.delete(file)  # delete from DB, API and vector stores
                 except Exception as e:
-                    self.window.ui.dialogs.alert(str(e))
-
-                # delete file
-                if assistant.has_file(file_id):
-                    assistant.delete_file(file_id)
-                # delete attachment
-                if assistant.has_attachment(file_id):
-                    assistant.delete_attachment(file_id)
+                    self.window.ui.status(trans('status.error'))
+                    self.window.ui.dialogs.alert(e)
 
-            self.window.core.assistants.save()
-            self.update()
+            self.window.ui.status(trans('status.deleted'))
+        self.update()
 
     def delete(self, idx: int, force: bool = False):
         """
         Delete file
 
         :param idx: file idx
         :param force: force delete without confirmation
@@ -247,40 +196,32 @@
         id = self.window.core.config.get('assistant')
         if id is None or id == "":
             return
         assistant = self.window.core.assistants.get_by_id(id)
         if assistant is None:
             return
 
-        # get attachment ID by index
-        file_id = self.window.core.assistants.get_file_id_by_idx(assistant, idx)
+        # get file by list index
+        thread_id = self.window.core.config.get('assistant_thread')
+        file = self.window.core.assistants.files.get_file_by_idx(idx, assistant.vector_store, thread_id)
+        if file is None:
+            return
 
         # delete file in API
+        self.window.ui.status(trans('status.sending'))
+        QApplication.processEvents()
         try:
-            self.window.core.gpt.assistants.file_delete(id, file_id)
+            self.window.core.assistants.files.delete(file)  # delete from DB, API and vector stores
+            self.window.ui.status(trans('status.deleted'))
         except Exception as e:
             self.window.core.debug.log(e)
-            self.window.ui.dialogs.alert(str(e))
-            return  # do not delete locally if not deleted in API
+            self.window.ui.dialogs.alert(e)
+            self.window.ui.status(trans('status.error'))
 
-        # delete locally
-        if self.window.core.assistants.has(id):
-            need_save = False
-            # delete file
-            if assistant.has_file(file_id):
-                assistant.delete_file(file_id)
-                need_save = True
-            # delete attachment
-            if assistant.has_attachment(file_id):
-                assistant.delete_attachment(file_id)
-                need_save = True
-            # save assistants and update assistants list
-            if need_save:
-                self.window.core.assistants.save()
-                self.update()
+        self.update()
 
     def clear_attachments(self, assistant: AssistantItem):
         """
         Clear attachments
 
         :param assistant: assistant object
         """
@@ -294,18 +235,19 @@
 
         :param mode: mode
         :param attachments: attachments dict
         :return: number of uploaded files
         """
         # get current chosen assistant
         assistant_id = self.window.core.config.get('assistant')
+        thread_id = self.window.core.config.get('assistant_thread')
         if assistant_id is None:
             return 0
-        assistant = self.window.core.assistants.get_by_id(assistant_id)
 
+        assistant = self.window.core.assistants.get_by_id(assistant_id)
         num = 0
         # loop on attachments
         for id in list(attachments):
             attachment = attachments[id]
             old_id = attachment.id  # tmp id
 
             # check if not already uploaded (ignore already uploaded files)
@@ -324,27 +266,43 @@
                 )
                 if new_id is not None:
                     # mark as already uploaded
                     attachment.send = True
                     attachment.id = new_id
                     attachment.remote = new_id
 
+                    """
+                    if assistant.vector_store is None or assistant.vector_store == "":
+                        assistant.vector_store = self.window.core.gpt.assistants.vs_create(
+                            "thread-" + thread_id,
+                        )
+                    """
+
+                    # add to vector store if defined in assistant, otherwise file will be added to thread store
+                    if assistant.vector_store:
+                        self.window.core.gpt.assistants.vs_add_file(
+                            assistant.vector_store,
+                            new_id,
+                        )
+
                     # replace old ID with new one
                     self.window.core.attachments.replace_id(
                         mode,
                         old_id,
                         attachment,
                     )
 
-                    # update assistant remote files list
-                    assistant.files[new_id] = {
-                        'id': new_id,
-                        'name': attachment.name,
-                        'path': attachment.path,
-                    }
+                    self.window.core.assistants.files.create(
+                        assistant,
+                        thread_id,
+                        new_id,
+                        attachment.name,
+                        attachment.path,
+                        os.path.getsize(attachment.path),
+                    )
 
                     # update assistant attachments list
                     self.window.core.assistants.replace_attachment(
                         assistant,
                         attachment,
                         old_id,
                         new_id,
@@ -373,39 +331,36 @@
         # get current chosen assistant
         assistant.add_attachment(attachment)  # append attachment
         self.window.core.assistants.save()  # save assistants
 
     def update_list(self):
         """Update uploaded files list"""
         assistant_id = self.window.core.config.get('assistant')
+        thread_id = self.window.core.config.get('assistant_thread')
         if assistant_id is None or assistant_id == "":
             return
         assistant = self.window.core.assistants.get_by_id(assistant_id)
         if assistant is None:
             return
-
-        items = assistant.files
+        items = self.window.core.assistants.files.get_by_store_or_thread(assistant.vector_store, thread_id)
         self.window.ui.chat.input.attachments_uploaded.update(items)
         self.update_tab()
 
     def update_tab(self):
         """Update tab label (attachments uploaded)"""
         assistant_id = self.window.core.config.get('assistant')
+        thread_id = self.window.core.config.get('assistant_thread')
         if assistant_id is None or assistant_id == "":
             self.window.ui.tabs['input'].setTabText(2, trans('attachments_uploaded.tab'))
             return
-
         assistant = self.window.core.assistants.get_by_id(assistant_id)
         if assistant is None:
             return  # no assistant
-
-        items = assistant.files
-        num_files = len(items)
+        num_files = self.window.core.assistants.files.count_by_store_or_thread(assistant.vector_store, thread_id)
         suffix = ''
-
         # append num of files
         if num_files > 0:
             suffix = f' ({num_files})'
         self.window.ui.tabs['input'].setTabText(2, trans('attachments_uploaded.tab') + suffix)
 
     def handle_received_ids(self, ids: list, ext: str = None) -> list:
         """
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/controller/assistant/threads.py` & `pygpt_net-2.2.0/src/pygpt_net/controller/assistant/threads.py`

 * *Files 15% similar despite different names*

```diff
@@ -2,140 +2,179 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.22 04:00:00                  #
+# Updated Date: 2024.04.28 07:00:00                  #
 # ================================================== #
 
 import json
 import time
 
 from PySide6.QtCore import QObject, Signal, Slot, QRunnable
 
 from pygpt_net.item.ctx import CtxItem
-from pygpt_net.utils import trans
+from pygpt_net.utils import trans, get_image_extensions
 
 
 class Threads:
     def __init__(self, window=None):
         """
         Assistant threads controller
 
         :param window: Window instance
         """
         self.window = window
         self.started = False
-        self.stop = False
-        self.run_id = None
+        self.stop = False  # force stop run
+        self.run_id = None  # current run ID
         self.tool_calls = []  # list of previous tool calls
-        self.img_ext = ['jpg', 'jpeg', 'png', 'gif', 'bmp', 'tiff', 'webp']
+        self.img_ext = get_image_extensions()  # list, .png, .jpg, etc.
 
     def create_thread(self) -> str:
         """
-        Create assistant thread
+        Create assistant thread and store in context (stream and not stream)
 
         :return: thread id
         """
         thread_id = self.window.core.gpt.assistants.thread_create()
         self.window.core.config.set('assistant_thread', thread_id)
         self.window.core.ctx.append_thread(thread_id)
         return thread_id
 
-    def handle_output_message(self, ctx: CtxItem):
+    def handle_output_message(self, ctx: CtxItem, stream: bool = False):
         """
-        Handle output message
+        Handle output message (not stream ONLY)
 
         :param ctx: CtxItem
+        :param stream: True if stream
         """
         # update ctx
+        ctx.from_previous()  # append previous result if exists
         self.window.core.ctx.update_item(ctx)
+        self.window.controller.chat.output.handle(ctx, 'assistant', stream)
 
-        self.window.controller.chat.output.handle(ctx, 'assistant', False)
+        if stream:  # append all output to chat
+            self.window.controller.chat.render.end(stream=stream)  # extra reload for stream markdown needed here
+
+        ctx.clear_reply()  # reset results
         self.window.controller.chat.output.handle_cmd(ctx)
 
         # update ctx
+        ctx.from_previous()  # append previous result again before save
         self.window.core.ctx.update_item(ctx)
 
         # index ctx (llama-index)
-        self.window.controller.idx.on_ctx_end(ctx)
+        self.window.controller.idx.on_ctx_end(ctx, mode="assistant")
 
         # update ctx list
         self.window.controller.ctx.update()
 
-    def handle_message_data(self, ctx: CtxItem, msg):
+    def handle_message_data(self, ctx: CtxItem, msg, stream: bool = False):
         """
-        Handle message data
+        Handle message data (files, images, text) - stream and not-stream
 
         :param ctx: CtxItem
         :param msg: Message
+        :param stream: True if stream
         """
         paths = []
         file_ids = []
         images_ids = []
         mappings = {}  # file_id: path to sandbox
+        citations = []
 
         for content in msg.content:
             if content.type == "text":
-                ctx.set_output(content.text.value)
+                # text, append only if no stream or if is stream and already streamed output is empty
+                if not stream or (ctx.output is None or ctx.output == ""):
+                    ctx.set_output(content.text.value)
 
                 # annotations
                 if content.text.annotations:
                     self.log("Run: received annotations: {}".format(len(content.text.annotations)))
                     for item in content.text.annotations:
+                        # file
                         if item.type == "file_path":
                             file_id = item.file_path.file_id
                             file_ids.append(file_id)
                             mappings[file_id] = item.text
+                        # citation
+                        elif item.type == "file_citation":
+                            data = {
+                                "type": "assistant",  # store is remote
+                                "text": item.text,
+                                "start_idx": item.start_index,
+                                "end_idx": item.end_index,
+                            }
+                            if item.file_citation:
+                                data["file_id"] = item.file_citation.file_id
+                                data["quote"] = item.file_citation.quote
+                            citations.append(data)
 
             # image file
             elif content.type == "image_file":
                 self.log("Run: received image file")
                 images_ids.append(content.image_file.file_id)
 
-        # handle msg files
+        """
+        # handle message files  -- legacy, deprecated
         for file_id in msg.file_ids:
             if file_id not in images_ids and file_id not in file_ids:
+                self.log("Run: appending file id: {}".format(file_id))
                 file_ids.append(file_id)
+        """
 
         # handle content images
         if images_ids:
             image_paths = self.window.controller.assistant.files.handle_received_ids(images_ids, ".png")
             ctx.images = self.window.core.filesystem.make_local_list(list(image_paths))
 
-        # download msg files
+        # citations
+        if citations:
+            ctx.doc_ids = citations
+
+        # -- files --
+
+        # download message files
         paths += self.window.controller.assistant.files.handle_received_ids(file_ids)
         if paths:
             # convert to local paths
             local_paths = self.window.core.filesystem.make_local_list(list(paths))
-            text_msg = ctx.output
+            text_msg = ctx.output  # use current output
             if text_msg:
                 # map file ids to local paths
                 for file_id in mappings:
                     path_sandbox = mappings[file_id]
                     k = file_ids.index(file_id)
                     if len(local_paths) > k:
-                        text_msg = text_msg.replace(path_sandbox, local_paths[k])  # replace sandbox path
+                        text_msg = text_msg.replace(
+                            path_sandbox,
+                            local_paths[k]
+                        )  # replace sandbox file path with a local path
                 ctx.set_output(text_msg)
             ctx.files = local_paths
 
             # append images from msg files
             if len(images_ids) == 0:
                 img_files = []
                 for path in paths:
                     if path.split('.')[-1].lower() in self.img_ext:
                         img_files.append(path)
                 if img_files:
                     ctx.images = self.window.core.filesystem.make_local_list(list(img_files))
 
+        ctx.from_previous()  # append previous result again before save
+        self.window.core.ctx.update_item(ctx)
+
     def handle_messages(self, ctx: CtxItem):
         """
-        Handle run messages
+        Handle run messages (not stream ONLY)
 
         :param ctx: CtxItem
         """
         data = self.window.core.gpt.assistants.msg_list(ctx.thread)
         for msg in data:
             if msg.role == "assistant":
                 try:
@@ -143,14 +182,29 @@
                     self.handle_message_data(ctx, msg)
                 except Exception as e:
                     self.window.core.debug.log(e)
                     print("Run: handle message error:", e)
                 break
         self.handle_output_message(ctx)  # send to chat
 
+    def handle_tool_calls_stream(self, run, ctx: CtxItem):
+        """
+        Handle tool calls (stream ONLY)
+
+        :param run: Run
+        :param ctx: CtxItem
+        """
+        self.stop = False
+        ctx.tool_calls = self.window.core.command.unpack_tool_calls(
+            run.required_action.submit_tool_outputs.tool_calls
+        )
+        self.window.statusChanged.emit(trans('assistant.run.func.call'))
+        self.window.stateChanged.emit(self.window.STATE_IDLE)
+        self.handle_tool_calls(ctx)
+
     def handle_tool_calls(self, ctx: CtxItem):
         """
         Handle tool calls
 
         :param ctx: CtxItem
         """
         self.log("Run: handling tool calls...")
@@ -169,96 +223,145 @@
 
         ctx.tool_calls = []  # clear tool calls
 
         # update ctx
         self.window.core.ctx.update_item(ctx)
 
         # index ctx (llama-index)
-        self.window.controller.idx.on_ctx_end(ctx)
+        self.window.controller.idx.on_ctx_end(ctx, mode="assistant")
 
         # check if there are any response, if not send empty response
         if not ctx.reply:
             results = {
                 "response": "",
             }
             self.window.controller.chat.input.send(
-                json.dumps(results),
+                text=json.dumps(results),
                 force=True,
                 reply=True,
                 internal=True,
+                prev_ctx=ctx,
             )
 
     def apply_outputs(self, ctx: CtxItem) -> list:
         """
         Apply tool call outputs
 
         :param ctx: CtxItem
         :return: list of tool calls outputs
         """
         self.log("Run: preparing tool calls outputs...")
-
         ctx.run_id = self.run_id
         ctx.tool_calls = self.tool_calls  # set previous tool calls
         return self.window.core.command.get_tool_calls_outputs(ctx)
 
-    def handle_run_created(self, ctx: CtxItem, run):
+    def handle_run_created(self, ctx: CtxItem, run, stream: bool = False):
         """
-        Handle run created
+        Handle run created (stream and not stream)
 
         :param ctx: context item
         :param run
+        :param stream: True if stream
         """
         ctx.run_id = run.id
         ctx.current = False
         self.window.core.ctx.update_item(ctx)
         self.window.core.ctx.append_run(ctx.run_id)  # get run ID and store in ctx
-        self.handle_run(ctx)  # handle assistant run
+        self.handle_run(ctx, run, stream)  # handle assistant run
 
     def handle_run_error(self, ctx: CtxItem, err):
         """
-        Handle run created
+        Handle run created (stream and not stream)
 
         :param ctx: context item
         :param err: error message
         """
         ctx.current = False  # reset current state
         self.window.core.ctx.update_item(ctx)
         self.window.core.debug.log(err)
-        self.window.ui.dialogs.alert(str(err))
+        self.window.ui.dialogs.alert(err)
+        self.window.controller.chat.common.unlock_input()  # unlock input
 
-    def handle_run(self, ctx: CtxItem):
+    def handle_run(self, ctx: CtxItem, run, stream: bool = False):
         """
-        Handle assistant's run
+        Handle assistant's run (not stream ONLY)
 
         :param ctx: CtxItem
+        :param run: Run
+        :param stream: True if stream
         """
+        self.reset()  # clear previous run
+
+        if stream:
+            self.log("Run: finishing stream...")
+            if run and run.usage is not None:
+                    ctx.input_tokens = run.usage.prompt_tokens
+                    ctx.output_tokens = run.usage.completion_tokens
+                    ctx.total_tokens = run.usage.total_tokens
+            self.handle_stream_end(ctx)  # unlock
+            if run:
+                if run.status == "requires_action":  # handle tool calls in stream mode
+                    self.handle_tool_calls_stream(run, ctx)
+            return # stop here, run is finished here in stream mode
+
+        # ---- not stream only ----
+
+        # run status listener
+        self.window.stateChanged.emit(self.window.STATE_BUSY)
+        self.log("Run: starting run worker...")
+
         # worker
         worker = RunWorker()
         worker.window = self.window
         worker.ctx = ctx
 
-        self.reset()  # clear previous run
-
         # signals
         worker.signals.updated.connect(self.handle_status)
         worker.signals.destroyed.connect(self.handle_destroy)
         worker.signals.started.connect(self.handle_started)
 
-        self.window.stateChanged.emit(self.window.STATE_BUSY)
-
-        self.log("Run: starting run worker...")
-
         # start
         self.window.threadpool.start(worker)
         self.started = True
 
+    def handle_stream_begin(self, ctx: CtxItem):
+        """
+        Handle stream end (stream ONLY)
+
+        :param ctx: CtxItem
+        """
+        self.window.stateChanged.emit(self.window.STATE_BUSY)
+
+    def handle_stream_end(self, ctx: CtxItem):
+        """
+        Handle stream end (stream ONLY)
+
+        :param ctx: CtxItem
+        """
+        self.window.stateChanged.emit(self.window.STATE_IDLE)
+        self.window.controller.chat.common.unlock_input()  # unlock input
+        self.stop = False
+        self.window.statusChanged.emit(trans('assistant.run.completed'))
+        self.window.controller.chat.output.show_response_tokens(ctx)  # update tokens
+
+    def handle_status_error(self, ctx: CtxItem):
+        """
+        Handle status error (stream and not stream)
+
+        :param ctx: CtxItem
+        """
+        self.stop = False
+        self.window.controller.chat.common.unlock_input()
+        self.window.statusChanged.emit(trans('assistant.run.failed'))
+        self.window.stateChanged.emit(self.window.STATE_ERROR)
+
     @Slot(object, object)
     def handle_status(self, run, ctx: CtxItem):
         """
-        Handle status
+        Handle status (not stream ONLY)
 
         :param run: Run
         :param ctx: CtxItem
         """
         status = None
         if run:
             status = run.status
@@ -284,18 +387,15 @@
             )
             self.window.statusChanged.emit(trans('assistant.run.func.call'))
             self.window.stateChanged.emit(self.window.STATE_IDLE)
             self.handle_tool_calls(ctx)
 
         # error
         elif status in ["failed", "cancelled", "expired", "cancelling"]:
-            self.stop = False
-            self.window.controller.chat.common.unlock_input()
-            self.window.statusChanged.emit(trans('assistant.run.failed'))
-            self.window.stateChanged.emit(self.window.STATE_ERROR)
+            self.handle_status_error(ctx)
 
     @Slot()
     def handle_destroy(self):
         """Handle thread destroy"""
         self.started = False
         self.stop = False
 
@@ -330,28 +430,30 @@
         Reset tool calls
         """
         self.run_id = None
         self.tool_calls = []
 
     def is_running(self) -> bool:
         """
-        Check if tool calls need submit
+        Check if tool calls need submit (tools are running)
 
         :return: True if running
         """
         return self.run_id is not None and len(self.tool_calls) > 0
 
 
 class RunSignals(QObject):
+    """Status check signals"""
     updated = Signal(object, object)
     destroyed = Signal()
     started = Signal()
 
 
 class RunWorker(QRunnable):
+    """Status check async worker"""
     def __init__(self, *args, **kwargs):
         super(RunWorker, self).__init__()
         self.signals = RunSignals()
         self.args = args
         self.kwargs = kwargs
         self.window = None
         self.ctx = None
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/controller/attachment.py` & `pygpt_net-2.2.0/src/pygpt_net/controller/attachment.py`

 * *Files 14% similar despite different names*

```diff
@@ -2,21 +2,22 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.22 02:00:00                  #
+# Updated Date: 2024.04.26 23:00:00                  #
 # ================================================== #
 
 import os
 from datetime import datetime
 
-from PySide6.QtWidgets import QFileDialog
+from PySide6.QtGui import QImage
+from PySide6.QtWidgets import QFileDialog, QApplication
 
 from pygpt_net.item.assistant import AssistantItem
 from pygpt_net.item.attachment import AttachmentItem
 from pygpt_net.utils import trans
 
 
 class Attachment:
@@ -173,23 +174,14 @@
         mode = self.window.core.config.get('mode')
         self.window.core.attachments.rename_file(
             mode=mode,
             id=file_id,
             name=name,
         )
 
-        # rename filename in assistant data if mode = assistant
-        if self.window.core.config.get('mode') == 'assistant':
-            assistant_id = self.window.core.config.get('assistant')
-            if assistant_id is not None:
-                self.window.controller.assistant.files.update_name(
-                    file_id=file_id,
-                    name=name,
-                )
-
         # close rename dialog and update attachments list
         self.window.ui.dialog['rename'].close()
         self.update()
 
     def add(self, mode: str, attachment: AttachmentItem):
         """
         Add attachment item to list
@@ -222,26 +214,14 @@
         mode = self.window.core.config.get('mode')
         self.window.core.attachments.delete_all(
             mode=mode,
             remove_local=remove_local,
         )
 
         self.window.controller.chat.vision.unavailable()  # set no content to provide
-
-        if mode == 'assistant':
-            # delete all from assistant data
-            assistant_id = self.window.core.config.get('assistant')
-            if assistant_id is not None:
-                assistant = self.window.core.assistants.get_by_id(
-                    id=assistant_id,
-                )
-                if assistant is not None:
-                    self.window.controller.assistant.files.clear_attachments(
-                        assistant=assistant,
-                    )
         self.update()
 
     def open_add(self):
         """Open add attachment file dialog"""
         last_dir = self.window.core.config.get_last_used_dir()
         mode = self.window.core.config.get('mode')
         dialog = QFileDialog(self.window)
@@ -258,87 +238,71 @@
                     basename = os.path.basename(path)
                     attachment = self.window.core.attachments.new(
                         mode=mode,
                         name=basename,
                         path=path,
                         auto_save=False,
                     )
-                    # append attachment to assistant if current mode = assistant
-                    if mode == 'assistant':
-                        assistant_id = self.window.core.config.get('assistant')
-                        if assistant_id is not None:
-                            assistant = self.window.core.assistants.get_by_id(assistant_id)
-                            if assistant is not None:
-                                self.window.controller.assistant.files.append(
-                                    assistant=assistant,
-                                    attachment=attachment,
-                                )
 
             # save attachments and update attachments list
             self.window.core.attachments.save()
             self.update()
 
     def open_dir(self, mode: str, idx: int):
         """
         Open in directory
 
         :param mode: mode
         :param idx: index
         """
-        # TODO: check dict/obj
-        file_id = self.window.core.attachments.get_id_by_idx(
+        path = self.get_path_by_idx(
             mode=mode,
             idx=idx,
         )
-        data = self.window.core.attachments.get_by_id(
-            mode=mode,
-            id=file_id,
-        )
-        if data.path is not None and data.path != '' and os.path.exists(data.path):
+        if path is not None and path != '' and os.path.exists(path):
             self.window.controller.files.open_dir(
-                path=data.path,
+                path=path,
                 select=True,
             )
 
     def open(self, mode: str, idx: int):
         """
         Open attachment
 
         :param mode: mode
         :param idx: index
         """
-        # TODO: check dict/obj
-        file_id = self.window.core.attachments.get_id_by_idx(
+        path = self.get_path_by_idx(
             mode=mode,
             idx=idx,
         )
-        data = self.window.core.attachments.get_by_id(
-            mode=mode,
-            id=file_id,
-        )
-        if data.path is not None and data.path != '' and os.path.exists(data.path):
+        if path is not None and path != '' and os.path.exists(path):
             self.window.controller.files.open(
-                path=data.path,
+                path=path,
             )
 
-    def import_from_assistant(self, mode: str, assistant: AssistantItem):
+    def get_path_by_idx(self, mode: str, idx: int) -> str:
         """
-        Load attachments from assistant
+        Get path by index
 
         :param mode: mode
-        :param assistant: assistant object
+        :param idx: index
+        :return: path
         """
-        if assistant is None:
-            return
-
-        # restore attachments from assistant
-        self.window.core.attachments.from_attachments(
+        file_id = self.window.core.attachments.get_id_by_idx(
             mode=mode,
-            attachments=assistant.attachments,
+            idx=idx,
+        )
+        data = self.window.core.attachments.get_by_id(
+            mode=mode,
+            id=file_id,
         )
+        if data is None:
+            return ''
+        return data.path
 
     def has(self, mode: str) -> bool:
         """
         Return True if current mode has attachments
 
         :param mode: mode to check
         :return: True if has attachments
@@ -404,15 +368,15 @@
             self.window.core.gpt.assistants.file_download(
                 file_id=file_id,
                 path=path,
             )
             return path  # return path to downloaded file
         except Exception as e:
             self.window.core.debug.log(e)
-            self.window.ui.dialogs.alert(str(e))
+            self.window.ui.dialogs.alert(e)
 
     def toggle_send_clear(self, value: bool):
         """
         Toggle send clear
 
         :param value: value of the checkbox
         """
@@ -441,7 +405,88 @@
         Return True if send clear is enabled
 
         :return: True if send clear is enabled
         """
         if not self.window.core.config.has('attachments_send_clear'):
             self.window.core.config.set('attachments_send_clear', False)
         return self.window.core.config.get('attachments_send_clear')
+
+    def from_clipboard_image(self, image):
+        """
+        Handle image from clipboard
+        """
+        now = datetime.now()
+        dt = now.strftime("%Y-%m-%d_%H-%M-%S")
+        name = 'clipboard-' + dt
+        path = os.path.join(self.window.controller.painter.common.get_capture_dir(), name + '.png')
+        image.save(path, "PNG")
+        self.from_clipboard_url(path)
+
+    def from_clipboard_url(self, url, all: bool = False):
+        """
+        Handle image from clipboard url
+
+        :param url: file url
+        :param all: all images
+        """
+        if not os.path.exists(url):
+            return
+
+        if not all:
+            image_ext = ['.png', '.jpg', '.jpeg', '.gif', '.bmp', '.tiff']
+            ext = os.path.splitext(url)[1].lower()
+            if ext not in image_ext:
+                return
+
+        mode = self.window.core.config.get('mode')
+        title = "Clipboard image"
+        self.window.core.attachments.new(mode, title, url, False)
+        self.window.core.attachments.save()
+        self.window.controller.attachment.update()
+        self.window.statusChanged.emit(trans("painter.capture.manual.captured.success") + ' ' + os.path.basename(url))
+
+    def from_clipboard_text(self, text: str, all: bool = False):
+        """
+        Handle text from clipboard
+
+        :param text: text from clipboard
+        :param all: all text
+        """
+        if all:
+            if os.path.exists(text):
+                self.from_clipboard_url(text)
+        else:
+            if self.window.controller.chat.vision.allowed():
+                # check if pasted text is local image path
+                image_ext = ['.png', '.jpg', '.jpeg', '.gif', '.bmp', '.tiff']
+                ext = os.path.splitext(text)[1].lower()
+                if ext not in image_ext:
+                    self.from_clipboard_url(text)
+                    return
+                if os.path.exists(text):
+                    self.from_clipboard_url(text)
+
+    def clipboard_has_attachment(self) -> bool:
+        """
+        Check if clipboard has attachment
+
+        :return: True if clipboard has attachment
+        """
+        clipboard = QApplication.clipboard()
+        source = clipboard.mimeData()
+        if source.hasImage():
+            image = source.imageData()
+            if isinstance(image, QImage):
+                return True
+        elif source.hasUrls():
+            urls = source.urls()
+            for url in urls:
+                if url.isLocalFile():
+                    local_path = url.toLocalFile()
+                    if os.path.exists(local_path):
+                        return True
+        elif source.hasText():
+            text = source.text()
+            if os.path.exists(text):
+                return True
+        return False
+
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/controller/audio.py` & `pygpt_net-2.2.0/src/pygpt_net/controller/audio/__init__.py`

 * *Files 6% similar despite different names*

```diff
@@ -2,19 +2,20 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.27 18:00:00                  #
+# Updated Date: 2024.03.20 06:00:00                  #
 # ================================================== #
 
 from pygpt_net.core.dispatcher import Event
 from pygpt_net.item.ctx import CtxItem
+from pygpt_net.utils import trans
 
 
 class Audio:
     def __init__(self, window=None):
         """
         Audio/voice controller
 
@@ -130,20 +131,16 @@
         """
         Read text using audio output plugins
 
         :param text: text to read
         """
         ctx = CtxItem()
         ctx.output = text
-        all = False
-        if self.window.controller.audio.is_output_enabled():
-            event = Event(Event.CTX_AFTER)
-        else:
-            all = True  # to all plugins (even if disabled)
-            event = Event(Event.AUDIO_READ_TEXT)
+        all = True  # to all plugins (even if disabled)
+        event = Event(Event.AUDIO_READ_TEXT)
         event.ctx = ctx
         self.window.core.dispatcher.dispatch(event, all=all)
 
     def toggle_output_icon(self, state: bool):
         """
         Toggle input icon
 
@@ -160,7 +157,44 @@
 
         :param state: True to enable, False to disable
         """
         if state:
             self.window.ui.nodes['icon.audio.input'].set_icon(":/icons/mic.svg")
         else:
             self.window.ui.nodes['icon.audio.input'].set_icon(":/icons/mic_off.svg")
+
+    def on_begin(self, text: str):
+        """
+        On audio playback init
+
+        :param text: text to play
+        """
+        self.window.ui.status(trans("status.audio.start"))
+
+    def on_play(self, event: str):
+        """
+        On audio playback start
+
+        :param event: event name
+        """
+        if event == Event.AUDIO_READ_TEXT:
+            self.window.ui.status("")
+
+    def on_stop(self):
+        """
+        On audio playback stopped (force)
+        """
+        self.window.ui.status(trans("status.audio.stopped"))
+
+    def is_playing(self) -> bool:
+        """
+        Check if any audio is playing
+
+        :return: True if playing
+        """
+        from pygame import mixer
+        try:
+            mixer.init()
+            return mixer.get_busy()
+        except Exception as e:
+            pass
+        return False
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/controller/calendar/__init__.py` & `pygpt_net-2.2.0/src/pygpt_net/controller/calendar/__init__.py`

 * *Files 22% similar despite different names*

```diff
@@ -2,61 +2,56 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.29 19:00:00                  #
+# Updated Date: 2024.03.07 01:00:00                  #
 # ================================================== #
 
-from PySide6.QtGui import QColor
-
 from .note import Note
 
 
 class Calendar:
     def __init__(self, window=None):
         """
         Calendar controller
 
         :param window: Window instance
         """
         self.window = window
         self.note = Note(window)
-        self.statuses = {
-            0: {'label': 'label.color.default', 'color': QColor(100, 100, 100), 'font': QColor(255, 255, 255)},
-            1: {'label': 'label.color.red', 'color': QColor(255, 0, 0), 'font': QColor(255, 255, 255)},
-            2: {'label': 'label.color.orange', 'color': QColor(255, 165, 0), 'font': QColor(255, 255, 255)},
-            3: {'label': 'label.color.yellow', 'color': QColor(255, 255, 0), 'font': QColor(0, 0, 0)},
-            4: {'label': 'label.color.green', 'color': QColor(0, 255, 0), 'font': QColor(0, 0, 0)},
-            5: {'label': 'label.color.blue', 'color': QColor(0, 0, 255), 'font': QColor(255, 255, 255)},
-            6: {'label': 'label.color.indigo', 'color': QColor(75, 0, 130), 'font': QColor(255, 255, 255)},
-            7: {'label': 'label.color.violet', 'color': QColor(238, 130, 238), 'font': QColor(255, 255, 255)},
-        }
         self.selected_year = None
         self.selected_month = None
         self.selected_day = None
 
     def setup(self):
         """Setup calendar"""
+        self.note.setup()
         self.load()
         self.update()  # update counters and load notes for current month
         self.set_current()  # set to current note at start
 
     def update(self, all: bool = True):
         """
         Update counters
 
         :param all: reload all notes
         """
         year = self.window.ui.calendar['select'].currentYear
         month = self.window.ui.calendar['select'].currentMonth
         self.on_page_changed(year, month, all=all)  # load notes for current month
 
+    def update_ctx_counters(self):
+        """Update context counters only"""
+        year = self.window.ui.calendar['select'].currentYear
+        month = self.window.ui.calendar['select'].currentMonth
+        self.note.refresh_ctx(year, month)
+
     def set_current(self):
         """Set to current selected date"""
         year = self.window.ui.calendar['select'].currentYear
         month = self.window.ui.calendar['select'].currentMonth
         day = self.window.ui.calendar['select'].currentDay
 
         self.note.update_content(year, month, day)
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/controller/calendar/note.py` & `pygpt_net-2.2.0/src/pygpt_net/controller/calendar/note.py`

 * *Files 12% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.29 19:00:00                  #
+# Updated Date: 2024.03.07 01:00:00                  #
 # ================================================== #
 
 import datetime
 
 from PySide6.QtGui import QTextCursor
 
 from pygpt_net.item.calendar_note import CalendarNoteItem
@@ -21,14 +21,19 @@
     def __init__(self, window=None):
         """
         Calendar note controller
 
         :param window: Window instance
         """
         self.window = window
+        self.counters_all = True
+
+    def setup(self):
+        """Setup calendar notes"""
+        self.counters_all = self.window.core.config.get("ctx.counters.all", True)
 
     def update(self):
         """Update on content change"""
         year = self.window.controller.calendar.selected_year
         month = self.window.controller.calendar.selected_month
         day = self.window.controller.calendar.selected_day
 
@@ -36,17 +41,18 @@
             return
 
         content = self.window.ui.calendar['note'].toPlainText()
         note = self.window.core.calendar.get_by_date(year, month, day)
 
         # update or create note
         if note is None:
-            note = self.create(year, month, day)
-            note.content = content
-            self.window.core.calendar.add(note)
+            if content.strip() != "":
+                note = self.create(year, month, day)
+                note.content = content
+                self.window.core.calendar.add(note)
         else:
             note.content = content
             self.window.core.calendar.update(note)
 
         self.refresh_num(year, month)  # update note cells when note is changed
 
     def update_content(self, year: int, month: int, day: int):
@@ -56,16 +62,18 @@
         :param year: year
         :param month: month
         :param day: day
         """
         note = self.window.core.calendar.get_by_date(year, month, day)
         if note is None:
             self.window.ui.calendar['note'].setPlainText("")
+            self.window.ui.calendar['note'].on_update()
         else:
             self.window.ui.calendar['note'].setPlainText(note.content)
+            self.window.ui.calendar['note'].on_update()
 
     def update_label(self, year: int, month: int, day: int):
         """
         Update label
 
         :param year: year
         :param month: month
@@ -103,38 +111,65 @@
 
     def get_counts_around_month(self, year: int, month: int) -> dict:
         """
         Get counts around month
 
         :param year: year
         :param month: month
-        :return: combined counts
+        :return: combined counters
         """
         current_month_start = datetime.datetime(year, month, 1)
         last_month_start = (current_month_start - datetime.timedelta(days=1)).replace(day=1)
 
         if month == 12:
             next_month_start = datetime.datetime(year + 1, 1, 1)
         else:
             next_month_start = datetime.datetime(year, month + 1, 1)
 
-        current_month_count = self.window.core.ctx.provider.get_ctx_count_by_day(
+        current = self.get_ctx_counters(
             year,
-            month
+            month,
         )
-        last_month_count = self.window.core.ctx.provider.get_ctx_count_by_day(
+        last = self.get_ctx_counters(
             last_month_start.year,
-            last_month_start.month
+            last_month_start.month,
         )
-        next_month_count = self.window.core.ctx.provider.get_ctx_count_by_day(
+        next = self.get_ctx_counters(
             next_month_start.year,
-            next_month_start.month
+            next_month_start.month,
+        )
+        return {**last, **current, **next}  # combine counters
+
+    def get_ctx_counters(self, year: int, month: int) -> dict:
+        """
+        Get ctx counters
+
+        :param year: year
+        :param month: month
+        :return: ctx counters
+        """
+        # default values (no filters)
+        search_string = None
+        search_content = False
+        filters = None
+
+        # + filters
+        if not self.counters_all:
+            search_string = self.window.core.ctx.search_string
+            search_content = self.window.core.ctx.is_search_content()
+            filters = self.window.core.ctx.get_parsed_filters()
+
+        return self.window.core.ctx.provider.get_ctx_count_by_day(
+            year=year,
+            month=month,
+            day=None,
+            search_string=search_string,
+            filters=filters,
+            search_content=search_content,
         )
-        combined_counts = {**last_month_count, **current_month_count, **next_month_count}
-        return combined_counts
 
     def refresh_ctx(self, year: int, month: int):
         """
         Update calendar ctx cells
 
         :param year: year
         :param month: month
@@ -168,39 +203,49 @@
         current_month_start = datetime.datetime(year, month, 1)
         last_month_start = (current_month_start - datetime.timedelta(days=1)).replace(day=1)
         if month == 12:
             next_month_start = datetime.datetime(year + 1, 1, 1)
         else:
             next_month_start = datetime.datetime(year, month + 1, 1)
 
-        current_month_notes = self.window.core.calendar.get_notes_existence_by_day(
+        current = self.window.core.calendar.get_notes_existence_by_day(
             year,
-            month
+            month,
         )
-        last_month_notes = self.window.core.calendar.get_notes_existence_by_day(
+        last = self.window.core.calendar.get_notes_existence_by_day(
             last_month_start.year,
-            last_month_start.month
+            last_month_start.month,
         )
-        next_month_notes = self.window.core.calendar.get_notes_existence_by_day(
+        next = self.window.core.calendar.get_notes_existence_by_day(
             next_month_start.year,
-            next_month_start.month
+            next_month_start.month,
         )
-        combined_notes = {**last_month_notes, **current_month_notes, **next_month_notes}
-        return combined_notes
+        return {**last, **current, **next}  # combine notes existence
 
     def refresh_num(self, year: int, month: int):
         """
         Update calendar notes cells
 
         :param year: year
         :param month: month
         """
         count = self.get_notes_existence_around_month(year, month)
         self.window.ui.calendar['select'].update_notes(count)
 
+    def toggle_counters_all(self, state: bool):
+        """
+        Toggle counters all
+
+        :param state: state
+        """
+        self.counters_all = state
+        self.window.core.config.set("ctx.counters.all", state)
+        self.window.core.config.save()
+        self.window.controller.calendar.update_ctx_counters()
+
     def append_text(self, text: str):
         """
         Append text to note
 
         :param text: text to append
         """
         dt = ""  # TODO: add to config append date/time
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/controller/camera.py` & `pygpt_net-2.2.0/src/pygpt_net/controller/camera.py`

 * *Files 1% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.29 01:00:00                  #
+# Updated Date: 2024.03.15 10:00:00                  #
 # ================================================== #
 
 import datetime
 import os
 import cv2
 from PySide6.QtCore import Slot
 
@@ -100,15 +100,15 @@
     def handle_error(self, err):
         """
         Handle thread error signal
 
         :param err: error message
         """
         self.window.core.debug.log(err)
-        self.window.ui.dialogs.alert("{}".format(err))
+        self.window.ui.dialogs.alert(err)
 
     @Slot(object)
     def handle_capture(self, frame):
         """
         Handle capture frame signal
 
         :param frame: frame
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/controller/chat/__init__.py` & `pygpt_net-2.2.0/src/pygpt_net/controller/chat/__init__.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/controller/chat/common.py` & `pygpt_net-2.2.0/src/pygpt_net/controller/settings/workdir.py`

 * *Files 22% similar despite different names*

```diff
@@ -2,289 +2,211 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.16 02:00:00                  #
+# Updated Date: 2024.04.14 18:00:00                  #
 # ================================================== #
+
 import os
+from pathlib import Path
 
-from PySide6.QtGui import QTextCursor
-from PySide6.QtWidgets import QFileDialog
+from PySide6.QtWidgets import QApplication
 
-from pygpt_net.core.dispatcher import Event
 from pygpt_net.utils import trans
 
 
-class Common:
+class Workdir:
     def __init__(self, window=None):
         """
-        Chat common controller
+        Workdir migration controller
 
         :param window: Window instance
         """
         self.window = window
+        self.is_dialog = False
+        self.busy = False
 
-    def setup(self):
-        """Set up UI"""
-        # stream mode
-        if self.window.core.config.get('stream'):
-            self.window.ui.nodes['input.stream'].setChecked(True)
-        else:
-            self.window.ui.nodes['input.stream'].setChecked(False)
-
-        # send clear
-        if self.window.core.config.get('send_clear'):
-            self.window.ui.nodes['input.send_clear'].setChecked(True)
-        else:
-            self.window.ui.nodes['input.send_clear'].setChecked(False)
-
-        # send with enter/shift/disabled
-        mode = self.window.core.config.get('send_mode')
-        if mode == 2:
-            self.window.ui.nodes['input.send_shift_enter'].setChecked(True)
-            self.window.ui.nodes['input.send_enter'].setChecked(False)
-            self.window.ui.nodes['input.send_none'].setChecked(False)
-        elif mode == 1:
-            self.window.ui.nodes['input.send_enter'].setChecked(True)
-            self.window.ui.nodes['input.send_shift_enter'].setChecked(False)
-            self.window.ui.nodes['input.send_none'].setChecked(False)
-        elif mode == 0:
-            self.window.ui.nodes['input.send_enter'].setChecked(False)
-            self.window.ui.nodes['input.send_shift_enter'].setChecked(False)
-            self.window.ui.nodes['input.send_none'].setChecked(True)
-
-        # cmd enabled
-        if self.window.core.config.get('cmd'):
-            self.window.ui.nodes['cmd.enabled'].setChecked(True)
-        else:
-            self.window.ui.nodes['cmd.enabled'].setChecked(False)
-
-        # output timestamps
-        self.window.ui.nodes['output.timestamp'].setChecked(self.window.core.config.get('output_timestamp'))
-
-        # raw (plain) output
-        self.window.ui.nodes['output.raw'].setChecked(self.window.core.config.get('render.plain'))
-
-        # images generation
-        if self.window.core.config.get('img_raw'):
-            self.window.ui.config['global']['img_raw'].setChecked(True)
-        else:
-            self.window.ui.config['global']['img_raw'].setChecked(False)
-
-        # set focus to input
-        self.window.ui.nodes['input'].setFocus()
-
-    def append_to_input(self, text: str, separator: str = "\n"):
-        """
-        Append text to input
-
-        :param text: text to append
-        :param separator: text separator
-        """
-        prev_text = self.window.ui.nodes['input'].toPlainText()
-        cur = self.window.ui.nodes['input'].textCursor()
-        cur.movePosition(QTextCursor.End)
-        text = str(text).strip()
-        if prev_text.strip() != "":
-            text = separator + text
-        s = text
-        while s:
-            head, sep, s = s.partition("\n")  # Split line at LF
-            cur.insertText(head)  # Insert text at cursor
-            if sep:  # New line if LF
-                cur.insertBlock()
-        cur.movePosition(QTextCursor.End)  # Move cursor to end of text
-        self.window.ui.nodes['input'].setTextCursor(cur)  # Update visible cursor
-        self.window.ui.nodes['input'].setFocus()  # Set focus to input
-
-        # update tokens counter
-        self.window.controller.ui.update_tokens()
-
-    def toggle_stream(self, value: bool):
-        """
-        Toggle stream
-
-        :param value: value of the checkbox
-        """
-        self.window.core.config.set('stream', value)
-
-    def toggle_cmd(self, value: bool):
-        """
-        Toggle cmd enabled
-
-        :param value: value of the checkbox
-        """
-        self.window.core.config.set('cmd', value)
-
-        # stop commands thread if running
-        if not value:
-            self.window.controller.command.stop = True
-        else:
-            self.window.controller.command.stop = False
-
-        self.window.controller.ui.update_tokens()  # update tokens counters
-
-    def toggle_send_clear(self, value: bool):
-        """
-        Toggle send clear
-
-        :param value: value of the checkbox
-        """
-        self.window.core.config.set('send_clear', value)
-
-    def toggle_send_shift(self, value: bool):
-        """
-        Toggle send with shift
-
-        :param value: value of the checkbox
-        """
-        self.window.core.config.set('send_mode', value)
-
-    def focus_input(self):
-        """Focus input"""
-        self.window.ui.nodes['input'].setFocus()
-
-    def lock_input(self):
-        """Lock input"""
-        self.window.controller.chat.input.locked = True
-        self.window.ui.nodes['input.send_btn'].setEnabled(False)
-        self.window.ui.nodes['input.stop_btn'].setVisible(True)
-
-    def unlock_input(self):
-        """Unlock input"""
-        self.window.controller.chat.input.locked = False
-        self.window.ui.nodes['input.send_btn'].setEnabled(True)
-        self.window.ui.nodes['input.stop_btn'].setVisible(False)
+    def change(self):
+        """Change working directory (open dialog)"""
+        if self.is_dialog:
+            self.window.ui.dialogs.close('workdir.change')
+            self.is_dialog = False
+        else:
+            self.window.ui.dialogs.workdir.prepare()
+            self.window.ui.dialogs.workdir.set_path(self.window.core.config.get_user_path())
+            self.window.ui.dialogs.workdir.hide_status()
+            self.window.ui.dialogs.open(
+                'workdir.change',
+                width=600,
+                height=180,
+            )
+            self.is_dialog = True
 
-    def stop(self, exit: bool = False):
+    def update(self, path: str, force: bool = False):
         """
-        Stop all
+        Switch working directory to the existing one
 
-        :param exit: True if app exit
+        :param path: existing working directory
+        :param force: force update (confirm)
         """
-        mode = self.window.core.config.get('mode')
-        event = Event(Event.FORCE_STOP, {
-            "value": True,
-        })
-        self.window.core.dispatcher.dispatch(event)  # stop event
-        event = Event(Event.AUDIO_INPUT_TOGGLE, {
-            "value": False,
-        })
-        self.window.controller.agent.flow.on_stop()
-        self.window.controller.assistant.threads.stop = True
-        self.window.controller.assistant.threads.reset()  # reset run and func calls
-        self.window.core.dispatcher.dispatch(event)  # stop audio input
-        self.window.controller.chat.input.stop = True
-        self.window.core.gpt.stop()
-        self.unlock_input()
+        print("\n====================")
+        print("Changing workdir to: ", path)
+        print("====================\n")
+        current_path = self.window.core.config.get_user_path()
+        default_path = self.window.core.config.get_base_workdir()
+        if force:
+            self.window.ui.dialogs.workdir.show_status(trans("dialog.workdir.result.wait"))
+            QApplication.processEvents()
+
+        lock_file = os.path.join(default_path, 'path.cfg')  # put "path.cfg"
+        lock_path = path.replace(str(Path.home()), "%HOME%")
+        if path == default_path:
+            lock_path = ""  # set empty if default dir
+        with open(lock_file, 'w', encoding='utf-8') as f:
+            f.write(lock_path)  # new path
+
+        # update path in current profile
+        self.window.core.config.profile.update_current_workdir(path)
+
+        # reload config
+        self.window.core.config.set_workdir(path, reload=True)
+        self.window.core.config.set('license.accepted', True)  # accept license to prevent show dialog again
 
-        # remotely stop assistant
-        if mode == "assistant" and not exit:
+        # reload components
+        if force:
             try:
-                self.window.controller.assistant.run_stop()
+                self.window.controller.reload()
+                self.window.ui.dialogs.workdir.show_status(trans("dialog.workdir.result.success").format(path=path))
+                self.window.ui.dialogs.alert(trans("dialog.workdir.result.success").format(path=path))
             except Exception as e:
                 self.window.core.debug.log(e)
+                self.window.ui.dialogs.alert(e)
+                print("Error reloading components: ", e)
+                self.restore(current_path)
+        else:
+            self.window.controller.reload()
+
+    def migrate(self, path: str, force: bool = False):
+        """
+        Migrate working directory
+
+        :param path: new working directory
+        :param force: force migration (confirm)
+        """
+        if self.busy:
+            self.window.ui.dialogs.alert("Workdir migration in progress...")
+            return
+
+        # check if not the same directory
+        current = self.window.core.config.get_user_path()
+        if current == path:
+            self.window.ui.dialogs.alert(trans("dialog.workdir.result.same_directory"))
+            self.busy = False
+            self.window.ui.dialogs.workdir.hide_status()
+            return
+
+        # check if path is not already a workdir
+        if self.window.core.filesystem.is_workdir_in_path(path):
+            self.window.ui.dialogs.confirm(
+                type='workdir.update',
+                id=path,
+                msg=trans("dialog.workdir.update.confirm").format(path=path)
+            )
+            return
 
-        self.window.controller.chat.input.generating = False
-        self.window.ui.status(trans('status.stopped'))
-        self.window.stateChanged.emit(self.window.STATE_IDLE)
-
-    def check_api_key(self) -> bool:
-        """
-        Check if API KEY is set
+        # check if path is empty
+        if not self.window.core.filesystem.is_directory_empty(path):
+            self.window.ui.dialogs.alert(trans("dialog.workdir.change.empty.alert"))
+            return
+
+        # confirm move
+        if not force:
+            self.window.ui.dialogs.confirm(
+                type='workdir.change',
+                id=path,
+                msg=trans("dialog.workdir.change.confirm").format(path=path)
+            )
+            return
 
-        :return: True if API KEY is set, False otherwise
-        """
-        result = True
-        if self.window.core.config.get('api_key') is None or self.window.core.config.get('api_key') == '':
-            self.window.controller.launcher.show_api_monit()
-            self.window.ui.status("Missing API KEY!")
+        self.window.ui.dialogs.workdir.hide_status()
+        self.busy = True
+        print("Migrating workdir from: ", current, " to: ", path)
+
+        # check if path exists
+        if not os.path.exists(path) or not os.path.isdir(path):
+            self.window.ui.dialogs.alert(trans("dialog.workdir.result.directory_not_exists"))
+            self.window.ui.dialogs.workdir.hide_status()
+            self.busy = False
+            return
+
+        # check free space
+        space_required = self.window.core.filesystem.get_directory_size(current, human_readable=False)
+        space_free = self.window.core.filesystem.get_free_disk_space(path, human_readable=False)
+        if space_required > space_free:
+            self.window.ui.dialogs.alert(trans("dialog.workdir.result.no_free_space").format(
+                required=self.window.core.filesystem.get_directory_size(current),
+                free=self.window.core.filesystem.get_free_disk_space(path),
+            ))
+            self.busy = False
+            self.window.ui.dialogs.workdir.hide_status()
+            return
+
+        self.window.ui.dialogs.workdir.show_status(trans("dialog.workdir.result.wait"))
+        QApplication.processEvents()
+
+        # copy workdir
+        try:
+            result = self.window.core.filesystem.copy_workdir(current, path)
+        except Exception as e:
+            self.window.core.debug.log(e)
+            self.window.ui.dialogs.alert(e)
+            print("Error migrating workdir: ", e)
             result = False
-        return result
-
-    def toggle_timestamp(self, value: bool):
-        """
-        Toggle timestamp
-
-        :param value: value of the checkbox
-        """
-        self.window.core.config.set('output_timestamp', value)
-        self.window.core.config.save()
-        self.window.controller.ctx.refresh()
-
-    def toggle_raw(self, value: bool):
-        """
-        Toggle raw (plain) output
-
-        :param value: value of the checkbox
-        """
-        self.window.core.config.set('render.plain', value)
-        self.window.core.config.save()
-
-        # update checkbox in settings dialog
-        self.window.controller.config.checkbox.apply(
-            'config',
-            'render.plain',
-            {'value': value},
-        )
-        if not value:
-            self.window.controller.theme.markdown.update(
-                force=True,
-            )  # with state store
-        else:
-            self.window.controller.theme.markdown.clear()
-
-        # restore previous font size
-        self.window.controller.ui.update_font_size()
-
-    def img_enable_raw(self):
-        """Enable help for images"""
-        self.window.core.config.set('img_raw', True)
-        self.window.core.config.save()
-
-    def img_disable_raw(self):
-        """Disable help for images"""
-        self.window.core.config.set('img_raw', False)
-        self.window.core.config.save()
-
-    def img_toggle_raw(self, state: bool):
-        """
-        Toggle help for images
-
-        :param state: state of checkbox
-        """
-        if not state:
-            self.img_disable_raw()
-        else:
-            self.img_enable_raw()
-
-    def save_text(self, text: str):
-        """
-        Save text to file
-
-        :param text: text to save
-        """
-        last_dir = self.window.core.config.get_last_used_dir()
-        options = QFileDialog.Options()
-        selected_filter = "Text Files (*.txt)"
-        file_name, _ = QFileDialog.getSaveFileName(
-            self.window,
-            "Save as text file",
-            last_dir,
-            "All Files (*);;Text Files (*.txt);;Python Files (*.py);;Markdown Files (*.md)",
-            selected_filter,
-            options,
-        )
-        if file_name:
-            # convert text to plain text
-            self.window.core.config.set_last_used_dir(
-                os.path.dirname(file_name),
-            )
-            with open(file_name, 'w', encoding="utf-8") as f:
-                f.write(
-                    str(text).strip()
-                )
-            self.window.ui.status(trans('status.saved'))
 
+        if result:
+            try:
+                # remove old workdir
+                self.window.core.debug.info("Clearing old workdir: {}".format(current))
+                try:
+                    # allow errors here
+                    self.window.core.filesystem.clear_workdir(current)
+                except Exception as e:
+                    self.window.core.debug.log(e)
+                    print("Error clearing old workdir: ", e)
+                self.update(path)  # update workdir to new path
+                self.window.ui.dialogs.workdir.show_status(trans("dialog.workdir.result.success").format(path=path))
+                self.window.ui.dialogs.alert(trans("dialog.workdir.result.success").format(path=path))
+            except Exception as e:
+                self.window.core.debug.log(e)
+                self.window.ui.dialogs.alert(e)
+                print("Error migrating workdir: ", e)
+                self.restore(current)  # restore current if failed
+        else:
+            self.window.ui.dialogs.workdir.show_status(trans("dialog.workdir.result.failed"))
+            self.window.ui.dialogs.alert(trans("dialog.workdir.result.failed"))
+            self.restore(current)  # restore current if failed
+
+        self.busy = False
+        self.window.core.debug.info("Finished migrating workdir from: {} to: {}".format(current, path))
+
+    def restore(self, current: str):
+        """
+        Restore default working directory
+
+        :param current: current working directory
+        """
+        print("Reverting workdir to: ", current)
+        self.window.core.config.set_workdir(current, reload=True)
+        default_path = self.window.core.config.get_base_workdir()
+        lock_file = os.path.join(default_path, 'path.cfg')
+        lock_path = current.replace(str(Path.home()), "%HOME%")
+        if current == default_path:
+            lock_path = ""  # set empty if default dir
+        with open(lock_file, 'w', encoding='utf-8') as f:
+            f.write(lock_path)  # new path
+        self.window.ui.dialogs.workdir.set_path(current)
+        self.window.ui.dialogs.workdir.show_status("Failed. Reverted to current workdir: {}".format(current))
+        self.window.controller.reload()
+        self.window.core.config.profile.update_current_workdir(current)  # update profile
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/controller/chat/files.py` & `pygpt_net-2.2.0/src/pygpt_net/controller/chat/files.py`

 * *Files 8% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.01.30 20:00:00                  #
+# Updated Date: 2024.03.15 10:00:00                  #
 # ================================================== #
 
 from pygpt_net.utils import trans
 
 
 class Files:
     def __init__(self, window=None):
@@ -50,10 +50,10 @@
 
                 # show uploaded status
                 if is_upload and num_uploaded > 0:
                     self.window.ui.status(trans('status.uploaded'))
 
             except Exception as e:
                 self.window.core.debug.log(e)
-                self.window.ui.dialogs.alert(str(e))
+                self.window.ui.dialogs.alert(e)
 
         return attachments_list
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/controller/chat/image.py` & `pygpt_net-2.2.0/src/pygpt_net/controller/chat/image.py`

 * *Files 17% similar despite different names*

```diff
@@ -2,22 +2,18 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.01.30 20:00:00                  #
+# Updated Date: 2024.03.25 10:00:00                  #
 # ================================================== #
 
-import os
-import shutil
-
-from PySide6 import QtGui, QtCore
-from PySide6.QtWidgets import QFileDialog, QApplication
+from PySide6.QtWidgets import  QApplication
 
 from pygpt_net.item.ctx import CtxItem
 from pygpt_net.core.dispatcher import Event
 from pygpt_net.utils import trans
 
 
 class Image:
@@ -25,19 +21,24 @@
         """
         Image controller
 
         :param window: Window instance
         """
         self.window = window
 
-    def send(self, text: str) -> CtxItem:
+    def send(
+            self,
+            text: str,
+            prev_ctx: CtxItem = None
+    ) -> CtxItem:
         """
         Send prompt for image generate
 
         :param text: prompt for image generation
+        :param prev_ctx: previous ctx item
         :return: ctx item
         """
         num = int(self.window.ui.config['global']['img_variants'].input.text() or 1)
         if num < 1:
             num = 1
         elif num > 4:
             num = 4
@@ -49,14 +50,15 @@
             num = 1
 
         self.window.ui.status(trans('status.sending'))
 
         # create ctx item
         ctx = CtxItem()
         ctx.set_input(text, self.window.core.config.get('user_name'))
+        ctx.prev_ctx = prev_ctx  # store previous context item
 
         # event: context before
         event = Event(Event.CTX_BEFORE)
         event.ctx = ctx
         self.window.core.dispatcher.dispatch(event)
 
         # add ctx to DB
@@ -77,15 +79,15 @@
                 prompt=text,
                 ctx=ctx,
                 model=model_data,  # model instance
                 num=num,
             )
         except Exception as e:
             self.window.core.debug.log(e)
-            self.window.ui.dialogs.alert(str(e))
+            self.window.ui.dialogs.alert(e)
             self.window.ui.status(trans('status.error'))
 
         return ctx
 
     def handle_response(self, ctx: CtxItem, paths: list, prompt: str):
         """
         Handle response
@@ -97,15 +99,15 @@
         string = ""
         i = 1
         for path in paths:
             string += "{}) `{}`".format(i, path) + "\n"
             i += 1
 
         if self.window.core.config.get('img_dialog_open'):
-            self.open_images(paths)
+            self.window.tools.get("viewer").open_images(paths)  # use viewer tool
 
         if not self.window.core.config.get('img_raw'):
             string += "\nPrompt: "
             string += prompt
 
         local_urls = self.window.core.filesystem.make_local_list(paths)
         ctx.images = local_urls  # save images paths
@@ -152,109 +154,27 @@
         self.window.ui.status(trans('status.img.generated'))  # update status
 
         # WARNING:
         # if internal (sync) mode, then re-send OK status response, if not, append only img result
         # it will only inform system that image was generated, user will see it in chat with image after render
         # of ctx item (link to images are appended to ctx item)
         if ctx.internal:
-            ctx.results.append({"request": {"cmd": "image"}, "result": "OK. Generated"})
+            ctx.results.append(
+                {
+                    "request": {
+                        "cmd": "image",
+                    },
+                    "result": "OK. Generated {} image(s).".format(len(paths)),
+                    "paths": paths,
+                }
+            )
             ctx.reply = True
             self.window.controller.chat.render.append_extra(ctx)  # show image first
             self.window.controller.chat.render.end_extra()
-            self.window.core.dispatcher.reply(ctx)
+            self.window.core.dispatcher.reply(ctx, flush=True)
             return
 
         # NOT internal-mode, user called, so append only img output to chat (show images now)
         self.window.controller.chat.render.append_extra(ctx)
         self.window.controller.chat.render.end_extra()
 
         self.window.stateChanged.emit(self.window.STATE_IDLE)  # set state to idle
-
-    def open_images(self, paths: list):
-        """
-        Open image in dialog
-
-        :param paths: paths to images
-        """
-        num_images = len(paths)
-        resize_to = 512
-        if num_images > 1:
-            resize_to = 256
-
-        i = 0
-        for path in paths:
-            pixmap = QtGui.QPixmap(path)
-            pixmap = pixmap.scaled(resize_to, resize_to, QtCore.Qt.KeepAspectRatio)
-            self.window.ui.nodes['dialog.image.pixmap'][i].path = path
-            self.window.ui.nodes['dialog.image.pixmap'][i].setPixmap(pixmap)
-            self.window.ui.nodes['dialog.image.pixmap'][i].setVisible(True)
-            i += 1
-
-        # hide unused images
-        for j in range(i, 4):
-            self.window.ui.nodes['dialog.image.pixmap'][j].setVisible(False)
-
-        # resize dialog
-        self.window.ui.dialog['image'].resize(520, 520)
-        self.window.ui.dialog['image'].show()
-
-    def open(self, path: str):
-        """
-        Open image in default image viewer
-
-        :param path: path to image
-        """
-        if os.path.exists(path):
-            self.window.controller.files.open(path)
-
-    def open_dir(self, path: str):
-        """
-        Open image in default image viewer
-
-        :param path: path to image
-        """
-        if os.path.exists(path):
-            self.window.controller.files.open_dir(
-                path,
-                True,
-            )
-
-    def save(self, path: str):
-        """
-        Save image
-
-        :param path: path to image
-        """
-        save_path = QFileDialog.getSaveFileName(
-            self.window,
-            trans('img.save.title'),
-            os.path.basename(path),
-            "PNG (*.png)",
-        )
-        if save_path:
-            try:
-                shutil.copyfile(path, save_path[0])
-                self.window.ui.status(trans('status.img.saved'))
-            except Exception as e:
-                self.window.core.debug.log(e)
-
-    def delete(self, path: str, force: bool = False):
-        """
-        Delete image
-
-        :param path: path to image
-        :param force: force delete without confirmation
-        """
-        if not force:
-            self.window.ui.dialogs.confirm(
-                type='img_delete',
-                id=path,
-                msg=trans('confirm.img.delete'),
-            )
-            return
-        try:
-            os.remove(path)
-            for i in range(0, 4):
-                if self.window.ui.nodes['dialog.image.pixmap'][i].path == path:
-                    self.window.ui.nodes['dialog.image.pixmap'][i].setVisible(False)
-        except Exception as e:
-            self.window.core.debug.log(e)
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/controller/chat/input.py` & `pygpt_net-2.2.0/src/pygpt_net/controller/chat/input.py`

 * *Files 10% similar despite different names*

```diff
@@ -2,20 +2,21 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.25 06:00:00                  #
+# Updated Date: 2024.03.15 10:00:00                  #
 # ================================================== #
 
 from PySide6.QtWidgets import QApplication
 
 from pygpt_net.core.dispatcher import Event
+from pygpt_net.item.ctx import CtxItem
 from pygpt_net.utils import trans
 
 
 class Input:
     def __init__(self, window=None):
         """
         Input controller
@@ -24,28 +25,35 @@
         """
         self.window = window
         self.locked = False
         self.stop = False
         self.generating = False
         self.no_api_key_allowed = [
             "langchain",
-            "llama_index"
+            "llama_index",
+            "agent",
         ]
         self.no_ctx_idx_modes = [
-            "img",
+            # "img",
             "assistant",
-            "llama_index"
-        ]  # assistant handled in async
+            # "llama_index",
+            "agent",
+        ]  # assistant is handled in async, agent is handled in agent flow
 
     def send_input(self, force: bool = False):
         """
         Send text from user input (called from UI)
 
         :param force: force send
         """
+        # check if not in edit mode
+        if not force and self.window.controller.ctx.extra.is_editing():
+            self.window.controller.ctx.extra.edit_submit()
+            return
+
         # get text from input
         text = self.window.ui.nodes['input'].toPlainText().strip()
         mode = self.window.core.config.get('mode')
 
         # if agent mode: iterations check
         if not force:
             if (mode == "agent" and self.window.core.config.get('agent.iterations') == 0) \
@@ -81,44 +89,49 @@
 
     def send(
             self,
             text: str = None,
             force: bool = False,
             reply: bool = False,
             internal: bool = False,
+            prev_ctx: CtxItem = None
     ):
         """
         Send input wrapper
 
         :param text: input text
         :param force: force send (ignore input lock)
         :param reply: reply mode (from plugins)
         :param internal: internal call
+        :param prev_ctx: previous context (if reply)
         """
         self.execute(
-            text,
+            text=text,
             force=force,
             reply=reply,
             internal=internal,
+            prev_ctx=prev_ctx,
         )
 
     def execute(
             self,
             text: str = None,
             force: bool = False,
             reply: bool = False,
             internal: bool = False,
+            prev_ctx: CtxItem = None
     ):
         """
         Execute send input text to API
 
         :param text: input text
         :param force: force send (ignore input lock)
         :param reply: reply mode (from plugins)
         :param internal: internal call
+        :param prev_ctx: previous context (if reply)
         """
         self.window.stateChanged.emit(self.window.STATE_IDLE)
 
         # check if input is not locked
         if self.locked and not force and not internal:
             return
 
@@ -136,26 +149,28 @@
                 self.generating = False  # unlock
                 return
         elif mode == 'vision' or self.window.controller.plugins.is_type_enabled('vision'):
             # capture frame from camera if auto-capture enabled
             if self.window.controller.camera.is_enabled():
                 if self.window.controller.camera.is_auto():
                     self.window.controller.camera.capture_frame(False)
+                    self.log("Captured frame from camera.")  # log
 
         # check if attachment exists, make this here to prevent clearing list on async reply!
         has_attachments = self.window.controller.attachment.has(mode)
 
         # unlock Assistant run thread if locked
         self.window.controller.assistant.threads.stop = False
         self.stop = False
 
         self.log("Input prompt: {}".format(text))  # log
 
         # agent mode
         if mode == 'agent':
+            self.log("Agent: input before: {}".format(text))
             text = self.window.controller.agent.flow.on_input_before(text)
 
         # event: before input
         event = Event(Event.INPUT_BEFORE, {
             'value': text,
             'mode': mode,
         })
@@ -196,46 +211,57 @@
             self.window.controller.ctx.handle_allowed(mode)
 
         # update UI
         QApplication.processEvents()
 
         # send input to API, return ctx
         if self.window.core.config.get('mode') == 'img':
-            ctx = self.window.controller.chat.image.send(text)  # image mode
+            ctx = self.window.controller.chat.image.send(
+                text=text,
+                prev_ctx=prev_ctx,
+            )  # image mode
         else:
             ctx = self.window.controller.chat.text.send(
-                text,
+                text=text,
                 reply=reply,
                 internal=internal,
-            )  # text mode: OpenAI, Langchain, Llama
+                prev_ctx=prev_ctx,
+            )  # text mode: OpenAI, Langchain, Llama, etc.
 
         # clear attachments after send, only if attachments has been provided before send
         if has_attachments:
             if self.window.core.config.get('attachments_send_clear'):
                 self.window.controller.attachment.clear(True)
                 self.window.controller.attachment.update()
+                self.log("Attachments cleared.")  # log
 
-        self.log("Context: END: {}".format(ctx))
+        if self.window.core.config.get("log.ctx"):
+            self.log("Context: END: {}".format(ctx))
+        else:
+            self.log("Context: END.")
 
         # agent mode
         if mode == 'agent':
+            agent_iterations = int(self.window.core.config.get("agent.iterations"))
+            self.log("Agent: ctx end, iterations: {}".format(agent_iterations))
             self.window.controller.agent.flow.on_ctx_end(
                 ctx,
-                iterations=int(self.window.core.config.get("agent.iterations")),
+                iterations=agent_iterations,
             )
 
         # event: context end
         event = Event(Event.CTX_END)
         event.ctx = ctx
         self.window.core.dispatcher.dispatch(event)
         self.window.controller.ui.update_tokens()  # update UI
         self.generating = False  # unlock
 
-        if mode not in self.no_ctx_idx_modes:
-            self.window.controller.idx.on_ctx_end(ctx)  # update ctx DB index
+        if mode not in self.no_ctx_idx_modes and not self.window.controller.agent.enabled():
+            self.window.controller.idx.on_ctx_end(ctx, mode=mode)  # update ctx DB index
+            # disabled in agent mode here to prevent loops, handled in agent flow internally if agent mode
 
         self.log("End.")
 
         # restore state to idle if no errors
         if self.window.state != self.window.STATE_ERROR:
             self.window.stateChanged.emit(self.window.STATE_IDLE)
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/controller/chat/output.py` & `pygpt_net-2.2.0/src/pygpt_net/controller/chat/output.py`

 * *Files 4% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.16 02:00:00                  #
+# Updated Date: 2024.04.26 23:00:00                  #
 # ================================================== #
 
 from PySide6.QtWidgets import QApplication
 
 from pygpt_net.core.dispatcher import Event
 from pygpt_net.item.ctx import CtxItem
 from pygpt_net.utils import trans
@@ -30,44 +30,44 @@
         """
         Handle response from LLM
 
         :param ctx: CtxItem
         :param mode: mode
         :param stream_mode: stream mode
         """
-        append_stream = stream_mode
         self.window.stateChanged.emit(self.window.STATE_BUSY)
 
         # if stream mode then append chunk by chunk
-        if append_stream and mode not in self.not_stream_modes:
-            self.append_stream(ctx, mode)
+        if stream_mode:
+            if mode not in self.not_stream_modes:
+                self.append_stream(ctx, mode)
 
         # check if tool calls detected
         if ctx.tool_calls:
             self.window.core.command.append_tool_calls(ctx)  # append tool calls as commands
             if not isinstance(ctx.extra, dict):
                 ctx.extra = {}
             ctx.extra["tool_calls"] = ctx.tool_calls
-            append_stream = False  # disable stream mode, show tool calls at the end
+            stream_mode = False  # disable stream mode, show tool calls at the end
 
         # agent mode
         if mode == 'agent':
             self.window.controller.agent.flow.on_ctx_after(ctx)
 
         # event: context after
         event = Event(Event.CTX_AFTER)
         event.ctx = ctx
         self.window.core.dispatcher.dispatch(event)
 
         self.log("Appending output to chat window...")
 
         # only append output if not in stream mode, TODO: plugin output add
-        if not append_stream:
+        if not stream_mode:
             self.window.controller.chat.render.append_output(ctx)
-            self.window.controller.chat.render.append_extra(ctx)
+            self.window.controller.chat.render.append_extra(ctx, True)  # + icons
 
         self.handle_complete(ctx)
 
     def append_stream(self, ctx: CtxItem, mode: str):
         """
         Handle stream response from LLM
 
@@ -180,23 +180,24 @@
                     self.window.core.command.unpack_tool_calls_chunks(ctx, tool_calls)
 
         except Exception as e:
             self.window.core.debug.log(e)
 
         self.window.controller.ui.update_tokens()  # update UI tokens
 
+        # update ctx
+        ctx.output = output
+        ctx.set_tokens(ctx.input_tokens, output_tokens)
+
         # chunks: stream end
         self.window.controller.chat.render.stream_end()
 
         # log
         self.log("End of stream.")
-
-        # update ctx
-        ctx.output = output
-        ctx.set_tokens(ctx.input_tokens, output_tokens)
+        
 
     def show_response_tokens(self, ctx: CtxItem):
         """
         Update response tokens
 
         :param ctx: CtxItem
         """
@@ -226,14 +227,17 @@
         # update response tokens
         self.show_response_tokens(ctx)
 
         # store to history
         if self.window.core.config.get('store_history'):
             self.window.core.history.append(ctx, "output")
 
+        # unlock input if not unlocked before
+        self.window.controller.chat.common.unlock_input()  
+
     def handle_cmd(self, ctx: CtxItem):
         """
         Handle commands
 
         :param ctx: CtxItem
         """
         mode = self.window.core.config.get('mode')
@@ -245,15 +249,14 @@
             # agent mode
             if mode == 'agent':
                 commands = self.window.controller.plugins.from_commands(cmds)  # pack to execution list
                 self.window.controller.agent.flow.on_cmd(
                     ctx,
                     commands,
                 )
-
                 # check if agent flow is not finished
                 if self.window.controller.agent.flow.finished:
                     return
 
             # plugins
             if self.window.core.config.get('cmd'):
                 self.log("Executing plugin commands...")
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/controller/chat/text.py` & `pygpt_net-2.2.0/src/pygpt_net/controller/chat/text.py`

 * *Files 10% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.20 18:00:00                  #
+# Updated Date: 2024.04.26 23:00:00                  #
 # ================================================== #
 
 from PySide6.QtWidgets import QApplication
 
 from pygpt_net.item.ctx import CtxItem
 from pygpt_net.core.dispatcher import Event
 from pygpt_net.utils import trans
@@ -26,27 +26,27 @@
         self.window = window
 
     def send(
             self,
             text: str,
             reply: bool = False,
             internal: bool = False,
+            prev_ctx: CtxItem = None
     ) -> CtxItem:
         """
         Send text message
 
         :param text: text to send
         :param reply: reply from plugins
         :param internal: internal call
+        :param prev_ctx: previous context item (if reply)
         :return: context item
         """
         self.window.ui.status(trans('status.sending'))
-
-        # prepare name
-        self.log("User name: {}".format(self.window.core.config.get('user_name')))  # log
+        is_ctx_debug = self.window.core.config.get("log.ctx")
 
         # event: username prepare
         event = Event(Event.USER_NAME, {
             'value': self.window.core.config.get('user_name'),
         })
         self.window.core.dispatcher.dispatch(event)
         user_name = event.data['value']
@@ -68,32 +68,38 @@
         ctx.meta_id = self.window.core.ctx.current
         ctx.internal = internal
         ctx.current = True  # mark as current context item
         ctx.mode = mode  # store current selected mode (not inline changed)
         ctx.model = model  # store model list key, not real model id
         ctx.set_input(text, user_name)
         ctx.set_output(None, ai_name)
+        ctx.prev_ctx = prev_ctx  # store previous context item if exists
 
         self.window.core.ctx.last_item = ctx  # store last item
 
+        # store thread id, assistant id and pass to gpt wrapper
+        if mode == 'assistant':
+            self.window.controller.assistant.prepare()  # create new thread if not exists
+            ctx.thread = self.window.core.config.get('assistant_thread')
+
         # upload assistant attachments (only assistant mode here)
-        attachments = self.window.controller.chat.files.upload(mode)
+        attachments = self.window.controller.chat.files.upload(mode)  # current thread is already in global config
         if len(attachments) > 0:
             ctx.attachments = attachments
+            self.window.ui.status(trans('status.sending'))
+            self.log("Uploaded attachments (Assistant): {}".format(len(attachments)))
 
         # store history (input)
         if self.window.core.config.get('store_history'):
-            self.window.core.history.append(ctx, "input")
-
-        # store thread id, assistant id and pass to gpt wrapper
-        if mode == 'assistant':
-            self.window.controller.assistant.prepare()  # create new thread if not exists
-            ctx.thread = self.window.core.config.get('assistant_thread')
+            self.window.core.history.append(ctx, "input")        
 
-        self.log("Context: INPUT: {}".format(ctx))
+        if is_ctx_debug:
+            self.log("Context: INPUT: {}".format(ctx))
+        else:
+            self.log("Context: INPUT.")
 
         # agent mode
         if mode == 'agent':
             self.window.controller.agent.flow.on_ctx_before(ctx)
 
         # event: context before
         event = Event(Event.CTX_BEFORE)
@@ -110,15 +116,15 @@
         self.window.core.dispatcher.dispatch(event)
         sys_prompt = event.data['value']
 
         # agent mode
         if mode == 'agent':
             sys_prompt = self.window.controller.agent.flow.on_system_prompt(
                 sys_prompt,
-                append_prompt=None,  # preset is used
+                append_prompt=None,  # sys prompt from preset is used here
                 auto_stop=self.window.core.config.get('agent.auto_stop'),
             )
 
         # event: system prompt (append to system prompt)
         event = Event(Event.SYSTEM_PROMPT, {
             'mode': mode,
             'value': sys_prompt,
@@ -135,19 +141,19 @@
         })
         event.ctx = ctx
         self.window.core.dispatcher.dispatch(event)
         sys_prompt = event.data['value']
 
         # event: command syntax apply (if commands enabled or inline plugin then append commands prompt)
         if self.window.core.config.get('cmd') or self.window.controller.plugins.is_type_enabled("cmd.inline"):
-            sys_prompt += " " + self.window.core.command.get_prompt()
             data = {
                 'mode': mode,
                 'prompt': sys_prompt,
                 'syntax': [],
+                'cmd': [],
             }
             # full execute cmd syntax
             if self.window.core.config.get('cmd'):
                 event = Event(Event.CMD_SYNTAX, data)
                 self.window.core.dispatcher.dispatch(event)
                 sys_prompt = self.window.core.command.append_syntax(event.data)
 
@@ -163,117 +169,131 @@
         stream_mode = self.window.core.config.get('stream')
 
         # render: begin
         self.window.controller.chat.render.begin(stream=stream_mode)
 
         # append text from input to chat window
         self.window.controller.chat.render.append_input(ctx)
+        self.window.ui.nodes['output'].update()
+        QApplication.processEvents()
 
         # add ctx to DB here and only update it after response,
         # MUST BE REMOVED NEXT AS FIRST MSG (LAST ON LIST)
         self.window.core.ctx.add(ctx)
 
         # update ctx list, but not reload all to prevent focus out on lists
         self.window.controller.ctx.update(
             reload=True,
             all=False,
         )
 
         # process events to update UI
-        QApplication.processEvents()
+        #QApplication.processEvents()
 
         # get external functions (if preset is chosen and functions are defined)
         functions = self.window.controller.presets.get_current_functions()
 
         # assistant only
         tools_outputs = []
         if mode == 'assistant':
             if self.window.controller.assistant.threads.is_running():
                 tools_outputs = self.window.controller.assistant.threads.apply_outputs(ctx)
                 self.window.controller.assistant.threads.reset()  # reset outputs
+                self.log("Appended Assistant tool outputs: {}".format(len(tools_outputs)))
 
                 # clear tool calls to prevent appending cmds to output (otherwise it will call commands again)
                 ctx.tool_calls = []
 
         try:
             # make API call
             try:
                 self.window.controller.chat.common.lock_input()  # lock input
+                files = self.window.core.attachments.get_all(mode)  # get attachments
+                num_files = len(files)
+                if num_files > 0:
+                    self.log("Attachments ({}): {}".format(mode, num_files))
 
                 # make call
                 result = self.window.core.bridge.call(
                     mode=mode,
                     model=model_data,
                     ctx=ctx,
                     prompt=text,
                     system_prompt=sys_prompt,
                     system_prompt_raw=sys_prompt_raw,
                     stream=stream_mode,
-                    attachments=self.window.core.attachments.get_all(mode),
+                    attachments=files,
                     assistant_id=self.window.core.config.get('assistant'),
                     idx=self.window.controller.idx.current_idx,
                     idx_raw=self.window.core.config.get('llama.idx.raw'),  # query mode
                     external_functions=functions,  # external functions
                     tools_outputs=tools_outputs,  # if not empty then will submit outputs
                 )
 
                 # update context in DB
                 ctx.current = False  # reset current state
                 self.window.core.ctx.update_item(ctx)
 
                 if result:
-                    self.log("Context: OUTPUT: {}".format(ctx.dump()))  # log
+                    if is_ctx_debug:
+                        self.log("Context: OUTPUT: {}".format(ctx.dump()))  # log
+                    else:
+                        self.log("Context: OUTPUT.")
                 else:
                     self.log("Context: OUTPUT: ERROR")
                     self.window.ui.dialogs.alert(trans('status.error'))
                     self.window.ui.status(trans('status.error'))
 
             except Exception as e:
                 self.log("GPT output error: {}".format(e))  # log
                 self.window.core.debug.log(e)
-                self.window.ui.dialogs.alert(str(e))
+                self.window.ui.dialogs.alert(e)
                 self.window.ui.status(trans('status.error'))
                 print("Error when calling API: " + str(e))
-                self.window.stateChanged.emit(self.window.STATE_ERROR)
+                self.window.controller.chat.common.unlock_input()
+            self.window.stateChanged.emit(self.window.STATE_ERROR)
 
             # handle response (if no assistant mode)
             # assistant response is handled in assistant thread
             if mode != "assistant":
+                ctx.from_previous()  # append previous result if exists
                 self.window.controller.chat.output.handle(
                     ctx,
                     mode,
                     stream_mode,
                 )
 
         except Exception as e:
-            self.log("Output error: {}".format(e))  # log
+            self.log("Output ERROR: {}".format(e))  # log
             self.window.core.debug.log(e)
-            self.window.ui.dialogs.alert(str(e))
+            self.window.ui.dialogs.alert(e)
             self.window.ui.status(trans('status.error'))
             print("Error in sending text: " + str(e))
+            self.window.controller.chat.common.unlock_input()
             self.window.stateChanged.emit(self.window.STATE_ERROR)
 
         # if commands enabled: post-execute commands (if no assistant mode)
         if mode != "assistant":
+            ctx.clear_reply()  # reset results
             self.window.controller.chat.output.handle_cmd(ctx)
+            ctx.from_previous()  # append previous result again before save
             self.window.core.ctx.update_item(ctx)  # update ctx in DB
 
         # render: end
         self.window.controller.chat.render.end(stream=stream_mode)
 
         # don't unlock input and leave stop btn if assistant mode or if agent/autonomous is enabled
         # send btn will be unlocked in agent mode on stop
-        if mode != "assistant" \
-                and mode != "agent" \
-                and not self.window.controller.plugins.is_type_enabled("agent"):
-            self.window.controller.chat.common.unlock_input()  # unlock input if not assistant mode
+        if mode != "assistant" and not self.window.controller.agent.enabled():
+            self.window.controller.chat.common.unlock_input()  # unlock input if not assistant and agent mode
 
         # handle ctx name (generate title from summary if not initialized)
         if not reply and not internal:  # don't call if reply or internal mode
             if self.window.core.config.get('ctx.auto_summary'):
+                self.log("Calling for prepare context name...")
                 self.window.controller.ctx.prepare_name(ctx)  # async
 
         return ctx
 
     def log(self, data: any):
         """
         Log data to debug
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/controller/chat/vision.py` & `pygpt_net-2.2.0/src/pygpt_net/controller/chat/vision.py`

 * *Files 16% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.01.30 20:00:00                  #
+# Updated Date: 2024.04.11 22:00:00                  #
 # ================================================== #
 
 class Vision:
     def __init__(self, window=None):
         """
         Chat vision controller
 
@@ -86,14 +86,25 @@
             return
         # abort if vision is already enabled
         if not self.window.controller.plugins.is_enabled('openai_vision') \
                 or (self.window.controller.plugins.is_enabled('openai_vision')
                     and mode not in self.allowed_modes):
             self.window.controller.mode.set('vision')
 
+    def allowed(self) -> bool:
+        """
+        Check if vision content is allowed
+
+        :return: True if allowed
+        """
+        if self.window.controller.plugins.is_enabled('openai_vision') \
+                or self.window.core.config.get('mode') in self.allowed_modes:
+            return True
+        return False
+
     def update(self):
         """Update vision content on mode change"""
         mode = self.window.core.config.get('mode')
         if mode in self.allowed_modes:
             self.show_inline()
         else:
             self.hide_inline()
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/controller/command.py` & `pygpt_net-2.2.0/src/pygpt_net/controller/command.py`

 * *Files 13% similar despite different names*

```diff
@@ -2,64 +2,80 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.01.29 16:00:00                  #
+# Updated Date: 2024.02.25 12:00:00                  #
 # ================================================== #
 
 import json
 
 from PySide6.QtCore import Signal
-from PySide6.QtWidgets import QApplication
 
 from pygpt_net.core.dispatcher import Event
 from pygpt_net.core.worker import Worker, WorkerSignals
 
 
 class Command:
     def __init__(self, window=None):
         """
         Commands dispatch controller
 
         :param window: Window instance
         """
         self.window = window
         self.stop = False
+        self.flush_events = [Event.CMD_EXECUTE, Event.CMD_INLINE]
 
-    def dispatch(self, event: Event):
+    def dispatch(self, event: Event, all: bool = False):
         """
         Dispatch cmd execute event (command execution)
 
         :param event: event object
+        :param all: True to dispatch to all plugins
         """
         self.window.core.debug.info("Dispatch CMD event begin: " + event.name)
         if self.window.core.debug.enabled():
             self.window.core.debug.debug("EVENT BEFORE: " + str(event))
 
+        # begin reply stack
+        if event.name in self.flush_events:
+            self.window.core.dispatcher.clear_reply_stack()
+
         for id in self.window.core.plugins.get_ids():
-            if self.window.controller.plugins.is_enabled(id):
+            if self.window.controller.plugins.is_enabled(id) or all:
                 if event.stop or (event.name == Event.CMD_EXECUTE and self.is_stop()):
                     if self.is_stop():
                         self.stop = False  # unlock needed here
                     break
                 if self.window.core.debug.enabled():
                     self.window.core.debug.debug("Apply [{}] to plugin: ".format(event.name) + id)
 
                 self.window.stateChanged.emit(self.window.STATE_BUSY)
                 self.window.core.dispatcher.apply(id, event)
 
-        # WARNING: do not emit finished signal here if event is internal (otherwise it will be emitted twice)
-        # it is handled already in internal event, in synchronous way
-        if event.ctx is not None and event.ctx.internal:
-            return
+        # flush reply stack
+        if event.name in self.flush_events:
+            self.window.core.dispatcher.flush_reply_stack()
+
+    def dispatch_only(self, event: Event):
+        """
+        Dispatch cmd execute event only (command execution)
 
-        self.handle_finished(event)  # emit finished signal only for non-internal (user-called) events
+        :param event: event object
+        """
+        self.window.core.debug.info("Dispatch CMD event begin: " + event.name)
+        if event.name in self.flush_events:
+            self.window.core.dispatcher.clear_reply_stack()
+        for id in self.window.core.plugins.get_ids():
+            self.window.core.dispatcher.apply(id, event)
+        if event.name in self.flush_events:
+            self.window.core.dispatcher.flush_reply_stack()
 
     def dispatch_async(self, event: Event):
         """
         Dispatch async cmd event (command execution)
 
         :param event: event object
         """
@@ -114,12 +130,17 @@
         if ctx is not None:
             self.window.core.debug.info("Reply...")
             if self.window.core.debug.enabled():
                 self.window.core.debug.debug("CTX REPLY: " + str(ctx))
 
             self.window.ui.status("")  # Clear status
             if ctx.reply:
+                data = json.dumps(ctx.results)
+                if ctx.extra_ctx:
+                    data = ctx.extra_ctx  # if extra content is set, use it as data to send
+                prev_ctx = self.window.core.ctx.as_previous(ctx)  # copy result to previous ctx and clear current ctx
                 self.window.controller.chat.input.send(
-                    json.dumps(ctx.results),
+                    text=data,
                     force=True,
                     internal=ctx.internal,
+                    prev_ctx=prev_ctx,
                 )
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/controller/config/__init__.py` & `pygpt_net-2.2.0/src/pygpt_net/controller/config/__init__.py`

 * *Files 16% similar despite different names*

```diff
@@ -2,19 +2,20 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.01.10 10:00:00                  #
+# Updated Date: 2024.04.26 23:00:00                  #
 # ================================================== #
 
 from .field.checkbox import Checkbox
 from .field.combo import Combo
+from .field.cmd import Cmd
 from .field.dictionary import Dictionary
 from .field.input import Input
 from .field.slider import Slider
 from .field.textarea import Textarea
 from .placeholder import Placeholder
 
 
@@ -24,14 +25,15 @@
         Configuration controller
 
         :param window: Window instance
         """
         self.window = window
         self.checkbox = Checkbox(window)
         self.combo = Combo(window)
+        self.cmd = Cmd(window)
         self.dictionary = Dictionary(window)
         self.input = Input(window)
         self.placeholder = Placeholder(window)
         self.slider = Slider(window)
         self.textarea = Textarea(window)
 
     def load_options(self, parent_id: str, options: dict):
@@ -64,34 +66,37 @@
             self.textarea.apply(parent_id, key, option)
         elif option['type'] == 'bool':
             self.checkbox.apply(parent_id, key, option)
         elif option['type'] == 'dict':
             self.dictionary.apply(parent_id, key, option)
         elif option['type'] == 'combo':
             self.combo.apply(parent_id, key, option)
+        elif option['type'] == 'cmd':
+            self.cmd.apply(parent_id, key, option)
 
     def apply_value(self, parent_id: str, key: str, option: dict, value):
         """
         Apply value to option
 
         :param parent_id: Parent ID
         :param key: Option key
         :param option: Option dict
         :param value: Option value
         """
         option['value'] = value
         self.apply(parent_id, key, option)
 
-    def get_value(self, parent_id: str, key: str, option: dict) -> any:
+    def get_value(self, parent_id: str, key: str, option: dict, idx: bool = False) -> any:
         """
         Get value from field handler based on type
 
         :param parent_id: Parent ID
         :param key: Option key
         :param option: Option dict
+        :param idx: return selected idx, not the value
         :return: Option value
         """
         if option['type'] == 'int' or option['type'] == 'float':
             if 'slider' in option and option['slider']:
                 return self.slider.get_value(parent_id, key, option)
             else:
                 return self.input.get_value(parent_id, key, option)
@@ -100,8 +105,20 @@
         elif option['type'] == 'textarea':
             return self.textarea.get_value(parent_id, key, option)
         elif option['type'] == 'bool':
             return self.checkbox.get_value(parent_id, key, option)
         elif option['type'] == 'dict':
             return self.dictionary.get_value(parent_id, key, option)
         elif option['type'] == 'combo':
-            return self.combo.get_value(parent_id, key, option)
+            return self.combo.get_value(parent_id, key, option, idx)
+        elif option['type'] == 'cmd':
+            return self.cmd.get_value(parent_id, key, option)
+
+    def update_combo(self, parent_id: str, key: str, items: dict):
+        """
+        Update combo items
+
+        :param parent_id: Parent ID
+        :param key: Option key
+        :param items: Items dict
+        """
+        self.combo.update_list(parent_id, key, items)
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/controller/config/field/checkbox.py` & `pygpt_net-2.2.0/src/pygpt_net/controller/config/field/checkbox.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/controller/config/field/combo.py` & `pygpt_net-2.2.0/src/pygpt_net/controller/config/field/textarea.py`

 * *Files 14% similar despite different names*

```diff
@@ -2,79 +2,80 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.01.30 20:00:00                  #
+# Updated Date: 2024.03.11 01:00:00                  #
 # ================================================== #
 
-class Combo:
+class Textarea:
     def __init__(self, window=None):
         """
-        Combobox field handler
+        Textarea field handler
 
         :param window: Window instance
         """
         self.window = window
 
     def apply(
             self,
             parent_id: str,
             key: str,
             option: dict
     ):
         """
-        Apply value to combobox
+        Apply value to textarea
 
         :param parent_id: Options parent ID
         :param key: Option key
         :param option: Option data
         """
-        value = option["value"]
-        index = self.window.ui.config[parent_id][key].combo.findData(value)
-        if index != -1:
-            self.window.ui.config[parent_id][key].combo.setCurrentIndex(index)
+        if key in self.window.ui.config[parent_id]:
+            self.window.ui.config[parent_id][key].setText("{}".format(option["value"]))
 
     def on_update(
             self,
             parent_id: str,
             key: str,
             option: dict,
             value: any,
             hooks: bool = True
     ):
         """
-        Event: on change combobox value
+        Event: on update
 
-        :param parent_id: Options parent ID
+        :param parent_id: Parent ID
         :param key: Option key
         :param option: Option data
         :param value: Option value
         :param hooks: Run hooks
         """
+        option["value"] = value
+        self.apply(parent_id, key, option)
+
         # on update hooks
         if hooks:
             hook_name = "update.{}.{}".format(parent_id, key)
             if self.window.ui.has_hook(hook_name):
                 hook = self.window.ui.get_hook(hook_name)
                 try:
-                    hook(key, value, "combo")
+                    hook(key, value, "textarea")
                 except Exception as e:
                     self.window.core.debug.log(e)
 
     def get_value(
             self,
             parent_id: str,
             key: str,
             option: dict
     ) -> str:
         """
-        Get checkbox value
+        Get value of textarea
 
         :param parent_id: Parent ID
         :param key: Option key
-        :param option: Option data dict
-        :return: Option value
+        :param option: Option data
+        :return: Textarea option value (plain text)
         """
-        return self.window.ui.config[parent_id][key].combo.currentData()
+        return self.window.ui.config[parent_id][key].toPlainText()
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/controller/config/field/dictionary.py` & `pygpt_net-2.2.0/src/pygpt_net/controller/config/field/dictionary.py`

 * *Files 2% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.25 01:00:00                  #
+# Updated Date: 2024.03.12 06:00:00                  #
 # ================================================== #
 
 from pygpt_net.utils import trans
 
 
 class Dictionary:
     def __init__(self, window=None):
@@ -51,14 +51,17 @@
         Apply data values to dictionary
 
         :param parent_id: Options parent ID
         :param key: Option key
         :param values: dictionary data values
         :param idx: row index
         """
+        # if cmd type, remove .params suffix
+        if key.endswith(".params"):
+            key = key.replace(".params", "")
         self.window.ui.config[parent_id][key].update_item(idx, values)
 
     def get_value(
             self,
             parent_id: str,
             key: str,
             option: dict
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/controller/config/field/input.py` & `pygpt_net-2.2.0/src/pygpt_net/controller/config/field/input.py`

 * *Files 7% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.01.30 20:00:00                  #
+# Updated Date: 2024.03.15 12:00:00                  #
 # ================================================== #
 
 class Input:
     def __init__(self, window=None):
         """
         Text input field handler
 
@@ -28,27 +28,37 @@
         Apply value to input
 
         :param parent_id: Options parent ID
         :param key: Option key
         :param option: Option data
         """
         value = option["value"]
+
+        # type
         if "type" in option and option["type"] == "int":
-            value = round(int(value), 0)
+            try:
+                value = round(int(value), 0)
+            except Exception:
+                value = 0
         elif "type" in option and option["type"] == "float":
-            value = float(value)
+            try:
+                value = float(value)
+            except Exception:
+                value = 0.0
 
+        # min/max
         if "type" in option and option["type"] == "int" or option["type"] == "float":
             if value is not None:
                 if "min" in option and option["min"] is not None and value < option["min"]:
                     value = option["min"]
                 elif "max" in option and option["max"] is not None and value > option["max"]:
                     value = option["max"]
 
-        self.window.ui.config[parent_id][key].setText("{}".format(value))
+        if key in self.window.ui.config[parent_id]:
+            self.window.ui.config[parent_id][key].setText("{}".format(value))
 
     def on_update(
             self,
             parent_id: str,
             key: str,
             option: dict,
             value: any,
@@ -90,17 +100,17 @@
         :param option: Option data
         :return: Value
         """
         value = None
         if option["type"] == "int":
             try:
                 value = int(self.window.ui.config[parent_id][key].text())
-            except ValueError:
+            except Exception:
                 value = 0
         elif option["type"] == "float":
             try:
                 value = float(self.window.ui.config[parent_id][key].text())
-            except ValueError:
+            except Exception:
                 value = 0.0
         elif option["type"] == "text":
             value = self.window.ui.config[parent_id][key].text()
         return value
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/controller/config/field/slider.py` & `pygpt_net-2.2.0/src/pygpt_net/controller/config/field/slider.py`

 * *Files 5% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.01.30 20:00:00                  #
+# Updated Date: 2024.04.20 06:00:00                  #
 # ================================================== #
 
 class Slider:
     def __init__(self, window=None):
         """
         Slider field handler
 
@@ -42,20 +42,20 @@
         if "multiplier" in option:
             multiplier = option["multiplier"]
 
         if type != "slider":
             if is_integer:
                 try:
                     value = round(int(value), 0)
-                except ValueError as e:
+                except Exception as e:
                     value = 0
             else:
                 try:
                     value = float(value)
-                except ValueError as e:
+                except Exception as e:
                     value = 0.0
 
             if "min" in option and value < option["min"]:
                 value = option["min"]
             elif "max" in option and value > option["max"]:
                 value = option["max"]
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/controller/config/field/textarea.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/widget/option/prompt.py`

 * *Files 26% similar despite different names*

```diff
@@ -2,79 +2,81 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.01.30 20:00:00                  #
+# Updated Date: 2024.04.22 23:00:00                  #
 # ================================================== #
 
-class Textarea:
-    def __init__(self, window=None):
-        """
-        Textarea field handler
-
-        :param window: Window instance
-        """
-        self.window = window
-
-    def apply(
-            self,
-            parent_id: str,
-            key: str,
-            option: dict
-    ):
-        """
-        Apply value to textarea
+from PySide6.QtWidgets import QTextEdit
 
-        :param parent_id: Options parent ID
-        :param key: Option key
-        :param option: Option data
-        """
-        self.window.ui.config[parent_id][key].setText("{}".format(option["value"]))
 
-    def on_update(
+class PromptTextarea(QTextEdit):
+    def __init__(
             self,
-            parent_id: str,
-            key: str,
-            option: dict,
-            value: any,
-            hooks: bool = True
+            window=None,
+            parent_id: str = None,
+            id: str = None,
+            option: dict = None
     ):
         """
-        Event: on update
+        Global prompt textarea
 
-        :param parent_id: Parent ID
-        :param key: Option key
-        :param option: Option data
-        :param value: Option value
-        :param hooks: Run hooks
-        """
-        option["value"] = value
-        self.apply(parent_id, key, option)
-
-        # on update hooks
-        if hooks:
-            hook_name = "update.{}.{}".format(parent_id, key)
-            if self.window.ui.has_hook(hook_name):
-                hook = self.window.ui.get_hook(hook_name)
-                try:
-                    hook(key, value, "textarea")
-                except Exception as e:
-                    self.window.core.debug.log(e)
-
-    def get_value(
-            self,
-            parent_id: str,
-            key: str,
-            option: dict
-    ) -> str:
-        """
-        Get value of textarea
-
-        :param parent_id: Parent ID
-        :param key: Option key
-        :param option: Option data
-        :return: Textarea option value (plain text)
+        :param window: main window
+        :param id: option id
+        :param parent_id: parent option id
+        :param option: option data
         """
-        return self.window.ui.config[parent_id][key].toPlainText()
+        super(PromptTextarea, self).__init__(window)
+        self.window = window
+        self.id = id
+        self.parent_id = parent_id
+        self.option = option
+        self.value = False
+        self.title = ""
+        self.update_ui = True
+        self.setAcceptRichText(False)
+        self.textChanged.connect(
+            lambda: self.on_prompt_changed())
+
+        # init from option data
+        if self.option is not None:
+            if "label" in self.option:
+                self.title = self.option["label"]
+            if "value" in self.option:
+                self.value = self.option["value"]
+            if "real_time" in self.option:
+                self.real_time = self.option["real_time"]
+
+    def keyPressEvent(self, event):
+        """
+        Key press event
+
+        :param event: key event
+        """
+        super(PromptTextarea, self).keyPressEvent(event)
+
+    def contextMenuEvent(self, event):
+        """
+        Context menu event
+
+        :param event: Event
+        """
+        menu = self.createStandardContextMenu()
+        self.window.core.prompt.template.to_menu_options(menu, "global")
+        menu.exec_(event.globalPos())
+
+    def on_prompt_changed(self):
+        """On prompt changed"""
+        # hook update
+        if self.window.controller.mode.locked:
+            return
+
+        self.window.controller.config.input.on_update(
+            self.window.ui.nodes['preset.prompt'].parent_id,
+            self.window.ui.nodes['preset.prompt'].id,
+            self.window.ui.nodes['preset.prompt'].option,
+            self.window.ui.nodes['preset.prompt'].toPlainText(),
+        )
+        self.window.controller.ui.update_tokens()
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/controller/config/placeholder.py` & `pygpt_net-2.2.0/src/pygpt_net/controller/config/placeholder.py`

 * *Files 21% similar despite different names*

```diff
@@ -2,17 +2,19 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.03.01 17:00:00                  #
+# Updated Date: 2024.04.24 02:00:00                  #
 # ================================================== #
 
+from pygments.styles import get_all_styles
+
 class Placeholder:
     def __init__(self, window=None):
         """
         Configuration placeholder options controller
 
         :param window: Window instance
         """
@@ -28,14 +30,22 @@
             for key in option['keys']:
                 item = option['keys'][key]
                 if type(item) is dict:
                     if "type" in item:
                         if item["type"] == "combo":
                             if "use" in item and item["use"] is not None:
                                 item["keys"] = self.apply_by_id(item["use"])
+        elif option['type'] == 'cmd' and 'params_keys' in option:
+            for key in option['params_keys']:
+                item = option['params_keys'][key]
+                if type(item) is dict:
+                    if "type" in item:
+                        if item["type"] == "combo":
+                            if "use" in item and item["use"] is not None:
+                                item["keys"] = self.apply_by_id(item["use"])
         elif option['type'] == 'combo':
             if "use" in option and option["use"] is not None:
                 option["keys"] = self.apply_by_id(option["use"])
 
     def apply_by_id(self, id: str) -> list:
         """
         Apply placeholders by id
@@ -46,22 +56,30 @@
             return self.get_presets()
         elif id == "models":
             return self.get_models()
         elif id == "langchain_providers":
             return self.get_langchain_providers()
         elif id == "llama_index_providers":
             return self.get_llama_index_providers()
+        elif id == "embeddings_providers":
+            return self.get_embeddings_providers()
         elif id == "llama_index_loaders":
             return self.get_llama_index_loaders()
+        elif id == "llama_index_loaders_file":
+            return self.get_llama_index_loaders(type="file")
+        elif id == "llama_index_loaders_web":
+            return self.get_llama_index_loaders(type="web")
         elif id == "vector_storage":
             return self.get_vector_storage()
         elif id == "var_types":
             return self.get_var_types()
         elif id == "agent_modes":
             return self.get_agent_modes()
+        elif id == "syntax_styles":
+            return self.get_syntax_styles()
         elif id == "idx":
             return self.get_idx()
         else:
             return []
 
     def get_langchain_providers(self) -> list:
         """
@@ -85,21 +103,48 @@
         ids = self.window.core.llm.get_ids("llama_index")
         data = []
         data.append({'_': '---'})
         for id in ids:
             data.append({id: id})
         return data
 
-    def get_llama_index_loaders(self) -> list:
+    def get_embeddings_providers(self) -> list:
+        """
+        Get embeddings placeholders list
+
+        :return: placeholders list
+        """
+        ids = self.window.core.llm.get_ids("embeddings")
+        data = []
+        data.append({'_': '---'})
+        for id in ids:
+            data.append({id: id})
+        return data
+
+    def get_llama_index_loaders(self, type: str = "all") -> list:
         """
         Get data loaders placeholders list
 
+        :param type: data type
         :return: placeholders list
         """
-        return self.window.controller.idx.common.get_loaders_choices()
+        data = []
+        choices = self.window.controller.idx.common.get_loaders_choices() # list
+        for choice in choices:
+            if type == "all":
+                data.append(choice)
+            elif type == "file":
+                key = list(choice.keys())[0]
+                if key.startswith("file_"):
+                    data.append(choice)
+            elif type == "web":
+                key = list(choice.keys())[0]
+                if key.startswith("web_"):
+                    data.append(choice)
+        return data
 
     def get_vector_storage(self) -> list:
         """
         Get vector storage placeholders list
 
         :return: placeholders list
         """
@@ -169,7 +214,20 @@
         """
         indexes = self.window.core.idx.get_idx_ids()
         data = []
         data.append({'_': '---'})
         for id in indexes:
             data.append({id: id})
         return data
+
+    def get_syntax_styles(self) -> list:
+        """
+        Get llama placeholders list
+
+        :return: placeholders list
+        """
+        styles = list(get_all_styles())
+        styles.sort()
+        data = []
+        for id in styles:
+            data.append({id: id})
+        return data
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/controller/ctx/__init__.py` & `pygpt_net-2.2.0/src/pygpt_net/core/idx/__init__.py`

 * *Files 26% similar despite different names*

```diff
@@ -2,492 +2,564 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.27 04:00:00                  #
+# Updated Date: 2024.04.17 01:00:00                  #
 # ================================================== #
 
-from pygpt_net.controller.ctx.common import Common
-from pygpt_net.controller.ctx.summarizer import Summarizer
-from pygpt_net.core.dispatcher import Event
-from pygpt_net.item.ctx import CtxItem
+import datetime
+from packaging.version import Version
 
-from pygpt_net.utils import trans
+from pygpt_net.item.index import IndexItem
+from pygpt_net.provider.core.index.base import BaseProvider
+from pygpt_net.provider.core.index.json_file import JsonFileProvider
+from pygpt_net.provider.core.index.db_sqlite import DbSqliteProvider
+from pygpt_net.provider.vector_stores import Storage
+
+from .indexing import Indexing
+from .llm import Llm
+from .chat import Chat
+from .metadata import Metadata
+
+from .types.ctx import Ctx
+from .types.external import External
+from .types.files import Files
 
 
-class Ctx:
+class Idx:
     def __init__(self, window=None):
         """
-        Context controller
+        Indexer core
 
         :param window: Window instance
         """
         self.window = window
-        self.common = Common(window)
-        self.summarizer = Summarizer(window)
+        self.indexing = Indexing(window)
+        self.llm = Llm(window)
+        self.storage = Storage(window)
+        self.chat = Chat(window, self.storage)
+        self.metadata = Metadata(window)
 
-    def setup(self):
-        """Setup ctx"""
-        # load filters first
-        self.common.restore_display_filter()
-
-        # load ctx list
-        self.window.core.ctx.load_meta()
-
-        # if no context yet then create one
-        if self.window.core.ctx.count_meta() == 0:
-            self.new()
-        else:
-            # get last ctx from config
-            id = self.window.core.config.get('ctx')
-            if id is not None and self.window.core.ctx.has(id):
-                self.window.core.ctx.current = id
-            else:
-                # if no ctx then get first ctx
-                self.window.core.ctx.current = self.window.core.ctx.get_first()
-
-        # load selected ctx
-        self.load(self.window.core.ctx.current)
-
-        # restore search string if exists
-        if self.window.core.config.has("ctx.search.string"):
-            string = self.window.core.config.get("ctx.search.string")
-            if string is not None and string != "":
-                self.window.ui.nodes['ctx.search'].setText(string)
-                self.search_string_change(string)
-                # check if current selected ctx is still valid
-                if self.window.core.ctx.current is not None:
-                    if not self.window.core.ctx.has(self.window.core.ctx.current):
-                        self.search_string_clear()
-                        # ^ clear search and reload ctx list to prevent creating new ctx
-
-    def update(self, reload: bool = True, all: bool = True):
-        """
-        Update ctx list
-
-        :param reload: reload ctx list items
-        :param all: update all
-        """
-        # reload ctx list items
-        if reload:
-            self.reload(True)
-            self.select_by_current()  # select on list
-
-        # update all
-        if all:
-            self.window.controller.ui.update()
-
-        # append ctx and thread id (assistants API) to config
-        id = self.window.core.ctx.current
-        if id is not None:
-            self.window.core.config.set('ctx', id)
-            self.window.core.config.set('assistant_thread', self.window.core.ctx.thread)
-            self.window.core.config.save()
-
-        # update calendar ctx list
-        self.window.controller.calendar.update(all=False)
-
-    def select(self, id: int):
-        """
-        Select ctx by id
+        self.providers = {
+            "json_file": JsonFileProvider(window),  # only for patching
+            "db_sqlite": DbSqliteProvider(window),
+        }
+        self.provider = "db_sqlite"
+        self.items = {}
+        self.initialized = False
 
-        :param id: context id
-        """
-        prev_id = self.window.core.ctx.current
-        self.window.core.ctx.current = id
+        # internal types
+        self.ctx = Ctx(window, self.get_provider())
+        self.external = External(window, self.get_provider())
+        self.files = Files(window, self.get_provider())
 
-        if prev_id != id:
-            self.load(id)
-        self.common.focus_chat()
+    def install(self):
+        """Install provider data"""
+        self.get_provider().install()
 
-    def select_by_idx(self, idx: int):
+    def patch(self, app_version: Version) -> bool:
         """
-        Select ctx by index
+        Patch provider data
 
-        :param idx: context index
+        :param app_version: app version
+        :return: True if success
         """
-        # lock if generating response is in progress
-        if self.context_change_locked():
-            return
-
-        id = self.window.core.ctx.get_id_by_idx(idx)
-        self.select(id)
+        return self.get_provider().patch(app_version)
 
-        event = Event(Event.CTX_SELECT, {
-            'value': id,
-        })
-        self.window.core.dispatcher.dispatch(event)
+    def init(self):
+        """Initialize indexes"""
+        if not self.initialized:
+            self.load()
+            self.initialized = True
 
-    def select_by_current(self):
-        """Select ctx by current"""
-        id = self.window.core.ctx.current
-        meta = self.window.core.ctx.get_meta()
-        if id in meta:
-            idx = self.window.core.ctx.get_idx_by_id(id)
-            current = self.window.ui.models['ctx.list'].index(idx, 0)
-            self.window.ui.nodes['ctx.list'].unlocked = True  # tmp allow change if locked (enable)
-            self.window.ui.nodes['ctx.list'].setCurrentIndex(current)
-            self.window.ui.nodes['ctx.list'].unlocked = False  # tmp allow change if locked (disable)
-
-    def new(self, force: bool = False):
+    def get_current_store(self) -> str:
         """
-        Create new ctx
+        Get current vector store name/ID
 
-        :param force: force context creation
+        :return: vector store name
         """
-        # lock if generating response is in progress
-        if not force and self.context_change_locked():
-            return
-
-        self.window.core.ctx.new()
-        self.window.core.config.set('assistant_thread', None)  # reset assistant thread id
-        self.update()
-
-        # reset appended data
-        self.window.controller.chat.render.reset()
-        self.window.controller.chat.render.clear_output()
-
-        if not force:  # only if real click on new context button
-            self.window.controller.chat.common.unlock_input()
-            self.window.ui.nodes['input'].setFocus()  # set focus to input
-
-        # update context label
-        mode = self.window.core.ctx.mode
-        assistant_id = None
-        if mode == 'assistant':
-            assistant_id = self.window.core.config.get('assistant')
-        self.common.update_label(mode, assistant_id)
-        self.common.focus_chat()
+        return self.window.core.config.get('llama.idx.storage')
 
-    def add(self, ctx: CtxItem):
+    def get_provider(self) -> BaseProvider:
         """
-        Add ctx item (CtxItem object)
+        Get provider instance
 
-        :param ctx: CtxItem
+        :return: provider instance
         """
-        self.window.core.ctx.add(ctx)
-        self.update()
+        return self.providers.get(self.provider)
 
-    def reload(self, reload: bool = False):
+    def store_index(self, idx: str = "base"):
         """
-        Reload current ctx list
+        Store (persist) index data
 
-        :param reload: reload ctx list items
+        :param idx: index name/ID
         """
-        self.window.ui.contexts.ctx_list.update(
-            'ctx.list',
-            self.window.core.ctx.get_meta(reload),
-        )
-
-    def refresh(self):
-        """Refresh context"""
-        self.load(self.window.core.ctx.current)
-
-    def refresh_output(self):
-        """Refresh output"""
-        # append ctx to output
-        self.window.controller.chat.render.append_context(
-            self.window.core.ctx.items,
-            clear=True,
-        )
+        self.storage.store(idx)
 
-    def load(self, id: int):
+    def remove_index(self, idx: str = "base", truncate: bool = False) -> bool:
         """
-        Load ctx data
+        Truncate index
 
-        :param id: context ID
+        :param idx: index name
+        :param truncate: truncate index (remove all data)
+        :return: True if success
         """
-        # select ctx by id
-        self.window.core.ctx.select(id)
+        # get current store
+        store = self.get_current_store()
 
-        # reset appended data
-        self.window.controller.chat.render.reset()
+        # clear db data
+        self.ctx.truncate(store, idx)
+        self.files.truncate(store, idx)
 
-        # get current settings stored in ctx
-        thread = self.window.core.ctx.thread
-        mode = self.window.core.ctx.mode
-        model = self.window.core.ctx.model
-        assistant_id = self.window.core.ctx.assistant
-        preset = self.window.core.ctx.preset
+        # clear ctx data indexed status
+        self.window.core.ctx.idx.truncate_indexed(store, idx)
 
-        # restore thread from ctx
-        self.window.core.config.set('assistant_thread', thread)
-
-        # clear before output and append ctx to output
-        self.refresh_output()
+        # clear storage, remove index
+        if truncate:
+            return self.storage.truncate(idx)
+        else:
+            return self.storage.remove(idx)
 
-        # switch mode to ctx mode
-        if mode is not None:
-            self.window.controller.mode.set(mode)  # preset reset here
+    def index_files(
+            self,
+            idx: str = "base",
+            path: str = None,
+            replace: bool = None,
+            recursive: bool = None,
+    ) -> (dict, list):
+        """
+        Index file or directory of files
+
+        :param idx: index name
+        :param path: path to file or directory
+        :param replace: replace index
+        :param recursive: recursive indexing
+        :return: dict with indexed files (path -> id), list with errors
+        """
+        context = self.llm.get_service_context()
+        index = self.storage.get(
+            id=idx,
+            service_context=context,
+        )  # get or create index
+        files, errors = self.indexing.index_files(
+            idx=idx,
+            index=index,
+            path=path,
+            replace=replace,
+            recursive=recursive,
+        )  # index files
+        if len(files) > 0:
+            self.storage.store(
+                id=idx,
+                index=index,
+            )  # store index
 
-            # switch preset to ctx preset
-            if preset is not None:
-                self.window.controller.presets.set(mode, preset)
-                self.window.controller.presets.refresh()  # update presets only
+        if errors:
+            self.log("Error: " + str(errors))
+        return files, errors
 
-            # if ctx mode == assistant then switch assistant to ctx assistant
-            if mode == 'assistant':
-                # if assistant defined then select it
-                if assistant_id is not None:
-                    self.window.controller.assistant.select_by_id(assistant_id)
-                else:
-                    # if empty ctx assistant then get assistant from current selected
-                    assistant_id = self.window.core.config.get('assistant')
+    def index_db_by_meta_id(
+            self,
+            idx: str = "base",
+            id: int = 0,
+            from_ts: int = 0
+    ) -> (int, list):
+        """
+        Index records from db by meta id
+
+        :param idx: index name
+        :param id: CtxMeta id
+        :param from_ts: timestamp from
+        :return: num of indexed files, list with errors
+        """
+        context = self.llm.get_service_context()
+        index = self.storage.get(
+            id=idx,
+            service_context=context,
+        )  # get or create index
+        num, errors = self.indexing.index_db_by_meta_id(
+            idx=idx,
+            index=index,
+            id=id,
+            from_ts=from_ts,
+        )  # index db records
+        if num > 0:
+            self.storage.store(
+                id=idx,
+                index=index,
+            )  # store index
 
-            # switch model to ctx model if model is defined in ctx and model is available for this mode
-            if model is not None and self.window.core.models.has_model(mode, model):
-                self.window.controller.model.set(mode, model)
-
-        # reload ctx list and select current ctx on list
-        self.update()
-
-        # update current ctx label in UI
-        self.common.update_label(mode, assistant_id)
-
-    def update_ctx(self):
-        """Update current ctx mode if allowed"""
-        mode = self.window.core.config.get('mode')
-
-        id = None
-        # update ctx mode only if current ctx is allowed for this mode
-        if self.window.core.ctx.is_allowed_for_mode(mode, False):  # do not check assistant match
-            self.window.core.ctx.update()
-
-            # update current context label
-            if mode == 'assistant':
-                if self.window.core.ctx.assistant is not None:
-                    # get assistant id from ctx if defined in ctx
-                    id = self.window.core.ctx.assistant
-                else:
-                    # or get assistant id from current selected assistant
-                    id = self.window.core.config.get('assistant')
+        if errors:
+            self.log("Error: " + str(errors))
+        return num, errors
 
-        # update ctx label
-        self.common.update_label(mode, id)
+    def index_db_from_updated_ts(
+            self,
+            idx: str = "base",
+            from_ts: int = 0
+    ) -> (int, list):
+        """
+        Index records from db by meta id
+
+        :param idx: index name
+        :param from_ts: timestamp from
+        :return: num of indexed files, list with errors
+        """
+        context = self.llm.get_service_context()
+        index = self.storage.get(
+            id=idx,
+            service_context=context,
+        )  # get or create index
+        num, errors = self.indexing.index_db_from_updated_ts(
+            idx=idx,
+            index=index,
+            from_ts=from_ts,
+        )  # index db records
+        if num > 0:
+            self.storage.store(
+                id=idx,
+                index=index,
+            )  # store index
 
-    def delete(self, idx: int, force: int = False):
-        """
-        Delete ctx by idx
+        if errors:
+            self.log("Error: " + str(errors))
+        return num, errors
 
-        :param idx: context idx
-        :param force: force delete
-        """
-        if not force:
-            self.window.ui.dialogs.confirm(
-                type='ctx_delete',
+    def index_urls(
+            self,
+            idx: str = "base",
+            urls: list = None,
+            type: str = "webpage",
+            extra_args: dict = None
+    ) -> (dict, list):
+        """
+        Index URLs
+
+        :param idx: index name
+        :param urls: list of urls
+        :param type: type of url
+        :param extra_args: extra args
+        :return: num of indexed, list with errors
+        """
+        context = self.llm.get_service_context()
+        index = self.storage.get(
+            id=idx,
+            service_context=context,
+        )  # get or create index
+        n, errors = self.indexing.index_urls(
+            idx=idx,
+            index=index,
+            urls=urls,
+            type=type,
+            extra_args=extra_args,
+        )  # index urls
+        if n > 0:
+            self.storage.store(
                 id=idx,
-                msg=trans('ctx.delete.confirm'),
-            )
-            return
+                index=index,
+            )  # store index
 
-        id = self.window.core.ctx.get_id_by_idx(idx)
+        if errors:
+            self.log("Error: " + str(errors))
+        return n, errors
 
-        # delete data from indexes if exists
-        try:
-            self.delete_meta_from_idx(id)
-        except Exception as e:
-            self.window.core.debug.log(e)
-            print("Error deleting ctx data from indexes", e)
-
-        # delete ctx items from db
-        items = self.window.core.ctx.all()
-        self.window.core.history.remove_items(items)  # remove txt history items
-        self.window.core.ctx.remove(id)  # remove ctx from db
+    def index_web(
+            self,
+            idx: str = "base",
+            type: str = "webpage",
+            params: dict = None,
+            config: dict = None,
+            replace: bool = None,
+    ) -> (dict, list):
+        """
+        Index URLs
+
+        :param idx: index name
+        :param type: type of url
+        :param params: extra args
+        :param config: extra config
+        :param replace: replace index
+        :return: num of indexed, list with errors
+        """
+        # update config params
+        self.indexing.update_loader_args(type, config)
+
+        context = self.llm.get_service_context()
+        index = self.storage.get(
+            id=idx,
+            service_context=context,
+        )  # get or create index
+        n, errors = self.indexing.index_url(
+            idx=idx,
+            index=index,
+            url="",
+            type=type,
+            extra_args=params,
+            is_tmp=False,
+            replace=replace,
+        )
+        if n > 0:
+            self.storage.store(
+                id=idx,
+                index=index,
+            )  # store index
 
-        # reset current if current ctx deleted
-        if self.window.core.ctx.current == id:
-            self.window.core.ctx.current = None
-            self.window.controller.chat.render.clear_output()
-        self.update()
+        if errors:
+            self.log("Error: " + str(errors))
+        return n, errors
 
-    def delete_meta_from_idx(self, id: int):
+    def get_idx_data(self, idx: str = None) -> dict:
         """
-        Delete meta from indexes
+        Get indexed files data
 
-        :param id: ctx meta id
+        :param idx: index name
+        :return: indexed files data (idx -> items)
         """
-        meta = self.window.core.ctx.get_meta_by_id(id)
-        if meta is None:
-            return
-
-        # check if ctx is indexed
-        if meta.indexed is not None and meta.indexed > 0:
-            for store_id in list(meta.indexes):
-                for idx in list(meta.indexes[store_id]):
-                    self.window.core.ctx.idx.remove_meta_from_indexed(store_id, id, idx)
+        indexes = {}
+        store_id = self.get_current_store()
+        if idx is not None:
+            if store_id in self.items and idx in self.items[store_id]:
+                indexes[idx] = self.items[store_id][idx].items
+        else:
+            # all indexes
+            if store_id in self.items:
+                for idx in self.items[store_id]:
+                    indexes[idx] = self.items[store_id][idx].items
+        return indexes
 
-    def delete_history(self, force: bool = False):
+    def get_by_idx(self, idx: int) -> str:
         """
-        Delete all ctx / truncate
+        Return idx by list index
 
-        :param force: force delete
+        :param idx: idx on list
+        :return: idx name
         """
-        if not force:
-            self.window.ui.dialogs.confirm(
-                type='ctx_delete_all',
-                id='',
-                msg=trans('ctx.delete.all.confirm'),
-            )
-            return
-
-        # truncate index db if exists
-        try:
-            self.window.core.idx.ctx.truncate()
-        except Exception as e:
-            self.window.core.debug.log(e)
-            print("Error truncating ctx index db", e)
+        items = self.window.core.config.get('llama.idx.list')
+        if items is not None:
+            if idx < len(items):
+                return items[idx]['id']
 
-        # truncate ctx and history
-        self.window.core.ctx.truncate()
-        self.window.core.history.truncate()
-        self.update()
-        self.new()
-
-    def rename(self, idx: int):
+    def get_idx_by_name(self, name: str) -> int:
         """
-        Ctx name rename (show dialog)
+        Return idx on list by name
 
-        :param idx: context idx
+        :param name: idx name
+        :return: idx on list
         """
-        id = self.window.core.ctx.get_id_by_idx(idx)
-        meta = self.window.core.ctx.get_meta_by_id(id)
-        self.window.ui.dialog['rename'].id = 'ctx'
-        self.window.ui.dialog['rename'].input.setText(meta.name)
-        self.window.ui.dialog['rename'].current = id
-        self.window.ui.dialog['rename'].show()
-        self.update()
+        items = self.window.core.config.get('llama.idx.list')
+        if items is not None:
+            for idx, item in enumerate(items):
+                if item['id'] == name:
+                    return idx
 
-    def set_important(self, idx: int, value: bool = True):
+    def get_default_idx(self) -> str:
         """
-        Set as important
+        Return default idx
 
-        :param idx: context idx
-        :param value: important value
+        :return: idx name
         """
-        id = self.window.core.ctx.get_id_by_idx(idx)
-        meta = self.window.core.ctx.get_meta_by_id(id)
-        if meta is not None:
-            meta.important = value
-            self.window.core.ctx.save(id)
-            self.update()
+        if len(self.items) > 0:
+            return self.get_by_idx(0)
 
-    def is_important(self, idx: int) -> bool:
+    def has(self, idx: str) -> bool:
         """
-        Check if ctx is important
+        Check if index exists
 
-        :param idx: context idx
-        :return: True if important
+        :param idx: index name
+        :return: True if index exists
         """
-        id = self.window.core.ctx.get_id_by_idx(idx)
-        meta = self.window.core.ctx.get_meta_by_id(id)
-        if meta is not None:
-            return meta.important
+        store_id = self.get_current_store()
+        if store_id in self.items:
+            return idx in self.items[store_id]
         return False
 
-    def set_label(self, idx: int, label_id: int):
+    def get(self, idx: str) -> IndexItem:
         """
-        Set color label for ctx by idx
+        Return index data from current storage
 
-        :param idx: context idx
-        :param label_id: label id
+        :param idx: index name
+        :return: IndexItem object
         """
-        id = self.window.core.ctx.get_id_by_idx(idx)
-        meta = self.window.core.ctx.get_meta_by_id(id)
-        if meta is not None:
-            meta.label = label_id
-            self.window.core.ctx.save(id)
-            self.update()
-
-    def update_name(
-            self,
-            id: int,
-            name: str,
-            close: bool = True,
-            refresh: bool = True
-    ):
-        """
-        Update ctx name
-
-        :param id: context id
-        :param name: context name
-        :param close: close rename dialog
-        :param refresh: refresh ctx list
-        """
-        if id not in self.window.core.ctx.get_meta():
-            return
-        self.window.core.ctx.meta[id].name = name
-        self.window.core.ctx.set_initialized()
-        self.window.core.ctx.save(id)
-        if close:
-            self.window.ui.dialog['rename'].close()
-
-        if refresh:
-            self.update()
-        else:
-            self.update(True, False)
+        store_id = self.get_current_store()
+        if store_id in self.items and idx in self.items[store_id]:
+            return self.items[store_id][idx]
+
+    def get_all(self) -> dict:
+        """
+        Return all indexes in current store
+
+        :return: all indexes
+        """
+        store_id = self.get_current_store()
+        if store_id in self.items:
+            return self.items[store_id]
+        return {}
+
+    def append(self, idx: str, files: dict):
+        """
+        Append indexed files to index
+
+        :param idx: index name
+        :param files: dict of indexed files
+        """
+        # create store if not exists
+        store_id = self.get_current_store()
+        if store_id not in self.items:
+            self.items[store_id] = {}
+
+        # create index if not exists
+        if idx not in self.items[store_id]:
+            self.items[store_id][idx] = IndexItem()
+            self.items[store_id][idx].id = idx
+            self.items[store_id][idx].name = idx  # use index id as name
+
+        # append indexed files
+        for path in files:
+            doc_id = files[path]
+            file_id = self.files.get_id(path)
+            ts = int(datetime.datetime.now().timestamp())
+            if file_id not in self.items[store_id][idx].items:
+                id = self.files.append(
+                    store_id=store_id,
+                    idx=idx,
+                    file_id=file_id,
+                    path=path,
+                    doc_id=doc_id,
+                )
+                if id is not None:
+                    self.items[store_id][idx].items[file_id] = {
+                        "id": doc_id,
+                        "db_id": id,  # DB id
+                        "path": path,
+                        "indexed_ts": ts,
+                    }
+            else:
+                # update indexed timestamp only
+                self.files.update(
+                    id=self.items[store_id][idx].items[file_id]["db_id"],  # DB id
+                    doc_id=doc_id,
+                    ts=ts,
+                )
+                self.items[store_id][idx].items[file_id]["id"] = doc_id
+                self.items[store_id][idx].items[file_id]["indexed_ts"] = ts
+
+    def remove_doc(self, idx: str, doc_id: str):
+        """
+        Remove document from index
+
+        :param idx: index name (id)
+        :param doc_id: document ID (in storage)
+        """
+        self.llm.get_service_context()  # init environment only (ENV API keys, etc.)
+        if self.storage.remove_document(idx, doc_id):
+            self.log("Removed document from index: " + idx + " - " + doc_id)
+
+    def remove_file(self, idx: str, file: str):
+        """
+        Remove file from index
+
+        :param idx: index name
+        :param file: file ID
+        """
+        self.llm.get_service_context()  # init environment only (ENV API keys, etc.)
+        store_id = self.get_current_store()
+        if store_id in self.items and idx in self.items[store_id]:
+            if file in self.items[store_id][idx].items:
+                # remove from storage
+                doc_id = self.items[store_id][idx].items[file]["id"]
+                self.storage.remove_document(
+                    id=idx,
+                    doc_id=doc_id,
+                )
+                # remove from index data and db
+                del self.items[store_id][idx].items[file]
+                self.files.remove(store_id, idx, doc_id)
+
+    def load(self):
+        """Load indexes and indexed items"""
+        store_ids = self.storage.get_ids()
+        for store_id in store_ids:
+            self.items[store_id] = self.get_provider().load(store_id)
+            # replace workdir placeholder with current workdir
+            for idx in self.items[store_id]:
+                for id in self.items[store_id][idx].items:
+                    file = self.items[store_id][idx].items[id]
+                    if 'path' in file and file['path'] is not None:
+                        self.items[store_id][idx].items[id]['path'] = \
+                            self.window.core.filesystem.to_workdir(file['path'])
+
+    def sync(self):
+        """Sync idx items from config"""
+        items = self.window.core.config.get('llama.idx.list')
+        store_id = self.get_current_store()
+        if items is not None:
+            if store_id not in self.items:
+                self.items[store_id] = {}
+            for item in items:
+                idx = item['id']
+                if idx not in self.items[store_id]:
+                    self.items[store_id][idx] = IndexItem()
+                    self.items[store_id][idx].id = idx
+                    self.items[store_id][idx].name = idx
+                    self.items[store_id][idx].store = store_id
+                else:
+                    self.items[store_id][idx].id = idx
+                    self.items[store_id][idx].name = idx
 
-    def handle_allowed(self, mode: str) -> bool:
+    def get_idx_ids(self) -> list:
         """
-        Check if append to current ctx is allowed for this mode, if not then switch to new context
+        Get list of indexes
 
-        :param mode: mode name
-        :return: True if allowed
+        :return: list of indexes
         """
-        if not self.window.core.ctx.is_allowed_for_mode(mode):
-            self.new(True)  # force new context
-            return False
-        return True
-
-    def selection_change(self):
-        """Select ctx on list change"""
-        # TODO: implement this
-        # idx = self.window.ui.nodes['ctx.list'].currentIndex().row()
-        # self.select(idx)
-        self.window.ui.nodes['ctx.list'].lockSelection()
+        ids = []
+        data =  self.window.core.config.get('llama.idx.list')
+        if data is not None:
+            for item in data:
+                ids.append(item['id'])
+        return ids
 
-    def search_string_change(self, text: str):
+    def clear(self, idx: str):
         """
-        Search string changed handler
+        Clear index items
 
-        :param text: search string
+        :param idx: index name/id
         """
-        self.window.core.ctx.search_string = text
-        self.window.core.config.set('ctx.search.string', text)
-        self.update(reload=True, all=False)
-
-    def search_string_clear(self):
-        """Search string clear"""
-        self.window.ui.nodes['ctx.search'].clear()
-        self.search_string_change("")  # clear search
+        store_id = self.get_current_store()
+        if store_id in self.items and idx in self.items[store_id]:
+            self.items[store_id][idx].items = {}
+        self.get_provider().truncate(store_id, idx)
 
-    def append_search_string(self, text: str):
+    def get_counters(self, type: str) -> dict:
         """
-        Append search string to input and make search
+        Get counters (stats, count items by type [file, ctx, external])
 
-        :param text: search string
+        :param type: type of counter (file, ctx, external)
+        :return: dict of counters: [store][idx] -> count
         """
-        self.window.ui.nodes['ctx.search'].setText(text)
-        self.search_string_change(text)  # make search
+        return self.get_provider().get_counters(type)
 
-    def prepare_name(self, ctx: CtxItem):
+    def get_version(self) -> str:
         """
-        Handle context name (summarize first input and output)
+        Get provider config version
 
-        :param ctx: CtxItem
+        :return: provider config version
         """
-        # if ctx is not initialized yet then summarize
-        if not self.window.core.ctx.is_initialized():
-            self.summarizer.summarize(
-                self.window.core.ctx.current,
-                ctx,
-            )
+        return self.get_provider().get_version()
 
-    def context_change_locked(self) -> bool:
+    def log(self, msg: str):
         """
-        Check if ctx change is locked
+        Log info message
 
-        :return: True if locked
+        :param msg: message
         """
-        return self.window.controller.chat.input.generating
+        is_log = False
+        if self.window.core.config.has("log.llama") \
+                and self.window.core.config.get("log.llama"):
+            is_log = True
+        self.window.core.debug.info(msg, not is_log)
+        if is_log:
+            print("[LLAMA-INDEX] {}".format(msg))
+        self.window.idx_logger_message.emit(msg)
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/controller/ctx/common.py` & `pygpt_net-2.2.0/src/pygpt_net/controller/ctx/common.py`

 * *Files 6% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.04 18:00:00                  #
+# Updated Date: 2024.04.08 21:00:00                  #
 # ================================================== #
 
 from PySide6.QtWidgets import QApplication
 
 from pygpt_net.utils import trans
 from .summarizer import Summarizer
 
@@ -66,24 +66,14 @@
             assistant = self.window.core.assistants.get_by_id(assistant_id)
             if assistant is not None:
                 label += ' (' + assistant.name + ')'
 
         # update ctx label
         self.window.controller.ui.update_ctx_label(label)
 
-    def duplicate_by_idx(self, idx: int):
-        """
-        Duplicate context by idx on list
-
-        :param idx: context list idx
-        """
-        id = self.window.core.ctx.get_id_by_idx(idx)
-        if id is not None:
-            self.duplicate(id)
-
     def duplicate(self, meta_id: int):
         """
         Duplicate context by meta id
 
         :param meta_id: context id
         """
         new_id = self.window.core.ctx.duplicate(meta_id)
@@ -102,64 +92,65 @@
         if self.window.controller.ui.current_tab != self.window.controller.ui.tab_idx['chat']:
             self.window.ui.tabs['output'].setCurrentIndex(self.window.controller.ui.tab_idx['chat'])
 
     def restore_display_filter(self):
         """Restore display filter"""
         self.window.ui.nodes['filter.ctx.radio.all'].setChecked(False)
         self.window.ui.nodes['filter.ctx.radio.pinned'].setChecked(False)
-        self.window.ui.nodes['filter.ctx.radio.labeled'].setChecked(False)
         self.window.ui.nodes['filter.ctx.radio.indexed'].setChecked(False)
 
         if self.window.core.config.has('ctx.records.filter'):
             filter = self.window.core.config.get('ctx.records.filter')
             self.toggle_display_filter(filter)
 
             if filter == 'pinned':
                 self.window.ui.nodes['filter.ctx.radio.pinned'].setChecked(True)
-            elif filter == 'labeled':
-                self.window.ui.nodes['filter.ctx.radio.labeled'].setChecked(True)
             elif filter == 'indexed':
                 self.window.ui.nodes['filter.ctx.radio.indexed'].setChecked(True)
             else:
                 self.window.ui.nodes['filter.ctx.radio.all'].setChecked(True)
         else:
             self.window.ui.nodes['filter.ctx.radio.all'].setChecked(True)
             self.toggle_display_filter('all')
 
+        # restore filters labels
+        self.restore_filters_labels()
+
+    def restore_filters_labels(self):
+        """Restore filters labels"""
+        labels = self.window.core.config.get('ctx.records.filter.labels')
+        if labels is not None:
+            self.window.core.ctx.filters_labels = labels
+            self.window.ui.nodes['filter.ctx.labels'].restore(labels)
+
     def toggle_display_filter(self, filter: str):
         """
         Toggle display filter
 
         :param filter: Filter
         """
         filters = {}
-        if filter == 'labeled':
-            filters['label'] = {
-                "mode": ">",
-                "value": 0,
-            }
-        elif filter == 'pinned':
+        if filter == 'pinned':
             filters['is_important'] = {
                 "mode": "=",
                 "value": 1,
             }
         elif filter == 'indexed':
             filters['indexed_ts'] = {
                 "mode": ">",
                 "value": 0,
             }
 
         self.window.core.config.set("ctx.records.filter", filter)
+        self.window.core.ctx.clear_tmp_meta()
         self.window.core.ctx.set_display_filters(filters)
         self.window.controller.ctx.update()
 
-    def copy_id(self, idx: int):
+    def copy_id(self, id: int):
         """
         Copy id into clipboard and to iinput
 
-        :param idx: context list idx
+        :param id: context list idx
         """
-        id = self.window.core.ctx.get_id_by_idx(idx)
-        if id is not None:
-            value = "@" + str(id)
-            self.window.controller.chat.common.append_to_input(value, separator=" ")
-            QApplication.clipboard().setText(value)
+        value = "@" + str(id)
+        self.window.controller.chat.common.append_to_input(value, separator=" ")
+        QApplication.clipboard().setText(value)
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/controller/ctx/summarizer.py` & `pygpt_net-2.2.0/src/pygpt_net/controller/ctx/summarizer.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/controller/debug.py` & `pygpt_net-2.2.0/src/pygpt_net/controller/debug/__init__.py`

 * *Files 15% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.28 01:00:00                  #
+# Updated Date: 2024.04.26 23:00:00                  #
 # ================================================== #
 
 from datetime import datetime
 from logging import ERROR, WARNING, INFO, DEBUG
 
 from PySide6.QtCore import Slot
 from PySide6.QtGui import QTextCursor
@@ -46,14 +46,19 @@
             self.window.ui.menu['debug.logger'].setChecked(False)
 
         if self.is_app_log:
             self.window.ui.menu['debug.app.log'].setChecked(True)
         else:
             self.window.ui.menu['debug.app.log'].setChecked(False)
 
+    def toggle_menu(self):
+        """Toggle debug menu"""
+        stage = self.window.core.config.get('debug')
+        self.window.ui.menu['menu.debug'].menuAction().setVisible(stage)
+
     def set_log_level(self, level: str = 'error'):
         """
         Switch logging level in runtime
 
         :param level: log level (debug, info, warning, error), default: error
         """
         if not self.allow_level_change:
@@ -72,43 +77,65 @@
             print("** WARNING level enabled")
         else:
             self.window.core.debug.switch_log_level(ERROR)
             print("** ERROR level enabled")
 
         self.window.ui.dialogs.app_log.update_log_level()
 
-    def on_update(self, all: bool = False):
+    def on_post_update(self, all: bool = False):
         """
         Update debug windows (only if active)
 
         :param all: update all debug windows
         """
         # not_realtime = ['context']
         not_realtime = []
         for id in self.window.controller.dialogs.debug.get_ids():
             if self.window.controller.dialogs.debug.is_active(id):
                 if all or id not in not_realtime:
                     self.window.controller.dialogs.debug.update_worker(id)
 
+    def post_setup(self):
+        """Post setup debug"""
+        self.connect_signals()
+
     def setup(self):
         """Setup debug"""
         current = self.window.core.debug.get_log_level()
         if current == ERROR:
             self.allow_level_change = True
         else:
             return
-
         # switch log level if set in config
         if self.window.core.config.has('log.level'):
             level = self.window.core.config.get('log.level')
             if level != "error":
                 print("[LOGGER] Started with log level: " + self.window.core.debug.get_log_level_name())
                 print("[LOGGER] Switching to: " + level)
                 self.set_log_level(level)
 
+    def connect_signals(self):
+        """Connect signals"""
+        # webengine debug signals
+        if self.window.controller.chat.render.get_engine() == "web":
+            signals = self.window.controller.chat.render.web_renderer.get_output_node().page().signals
+            signals.js_message.connect(self.handle_js_message)
+
+    @Slot(int, str, str)
+    def handle_js_message(self, line_number: int, message: str, source_id: str):
+        """
+        Handle JS message
+
+        :param line_number: line number
+        :param message: message
+        :param source_id: source ID
+        """
+        data = "[JS] Line " + str(line_number) + ": " + message
+        self.log(data, window=True)
+
     @Slot(object)
     def handle_log(self, data: any):
         """
         Handle log message
 
         :param data: message to log
         """
@@ -175,16 +202,18 @@
         Toggle debug window
 
         :param id: debug window to toggle
         """
         if self.window.controller.dialogs.debug.is_active(id):
             self.window.controller.dialogs.debug.hide(id)
         else:
+            if id == "db":
+                self.window.ui.dialogs.database.viewer.update_table_view()  # update view on load
             self.window.controller.dialogs.debug.show(id)
-            self.on_update(True)
+            self.on_post_update(True)
 
         self.log('debug.' + id + ' toggled')
 
         # update menu
         self.update()
 
     def toggle_app_log(self):
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/controller/dialogs/__init__.py` & `pygpt_net-2.2.0/src/pygpt_net/controller/dialogs/__init__.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/controller/dialogs/debug.py` & `pygpt_net-2.2.0/src/pygpt_net/controller/dialogs/debug.py`

 * *Files 9% similar despite different names*

```diff
@@ -2,26 +2,26 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.25 22:00:00                  #
+# Updated Date: 2024.03.06 02:00:00                  #
 # ================================================== #
 
 from PySide6.QtCore import Qt
 from PySide6.QtGui import QStandardItemModel
-from PySide6.QtWidgets import QHeaderView
 
 from pygpt_net.core.debug.agent import AgentDebug
 from pygpt_net.core.debug.assistants import AssistantsDebug
 from pygpt_net.core.debug.attachments import AttachmentsDebug
 from pygpt_net.core.debug.config import ConfigDebug
 from pygpt_net.core.debug.context import ContextDebug
+from pygpt_net.core.debug.db import DatabaseDebug
 from pygpt_net.core.debug.indexes import IndexesDebug
 from pygpt_net.core.debug.models import ModelsDebug
 from pygpt_net.core.debug.plugins import PluginsDebug
 from pygpt_net.core.debug.presets import PresetsDebug
 from pygpt_net.core.debug.ui import UIDebug
 
 
@@ -39,14 +39,15 @@
         # setup workers
         self.workers = {}
         self.workers['agent'] = AgentDebug(self.window)
         self.workers['assistants'] = AssistantsDebug(self.window)
         self.workers['attachments'] = AttachmentsDebug(self.window)
         self.workers['config'] = ConfigDebug(self.window)
         self.workers['context'] = ContextDebug(self.window)
+        self.workers['db'] = DatabaseDebug(self.window)
         self.workers['indexes'] = IndexesDebug(self.window)
         self.workers['models'] = ModelsDebug(self.window)
         self.workers['plugins'] = PluginsDebug(self.window)
         self.workers['presets'] = PresetsDebug(self.window)
         self.workers['ui'] = UIDebug(self.window)
 
         # prepare debug ids
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/controller/dialogs/info.py` & `pygpt_net-2.2.0/src/pygpt_net/controller/dialogs/info.py`

 * *Files 2% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.01 18:00:00                  #
+# Updated Date: 2024.04.19 01:00:00                  #
 # ================================================== #
 
 import webbrowser
 
 
 class Info:
     def __init__(self, window=None):
@@ -74,14 +74,18 @@
         """Open Snapcraft page"""
         webbrowser.open(self.window.meta['snap'])
 
     def goto_update(self):
         """Open update URL"""
         webbrowser.open(self.window.meta['website'])
 
+    def goto_donate(self):
+        """Open donate page"""
+        webbrowser.open(self.window.meta['donate'])
+
     def update_menu(self):
         """Update info menu"""
         for id in self.ids:
             if id in self.active and self.active[id]:
                 self.window.ui.menu['info.' + id].setChecked(True)
             else:
                 self.window.ui.menu['info.' + id].setChecked(False)
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/controller/files.py` & `pygpt_net-2.2.0/src/pygpt_net/controller/files.py`

 * *Files 2% similar despite different names*

```diff
@@ -361,18 +361,27 @@
             return
         os.makedirs(path_dir, exist_ok=True)
         self.window.update_status(
             "[OK] Directory created: {}".format(name)
         )
         self.update_explorer()
 
-    def update_explorer(self):
-        """Update file explorer view"""
+    def update_explorer(self, reload: bool = False):
+        """
+        Update file explorer view
+
+        :param: reload: reload explorer root dir
+        """
         data = self.window.core.idx.get_idx_data()  # get all files data, from all indexes
         self.window.ui.nodes['output_files'].index_data = data
+        if reload:
+            root = self.window.core.config.get_user_dir('data')
+            self.window.ui.nodes['output_files'].directory = root
+            self.window.ui.nodes['output_files'].update_view()
+            self.window.ui.nodes['output_files'].path_label.setText(root)
         self.window.ui.nodes['output_files'].model.update_idx_status(data)
 
     def use_attachment(self, path: str):
         """
         Use file as attachment
 
         :param path: path to file
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/controller/idx/__init__.py` & `pygpt_net-2.2.0/src/pygpt_net/controller/idx/__init__.py`

 * *Files 15% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.23 01:00:00                  #
+# Updated Date: 2024.04.27 14:00:00                  #
 # ================================================== #
 
 import datetime
 
 from pygpt_net.item.ctx import CtxItem
 from pygpt_net.utils import trans
 from .common import Common
@@ -26,23 +26,30 @@
         :param window: Window instance
         """
         self.window = window
         self.settings = Settings(window)
         self.common = Common(window)
         self.indexer = Indexer(window)
         self.current_idx = "base"
+        self.locked = False
 
     def setup(self):
-        """
-        Setup indexer
-        """
+        """Setup indexer"""
         self.window.core.idx.load()
         self.indexer.update_explorer()
         self.common.setup()
+
+        # restore last index
+        last_idx = self.window.core.config.get('llama.idx.current')
+        if last_idx is not None:
+            self.current_idx = last_idx
+
+        self.locked = True  # lock update from combo box on start
         self.update()
+        self.locked = False
 
     def select(self, idx: int):
         """
         Select idx by list idx
 
         :param idx: idx of the list (row idx)
         """
@@ -50,14 +57,30 @@
         if self.change_locked():
             return
         self.set_by_idx(idx)
 
         # update all layout
         self.window.controller.ui.update()
 
+    def select_by_id(self, id: int):
+        """
+        Select idx by list idx
+
+        :param id: id of the list (row idx)
+        """
+        # check if idx change is not locked
+        if self.change_locked():
+            return
+
+        self.window.core.config.set('llama.idx.current', id)
+        self.current_idx = id
+
+        # update all layout
+        self.window.controller.ui.update()
+
     def set(self, idx: str):
         """
         Set idx by name
 
         :param idx: idx name
         """
         self.window.core.config.set('llama.idx.current', idx)
@@ -111,19 +134,15 @@
     def select_current(self):
         """Select current idx on list"""
         idx = self.window.core.config.get('llama.idx.current')
         if idx is None:
             return
         items = self.window.core.config.get('llama.idx.list')
         if items is not None:
-            idx = self.window.core.idx.get_idx_by_name(idx)
-            if idx is None:
-                return
-            current = self.window.ui.models['indexes'].index(idx, 0)
-            self.window.ui.nodes['indexes'].setCurrentIndex(current)
+            self.window.ui.nodes['indexes.select'].set_value(idx)
 
     def select_default(self):
         """Set default idx"""
         idx = self.window.core.config.get('llama.idx.current')
         if idx is None:
             idx = self.window.core.idx.get_default_idx()
             if idx is not None:
@@ -137,35 +156,55 @@
 
     def update_list(self):
         """Update list"""
         items = self.window.core.config.get('llama.idx.list')
         if items is not None:
             self.window.ui.toolbox.indexes.update(items)
 
-    def on_ctx_end(self, ctx: CtxItem = None):
+    def auto_idx_allowed(self, mode: str) -> bool:
+        """
+        Check if auto idx is allowed
+
+        :param mode: mode name
+        :return: True if allowed
+        """
+        modes = self.window.core.config.get('llama.idx.auto.modes')
+        if modes is not None:
+            modes_list = modes.replace(" ", "").split(',')
+            if mode in modes_list:
+                return True
+        return False
+
+    def on_ctx_end(self, ctx: CtxItem = None, mode: str = None, sync: bool = False):
         """
         After context item updated (request + response received)
 
         :param ctx: Context item instance
+        :param mode: Mode
+        :param sync: Synchronous call
         """
+        # ignore if disallowed mode
+        if mode is not None and not self.auto_idx_allowed(mode):
+            return
+
         # ignore if manually stopped
         if self.window.controller.chat.input.stop:
             return
 
-        idx = "base"
+        idx = "base"  # default index
         if self.window.core.config.has('llama.idx.auto') and self.window.core.config.get('llama.idx.auto'):
             if self.window.core.config.has('llama.idx.auto.index'):
                 idx = self.window.core.config.get('llama.idx.auto.index')
 
-            # index items from previously indexed only
+            # index items from previously indexed time only
             current_ctx = self.window.core.ctx.current
             if current_ctx is not None:
                 meta = self.window.core.ctx.get_meta_by_id(current_ctx)
                 if meta is not None:
-                    self.indexer.index_ctx_realtime(meta, idx)
+                    self.indexer.index_ctx_realtime(meta, idx, sync=sync)
 
     def after_index(self, idx: str = None):
         """
         Called after index (update things, etc...)
 
         :param idx: index name
         """
@@ -187,10 +226,8 @@
 
     def change_locked(self) -> bool:
         """
         Check if change is locked
 
         :return: True if locked
         """
-        # if self.window.controller.chat.input.generating:
-        # return True
-        return False
+        return self.locked
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/controller/idx/common.py` & `pygpt_net-2.2.0/src/pygpt_net/controller/idx/common.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/controller/idx/indexer.py` & `pygpt_net-2.2.0/src/pygpt_net/controller/idx/indexer.py`

 * *Files 19% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.28 22:00:00                  #
+# Updated Date: 2024.04.17 01:00:00                  #
 # ================================================== #
 
 import datetime
 import os
 
 from PySide6.QtCore import Slot
 from PySide6.QtWidgets import QApplication
@@ -63,36 +63,35 @@
             ctx_idx,
             self.tmp_idx,
             True,
         )
 
     def index_ctx_meta(
             self,
-            ctx_idx: int,
+            meta_id: int,
             idx: str,
             force: bool = False
     ):
         """
         Index context meta (threaded)
 
-        :param ctx_idx: context idx on list
+        :param meta_id: context meta id
         :param idx: index name
         :param force: force index
         """
         if not force:
             self.tmp_idx = idx  # store tmp index name (for confirmation)
             content = trans('idx.confirm.db.content') + "\n" + trans('idx.token.warn')
             self.window.ui.dialogs.confirm(
                 type='idx.index.db',
-                id=ctx_idx,
+                id=meta_id,
                 msg=content,
             )
             return
 
-        meta_id = self.window.core.ctx.get_id_by_idx(ctx_idx)
         meta = self.window.core.ctx.get_meta_by_id(meta_id)
         from_ts = meta.indexed
         self.window.update_status(trans('idx.status.indexing'))
 
         worker = IndexWorker()
         worker.window = self.window
         worker.content = meta_id
@@ -129,32 +128,38 @@
             force=force,
             silent=silent,
         )
 
     def index_ctx_realtime(
             self,
             meta: CtxMeta,
-            idx: str
+            idx: str,
+            sync: bool = False
     ):
         """
         Index current appended context (threaded) - realtime
 
         :param meta: context meta
         :param idx: index name
+        :param sync: sync mode
         """
         worker = IndexWorker()
         worker.window = self.window
         worker.content = meta.id
         worker.idx = idx
         worker.type = "db_meta"
         worker.from_ts = meta.indexed
         worker.silent = True
         worker.signals.finished.connect(self.handle_finished_db_meta)
         worker.signals.error.connect(self.handle_error)
-        self.window.threadpool.start(worker)
+
+        if sync:
+            worker.run()
+        else:
+            self.window.threadpool.start(worker)
 
     def index_ctx_from_ts_confirm(self, ts: int):
         """
         Index context from timestamp (force execute)
 
         :param ts: timestamp from (updated_ts)
         """
@@ -204,28 +209,63 @@
         worker.signals.finished.connect(self.handle_finished_db_current)
         worker.signals.error.connect(self.handle_error)
         self.window.threadpool.start(worker)
 
     def index_path(
             self,
             path: str,
-            idx: str = "base"
+            idx: str = "base",
+            replace: bool = None,
+            recursive: bool = None
     ):
         """
         Index all files in path (threaded)
 
         :param path: path to file or directory
         :param idx: index name
+        :param replace: replace index
+        :param recursive: recursive indexing
+        :param silent: silent mode
         """
         self.window.update_status(trans('idx.status.indexing'))
         worker = IndexWorker()
         worker.window = self.window
         worker.content = path
         worker.idx = idx
         worker.type = "file"
+        worker.replace = replace
+        worker.recursive = recursive
+        worker.signals.finished.connect(self.handle_finished_file)
+        worker.signals.error.connect(self.handle_error)
+        self.window.threadpool.start(worker)
+
+    def index_paths(
+            self,
+            paths: list,
+            idx: str = "base",
+            replace: bool = None,
+            recursive: bool = None
+    ):
+        """
+        Index all files in path (threaded)
+
+        :param paths: paths to files or directories
+        :param idx: index name
+        :param replace: replace index
+        :param recursive: recursive indexing
+        """
+        self.window.update_status(trans('idx.status.indexing'))
+        worker = IndexWorker()
+        worker.window = self.window
+        worker.content = paths
+        worker.idx = idx
+        worker.type = "files"
+        worker.replace = replace
+        worker.recursive = recursive
+        worker.silent = False
         worker.signals.finished.connect(self.handle_finished_file)
         worker.signals.error.connect(self.handle_error)
         self.window.threadpool.start(worker)
 
     def index_all_files(
             self,
             idx: str,
@@ -324,14 +364,46 @@
             self.window.ui.dialogs.confirm(
                 type='idx.index.file.remove',
                 id=path,
                 msg=content,
             )
             return
         self.index_file_remove_confirm(path)
+        self.window.tools.get("indexer").refresh()
+
+    def index_web(
+            self,
+            idx: str,
+            loader: str,
+            params: dict,
+            config: dict,
+            replace: bool = True,
+    ):
+        """
+        Index web content (threaded)
+
+        :param idx: index name
+        :param loader: loader name
+        :param params: loader params
+        :param config: loader config
+        :param replace: replace index
+        """
+        worker = IndexWorker()
+        worker.window = self.window
+        worker.content = None
+        worker.loader = loader
+        worker.params = params
+        worker.config = config
+        worker.replace = replace
+        worker.silent = False
+        worker.idx = idx
+        worker.type = "web"
+        worker.signals.finished.connect(self.handle_finished_web)
+        worker.signals.error.connect(self.handle_error)
+        self.window.threadpool.start(worker)
 
     def index_ctx_meta_remove(
             self,
             idx: str,
             meta_id: int,
             force: bool = False
     ):
@@ -353,14 +425,16 @@
             return
 
         store = self.window.core.idx.get_current_store()
         if self.window.core.ctx.idx.remove_meta_from_indexed(store, meta_id, self.tmp_idx):
             self.window.update_status(trans('status.deleted') + ": " + str(meta_id))
             self.window.controller.ctx.update()  # update ctx list
 
+        self.window.tools.get("indexer").refresh()
+
     def clear_by_idx(self, idx: int):
         """
         Clear index by list idx
 
         :param idx: on list idx
         """
         idx_name = self.window.core.idx.get_by_idx(idx)
@@ -410,14 +484,16 @@
                         self.window.core.config.save()
             else:
                 self.window.update_status(trans('idx.status.truncate.error'))
         except Exception as e:
             print(e)
             self.window.update_status(e)
 
+        self.window.tools.get("indexer").refresh()
+
     def truncate(self, idx: str, force: bool = False):
         """
         Truncate index data
 
         :param idx: index name
         :param force: force clear
         """
@@ -452,25 +528,28 @@
                         self.window.core.config.save()
             else:
                 self.window.update_status(trans('idx.status.truncate.error'))
         except Exception as e:
             print(e)
             self.window.update_status(e)
 
+        self.window.tools.get("indexer").refresh()
+
     @Slot(object)
     def handle_error(self, err: any):
         """
         Handle thread error signal
 
         :param err: error message
         """
-        self.window.ui.dialogs.alert(str(err))
+        self.window.ui.dialogs.alert(err)
         self.window.update_status(str(err))
         self.window.core.debug.log(err)
         print(err)
+        self.window.tools.get("indexer").refresh()
 
     @Slot(str, object, object)
     def handle_finished_db_current(
             self,
             idx: str,
             num: int,
             errors: list,
@@ -501,14 +580,16 @@
                 self.window.ui.dialogs.alert(msg)
         else:
             self.window.update_status(trans('idx.status.empty'))
 
         if len(errors) > 0:
             self.window.ui.dialogs.alert("\n".join(errors))
 
+        self.window.tools.get("indexer").refresh()
+
     @Slot(str, object, object, bool)
     def handle_finished_db_meta(
             self,
             idx: str,
             num: int,
             errors: list,
             silent: bool = False
@@ -530,14 +611,16 @@
                 self.window.ui.dialogs.alert(msg)
         else:
             self.window.update_status(trans('idx.status.empty'))
 
         if len(errors) > 0:
             self.window.ui.dialogs.alert("\n".join(errors))
 
+        self.window.tools.get("indexer").refresh()
+
     @Slot(str, object, object, bool)
     def handle_finished_file(
             self,
             idx: str,
             files: dict,
             errors: list,
             silent: bool = False
@@ -560,7 +643,40 @@
                 self.window.update_status(msg)
                 self.window.ui.dialogs.alert(msg)
         else:
             self.window.update_status(trans('idx.status.empty'))
 
         if len(errors) > 0:
             self.window.ui.dialogs.alert("\n".join(errors))
+
+        self.window.tools.get("indexer").on_finish_files()
+        self.window.tools.get("indexer").refresh()
+
+    @Slot(str, object, object, bool)
+    def handle_finished_web(
+            self,
+            idx: str,
+            num: int,
+            errors: list,
+            silent: bool = False
+    ):
+        """
+        Handle indexing finished signal
+
+        :param idx: index name
+        :param num: number of indexed records
+        :param errors: errors
+        :param silent: silent mode (no msg and status update)
+        """
+        if num > 0:
+            msg = trans('idx.status.success') + f" {num}"
+            if not silent:
+                self.window.update_status(msg)
+                self.window.ui.dialogs.alert(msg)
+        else:
+            self.window.update_status(trans('idx.status.empty'))
+
+        if len(errors) > 0:
+            self.window.ui.dialogs.alert("\n".join(errors))
+
+        self.window.tools.get("indexer").on_finish_web()
+        self.window.tools.get("indexer").refresh()
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/controller/idx/settings.py` & `pygpt_net-2.2.0/src/pygpt_net/controller/idx/settings.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/controller/lang/__init__.py` & `pygpt_net-2.2.0/src/pygpt_net/controller/lang/__init__.py`

 * *Files 16% similar despite different names*

```diff
@@ -2,20 +2,20 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.01.30 20:00:00                  #
+# Updated Date: 2024.04.11 02:00:00                  #
 # ================================================== #
 
 from PySide6.QtGui import QAction
 
-from pygpt_net.utils import trans
+from pygpt_net.utils import trans, trans_reload
 from .custom import Custom
 from .mapping import Mapping
 from .plugins import Plugins
 from .settings import Settings
 
 
 class Lang:
@@ -26,35 +26,42 @@
         :param window: Window instance
         """
         self.window = window
         self.custom = Custom(window)
         self.mapping = Mapping(window)
         self.plugins = Plugins(window)
         self.settings = Settings(window)
+        self.loaded = False
 
     def setup(self):
         """Setup language menu"""
         # get files from locale directory
-        langs = self.window.core.config.get_available_langs()
-        for lang in langs:
-            self.window.ui.menu['lang'][lang] = QAction(lang.upper(), self.window, checkable=True)
-            self.window.ui.menu['lang'][lang].triggered.connect(
-                lambda checked=None,
-                       lang=lang: self.window.controller.lang.toggle(lang))
-            self.window.ui.menu['menu.lang'].addAction(self.window.ui.menu['lang'][lang])
+        if not self.loaded:
+            langs = self.window.core.config.get_available_langs()
+            for lang in langs:
+                self.window.ui.menu['lang'][lang] = QAction(lang.upper(), self.window, checkable=True)
+                self.window.ui.menu['lang'][lang].triggered.connect(
+                    lambda checked=None,
+                           lang=lang: self.window.controller.lang.toggle(lang))
+                self.window.ui.menu['menu.lang'].addAction(self.window.ui.menu['lang'][lang])
+        self.loaded = True
         self.update()
 
     def update(self):
         """Update language menu"""
         for lang in self.window.ui.menu['lang']:
             self.window.ui.menu['lang'][lang].setChecked(False)
         lang = self.window.core.config.get('lang')
         if lang in self.window.ui.menu['lang']:
             self.window.ui.menu['lang'][lang].setChecked(True)
 
+    def reload_config(self):
+        """Reload language config"""
+        trans_reload()
+
     def toggle(self, id: str):
         """
         Toggle language
 
         :param id: language code to toggle
         """
         self.window.core.config.set('lang', id)
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/controller/lang/custom.py` & `pygpt_net-2.2.0/src/pygpt_net/controller/lang/custom.py`

 * *Files 13% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.16 16:00:00                  #
+# Updated Date: 2024.04.26 23:00:00                  #
 # ================================================== #
 
 from PySide6.QtCore import Qt
 
 from pygpt_net.utils import trans
 
 
@@ -27,24 +27,31 @@
         """Apply custom mappings"""
         # output: tabs
         self.window.ui.tabs['output'].setTabText(0, trans('output.tab.chat'))
         self.window.ui.tabs['output'].setTabText(1, trans('output.tab.files'))
         self.window.ui.tabs['output'].setTabText(2, trans('output.tab.calendar'))
         self.window.ui.tabs['output'].setTabText(3, trans('output.tab.painter'))
 
+        # tool: indexer
+        self.window.ui.tabs['tool.indexer'].setTabText(0, trans('tool.indexer.tab.files'))
+        self.window.ui.tabs['tool.indexer'].setTabText(1, trans('tool.indexer.tab.web'))
+        self.window.ui.tabs['tool.indexer'].setTabText(2, trans('tool.indexer.tab.ctx'))
+        self.window.ui.tabs['tool.indexer'].setTabText(3, trans('tool.indexer.tab.browser'))
+
         # checkboxes
         self.window.ui.plugin_addon['audio.input'].btn_toggle.setText(trans('audio.speak.btn'))
-        self.window.ui.config['assistant']['tool.retrieval'].box.setText(trans('assistant.tool.retrieval'))
+        self.window.ui.config['assistant']['tool.file_search'].box.setText(trans('assistant.tool.file_search'))
         self.window.ui.config['assistant']['tool.code_interpreter'].box.setText(
             trans('assistant.tool.code_interpreter')
         )
         self.window.ui.config['preset']['chat'].box.setText(trans("preset.chat"))
         self.window.ui.config['preset']['completion'].box.setText(trans("preset.completion"))
         self.window.ui.config['preset']['img'].box.setText(trans("preset.img"))
         self.window.ui.config['global']['img_raw'].setText(trans("img.raw"))
+        self.window.ui.config['global']['llama.idx.raw'].setText(trans("idx.query.raw"))
 
         # camera capture
         if not self.window.core.config.get('vision.capture.auto'):
             self.window.ui.nodes['video.preview'].label.setText(trans("vision.capture.label"))
         else:
             self.window.ui.nodes['video.preview'].label.setText(trans("vision.capture.auto.label"))
 
@@ -76,7 +83,15 @@
         self.window.controller.idx.settings.update_text_loaders()
 
         # theme menu
         self.window.ui.menu['menu.theme'].setTitle(trans("menu.theme"))
         for theme in self.window.ui.menu['theme']:
             name = self.window.controller.theme.common.translate(theme)
             self.window.ui.menu['theme'][theme].setText(name)
+
+        # dialog: profile
+        if self.window.ui.dialog['profile.item'].mode == 'create':
+            self.window.ui.nodes['dialog.profile.item.btn.update'].setText(trans('dialog.profile.item.btn.create'))
+        elif self.window.ui.dialog['profile.item'].mode == 'edit':
+            self.window.ui.nodes['dialog.profile.item.btn.update'].setText(trans("dialog.profile.item.btn.update"))
+        elif self.window.ui.dialog['profile.item'].mode == 'duplicate':
+            self.window.ui.nodes['dialog.profile.item.btn.update'].setText(trans("dialog.profile.item.btn.duplicate"))
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/controller/lang/plugins.py` & `pygpt_net-2.2.0/src/pygpt_net/controller/lang/plugins.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/controller/lang/settings.py` & `pygpt_net-2.2.0/src/pygpt_net/controller/lang/settings.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/controller/launcher.py` & `pygpt_net-2.2.0/src/pygpt_net/controller/launcher.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/controller/layout.py` & `pygpt_net-2.2.0/src/pygpt_net/controller/layout.py`

 * *Files 15% similar despite different names*

```diff
@@ -2,28 +2,35 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.24 00:00:00                  #
+# Updated Date: 2024.04.20 06:00:00                  #
 # ================================================== #
 
+import os
+
+from PySide6.QtWidgets import QApplication
+from PySide6.QtCore import QRect
+
+from pygpt_net.utils import trans
+
 
 class Layout:
     def __init__(self, window=None):
         """
         Layout controller
 
         :param window: Window instance
         """
         self.window = window
         # self.splitters = ["main", "main.output", "toolbox", "toolbox.mode", "toolbox.presets"]
-        self.splitters = ["main", "main.output", "toolbox", "toolbox.mode", "calendar"]
+        self.splitters = ["main", "main.output", "toolbox", "toolbox.mode", "calendar", "interpreter", "interpreter.columns"]
         self.text_nodes = ["input"]
 
     def setup(self):
         """Setup layout"""
         self.window.controller.theme.setup()
 
     def post_setup(self):
@@ -133,15 +140,17 @@
                 except Exception as e:
                     print("Error while restoring group state: " + str(e))
                     self.window.core.debug.log(e)
 
     def scroll_save(self):
         """Save scroll state"""
         data = {}
-        data['output'] = self.window.ui.nodes['output'].verticalScrollBar().value()
+        if hasattr(self.window.ui.nodes['output'], 'verticalScrollBar'):
+            data['output'] = self.window.ui.nodes['output'].verticalScrollBar().value()
+
         # notepads
         for id in self.window.ui.notepad:
             scroll_id = "notepad." + str(id)
             data[scroll_id] = self.window.ui.notepad[id].textarea.verticalScrollBar().value()
         self.window.core.config.set('layout.scroll', data)
 
     def scroll_restore(self):
@@ -157,48 +166,69 @@
                     try:
                         self.window.ui.notepad[id].textarea.verticalScrollBar().setValue(data[scroll_id])
                     except Exception as e:
                         print("Error while restoring scroll state: " + str(e))
                         self.window.core.debug.log(e)
         if 'output' in data:
             try:
-                self.window.ui.nodes['output'].verticalScrollBar().setValue(data['output'])
+                if hasattr(self.window.ui.nodes['output'], 'verticalScrollBar'):
+                    self.window.ui.nodes['output'].verticalScrollBar().setValue(data['output'])
             except Exception as e:
                 print("Error while restoring scroll state: " + str(e))
                 self.window.core.debug.log(e)
 
     def state_restore(self):
         """Restore window state"""
         if not self.window.core.config.has('layout.window'):
             return
         data = self.window.core.config.get('layout.window')
         try:
+            screen = QApplication.primaryScreen()
+            available_geometry = screen.availableGeometry()
+
             if 'geometry' in data:
                 geometry_data = data['geometry']
-                self.window.move(geometry_data['x'], geometry_data['y'])
-                self.window.resize(geometry_data['width'], geometry_data['height'])
+                x, y, width, height = (geometry_data['x'],
+                                       geometry_data['y'],
+                                       geometry_data['width'],
+                                       geometry_data['height'])
+
+                window_rect = QRect(x, y, width, height)
+                adjusted_rect = available_geometry.intersected(window_rect)
+
+                if not available_geometry.contains(window_rect):
+                    adjusted_rect.adjust(0, 0, -20, -20)  # Adjust to fit within the screen
+
+                self.window.move(adjusted_rect.x(), adjusted_rect.y())
+                self.window.resize(adjusted_rect.width(), adjusted_rect.height())
+
             if 'maximized' in data and data['maximized']:
                 self.window.showMaximized()
         except Exception as e:
             print("Error while restoring window state: " + str(e))
-            self.window.core.debug.log(e)
 
     def state_save(self):
         """Save window state"""
         data = {}
         geometry_data = {}
         geometry = self.window.geometry()
         geometry_data['x'] = geometry.x()
         geometry_data['y'] = geometry.y()
         geometry_data['width'] = geometry.width()
         geometry_data['height'] = geometry.height()
         data['geometry'] = geometry_data
         data['maximized'] = self.window.isMaximized()
         self.window.core.config.set('layout.window', data)
 
+        # ------------------
+
+        # output zoom save (Chromium, web engine only)
+        if hasattr(self.window.ui.nodes['output'], 'get_zoom_value'):
+            self.window.core.config.set('zoom', self.window.ui.nodes['output'].get_zoom_value())
+
     def restore_plugin_settings(self):
         """Restore groups state"""
         if not self.window.core.config.has('layout.groups'):
             return
         data = self.window.core.config.get('layout.groups')
         for id in self.window.ui.groups:
             if id in data and id.startswith('plugin.settings.'):
@@ -216,7 +246,39 @@
         for id in self.window.ui.groups:
             if id in data and id.startswith('settings.advanced.'):
                 try:
                     self.window.ui.groups[id].collapse(data[id])
                 except Exception as e:
                     print("Error while restoring group state: " + str(e))
                     self.window.core.debug.log(e)
+
+    def restore_default_css(self, force: bool = False):
+        """
+        Restore app CSS to default
+
+        :param force: Force restore
+        """
+        if not force:
+            self.window.ui.dialogs.confirm(
+                type='restore.css',
+                id=0,
+                msg=trans('dialog.css.restore.confirm'),
+            )
+            return
+
+        # restore css
+        self.window.core.debug.info("Restoring CSS...")
+        self.window.core.filesystem.backup_custom_css()
+        self.window.core.filesystem.install_css(force=True)
+        self.window.core.debug.info("CSS restored.")
+
+        # update editor if opened
+        current_file = self.window.ui.dialog['config.editor'].file
+        if current_file is not None:
+            if current_file.endswith('.css') and self.window.core.settings.active['editor']:
+                self.window.core.settings.load_editor(current_file)
+
+        # show success message
+        self.window.ui.dialogs.alert(trans('dialog.css.restore.confirm.success'))
+        self.window.core.debug.info("Reloading theme...")
+        self.window.controller.theme.reload(force=True)  # reload theme
+        self.window.core.debug.info("Theme reloaded.")
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/controller/mode.py` & `pygpt_net-2.2.0/src/pygpt_net/controller/mode.py`

 * *Files 2% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.18 18:00:00                  #
+# Updated Date: 2024.03.15 15:00:00                  #
 # ================================================== #
 
 from pygpt_net.core.dispatcher import Event
 from pygpt_net.item.ctx import CtxItem
 from pygpt_net.utils import trans
 
 
@@ -18,14 +18,15 @@
     def __init__(self, window=None):
         """
         Mode controller
 
         :param window: Window instance
         """
         self.window = window
+        self.locked = False
 
     def select(self, idx: int):
         """
         Select mode by idx
 
         :param idx: value of the list (row idx)
         """
@@ -42,14 +43,15 @@
 
     def set(self, mode: str):
         """
         Set mode
 
         :param mode: mode name
         """
+        self.locked = True
         # if ctx loaded with assistant ID assigned then switch to assistant from ctx
         if mode == "assistant":
             self.window.controller.presets.select_default()
             if self.window.core.ctx.current is not None \
                     and self.window.core.ctx.assistant is not None:
                 self.window.controller.assistant.select_by_id(
                     self.window.core.ctx.assistant
@@ -72,14 +74,15 @@
 
         # set status: ready
         self.window.ui.status(trans('status.started'))
 
         # if assistant mode then update ctx label
         if mode == "assistant":
             self.window.controller.ctx.common.update_label_by_current()
+        self.locked = False
 
     def select_current(self):
         """Select current mode on the list"""
         mode = self.window.core.config.get('mode')
         if mode:
             idx = self.window.core.modes.get_idx_by_name(mode)
             current = self.window.ui.models['prompt.mode'].index(idx, 0)
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/controller/model/__init__.py` & `pygpt_net-2.2.0/src/pygpt_net/controller/model/__init__.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/controller/model/editor.py` & `pygpt_net-2.2.0/src/pygpt_net/controller/model/editor.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/controller/notepad.py` & `pygpt_net-2.2.0/src/pygpt_net/controller/notepad.py`

 * *Files 10% similar despite different names*

```diff
@@ -2,20 +2,21 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.28 22:00:00                  #
+# Updated Date: 2024.04.10 23:00:00                  #
 # ================================================== #
 
 from PySide6.QtGui import QIcon, QTextCursor
 
 from pygpt_net.item.notepad import NotepadItem
+from pygpt_net.ui.widget.textarea.notepad import NotepadWidget
 from pygpt_net.utils import trans
 import pygpt_net.icons_rc
 
 
 class Notepad:
     def __init__(self, window=None):
         """
@@ -24,14 +25,59 @@
         :param window: Window instance
         """
         self.window = window
         self.default_num_notepads = 1
         self.start_tab_idx = 4  # tab idx from notepad starts
         self.opened_once = False
 
+    def setup_tabs(self):
+        """Setup notepad tabs"""
+        # create notepads
+        num_notepads = self.get_num_notepads()
+        if num_notepads > 0:
+            for i in range(1, num_notepads + 1):
+                self.window.ui.notepad[i] = NotepadWidget(self.window)
+                self.window.ui.notepad[i].id = i
+                self.window.ui.notepad[i].textarea.id = i
+
+        # append notepads
+        if num_notepads > 0:
+            for i in range(1, num_notepads + 1):
+                tab = i + (self.start_tab_idx - 1)
+                title = trans('output.tab.notepad')
+                if num_notepads > 1:
+                    title += " " + str(i)
+                self.window.ui.tabs['output'].addTab(self.window.ui.notepad[i], title)
+                self.window.ui.tabs['output'].setTabIcon(tab, QIcon(":/icons/paste.svg"))
+
+    def update_tabs(self):
+        """Update notepad tabs"""
+        # backup selected tab
+        selected_tab = self.window.ui.tabs['output'].currentIndex()
+        # remove current tabs and recreate
+        for i in range(1, len(self.window.ui.notepad) + 1):
+            self.window.ui.notepad[i].on_destroy()
+            self.window.ui.notepad[i].close()
+            self.window.ui.notepad[i].deleteLater()
+        self.window.ui.notepad = {}
+
+        # remove only notepad tabs
+        for i in range(self.start_tab_idx, self.window.ui.tabs['output'].count()):
+            self.window.ui.tabs['output'].removeTab(self.start_tab_idx)
+
+        self.setup_tabs()
+        self.load()
+
+        # restore selected tab if notepad tab was selected
+        if selected_tab >= self.start_tab_idx:
+            # if selected tab is out of range, select last tab
+            if selected_tab >= self.window.ui.tabs['output'].count():
+                selected_tab = self.window.ui.tabs['output'].count() - 1
+            self.window.ui.tabs['output'].setCurrentIndex(selected_tab)
+
     def load(self):
         """Load all notepads contents"""
         self.window.core.notepad.load_all()
         items = self.window.core.notepad.get_all()
         num_notepads = self.get_num_notepads()
         if len(items) == 0:
             if num_notepads > 0:
@@ -187,22 +233,22 @@
         items = self.window.core.notepad.get_all()
         num_notepads = self.get_num_notepads()
         if num_notepads > 0:
             for idx in range(1, num_notepads + 1):
                 if idx in self.window.ui.notepad:
                     prev_content = str(items[idx].content)
                     items[idx].content = self.window.ui.notepad[idx].toPlainText()
-
                     # update only if content changed
                     if prev_content != items[idx].content:
                         self.window.core.notepad.update(items[idx])
             self.update()
 
     def setup(self):
         """Setup all notepads"""
+        self.setup_tabs()
         self.load()
 
     def append_text(self, text: str, idx: int):
         """
         Append text to notepad
 
         :param text: text to append
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/controller/painter/__init__.py` & `pygpt_net-2.2.0/src/pygpt_net/controller/painter/__init__.py`

 * *Files 11% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.14 15:00:00                  #
+# Updated Date: 2024.04.09 23:00:00                  #
 # ================================================== #
 
 import os
 
 from .capture import Capture
 from .common import Common
 
@@ -38,14 +38,25 @@
     def open(self, path: str):
         """
         Open image from file
 
         :param path: path to image
         """
         self.window.ui.painter.open_image(path)
+        self.window.ui.status("Image loaded: " + os.path.basename(path))
+
+    def open_external(self, path: str):
+        """
+        Open image from file (from external)
+
+        :param path: path to image
+        """
+        self.open(path)
+        if not self.is_active():
+            self.window.controller.ui.switch_tab('draw')
 
     def save(self):
         """Store current image"""
         path = os.path.join(self.common.get_capture_dir(), '_current.png')
         self.window.ui.painter.image.save(path)
 
     def save_all(self):
@@ -53,15 +64,18 @@
         self.save()
 
     def restore(self):
         """Restore previous image"""
         path = os.path.join(self.common.get_capture_dir(), '_current.png')
         if os.path.exists(path):
             self.window.ui.painter.image.load(path)
-            self.window.ui.painter.update()
+        else:
+            # clear image
+            self.window.ui.painter.clear_image()
+        self.window.ui.painter.update()
 
     def is_active(self) -> bool:
         """
         Check if painter is enabled
 
         :return: True if painter is current active tab
         """
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/controller/painter/capture.py` & `pygpt_net-2.2.0/src/pygpt_net/controller/painter/capture.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/controller/painter/common.py` & `pygpt_net-2.2.0/src/pygpt_net/controller/painter/common.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/controller/plugins/__init__.py` & `pygpt_net-2.2.0/src/pygpt_net/controller/plugins/__init__.py`

 * *Files 6% similar despite different names*

```diff
@@ -2,19 +2,20 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.27 18:00:00                  #
+# Updated Date: 2024.03.25 10:00:00                  #
 # ================================================== #
 
 from PySide6.QtGui import QAction
 
+from pygpt_net.controller.plugins.presets import Presets
 from pygpt_net.controller.plugins.settings import Settings
 from pygpt_net.core.dispatcher import Event
 from pygpt_net.item.ctx import CtxItem
 from pygpt_net.utils import trans
 
 
 class Plugins:
@@ -22,22 +23,39 @@
         """
         Plugins controller
 
         :param window: Window instance
         """
         self.window = window
         self.settings = Settings(window)
+        self.presets = Presets(window)
         self.enabled = {}
 
     def setup(self):
         """Set up plugins"""
         self.setup_menu()
         self.setup_ui()
-        self.setup_config()
+
+        try:
+            self.window.core.plugins.clean_presets()  # clean presets (remove invalid keys)
+        except Exception as e:
+            self.window.core.debug.error(e)
+
+        self.presets.preset_to_current()  # load from presets
+        self.reconfigure(silent=True)  # load plugins settings
+
+    def reconfigure(self, silent: bool = False):
+        """
+        Reconfigure plugins
+
+        :param silent: silent mode
+        """
+        self.setup_config(silent=silent)
         self.update()
+        self.presets.update_menu()
 
     def setup_ui(self):
         """Set up plugins UI"""
         for id in self.window.core.plugins.get_ids():
             try:
                 # setup UI
                 self.window.core.plugins.get(id).setup_ui()
@@ -59,19 +77,28 @@
             tooltip = self.window.core.plugins.get_desc(id)
             self.window.ui.menu['plugins'][id] = QAction(name, self.window, checkable=True)
             self.window.ui.menu['plugins'][id].triggered.connect(
                 lambda checked=None, id=id: self.toggle(id))
             self.window.ui.menu['plugins'][id].setToolTip(tooltip)
             self.window.ui.menu['menu.plugins'].addAction(self.window.ui.menu['plugins'][id])
 
-    def setup_config(self):
-        """Enable plugins from config"""
-        for id in self.window.core.config.get('plugins_enabled'):
-            if self.window.core.config.data['plugins_enabled'][id]:
-                self.enable(id)
+    def setup_config(self, silent: bool = False):
+        """
+        Enable plugins from config
+
+        :param silent: silent mode
+        """
+        for id in self.window.core.plugins.get_ids():
+            if id in self.window.core.config.get('plugins_enabled'):
+                if self.window.core.config.data['plugins_enabled'][id]:
+                    self.enable(id)
+                else:
+                    self.disable(id, silent=silent)
+            else:
+                self.disable(id, silent=silent)
 
     def update(self):
         """Update plugins menu"""
         for id in self.window.ui.menu['plugins']:
             self.window.ui.menu['plugins'][id].setChecked(False)
 
         for id in self.enabled:
@@ -101,33 +128,35 @@
             # update audio menu
             if self.has_type(id, 'audio.input') or self.has_type(id, 'audio.output'):
                 self.window.controller.audio.update()
 
         self.update_info()
         self.update()
 
-    def disable(self, id: str):
+    def disable(self, id: str, silent: bool = False):
         """
         Disable plugin
 
         :param id: plugin id
+        :param silent: silent mode
         """
         if self.window.core.plugins.is_registered(id):
             self.enabled[id] = False
             self.window.core.plugins.disable(id)
 
-            # dispatch plugin disable event
-            event = Event(Event.DISABLE, {
-                'value': id,
-            })
-            self.window.core.dispatcher.dispatch(event, all=True)  # dispatch to all plugins, including disabled now
-
-            # update audio menu
-            if self.has_type(id, 'audio.input') or self.has_type(id, 'audio.output'):
-                self.window.controller.audio.update()
+            if not silent:
+                # dispatch plugin disable event
+                event = Event(Event.DISABLE, {
+                    'value': id,
+                })
+                self.window.core.dispatcher.dispatch(event, all=True)  # dispatch to all plugins, including disabled now
+
+                # update audio menu
+                if self.has_type(id, 'audio.input') or self.has_type(id, 'audio.output'):
+                    self.window.controller.audio.update()
 
         self.update_info()
         self.update()
 
     def is_enabled(self, id: str):
         """
         Check if plugin is enabled
@@ -154,14 +183,15 @@
                 self.enable(id)
 
         self.handle_types()
         self.window.controller.ui.update_tokens()  # refresh tokens
         self.window.controller.ui.mode.update()  # refresh active elements
         self.window.controller.ui.vision.update()  # vision camera
         self.window.controller.attachment.update()  # attachments update
+        self.presets.save_current()  # save settings in current preset
 
     def set_by_tab(self, idx: int):
         """
         Set current plugin by tab index
 
         :param idx: tab index
         """
@@ -360,14 +390,15 @@
         if len(commands) == 0:
             return
 
         # dispatch command execute event
         event = Event(Event.CMD_EXECUTE, {
             'commands': commands,
         })
+        ctx.results = []
         event.ctx = ctx
         self.window.controller.command.dispatch(event)
 
     def apply_cmds_inline(self, ctx: CtxItem, cmds: list):
         """
         Apply inline commands
 
@@ -379,9 +410,10 @@
         if len(commands) == 0:
             return
 
         # dispatch inline command event
         event = Event(Event.CMD_INLINE, {
             'commands': commands,
         })
+        ctx.results = []
         event.ctx = ctx
         self.window.controller.command.dispatch(event)
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/controller/plugins/settings.py` & `pygpt_net-2.2.0/src/pygpt_net/controller/plugins/settings.py`

 * *Files 2% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.03 16:00:00                  #
+# Updated Date: 2024.03.11 01:00:00                  #
 # ================================================== #
 
 from pygpt_net.core.dispatcher import Event
 from pygpt_net.utils import trans
 
 
 class Settings:
@@ -49,15 +49,19 @@
             self.config_initialized = True
         if not self.config_dialog:
             self.init()
             self.window.ui.dialogs.open('plugin_settings', width=self.width, height=self.height)
             self.config_dialog = True
 
     def open_plugin(self, id: str):
-        """Open plugin settings dialog"""
+        """
+        Open plugin settings dialog
+
+        :param id: plugin id
+        """
         self.current_plugin = id
         self.open()
 
     def init(self):
         """Initialize plugin settings options"""
         # select the first plugin on list if no plugin selected yet
         if self.current_plugin is None:
@@ -95,14 +99,17 @@
                 self.window.core.config.data['plugins'][id][key] = value
 
             # remove key from config if plugin option not exists
             for key in list(self.window.core.config.data['plugins'].keys()):
                 if key not in self.window.core.plugins.plugins:
                     self.window.core.config.data['plugins'].pop(key)
 
+        # save preset
+        self.window.controller.plugins.presets.save_current()
+
         # save config
         self.window.core.config.save()
         self.close()
         self.window.ui.status(trans('info.settings.saved'))
 
         # dispatch on update event
         event = Event(Event.PLUGIN_SETTINGS_CHANGED)
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/controller/presets/__init__.py` & `pygpt_net-2.2.0/src/pygpt_net/controller/presets/__init__.py`

 * *Files 4% similar despite different names*

```diff
@@ -2,32 +2,35 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.18 18:00:00                  #
+# Updated Date: 2024.04.22 23:00:00                  #
 # ================================================== #
 
 import re
 
+from PySide6.QtGui import QTextCursor
+
 from pygpt_net.controller.presets.editor import Editor
 from pygpt_net.utils import trans
 
 
 class Presets:
     def __init__(self, window=None):
         """
         Presets controller
 
         :param window: Window instance
         """
         self.window = window
         self.editor = Editor(window)
+        self.locked = False
 
     def setup(self):
         """Setup presets"""
         self.editor.setup()
 
     def select(self, idx: int):
         """
@@ -46,14 +49,55 @@
 
     def use(self):
         """Copy preset prompt to input"""
         self.window.controller.chat.common.append_to_input(
             self.window.ui.nodes['preset.prompt'].toPlainText()
         )
 
+    def paste_prompt(self, idx: int, parent: str = "global"):
+        """
+        Paste prompt from template
+
+        :param idx: prompt index
+        :param parent: parent name
+        """
+        template = self.window.core.prompt.template.get_by_id(idx)
+        if template is None:
+            return
+        if parent == "global":
+            self.paste_to_textarea(self.window.ui.nodes['preset.prompt'], template['prompt'])
+        elif parent == "input":
+            self.paste_to_textarea(self.window.ui.nodes['input'], template['prompt'])
+        elif parent == "editor":
+            self.paste_to_textarea(self.window.ui.config["preset"]["prompt"], template['prompt'])
+
+    def paste_to_textarea(self, textarea, text: str):
+        """
+        Paste text to textarea
+
+        :param textarea: textarea widget
+        :param text: text to paste
+        """
+        separator = "\n"
+        prev_text = textarea.toPlainText()
+        cur = textarea.textCursor()
+        cur.movePosition(QTextCursor.End)
+        text = str(text).strip()
+        if prev_text.strip() != "":
+            text = separator + text
+        s = text
+        while s:
+            head, sep, s = s.partition("\n")
+            cur.insertText(head)
+            if sep:
+                cur.insertBlock()
+        cur.movePosition(QTextCursor.End)
+        textarea.setTextCursor(cur)
+        textarea.setFocus()
+
     def set(self, mode: str, preset_id: str):
         """
         Set preset
 
         :param mode: mode name
         :param preset_id: preset ID
         """
@@ -153,15 +197,15 @@
 
         self.window.core.config.set('user_name', None)
         self.window.core.config.set('ai_name', None)
         self.window.core.config.set('temperature', 1.0)
 
         # set default prompt if mode is chat
         if mode == 'chat':
-            self.window.core.config.set('prompt', self.window.core.config.get('default_prompt'))
+            self.window.core.config.set('prompt', self.window.core.prompt.get('default'))
         else:
             self.window.core.config.set('prompt', None)
 
     def get_current_functions(self) -> list or None:
         """
         Get current preset functions
 
@@ -173,14 +217,16 @@
                 preset = self.window.core.presets.items[preset_id]
                 if preset.has_functions():
                     return preset.get_functions()
         return None
 
     def from_global(self):
         """Update current preset from global prompt"""
+        if self.locked:
+            return
         preset_id = self.window.core.config.get('preset')
         if preset_id is not None and preset_id != "":
             if preset_id in self.window.core.presets.items:
                 preset = self.window.core.presets.items[preset_id]
                 preset.prompt = self.window.core.config.get('prompt')
                 self.window.core.presets.save(preset)
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/controller/presets/editor.py` & `pygpt_net-2.2.0/src/pygpt_net/controller/presets/editor.py`

 * *Files 1% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.18 18:00:00                  #
+# Updated Date: 2024.04.22 23:00:00                  #
 # ================================================== #
 
 import datetime
 import os
 
 from pygpt_net.item.preset import PresetItem
 from pygpt_net.utils import trans
@@ -87,14 +87,15 @@
                 "max": 2,
                 "step": 1,
                 "multiplier": 100,
             },
             "prompt": {
                 "type": "textarea",
                 "label": "preset.prompt",
+                "context_options": ["prompt.template.paste"],
             },
             "tool.function": {
                 "type": "dict",
                 "label": "preset.tool.function",
                 "keys": {
                     'name': 'text',
                     'params': 'textarea',
@@ -146,18 +147,19 @@
         """
         Hook: on settings update in real-time (prompt)
         """
         mode = self.window.core.config.get('mode')
         if key == "prompt":
             self.window.core.config.set('prompt', value)
             if mode == 'assistant':
-                self.window.controller.assistant.from_global()  # update current assistant
+                self.window.controller.assistant.from_global()  # update current assistant, never called!!!!!
             else:
                 self.window.controller.presets.from_global()  # update current preset
 
+
     def edit(self, idx: int = None):
         """
         Open preset editor
 
         :param idx: preset index (row index)
         """
         preset = None
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/controller/settings/__init__.py` & `pygpt_net-2.2.0/src/pygpt_net/controller/settings/__init__.py`

 * *Files 12% similar despite different names*

```diff
@@ -2,52 +2,64 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.17 20:00:00                  #
+# Updated Date: 2024.04.09 23:00:00                  #
 # ================================================== #
 
 import os
 
-from pygpt_net.controller.settings.editor import Editor
+from .editor import Editor
+from .profile import Profile
+from .workdir import Workdir
+
 from pygpt_net.utils import trans
 
 
 class Settings:
     def __init__(self, window=None):
         """
         Settings controller
 
         :param window: Window instance
         """
         self.window = window
         self.editor = Editor(window)
+        self.profile = Profile(window)
+        self.workdir = Workdir(window)
         self.width = 800
         self.height = 500
 
     def setup(self):
         """Set up settings editor"""
+        self.profile.setup()
         self.editor.setup()
 
     def load(self):
         """Load settings"""
         self.editor.load()
 
-    def save_all(self):
-        """Save all settings and data"""
+    def save_all(self, force: bool = False):
+        """
+        Save all settings and data
+
+        :param force: force save
+        """
         info = trans('info.settings.all.saved')
         self.window.core.config.save()
         self.window.core.presets.save_all()
         self.window.controller.notepad.save_all()
         self.window.controller.calendar.save_all()
-        self.window.ui.dialogs.alert(info)
-        self.window.ui.status(info)
+        self.window.controller.painter.save()
+        if not force:
+            self.window.ui.dialogs.alert(info)
+            self.window.ui.status(info)
         self.window.controller.ui.update()
 
     def update(self):
         """Update settings"""
         self.update_menu()
 
     def update_menu(self):
@@ -140,33 +152,54 @@
         """
         Toggle file editor
 
         :param file: JSON file to load
         """
         id = 'editor'
         current_file = self.window.ui.dialog['config.editor'].file
+
+        # show/hide restart required label
+        if file.endswith('.css'):
+            self.window.ui.nodes['dialog.editor.label'].setVisible(False)
+        else:
+            self.window.ui.nodes['dialog.editor.label'].setVisible(True)
+
         if id in self.window.core.settings.active and self.window.core.settings.active[id]:
             if current_file == file:
                 self.window.ui.dialogs.close('config.' + id)
                 self.window.core.settings.active[id] = False
             else:
                 self.window.core.settings.load_editor(file)  # load file to editor
                 self.window.ui.dialog['config.editor'].file = file
+                self.prepare_file_editor(file)
         else:
             self.window.core.settings.load_editor(file)  # load file to editor
+            self.prepare_file_editor(file)
             self.window.ui.dialogs.open(
                 'config.' + id,
                 width=self.width,
                 height=self.height,
             )
             self.window.core.settings.active[id] = True
 
         # update menu
         self.update()
 
+    def prepare_file_editor(self, file: str):
+        """
+        Prepare file editor
+
+        :param file: JSON/CSS file to load
+        """
+        return  # allow defaults to all files
+        if file.endswith('.css'):
+            self.window.ui.nodes['editor.btn.default'].setVisible(True)
+        else:
+            self.window.ui.nodes['editor.btn.default'].setVisible(False)
+
     def close(self, id: str):
         """
         Close menu
 
         :param id: settings window id
         """
         if id in self.window.ui.menu:
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/controller/settings/editor.py` & `pygpt_net-2.2.0/src/pygpt_net/controller/settings/editor.py`

 * *Files 16% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.29 02:00:00                  #
+# Updated Date: 2024.04.24 02:00:00                  #
 # ================================================== #
 
 import copy
 
 from pygpt_net.utils import trans
 
 
@@ -42,23 +42,27 @@
         :param id: settings window id
         """
         # add hooks for config update in real-time
         self.window.ui.add_hook("update.config.font_size", self.hook_update)
         self.window.ui.add_hook("update.config.font_size.input", self.hook_update)
         self.window.ui.add_hook("update.config.font_size.ctx", self.hook_update)
         self.window.ui.add_hook("update.config.font_size.toolbox", self.hook_update)
+        self.window.ui.add_hook("update.config.zoom", self.hook_update)
         self.window.ui.add_hook("update.config.theme.markdown", self.hook_update)
         self.window.ui.add_hook("update.config.render.plain", self.hook_update)
         self.window.ui.add_hook("update.config.vision.capture.enabled", self.hook_update)
         self.window.ui.add_hook("update.config.vision.capture.auto", self.hook_update)
         self.window.ui.add_hook("update.config.ctx.records.limit", self.hook_update)
+        self.window.ui.add_hook("update.config.ctx.convert_lists", self.hook_update)
         self.window.ui.add_hook("update.config.layout.density", self.hook_update)
         self.window.ui.add_hook("update.config.layout.tooltips", self.hook_update)
         self.window.ui.add_hook("update.config.img_dialog_open", self.hook_update)
         self.window.ui.add_hook("update.config.debug", self.hook_update)
+        self.window.ui.add_hook("update.config.notepad.num", self.hook_update)
+        self.window.ui.add_hook("update.config.render.code_syntax", self.hook_update)
         # self.window.ui.add_hook("llama.idx.storage", self.hook_update)  # vector store update
         # self.window.ui.add_hook("update.config.llama.idx.list", self.hook_update)
 
         if id == 'settings':
             options = {}
             for key in self.options:
                 if 'type' not in self.options[key]:
@@ -119,63 +123,85 @@
         self.window.controller.ui.update_font_size()
         self.window.controller.ui.update()
 
         self.window.core.idx.sync()
         self.window.controller.idx.update()
 
         # update layout if needed
-        if self.before_config['layout.density'] != self.window.core.config.get('layout.density'):
+        if self.config_changed('layout.density'):
             self.window.controller.theme.reload()
 
         # update dirs if needed
-        if self.before_config['upload.data_dir'] != self.window.core.config.get('upload.data_dir'):
+        if self.config_changed('upload.data_dir'):
             self.window.core.camera.install()
             self.window.core.image.install()
             self.window.core.filesystem.install()
             self.window.controller.files.update_explorer()
 
         # switch log level in runtime
-        if 'log.level' in self.before_config \
-                and self.before_config['log.level'] != self.window.core.config.get('log.level'):
+        if self.config_changed('log.level'):
             self.window.controller.debug.set_log_level(self.window.core.config.get('log.level'))
 
         # reset dialog geometry if disabled
         if not self.window.core.config.get('layout.dialog.geometry.store'):
             self.window.core.config.set('layout.dialog.geometry', {})
             self.window.core.config.save()
 
         # update search result if needed
-        if 'ctx.search_content' in self.before_config \
-                and self.before_config['ctx.search_content'] != self.window.core.config.get('ctx.search_content'):
+        if self.config_changed('ctx.search_content'):
             self.window.controller.ctx.update()
 
+        # syntax highlighter style
+        if self.config_changed('render.code_syntax'):
+            value = self.window.core.config.get('render.code_syntax')
+            self.window.controller.theme.toggle_syntax(value, update_menu=True)
+
+        # convert lists
+        if self.config_changed('ctx.convert_lists'):
+            self.window.controller.ctx.refresh()
+
         # reload loaders
-        need_loaders_reload = False
-        if 'llama.hub.loaders.args' in self.before_config \
-                and self.before_config['llama.hub.loaders.args'] != self.window.core.config.get(
-            'llama.hub.loaders.args'):
-            need_loaders_reload = True
-        if 'llama.hub.loaders.use_local' in self.before_config \
-                and self.before_config['llama.hub.loaders.use_local'] != self.window.core.config.get(
-            'llama.hub.loaders.use_local'):
-            need_loaders_reload = True
-        if need_loaders_reload:
+        if self.config_changed('llama.hub.loaders.args') or self.config_changed('llama.hub.loaders.use_local'):
             self.window.core.idx.indexing.reload_loaders()
+            self.window.tools.get("indexer").refresh()
 
         # update idx list
-        if 'llama.idx.list' in self.before_config \
-                and self.before_config['llama.idx.list'] != self.window.core.config.get('llama.idx.list'):
+        if self.config_changed('llama.idx.list'):
             self.window.controller.idx.settings.update_idx_choices()
+            self.window.tools.get("indexer").reload()
+
+        # update idx storage
+        if self.config_changed('llama.idx.storage'):
+            self.window.tools.get("indexer").reload()
+
+        # update notepad tabs
+        if self.config_changed('notepad.num'):
+            self.window.controller.notepad.update_tabs()
 
         # update file explorer if vector store provider changed
         self.window.controller.idx.indexer.update_explorer()
 
+        # update chat output
+        if self.config_changed('ctx.sources') or self.config_changed('ctx.audio'):
+            self.window.controller.ctx.refresh()
+
         self.before_config = copy.deepcopy(self.window.core.config.all())
         self.window.controller.settings.close_window(id)
 
+    def config_changed(self, key: str) -> bool:
+        """
+        Check if config changed
+
+        :param key: config key
+        :return: bool
+        """
+        if key in self.before_config and self.before_config[key] != self.window.core.config.get(key):
+            return True
+        return False
+
     def hook_update(self, key, value, caller, *args, **kwargs):
         """
         Hook: on settings update
 
         :param key: config key
         :param value: config value
         :param caller: caller name
@@ -186,35 +212,50 @@
             return
 
         # update font size
         if key.startswith('font_size') and caller == "slider":
             self.window.core.config.set(key, value)
             self.window.controller.ui.update_font_size()
 
+        elif key == "zoom" and caller == "slider":
+            value = value / 100
+            self.window.core.config.set(key, value)
+            self.window.controller.ui.update_font_size()
+
+        # update notepad tabs
+        elif key == "notepad.num" and caller == "slider":
+            self.window.core.config.set(key, value)
+            self.window.controller.notepad.update_tabs()
+
         # update markdown
         elif key == "theme.markdown":
             self.window.core.config.set(key, value)
             self.window.controller.theme.markdown.update(force=True)
 
+        elif key == "render.code_syntax":
+            self.window.core.config.set(key, value)
+            self.window.controller.theme.toggle_syntax(value, update_menu=True)
+
+        elif key == "ctx.convert_lists":
+            self.window.core.config.set(key, value)
+            self.window.controller.ctx.refresh()
+
         # update layout tooltips
         elif key == "layout.tooltips":
             self.window.core.config.set(key, value)
             self.window.controller.theme.common.toggle_tooltips()
 
         # update raw output
         elif key == "render.plain":
             self.window.core.config.set(key, value)
             if not value:
-                self.window.controller.ctx.refresh()
-                self.window.controller.theme.markdown.update(force=True)
                 self.window.ui.nodes['output.raw'].setChecked(False)
             else:
-                self.window.controller.theme.markdown.clear()
                 self.window.ui.nodes['output.raw'].setChecked(True)
-            # restore previous font size
+            self.window.controller.chat.render.switch()
             self.window.controller.ui.update_font_size()
 
         # call vision checkboxes events
         elif key == "vision.capture.enabled":
             self.window.core.config.set(key, value)
             self.window.ui.nodes['vision.capture.enable'].setChecked(value)
 
@@ -237,15 +278,15 @@
         elif key == "img_dialog_open":
             self.window.core.config.set(key, value)
             self.window.ui.nodes['dialog.image.open.toggle'].setChecked(value)
 
         # debug: menu
         elif key == "debug":
             self.window.core.config.set(key, value)
-            self.window.ui.menu['menu.debug'].menuAction().setVisible(value)
+            self.window.controller.debug.toggle_menu()
 
     def toggle_collapsed(self, id: str, value: any, section: str):
         """
         Toggle collapsed state of section
 
         :param id: section
         :param value: value
@@ -294,14 +335,44 @@
         # load default user config
         self.window.core.settings.load_app_settings()
 
         # re-init settings
         self.init('settings')
         self.window.ui.dialogs.alert(trans('dialog.settings.defaults.app.result'))
 
+    def load_editor_defaults_user(self, force: bool = False):
+        """
+        Load default user config
+
+        :param force: force load
+        """
+        if not force:
+            self.window.ui.dialogs.confirm(
+                type='settings.editor.defaults.user',
+                id=-1,
+                msg=trans('settings.defaults.user.confirm'),
+            )
+            return
+        self.window.core.settings.load_default_editor()
+
+    def load_editor_defaults_app(self, force: bool = False):
+        """
+        Load default app config
+
+        :param force: force load
+        """
+        if not force:
+            self.window.ui.dialogs.confirm(
+                type='settings.editor.defaults.app',
+                id=-1,
+                msg=trans('settings.defaults.app.confirm'),
+            )
+            return
+        self.window.core.settings.load_default_editor_app()
+
     def get_sections(self) -> dict:
         """
         Return settings sections dict
 
         :return: dict sections dict
         """
         return self.sections
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/controller/theme/__init__.py` & `pygpt_net-2.2.0/src/pygpt_net/controller/theme/__init__.py`

 * *Files 8% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.01.15 03:00:00                  #
+# Updated Date: 2024.04.24 02:00:00                  #
 # ================================================== #
 
 import os
 
 from .common import Common
 from .markdown import Markdown
 from .menu import Menu
@@ -34,14 +34,15 @@
         """Setup theme"""
         # load markdown CSS
         self.markdown.load()
 
         # setup menus
         self.menu.setup_list()
         self.menu.setup_density()
+        self.menu.setup_syntax()
 
         # show or hide tooltips
         self.common.toggle_tooltips()
 
         # apply current theme to nodes
         self.reload(force=False)
 
@@ -61,14 +62,16 @@
         self.apply(name + '.xml', self.common.get_extra_css(name))  # style.css = additional custom stylesheet
 
         # apply markdown CSS
         self.markdown.update(force=False)
 
         # update themes menu
         self.menu.update_list()
+        self.menu.update_syntax()
+        self.window.ui.menu['theme.blocks'].setChecked(self.window.core.config.get("render.blocks"))
 
         if force:
             self.window.controller.ui.restore_state()  # restore state after theme change
 
     def toggle_option(self, name: str, value: any = None):
         """
         Toggle theme menu option
@@ -86,18 +89,37 @@
             self.common.toggle_tooltips()
         elif name == 'layout.density':
             value = int(value)
             self.window.core.config.set(name, value)
             self.window.controller.config.slider.apply('config', 'layout.density', {'value': value})
             self.reload()
             self.menu.update_density()
-            
+        elif name == 'render.blocks':
+            if self.window.core.config.get(name):
+                state = False
+            else:
+                state = True
+            self.window.core.config.set(name, state)
+            self.window.controller.chat.render.on_theme_change()
+            self.reload()
         self.window.core.config.save()
         self.nodes.apply_all()
 
+    def toggle_syntax(self, name: str, update_menu: bool = False):
+        """
+        Toggle syntax highlight
+
+        :param name: syntax style name
+        :param update_menu: update menu
+        """
+        self.window.core.config.set("render.code_syntax", name)
+        self.window.controller.chat.render.on_theme_change()
+        if update_menu:
+            self.menu.update_syntax()
+
     def reload(self, force: bool = True):
         """
         Reload current theme
 
         :param force: force theme change (manual trigger)
         """
         current = self.window.core.config.get('theme')
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/controller/theme/common.py` & `pygpt_net-2.2.0/src/pygpt_net/controller/theme/common.py`

 * *Files 3% similar despite different names*

```diff
@@ -66,18 +66,20 @@
             'tip.toolbox.mode',
             'tip.toolbox.presets',
             'tip.toolbox.prompt',
         ]
         state = self.window.core.config.get('layout.tooltips')
         if state:
             for node in nodes:
-                self.window.ui.nodes[node].setVisible(True)
+                if node in self.window.ui.nodes:
+                    self.window.ui.nodes[node].setVisible(True)
         else:
             for node in nodes:
-                self.window.ui.nodes[node].setVisible(False)
+                if node in self.window.ui.nodes:
+                    self.window.ui.nodes[node].setVisible(False)
 
         self.window.ui.menu['theme.tooltips'].setChecked(state)
 
     def translate(self, theme: str) -> str:
         """
         Translate theme name
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/controller/theme/markdown.py` & `pygpt_net-2.2.0/src/pygpt_net/controller/theme/markdown.py`

 * *Files 15% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.01.15 10:00:00                  #
+# Updated Date: 2024.04.25 01:00:00                  #
 # ================================================== #
 
 import os
 
 
 class Markdown:
     def __init__(self, window=None):
@@ -41,54 +41,64 @@
             self.window.controller.ui.restore_state()  # restore state after theme change
 
     def set_default(self):
         """Set default markdown CSS"""
         self.css['markdown'] = self.get_default()
 
     def apply(self):
-        """Apply CSS to markdown formatter"""
-        self.window.ui.nodes['output'].document().setDefaultStyleSheet(self.css['markdown'])
-        self.window.ui.nodes['output'].document().setMarkdown(self.window.ui.nodes['output'].document().toMarkdown())
-        self.window.controller.ctx.refresh_output()
+        """Apply CSS to renderers"""
+        self.window.ui.nodes['output_plain'].setStyleSheet(self.css['markdown'])  # plain text, always apply
+        self.window.controller.chat.render.on_theme_change()  # per current engine
+
+    def get_web_css(self) -> str:
+        """
+        Get web CSS
+
+        :return: stylesheet
+        """
+        if "web" not in self.css:
+            self.load()
+        if "web" in self.css:
+            return self.css["web"]
+        return ""
 
     def clear(self):
-        """Clear CSS to markdown formatter"""
-        self.window.ui.nodes['output'].clear()
-        self.window.ui.nodes['output'].document().setDefaultStyleSheet("")
-        self.window.ui.nodes['output'].setStyleSheet("")
-        self.window.ui.nodes['output'].document().setMarkdown("")
-        self.window.ui.nodes['output'].document().setHtml("")
-        self.window.ui.nodes['output'].setPlainText("")
+        """Clear CSS of markdown formatter"""
+        self.window.controller.chat.render.clear_all()
         self.window.controller.ctx.refresh()
         self.window.controller.ctx.refresh_output()
         self.window.controller.chat.render.end()
 
     def load(self):
         """Load markdown styles"""
-        theme = self.window.core.config.get('theme')
-        name = 'markdown'
-        color_name = 'markdown'
-        if theme.startswith('light'):
-            color_name += '.light'
-        else:
-            color_name += '.dark'
-        paths = []
-        paths.append(os.path.join(self.window.core.config.get_app_path(), 'data', 'css', name + '.css'))
-        paths.append(os.path.join(self.window.core.config.get_app_path(), 'data', 'css', color_name + '.css'))
-        paths.append(os.path.join(self.window.core.config.get_user_path(), 'css', name + '.css'))
-        paths.append(os.path.join(self.window.core.config.get_user_path(), 'css', color_name + '.css'))
-        content = ''
-        for path in paths:
-            if os.path.exists(path):
-                with open(path, 'r') as file:
-                    content += file.read()
-        try:
-            self.css['markdown'] = content.format(**os.environ)
-        except KeyError as e:
-            pass  # ignore missing env vars
+        parents = ["markdown", "web"]
+        for base_name in parents:
+            theme = self.window.core.config.get('theme')
+            name = str(base_name)
+            color_name = str(base_name)
+            if theme.startswith('light'):
+                color_name += '.light'
+            else:
+                color_name += '.dark'
+            paths = []
+            paths.append(os.path.join(self.window.core.config.get_app_path(), 'data', 'css', name + '.css'))
+            paths.append(os.path.join(self.window.core.config.get_app_path(), 'data', 'css', color_name + '.css'))
+            paths.append(os.path.join(self.window.core.config.get_user_path(), 'css', name + '.css'))
+            paths.append(os.path.join(self.window.core.config.get_user_path(), 'css', color_name + '.css'))
+            content = ''
+            for path in paths:
+                if os.path.exists(path):
+                    with open(path, 'r') as file:
+                        content += file.read()
+
+            self.css[base_name] = content  # always append default raw in case of errors in env vars
+            try:
+                self.css[base_name] = content.format(**os.environ)  # replace env vars
+            except KeyError as e:  # ignore missing env vars
+                pass
 
     def get_default(self):
         """Set default markdown CSS"""
         colors = {
             "dark": {
                 "a": "#fff",
                 "msg-user": "#d9d9d9",
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/controller/theme/menu.py` & `pygpt_net-2.2.0/src/pygpt_net/controller/theme/menu.py`

 * *Files 20% similar despite different names*

```diff
@@ -2,60 +2,84 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.01.23 19:00:00                  #
+# Updated Date: 2024.04.24 02:00:00                  #
 # ================================================== #
 
+from pygments.styles import get_all_styles
 from PySide6.QtGui import QAction
 
 
 class Menu:
     def __init__(self, window=None):
         """
         Theme menu controller
 
         :param window: Window instance
         """
         self.window = window
         self.density_values = [-2, -1, 0, 1, 2]
+        self.loaded = False
+        self.syntax_loaded = False
+        self.density_loaded = False
 
     def setup_list(self):
         """Setup menu list"""
         # setup themes list menu
+        if self.loaded:
+            return
         themes = self.window.controller.theme.common.get_themes_list()
         for theme in themes:
             name = self.window.controller.theme.common.translate(theme)
             self.window.ui.menu['theme'][theme] = QAction(name, self.window, checkable=True)
             self.window.ui.menu['theme'][theme].triggered.connect(
                 lambda checked=None, theme=theme: self.window.controller.theme.toggle(theme))
 
             # append to dark or light menu
             if theme.startswith('dark'):
                 self.window.ui.menu['theme.dark'].addAction(self.window.ui.menu['theme'][theme])
             elif theme.startswith('light'):
                 self.window.ui.menu['theme.light'].addAction(self.window.ui.menu['theme'][theme])
+        self.loaded = True
+
+    def setup_syntax(self):
+        """Setup syntax menu"""
+        styles = list(get_all_styles())
+        styles.sort()
+        # clear menu
+        for style in self.window.ui.menu['theme_syntax']:
+            self.window.ui.menu['theme.syntax'].removeAction(self.window.ui.menu['theme_syntax'][style])
+        # setup syntax menu
+        for style in styles:
+            self.window.ui.menu['theme_syntax'][style] = QAction(style, self.window, checkable=True)
+            self.window.ui.menu['theme_syntax'][style].triggered.connect(
+                lambda checked=None, style=style: self.window.controller.theme.toggle_syntax(style, update_menu=True))
+            self.window.ui.menu['theme.syntax'].addAction(self.window.ui.menu['theme_syntax'][style])
 
     def setup_density(self):
         """Setup menu list"""
+        if self.density_loaded:
+            return
         # setup layout density menu
         current_density = self.window.core.config.get('layout.density')
         for value in self.density_values:
             name = str(value)
             if value > 0:
                 name = '+' + name
             self.window.ui.menu['theme.layout.density'][value] = QAction(name, self.window, checkable=True)
             self.window.ui.menu['theme.layout.density'][value].triggered.connect(
                 lambda checked=None, value=value: self.window.controller.theme.toggle_option('layout.density', value))
             self.window.ui.menu['theme.density'].addAction(self.window.ui.menu['theme.layout.density'][value])
             if value == current_density:
                 self.window.ui.menu['theme.layout.density'][value].setChecked(True)
+        self.density_loaded = True
 
     def update_density(self):
         """Update layout density menu"""
         current_density = self.window.core.config.get('layout.density')
         for value in self.density_values:
             self.window.ui.menu['theme.layout.density'][value].setChecked(False)
             if value == current_density:
@@ -64,7 +88,15 @@
     def update_list(self):
         """Update theme list menu"""
         for theme in self.window.ui.menu['theme']:
             self.window.ui.menu['theme'][theme].setChecked(False)
         current = self.window.core.config.get('theme')
         if current in self.window.ui.menu['theme']:
             self.window.ui.menu['theme'][current].setChecked(True)
+
+    def update_syntax(self):
+        """Update syntax menu"""
+        for style in self.window.ui.menu['theme_syntax']:
+            self.window.ui.menu['theme_syntax'][style].setChecked(False)
+        current = self.window.core.config.get('render.code_syntax')
+        if current in self.window.ui.menu['theme_syntax']:
+            self.window.ui.menu['theme_syntax'][current].setChecked(True)
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/controller/theme/nodes.py` & `pygpt_net-2.2.0/src/pygpt_net/controller/theme/nodes.py`

 * *Files 25% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.01.27 11:00:00                  #
+# Updated Date: 2024.04.25 01:00:00                  #
 # ================================================== #
 
 
 class Nodes:
     def __init__(self, window=None):
         """
         Theme nodes controller
@@ -42,14 +42,15 @@
         """Apply stylesheets to nodes"""
         nodes = {
             'font.chat.input': [
                 'input',
             ],
             'font.chat.output': [
                 'output',
+                'output_plain',
             ],
             'font.ctx.list': [
                 'ctx.list',
             ],
             'font.toolbox': [
                 'assistants',
                 'assistants.new',
@@ -81,15 +82,52 @@
                 'vision.capture.options',
             ],
         }
 
         # apply to nodes
         for type in nodes:
             for key in nodes[type]:
+                if key == "output" and self.window.controller.chat.render.get_engine() != 'legacy':
+                    continue
                 self.apply(key, type)
 
+        # self.window.interpreter.update_stylesheet(self.window.controller.theme.style('font.chat.output'))
+        # self.window.ui.nodes['interpreter.input'].update_stylesheet(self.window.controller.theme.style('font.chat.input'))
+
         # apply to notepads
         num_notepads = self.window.controller.notepad.get_num_notepads()
         if num_notepads > 0:
             for id in range(1, num_notepads + 1):
                 if id in self.window.ui.notepad:
                     self.window.ui.notepad[id].textarea.setStyleSheet(self.window.controller.theme.style('font.chat.output'))
+
+        # apply to calendar
+        self.window.ui.calendar['note'].setStyleSheet(self.window.controller.theme.style('font.chat.output'))
+
+        # update value
+        size = self.window.core.config.get('font_size')
+        self.window.ui.calendar['note'].value = size
+        if num_notepads > 0:
+            for id in range(1, num_notepads + 1):
+                if id in self.window.ui.notepad:
+                    self.window.ui.notepad[id].textarea.value = size
+
+        # plain text/markdown
+        self.window.ui.nodes['output_plain'].value = size
+        self.window.ui.nodes['output_plain'].update()
+
+        # ------------------------
+
+        # zoom, (Chromium, web engine)
+        if self.window.controller.chat.render.get_engine() == 'web':
+            zoom = self.window.core.config.get('zoom')
+            self.window.ui.nodes['output'].value = zoom
+            self.window.ui.nodes['output'].update_zoom()
+            self.window.controller.chat.render.on_theme_change()
+
+        # font size, legacy (markdown)
+        elif self.window.controller.chat.render.get_engine() == 'legacy':
+            self.window.ui.nodes['output'].value = size
+            self.window.ui.nodes['output'].update()
+
+        # update tools
+        self.window.tools.setup_theme()
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/controller/ui/__init__.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/widget/textarea/calendar_note.py`

 * *Files 26% similar despite different names*

```diff
@@ -1,152 +1,148 @@
-# !/usr/bin/env python3
+#!/usr/bin/env python3
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.01.28 12:00:00                  #
+# Updated Date: 2024.04.11 16:00:00                  #
 # ================================================== #
 
+from PySide6.QtCore import Qt
+from PySide6.QtGui import QAction, QIcon, QKeySequence
+from PySide6.QtWidgets import QTextEdit
+
+from pygpt_net.core.text.finder import Finder
 from pygpt_net.utils import trans
-from .mode import Mode
-from .vision import Vision
+import pygpt_net.icons_rc
 
 
-class UI:
+class CalendarNote(QTextEdit):
     def __init__(self, window=None):
         """
-        UI update controller
+        Notepad
 
-        :param window: Window instance
+        :param window: main window
         """
+        super(CalendarNote, self).__init__(window)
         self.window = window
-        self.mode = Mode(window)
-        self.vision = Vision(window)
-        self.current_tab = 0
-        self.tab_idx = {
-            'chat': 0,
-            'files': 1,
-            'calendar': 2,
-            'draw': 3,
-        }
-
-    def setup(self):
-        """Setup UI"""
-        self.update_font_size()
-        self.update()
-
-    def update(self):
-        """Update all elements"""
-
-        # update mode, models and presets list
-        self.update_toolbox()
-
-        # update chat label
-        self.update_chat_label()
-
-        # show / hide widgets
-        self.mode.update()
-
-        # update token counters
-        self.update_tokens()
-
-        # update vision
-        self.vision.update()
-
-        # agent status
-        self.window.controller.agent.update()
-
-    def update_font_size(self):
-        """Update font size"""
-        self.window.controller.theme.nodes.apply_all()
-
-    def update_toolbox(self):
-        """Update toolbox"""
-        self.window.controller.mode.update_mode()
-        self.window.controller.model.update()
-        self.window.controller.presets.refresh()
-        self.window.controller.assistant.refresh()
-        self.window.controller.idx.refresh()
-
-    def update_tokens(self):
-        """Update tokens counter in real-time"""
-        prompt = str(self.window.ui.nodes['input'].toPlainText().strip())
-        input_tokens, system_tokens, extra_tokens, ctx_tokens, ctx_len, ctx_len_all, \
-            sum_tokens, max_current, threshold = self.window.core.tokens.get_current(prompt)
-
-        # ctx tokens
-        ctx_string = "{} / {} - {} {}".format(
-            ctx_len,
-            ctx_len_all,
-            ctx_tokens,
-            trans('ctx.tokens')
-        )
-        self.window.ui.nodes['prompt.context'].setText(ctx_string)
-
-        # input tokens
-        parsed_sum = str(int(sum_tokens))
-        parsed_sum = parsed_sum.replace("000000", "M").replace("000", "k")
-
-        parsed_max_current = str(int(max_current))
-        parsed_max_current = parsed_max_current.replace("000000", "M").replace("000", "k")
-
-        input_string = "{} + {} + {} + {} = {} / {}".format(
-            input_tokens,
-            system_tokens,
-            ctx_tokens,
-            extra_tokens,
-            parsed_sum,
-            parsed_max_current
-        )
-        self.window.ui.nodes['input.counter'].setText(input_string)
-
-    def store_state(self):
-        """Store UI state"""
-        self.window.controller.layout.scroll_save()
-
-    def restore_state(self):
-        """Restore UI state"""
-        self.window.controller.layout.scroll_restore()
-
-    def update_chat_label(self):
-        """Update chat label"""
-        model = self.window.core.config.get('model')
-        if model is None or model == "":
-            model_str = ""
+        self.finder = Finder(window, self)
+        self.setAcceptRichText(False)
+        self.setStyleSheet(self.window.controller.theme.style('font.chat.output'))
+        self.value = self.window.core.config.data['font_size']
+        self.textChanged.connect(self.text_changed)
+        self.max_font_size = 42
+        self.min_font_size = 8
+
+    def text_changed(self):
+        """On parent textarea text changed"""
+        self.window.controller.calendar.note.update()
+        self.finder.text_changed()
+
+    def contextMenuEvent(self, event):
+        menu = self.createStandardContextMenu()
+        selected_text = self.textCursor().selectedText()
+        if selected_text:
+            # plain text
+            plain_text = self.textCursor().selection().toPlainText()
+
+            # audio read
+            action = QAction(QIcon(":/icons/volume.svg"), trans('text.context_menu.audio.read'), self)
+            action.triggered.connect(self.audio_read_selection)
+            menu.addAction(action)
+
+            # copy to
+            copy_to_menu = self.window.ui.context_menu.get_copy_to_menu(self, selected_text, excluded=["calendar"])
+            menu.addMenu(copy_to_menu)
+
+            # save as (selected)
+            action = QAction(QIcon(":/icons/save.svg"), trans('action.save_selection_as'), self)
+            action.triggered.connect(
+                lambda: self.window.controller.chat.common.save_text(plain_text))
+            menu.addAction(action)
+        else:
+            # save as (all)
+            action = QAction(QIcon(":/icons/save.svg"), trans('action.save_as'), self)
+            action.triggered.connect(
+                lambda: self.window.controller.chat.common.save_text(self.toPlainText()))
+            menu.addAction(action)
+
+        action = QAction(QIcon(":/icons/search.svg"), trans('text.context_menu.find'), self)
+        action.triggered.connect(self.find_open)
+        action.setShortcut(QKeySequence("Ctrl+F"))
+        menu.addAction(action)
+
+        menu.exec_(event.globalPos())
+
+    def audio_read_selection(self):
+        """
+        Read selected text (audio)
+        """
+        self.window.controller.audio.read_text(self.textCursor().selectedText())
+
+    def find_open(self):
+        """Open find dialog"""
+        self.window.controller.finder.open(self.finder)
+
+    def on_update(self):
+        """On content update"""
+        self.finder.clear()  # clear finder
+
+    def keyPressEvent(self, e):
+        """
+        Key press event
+
+        :param e: Event
+        """
+        if e.key() == Qt.Key_F and e.modifiers() & Qt.ControlModifier:
+            self.find_open()
         else:
-            model_str = str(model)
-        self.window.ui.nodes['chat.model'].setText(model_str)
+            self.finder.clear(restore=True, to_end=False)
+            super(CalendarNote, self).keyPressEvent(e)
 
-    def update_ctx_label(self, label: str = None):
+    def wheelEvent(self, event):
         """
-        Update ctx label
+        Wheel event: set font size
 
-        :param label: label
+        :param event: Event
         """
-        mode = self.window.core.config.get('mode')
-        allowed = self.window.core.ctx.is_allowed_for_mode(mode)
-        if label is None:
-            label = ''
+        if event.modifiers() & Qt.ControlModifier:
+            if event.angleDelta().y() > 0:
+                if self.value < self.max_font_size:
+                    self.value += 1
+            else:
+                if self.value > self.min_font_size:
+                    self.value -= 1
+
+            self.window.core.config.data['font_size'] = self.value
+            self.window.core.config.save()
+            option = self.window.controller.settings.editor.get_option('font_size')
+            option['value'] = self.value
+            self.window.controller.config.apply(
+                parent_id='config',
+                key='font_size',
+                option=option,
+            )
+            self.window.controller.ui.update_font_size()
+            event.accept()
+        else:
+            super(CalendarNote, self).wheelEvent(event)
 
-        # add (+) if allowed appending data to this context
-        if allowed:
-            label += ' (+)'
-        self.window.ui.nodes['chat.label'].setText(str(label))
+    def focusInEvent(self, e):
+        """
+        Focus in event
 
-    def output_tab_changed(self, idx: int):
+        :param e: focus event
         """
-        Output tab changed
+        self.window.controller.finder.focus_in(self.finder)
+        super(CalendarNote, self).focusInEvent(e)
 
-        :param idx: tab index
+    def focusOutEvent(self, e):
         """
-        self.current_tab = idx
-        self.mode.update()
-        self.vision.update()
+        Focus out event
 
-        if idx == self.tab_idx['calendar']:
-            self.window.controller.notepad.opened_once = True
-        elif idx == self.tab_idx['draw']:
-            if self.window.core.config.get('vision.capture.enabled'):
-                self.window.controller.camera.enable_capture()
+        :param e: focus event
+        """
+        super(CalendarNote, self).focusOutEvent(e)
+        self.window.controller.finder.focus_out(self.finder)
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/controller/ui/mode.py` & `pygpt_net-2.2.0/src/pygpt_net/controller/ui/mode.py`

 * *Files 7% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.29 01:00:00                  #
+# Updated Date: 2024.04.27 14:00:00                  #
 # ================================================== #
 
 from pygpt_net.core.dispatcher import Event
 
 
 class Mode:
     def __init__(self, window=None):
@@ -60,22 +60,22 @@
         if mode == "assistant":
             self.window.ui.nodes['assistants.widget'].setVisible(True)
         else:
             self.window.ui.nodes['assistants.widget'].setVisible(False)
 
         # indexes list
         if mode == "llama_index":
-            self.window.ui.nodes['indexes.widget'].setVisible(True)
+            # self.window.ui.nodes['indexes.widget'].setVisible(True)
             self.window.ui.nodes['idx.options'].setVisible(True)
         else:
-            self.window.ui.nodes['indexes.widget'].setVisible(False)
+            # self.window.ui.nodes['indexes.widget'].setVisible(False)
             self.window.ui.nodes['idx.options'].setVisible(False)
 
         # stream mode
-        if mode in ["img", "assistant"]:
+        if mode in ["img"]:
             self.window.ui.nodes['input.stream'].setVisible(False)
         else:
             self.window.ui.nodes['input.stream'].setVisible(True)
 
         # vision
         show = self.is_vision(mode)
         self.window.ui.menu['menu.video'].menuAction().setVisible(show)
@@ -96,15 +96,19 @@
         # toggle chat footer
         if not self.is_chat_tab():
             self.hide_chat_footer()
         else:
             self.show_chat_footer()
 
     def is_vision(self, mode: str) -> bool:
-        """Check if vision is allowed"""
+        """
+        Check if vision is allowed
+
+        :param mode: current mode
+        """
         if mode == "vision":
             return True
 
         allowed = self.window.controller.painter.is_active()
         if allowed:
             return True
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/controller/ui/vision.py` & `pygpt_net-2.2.0/src/pygpt_net/controller/ui/vision.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/core/attachments.py` & `pygpt_net-2.2.0/src/pygpt_net/core/attachments.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/core/audio.py` & `pygpt_net-2.2.0/src/pygpt_net/core/audio.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/core/bridge.py` & `pygpt_net-2.2.0/src/pygpt_net/core/bridge.py`

 * *Files 21% similar despite different names*

```diff
@@ -2,41 +2,47 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.01.30 20:00:00                  #
+# Updated Date: 2024.03.15 12:00:00                  #
 # ================================================== #
 
+import time
+from datetime import datetime, timedelta
+
+
 class Bridge:
     def __init__(self, window=None):
         """
         Provider bridge
 
         :param window: Window instance
         """
         self.window = window
+        self.last_call = None
 
     def call(self, **kwargs) -> bool:
         """
         Make call to provider
 
         :param kwargs: keyword arguments
         """
         allowed_model_change = ["vision"]
 
         self.window.stateChanged.emit(self.window.STATE_BUSY)  # set busy
 
         # debug
         self.window.core.debug.info("Bridge call...")
         if self.window.core.debug.enabled():
-            debug = {k: str(v) for k, v in kwargs.items()}
-            self.window.core.debug.debug(str(debug))
+            if self.window.core.config.get("log.ctx"):
+                debug = {k: str(v) for k, v in kwargs.items()}
+                self.window.core.debug.debug(str(debug))
 
         # get kwargs
         ctx = kwargs.get("ctx", None)
         prompt = kwargs.get("prompt", None)
         mode = kwargs.get("mode", None)
         model = kwargs.get("model", None)  # model instance
 
@@ -61,16 +67,19 @@
         if mode in allowed_model_change:
             model = self.window.controller.model.switch_inline(mode, model)
             kwargs['model'] = model
 
         # debug
         self.window.core.debug.info("Bridge call (after inline)...")
         if self.window.core.debug.enabled():
-            debug = {k: str(v) for k, v in kwargs.items()}
-            self.window.core.debug.debug(str(debug))
+            if self.window.core.config.get("log.ctx"):
+                debug = {k: str(v) for k, v in kwargs.items()}
+                self.window.core.debug.debug(str(debug))
+
+        self.apply_rate_limit()  # apply RPM limit
 
         # Langchain
         if mode == "langchain":
             return self.window.core.chain.call(**kwargs)
 
         # Llama-index
         elif mode == "llama_index":
@@ -85,10 +94,28 @@
         Make quick call to provider and get response content
 
         :param kwargs: keyword arguments
         :return: response content
         """
         self.window.core.debug.info("Bridge quick call...")
         if self.window.core.debug.enabled():
-            debug = {k: str(v) for k, v in kwargs.items()}
-            self.window.core.debug.debug(str(debug))
+            if self.window.core.config.get("log.ctx"):
+                debug = {k: str(v) for k, v in kwargs.items()}
+                self.window.core.debug.debug(str(debug))
         return self.window.core.gpt.quick_call(**kwargs)
+
+    def apply_rate_limit(self):
+        """Apply API calls RPM limit"""
+        max_per_minute = 60
+        if self.window.core.config.has("max_requests_limit"):
+            max_per_minute = int(self.window.core.config.get("max_requests_limit")) # per minute
+        if max_per_minute <= 0:
+            return
+        interval = timedelta(minutes=1) / max_per_minute
+        now = datetime.now()
+        if self.last_call is not None:
+            time_since_last_call = now - self.last_call
+            if time_since_last_call < interval:
+                sleep_time = (interval - time_since_last_call).total_seconds()
+                self.window.core.debug.debug("RPM limit: sleep for {} seconds".format(sleep_time))
+                time.sleep(sleep_time)
+        self.last_call = now
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/core/calendar/__init__.py` & `pygpt_net-2.2.0/src/pygpt_net/core/calendar/__init__.py`

 * *Files 2% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.02 18:00:00                  #
+# Updated Date: 2024.03.12 06:00:00                  #
 # ================================================== #
 
 import datetime
 
 from packaging.version import Version
 
 from pygpt_net.item.calendar_note import CalendarNoteItem
@@ -132,21 +132,21 @@
         :param day: day
         :param text: text
         :return: True if success
         """
         current = self.provider.load(year, month, day)
         if current is None:
             current = self.build()
-            current.year = year
-            current.month = month
-            current.day = day
         if current.content is not None and current.content != "":
             current.content = current.content + "\n"
         if current.content is None:
             current.content = ""
+        current.year = year
+        current.month = month
+        current.day = day
         current.content += text
         self.provider.save(current)
         self.load(year, month, day)
         return True
 
     def update_note(self, year: int, month: int, day: int, text: str) -> bool:
         """
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/core/camera.py` & `pygpt_net-2.2.0/src/pygpt_net/core/camera.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/core/chain/__init__.py` & `pygpt_net-2.2.0/src/pygpt_net/core/chain/__init__.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/core/chain/chat.py` & `pygpt_net-2.2.0/src/pygpt_net/core/chain/chat.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/core/chain/completion.py` & `pygpt_net-2.2.0/src/pygpt_net/core/chain/completion.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/core/command.py` & `pygpt_net-2.2.0/src/pygpt_net/plugin/cmd_api/__init__.py`

 * *Files 26% similar despite different names*

```diff
@@ -2,257 +2,400 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.16 02:00:00                  #
+# Updated Date: 2024.03.12 06:00:00                  #
 # ================================================== #
 
 import json
+import ssl
+from urllib.parse import urlencode
+from urllib.request import Request, urlopen
 
+from pygpt_net.plugin.base import BasePlugin
+from pygpt_net.core.dispatcher import Event
 from pygpt_net.item.ctx import CtxItem
 
+from .worker import Worker
 
-class Command:
-    def __init__(self, window=None):
+
+class Plugin(BasePlugin):
+    def __init__(self, *args, **kwargs):
+        super(Plugin, self).__init__(*args, **kwargs)
+        self.id = "cmd_api"
+        self.name = "Command: API calls"
+        self.description = "Provides the ability to make external API calls"
+        self.order = 100
+        self.use_locale = True
+        self.init_options()
+
+    def init_options(self):
+        """Initialize options"""
+        keys = {
+            "enabled": "bool",
+            "name": "text",
+            "instruction": "textarea",
+            "get_params": "textarea",
+            "post_params": "textarea",
+            "post_json": "textarea",
+            "headers": "textarea",
+            "type": {
+                "type": "combo",
+                "keys": [
+                    {"GET": "GET"},
+                    {"POST": "POST"},
+                    {"POST_JSON": "POST_JSON"},
+                ],
+            },
+            "endpoint": "textarea",
+        }
+        items = [
+            {
+                "enabled": True,
+                "name": "search_wiki",
+                "instruction": "send API call to Wikipedia to search pages by query",
+                "get_params": "query, limit",
+                "post_params": "",
+                "post_json": "",
+                "headers": "",
+                "type": "GET",
+                "endpoint": 'https://en.wikipedia.org/w/api.php?action=opensearch&limit={limit}&format=json&search={query}',
+            },
+        ]
+        desc = "Add your custom API calls here"
+        tooltip = "See the documentation for more details about examples, usage and list of predefined placeholders"
+        self.add_option(
+            "cmds",
+            type="dict",
+            value=items,
+            label="Your custom API calls",
+            description=desc,
+            tooltip=tooltip,
+            keys=keys,
+        )
+        self.add_option(
+            "disable_ssl",
+            type="bool",
+            value=False,
+            label="Disable SSL verify",
+            description="Disables SSL verification when making calls to API",
+            tooltip="Disable SSL verify",
+        )
+        self.add_option(
+            "timeout",
+            type="int",
+            value=5,
+            label="Timeout",
+            description="Connection timeout (seconds)",
+            tooltip="Connection timeout (seconds)",
+        )
+        self.add_option(
+            "user_agent",
+            type="text",
+            value="Mozilla/5.0",
+            label="User agent",
+            description="User agent to use when making requests, default: Mozilla/5.0",
+            tooltip="User agent to use when making requests",
+        )
+
+    def setup(self) -> dict:
+        """
+        Return available config options
+
+        :return: config options
+        """
+        return self.options
+
+    def attach(self, window):
         """
-        Commands core
+        Attach window
 
         :param window: Window instance
         """
         self.window = window
 
-    def get_prompt(self, allow_custom: bool = True) -> str:
+    def handle(self, event: Event, *args, **kwargs):
         """
-        Return cmd prompt instruction
+        Handle dispatched event
 
-        :param allow_custom: allow custom prompt
-        :return: prompt instruction
+        :param event: event object
+        :param args: event args
+        :param kwargs: event kwargs
         """
-        cmd = '''RUNNING COMMANDS:
-        You can execute commands and also use them to run commands on the user's environment. 
-
-        Important rules:
-        1) List of available commands is defined below.
-        2) To execute defined command return JSON object with "cmd" key and command name as value.
-        3) Always use syntax defined in command definition and correct command name.
-        4) Put command parameters in "params" key. Example: {"cmd": "web", "params": {"query": "some query"}}. Use ONLY syntax like this. DO NOT use any other syntax.
-        5) Append JSON object to response at the end of response and split it with ~###~ character. Example: text response ~###~ {"cmd": "web", "params": {"query": "some query"}}.
-        6) If you want to execute command without any response, return only JSON object.
-        7) Responses from commands will be returned in "result" key.
-        8) Commands are listed one command per line and every command is described with syntax: "<name>": <action>, params: <params>
-        9) Always use correct command name, e.g. if command name is "sys_exec" then use "sys_exec" and don't imagine other names, like "run" or something.
-        10) With those commands you are allowed to run external commands and apps in user's system (environment)
-        11) Always use defined syntax to prevent errors
-        12) Always choose the most appropriate command from list to perform the task, based on the description of the action performed by a given comment
-        13) Reply to the user in the language in which he started the conversation with you
-        14) Use ONLY params described in command definition, do NOT use any additional params not described on list
-        15) ALWAYS remember that any text content must appear at the beginning of your response and commands must only be included at the end.
-        16) Try to run commands executed in the user's system in the background if running them may prevent receiving a response (e.g. when it is a desktop application)
-        17) Every command param must be placed in one line, so when you generate code you must put all of code in one line
-
-        Commands list:'''
-
-        # get custom prompt from config if exists
-        if allow_custom:
-            if self.window.core.config.has('cmd.prompt'):
-                prompt = self.window.core.config.get('cmd.prompt')
-                if prompt is not None and prompt != '':
-                    cmd = prompt
-
-        # Syntax for commands (example):
-        # cmd += '\n"save_file": save data to file, params: "filename", "data"'
-        # cmd += '\n"read_file": read data from file, params: "filename"'
-        return cmd
-
-    def append_syntax(self, data: dict) -> str:
-        """
-        Append command syntax to prompt
-
-        :param data: event data
-        :return: prompt with appended syntax
-        """
-        prompt = data['prompt']
-        for item in data['syntax']:
-            if isinstance(item, str):
-                prompt += '\n' + item
-            elif isinstance(item, dict):
-                prompt += '\n"' + item['cmd'] + '": ' + item['instruction']
-                if 'params' in item:
-                    if len(item['params']) > 0:
-                        prompt += ', params: "{}"'.format('", "'.join(item['params']))
-                if 'example' in item:
-                    if item['example'] is not None:
-                        prompt += ', example: "{}"'.format(item['example'])
-        return prompt
+        name = event.name
+        data = event.data
+        ctx = event.ctx
+
+        if name == Event.CMD_SYNTAX:
+            self.cmd_syntax(data)
 
-    def extract_cmds(self, text: str) -> list:
+        elif name == Event.CMD_EXECUTE:
+            self.cmd(
+                ctx,
+                data['commands'],
+            )
+
+    def cmd_syntax(self, data: dict):
         """
-        Extract commands from text
+        Event: CMD_SYNTAX
 
-        :param text: text to extract commands from
-        :return: list of commands (dict)
+        :param data: event data dict
         """
-        cmds = []
+        for item in self.get_option_value("cmds"):
+            if not item["enabled"]:
+                continue
+            cmd = {
+                "cmd": item["name"],
+                "instruction": item["instruction"],
+                "params": [],
+            }
+            # GET
+            if item["get_params"].strip() != "":
+                params = self.extract_params(item["get_params"])
+                if len(params) > 0:
+                    for param in params:
+                        cmd["params"].append(param)
+            # POST
+            if item["post_params"].strip() != "":
+                params = self.extract_params(item["post_params"])
+                if len(params) > 0:
+                    for param in params:
+                        cmd["params"].append(param)
+
+            data['cmd'].append(cmd)
+
+    def cmd(self, ctx: CtxItem, cmds: list):
+        """
+        Event: CMD_EXECUTE
+
+        :param ctx: CtxItem
+        :param cmds: commands dict
+        """
+        is_cmd = False
+        my_commands = []
+        for item in cmds:
+            for my_cmd in self.get_option_value("cmds"):
+                if not my_cmd["enabled"]:
+                    continue
+                if my_cmd["name"] == item["cmd"]:
+                    is_cmd = True
+                    my_commands.append(item)
+
+        if not is_cmd:
+            return
+
         try:
-            chunks = text.split('~###~')
-            for chunk in chunks:
-                cmd = self.extract_cmd(chunk)  # extract JSON string to dict
-                if cmd is not None:
-                    cmds.append(cmd)  # cmd = dict
+            # worker
+            worker = Worker()
+            worker.plugin = self
+            worker.cmds = my_commands
+            worker.ctx = ctx
+
+            # signals (base handlers)
+            worker.signals.finished.connect(self.handle_finished)
+            worker.signals.log.connect(self.handle_log)
+            worker.signals.debug.connect(self.handle_debug)
+            worker.signals.status.connect(self.handle_status)
+            worker.signals.error.connect(self.handle_error)
+
+            # check if async allowed
+            if not self.window.core.dispatcher.async_allowed(ctx):
+                worker.run()
+                return
+
+            # start
+            self.window.threadpool.start(worker)
+
         except Exception as e:
-            # do nothing
-            pass
-        return cmds
-
-    def extract_cmd(self, chunk: str) -> dict or None:
-        """
-        Extract command from text chunk (JSON string)
-
-        :param chunk: text chunk (JSON command string)
-        :return: command dict
-        """
-        cmd = None
-        chunk = chunk.strip()
-        if chunk and chunk.startswith('{') and chunk.endswith('}'):
-            try:
-                cmd = json.loads(chunk)
-            except json.JSONDecodeError as e:
-                # do nothing
-                pass
-        return cmd
-
-    def unpack_tool_calls(self, tool_calls: list) -> list:
-        """
-        Unpack tool calls from OpenAI response
-
-        :param tool_calls: tool calls list
-        :return: parsed tool calls list
-        """
-        parsed = []
-        for tool_call in tool_calls:
-            try:
-                parsed.append(
-                    {
-                        "id": tool_call.id,
-                        "type": "function",
-                        "function": {
-                            "name": tool_call.function.name,
-                            "arguments": json.loads(tool_call.function.arguments)
-                        }
-                    }
-                )
-            except Exception as e:
-                self.window.core.debug.log(e)
-                print("Error parsing tool call: " + str(e))
-        return parsed
-
-    def unpack_tool_calls_chunks(self, ctx: CtxItem, tool_calls: list):
-        """
-        Handle / unpack tool calls
-
-        :param ctx: context
-        :param tool_calls: tool calls
-        """
-        tmp_calls = []
-        for tool_call in tool_calls:
-            try:
-                if "function" not in tool_call:
-                    continue
-                if "arguments" not in tool_call["function"]:
-                    continue
-                tool_call["function"]["arguments"] = json.loads(
-                    tool_call["function"]["arguments"]
-                )
-                tmp_calls.append(tool_call)
-            except Exception as e:
-                self.window.core.debug.log(e)
-                print("Error parsing tool call JSON arguments: ", tool_call["function"]["arguments"])
-        ctx.tool_calls = tmp_calls
-
-    def tool_call_to_cmd(self, tool_call: dict) -> dict:
-        """
-        Convert tool call to command
-
-        :param tool_call: tool call
-        :return: command
-        """
-        return {
-            "cmd": tool_call["function"]["name"],
-            "params": tool_call["function"]["arguments"]
-        }
+            self.error(e)
 
-    def tool_calls_to_cmds(self, tool_calls: list) -> list:
+    def get_item(self, name: str) -> dict:
         """
-        Convert tool calls to commands
+        Get API call by name
 
-        :param tool_calls: tool calls
-        :return: commands
+        :param name: call name
+        :return: call dict
         """
-        cmds = []
-        for tool_call in tool_calls:
-            cmds.append(self.tool_call_to_cmd(tool_call))
-        return cmds
+        for item in self.get_option_value("cmds"):
+            if item["name"] == name:
+                return item
+        return {}
 
-    def pack_cmds(self, cmds: list) -> str:
+    def extract_params(self, text: str) -> list:
         """
-        Pack commands to string
+        Extract params from params string
 
-        :param cmds: commands
-        :return: packed commands string
+        :param text: text
+        :return: params list
         """
-        packed = ""
-        for cmd in cmds:
-            packed += "~###~" + json.dumps(cmd) + "~###~"
-        return packed
+        params = []
+        if text is None or text == "":
+            return params
+        params_list = text.split(",")
+        for param in params_list:
+            param = param.strip()
+            if param == "":
+                continue
+            params.append({
+                "name": param,
+                "type": "str",
+                "description": param,
+            })
+        return params
 
-    def append_tool_calls(self, ctx: CtxItem):
+    def call_get(self, url: str, extra_headers: dict = None) -> bytes:
         """
-        Append tool calls as CMD to context output
+        Call API with GET method
 
-        :param ctx: context item
+        :param url: URL
+        :param extra_headers: extra headers
+        :return: response data
         """
-        cmds = self.tool_calls_to_cmds(ctx.tool_calls)
-        cmds_str = self.pack_cmds(cmds)
-        if ctx.output is None:
-            ctx.output = ""
-        ctx.output += cmds_str
+        headers = {
+            'User-Agent': self.get_option_value("user_agent"),
+        }
+        if extra_headers is not None:
+            headers.update(extra_headers)
 
-    def get_tool_calls_outputs(self, ctx: CtxItem) -> list:
-        """
-        Prepare and get tool calls outputs
+        # log API call details
+        log_data = {
+            "url": url,
+            "headers": headers,
+            "type": "GET",
+        }
+        self.log(str(log_data))
 
-        :param ctx: context item
-        :return: list of tool calls outputs
-        """
-        outputs = []
-        idx_outputs = {}
-        for tool_call in ctx.tool_calls:
-            call_id = tool_call["id"]
-            idx_outputs[call_id] = ""
-        try:
-            responses = json.loads(ctx.input)  # response is JSON string in input
-            for tool_call in ctx.tool_calls:
-                call_id = tool_call["id"]
-                for response in responses:
-                    if "request" in response:
-                        if "cmd" in response["request"]:
-                            func_name = response["request"]["cmd"]
-                            if tool_call["function"]["name"] == func_name:
-                                idx_outputs[call_id] = response["result"]
+        # prepare request
+        req = Request(
+            url=url,
+            headers=headers,
+        )
+        if self.get_option_value('disable_ssl'):
+            context = ssl.create_default_context()
+            context.check_hostname = False
+            context.verify_mode = ssl.CERT_NONE
+            data = urlopen(
+                req,
+                context=context,
+                timeout=self.get_option_value('timeout'),
+            ).read()
+        else:
+            data = urlopen(
+                req,
+                timeout=self.get_option_value('timeout'),
+            ).read()
+        return data
+
+    def call_post(self, url: str, data: dict, extra_headers: dict = None) -> bytes:
+        """
+        Call API with POST method
+
+        :param url: URL
+        :param data: POST data dict
+        :param extra_headers: extra headers
+        :return: response data
+        """
+        headers = {
+            'User-Agent': self.get_option_value("user_agent"),
+            'Content-Type': 'application/x-www-form-urlencoded',
+        }
+        if extra_headers is not None:
+            headers.update(extra_headers)
 
-        except Exception as e:
-            self.window.core.debug.log(e)
+        # encode data
+        data = urlencode(data).encode()
 
-        for id in idx_outputs:
-            data = {
-                "tool_call_id": id,
-                "output": idx_outputs[id],
-            }
-            outputs.append(data)
+        # log API call details
+        log_data = {
+            "url": url,
+            "data": data,
+            "headers": headers,
+            "type": "POST",
+        }
+        self.log(str(log_data))
+
+        # prepare request
+        req = Request(
+            url=url,
+            data=data,
+            headers=headers,
+        )
+        if self.get_option_value('disable_ssl'):
+            context = ssl.create_default_context()
+            context.check_hostname = False
+            context.verify_mode = ssl.CERT_NONE
+            data = urlopen(
+                req,
+                context=context,
+                timeout=self.get_option_value('timeout'),
+            ).read()
+        else:
+            data = urlopen(
+                req,
+                timeout=self.get_option_value('timeout'),
+            ).read()
+        return data
+
+    def call_post_json(self, url: str, data: dict, extra_headers: dict = None) -> bytes:
+        """
+        Call API with POST method (JSON)
+
+        :param url: URL
+        :param data: POST data dict
+        :param extra_headers: extra headers
+        :return: response data
+        """
+        headers = {
+            'User-Agent': self.get_option_value("user_agent"),
+            'Content-Type': 'application/json',
+        }
+        if extra_headers is not None:
+            headers.update(extra_headers)
+
+        # encode data
+        data = json.dumps(data).encode()
+
+        # log API call details
+        log_data = {
+            "url": url,
+            "data": data,
+            "headers": headers,
+            "type": "POST JSON",
+        }
+        self.log(str(log_data))
 
-        if not isinstance(ctx.extra, dict):
-            ctx.extra = {}
-        ctx.extra["tool_calls_outputs"] = outputs
-        return outputs
+        # prepare request
+        req = Request(
+            url=url,
+            data=data,
+            headers=headers,
+        )
+        if self.get_option_value('disable_ssl'):
+            context = ssl.create_default_context()
+            context.check_hostname = False
+            context.verify_mode = ssl.CERT_NONE
+            data = urlopen(
+                req,
+                context=context,
+                timeout=self.get_option_value('timeout'),
+            ).read()
+        else:
+            data = urlopen(
+                req,
+                timeout=self.get_option_value('timeout'),
+            ).read()
+        return data
+
+    def log(self, msg: str):
+        """
+        Log message to console
+
+        :param msg: message to log
+        """
+        full_msg = '[API] ' + str(msg)
+        self.debug(full_msg)
+        self.window.ui.status(full_msg)
+        if self.is_log():
+            print(full_msg)
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/core/ctx/__init__.py` & `pygpt_net-2.2.0/src/pygpt_net/core/ctx/__init__.py`

 * *Files 20% similar despite different names*

```diff
@@ -2,22 +2,24 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.27 04:00:00                  #
+# Updated Date: 2024.04.17 07:00:00                  #
 # ================================================== #
 
+import copy
 import datetime
+import uuid
 
 from packaging.version import Version
 
-from pygpt_net.item.ctx import CtxItem, CtxMeta
+from pygpt_net.item.ctx import CtxItem, CtxMeta, CtxGroup
 from pygpt_net.provider.core.ctx.base import BaseProvider
 from pygpt_net.provider.core.ctx.db_sqlite import DbSqliteProvider
 from pygpt_net.utils import trans
 
 from .idx import Idx
 
 
@@ -40,27 +42,33 @@
         self.model = None
         self.preset = None
         self.run = None
         self.status = None
         self.thread = None
         self.last_mode = None
         self.last_model = None
+        self.tmp_meta = None
         self.search_string = None  # search string
+        self.groups = {}  # groups
         self.filters = {}  # search filters
+        self.filters_labels = []  # search labels
+        self.current_cmd = []  # current commands
+        self.current_cmd_schema = "" # current commands schema
         self.allowed_modes = {
             'chat': ["chat", "completion", "img", "langchain", "vision", "assistant", "llama_index", "agent"],
             'completion': ["chat", "completion", "img", "langchain", "vision", "assistant", "llama_index", "agent"],
             'img': ["img"],
             'langchain': ["chat", "completion", "img", "langchain", "vision", "assistant", "llama_index", "agent"],
             'vision': ["chat", "completion", "img", "langchain", "vision", "assistant", "llama_index", "agent"],
             'assistant': ["assistant"],
             'llama_index': ["chat", "completion", "img", "langchain", "vision", "assistant", "llama_index", "agent"],
             'agent': ["chat", "completion", "img", "langchain", "vision", "assistant", "llama_index", "agent"],
         }
         self.current_sys_prompt = ""
+        self.groups_loaded = False
 
     def install(self):
         """Install provider data"""
         self.provider.install()
 
     def patch(self, app_version: Version) -> bool:
         """
@@ -75,20 +83,24 @@
         """
         Get provider instance
 
         :return: provider instance
         """
         return self.provider
 
-    def select(self, id: int):
+    def select(self, id: int, restore_model: bool = True):
         """
         Select ctx meta by ID and load ctx items
 
         :param id: context meta id
+        :param restore_model: restore model
         """
+        if id not in self.meta:
+            self.load_tmp_meta(id)
+
         if id in self.meta:
             ctx = self.meta[id]
             self.current = id
 
             # reset
             self.thread = None
             self.mode = None
@@ -97,35 +109,37 @@
             # restore
             self.thread = ctx.thread
             self.mode = ctx.mode
             self.assistant = ctx.assistant
             self.preset = ctx.preset
 
             # restore model if exists in current mode
-            if ctx.last_model is not None \
-                    and self.window.core.models.has_model(self.mode, ctx.last_model):
-                self.model = ctx.last_model
-            elif ctx.model is not None \
-                    and self.window.core.models.has_model(self.mode, ctx.model):
-                self.model = ctx.model
+            if restore_model:
+                if ctx.last_model is not None \
+                        and self.window.core.models.has_model(self.mode, ctx.last_model):
+                    self.model = ctx.last_model
+                elif ctx.model is not None \
+                        and self.window.core.models.has_model(self.mode, ctx.model):
+                    self.model = ctx.model
 
             self.items = self.load(id)
 
-    def new(self) -> CtxMeta or None:
+    def new(self, group_id: int = None) -> CtxMeta or None:
         """
         Create new ctx and set as current
 
+        :param group_id: group id
         :return: CtxMeta instance (new ctx meta)
         """
-        meta = self.create()  # create new ctx meta
+        meta = self.create(group_id)  # create new ctx meta
         if meta is None:
             self.window.core.debug.log("Error creating new ctx")
             return
-
         self.meta[meta.id] = meta
+        self.tmp_meta = meta
         self.current = meta.id
         self.thread = None
         self.assistant = None
         self.mode = self.window.core.config.get('mode')
         self.model = self.window.core.config.get('model')
         self.preset = self.window.core.config.get('preset')
         self.items = []
@@ -145,39 +159,45 @@
         meta.mode = self.window.core.config.get('mode')
         meta.model = self.window.core.config.get('model')
         meta.last_mode = self.window.core.config.get('mode')
         meta.last_model = self.window.core.config.get('model')
         meta.initialized = False
         return meta
 
-    def create(self) -> CtxMeta:
+    def create(self, group_id: int = None) -> CtxMeta:
         """
         Send created meta to provider and return new ID
 
+        :param group_id: group id
         :return: CtxMeta instance
         """
         meta = self.build()
+        if group_id is not None:
+            meta.group_id = group_id
         id = self.provider.create(meta)
         meta.id = id
         return meta
 
     def add(self, item: CtxItem):
         """
         Add CtxItem to contexts and saves context
 
         :param item: CtxItem to append
         """
         self.items.append(item)  # add CtxItem to context items
 
         # append in provider
-        if self.current is not None and self.current in self.meta:
-            meta = self.meta[self.current]
-            result = self.provider.append_item(meta, item)
-            if not result:
-                self.store()  # if not stored, e.g. in JSON file provider, then store whole ctx (save all)
+        if self.current is not None:
+            if self.current not in self.meta:
+                self.load_tmp_meta(self.current)
+            if self.current in self.meta:
+                meta = self.meta[self.current]
+                result = self.provider.append_item(meta, item)
+                if not result:
+                    self.store()  # if not stored, e.g. in JSON file provider, then store whole ctx (save all)
 
     def update_item(self, item: CtxItem):
         """
         Update CtxItem in context
 
         :param item: CtxItem to update
         """
@@ -208,26 +228,39 @@
 
     def update(self):
         """
         Update current parent (when ctx item load from the list or setting mode)
         """
         self.mode = self.window.core.config.get('mode')
 
-        if self.current is None or self.current not in self.meta:
+        if self.current is None:
+            return
+
+        if self.current not in self.meta:
+            self.load_tmp_meta(self.current)
+
+        if self.current not in self.meta:
             return
+
         self.meta[self.current].mode = self.mode
         self.save(self.current)
 
     def post_update(self, mode: str):
         """
         Update current (last) ctx data
 
         :param mode: mode name
         """
-        if self.current is None or self.current not in self.meta:
+        if self.current is None:
+            return
+
+        if self.current not in self.meta:
+            self.load_tmp_meta(self.current)
+
+        if self.current not in self.meta:
             return
 
         # update current
         self.assistant = self.window.core.config.get('assistant')  # update assistant
         self.preset = self.window.core.config.get('preset')  # update preset
         self.model = self.window.core.config.get('model')  # get current model
 
@@ -247,21 +280,25 @@
         """
         Check if ctx is initialized (name assigned)
 
         :return: True if initialized, false otherwise
         """
         if self.current is None:
             return False
+        if self.current not in self.meta:
+            self.load_tmp_meta(self.current)
         if self.current in self.meta:
             return self.meta[self.current].initialized
 
     def set_initialized(self):
         """Set ctx as initialized (name assigned)"""
         if self.current is None:
             return
+        if self.current not in self.meta:
+            self.load_tmp_meta(self.current)
         if self.current in self.meta:
             self.meta[self.current].initialized = True
             self.save(self.current)
 
     def has(self, id: int) -> bool:
         """
         Check if ctx meta exists
@@ -279,18 +316,30 @@
 
         :param idx: item index
         :return: context item
         """
         if idx < len(self.items):
             return self.items[idx]
 
+    def get_item_by_id(self, id: int) -> CtxItem:
+        """
+        Return ctx item by id
+
+        :param id: item id
+        :return: context item
+        """
+        for item in self.items:
+            if item.id == id:
+                return item
+
     def get_meta(self, reload: bool = False) -> dict:
         """
         Get ctx items sorted descending by date
 
+        :param reload: True if reload from provider
         :return: ctx metas dict
         """
         if reload:
             self.load_meta()
         return self.meta
 
     def get_id_by_idx(self, idx: int) -> int:
@@ -329,31 +378,67 @@
     def get_meta_by_id(self, id: int) -> CtxMeta:
         """
         Return ctx meta by id
 
         :param id: ctx id
         :return: ctx meta object
         """
+        self.load_tmp_meta(id)
         if id in self.meta:
             return self.meta[id]
 
     def get_last(self) -> CtxItem or None:
         """
         Return last item from ctx
 
         :return: last ctx item
         """
         if len(self.items) > 0:
             return self.items[-1]
         return None
 
+    def is_first_item(self, item_id: int) -> bool:
+        """
+        Check if item is first in ctx
+
+        :param item_id: item id
+        :return: True if first
+        """
+        if len(self.items) > 0:
+            return self.items[0].id == item_id
+        return False
+
+    def is_last_item(self, item_id: int) -> bool:
+        """
+        Check if item is last in ctx
+
+        :param item_id: item id
+        :return: True if last
+        """
+        if len(self.items) > 0:
+            return self.items[-1].id == item_id
+        return False
+
+    def get_previous_item(self, item_id: int) -> CtxItem or None:
+        """
+        Get previous item from ctx
+
+        :param item_id: item id
+        :return: ctx item
+        """
+        for i in range(len(self.items)):
+            if self.items[i].id == item_id:
+                if i > 0:
+                    return self.items[i - 1]
+        return None
+
     def prepare(self):
         """Prepare context for prompt"""
         # if no contexts, create new one
-        if len(self.meta) == 0:
+        if self.count_meta() == 0:
             self.new()
 
     def count(self) -> int:
         """
         Count ctx items
 
         :return: ctx items count
@@ -362,15 +447,18 @@
 
     def count_meta(self) -> int:
         """
         Count ctx meta items
 
         :return: ctx meta count
         """
-        return len(self.meta)
+        extra = 0
+        if self.tmp_meta is not None:
+            extra = 1  # prevent create new if tmp meta exists
+        return len(self.meta) + extra
 
     def all(self) -> list:
         """
         Return ctx items
 
         :return: ctx items
         """
@@ -382,14 +470,35 @@
 
         :param id: ctx id
         """
         if id in self.meta:
             del self.meta[id]
             self.provider.remove(id)
 
+    def remove_item(self, id: int):
+        """
+        Remove ctx item by id
+
+        :param id: ctx id
+        """
+        for item in self.items:
+            if item.id == id:
+                self.items.remove(item)
+                self.provider.remove_item(id)
+                break
+
+    def remove_items_from(self, meta_id: int, item_id: int):
+        """
+        Remove ctx items from meta_id
+
+        :param meta_id: meta_id
+        :param item_id: item_id
+        """
+        return self.provider.remove_items_from(meta_id, item_id)
+
     def truncate(self):
         """Delete all ctx"""
         # empty ctx index
         self.meta = {}
 
         # remove all ctx data in provider
         self.provider.truncate()
@@ -403,27 +512,31 @@
         Append thread ID to ctx
 
         :param thread: thread ID
         """
         self.thread = thread
         if self.current is None:
             return
+        if self.current not in self.meta:
+            self.load_tmp_meta(self.current)
         if self.current in self.meta:
             self.meta[self.current].thread = self.thread
             self.save(self.current)
 
     def append_run(self, run):
         """
         Append run ID to ctx
 
         :param run: run ID
         """
         self.run = run
         if self.current is None:
             return
+        if self.current not in self.meta:
+            self.load_tmp_meta(self.current)
         if self.current in self.meta:
             self.meta[self.current].run = self.run
             self.save(self.current)
 
     def append_status(self, status: int):
         """
         Append status (label color) to ctx
@@ -571,15 +684,15 @@
         """
         Duplicate ctx and return new ctx id
 
         :param id: ctx id
         :return: new ctx id
         """
         if id in self.meta:
-            meta = self.create()
+            meta = self.create(self.meta[id].group_id)
             new_id = meta.id
             old_data = self.meta[id].to_dict()
             meta.from_dict(old_data)
             meta.id = new_id
             items = self.load(id)
             self.provider.save_all(meta.id, meta, items)
             return meta.id
@@ -642,78 +755,239 @@
             if meta.assistant is None:
                 return True
             # disallow if different assistant
             if meta.assistant != self.window.core.config.get('assistant'):
                 return False
         return True
 
+    def has_labels(self) -> bool:
+        """
+        Check if label query is needed
+
+        :return: True if labels not default
+        """
+        num_all = len(self.window.controller.ui.get_colors())
+        if len(self.filters_labels) < num_all:
+            return True
+        return False
+
     def load_meta(self):
         """Load ctx list from provider"""
         limit = 0
         if self.window.core.config.has('ctx.records.limit'):
             limit = int(self.window.core.config.get('ctx.records.limit') or 0)
 
-        # all items (pinned first)
-        if "is_important" not in self.filters and "label" not in self.filters and "indexed_ts" not in self.filters:
+        # display: all
+        if "is_important" not in self.filters and "indexed_ts" not in self.filters:
+            # pinned
+            filters_pinned = self.get_parsed_filters()
+            filters_pinned['is_important'] = {
+                "mode": "=",
+                "value": 1,
+            }
             meta_pinned = self.provider.get_meta(
                 search_string=self.search_string,
                 order_by='updated_ts',
                 order_direction='DESC',
                 limit=0,  # no limit for pinned
-                filters={
-                    'is_important': {
-                        "mode": "=",
-                        "value": 1,
-                    }
-                },
+                filters=filters_pinned,
                 search_content=self.is_search_content(),
             )
+
+            # not-pinned
+            filters = self.get_parsed_filters()
             meta_unpinned = self.provider.get_meta(
                 search_string=self.search_string,
                 order_by='updated_ts',
                 order_direction='DESC',
                 limit=limit,
-                filters=self.filters,
+                filters=filters,
                 search_content=self.is_search_content(),
             )
-            # join, pinned first
+
+            # join both, pinned first
             self.meta = {**meta_pinned, **meta_unpinned}
 
-        # pinned only
         else:
+            # display: important or indexed
+            filters = self.get_parsed_filters()
             self.meta = self.provider.get_meta(
                 search_string=self.search_string,
                 order_by='updated_ts',
                 order_direction='DESC',
                 limit=limit,
-                filters=self.filters,
+                filters=filters,
                 search_content=self.is_search_content(),
             )
 
+    def load_tmp_meta(self, meta_id: int):
+        """
+        Load tmp meta
+
+        :param meta_id: meta id
+        """
+        meta = self.provider.get_meta(
+            order_by='updated_ts',
+            order_direction='DESC',
+            limit=1,
+            filters={
+                "id": {
+                    "mode": "=",
+                    "value": meta_id,
+                },
+            }
+        )
+        if len(meta) > 0:
+            self.tmp_meta = list(meta.values())[0]
+            if self.tmp_meta.id not in self.meta:
+                # append at first position
+                self.meta = {self.tmp_meta.id: self.tmp_meta, **self.meta}
+
+    def clear_tmp_meta(self):
+        """Clear tmp meta"""
+        if self.tmp_meta is not None and self.current != self.tmp_meta.id:
+            self.tmp_meta = None
+
+
+    def get_parsed_filters(self) -> dict:
+        """
+        Get parsed filters
+
+        :return: parsed filters
+        """
+        filters = copy.deepcopy(self.filters)
+        if self.has_labels():
+            filters['label'] = {
+                "mode": "IN",
+                "value": self.filters_labels,  # append label colors
+            }
+        return filters
+
     def load(self, id: int) -> list:
         """
         Load ctx data from provider
 
         :param id: ctx id
         :return: ctx items list
         """
         return self.provider.load(id)
 
+    def load_groups(self):
+        """Load groups"""
+        self.groups = self.provider.get_groups()
+
+    def has_group(self, id: int) -> bool:
+        """
+        Check if group exists
+
+        :param id: group id
+        :return: True if exists
+        """
+        if id in self.groups:
+            return True
+        return False
+
+    def get_groups(self) -> dict:
+        """
+        Get groups
+
+        :return: groups
+        """
+        if not self.groups_loaded:
+            self.load_groups()
+            self.groups_loaded = True
+        return self.groups
+
+    def get_group_by_id(self, id: int) -> CtxGroup or None:
+        """
+        Get group by ID
+
+        :param id: group id
+        :return: group instance
+        """
+        if not self.groups_loaded:
+            self.load_groups()
+            self.groups_loaded = True
+        if id not in self.groups:
+            return None
+        return self.groups[id]
+
+    def remove_group(self, group: CtxGroup, all: bool = False):
+        """
+        Remove group
+
+        :param group: group instance
+        :param all: remove all items
+        """
+        self.provider.remove_group(group.id, all=all)
+        self.load_groups()
+
+    def truncate_groups(self):
+        """Remove all groups"""
+        self.provider.truncate_groups()
+        self.load_groups()
+
+    def make_group(self, name: str) -> CtxGroup:
+        """
+        Make group
+
+        :param name: group name
+        :return: group instance
+        """
+        group = CtxGroup()
+        group.uuid = str(uuid.uuid4())
+        group.name = name
+        return group
+
+    def insert_group(self, group: CtxGroup) -> int:
+        """
+        Insert group
+
+        :param group: group instance
+        :return: group id
+        """
+        id = self.provider.insert_group(group)
+        self.load_groups()
+        return id
+
+    def update_group(self, group: CtxGroup):
+        """
+        Update group
+
+        :param group: group instance
+        """
+        self.provider.update_group(group)
+        self.load_groups()
+
+    def update_meta_group_id(self, id: int, group_id: int):
+        """
+        Update meta group ID
+
+        :param id: meta id
+        :param group_id: group id
+        """
+        meta = self.get_meta_by_id(id)
+        if meta is None:
+            return
+        meta.group_id = group_id
+        self.provider.update_meta_group_id(id, group_id)
+        self.load_groups()
+
     def get_items_by_id(self, id: int) -> list:
         """
         Get ctx items by id
 
         :param id: ctx id
         :return: ctx items list
         """
         items = self.provider.load(id)
         data = []
         for item in items:
             # data.append("Me: " + str(item.input) + "\n" + "You: " + str(item.output) + "\n")
-            data.append("User: " + str(item.input) + "\n" + "Assistant: " + str(item.output) + "\n")
+            data.append("Human: " + str(item.input) + "\n" + "Assistant: " + str(item.output) + "\n")
         return data
 
     def get_list_in_date_range(self, search_string, limit: int = 0) -> list:
         """
         Get ctx list in date range
 
         :param search_string: search string
@@ -756,17 +1030,65 @@
         if not self.window.core.config.get('store_history'):
             return
 
         self.provider.save(id, self.meta[id], self.items)
 
     def store(self):
         """Store current ctx"""
-        if self.current is not None and self.current in self.meta:
-            self.save(self.current)
+        if self.current is not None:
+            if self.current not in self.meta:
+                self.load_tmp_meta(self.current)
+            if self.current in self.meta:
+                self.save(self.current)
+
+    def as_previous(self, ctx: CtxItem) -> CtxItem:
+        """
+        Prepare previous context item and clear current reply results
+
+        :param ctx: CtxItem instance (current)
+        :return: CtxItem instance (previous)
+        """
+        prev_ctx = CtxItem()
+        prev_ctx.urls = copy.deepcopy(ctx.urls)
+        prev_ctx.images = copy.deepcopy(ctx.images)
+        prev_ctx.files = copy.deepcopy(ctx.files)
+        prev_ctx.attachments = copy.deepcopy(ctx.attachments)
+        prev_ctx.results = copy.deepcopy(ctx.results)
+        prev_ctx.index_meta = copy.deepcopy(ctx.index_meta)
+        prev_ctx.doc_ids = copy.deepcopy(ctx.doc_ids)
+
+        ctx.clear_reply()  # clear current reply result
+        ctx.from_previous()  # get result from previous if exists
+        return prev_ctx
 
     def dump(self, ctx: CtxItem) -> str:
         """
         Dump context item
 
         :param ctx: CtxItem instance
         """
         return self.provider.dump(ctx)
+
+    def reset(self):
+        """Reset all data"""
+        self.meta = {}
+        self.items = []
+        self.current = None
+        self.last_item = None
+        self.assistant = None
+        self.mode = None
+        self.model = None
+        self.preset = None
+        self.run = None
+        self.status = None
+        self.thread = None
+        self.last_mode = None
+        self.last_model = None
+        self.tmp_meta = None
+        self.search_string = None  # search string
+        self.groups = {}  # groups
+        self.filters = {}  # search filters
+        self.filters_labels = []  # search labels
+        self.current_cmd = []  # current commands
+        self.current_cmd_schema = ""  # current commands schema
+        self.current_sys_prompt = ""
+        self.groups_loaded = False
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/core/ctx/idx.py` & `pygpt_net-2.2.0/src/pygpt_net/core/ctx/idx.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/core/debug/__init__.py` & `pygpt_net-2.2.0/src/pygpt_net/core/debug/__init__.py`

 * *Files 18% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.22 02:00:00                  #
+# Updated Date: 2024.03.25 15:00:00                  #
 # ================================================== #
 
 import os
 import sys
 import traceback
 import logging
 
@@ -27,25 +27,25 @@
         :param window: Window instance
         """
         self.window = window
 
     @staticmethod
     def init(level: int = logging.ERROR):
         """
-        Initialize error handler
+        Initialize logger and error handler
 
         :param level: log level (default: ERROR)
         """
-        if not os.path.exists(os.path.join(Path.home(), '.config', Config.CONFIG_DIR)):
-            os.makedirs(os.path.join(Path.home(), '.config', Config.CONFIG_DIR))
+        if not Config.prepare_workdir():
+            os.makedirs(Config.prepare_workdir())
 
         logging.basicConfig(
             level=level,
             format='%(asctime)s - %(levelname)s - %(message)s',
-            filename=str(Path(os.path.join(Path.home(), '.config', Config.CONFIG_DIR, 'app.log'))),
+            filename=str(Path(os.path.join(Config.prepare_workdir(), 'app.log'))),
             filemode='a',
             encoding='utf-8',
         )
 
         def handle_exception(exc_type, value, tb):
             """
             Handle uncaught exception
@@ -61,14 +61,29 @@
                 traceback.print_exception(exc_type, value, tb)
                 del logging._is_handling_exception  # remove flag when done
             else:
                 traceback.print_exception(exc_type, value, tb)
 
         sys.excepthook = handle_exception
 
+    def update_logger_path(self):
+        """Update log file path"""
+        path = os.path.join(Config.prepare_workdir(), 'app.log')
+        level = self.get_log_level()
+        logger = logging.getLogger()
+        for handler in logger.handlers[:]:
+            logger.removeHandler(handler)
+            handler.close()
+        file_handler = logging.FileHandler(filename=Path(path), mode='a', encoding='utf-8')
+        formatter = logging.Formatter('%(asctime)s - %(levelname)s - %(message)s')
+        file_handler.setFormatter(formatter)
+        file_handler.setLevel(level)
+        logger.setLevel(level)
+        logger.addHandler(file_handler)
+
     def switch_log_level(self, level: int):
         """
         Set log level
 
         :param level: log level
         """
         logging.getLogger().setLevel(level)
@@ -180,18 +195,20 @@
             if isinstance(message, str):
                 logger.log(level, message)
                 if self.has_level(level) and console:
                     print(message)
 
             # exception
             elif isinstance(message, Exception):
-                data = self.parse_exception()
+                is_sys, data = self.parse_exception(message)
                 msg = "Exception: {}".format(str(message))
-                logger.log(level, msg, exc_info=True)
-                if self.has_level(level) and console:
+                if not is_sys:
+                    msg += "\n{}".format(data)
+                logger.log(level, msg, exc_info=is_sys)
+                if self.has_level(level) and console and data:
                     print(data)
 
             # other messages
             else:
                 logger.log(level, message)
                 if self.has_level(level) and console:
                     print(message)
@@ -201,32 +218,66 @@
         try:
             # send to logger window
             if self.window is not None:
                 self.window.logger_message.emit(message)
         except Exception as e:
             pass
 
-    def parse_exception(self, limit: int = 4) -> str:
+    def parse_exception(self, e = None, limit: int = 4) -> (bool, str):
         """
         Parse exception traceback
 
+        :param e: exception
         :param limit: limit of traceback
-        :return: parsed exception as string
+        :return: sys error, parsed exception as string
         """
-        etype, value, tb = sys.exc_info()
+        is_sys = False
+        type_name = ""
+        etype, value, tb = sys.exc_info()  # from sys by default
+        if etype is None and e is not None:
+            tb = e.__traceback__  # from exception
+            type_name = type(e).__name__
+            value = str(e)
+        else:
+            if etype is not None:
+                is_sys = True
+                type_name = etype.__name__
+
+        # traceback
         traceback_details = traceback.extract_tb(tb)
         if len(traceback_details) >= limit:
             last_calls = traceback_details[-limit:]
         else:
             last_calls = traceback_details
-        formatted_traceback = ''.join(traceback.format_list(last_calls))
-        data = f"Type: {etype.__name__}, Message: " \
-               f"{value}\n" \
-               f"Traceback:\n{formatted_traceback}"
-        return data
+        formatted_traceback = ""
+        if last_calls:
+            formatted_traceback = "".join(traceback.format_list(last_calls))
+
+        # parse data
+        data = ""
+        if type_name:
+            data += "Type: {}".format(type_name)
+        if value:
+            data += "Message: {}".format(value)
+        if formatted_traceback:
+            data += "\nTraceback: {}".format(formatted_traceback)
+
+        return is_sys, data
+
+    def parse_alert(self, msg: any) -> str:
+        """
+        Parse alert message
+
+        :param msg: message to parse
+        :return: parsed message
+        """
+        if isinstance(msg, Exception):
+            is_sys, data = self.parse_exception(msg)
+            return "Exception: {}\n{}".format(str(msg), data)
+        return str(msg)
 
     def has_level(self, level: int) -> bool:
         """
         Check if logging level is enabled
 
         :param level: logging level
         :return: True if enabled
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/core/debug/agent.py` & `pygpt_net-2.2.0/src/pygpt_net/core/debug/agent.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/core/debug/assistants.py` & `pygpt_net-2.2.0/src/pygpt_net/core/debug/assistants.py`

 * *Files 11% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.25 22:00:00                  #
+# Updated Date: 2024.04.26 23:00:00                  #
 # ================================================== #
 
 
 class AssistantsDebug:
     def __init__(self, window=None):
         """
         Assistants debug
@@ -50,8 +50,13 @@
                 'meta': assistant.meta,
                 'tools': assistant.tools,
                 'files': assistant.files,
                 'tools[function]': assistant.tools['function']
             }
             self.window.core.debug.add(self.id, str(assistant.name), str(data))
 
+        self.window.core.debug.add(self.id, '----', '')
+
+        self.window.core.debug.add(self.id, 'Store (items)', str(self.window.core.assistants.store.items))
+        #self.window.core.debug.add(self.id, 'Store (items)', str(self.window.core.assistants.store.items))
+
         self.window.core.debug.end(self.id)
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/core/debug/attachments.py` & `pygpt_net-2.2.0/src/pygpt_net/core/debug/attachments.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/core/debug/config.py` & `pygpt_net-2.2.0/src/pygpt_net/core/debug/models.py`

 * *Files 20% similar despite different names*

```diff
@@ -8,37 +8,48 @@
 # Created By  : Marcin Szczygliński                  #
 # Updated Date: 2024.02.25 22:00:00                  #
 # ================================================== #
 
 import os
 
 
-class ConfigDebug:
+class ModelsDebug:
     def __init__(self, window=None):
         """
-        Config debug
+        Models debug
 
         :param window: Window instance
         """
         self.window = window
-        self.id = 'config'
+        self.id = 'models'
 
     def update(self):
         """Update debug window."""
         self.window.core.debug.begin(self.id)
 
-        path = os.path.join(self.window.core.config.path, '', 'config.json')
-        self.window.core.debug.add(self.id, 'Config File', str(path))
-        self.window.core.debug.add(
-            self.id, 'Sections',
-            str(self.window.controller.settings.editor.get_sections())
-        )
+        path = os.path.join(self.window.core.config.path, '', 'models.json')
+        self.window.core.debug.add(self.id, 'Models File', str(path))
+
         self.window.core.debug.add(
             self.id, 'Options',
-            str(self.window.controller.settings.editor.get_options())
+            str(self.window.controller.model.editor.get_options())
         )
 
-        # config data
-        for key in self.window.core.config.all():
-            self.window.core.debug.add(self.id, key, str(self.window.core.config.get(key)))
+        # models
+        for key in self.window.core.models.items:
+            if key == '__meta__':
+                self.window.core.debug.add(self.id, '__meta__', str(self.window.core.models.items[key]))
+                continue
+            model = self.window.core.models.items[key]
+            data = {
+                'id': model.id,
+                'name': model.name,
+                'mode': model.mode,
+                'langchain': model.langchain,
+                'llama_index': model.llama_index,
+                'tokens': model.tokens,
+                'ctx': model.ctx,
+                'default': model.default,
+            }
+            self.window.core.debug.add(self.id, str(key), str(data))
 
         self.window.core.debug.end(self.id)
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/core/debug/context.py` & `pygpt_net-2.2.0/src/pygpt_net/core/debug/context.py`

 * *Files 14% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.27 18:00:00                  #
+# Updated Date: 2024.04.14 05:00:00                  #
 # ================================================== #
 
 class ContextDebug:
     def __init__(self, window=None):
         """
         Context debug
 
@@ -21,27 +21,33 @@
 
     def update(self):
         """Update debug window"""
         self.window.core.debug.begin(self.id)
         self.window.core.debug.add(self.id, 'current (id)', str(self.window.core.ctx.current))
         self.window.core.debug.add(self.id, 'len(meta)', len(self.window.core.ctx.meta))
         self.window.core.debug.add(self.id, 'len(items)', len(self.window.core.ctx.items))
+        if self.window.core.ctx.tmp_meta is not None:
+            self.window.core.debug.add(self.id, 'tmp meta', str(self.window.core.ctx.tmp_meta.to_dict()))
+        self.window.core.debug.add(self.id, 'group_id (active)', str(self.window.controller.ctx.group_id))
         self.window.core.debug.add(self.id, 'assistant', str(self.window.core.ctx.assistant))
         self.window.core.debug.add(self.id, 'mode', str(self.window.core.ctx.mode))
         self.window.core.debug.add(self.id, 'model', str(self.window.core.ctx.model))
         self.window.core.debug.add(self.id, 'preset', str(self.window.core.ctx.preset))
         self.window.core.debug.add(self.id, 'run', str(self.window.core.ctx.run))
         self.window.core.debug.add(self.id, 'status', str(self.window.core.ctx.status))
         self.window.core.debug.add(self.id, 'thread', str(self.window.core.ctx.thread))
         self.window.core.debug.add(self.id, 'last_mode', str(self.window.core.ctx.last_mode))
         self.window.core.debug.add(self.id, 'last_model', str(self.window.core.ctx.last_model))
         self.window.core.debug.add(self.id, 'search_string', str(self.window.core.ctx.search_string))
         self.window.core.debug.add(self.id, 'filters', str(self.window.core.ctx.filters))
+        self.window.core.debug.add(self.id, 'filters_labels', str(self.window.core.ctx.filters_labels))
         self.window.core.debug.add(self.id, 'sys_prompt (current)', str(self.window.core.ctx.current_sys_prompt))
         self.window.core.debug.add(self.id, 'allowed_modes', str(self.window.core.ctx.allowed_modes))
+        self.window.core.debug.add(self.id, 'CMD (current)', str(self.window.core.ctx.current_cmd))
+        self.window.core.debug.add(self.id, 'CMD schema (current)', str(self.window.core.ctx.current_cmd_schema))
 
         current = None
         if self.window.core.ctx.current is not None:
             if self.window.core.ctx.current in self.window.core.ctx.meta:
                 current = self.window.core.ctx.meta[self.window.core.ctx.current]
             if current is not None:
                 data = current.to_dict()
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/core/debug/indexes.py` & `pygpt_net-2.2.0/src/pygpt_net/core/debug/ui.py`

 * *Files 25% similar despite different names*

```diff
@@ -2,79 +2,73 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.27 04:00:00                  #
+# Updated Date: 2024.02.25 22:00:00                  #
 # ================================================== #
 
-import datetime
-import os
 
-
-class IndexesDebug:
+class UIDebug:
     def __init__(self, window=None):
         """
-        Indexes debug
+        UI debug
 
         :param window: Window instance
         """
         self.window = window
-        self.id = 'indexes'
+        self.id = 'ui'
+
+    def map_structure(self, d, show_value: bool = False):
+        """
+        Map dict structure
+
+        :param d: data to map
+        :param show_value: show value
+        :return: mapped structure
+        """
+        if isinstance(d, dict):
+            return {k: self.map_structure(v, show_value) for k, v in d.items()}
+        elif isinstance(d, list):
+            return [self.map_structure(item, show_value) for item in d]
+        else:
+            if show_value:
+                return d
+            else:
+                return type(d).__name__
+
+    def update_section(self, items: dict, name: str):
+        """
+        Update debug items
+
+        :param items: items
+        :param name: name
+        """
+        self.window.core.debug.add(self.id, 'ui.' + name, str(self.map_structure(items)))
 
     def update(self):
-        """Update debug window."""
+        """Update debug window"""
         self.window.core.debug.begin(self.id)
-        self.window.core.debug.add(self.id, 'Current storage:', str(self.window.core.idx.get_current_store()))
-        self.window.core.debug.add(self.id, 'Current idx:', str(self.window.controller.idx.current_idx))
 
-        for store in self.window.core.idx.items:
-            name = "Items (files): " + store
-            indexes_data = {}
-            for idx in self.window.core.idx.items[store]:
-                indexes_data[idx] = len(self.window.core.idx.items[store][idx].items)
-            if len(indexes_data) > 0:
-                self.window.core.debug.add(self.id, name, str(indexes_data))
-
-        self.window.core.debug.add(self.id, 'Storage (idx):',
-                                   str(list(self.window.core.idx.storage.indexes.keys())))
-        self.window.core.debug.add(self.id, 'Storage (storage):',
-                                   str(list(self.window.core.idx.storage.storages.keys())))
-
-        # loaders
-        self.window.core.debug.add(self.id, 'Offline loaders [files]:',
-                                   str(list(self.window.core.idx.indexing.loaders["file"].keys())))
-        self.window.core.debug.add(self.id, 'Offline loaders [web]:',
-                                   str(list(self.window.core.idx.indexing.loaders["web"].keys())))
-        self.window.core.debug.add(self.id, 'External instructions [web]:',
-                                   str(self.window.core.idx.indexing.external_instructions))
-
-        # indexes
-        indexes = self.window.core.idx.get_all()
-        for key in list(indexes):
-            path = os.path.join(self.window.core.config.get_user_dir('idx'), key)
-            idx = indexes[key]
-            self.window.core.debug.add(self.id, '----', '')
-            idx_data = {
-                'id': idx.id,
-                'store': idx.store,
-                'path': path,
-                'items': len(idx.items),
-            }
-            self.window.core.debug.add(self.id, 'IDX: [' + str(key) + ']', str(idx_data))
-
-            # files
-            items = idx.items
-            for item_id in items:
-                item = items[item_id]
-                indexed_dt = datetime.datetime.fromtimestamp(item['indexed_ts'])
-                data = {
-                    'id': item['id'],
-                    'path': item['path'],
-                    'indexed_at': str(item['indexed_ts']) + ' (' + str(indexed_dt) + ')',
-                    'file_id': item_id,
-                }
-                self.window.core.debug.add(self.id, item_id, str(data))
+        self.window.core.debug.add(
+            self.id, '*lang_mapping',
+            str(self.map_structure(self.window.controller.lang.mapping.get_mapping(), True))
+        )
+
+        self.update_section(self.window.ui.config, 'config')
+        self.update_section(self.window.ui.debug, 'debug')
+        self.update_section(self.window.ui.dialog, 'dialog')
+        self.update_section(self.window.ui.editor, 'editor')
+        self.update_section(self.window.ui.groups, 'groups')
+        self.update_section(self.window.ui.hooks, 'hooks')
+        self.update_section(self.window.ui.menu, 'menu')
+        self.update_section(self.window.ui.models, 'models')
+        self.update_section(self.window.ui.nodes, 'nodes')
+        self.update_section(self.window.ui.notepad, 'notepad')
+        self.update_section(self.window.ui.paths, 'paths')
+        self.update_section(self.window.ui.plugin_addon, 'plugin_addon')
+        self.update_section(self.window.ui.splitters, 'splitters')
+        self.update_section(self.window.ui.tabs, 'tabs')
 
         self.window.core.debug.end(self.id)
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/core/debug/models.py` & `pygpt_net-2.2.0/src/pygpt_net/core/debug/presets.py`

 * *Files 23% similar despite different names*

```diff
@@ -8,48 +8,51 @@
 # Created By  : Marcin Szczygliński                  #
 # Updated Date: 2024.02.25 22:00:00                  #
 # ================================================== #
 
 import os
 
 
-class ModelsDebug:
+class PresetsDebug:
     def __init__(self, window=None):
         """
-        Models debug
+        Presets debug
 
         :param window: Window instance
         """
         self.window = window
-        self.id = 'models'
+        self.id = 'presets'
 
     def update(self):
         """Update debug window."""
         self.window.core.debug.begin(self.id)
 
-        path = os.path.join(self.window.core.config.path, '', 'models.json')
-        self.window.core.debug.add(self.id, 'Models File', str(path))
-
         self.window.core.debug.add(
             self.id, 'Options',
-            str(self.window.controller.model.editor.get_options())
+            str(self.window.controller.presets.editor.get_options())
         )
 
-        # models
-        for key in self.window.core.models.items:
-            if key == '__meta__':
-                self.window.core.debug.add(self.id, '__meta__', str(self.window.core.models.items[key]))
-                continue
-            model = self.window.core.models.items[key]
+        # presets
+        for key in list(dict(self.window.core.presets.items)):
+            preset = self.window.core.presets.items[key]
+            path = os.path.join(self.window.core.config.path, 'presets', key + '.json')
             data = {
-                'id': model.id,
-                'name': model.name,
-                'mode': model.mode,
-                'langchain': model.langchain,
-                'llama_index': model.llama_index,
-                'tokens': model.tokens,
-                'ctx': model.ctx,
-                'default': model.default,
+                'id': key,
+                'file': path,
+                'name': preset.name,
+                'ai_name': preset.ai_name,
+                'user_name': preset.user_name,
+                'prompt': preset.prompt,
+                'chat': preset.chat,
+                'completion': preset.completion,
+                'img': preset.img,
+                'vision': preset.vision,
+                'langchain': preset.langchain,
+                'assistant': preset.assistant,
+                'llama_index': preset.llama_index,
+                'agent': preset.agent,
+                'temperature': preset.temperature,
+                'version': preset.version,
             }
             self.window.core.debug.add(self.id, str(key), str(data))
 
         self.window.core.debug.end(self.id)
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/core/debug/plugins.py` & `pygpt_net-2.2.0/src/pygpt_net/core/debug/plugins.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/core/debug/ui.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/menu/file.py`

 * *Files 26% similar despite different names*

```diff
@@ -2,73 +2,67 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.25 22:00:00                  #
+# Updated Date: 2024.04.17 07:00:00                  #
 # ================================================== #
 
+from PySide6.QtGui import QAction, QIcon
 
-class UIDebug:
+from pygpt_net.utils import trans
+import pygpt_net.icons_rc
+
+
+class File:
     def __init__(self, window=None):
         """
-        UI debug
+        Menu setup
 
         :param window: Window instance
         """
         self.window = window
-        self.id = 'ui'
 
-    def map_structure(self, d, show_value: bool = False):
-        """
-        Map dict structure
-
-        :param d: data to map
-        :param show_value: show value
-        :return: mapped structure
-        """
-        if isinstance(d, dict):
-            return {k: self.map_structure(v, show_value) for k, v in d.items()}
-        elif isinstance(d, list):
-            return [self.map_structure(item, show_value) for item in d]
-        else:
-            if show_value:
-                return d
-            else:
-                return type(d).__name__
+    def setup(self):
+        """Setup file menu"""
+        self.window.ui.menu['app.exit'] = QAction(QIcon(":/icons/logout.svg"), trans("menu.file.exit"),
+                                                  self.window, shortcut="Ctrl+Q", triggered=self.window.close)
+        self.window.ui.menu['app.exit'].setMenuRole(QAction.MenuRole.NoRole)
+
+        self.window.ui.menu['app.clear_history'] = QAction(QIcon(":/icons/delete.svg"),
+                                                           trans("menu.file_clear_history"), self.window)
+        self.window.ui.menu['app.clear_history_groups'] = QAction(QIcon(":/icons/delete.svg"),
+                                                           trans("menu.file_clear_history_groups"), self.window)
+
+        self.window.ui.menu['app.ctx.new'] = QAction(QIcon(":/icons/add.svg"), trans("menu.file.new"), self.window)
+        self.window.ui.menu['app.ctx.group.new'] = QAction(QIcon(":/icons/folder_filled.svg"),
+                                                           trans("menu.file.group.new"), self.window)
+        self.window.ui.menu['app.ctx.current'] = QAction(QIcon(":/icons/fullscreen.svg"), trans("menu.file.current"), self.window)
 
-    def update_section(self, items: dict, name: str):
-        """
-        Update debug items
+        self.window.ui.menu['app.clear_history'].triggered.connect(
+            lambda: self.window.controller.ctx.delete_history()
+        )
+        self.window.ui.menu['app.clear_history_groups'].triggered.connect(
+            lambda: self.window.controller.ctx.delete_history_groups()
+        )
 
-        :param items: items
-        :param name: name
-        """
-        self.window.core.debug.add(self.id, 'ui.' + name, str(self.map_structure(items)))
+        self.window.ui.menu['app.ctx.new'].triggered.connect(
+            lambda: self.window.controller.ctx.new_ungrouped()
+        )  # new context without group
 
-    def update(self):
-        """Update debug window"""
-        self.window.core.debug.begin(self.id)
-
-        self.window.core.debug.add(
-            self.id, '*lang_mapping',
-            str(self.map_structure(self.window.controller.lang.mapping.get_mapping(), True))
+        self.window.ui.menu['app.ctx.group.new'].triggered.connect(
+            lambda: self.window.controller.ctx.new_group()
         )
 
-        self.update_section(self.window.ui.config, 'config')
-        self.update_section(self.window.ui.debug, 'debug')
-        self.update_section(self.window.ui.dialog, 'dialog')
-        self.update_section(self.window.ui.editor, 'editor')
-        self.update_section(self.window.ui.groups, 'groups')
-        self.update_section(self.window.ui.hooks, 'hooks')
-        self.update_section(self.window.ui.menu, 'menu')
-        self.update_section(self.window.ui.models, 'models')
-        self.update_section(self.window.ui.nodes, 'nodes')
-        self.update_section(self.window.ui.notepad, 'notepad')
-        self.update_section(self.window.ui.paths, 'paths')
-        self.update_section(self.window.ui.plugin_addon, 'plugin_addon')
-        self.update_section(self.window.ui.splitters, 'splitters')
-        self.update_section(self.window.ui.tabs, 'tabs')
-
-        self.window.core.debug.end(self.id)
+        self.window.ui.menu['app.ctx.current'].triggered.connect(
+            lambda: self.window.controller.ctx.select_by_current()
+        )  # new context without group
+
+        self.window.ui.menu['menu.app'] = self.window.menuBar().addMenu(trans("menu.file"))
+        self.window.ui.menu['menu.app'].addAction(self.window.ui.menu['app.ctx.new'])
+        self.window.ui.menu['menu.app'].addAction(self.window.ui.menu['app.ctx.group.new'])
+        self.window.ui.menu['menu.app'].addAction(self.window.ui.menu['app.ctx.current'])
+        self.window.ui.menu['menu.app'].addAction(self.window.ui.menu['app.clear_history'])
+        self.window.ui.menu['menu.app'].addAction(self.window.ui.menu['app.clear_history_groups'])
+        self.window.ui.menu['menu.app'].addAction(self.window.ui.menu['app.exit'])
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/core/dispatcher.py` & `pygpt_net-2.2.0/src/pygpt_net/core/dispatcher.py`

 * *Files 12% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.03.04 20:00:00                  #
+# Updated Date: 2024.02.25 12:00:00                  #
 # ================================================== #
 
 import json
 
 from PySide6.QtWidgets import QApplication
 
 from pygpt_net.item.ctx import CtxItem
@@ -19,14 +19,15 @@
 class Event:
 
     # Events
     AI_NAME = "ai.name"
     AUDIO_INPUT_RECORD_START = "audio.input.record.start"  # start audio input recording
     AUDIO_INPUT_RECORD_STOP = "audio.input.record.stop"  # stop audio input recording
     AUDIO_INPUT_RECORD_TOGGLE = "audio.input.record.toggle"  # toggle audio input recording
+    AUDIO_INPUT_TRANSCRIBE = "audio.input.transcribe"  # transcribe audio file
     AUDIO_INPUT_STOP = "audio.input.stop"
     AUDIO_INPUT_TOGGLE = "audio.input.toggle"
     AUDIO_OUTPUT_STOP = "audio.output.stop"
     AUDIO_OUTPUT_TOGGLE = "audio.output.toggle"
     AUDIO_READ_TEXT = "audio.read_text"
     CMD_EXECUTE = "cmd.execute"
     CMD_INLINE = "cmd.inline"
@@ -107,14 +108,16 @@
         """
         Event dispatcher
 
         :param window: Window instance
         """
         self.window = window
         self.nolog_events = ["system.prompt"]
+        self.reply_stack = []
+        self.reply_ctx = None
 
     def is_log(self, event: Event) -> bool:
         """
         Check if event can be logged
 
         :param event: event object
         :return: true if can be logged
@@ -203,40 +206,73 @@
         """
         if id in self.window.core.plugins.plugins:
             try:
                 self.window.core.plugins.plugins[id].handle(event)
             except AttributeError:
                 pass
 
-    def reply(self, ctx: CtxItem):
+    def reply(self, ctx: CtxItem, flush: bool = False):
         """
         Send reply from plugins to model
 
         :param ctx: context object
+        :param flush: True to flush reply stack
         """
         if ctx is not None:
             self.window.core.debug.info("Reply...")
             if self.window.core.debug.enabled() and self.is_log_display():
                 self.window.core.debug.debug("CTX REPLY: " + str(ctx))
-
-            self.window.ui.status("")  # clear status
             if ctx.reply:
-                # if agent mode is enabled, add +1 run if sending reply
-                if ctx.internal:
-                    if self.window.controller.agent.enabled():
-                        self.window.controller.agent.add_run()
-                        self.window.controller.agent.update()
-                        QApplication.processEvents()
-
-                # prepare data to send
-                data = json.dumps(ctx.results)
-                if ctx.extra_ctx:
-                    data = ctx.extra_ctx  # if extra content is set, use it as data to send
-
-                self.window.core.ctx.update_item(ctx)  # update context in db
-                self.window.ui.status('...')
-                self.window.controller.chat.input.send(
-                    data,
-                    force=True,
-                    reply=True,
-                    internal=ctx.internal,
-                )
+                self.add_reply(ctx)
+            if flush or self.window.core.dispatcher.async_allowed(ctx):
+                self.flush_reply_stack()
+
+    def add_reply(self, ctx: CtxItem):
+        """
+        Add reply to stack
+
+        :param ctx: context object
+        """
+        self.window.core.debug.info("Reply stack (add)...")
+        self.reply_stack.append(ctx.results)
+        ctx.results = []  # clear results
+        self.reply_ctx = ctx
+
+    def flush_reply_stack(self):
+        """Flush reply stack"""
+        if self.reply_ctx is None or len(self.reply_stack) == 0:
+            return
+        self.window.core.debug.info("Reply stack (flush)...")
+        results = []
+        for responses in self.reply_stack:
+            for result in responses:
+                results.append(result)
+
+        self.window.ui.status("")  # clear status
+        if self.reply_ctx.internal:
+            if self.window.controller.agent.enabled():
+                self.window.controller.agent.add_run()
+                self.window.controller.agent.update()
+                QApplication.processEvents()
+
+        # prepare data to send as reply
+        data = json.dumps(results)
+        if len(self.reply_stack) < 2 and self.reply_ctx.extra_ctx and self.window.core.config.get("ctx.use_extra"):
+            data = self.reply_ctx.extra_ctx  # if extra content is set, use it as data to send
+
+        prev_ctx = self.window.core.ctx.as_previous(self.reply_ctx)  # copy result to previous ctx and clear current ctx
+        self.window.core.ctx.update_item(self.reply_ctx)  # update context in db
+        self.window.ui.status('...')
+        self.window.controller.chat.input.send(
+            text=data,
+            force=True,
+            reply=True,
+            internal=self.reply_ctx.internal,
+            prev_ctx=prev_ctx,
+        )
+        self.clear_reply_stack()
+
+    def clear_reply_stack(self):
+        """Clear reply stack"""
+        self.window.core.debug.info("Reply stack (clear)...")
+        self.reply_ctx = None
+        self.reply_stack = []
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/core/filesystem.py` & `pygpt_net-2.2.0/src/pygpt_net/core/settings.py`

 * *Files 25% similar despite different names*

```diff
@@ -2,237 +2,201 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.21 14:00:00                  #
+# Updated Date: 2024.04.25 01:00:00                  #
 # ================================================== #
 
+import copy
+import json
 import os
 import shutil
-from datetime import datetime
-from pathlib import PurePath
 
-from PySide6.QtCore import QUrl
 
-
-class Filesystem:
+class Settings:
     def __init__(self, window=None):
         """
-        Filesystem core
+        Settings core
 
         :param window: Window instance
         """
         self.window = window
-        self.workdir_placeholder = "%workdir%"
-        self.styles = [
-            "style.css",
-            "style.dark.css",
-            "style.light.css",
-            "markdown.css",
-            "markdown.dark.css",
-            "markdown.light.css",
-            "fix_windows.css",
-        ]
-
-    def install(self):
-        """Install provider data"""
-        # data directory
-        data_dir = self.window.core.config.get_user_dir('data')
-        if not os.path.exists(data_dir):
-            os.makedirs(data_dir, exist_ok=True)
-
-        # upload directory
-        upload_dir = self.window.core.config.get_user_dir('upload')
-        if not os.path.exists(upload_dir):
-            os.makedirs(upload_dir, exist_ok=True)
-
-        # install custom css styles for override default styles
-        css_dir = os.path.join(self.window.core.config.path, 'css')
-        if not os.path.exists(css_dir):
-            os.mkdir(css_dir)
 
-        src_dir = os.path.join(self.window.core.config.get_app_path(), 'data', 'css')
-        dst_dir = os.path.join(self.window.core.config.path, 'css')
+        # prepare cfg ids
+        self.ids = ['settings', 'editor']
+        self.active = {}
+        self.options = {}
+        self.sections = {}
+        self.initialized = False
+
+        # prepare active
+        for id in self.ids:
+            self.active[id] = False
+
+    def get_options(self, id: str = None) -> dict:
+        """
+        Return options for given id
+
+        :param id: settings id
+        :return: dictionary of options
+        """
+        if not self.initialized:
+            self.load()
+        if id is None:
+            return self.options
+        if id in self.options:
+            return self.options[id]
+
+    def get_sections(self, id: str = None) -> dict:
+        """
+        Return sections for given id
+
+        :param id: settings id
+        :return: dictionary of options
+        """
+        if not self.initialized:
+            self.load()
+        if id is None:
+            return self.sections
+        if id in self.sections:
+            return self.sections[id]
+
+    def get_persist_options(self) -> list:
+        """
+        Return persist options keys (options that should be persisted when loading defaults)
+
+        :return: list of keys
+        """
+        if not self.initialized:
+            self.load()
+        persist_options = []
+        for option in self.options:
+            if 'persist' in self.options[option] and self.options[option]['persist']:
+                persist_options.append(option)
+        return persist_options
+
+    def load(self):
+        """Load settings options"""
+        self.options = self.window.core.config.get_options()
+        self.sections = self.window.core.config.get_sections()
+        self.initialized = True
+
+    def load_user_settings(self):
+        """Load user config (from user home dir)"""
+        # replace config with user base config
+        self.window.core.config.load_config()
+
+    def load_app_settings(self):
+        """Load base app config (from app root dir)"""
+        # persist important and non-settings values
+        settings_options = self.get_options()
+        persist_options = self.get_persist_options()
+        all_options = self.window.core.config.all()
+        persist_values = {}
+        for option in all_options:
+            if option in persist_options or option not in settings_options:
+                persist_values[option] = copy.deepcopy(self.window.core.config.get(option))
+
+        # save current config backup
+        self.window.core.config.save('config.json.backup')
+
+        # replace config with app base config
+        self.window.core.config.from_base_config()
+
+        # restore persisted values
+        for option in persist_values:
+            self.window.core.config.set(option, persist_values[option])
+
+    def load_default_editor(self):
+        """Load defaults from file"""
+        file = self.window.ui.dialog['config.editor'].file
+        self.load_editor(file)
+        self.window.ui.status("Restored from user file: {}".format(file))
+
+    def load_default_editor_app(self):
+        """Load defaults from file (app)"""
+        file = self.window.ui.dialog['config.editor'].file
+        basename = os.path.basename(file)
+        if basename.endswith(".css"):
+            path = str(os.path.join(self.window.core.config.get_app_path(), "data", "css", basename))
+            self.load_editor(file, path)
+            self.window.ui.status("Restored from app defaults: {}".format(basename))
+        elif basename.endswith(".json"):
+            path = str(os.path.join(self.window.core.config.get_app_path(), "data", "config", basename))
+            self.load_editor(file, path)
+            self.window.ui.status("Restored from app defaults: {}".format(basename))
+
+    def load_editor(self, file: str = None, path: str = None):
+        """
+        Load file to editor
+
+        :param file: file name (JSON/CSS)
+        :param path: file path (force load) or None
+        """
+        # load file
+        if path is None:
+            if file.endswith('.json'):
+                path = os.path.join(self.window.core.config.get_user_path(), file)
+            elif file.endswith('.css'):
+                path = os.path.join(self.window.core.config.get_user_path(), 'css', file)
+            self.window.ui.paths['config'].setText(path)
 
+        self.window.ui.dialog['config.editor'].file = file
         try:
-            for style in self.styles:
-                src = os.path.join(src_dir, style)
-                dst = os.path.join(dst_dir, style)
-                if not os.path.exists(dst) and os.path.exists(src):
-                    shutil.copyfile(src, dst)
+            with open(path, 'r', encoding="utf-8") as f:
+                txt = f.read()
+                self.window.ui.editor['config'].setPlainText(txt)
         except Exception as e:
-            print("Error while installing css files: ", e)
-
-    def make_local(self, path: str) -> str:
-        """
-        Make local placeholder path
-
-        :param path: path to prepare
-        :return: local path with working dir placeholder
-        """
-        return path.replace(
-            self.window.core.config.get_user_path(),
-            self.workdir_placeholder
-        )
-
-    def make_local_list(self, paths: list) -> list:
-        """
-        Make local placeholder paths
-
-        :param paths: list with paths to prepare
-        :return: local paths with working dir placeholder
-        """
-        return [self.make_local(path) for path in paths]
-
-    def make_local_list_img(self, paths: list) -> list:
-        """
-        Make local placeholder paths for images
-
-        :param paths: list with paths to prepare
-        :return: local paths with working dir placeholder
-        """
-        img_ext = ['.png', '.jpg', '.jpeg', '.gif', '.bmp', '.tiff', '.webp']
-        result = []
-        for path in paths:
-            if path.endswith(tuple(img_ext)):
-                result.append(self.make_local(path))
-        return result
-
-    def get_url(self, url) -> QUrl:
-        """
-        Make current OS-specific URL to open file or directory
-
-        :param url: URL to prepare
-        :return: URL to open file or directory
-        """
-        if self.window.core.platforms.is_windows():
-            if not url.startswith('file:///'):
-                url = 'file:///' + url
-            return QUrl(url, QUrl.TolerantMode)
-        else:
-            return QUrl.fromLocalFile(url)
-
-    def get_path(self, path) -> str:
-        """
-        Prepare current OS-specific path from given path
-
-        :param path: path to prepare
-        :return: prepared OS-specific path
-        """
-        parts = PurePath(path).parts
-        if len(parts) > 1:
-            return os.path.join(*parts)  # rebuild OS directory separators
-        return path
-
-    def to_workdir(self, path) -> str:
-        """
-        Replace user path with current workdir
-
-        :param path: path to fix
-        :return: path with replaced user workdir
-        """
-        path = self.get_path(path)
-        work_dir = self.window.core.config.get_user_path()  # current OS app workdir
-
-        # try to find %workdir% placeholder in path
-        if self.workdir_placeholder in path:
-            return path.replace(
-                self.workdir_placeholder,
-                work_dir
-            )
-
-        # try to find workdir in path: old versions compatibility, < 2.0.113
-        if work_dir.endswith('.config/pygpt-net'):
-            work_dir = work_dir.rsplit('/.config/pygpt-net', 1)[0]
-        elif work_dir.endswith('.config\\pygpt-net'):
-            work_dir = work_dir.rsplit('\\.config\\pygpt-net', 1)[0]
-
-        if self.window.core.platforms.is_windows():
-            dir_index = path.find('\\.config\\pygpt-net\\') + 1
-        else:
-            dir_index = path.find('/.config/pygpt-net/') + 1
-
-        parts = path[dir_index:]
-        return os.path.join(work_dir, parts)
-
-    def extract_local_url(self, path) -> (str, str):
-        """
-        Extract local url and path from url
-
-        :param path: local path or url
-        :return: url, path
-        """
-        if not self.is_schema(path):
-            path = self.to_workdir(path)
-
-        prefix = ''
-        if not self.is_schema(path):
-            if self.window.core.platforms.is_windows():
-                prefix = 'file:///'
-            else:
-                prefix = 'file://'
-
-        url = prefix + path
-        return url, path
+            self.window.core.debug.log(e)
+            self.window.ui.status("Error loading file: {}".format(e))
 
-    def get_workdir_prefix(self) -> str:
-        """
-        Get workdir prefix
-
-        :return: workdir prefix
-        """
-        prefix = ''
-        if self.window.core.platforms.is_windows():
-            prefix = 'file:///'
+    def save_editor(self):
+        """Save file to disk"""
+        file = self.window.ui.dialog['config.editor'].file
+        path = None
+        data = self.window.ui.editor['config'].toPlainText()
+
+        # check if this is a valid JSON
+        if file.endswith('.json'):
+            try:
+                json.loads(data)
+            except Exception as e:
+                self.window.ui.status("This is not a valid JSON: {}".format(e))
+                self.window.ui.dialogs.alert("This is not a valid JSON: {}".format(e))
+                return
+            path = os.path.join(self.window.core.config.get_user_path(), file)
+        elif file.endswith('.css'):
+            path = os.path.join(self.window.core.config.get_user_path(), 'css', file)
+
+        if path is None:
+            self.window.ui.status("Error saving file: invalid file name")
+            return
+
+        # make backup of current file
+        backup_file = file + '.backup'
+        if file.endswith('.css'):
+            backup_path = os.path.join(self.window.core.config.get_user_path(), "css", backup_file)
         else:
-            prefix = 'file://'
-        return prefix + self.window.core.config.get_user_path()
-
-    def in_work_dir(self, path: str) -> bool:
-        """
-        Check if path is in work directory
-
-        :param path: path to file
-        :return: True if path is in work directory
-        """
-        work_dir = self.window.core.config.get_user_dir("data")
-        return path.startswith(work_dir)
-
-    def store_upload(self, path: str) -> str:
-        """
-        Store file in upload directory
-
-        :param path: path to uploading file
-        :return: path to stored uploaded file
-        """
-        upload_dir = self.window.core.config.get_user_dir("upload")
-        file_name = os.path.basename(path)
-        upload_path = os.path.join(upload_dir, file_name)
-        # if file exists, add datetime prefix
-        if os.path.exists(upload_path):
-            upload_path = os.path.join(upload_dir, datetime.now().strftime("%Y-%m-%d_%H-%M-%S_") + file_name)
-        shutil.copyfile(path, upload_path)
-        return upload_path
-
-    def remove_upload(self, path: str) -> None:
-        """
-        Delete uploaded file
-
-        :param path: path to uploading file
-        """
-        upload_dir = self.window.core.config.get_user_dir("upload")
-        if path.startswith(upload_dir):
-            if os.path.exists(path):
-                os.remove(path)
-
-    def is_schema(self, path: str) -> bool:
-        """
-        Check if path has schema prefix (http, https, file)
-
-        :param path: path to check
-        :return: True if path has schema prefix
-        """
-        return path.startswith('file://') or path.startswith('http://') or path.startswith('https://')
+            backup_path = os.path.join(self.window.core.config.get_user_path(), backup_file)
+        if os.path.isfile(path):
+            shutil.copyfile(path, backup_path)
+            self.window.ui.status("Created backup file: {}".format(backup_file))
 
+        # save changes to current file
+        try:
+            with open(path, 'w', encoding="utf-8") as f:
+                f.write(data)
+            self.window.ui.status("Saved file: {}".format(path))
+            self.window.ui.dialogs.alert("Saved file: {}".format(path))
+            if file == "config.json":
+                self.window.core.config.load_config()  # reload config
+            elif file == "models.json":
+                self.window.core.models.load()  # reload models
+            elif file.endswith('.css'):
+                self.window.controller.chat.render.on_theme_change()
+                self.window.controller.theme.reload(force=True)  # reload theme
+        except Exception as e:
+            self.window.core.debug.log(e)
+            self.window.ui.status("Error saving file: {}".format(path))
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/core/history.py` & `pygpt_net-2.2.0/src/pygpt_net/core/history.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/core/idx/__init__.py` & `pygpt_net-2.2.0/src/pygpt_net/controller/assistant/store.py`

 * *Files 20% similar despite different names*

```diff
@@ -2,474 +2,426 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.03.01 17:00:00                  #
+# Updated Date: 2024.04.27 14:00:00                  #
 # ================================================== #
 
-import datetime
-from packaging.version import Version
+import copy
+import json
 
-from pygpt_net.item.index import IndexItem
-from pygpt_net.provider.core.index.base import BaseProvider
-from pygpt_net.provider.core.index.json_file import JsonFileProvider
-from pygpt_net.provider.core.index.db_sqlite import DbSqliteProvider
-from pygpt_net.provider.vector_stores import Storage
+from PySide6.QtWidgets import QApplication
 
-from .indexing import Indexing
-from .llm import Llm
-from .chat import Chat
+from pygpt_net.item.assistant import AssistantStoreItem
+from pygpt_net.utils import trans
 
-from .types.ctx import Ctx
-from .types.external import External
-from .types.files import Files
 
-
-class Idx:
+class VectorStore:
     def __init__(self, window=None):
         """
-        Indexer core
+        Assistant vector store editor controller
 
         :param window: Window instance
         """
         self.window = window
-        self.indexing = Indexing(window)
-        self.llm = Llm(window)
-        self.storage = Storage(window)
-        self.chat = Chat(window, self.storage)
-        self.providers = {
-            "json_file": JsonFileProvider(window),  # only for patching
-            "db_sqlite": DbSqliteProvider(window),
+        self.dialog = False
+        self.config_initialized = False
+        self.current = None
+        self.width = 800
+        self.height = 500
+        self.id = "assistant.store"
+        self.options = {
+            "id": {
+                "type": "text",
+                "label": "assistant.store.id",
+                "read_only": True,
+                "value": "",
+            },
+            "name": {
+                "type": "text",
+                "label": "assistant.store.name",
+                "value": "",
+            },
+            "expire_days": {
+                "type": "int",
+                "label": "assistant.store.expire_days",
+                "value": 0,
+            },
+            "status": {
+                "type": "textarea",
+                "label": "assistant.store.status",
+                "read_only": True,
+                "value": "",
+            },
         }
-        self.provider = "db_sqlite"
-        self.items = {}
-        self.initialized = False
-
-        # internal types
-        self.ctx = Ctx(window, self.get_provider())
-        self.external = External(window, self.get_provider())
-        self.files = Files(window, self.get_provider())
-
-    def install(self):
-        """Install provider data"""
-        self.get_provider().install()
 
-    def patch(self, app_version: Version) -> bool:
+    def get_options(self) -> dict:
         """
-        Patch provider data
+        Get options dict
 
-        :param app_version: app version
-        :return: True if success
+        :return: options dict
         """
-        return self.get_provider().patch(app_version)
-
-    def init(self):
-        """Initialize indexes"""
-        if not self.initialized:
-            self.load()
-            self.initialized = True
+        return self.options
 
-    def get_current_store(self) -> str:
+    def get_option(self, key: str) -> dict or None:
         """
-        Get current vector store name/ID
+        Get option by key
 
-        :return: vector store name
+        :param key: option key
+        :return: option dict
         """
-        return self.window.core.config.get('llama.idx.storage')
+        if key in self.options:
+            return self.options[key]
 
-    def get_provider(self) -> BaseProvider:
-        """
-        Get provider instance
-
-        :return: provider instance
-        """
-        return self.providers.get(self.provider)
+    def setup(self):
+        """Set up vector store editor"""
+        idx = None
+        self.window.assistant_store.setup(idx)  # widget dialog setup
 
-    def store_index(self, idx: str = "base"):
-        """
-        Store (persist) index data
-
-        :param idx: index name/ID
-        """
-        self.storage.store(idx)
+    def toggle_editor(self):
+        """Toggle vector store editor dialog"""
+        if self.dialog:
+            self.close()
+        else:
+            self.open()
 
-    def remove_index(self, idx: str = "base", truncate: bool = False) -> bool:
-        """
-        Truncate index
+    def reset(self):
+        """Reset vector store editor"""
+        self.current = None
+        if self.dialog:
+            self.init()
+
+    def open(self, force: bool = False):
+        """
+        Open vector store editor dialog
+
+        :param force: force open dialog
+        """
+        if not self.config_initialized:
+            self.setup()
+            self.config_initialized = True
+        if not self.dialog or force:
+            self.current = self.window.controller.assistant.editor.get_selected_store_id()
+            self.init()
+            self.window.ui.dialogs.open(
+                "assistant.store",
+                width=self.width,
+                height=self.height,
+            )
+            self.dialog = True
+
+    def close(self):
+        """Close vector store editor dialog"""
+        if self.dialog:
+            self.window.ui.dialogs.close('assistant.store')
+            self.dialog = False
 
-        :param idx: index name
-        :param truncate: truncate index (remove all data)
-        :return: True if success
-        """
-        # get current store
-        store = self.get_current_store()
+    def init(self):
+        """Initialize vector store editor options"""
+        self.reload_items()
 
-        # clear db data
-        self.ctx.truncate(store, idx)
-        self.files.truncate(store, idx)
+        # select the first store if not selected
+        if self.current is None:
+            self.current = self.get_first_visible()
+
+        # assign store to config dialog fields
+        options = copy.deepcopy(self.get_options())  # copy options
+        if self.current is not None and self.window.core.assistants.store.has(self.current):
+            store = self.window.core.assistants.store.items[self.current]
+            data_dict = store.to_dict()
+            for key in options:
+                if key in data_dict:
+                    value = data_dict[key]
+                    options[key]["value"] = value
+                    if key == "status":
+                        options[key]["value"] = json.dumps(value, indent=4)  # as JSON to textarea
 
-        # clear ctx data indexed status
-        self.window.core.ctx.idx.truncate_indexed(store, idx)
+            self.set_tab_by_id(self.current)
 
-        # clear storage, remove index
-        if truncate:
-            return self.storage.truncate(idx)
+            # load and apply options to config dialog
+            self.window.controller.config.load_options(self.id, options)
         else:
-            return self.storage.remove(idx)
+            self.current = None  # reset if not exists
+            self.window.controller.config.load_options(self.id, options)
 
-    def index_files(
-            self,
-            idx: str = "base",
-            path: str = None
-    ) -> (dict, list):
-        """
-        Index file or directory of files
-
-        :param idx: index name
-        :param path: path to file or directory
-        :return: dict with indexed files (path -> id), list with errors
-        """
-        context = self.llm.get_service_context()
-        index = self.storage.get(
-            id=idx,
-            service_context=context,
-        )  # get or create index
-        files, errors = self.indexing.index_files(
-            idx=idx,
-            index=index,
-            path=path,
-        )  # index files
-        if len(files) > 0:
-            self.storage.store(
-                id=idx,
-                index=index,
-            )  # store index
-        return files, errors
-
-    def index_db_by_meta_id(
-            self,
-            idx: str = "base",
-            id: int = 0,
-            from_ts: int = 0
-    ) -> (int, list):
-        """
-        Index records from db by meta id
-
-        :param idx: index name
-        :param id: CtxMeta id
-        :param from_ts: timestamp from
-        :return: num of indexed files, list with errors
-        """
-        context = self.llm.get_service_context()
-        index = self.storage.get(
-            id=idx,
-            service_context=context,
-        )  # get or create index
-        num, errors = self.indexing.index_db_by_meta_id(
-            idx=idx,
-            index=index,
-            id=id,
-            from_ts=from_ts,
-        )  # index db records
-        if num > 0:
-            self.storage.store(
-                id=idx,
-                index=index,
-            )  # store index
-        return num, errors
-
-    def index_db_from_updated_ts(
-            self,
-            idx: str = "base",
-            from_ts: int = 0
-    ) -> (int, list):
-        """
-        Index records from db by meta id
-
-        :param idx: index name
-        :param from_ts: timestamp from
-        :return: num of indexed files, list with errors
-        """
-        context = self.llm.get_service_context()
-        index = self.storage.get(
-            id=idx,
-            service_context=context,
-        )  # get or create index
-        num, errors = self.indexing.index_db_from_updated_ts(
-            idx=idx,
-            index=index,
-            from_ts=from_ts,
-        )  # index db records
-        if num > 0:
-            self.storage.store(
-                id=idx,
-                index=index,
-            )  # store index
-        return num, errors
-
-    def index_urls(
-            self,
-            idx: str = "base",
-            urls: list = None,
-            type: str = "webpage",
-            extra_args: dict = None
-    ) -> (dict, list):
-        """
-        Index URLs
-
-        :param idx: index name
-        :param urls: list of urls
-        :param type: type of url
-        :param extra_args: extra args
-        :return: num of indexed, list with errors
-        """
-        context = self.llm.get_service_context()
-        index = self.storage.get(
-            id=idx,
-            service_context=context,
-        )  # get or create index
-        n, errors = self.indexing.index_urls(
-            idx=idx,
-            index=index,
-            urls=urls,
-            type=type,
-            extra_args=extra_args,
-        )  # index urls
-        if n > 0:
-            self.storage.store(
-                id=idx,
-                index=index,
-            )  # store index
-        return n, errors
-
-    def get_idx_data(self, idx: str = None) -> dict:
-        """
-        Get indexed files data
-
-        :param idx: index name
-        :return: indexed files data (idx -> items)
-        """
-        indexes = {}
-        store_id = self.get_current_store()
-        if idx is not None:
-            if store_id in self.items and idx in self.items[store_id]:
-                indexes[idx] = self.items[store_id][idx].items
-        else:
-            # all indexes
-            if store_id in self.items:
-                for idx in self.items[store_id]:
-                    indexes[idx] = self.items[store_id][idx].items
-        return indexes
+    def refresh_status(self):
+        """Reload store status"""
+        if self.current is not None:  # TODO: reset on profile reload
+            if self.window.core.assistants.store.has(self.current):
+                self.window.ui.status(trans('status.sending'))
+                QApplication.processEvents()
+                store = self.window.core.assistants.store.items[self.current]
+                self.refresh_store(store)
+                self.window.ui.status(trans('status.assistant.saved'))
+                self.update()  # update stores list in assistant dialog
+
+    def refresh_store(self, store: AssistantStoreItem, update: bool = True):
+        """
+        Refresh store by ID
+
+        :param store : store object
+        :param update: update store after refresh
+        """
+        # update from API
+        self.window.core.assistants.store.update_status(store.id)
+        self.window.core.assistants.store.update(store)
+
+        if update and store.id == self.current:
+            self.update_current()
+
+    def update_current(self):
+        """Update current store"""
+        if self.current is not None and self.window.core.assistants.store.has(self.current):
+            store = self.window.core.assistants.store.items[self.current]
+            # update textarea
+            option = copy.deepcopy(self.get_option("status"))
+            option["value"] = json.dumps(store.status, indent=4)
+            self.window.controller.config.apply(self.id, "status", option)
+
+            # update name
+            option = copy.deepcopy(self.get_option("name"))
+            option["value"] = store.name
+            self.window.controller.config.apply(self.id, "name", option)
+
+            # update expire days
+            option = copy.deepcopy(self.get_option("expire_days"))
+            option["value"] = store.expire_days
+            self.window.controller.config.apply(self.id, "expire_days", option)
+
+    def save(self, persist: bool = True):
+        """
+        Save vector store editor
+
+        :param persist: persist to file and close dialog
+        """
+        if self.current is not None:
+            current = self.window.core.assistants.store.items[self.current].to_dict()
+            options = copy.deepcopy(self.get_options())  # copy options
+            data_dict = {}
+            for key in options:
+                if key == "status":
+                    data_dict[key] = current[key]  # use initial value
+                    continue  # skip status
+                value = self.window.controller.config.get_value(
+                    parent_id="assistant.store",
+                    key=key,
+                    option=options[key],
+                )
+                data_dict[key] = value
+            self.window.core.assistants.store.items[self.current].from_dict(data_dict)
 
-    def get_by_idx(self, idx: int) -> str:
-        """
-        Return idx by list index
+        # save config
+        if persist:
+            self.window.ui.status(trans('status.sending'))
+            QApplication.processEvents()
+            if self.current is not None:
+                store = self.window.core.assistants.store.update(
+                    self.window.core.assistants.store.items[self.current]
+                )
+                if store is None:
+                    self.window.ui.status(trans('status.error'))
+                    self.window.ui.dialogs.alert("Failed to save vector store")
+                    return
+
+            self.update()  # update stores list in assistant dialog
+            self.window.ui.status(trans("info.settings.saved"))
+            self.restore_selection()
+
+    def reload_items(self):
+        """Reload list items"""
+        items = self.window.core.assistants.store.items
+        self.window.assistant_store.update_list("assistant.store.list", items)
+        self.restore_selection()
+
+    def restore_selection(self):
+        """Restore selection"""
+        if self.current is not None:
+            idx = self.get_tab_by_id(self.current)
+            if idx is not None:
+                self.set_by_tab(idx)
 
-        :param idx: idx on list
-        :return: idx name
+    def select(self, idx: int):
         """
-        items = self.window.core.config.get('llama.idx.list')
-        if items is not None:
-            if idx < len(items):
-                return items[idx]['id']
+        Select store by idx
 
-    def get_idx_by_name(self, name: str) -> int:
+        :param idx: idx on list
         """
-        Return idx on list by name
+        self.save(persist=False)
+        self.current = self.get_by_tab_idx(idx)
+        self.init()
+
+    def new(self):
+        """Create new vector store"""
+        self.window.ui.status(trans('status.sending'))
+        QApplication.processEvents()
+
+        store = self.window.core.assistants.store.create()
+        if store is None:
+            self.window.ui.status(trans('status.error'))
+            self.window.ui.dialogs.alert("Failed to create new vector store")
+            return
+
+        self.window.ui.status(trans('status.assistant.saved'))
+
+        self.window.core.assistants.store.update(store)
+        self.update()  # update stores list in assistant dialog
+
+        # switch to created store
+        self.current = store.id
+        idx = self.get_tab_by_id(self.current)
+        self.set_by_tab(idx)
+        self.init()
+        self.restore_selection()
+
+    def delete_by_idx(self, idx: int, force: bool = False):
+        """
+        Delete store by idx
+
+        :param idx: store idx
+        :param force: force delete
+        """
+        store_id = self.get_by_tab_idx(idx)
+        if not force:
+            self.window.ui.dialogs.confirm(
+                type="assistant.store.delete",
+                id=idx,
+                msg=trans("dialog.assistant.store.delete.confirm"),
+            )
+            return
+        self.window.ui.status(trans('status.sending'))
+        QApplication.processEvents()
+        if self.current == store_id:
+            self.current = None
+
+        try:
+            if self.window.core.assistants.store.delete(store_id):
+                self.window.controller.assistant.batch.remove_store_from_assistants(store_id)
+                self.window.ui.status(trans('status.deleted'))
+                self.window.core.assistants.store.save()
+                self.window.controller.assistant.files.update()
+                self.update()  # update stores list in assistant dialog
+                self.init()
+                self.restore_selection()
+            else:
+                self.window.ui.status(trans('status.error'))
+        except Exception as e:
+            self.window.ui.status(trans('status.error'))
+            self.window.ui.dialogs.alert(e)
 
-        :param name: idx name
-        :return: idx on list
+    def set_by_tab(self, idx: int):
         """
-        items = self.window.core.config.get('llama.idx.list')
-        if items is not None:
-            for idx, item in enumerate(items):
-                if item['id'] == name:
-                    return idx
+        Set current list by tab index
 
-    def get_default_idx(self) -> str:
+        :param idx: tab index
         """
-        Return default idx
+        store_idx = 0
+        for id in self.window.core.assistants.store.get_ids():
+            if self.window.core.assistants.store.is_hidden(id):
+                continue
+            if store_idx == idx:
+                self.current = id
+                break
+            store_idx += 1
+        current = self.window.ui.models['assistant.store.list'].index(idx, 0)
+        self.window.ui.nodes['assistant.store.list'].setCurrentIndex(current)
 
-        :return: idx name
+    def set_tab_by_id(self, store_id: str):
         """
-        if len(self.items) > 0:
-            return self.get_by_idx(0)
+        Set current list to id
 
-    def has(self, idx: str) -> bool:
+        :param store_id: store id
         """
-        Check if index exists
+        idx = self.get_tab_idx(store_id)
+        current = self.window.ui.models['assistant.store.list'].index(idx, 0)
+        self.window.ui.nodes['assistant.store.list'].setCurrentIndex(current)
 
-        :param idx: index name
-        :return: True if index exists
+    def get_tab_idx(self, store_id: str) -> int:
         """
-        store_id = self.get_current_store()
-        if store_id in self.items:
-            return idx in self.items[store_id]
-        return False
+        Get list index (including hidden)
 
-    def get(self, idx: str) -> IndexItem:
+        :param store_id: model id
+        :return: list index
         """
-        Return index data from current storage
+        store_idx = None
+        i = 0
+        for id in self.window.core.assistants.store.get_ids():
+            if self.window.core.assistants.store.is_hidden(id):
+                continue
+            if id == store_id:
+                store_idx = i
+                break
+            i += 1
+        return store_idx
 
-        :param idx: index name
-        :return: IndexItem object
+    def get_tab_by_id(self, store_id: str) -> int:
         """
-        store_id = self.get_current_store()
-        if store_id in self.items and idx in self.items[store_id]:
-            return self.items[store_id][idx]
+        Get list index (including hidden)
 
-    def get_all(self) -> dict:
+        :param store_id: store id
+        :return: list index
         """
-        Return all indexes in current store
+        idx = None
+        i = 0
+        for id in self.window.core.assistants.store.get_ids():
+            if self.window.core.assistants.store.is_hidden(id):
+                continue
+            if id == store_id:
+                idx = i
+                break
+            i += 1
+        return idx
 
-        :return: all indexes
+    def get_by_tab_idx(self, idx: int) -> str or None:
         """
-        store_id = self.get_current_store()
-        if store_id in self.items:
-            return self.items[store_id]
-        return {}
+        Get key by list index (including hidden)
 
-    def append(self, idx: str, files: dict):
+        :param idx: list index
+        :return: store id / key
         """
-        Append indexed files to index
+        store_idx = 0
+        for id in self.window.core.assistants.store.get_ids():
+            if self.window.core.assistants.store.is_hidden(id):
+                continue
+            if store_idx == idx:
+                return id
+            store_idx += 1
+        return None
 
-        :param idx: index name
-        :param files: dict of indexed files
+    def get_first_visible(self) -> str or None:
         """
-        # create store if not exists
-        store_id = self.get_current_store()
-        if store_id not in self.items:
-            self.items[store_id] = {}
-
-        # create index if not exists
-        if idx not in self.items[store_id]:
-            self.items[store_id][idx] = IndexItem()
-            self.items[store_id][idx].id = idx
-            self.items[store_id][idx].name = idx  # use index id as name
-
-        # append indexed files
-        for path in files:
-            doc_id = files[path]
-            file_id = self.files.get_id(path)
-            ts = int(datetime.datetime.now().timestamp())
-            if file_id not in self.items[store_id][idx].items:
-                id = self.files.append(
-                    store_id=store_id,
-                    idx=idx,
-                    file_id=file_id,
-                    path=path,
-                    doc_id=doc_id,
-                )
-                if id is not None:
-                    self.items[store_id][idx].items[file_id] = {
-                        "id": doc_id,
-                        "db_id": id,  # DB id
-                        "path": path,
-                        "indexed_ts": ts,
-                    }
-            else:
-                # update indexed timestamp only
-                self.files.update(
-                    id=self.items[store_id][idx].items[file_id]["db_id"],  # DB id
-                    doc_id=doc_id,
-                    ts=ts,
-                )
-                self.items[store_id][idx].items[file_id]["id"] = doc_id
-                self.items[store_id][idx].items[file_id]["indexed_ts"] = ts
+        Get first visible store ID (including hidden)
 
-    def remove_doc(self, idx: str, doc_id: str):
+        :return: store id
         """
-        Remove document from index
+        for id in self.window.core.assistants.store.get_ids():
+            if not self.window.core.assistants.store.is_hidden(id):
+                return id
+        return None
 
-        :param idx: index name (id)
-        :param doc_id: document ID (in storage)
+    def open_by_idx(self, idx: int):
         """
-        self.llm.get_service_context()  # init environment only (ENV API keys, etc.)
-        if self.storage.remove_document(idx, doc_id):
-            self.indexing.log("Removed document from index: " + idx + " - " + doc_id)
+        Open editor by tab index
 
-    def remove_file(self, idx: str, file: str):
+        :param idx: list index
         """
-        Remove file from index
+        store = self.window.core.assistants.store.get_by_idx(idx)
+        if store is None:
+            return
+        self.current = store
+        self.open(force=True)
 
-        :param idx: index name
-        :param file: file ID
-        """
-        self.llm.get_service_context()  # init environment only (ENV API keys, etc.)
-        store_id = self.get_current_store()
-        if store_id in self.items and idx in self.items[store_id]:
-            if file in self.items[store_id][idx].items:
-                # remove from storage
-                doc_id = self.items[store_id][idx].items[file]["id"]
-                self.storage.remove_document(
-                    id=idx,
-                    doc_id=doc_id,
-                )
-                # remove from index data and db
-                del self.items[store_id][idx].items[file]
-                self.files.remove(store_id, idx, doc_id)
-
-    def load(self):
-        """Load indexes and indexed items"""
-        store_ids = self.storage.get_ids()
-        for store_id in store_ids:
-            self.items[store_id] = self.get_provider().load(store_id)
-            # replace workdir placeholder with current workdir
-            for idx in self.items[store_id]:
-                for id in self.items[store_id][idx].items:
-                    file = self.items[store_id][idx].items[id]
-                    if 'path' in file and file['path'] is not None:
-                        self.items[store_id][idx].items[id]['path'] = \
-                            self.window.core.filesystem.to_workdir(file['path'])
-
-    def sync(self):
-        """Sync idx items from config"""
-        items = self.window.core.config.get('llama.idx.list')
-        store_id = self.get_current_store()
-        if items is not None:
-            if store_id not in self.items:
-                self.items[store_id] = {}
-            for item in items:
-                idx = item['id']
-                if idx not in self.items[store_id]:
-                    self.items[store_id][idx] = IndexItem()
-                    self.items[store_id][idx].id = idx
-                    self.items[store_id][idx].name = idx
-                    self.items[store_id][idx].store = store_id
-                else:
-                    self.items[store_id][idx].id = idx
-                    self.items[store_id][idx].name = idx
-
-    def get_idx_ids(self) -> list:
-        """
-        Get list of indexes
-
-        :return: list of indexes
-        """
-        ids = []
-        data =  self.window.core.config.get('llama.idx.list')
-        if data is not None:
-            for item in data:
-                ids.append(item['id'])
-        return ids
-
-    def clear(self, idx: str):
-        """
-        Clear index items
-
-        :param idx: index name/id
-        """
-        store_id = self.get_current_store()
-        if store_id in self.items and idx in self.items[store_id]:
-            self.items[store_id][idx].items = {}
-        self.get_provider().truncate(store_id, idx)
+    def update(self):
+        """Update vector store editor"""
+        self.reload_items()
+        self.window.controller.assistant.editor.update_store_list()  # update stores list in assistant dialog
 
-    def get_version(self) -> str:
+    def set_hide_thread(self, state: bool):
         """
-        Get provider config version
+        Toggle show thread stores
 
-        :return: provider config version
+        :param state: state
         """
-        return self.get_provider().get_version()
+        self.window.core.config.set("assistant.store.hide_threads", state)
+        self.update()
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/core/idx/chat.py` & `pygpt_net-2.2.0/src/pygpt_net/core/idx/chat.py`

 * *Files 5% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.03.04 20:00:00                  #
+# Updated Date: 2024.04.17 01:00:00                  #
 # ================================================== #
 
 import json
 
 from llama_index.core.llms import ChatMessage, MessageRole
 from llama_index.core.prompts import ChatPromptTemplate
 from llama_index.core.memory import ChatMemoryBuffer
@@ -178,90 +178,123 @@
             response = chat_engine.chat(query)
 
         if response:
             if stream:
                 ctx.stream = response.response_gen
                 ctx.input_tokens = input_tokens
                 ctx.set_output("", "")
-                # no metadata here in agent chat stream response
+                # no metadata here in agent chat stream response!
             else:
                 ctx.add_doc_meta(response.metadata)  # store metadata
                 ctx.input_tokens = input_tokens
                 ctx.output_tokens = self.window.core.tokens.from_llama_messages(
                     response.response,
                     [],
                     model.id,
                 )  # calc from response
                 ctx.set_output(str(response.response), "")
                 self.log("Found in metadata: {}".format(response.metadata))
             return True
         return False
 
-    def query_file(self, path: str, query: str) -> str:
+    def query_file(self, ctx: CtxItem, path: str, query: str, model: ModelItem = None) -> str:
         """
         Query file using temp index (created on the fly)
 
-        :param path: path to file to index
+        :param ctx: context
+        :param path: path to file to index (in memory)
         :param query: query
+        :param model: model
+        :return: response
         """
-        model = self.window.core.models.from_defaults()
+        if model is None:
+            model = self.window.core.models.from_defaults()
         context = self.window.core.idx.llm.get_service_context(model=model)
-        index = self.storage.get_tmp(path, service_context=context)  # get or create tmp index
+        tmp_id, index = self.storage.get_tmp(path, service_context=context)  # get or create tmp index
 
         idx = "tmp:{}".format(path)  # tmp index id
         self.log("Indexing to temporary in-memory index: {}...".format(idx))
 
         # index file to tmp index
-        files, errors = self.window.core.idx.indexing.index_files(idx, index, path, is_tmp=True)
+        files, errors = self.window.core.idx.indexing.index_files(
+            idx=idx,
+            index=index,
+            path=path,
+            is_tmp=True,  # do not try to remove old doc id
+        )
+
+        # query tmp index
+        output = None
         if len(files) > 0:
             self.log("Querying temporary in-memory index: {}...".format(idx))
             response = index.as_query_engine(
                 streaming=False,
             ).query(query)  # query with default prompt
             if response:
-                return response.response
+                ctx.add_doc_meta(response.metadata)  # store metadata
+                output = response.response
 
-    def query_web(self, type: str, url: str, args: dict, query: str) -> str:
+        # clean tmp index
+        self.log("Removing temporary in-memory index: {} ({})...".format(idx, tmp_id))
+        self.storage.clean_tmp(tmp_id)  # clean memory
+        self.log("Returning response: {}".format(output))
+        return output
+
+    def query_web(self, ctx: CtxItem, type: str, url: str, args: dict, query: str, model: ModelItem = None) -> str:
         """
         Query web using temp index (created on the fly)
 
+        :param ctx: context
         :param type: type of content
-        :param url: url to index
+        :param url: url to index (in memory)
         :param args: extra args
         :param query: query
+        :param model: model
+        :return: response
         """
         parts = {
             "type": type,
             "url": url,
             "args": args,
         }
         id = json.dumps(parts)
-        model = self.window.core.models.from_defaults()
+        if model is None:
+            model = self.window.core.models.from_defaults()
         context = self.window.core.idx.llm.get_service_context(model=model)
-        index = self.storage.get_tmp(id, service_context=context)  # get or create tmp index
+        tmp_id, index = self.storage.get_tmp(id, service_context=context)  # get or create tmp index
 
         idx = "tmp:{}".format(id)  # tmp index id
         self.log("Indexing to temporary in-memory index: {}...".format(idx))
 
         # index file to tmp index
         num, errors = self.window.core.idx.indexing.index_urls(
             idx=id,
             index=index,
             urls=[url],
             type=type,
             extra_args=args,
-            is_tmp = True,
+            is_tmp=True,  # do not try to remove old doc id
         )
+
+        # query tmp index
+        output = None
         if num > 0:
             self.log("Querying temporary in-memory index: {}...".format(idx))
             response = index.as_query_engine(
                 streaming=False,
             ).query(query)  # query with default prompt
             if response:
-                return response.response
+                ctx.add_doc_meta(response.metadata)  # store metadata
+                output = response.response
+
+        # clean tmp index# clean tmp index
+        self.log("Removing temporary in-memory index: {} ({})...".format(idx, tmp_id))
+        self.storage.clean_tmp(tmp_id)  # clean memory
+        self.log("Returning response: {}...".format(output))
+        return output
 
     def get_memory_buffer(self, history: list, llm = None) -> ChatMemoryBuffer:
         """
         Get memory buffer
 
         :param history: list with chat history (ChatMessage)
         :param llm: LLM model
@@ -310,7 +343,8 @@
         is_log = False
         if self.window.core.config.has("log.llama") \
                 and self.window.core.config.get("log.llama"):
             is_log = True
         self.window.core.debug.info(msg, not is_log)
         if is_log:
             print("[LLAMA-INDEX] {}".format(msg))
+        self.window.idx_logger_message.emit(msg)
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/core/idx/context.py` & `pygpt_net-2.2.0/src/pygpt_net/core/idx/context.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/core/idx/indexing.py` & `pygpt_net-2.2.0/src/pygpt_net/core/idx/indexing.py`

 * *Files 16% similar despite different names*

```diff
@@ -2,100 +2,165 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.03.04 20:00:00                  #
+# Updated Date: 2024.04.17 01:00:00                  #
 # ================================================== #
 
+import datetime
 import os.path
+import time
 
 from pathlib import Path
 from sqlalchemy import text
 
 from llama_index.core.indices.base import BaseIndex
 from llama_index.core.schema import Document
 from llama_index.core import SimpleDirectoryReader
 
 from pygpt_net.provider.loaders.base import BaseLoader
-from pygpt_net.utils import parse_args
+from pygpt_net.utils import parse_args, pack_arg
 
 
 class Indexing:
     def __init__(self, window=None):
         """
         Indexing core
 
         :param window: Window instance
         """
         self.window = window
         self.loaders = {
             "file": {},  # file loaders
             "web": {},   # web loaders
-        }  # offline loaders
+        }
         self.data_providers = {}  # data providers (loaders)
         self.external_instructions = {}
+        self.external_config = {}
+        self.last_call = None
 
     def register_loader(self, loader: BaseLoader):
         """
         Register data loader
 
         :param loader: data loader instance
         """
         # check if compiled version is allowed
         is_compiled = self.window.core.config.is_compiled() or self.window.core.platforms.is_snap()
         if not loader.allow_compiled and is_compiled:
-            self.log("Loader not allowed in compiled version: " + loader.id)
+            self.window.core.idx.log("Loader not allowed in compiled version: " + loader.id)
             return
 
         loader.attach_window(self.window)
         self.data_providers[loader.id] = loader  # cache loader
         extensions = loader.extensions  # available extensions
         types = loader.type  # available types
+
         if "file" in types:
             loader.set_args(self.get_loader_arguments(loader.id, "file"))  # set reader arguments
             try:
                 reader = loader.get()  # get data reader instance
                 for ext in extensions:
                     self.loaders["file"][ext] = reader  # set reader instance, by file extension
             except ImportError as e:
                 msg = "Error while registering data loader: " + loader.id + " - " + str(e)
                 self.window.core.debug.log(msg)
                 self.window.core.debug.log(e)
+
         if "web" in types:
             loader.set_args(self.get_loader_arguments(loader.id, "web"))  # set reader arguments
             try:
                 reader = loader.get()  # get data reader instance
                 self.loaders["web"][loader.id] = reader # set reader instance, by id
                 if loader.instructions:
                     for item in loader.instructions:
                         cmd = list(item.keys())[0]
                         self.external_instructions[cmd] = item[cmd]
+                if loader.init_args:
+                    for key in loader.init_args:
+                        if loader.id not in self.external_config:
+                            self.external_config[loader.id] = {}
+                        self.external_config[loader.id][key] = {
+                            "key": key,
+                            "value": loader.init_args[key],
+                            "type": "str",  # default = str
+                        }
+                        # from config
+                        if key in loader.args:
+                            self.external_config[loader.id][key]["value"] = loader.args[key]
+                        if key in loader.init_args_types:
+                            self.external_config[loader.id][key]["type"] = loader.init_args_types[key]
+
             except ImportError as e:
                 msg = "Error while registering data loader: " + loader.id + " - " + str(e)
                 self.window.core.debug.log(msg)
                 self.window.core.debug.log(e)
 
+    def update_loader_args(self, loader: str, args: dict):
+        """
+        Update loader arguments
+
+        :param loader: loader id
+        :param args: keyword arguments
+        """
+        if loader in self.data_providers:
+            self.data_providers[loader].set_args(args)
+            reader = self.data_providers[loader].get()  # get data reader instance
+            self.loaders["web"][loader] = reader  # update reader instance
+
+            # update in config
+            config = self.window.core.config.get("llama.hub.loaders.args")
+            if config is None:
+                config = []
+            loader_key = "web_" + loader
+            for arg in args:
+                found = False
+                for item in config:
+                    if item["loader"] == loader_key and item["name"] == arg:
+                        item["value"] = args[arg]
+                        found = True
+                if not found:
+                    type = "str"
+                    if arg in self.data_providers[loader].init_args_types:
+                        type = self.data_providers[loader].init_args_types[arg]
+                    # pack value
+                    value = pack_arg(args[arg], type)
+                    config.append({
+                        "loader": loader_key,
+                        "name": arg,
+                        "value": value,
+                        "type": type
+                    })
+
     def reload_loaders(self):
         """Reload loaders (update arguments)"""
-        self.log("Reloading data loaders...")
+        self.window.core.idx.log("Reloading data loaders...")
         for loader in self.data_providers.values():
             self.register_loader(loader)
-        self.log("Data loaders reloaded.")
+        self.window.core.idx.log("Data loaders reloaded.")
 
     def get_external_instructions(self) -> dict:
         """
         Get external instructions
 
         :return: dict of external instructions
         """
         return self.external_instructions
 
+    def get_external_config(self) -> dict:
+        """
+        Get external config
+
+        :return: dict of external config
+        """
+        return self.external_config
+
     def get_online_loader(self, ext: str):
         """
         Get online loader by extension (deprecated)
 
         :param ext: file extension
         """
         loaders = self.window.core.config.get("llama.hub.loaders")
@@ -142,77 +207,113 @@
     def is_excluded(self, ext: str) -> bool:
         """
         Check if extension is excluded
 
         :param ext: file extension
         :return: True if excluded
         """
-        excluded = self.window.core.config.get("llama.idx.excluded_ext")
+        if ext in self.loaders["file"]:
+            if not self.window.core.config.get("llama.idx.excluded.force"):
+                return False
+
+        excluded = self.window.core.config.get("llama.idx.excluded.ext")
         if excluded is not None and excluded != "":
             excluded = excluded.replace(" ", "").split(",")
             if ext.lower() in excluded:
                 return True
         return False
 
+    def is_excluded_path(self, path: str) -> bool:
+        """
+        Check if path is excluded
+
+        :param path: file path
+        :return: True if excluded
+        """
+        data_dir = self.window.core.config.get_user_dir("data")
+        # interpreter files
+        excluded = [
+            os.path.join(data_dir, ".interpreter.output.py"),
+            os.path.join(data_dir, ".interpreter.input.py"),
+            os.path.join(data_dir, ".interpreter.current.py"),
+        ]
+        if path in excluded:
+            return True
+        return False
+
     def is_allowed(self, path: str) -> bool:
         """
         Check if path is allowed for indexing
 
         :param path: file path
         :return: True if allowed
         """
         if os.path.isdir(path):
             return True
         ext = os.path.splitext(path)[1][1:]  # get extension
         ext = ext.lower()
-        if ext in self.loaders["file"]:
+        if self.is_excluded_path(path):
+            return False
+        if ext in self.loaders["file"] and not self.window.core.config.get("llama.idx.excluded.force"):
             return True
         if self.is_excluded(ext):
             return False
         return True
 
-    def get_documents(self, path: str) -> list[Document]:
+    def get_documents(self, path: str, force: bool = False) -> list[Document]:
         """
         Get documents from path
 
         :param path: path to data
+        :param force: force reading
         :return: list of documents
         """
-        self.log("Reading documents from path: {}".format(path))
+        self.window.core.idx.log("Reading documents from path: {}".format(path))
         if os.path.isdir(path):
             reader = SimpleDirectoryReader(
                 input_dir=path,
                 recursive=True,
                 exclude_hidden=False,
             )
             documents = reader.load_data()
         else:
-            ext = os.path.splitext(path)[1][1:]  # get extension
+            # get extension
+            ext = os.path.splitext(path)[1][1:].lower()
+
+            # check if not excluded extension
+            if self.is_excluded(ext) and not force:
+                self.window.core.idx.log("Ignoring excluded extension: {}".format(ext))
+                return []
+
+            # check if not excluded path
+            if self.is_excluded_path(path) and not force:
+                self.window.core.idx.log("Ignoring excluded path: {}".format(path))
+                return []
+
             if ext in self.loaders["file"]:
-                self.log("Using loader for: {}".format(ext))
+                self.window.core.idx.log("Using loader for: {}".format(ext))
                 reader = self.loaders["file"][ext]
                 documents = reader.load_data(file=Path(path))
             else:
-                if self.is_excluded(ext):
-                    self.log("Ignoring excluded extension: {}".format(ext))
-                    return []
-                self.log("Using default SimpleDirectoryReader for: {}".format(ext))
+                self.window.core.idx.log("Using default SimpleDirectoryReader for: {}".format(ext))
                 reader = SimpleDirectoryReader(input_files=[path])
                 documents = reader.load_data()
 
+        # append custom metadata
+        self.window.core.idx.metadata.append_file_metadata(documents, path)
         return documents
 
     def read_text_content(self, path: str) -> str:
         """
         Get content from file using loaders
 
         :param path: path to file
         :return: file content
         """
-        docs = self.get_documents(path)
+        docs = self.get_documents(path, force=True)
         data = []
         for doc in docs:
             data.append(doc.text)
         return "\n".join(data)
 
     def prepare_document(self, doc: Document):
         """
@@ -221,26 +322,40 @@
         :param doc: Document
         """
         # fix empty date in Pinecode
         if "last_accessed_date" in doc.extra_info and doc.extra_info["last_accessed_date"] is None:
             if "creation_date" in doc.extra_info:
                 doc.extra_info["last_accessed_date"] = doc.extra_info["creation_date"]
 
-    def index_files(self, idx: str, index: BaseIndex, path: str = None, is_tmp: bool = False) -> tuple:
+    def index_files(
+            self,
+            idx: str,
+            index: BaseIndex,
+            path: str = None,
+            is_tmp: bool = False,
+            replace: bool = None,
+            recursive: bool = None
+    ) -> tuple:
         """
         Index all files in directory
 
         :param idx: index name
         :param index: index instance
         :param path: path to file or directory
         :param is_tmp: True if temporary index
+        :param replace: True if replace old document
+        :param recursive: True if recursive indexing
         :return: dict with indexed files, errors
         """
-        if self.window.core.config.get("llama.idx.recursive"):
-            return self.index_files_recursive(idx, index, path, is_tmp)
+        if recursive is not None:
+            if recursive:
+                return self.index_files_recursive(idx, index, path, is_tmp, replace)
+        else:
+            if self.window.core.config.get("llama.idx.recursive"):
+                return self.index_files_recursive(idx, index, path, is_tmp, replace)
 
         indexed = {}
         errors = []
         files = []
         if os.path.isdir(path):
             files = [os.path.join(path, f)
                      for f in os.listdir(path) if os.path.isfile(os.path.join(path, f))]
@@ -248,86 +363,112 @@
             files = [path]
 
         for file in files:   # per file to allow use of multiple loaders
             try:
                 # remove old file from index if exists
                 file_id = self.window.core.idx.files.get_id(file)
 
-                if not is_tmp:
-                    self.remove_old_file(idx, file_id)
+                # force replace or not old document
+                if replace is not None:
+                    if replace:
+                        self.remove_old_file(idx, file_id, force=True)
+                else:
+                    # if auto, only replace if not temporary
+                    if not is_tmp:
+                        self.remove_old_file(idx, file_id)
 
                 # index new version of file
                 documents = self.get_documents(file)
                 for d in documents:
                     self.prepare_document(d)
-                    index.insert(document=d)
+                    self.index_document(index, d)
                     indexed[file] = d.id_  # add to index
-                    self.log("Inserted document: {}".format(d.id_))
+                    self.window.core.idx.log("Inserted document: {}, metadata: {}".format(d.id_, d.metadata))
             except Exception as e:
                 errors.append(str(e))
                 print("Error while indexing file: " + file)
                 self.window.core.debug.log(e)
                 continue
 
         return indexed, errors
 
-    def index_files_recursive(self, idx: str, index: BaseIndex, path: str = None, is_tmp: bool = False) -> tuple:
+    def index_files_recursive(
+            self,
+            idx: str,
+            index: BaseIndex,
+            path: str = None,
+            is_tmp: bool = False,
+            replace: bool = None
+    ) -> tuple:
         """
         Index all files in directory and subdirectories recursively.
 
         :param idx: index name
         :param index: index instance
         :param path: path to file or directory
         :param is_tmp: True if temporary index
+        :param replace: True if replace old document
         :return: dict with indexed files, errors
         """
         indexed = {}
         errors = []
 
         # directory
         if os.path.isdir(path):
             for root, dirs, files in os.walk(path):
                 for file in files:
                     file_path = os.path.join(root, file)
                     try:
                         # remove old file from index if exists
-                        file_id = self.window.core.idx.files.get_id(path)
+                        file_id = self.window.core.idx.files.get_id(file_path)
 
-                        if not is_tmp:
-                            self.remove_old_file(idx, file_id)
+                        # force replace or not old document
+                        if replace is not None:
+                            if replace:
+                                self.remove_old_file(idx, file_id, force=True)
+                        else:
+                            # if auto, only replace if not temporary
+                            if not is_tmp:
+                                self.remove_old_file(idx, file_id)
 
                         # index new version of file
                         documents = self.get_documents(file_path)
                         for d in documents:
                             self.prepare_document(d)
-                            index.insert(document=d)
+                            self.index_document(index, d)
                             indexed[file_path] = d.id_  # add to index
-                            self.log("Inserted document: {}".format(d.id_))
+                            self.window.core.idx.log("Inserted document: {}, metadata: {}".format(d.id_, d.metadata))
                     except Exception as e:
                         errors.append(str(e))
                         print("Error while indexing file: " + file_path)
                         self.window.core.debug.log(e)
                         continue
 
         # file
         elif os.path.isfile(path):
             try:
                 # remove old file from index if exists
                 file_id = self.window.core.idx.files.get_id(path)
 
-                if not is_tmp:
-                    self.remove_old_file(idx, file_id)
+                # force replace or not old document
+                if replace is not None:
+                    if replace:
+                        self.remove_old_file(idx, file_id, force=True)
+                else:
+                    # if auto, only replace if not temporary
+                    if not is_tmp:
+                        self.remove_old_file(idx, file_id)
 
                 # index new version of file
                 documents = self.get_documents(path)
                 for d in documents:
                     self.prepare_document(d)
-                    index.insert(document=d)
+                    self.index_document(index, d)
                     indexed[path] = d.id_  # add to index
-                    self.log("Inserted document: {}".format(d.id_))
+                    self.window.core.idx.log("Inserted document: {}, metadata: {}".format(d.id_, d.metadata))
             except Exception as e:
                 errors.append(str(e))
                 print("Error while indexing file: " + path)
                 self.window.core.debug.log(e)
 
         return indexed, errors
 
@@ -338,29 +479,41 @@
         :param updated_ts: timestamp
         :return: list of documents
         """
         db = self.window.core.db.get_db()
         documents = []
         query = f"""
         SELECT
-            'User: ' || ctx_item.input || '; Assistant: ' || ctx_item.output AS text
+            'Human: ' || ctx_item.input || '\nAssistant: ' || ctx_item.output AS text,
+            ctx_item.input_ts AS input_ts,
+            ctx_item.meta_id AS meta_id,
+            ctx_item.id AS item_id
         FROM 
             ctx_item
         LEFT JOIN
             ctx_meta
         ON
             ctx_item.meta_id = ctx_meta.id
         WHERE
             ctx_meta.updated_ts > {updated_ts}
         """
         with db.connect() as connection:
             result = connection.execute(text(query))
             for item in result.fetchall():
-                doc_str = ", ".join([str(entry) for entry in item])
-                documents.append(Document(text=doc_str))
+                data = item._asdict()
+                doc = Document(
+                    text=data["text"],
+                    metadata={
+                        "ctx_date": str(datetime.datetime.fromtimestamp(int(data["input_ts"]))),
+                        "ctx_id": data["meta_id"],
+                        "item_id": data["item_id"],
+                        "indexed_at": datetime.datetime.now().strftime("%Y-%m-%d %H:%M:%S"),
+                    }
+                )
+                documents.append(doc)
         return documents
 
     def get_db_meta_ids_from_ts(self, updated_ts: int = 0) -> list:
         """
         Get IDs of meta from database from timestamp
 
         :param updated_ts: timestamp
@@ -391,27 +544,38 @@
         :param updated_ts: timestamp from which to get data
         :return: list of documents
         """
         db = self.window.core.db.get_db()
         documents = []
         query = f"""
         SELECT
-            'User: ' || input || '; Assistant: ' || output AS text
+            'Human: ' || input || '\nAssistant: ' || output AS text,
+            input_ts AS input_ts,
+            meta_id AS meta_id,
+            id AS item_id
         FROM ctx_item
         WHERE meta_id = {id}
         """
         # restrict to updated data if from timestamp is given
         if updated_ts > 0:
             query += f" AND (input_ts > {updated_ts} OR output_ts > {updated_ts})"
-
         with db.connect() as connection:
             result = connection.execute(text(query))
             for item in result.fetchall():
-                doc_str = ", ".join([str(entry) for entry in item])
-                documents.append(Document(text=doc_str))
+                data = item._asdict()
+                doc = Document(
+                    text=data["text"],
+                    metadata={
+                        "ctx_date": str(datetime.datetime.fromtimestamp(int(data["input_ts"]))),
+                        "ctx_id": data["meta_id"],
+                        "item_id": data["item_id"],
+                        "indexed_at": datetime.datetime.now().strftime("%Y-%m-%d %H:%M:%S"),
+                    }
+                )
+                documents.append(doc)
         return documents
 
     def index_db_by_meta_id(self, idx: str, index: BaseIndex, id: int = 0, from_ts: int = 0) -> (int, list):
         """
         Index data from database by meta id
 
         :param idx: index name
@@ -421,25 +585,25 @@
         :return: number of indexed documents, errors
         """
         errors = []
         n = 0
         try:
             # remove old document from index if indexing by ID only and not from timestamp
             if from_ts == 0:
-                self.log("Indexing documents from database by meta id: {}".format(id))
+                self.window.core.idx.log("Indexing documents from database by meta id: {}".format(id))
                 self.remove_old_meta_id(idx, id)
             elif from_ts > 0:
-                self.log("Indexing documents from database by meta id: {} from timestamp: {}".format(id, from_ts))
+                self.window.core.idx.log("Indexing documents from database by meta id: {} from timestamp: {}".format(id, from_ts))
 
             # get items from database
             documents = self.get_db_data_by_id(id, from_ts)
             for d in documents:
-                index.insert(document=d)
+                self.index_document(index, d)
                 doc_id = d.id_
-                self.log("Inserted DB document: {} / {}".format(n+1, len(documents)))
+                self.window.core.idx.log("Inserted ctx DB document: {} / {}, id: {}, metadata: {}".format(n+1, len(documents), d.id_, d.metadata))
                 self.window.core.ctx.idx.set_meta_as_indexed(id, idx, doc_id)  # update ctx
                 n += 1
         except Exception as e:
             errors.append(str(e))
             self.window.core.debug.log(e)
         return n, errors
 
@@ -448,15 +612,15 @@
         Index data from database from timestamp
 
         :param idx: index name
         :param index: index instance
         :param from_ts: timestamp
         :return: number of indexed documents, errors
         """
-        self.log("Indexing documents from database from timestamp: {}".format(from_ts))
+        self.window.core.idx.log("Indexing documents from database from timestamp: {}".format(from_ts))
         errors = []
         n = 0
         ids = self.get_db_meta_ids_from_ts(from_ts)
         for id in ids:
             indexed, errs = self.index_db_by_meta_id(idx, index, id, from_ts)
             n += indexed
             errors.extend(errs)
@@ -465,25 +629,27 @@
     def index_url(
             self,
             idx: str,
             index: BaseIndex,
             url: str,
             type="webpage",
             extra_args: dict = None,
-            is_tmp: bool = False
+            is_tmp: bool = False,
+            replace: bool = None
     ) -> (int, list):
         """
         Index data from external (remote) resource
 
         :param idx: index name
         :param index: index instance
         :param url: external url to index
         :param type: type of URL (webpage, feed, etc.)
         :param extra_args: extra arguments for loader
         :param is_tmp: True if temporary index
+        :param replace: True if force replace old document
         :return: number of indexed documents, errors
         """
         errors = []
         n = 0
 
         # check if web loader for defined type exists
         if type not in self.loaders["web"]:
@@ -501,37 +667,46 @@
             if "url" not in extra_args:
                 extra_args["url"] = url
 
             # get unique external content identifier
             unique_id = self.data_providers[type].get_external_id(extra_args)
 
             # remove old document from index
-            if not is_tmp:
-                self.remove_old_external(idx, unique_id, type)
+            if replace is not None:
+                if replace:
+                    self.remove_old_external(idx, unique_id, type, force=True)
+            else:
+                # if auto, only replace if not temporary
+                if not is_tmp:
+                    self.remove_old_external(idx, unique_id, type)
 
-            self.log("Loading web documents from: {}".format(unique_id))
-            self.log("Using web loader for type: {}".format(type))
+            self.window.core.idx.log("Loading web documents from: {}".format(unique_id))
+            self.window.core.idx.log("Using web loader for type: {}".format(type))
 
             args = self.data_providers[type].prepare_args(**extra_args)
 
             # get documents from external resource
             documents = loader.load_data(
                 **args
             )
+
+            # append custom metadata
+            self.window.core.idx.metadata.append_web_metadata(documents, type, args)
+
             for d in documents:
-                index.insert(document=d)
+                self.index_document(index, d)
                 doc_id = d.id_  # URL is used as document ID
                 if not is_tmp:
                     self.window.core.idx.external.set_indexed(
                         content=unique_id,
                         type=type,
                         idx=idx,
                         doc_id=doc_id,
                     )  # update external index
-                self.log("Inserted (web) document: {} / {}".format(n+1, len(documents)))
+                self.window.core.idx.log("Inserted web document: {} / {}, id: {}, metadata: {}".format(n+1, len(documents), d.id_, d.metadata))
                 n += 1
         except Exception as e:
             errors.append(str(e))
             self.window.core.debug.log(e)
         return n, errors
 
     def index_urls(
@@ -573,135 +748,118 @@
                 extra_args=extra_args,
                 is_tmp=is_tmp,
             )
             n += indexed
             errors.extend(errs)
         return n, errors
 
-    def remove_old_meta_id(self, idx: str, id: int = 0) -> bool:
+    def remove_old_meta_id(self, idx: str, id: int = 0, force: bool = False) -> bool:
         """
         Remove old meta id from index
 
         :param idx: index name
         :param id: ctx meta id
+        :param force: force remove
         :return: True if removed, False if not
         """
         # abort if not configured to replace old documents
-        if not self.window.core.config.get("llama.idx.replace_old"):
+        if not self.window.core.config.get("llama.idx.replace_old") and not force:
             return False
 
         store = self.window.core.idx.get_current_store()
         if self.window.core.idx.ctx.exists(store, idx, id):
             doc_id = self.window.core.idx.ctx.get_doc_id(store, idx, id)
             if doc_id:
-                self.log("Removing old document id: {}".format(doc_id))
+                self.window.core.idx.log("Removing old document id: {}".format(doc_id))
                 try:
                     self.window.core.idx.storage.remove_document(
                         id=idx,
                         doc_id=doc_id,
                     )
                 except Exception as e:
                     pass
                 return True
         return False
 
-    def remove_old_file(self, idx: str, file_id: str):
+    def remove_old_file(self, idx: str, file_id: str, force: bool = False):
         """
         Remove old file from index
 
         :param idx: index name
         :param file_id: file id
+        :param force: force remove
         :return: True if removed, False if not
         """
         # abort if not configured to replace old documents
-        if not self.window.core.config.get("llama.idx.replace_old"):
+        if not self.window.core.config.get("llama.idx.replace_old") and not force:
             return False
 
         store = self.window.core.idx.get_current_store()
         if self.window.core.idx.files.exists(store, idx, file_id):
             doc_id = self.window.core.idx.files.get_doc_id(store, idx, file_id)
             if doc_id:
-                self.log("Removing old document id: {}".format(doc_id))
+                self.window.core.idx.log("Removing old document id: {}".format(doc_id))
                 try:
                     self.window.core.idx.storage.remove_document(
                         id=idx,
                         doc_id=doc_id,
                     )
                 except Exception as e:
                     pass
                 return True
         return False
 
-    def remove_old_external(self, idx: str, content: str, type: str):
+    def remove_old_external(self, idx: str, content: str, type: str, force: bool = False):
         """
         Remove old file from index
 
         :param idx: index name
         :param content: content
         :param type: type
+        :param force: force remove
         :return: True if removed, False if not
         """
         # abort if not configured to replace old documents
-        if not self.window.core.config.get("llama.idx.replace_old"):
+        if not self.window.core.config.get("llama.idx.replace_old") and not force:
             return False
 
         store = self.window.core.idx.get_current_store()
         if self.window.core.idx.external.exists(store, idx, content, type):
             doc_id = self.window.core.idx.external.get_doc_id(store, idx, content, type)
             if doc_id:
-                self.log("Removing old document id: {}".format(doc_id))
+                self.window.core.idx.log("Removing old document id: {}".format(doc_id))
                 try:
                     self.window.core.idx.storage.remove_document(
                         id=idx,
                         doc_id=doc_id,
                     )
                 except Exception as e:
                     pass
                 return True
         return False
 
-    def get_excluded_extensions(self) -> list[str]:
-        """
-        Get excluded extensions if no loader is available
-
-        :return: list of excluded extensions
+    def index_document(self, index: BaseIndex, doc: Document):
         """
-        # images
-        excluded = ["jpg", "jpeg", "png", "psd", "gif", "bmp", "tiff",
-                    "webp", "svg", "ico", "heic", "heif", "avif", "apng"]
-
-        # audio
-        excluded += ["mp3", "wav", "flac", "ogg", "m4a", "wma",
-                     "aac", "aiff", "alac", "dsd", "pcm", "mpc"]
-
-        # video
-        excluded += ["mp4", "mkv", "avi", "mov", "wmv", "flv",
-                     "webm", "vob", "ogv", "3gp", "3g2", "m4v", "m2v"]
-
-        # archives
-        excluded += ["zip", "rar", "7z", "tar", "gz", "bz2", "xz", "lz", "lz4",
-                     "zst", "ar", "iso", "nrg", "dmg", "vhd", "vmdk", "vhdx", "vdi",
-                     "img", "wim", "swm", "esd", "cab", "rpm", "deb", "pkg", "apk"]
+        Index document
 
-        # binary
-        excluded += ["exe", "dll", "so", "dylib", "app", "msi", "dmg", "pkg", "deb", "rpm", "apk", "jar",
-                     "war", "ear", "class", "pyc", "whl", "egg", "so", "dylib", "a", "o", "lib", "bin",
-                     "elf", "ko", "sys", "drv"]
-
-        # sort and save
-        excluded = sorted(excluded)
-
-        return excluded
-
-    def log(self, msg: str):
+        :param index: index instance
+        :param doc: document
         """
-        Log info message
+        self.apply_rate_limit()  # apply RPM limit
+        index.insert(document=doc)
 
-        :param msg: message
-        """
-        is_log = False
-        if self.window.core.config.has("log.llama") \
-                and self.window.core.config.get("log.llama"):
-            is_log = True
-        self.window.core.debug.info(msg, not is_log)
-        if is_log:
-            print("[LLAMA-INDEX] {}".format(msg))
+    def apply_rate_limit(self):
+        """Apply API calls RPM limit"""
+        max_per_minute = 60
+        if self.window.core.config.has("llama.idx.embeddings.limit.rpm"):
+            max_per_minute = int(self.window.core.config.get("llama.idx.embeddings.limit.rpm")) # per minute
+        if max_per_minute <= 0:
+            return
+        interval = datetime.timedelta(minutes=1) / max_per_minute
+        now = datetime.datetime.now()
+        if self.last_call is not None:
+            time_since_last_call = now - self.last_call
+            if time_since_last_call < interval:
+                sleep_time = (interval - time_since_last_call).total_seconds()
+                self.window.core.idx.log("RPM limit: sleep for {} seconds".format(sleep_time))
+                time.sleep(sleep_time)
+        self.last_call = now
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/core/idx/llm.py` & `pygpt_net-2.2.0/src/pygpt_net/core/idx/llm.py`

 * *Files 26% similar despite different names*

```diff
@@ -2,80 +2,114 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.27 22:00:00                  #
+# Updated Date: 2024.03.13 15:00:00                  #
 # ================================================== #
 
 import os.path
+
+from llama_index.core.llms.llm import BaseLLM
+from llama_index.core.base.embeddings.base import BaseEmbedding
 from llama_index.core.indices.service_context import ServiceContext
 from llama_index.llms.openai import OpenAI
 
 from pygpt_net.item.model import ModelItem
 
 
 class Llm:
     def __init__(self, window=None):
         """
-        Index LLM core
+        LLM provider core
 
         :param window: Window instance
         """
         self.window = window
-        self.indexes = {}
+        self.default_model = "gpt-3.5-turbo"
+        self.default_embed = "openai"
 
     def init(self):
-        """Init env vars"""
+        """Init base ENV vars"""
         os.environ['OPENAI_API_KEY'] = str(self.window.core.config.get('api_key'))
+        os.environ['OPENAI_API_BASE'] = str(self.window.core.config.get('api_endpoint'))
         os.environ['OPENAI_ORGANIZATION'] = str(self.window.core.config.get('organization_key'))
 
-    def get(self, model: ModelItem = None):
+    def get(self, model: ModelItem = None) -> BaseLLM:
         """
         Get LLM provider
 
         :param model: Model item
-        :return: LLM
+        :return: Llama LLM instance
         """
         llm = None
         if model is not None:
             if 'provider' in model.llama_index:
                 provider = model.llama_index['provider']
                 if provider in self.window.core.llm.llms:
                     try:
-                        # init
+                        # init env vars
                         self.window.core.llm.llms[provider].init(
                             window=self.window,
                             model=model,
                             mode="llama_index",
                             sub_mode="",
                         )
-                        # get llama llm instance
+                        # get llama LLM instance
                         llm = self.window.core.llm.llms[provider].llama(
                             window=self.window,
                             model=model,
                         )
                     except Exception as e:
+                        self.window.core.debug.error(e)
                         print(e)
 
-        # default
+        # default model
         if llm is None:
             self.init()  # init env vars
             llm = OpenAI(
                 temperature=0.0,
-                model="gpt-3.5-turbo",
+                model=self.default_model,
             )
         return llm
 
+    def get_embeddings_provider(self) -> BaseEmbedding:
+        """
+        Get current embeddings provider
+
+        :return: Llama embeddings provider instance
+        """
+        provider = self.window.core.config.get("llama.idx.embeddings.provider", self.default_embed)
+        env = self.window.core.config.get("llama.idx.embeddings.env", [])
+        args = self.window.core.config.get("llama.idx.embeddings.args", [])
+
+        if provider is None or provider not in self.window.core.llm.llms:
+            provider = self.default_embed
+
+        self.window.core.llm.llms[provider].init_embeddings(
+            window=self.window,
+            env=env,
+        )
+        return self.window.core.llm.llms[provider].get_embeddings_model(
+            window=self.window,
+            config=args,
+        )
+
     def get_service_context(self, model: ModelItem = None) -> ServiceContext:
         """
-        Get service context
+        Get service context + embeddings provider
 
-        :param model: Model item
-        :return: Service context
+        :param model: Model item (for query)
+        :return: Service context instance
         """
         llm = self.get(model=model)
-        if llm is None:
-            return ServiceContext.from_defaults()
-        return ServiceContext.from_defaults(llm=llm)
+        embed_model = self.get_embeddings_provider()
+
+        kwargs = {}
+        if llm is not None:
+            kwargs['llm'] = llm
+        if embed_model is not None:
+            kwargs['embed_model'] = embed_model
+
+        return ServiceContext.from_defaults(**kwargs)
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/core/idx/types/ctx.py` & `pygpt_net-2.2.0/src/pygpt_net/core/idx/types/ctx.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/core/idx/types/external.py` & `pygpt_net-2.2.0/src/pygpt_net/core/idx/types/external.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/core/idx/types/files.py` & `pygpt_net-2.2.0/src/pygpt_net/core/idx/types/files.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/core/idx/worker.py` & `pygpt_net-2.2.0/src/pygpt_net/core/idx/worker.py`

 * *Files 24% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.23 01:00:00                  #
+# Updated Date: 2024.04.17 01:00:00                  #
 # ================================================== #
 
 from PySide6.QtCore import QObject, Signal, QRunnable, Slot
 
 
 class IndexWorkerSignals(QObject):
     finished = Signal(str, object, object, bool)  # idx, result, errors, silent mode
@@ -19,14 +19,19 @@
 
 class IndexWorker(QRunnable):
     def __init__(self, *args, **kwargs):
         super(IndexWorker, self).__init__()
         self.signals = IndexWorkerSignals()
         self.window = None
         self.content = None
+        self.loader = None
+        self.params = None
+        self.config = None
+        self.replace = None
+        self.recursive = None
         self.from_ts = 0
         self.idx = None
         self.type = None
         self.silent = False
 
     @Slot()
     def run(self):
@@ -45,26 +50,48 @@
             ))
 
             # execute indexing
             if self.type == "file":
                 result, errors = self.window.core.idx.index_files(
                     self.idx,
                     self.content,
+                    self.replace,
+                    self.recursive,
                 )
+            elif self.type == "files":
+                result = {}
+                errors = []
+                for path in self.content:
+                    r, e = self.window.core.idx.index_files(
+                        self.idx,
+                        path,
+                        self.replace,
+                        self.recursive,
+                    )
+                    result.update(r)
+                    errors.extend(e)
             elif self.type == "db_meta":
                 result, errors = self.window.core.idx.index_db_by_meta_id(
                     self.idx,
                     self.content,
                     self.from_ts,
                 )
             elif self.type == "db_current":
                 result, errors = self.window.core.idx.index_db_from_updated_ts(
                     self.idx,
                     self.content,
                 )
+            elif self.type == "web":
+                result, errors = self.window.core.idx.index_web(
+                    idx=self.idx,
+                    type=self.loader,
+                    params=self.params,
+                    config=self.config,
+                    replace=self.replace,
+                )
 
             self.log("Finished indexing.")
             self.signals.finished.emit(
                 self.idx,
                 result,
                 errors,
                 self.silent,
@@ -82,7 +109,8 @@
         is_log = False
         if self.window.core.config.has("log.llama") \
                 and self.window.core.config.get("log.llama"):
             is_log = True
         self.window.core.debug.info(msg, not is_log)
         if is_log:
             print("[LLAMA-INDEX] {}".format(msg))
+        self.window.idx_logger_message.emit(msg)
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/core/image.py` & `pygpt_net-2.2.0/src/pygpt_net/core/image.py`

 * *Files 24% similar despite different names*

```diff
@@ -2,18 +2,19 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.14 15:00:00                  #
+# Updated Date: 2024.03.17 13:00:00                  #
 # ================================================== #
 
 import os
+
 from PySide6.QtCore import Slot
 
 from pygpt_net.item.ctx import CtxItem
 from pygpt_net.utils import trans
 
 
 class Image:
@@ -27,38 +28,14 @@
 
     def install(self):
         """Install provider data, img dir, etc."""
         img_dir = os.path.join(self.window.core.config.get_user_dir("img"))
         if not os.path.exists(img_dir):
             os.makedirs(img_dir, exist_ok=True)
 
-    def get_prompt(self, allow_custom: bool = True) -> str:
-        """
-        Return image generate prompt command
-
-        :param allow_custom: allow custom prompt
-        :return: system command for generate image prompt
-        """
-        default = '''
-        Whenever I provide a basic idea or concept for an image, such as 'a picture of mountains', 
-        I want you to ALWAYS translate it into English and expand and elaborate on this idea. Use your knowledge and 
-        creativity to add details that would make the image more vivid and interesting. This could include specifying 
-        the time of day, weather conditions, surrounding environment, and any additional elements that could enhance 
-        the scene. Your goal is to create a detailed and descriptive prompt that provides DALL-E with enough 
-        information to generate a rich and visually appealing image. Remember to maintain the original intent of my 
-        request while enriching the description with your imaginative details. '''
-
-        # get custom prompt from config if exists
-        if allow_custom:
-            if self.window.core.config.has('img_prompt'):
-                prompt = self.window.core.config.get('img_prompt')
-                if prompt is not None and prompt != '':
-                    default = prompt
-        return default
-
     @Slot(str, object)
     def handle_finished(self, ctx: CtxItem, paths: list, prompt: str):
         """
         Handle finished image generation
 
         :param ctx: CtxItem
         :param paths: images paths list
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/core/info.py` & `pygpt_net-2.2.0/src/pygpt_net/core/info.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/core/installer.py` & `pygpt_net-2.2.0/src/pygpt_net/core/installer.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/core/llm/__init__.py` & `pygpt_net-2.2.0/src/pygpt_net/core/llm/__init__.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/core/locale.py` & `pygpt_net-2.2.0/src/pygpt_net/core/locale.py`

 * *Files 9% similar despite different names*

```diff
@@ -34,14 +34,23 @@
         self.ini_key = 'LOCALE'  # ini key for translations
         self.data = {}
         self.config.init(False)  # load config
         if self.config.has('lang'):
             self.lang = self.config.get_lang()
         self.load(self.lang, domain)
 
+    def reload_config(self):
+        """Reload configuration"""
+        workdir = self.config.prepare_workdir()
+        self.config.set_workdir(workdir)
+        self.config.load(False)
+        if self.config.has('lang'):
+            self.lang = self.config.get_lang()
+        self.load(self.lang)
+
     def reload(self, domain: str = None):
         """
         Reload translations for domain
 
         :param domain: translation domain
         """
         self.config.load(False)
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/core/models.py` & `pygpt_net-2.2.0/src/pygpt_net/core/models.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/core/modes.py` & `pygpt_net-2.2.0/src/pygpt_net/core/modes.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/core/notepad.py` & `pygpt_net-2.2.0/src/pygpt_net/core/notepad.py`

 * *Files 4% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.01.27 16:00:00                  #
+# Updated Date: 2024.04.09 23:00:00                  #
 # ================================================== #
 
 import datetime
 
 from packaging.version import Version
 
 from pygpt_net.item.notepad import NotepadItem
@@ -23,28 +23,33 @@
         Notepad core
 
         :param window: Window instance
         """
         self.window = window
         self.provider = DbSqliteProvider(window)
         self.items = {}
+        self.locked = False
 
     def install(self):
         """Install provider data"""
         self.provider.install()
 
     def patch(self, app_version: Version) -> bool:
         """
         Patch provider data
 
         :param app_version: app version
         :return: True if data was patched
         """
         return self.provider.patch(app_version)
 
+    def reset(self):
+        """Reset provider data"""
+        self.items = {}
+
     def get_by_id(self, idx: int) -> NotepadItem or None:
         """
         Get notepad by idx
 
         :param idx: notepad idx
         :return: notepad instance
         """
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/core/platforms.py` & `pygpt_net-2.2.0/src/pygpt_net/core/platforms.py`

 * *Files 8% similar despite different names*

```diff
@@ -117,20 +117,28 @@
 
     def get_as_string(self) -> str:
         """
         Return platform as string
 
         :return: platform as string
         """
-        extra = ''
+        return self.get_os() + ', ' + self.get_architecture() + self.get_env_suffix()
+
+    def get_env_suffix(self) -> str:
+        """
+        Return platform suffix as string
+
+        :return: platform as string
+        """
+        suffix = ''
         if self.is_snap():
-            extra = ' (snap)'
+            suffix = ' (snap)'
         elif self.window.core.config.is_compiled():
-            extra = ' (standalone)'
-        return self.get_os() + ', ' + self.get_architecture() + extra
+            suffix = ' (standalone)'
+        return suffix
 
     def is_svg_supported(self) -> bool:
         """Check if SVG is supported"""
         try:
             data = """
             <svg height="100" width="100">
               <circle cx="50" cy="50" r="40" stroke="black" stroke-width="3" fill="red" />
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/core/plugins.py` & `pygpt_net-2.2.0/src/pygpt_net/core/profile.py`

 * *Files 26% similar despite different names*

```diff
@@ -2,293 +2,265 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.24 00:00:00                  #
+# Updated Date: 2024.04.09 23:00:00                  #
 # ================================================== #
 
-import copy
-import configparser
-import io
+import json
 import os
+from pathlib import Path
+from uuid import uuid4
 
-from pygpt_net.plugin.base import BasePlugin
-from pygpt_net.utils import trans
 
+class Profile:
 
-class Plugins:
-    def __init__(self, window):
+    PROFILE_FILE = 'profile.json'
+
+    def __init__(self, window=None):
         """
-        Plugins core
+        Profile core
 
         :param window: Window instance
         """
         self.window = window
-        self.allowed_types = [
-            'audio.input',
-            'audio.output',
-            'text.input',
-            'text.output',
-            'vision',
-            'schedule'
-        ]
-        self.plugins = {}
-
-    def is_registered(self, id: str) -> bool:
-        """
-        Check if plugin is registered
-
-        :param id: plugin id
-        :return: True if registered
-        """
-        return id in self.plugins
+        self.base_workdir = None
+        self.initialized = False
+        self.version = '1.0.0'
+        self.current = None
+        self.profiles = {}
+
+    def init(self, workdir: str):
+        """
+        Initialize profile
+
+        :param workdir: base workdir (in user's home, real path)
+        """
+        self.set_base_workdir(workdir)
+        self.install()
+        if not self.initialized:
+            self.load()
+            self.update_path()
+
+    def set_base_workdir(self, workdir):
+        """
+        Set base workdir
+
+        :param workdir: base workdir
+        """
+        self.base_workdir = workdir
+
+    def has_file(self) -> bool:
+        """
+        Check if profile config exists
+
+        :return: True if exists
+        """
+        return os.path.exists(os.path.join(self.base_workdir, self.PROFILE_FILE))
+
+    def from_defaults(self):
+        """Create default profile config"""
+        is_test = os.environ.get('ENV_TEST') == '1'
+        if is_test:
+            return # DISABLE in tests!!!
+
+        uuid = str(uuid4())
+        path = self.base_workdir.replace("%HOME%", str(Path.home()))
+
+        # from current path cfg
+        path_file = "path.cfg"
+        p = os.path.join(self.base_workdir, path_file)
+        if os.path.exists(p):
+            with open(p, 'r', encoding='utf-8') as f:
+                prev_path = f.read().strip()
+                if prev_path != "":
+                    prev_path = prev_path.replace("%HOME%", str(Path.home()))
+                    if os.path.exists(prev_path):
+                        path = prev_path # use previously used path
+
+        # create default profile
+        self.current = uuid
+        self.profiles = {}
+        self.profiles[uuid] = {
+            'name': 'Default',
+            'workdir': path.replace(str(Path.home()), "%HOME%")
+        }
+        self.save()
+
+    def install(self):
+        """Install profiles"""
+        if not self.has_file():
+            self.from_defaults()
+
+    def load(self):
+        """Load profiles"""
+        f = os.path.join(self.base_workdir, self.PROFILE_FILE)
+        if os.path.exists(f):
+            with open(f, 'r', encoding='utf-8') as f:
+                try:
+                    data = json.load(f)
+                    self.current = data['current']
+                    self.profiles = data['profiles']
+                    self.initialized = True
+                except Exception as e:
+                    print('CRITICAL: Error loading profile file:', e)
+
+    def save(self):
+        """Save profiles"""
+        config = {
+            '_version': self.version,
+            'current': self.current,
+            'profiles': self.profiles
+        }
+        json_data = json.dumps(config, indent=4)
+        f = os.path.join(self.base_workdir, self.PROFILE_FILE)
+        with open(f, 'w', encoding='utf-8') as f:
+            f.write(json_data)
+
+    def add(self, name: str, workdir: str) -> str:
+        """
+        Add new profile
+
+        :param name: profile name
+        :param workdir: profile workdir
+        :return: new profile uuid
+        """
+        uuid = str(uuid4())
+        self.profiles[uuid] = {
+            'name': name,
+            'workdir': workdir.replace(str(Path.home()), "%HOME%")
+        }
+        self.save()
+        return uuid
+
+    def remove(self, uuid: str) -> bool:
+        """
+        Remove profile
+
+        :param uuid: profile uuid
+        :return: True if removed
+        """
+        if uuid in self.profiles:
+            del self.profiles[uuid]
+            self.save()
+            return True
+        return False
 
-    def all(self) -> dict:
+    def set_current(self, uuid: str) -> bool:
         """
-        Get all plugins
+        Set current profile
 
-        :return: plugins dict
+        :param uuid: profile uuid
+        :return: True if set
         """
-        return self.plugins
+        if uuid in self.profiles:
+            self.current = uuid
+            self.save()
+            self.update_path()
+            return True
+        return False
 
-    def get_ids(self) -> list:
+    def update_profile(self, uuid: str, name: str, workdir: str) -> bool:
         """
-        Get all plugins ids
+        Update profile
 
-        :return: plugins ids list
-        """
-        return list(self.plugins.keys())
+        :param uuid: profile uuid
+        :param name: profile name
+        :param workdir: profile workdir
+        :return: True if updated
+        """
+        if uuid in self.profiles:
+            self.profiles[uuid] = {
+                'name': name,
+                'workdir': workdir.replace(str(Path.home()), "%HOME%")
+            }
+            self.save()
+            return True
+        return False
 
-    def get(self, id: str) -> BasePlugin or None:
+    def get_current(self) -> str:
         """
-        Get plugin by id
+        Get current profile
 
-        :param id: plugin id
-        :return: plugin instance
+        :return: current profile uuid
         """
-        if self.is_registered(id):
-            return self.plugins[id]
-        return None
+        return self.current
 
-    def get_option(self, id: str, key: str) -> any:
+    def get(self, uuid: str) -> dict or None:
         """
-        Get plugin option
+        Get profile by uuid
 
-        :param id: plugin id
-        :param key: option key
-        :return: option value
+        :param uuid: profile uuid
+        :return: profile dict
         """
-        if self.is_registered(id):
-            if key in self.plugins[id].options:
-                return self.plugins[id].options[key]['value']
+        if uuid in self.profiles:
+            return self.profiles[uuid]
         return None
 
-    def register(self, plugin: BasePlugin):
+    def get_all(self) -> dict:
         """
-        Register plugin
+        Get all profiles
 
-        :param plugin: plugin instance
+        :return: all profiles dict
         """
-        plugin.attach(self.window)
-        id = plugin.id
-        self.plugins[id] = plugin
-
-        # make copy of options
-        if hasattr(plugin, 'options'):
-            self.plugins[id].initial_options = copy.deepcopy(plugin.options)
-
-        try:
-            plugins = self.window.core.config.get('plugins')
-            if id in plugins:
-                for key in plugins[id]:
-                    if key in self.plugins[id].options:
-                        self.plugins[id].options[key]['value'] = plugins[id][key]
-
-            # register options (configure dict editors, etc.)
-            self.register_options(id, self.plugins[id].options)
-            # print("Loaded plugin: {}".format(plugin.name))
-        except Exception as e:
-            self.window.core.debug.log(e)
-            print('Error while loading plugin options: {}'.format(id))
+        if not self.profiles:
+            return {}
+        sorted_profiles = sorted(self.profiles.items(), key=lambda item: item[1]['name'])
+        return dict(sorted_profiles)
 
-    def register_options(self, id: str, options: dict):
+    def get_current_workdir(self) -> str:
         """
-        Register plugin options
+        Get current workdir
 
-        :param id: plugin id
-        :param options: options dict
+        :return: current workdir (real path)
         """
-        for key in options:
-            option = options[key]
-            if 'type' in option and option['type'] == 'dict':
-                parent = "plugin." + id
-                option['label'] = key
-                self.window.ui.dialogs.register_dictionary(key, parent, option)
+        if self.current is not None and self.current in self.profiles:
+            tmp_dir = self.profiles[self.current]['workdir'].replace("%HOME%", str(Path.home()))
+            if os.path.exists(tmp_dir):
+                return tmp_dir
+        return self.base_workdir
 
-    def unregister(self, id: str):
+    def append(self, uuid: str, profile: dict):
         """
-        Unregister plugin
+        Append profile
 
-        :param id: plugin id
+        :param uuid: profile uuid
+        :param profile: profile dict
         """
-        if self.is_registered(id):
-            self.plugins.pop(id)
+        self.profiles[uuid] = profile
+        self.save()
 
-    def enable(self, id: str):
+    def get_current_name(self) -> str:
         """
-        Enable plugin
+        Get current profile name
 
-        :param id: plugin id
+        :return: current profile name
         """
-        if self.is_registered(id):
-            self.plugins[id].enabled = True
-            self.window.core.config.data['plugins_enabled'][id] = True
-            self.window.core.config.save()
+        if self.current is not None and self.current in self.profiles:
+            return self.profiles[self.current]['name']
+        return 'no profile'
 
-    def disable(self, id: str):
+    def update_current_workdir(self, path: str):
         """
-        Disable plugin
+        Update current workdir
 
-        :param id: plugin id
+        :param path: new workdir
         """
-        if self.is_registered(id):
-            self.plugins[id].enabled = False
-            self.window.core.config.data['plugins_enabled'][id] = False
-            self.window.core.config.save()
+        if self.current is not None and self.current in self.profiles:
+            self.profiles[self.current]['workdir'] = path.replace(str(Path.home()), "%HOME%")
+            self.save()
 
-    def destroy(self, id: str):
-        """
-        Destroy plugin workers (send stop signal)
-
-        :param id: plugin id
-        """
-        if self.is_registered(id):
-            self.plugins[id].destroy()
-
-    def has_options(self, id: str) -> bool:
-        """
-        Check if plugin has options
-
-        :param id: plugin id
-        :return: True if has options
-        """
-        if self.is_registered(id):
-            return hasattr(self.plugins[id], 'options') and len(self.plugins[id].options) > 0
-        return False
-
-    def restore_options(self, id: str):
-        """
-        Restore options to initial values
-
-        :param id: plugin id
-        """
-        options = []
-        values = {}
-        for key in self.plugins[id].options:
-            if 'persist' in self.plugins[id].options[key] and self.plugins[id].options[key]['persist']:
-                options.append(key)
-
-        # store persisted values
-        for key in options:
-            values[key] = self.plugins[id].options[key]['value']
-
-        # restore initial values
-        if id in self.plugins:
-            if hasattr(self.plugins[id], 'initial_options'):
-                self.plugins[id].options = copy.deepcopy(self.plugins[id].initial_options)  # copy
-
-        # restore persisted values
-        for key in options:
-            self.plugins[id].options[key]['value'] = values[key]
-
-    def get_name(self, id: str) -> str:
-        """
-        Get plugin name (translated)
-
-        :param id: plugin id
-        :return: plugin name
-        """
-        plugin = self.get(id)
-        default = plugin.name
-        trans_key = 'plugin.' + id
-        name = trans(trans_key)
-        if name == trans_key:
-            name = default
-        if plugin.use_locale:
-            domain = 'plugin.{}'.format(id)
-            name = trans('plugin.name', domain=domain)
-        return name
-
-    def get_desc(self, id: str) -> str:
-        """
-        Get description (translated)
-
-        :param id: plugin id
-        :return: plugin description
-        """
-        plugin = self.get(id)
-        default = plugin.description
-        trans_key = 'plugin.' + id + '.description'
-        tooltip = trans(trans_key)
-        if tooltip == trans_key:
-            tooltip = default
-        if plugin.use_locale:
-            domain = 'plugin.{}'.format(id)
-            tooltip = trans('plugin.description', domain=domain)
-        return tooltip
-
-    def dump_locale(self, plugin, path: str):
-        """
-        Dump locale
-
-        :param plugin: plugin
-        :param path: path to locale file
-        """
-        options = {}
-        options['plugin.name'] = plugin.name
-        options['plugin.description'] = plugin.description
-
-        sorted_keys = sorted(plugin.options.keys())
-        for key in sorted_keys:
-            option = plugin.options[key]
-            if 'label' in option:
-                option_key = key + '.label'
-                options[option_key] = option['label']
-            if 'description' in option:
-                option_key = key + '.description'
-                options[option_key] = option['description']
-            if 'tooltip' in option and option['tooltip'] is not None and option['tooltip'] != '':
-                option_key = key + '.tooltip'
-                options[option_key] = option['tooltip']
-
-        # dump options to .ini file:
-        ini = configparser.ConfigParser()
-        ini['LOCALE'] = options
-
-        # save with utf-8 encoding
-        with io.open(path, mode="w", encoding="utf-8") as f:
-            ini.write(f)
-
-    def dump_locale_by_id(self, id: str, path: str):
-        """
-        Dump locale by id
-
-        :param id: plugin id
-        :param path: path to locale file
-        """
-        if id in self.plugins:
-            self.dump_locale(self.plugins[id], path)
-
-    def dump_locales(self):
-        """
-        Dump all locales
-        """
-        langs = ['en', 'pl']
-        for id in self.plugins:
-            domain = 'plugin.' + id
-            for lang in langs:
-                path = os.path.join(
-                    self.window.core.config.get_app_path(), 'data', 'locale', domain + '.' + lang + '.ini')
-                self.dump_locale(self.plugins[id], path)
+    def update_path(self):
+        """Update path.cfg of currently active profile"""
+        path = self.get_current_workdir()
+        if not os.path.exists(path):
+            return  # abort if path does not exist
+        if path == self.base_workdir:
+            path = "" # default path
+        path = path.replace(str(Path.home()), "%HOME%")
+        path_file = "path.cfg"
+        p = os.path.join(self.base_workdir, path_file)
+        with open(p, 'w', encoding='utf-8') as f:
+            f.write(path)
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/core/presets.py` & `pygpt_net-2.2.0/src/pygpt_net/core/presets.py`

 * *Files 2% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.01 18:00:00                  #
+# Updated Date: 2024.03.17 13:00:00                  #
 # ================================================== #
 
 import copy
 
 from packaging.version import Version
 from pygpt_net.item.preset import PresetItem
 from pygpt_net.provider.core.preset.json_file import JsonFileProvider
@@ -63,15 +63,15 @@
         id_vision = 'current.vision'
         id_langchain = 'current.langchain'
         id_assistant = 'current.assistant'
         id_llama = 'current.llama_index'
         id_agent = 'current.agent'
 
         # set default initial prompt for chat mode
-        curr_chat.prompt = self.window.core.config.get('default_prompt')
+        curr_chat.prompt = self.window.core.prompt.get('default')
 
         # get data from presets if exists
         if id_chat in self.items:
             curr_chat = self.items[id_chat]
         if id_completion in self.items:
             curr_completion = self.items[id_completion]
         if id_img in self.items:
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/core/prompt.py` & `pygpt_net-2.2.0/src/pygpt_net/core/prompt/__init__.py`

 * *Files 19% similar despite different names*

```diff
@@ -2,50 +2,62 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.26 22:00:00                  #
+# Updated Date: 2024.04.22 23:00:00                  #
 # ================================================== #
 
 from pygpt_net.core.dispatcher import Event
 
+from .template import Template
+
 
 class Prompt:
     def __init__(self, window=None):
         """
         Prompt core
 
         :param window: Window instance
         """
         self.window = window
+        self.template = Template(window)
+
+    def get(self, prompt: str) -> str:
+        """
+        Get prompt content
+
+        :param prompt: id of the prompt
+        :return: text content
+        """
+        key = "prompt." + prompt
+        if self.window.core.config.has(key):
+            return str(self.window.core.config.get(key))
+        return ""
 
     def build_final_system_prompt(self, prompt: str) -> str:
         # tmp dispatch event: system prompt
         event = Event(Event.SYSTEM_PROMPT, {
             'mode': self.window.core.config.get('mode'),
             'value': prompt,
             'silent': True,
         })
         self.window.core.dispatcher.dispatch(event)
         prompt = event.data['value']
 
         if self.window.core.config.get('cmd') or self.window.controller.plugins.is_type_enabled("cmd.inline"):
-            # cmd prompt
-            if prompt.strip() != "":
-                prompt += "\n\n"
-            prompt += self.window.core.command.get_prompt()
 
             # cmd syntax tokens
             data = {
                 'prompt': prompt,
                 'silent': True,
                 'syntax': [],
+                'cmd': [],
             }
 
             # tmp dispatch event: command syntax apply
             # full execute cmd syntax
             if self.window.core.config.get('cmd'):
                 event = Event(Event.CMD_SYNTAX, data)
                 self.window.core.dispatcher.dispatch(event)
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/core/render/markdown/renderer.py` & `pygpt_net-2.2.0/src/pygpt_net/core/render/plain/renderer.py`

 * *Files 12% similar despite different names*

```diff
@@ -2,62 +2,56 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.21 14:00:00                  #
+# Updated Date: 2024.04.20 06:00:00                  #
 # ================================================== #
 
-import re
-import html
 from datetime import datetime
-from PySide6.QtGui import QTextCursor, QTextBlockFormat, QTextCharFormat
+from PySide6.QtGui import QTextCursor, QTextBlockFormat
 
 from pygpt_net.core.render.base import BaseRenderer
-from pygpt_net.item.ctx import CtxItem
 from pygpt_net.ui.widget.textarea.input import ChatInput
 from pygpt_net.ui.widget.textarea.output import ChatOutput
+from pygpt_net.item.ctx import CtxItem
 from pygpt_net.utils import trans
-from .parser import Parser
 
 
 class Renderer(BaseRenderer):
     def __init__(self, window=None):
         super(Renderer, self).__init__(window)
         """
-        Markdown renderer
+        Plain text renderer
 
         :param window: Window instance
         """
         self.window = window
-        self.parser = Parser(window)
         self.images_appended = []
         self.urls_appended = []
         self.buffer = ""
         self.is_cmd = False
-        self.img_width = 400
 
     def begin(self, stream: bool = False):
         """
         Render begin
 
         :param stream: True if it is a stream
         """
-        pass  # do nothing
+        self.to_end()
 
     def end(self, stream: bool = False):
         """
         Render end
 
         :param stream: True if it is a stream
         """
-        if stream:
-            self.reload()  # reload ctx items only if stream
+        self.to_end()
 
     def end_extra(self, stream: bool = False):
         """
         Render end extra
 
         :param stream: True if it is a stream
         """
@@ -94,122 +88,136 @@
         Append all context to output
 
         :param items: Context items
         :param clear: True if clear all output before append
         """
         if clear:
             self.clear_output()
+
         i = 0
         for item in items:
             item.idx = i
-            if i == 0:
-                item.first = True
             self.append_context_item(item)
             i += 1
 
     def append_input(self, item: CtxItem):
         """
         Append text input to output
 
         :param item: context item
         """
         if item.input is None or item.input == "":
             return
-        if self.is_timestamp_enabled() \
-                and item.input_timestamp is not None:
+        if self.is_timestamp_enabled() and item.input_timestamp is not None:
             name = ""
-            if item.input_name is not None \
-                    and item.input_name != "":
+            if item.input_name is not None and item.input_name != "":
                 name = item.input_name + " "
-            text = '{} > {}'.format(name, item.input)
+            ts = datetime.fromtimestamp(item.input_timestamp)
+            hour = ts.strftime("%H:%M:%S")
+            text = '{}{} > {}'.format(name, hour, item.input)
         else:
             text = "> {}".format(item.input)
 
         # check if it is a command response
         is_cmd = False
-        if item.input.strip().startswith("[") \
-                and item.input.strip().endswith("]"):
+        if item.input.strip().startswith("[") and item.input.strip().endswith("]"):
             is_cmd = True
 
+        """
         # hidden internal call
-        if item.internal \
-                and not is_cmd \
-                and not item.first \
-                and not item.input.strip().startswith("user: "):
-            self.append_raw('>>>', "msg-user", item)
+        if item.internal and not is_cmd and item.idx > 0 and not item.input.strip().startswith("user: "):
+            self.append_raw('>>>')
             return
-        else:
-            # don't show user prefix if provided in internal call goal update
-            if item.internal and item.input.startswith("user: "):
-                text = re.sub(r'^user: ', '> ', item.input)
+        """
 
-        self.append_raw(text.strip(), "msg-user", item)
+        self.append_raw(text.strip())
+        self.to_end()
 
     def append_output(self, item: CtxItem):
         """
         Append text output to output
 
         :param item: context item
         """
         if item.output is None or item.output == "":
             return
-        if self.is_timestamp_enabled() \
-                and item.output_timestamp is not None:
+        if self.is_timestamp_enabled() and item.output_timestamp is not None:
             name = ""
-            if item.output_name is not None \
-                    and item.output_name != "":
+            if item.output_name is not None and item.output_name != "":
                 name = item.output_name + " "
-            text = '{} {}'.format(name, item.output)
+            ts = datetime.fromtimestamp(item.output_timestamp)
+            hour = ts.strftime("%H:%M:%S")
+            text = '{}{} {}'.format(name, hour, item.output)
         else:
             text = "{}".format(item.output)
-        self.append_raw(text.strip(), "msg-bot", item)
+        self.append_raw(text.strip())
+        self.to_end()
 
     def append_extra(self, item: CtxItem):
         """
         Append extra data (images, files, etc.) to output
 
         :param item: context item
         """
         appended = []
 
         # images
-        if len(item.images) > 0:
+        c = len(item.images)
+        if c > 0:
+            n = 1
             for image in item.images:
-                # don't append if it is a external url
-                if image.startswith("http"):
-                    continue
                 if image in appended or image in self.images_appended:
                     continue
                 try:
                     appended.append(image)
-                    self.get_output_node().append(self.get_image_html(image))
+                    self.append_raw(self.get_image_html(image, n, c))
                     self.images_appended.append(image)
+                    n += 1
                 except Exception as e:
                     pass
 
         # files and attachments, TODO check attachments
-        if len(item.files) > 0:
+        c = len(item.files)
+        if c > 0:
+            n = 1
             for file in item.files:
                 if file in appended:
                     continue
                 try:
                     appended.append(file)
-                    self.get_output_node().append(self.get_file_html(file))
+                    self.append_raw(self.get_file_html(file, n, c))
+                    n += 1
                 except Exception as e:
                     pass
 
         # urls
-        if len(item.urls) > 0:
+        c = len(item.urls)
+        if c > 0:
+            urls_str = []
+            n = 1
             for url in item.urls:
                 if url in appended or url in self.urls_appended:
                     continue
                 try:
                     appended.append(url)
-                    self.get_output_node().append(self.get_url_html(url))
+                    urls_str.append(self.get_url_html(url, n, c))
                     self.urls_appended.append(url)
+                    n += 1
+                except Exception as e:
+                    pass
+            if urls_str:
+                self.append_raw("\n" + "\n".join(urls_str))
+
+        # docs json
+        if self.window.core.config.get('ctx.sources'):
+            if item.doc_ids is not None and len(item.doc_ids) > 0:
+                try:
+                    docs = self.get_docs_html(item.doc_ids)
+                    self.get_output_node().append(docs)
+                    self.to_end()
                 except Exception as e:
                     pass
 
         # jump to end
         if len(appended) > 0:
             self.to_end()
 
@@ -226,36 +234,34 @@
 
         raw_chunk = str(text_chunk)
 
         if begin:
             self.buffer = ""  # reset buffer
             self.is_cmd = False  # reset command flag
 
-            if self.is_timestamp_enabled() \
-                    and item.output_timestamp is not None:
+            if self.is_timestamp_enabled() and item.output_timestamp is not None:
                 name = ""
-                if item.output_name is not None \
-                        and item.output_name != "":
+                if item.output_name is not None and item.output_name != "":
                     name = item.output_name + " "
                 ts = datetime.fromtimestamp(item.output_timestamp)
                 hour = ts.strftime("%H:%M:%S")
                 text_chunk = "{}{}: ".format(name, hour) + text_chunk
 
+            text_chunk = "\n" + text_chunk
+
             self.append_block()
             self.append_chunk_start()
 
         self.buffer += raw_chunk
         self.append(self.format_chunk(text_chunk), "")
 
     def append_block(self):
         """Append block to output"""
         cursor = self.get_output_node().textCursor()
         cursor.movePosition(QTextCursor.End)
-        default_format = QTextCharFormat()  # reset format
-        cursor.setCharFormat(default_format)
         block_format = QTextBlockFormat()
         block_format.setIndent(0)
         cursor.insertBlock(block_format)
         self.get_output_node().setTextCursor(cursor)
 
     def to_end(self):
         """Move cursor to end of output"""
@@ -267,84 +273,125 @@
         """
         Append and format raw text to output
 
         :param text: text to append
         :param type: type of message
         :param item: CtxItem instance
         """
-        if type != "msg-user":  # markdown for bot messages
-            text = self.pre_format_text(text)
-            text = self.append_timestamp(text, item)
-            text = self.parser.parse(text)
-        else:
-            content = self.append_timestamp(self.format_user_text(text), item, type=type)
-            text = "<div><p>" + content + "</p></div>"
-
-        text = self.post_format_text(text)
-        text = '<div class="{}">'.format(type) + text.strip() + "</div>"
-
-        self.get_output_node().append(text)
-        self.to_end()
+        prev_text = self.get_output_node().toPlainText()
+        if prev_text != "":
+            prev_text += "\n\n"
+        new_text = prev_text + text.strip()
+        self.get_output_node().setText(new_text)
+        cur = self.get_output_node().textCursor()  # Move cursor to end of text
+        cur.movePosition(QTextCursor.End)
 
     def append_chunk_start(self):
-        """
-        Append start of chunk to output
-        """
+        """Append start of chunk to output"""
         cursor = self.get_output_node().textCursor()
         cursor.movePosition(QTextCursor.End)
         self.get_output_node().setTextCursor(cursor)
 
     def append_context_item(self, item: CtxItem):
         """
         Append context item to output
 
         :param item: context item
         """
         self.append_input(item)
         self.append_output(item)
         self.append_extra(item)
 
-    def get_image_html(self, url: str) -> str:
+    def get_image_html(self, url: str, num: int = None, num_all: int = None) -> str:
         """
         Get image HTML
 
         :param url: URL to image
+        :param num: number of image
+        :param num_all: number of all images
         :return: HTML code
         """
+        num_str = ""
+        if num is not None and num_all is not None and num_all > 1:
+            num_str = " [{}]".format(num)
         url, path = self.window.core.filesystem.extract_local_url(url)
-        return """<a href="{url}"><img src="{path}" width="{img_width}" class="image"></a>
-        <p><b>{prefix}:</b> <a href="{url}">{path}</a></p>""".\
+        return """\n{prefix}{num}: {path}\n""".\
             format(prefix=trans('chat.prefix.img'),
-                   url=url,
                    path=path,
-                   img_width=self.img_width)
+                   num=num_str)
 
-    def get_url_html(self, url: str) -> str:
+    def get_url_html(self, url: str, num: int = None, num_all: int = None) -> str:
         """
         Get URL HTML
 
         :param url: external URL
+        :param num: number of URL
+        :param num_all: number of all URLs
+        :return: HTML
+        """
+        num_str = ""
+        if num is not None and num_all is not None and num_all > 1:
+            num_str = " [{}]".format(num)
+        return """{prefix}{num}: {url}""".\
+            format(prefix=trans('chat.prefix.url'),
+                   url=url,
+                   num=num_str)
+
+    def get_docs_html(self, docs: list) -> str:
+        """
+        Get Llama-index doc metadata HTML
+
+        :param docs: list of document metadata
         :return: HTML code
         """
-        return """<br/><b>{prefix}:</b> <a href="{url}">{url}</a><br/>""".\
-            format(prefix=trans('chat.prefix.url'),
-                   url=url)
+        html = ""
+        html_sources = ""
+        num = 1
+        for doc_json in docs:
+            try:
+                """
+                Example doc (file metadata):
+                {'a2c7af6d-3c34-4c28-bf2d-6161e7fb525e': {
+                    'file_path': '/home/user/.config/pygpt-net/data/my_cars.txt',
+                    'file_name': '/home/user/.config/pygpt-net/data/my_cars.txt', 'file_type': 'text/plain',
+                    'file_size': 28, 'creation_date': '2024-03-03', 'last_modified_date': '2024-03-03',
+                    'last_accessed_date': '2024-03-03'}}
+                """
+                doc_id = list(doc_json.keys())[0]
+                doc_parts = []
+                for key in doc_json[doc_id]:
+                    doc_parts.append("{}: {}".format(key, doc_json[doc_id][key]))
+                html_sources += "[{}] {}: {}".format(num, doc_id, ", ".join(doc_parts))
+                num +=1
+            except Exception as e:
+                pass
+
+        if html_sources != "":
+            html += "\n{prefix}:\n\n".format(prefix=trans('chat.prefix.doc'))
+            html += html_sources
+
+        return html
 
-    def get_file_html(self, url: str) -> str:
+    def get_file_html(self, url: str, num: int = None, num_all: int = None) -> str:
         """
         Get file HTML
 
         :param url: URL to file
-        :return: HTML code
-        """
+        :param num: number of file
+        :param num_all: number of all files
+        :return: HTML
+        """
+        num_str = ""
+        if num is not None and num_all is not None and num_all > 1:
+            num_str = " [{}]".format(num)
         url, path = self.window.core.filesystem.extract_local_url(url)
-        return """<div><b>{prefix}:</b> <a href="{url}">{path}</a></div>""".\
+        return """\n{prefix}{num}: {path}\n""".\
             format(prefix=trans('chat.prefix.file'),
-                   url=url,
-                   path=path)
+                   path=path,
+                   num=num_str)
 
     def append(self, text: str, end: str = "\n"):
         """
         Append text to output
 
         :param text: text to append
         :param end: end of the line character
@@ -352,72 +399,43 @@
         cur = self.get_output_node().textCursor()  # Move cursor to end of text
         cur.movePosition(QTextCursor.End)
         s = str(text) + end
         while s:
             head, sep, s = s.partition("\n")  # Split line at LF
             cur.insertText(head)  # Insert text at cursor
             if sep:  # New line if LF
-                cur.insertHtml("<br>")
+                cur.insertText("\n")
         self.get_output_node().setTextCursor(cur)  # Update visible cursor
 
-    def append_timestamp(self, text: str, item: CtxItem, type: str = None) -> str:
+    def append_timestamp(self, text: str, item: CtxItem) -> str:
         """
         Append timestamp to text
 
         :param text: Input text
         :param item: Context item
-        :param type: Type of message
         :return: Text with timestamp (if enabled)
         """
         if item is not None \
                 and self.is_timestamp_enabled() \
                 and item.input_timestamp is not None:
-            if type == "msg-user":
-                timestamp = item.input_timestamp
-            else:
-                timestamp = item.output_timestamp
-            if timestamp is not None:
-                ts = datetime.fromtimestamp(timestamp)
-                hour = ts.strftime("%H:%M:%S")
-                text = '<span class="ts">{}:</span> {}'.format(hour, text)
+            ts = datetime.fromtimestamp(item.input_timestamp)
+            hour = ts.strftime("%H:%M:%S")
+            text = '{}: {}'.format(hour, text)
         return text
 
-    def replace_code_tags(self, text: str) -> str:
-        """
-        Replace cmd code tags
-
-        :param text:
-        :return: replaced text
-        """
-        pattern = r"~###~(.*?)~###~"
-        replacement = r'<p class="cmd">\1</p>'
-        return re.sub(pattern, replacement, text)
-
     def pre_format_text(self, text: str) -> str:
         """
-        Pre-format text
+        Post-format text
 
         :param text: text to format
         :return: formatted text
         """
         text = text.strip()
         text = text.replace("#~###~", "~###~")  # fix for #~###~ in text (previous versions)
         text = text.replace("# ~###~", "~###~")  # fix for # ~###~ in text (previous versions)
-
-        # replace cmd tags
-        text = self.replace_code_tags(text)
-
-        # replace %workdir% with current workdir
-        local_prefix = self.window.core.filesystem.get_workdir_prefix()
-        safe_local_prefix = local_prefix.replace('\\', '\\\\').replace('\\.', '\\\\.')  # windows fix
-        replacement = f'({safe_local_prefix}\\1)'
-        try:
-            text = re.sub(r'\(%workdir%([^)]+)\)', replacement, text)
-        except Exception as e:
-            pass
         return text
 
     def post_format_text(self, text: str) -> str:
         """
         Post-format text
 
         :param text: text to format
@@ -428,19 +446,14 @@
     def format_user_text(self, text: str) -> str:
         """
         Post-format user text
 
         :param text: text to format
         :return: formatted text
         """
-        text = html.escape(text).replace("\n", "<br>")
-
-        # append cmd tags if response from command detected
-        if text.strip().startswith("&gt; [") and text.strip().endswith("]"):
-            text = '<div class="cmd">&gt; {}</div><br/>'.format(text)
         return text
 
     def format_chunk(self, text: str) -> str:
         """
         Format chunk
 
         :param text: text to format
@@ -458,16 +471,25 @@
 
     def get_output_node(self) -> ChatOutput:
         """
         Get output node
 
         :return: output node
         """
-        return self.window.ui.nodes['output']
+        return self.window.ui.nodes['output_plain']
 
     def get_input_node(self) -> ChatInput:
         """
         Get input node
 
         :return: input node
         """
         return self.window.ui.nodes['input']
+
+    def clear_all(self):
+        """Clear all"""
+        self.get_output_node().clear()
+        self.get_output_node().document().setDefaultStyleSheet("")
+        self.get_output_node().setStyleSheet("")
+        self.get_output_node().document().setMarkdown("")
+        self.get_output_node().document().setHtml("")
+        self.get_output_node().setPlainText("")
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/core/render/plain/renderer.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/core/ctx/json_file.py`

 * *Files 22% similar despite different names*

```diff
@@ -2,410 +2,367 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.17 17:00:00                  #
+# Updated Date: 2023.12.31 04:00:00                  #
 # ================================================== #
 
-from datetime import datetime
-from PySide6.QtGui import QTextCursor, QTextBlockFormat
+import datetime
+import json
+import os
 
-from pygpt_net.core.render.base import BaseRenderer
-from pygpt_net.ui.widget.textarea.input import ChatInput
-from pygpt_net.ui.widget.textarea.output import ChatOutput
-from pygpt_net.item.ctx import CtxItem
-from pygpt_net.utils import trans
+from packaging.version import Version
 
+from pygpt_net.provider.core.ctx.base import BaseProvider
+from pygpt_net.item.ctx import CtxItem, CtxMeta
 
-class Renderer(BaseRenderer):
-    def __init__(self, window=None):
-        super(Renderer, self).__init__(window)
-        """
-        Plain text renderer
 
-        :param window: Window instance
-        """
+class JsonFileProvider(BaseProvider):
+    def __init__(self, window=None):
+        super(JsonFileProvider, self).__init__(window)
         self.window = window
-        self.images_appended = []
-        self.urls_appended = []
-        self.buffer = ""
-        self.is_cmd = False
-
-    def begin(self, stream: bool = False):
-        """
-        Render begin
-
-        :param stream: True if it is a stream
-        """
-        self.to_end()
-
-    def end(self, stream: bool = False):
-        """
-        Render end
-
-        :param stream: True if it is a stream
-        """
-        self.to_end()
-
-    def end_extra(self, stream: bool = False):
-        """
-        Render end extra
-
-        :param stream: True if it is a stream
-        """
-        self.to_end()
-
-    def stream_begin(self):
-        """Render stream begin"""
-        pass  # do nothing
-
-    def stream_end(self):
-        """Render stream end"""
-        pass  # do nothing
-
-    def clear_output(self):
-        """Clear output"""
-        self.reset()
-        self.get_output_node().clear()
+        self.id = "json_file"
+        self.type = "ctx"
 
-    def clear_input(self):
-        """Clear input"""
-        self.get_input_node().clear()
-
-    def reset(self):
-        """Reset"""
-        self.images_appended = []
-        self.urls_appended = []
-
-    def reload(self):
-        """Reload output, called externally only on theme change to redraw content"""
-        self.window.controller.ctx.refresh_output()  # if clear all and appends all items again
-
-    def append_context(self, items: list, clear: bool = True):
+    def install(self):
         """
-        Append all context to output
-
-        :param items: Context items
-        :param clear: True if clear all output before append
+        Install provider data
         """
-        if clear:
-            self.clear_output()
-
-        i = 0
-        for item in items:
-            item.idx = i
-            self.append_context_item(item)
-            i += 1
-
-    def append_input(self, item: CtxItem):
-        """
-        Append text input to output
-
-        :param item: context item
-        """
-        if item.input is None or item.input == "":
-            return
-        if self.is_timestamp_enabled() and item.input_timestamp is not None:
-            name = ""
-            if item.input_name is not None and item.input_name != "":
-                name = item.input_name + " "
-            ts = datetime.fromtimestamp(item.input_timestamp)
-            hour = ts.strftime("%H:%M:%S")
-            text = '{}{} > {}'.format(name, hour, item.input)
-        else:
-            text = "> {}".format(item.input)
-
-        # check if it is a command response
-        is_cmd = False
-        if item.input.strip().startswith("[") and item.input.strip().endswith("]"):
-            is_cmd = True
-
-        # hidden internal call
-        if item.internal and not is_cmd and item.idx > 0 and not item.input.strip().startswith("user: "):
-            self.append_raw('>>>')
-            return
-
-        self.append_raw(text.strip())
-        self.to_end()
-
-    def append_output(self, item: CtxItem):
-        """
-        Append text output to output
-
-        :param item: context item
-        """
-        if item.output is None or item.output == "":
-            return
-        if self.is_timestamp_enabled() and item.output_timestamp is not None:
-            name = ""
-            if item.output_name is not None and item.output_name != "":
-                name = item.output_name + " "
-            ts = datetime.fromtimestamp(item.output_timestamp)
-            hour = ts.strftime("%H:%M:%S")
-            text = '{}{} {}'.format(name, hour, item.output)
-        else:
-            text = "{}".format(item.output)
-        self.append_raw(text.strip())
-        self.to_end()
-
-    def append_extra(self, item: CtxItem):
-        """
-        Append extra data (images, files, etc.) to output
-
-        :param item: context item
-        """
-        appended = []
-
-        # images
-        if len(item.images) > 0:
-            for image in item.images:
-                if image in appended or image in self.images_appended:
-                    continue
+        context_dir = os.path.join(self.window.core.config.path, 'context')
+        if not os.path.exists(context_dir):
+            os.mkdir(context_dir)
+
+    def create_id(self) -> str:
+        """
+        Create unique ctx ID, in JSON file this is a timestamp with microseconds
+
+        Format: YYYYMMDDHHMMSS.MICROSECONDS.json
+
+        :return: generated ID
+        """
+        return datetime.datetime.now().strftime("%Y%m%d%H%M%S.%f")
+
+    def create(self, meta: CtxMeta) -> str:
+        """
+        Create new ctx and return its ID
+
+        :param meta: CtxMeta object
+        :return: ctx ID
+        """
+        if meta.id is None or meta.id == "":
+            meta.id = self.create_id()
+        return meta.id
+
+    def get_meta(self, search_string: str = None, order_by: str = None, order_direction: str = None,
+                 limit: int = None, offset: int = None) -> dict:
+        """
+        Load ctx metadata from file
+
+        :param search_string: search string
+        :param order_by: order by field
+        :param order_direction: order direction
+        :param limit: limit
+        :param offset: offset
+        :return: ctx metadata
+        """
+        contexts = {}
+        path = os.path.join(self.window.core.config.path, 'context.json')
+        try:
+            if os.path.exists(path):
+                with open(path, 'r', encoding="utf-8") as file:
+                    data = json.load(file)
+                    if data == "" or data is None or 'items' not in data:
+                        return contexts
+                    contexts = self.parse_meta(data['items'])
+        except Exception as e:
+            self.window.core.debug.log(e)
+            contexts = {}
+
+        return contexts
+
+    def load(self, id: str) -> list:
+        """
+        Load ctx data from json file
+
+        :param id: context id
+        :return: context items (list of CtxItem)
+        """
+        data = []
+        path = os.path.join(self.window.core.config.path, 'context', id + '.json')
+        if os.path.exists(path):
+            try:
+                with open(path, 'r', encoding="utf-8") as file:
+                    data = self.parse_data(json.load(file))
+                    if data == "" or data is None:
+                        return []
+            except Exception as e:
+                self.window.core.debug.log(e)
+                print("Error while loading context: {}".format(id))
+                data = []
+        return data
+
+    def append(self, meta: CtxMeta, item: CtxItem) -> bool:
+        """
+        Append item to ctx
+
+        :param meta: ctx meta (CtxMeta)
+        :param item: ctx item (CtxItem)
+        """
+        return False  # handled after in save() method
+
+    def save(self, id: str, meta: CtxMeta, items: list):
+        """
+        Dump ctx to json file
+
+        :param id: ctx id
+        :param meta: ctx meta (CtxMeta)
+        :param items: ctx items (list of CtxItem)
+        """
+        try:
+            # update current ctx items
+            items_path = os.path.join(self.window.core.config.path, 'context', id + '.json')
+            serialized_items = []
+            for item in items:
+                serialized_items.append(self.serialize_item(item))
+            dump = json.dumps(serialized_items, indent=4)
+
+            # save items
+            with open(items_path, 'w', encoding="utf-8") as f:
+                f.write(dump)
+
+            # update ctx meta (index)
+            index_path = os.path.join(self.window.core.config.path, 'context.json')
+            metas = self.get_meta()
+            metas[id] = meta
+            data = {}
+            serialized_meta = {}
+            for n in metas:
+                serialized_meta[n] = self.serialize_meta(metas[n])
+
+            data['items'] = serialized_meta
+            data['__meta__'] = self.window.core.config.append_meta()
+            dump = json.dumps(data, indent=4)
+
+            # save index
+            with open(index_path, 'w', encoding="utf-8") as f:
+                f.write(dump)
+
+        except Exception as e:
+            self.window.core.debug.log(e)
+            print("Error while dumping context: {}".format(id))
+
+    def remove(self, id: str):
+        """
+        Delete ctx by id
+
+        :param id: ctx id
+        """
+        # delete ctx meta (index)
+        index_path = os.path.join(self.window.core.config.path, 'context.json')
+        metas = self.get_meta()
+        if id in metas:
+            del metas[id]
+        data = {}
+        serialized_meta = {}
+        for n in metas:
+            serialized_meta[n] = self.serialize_meta(metas[n])
+        data['items'] = serialized_meta
+        data['__meta__'] = self.window.core.config.append_meta()
+        dump = json.dumps(data, indent=4)
+
+        # save index
+        with open(index_path, 'w', encoding="utf-8") as f:
+            f.write(dump)
+
+        # delete items
+        path = os.path.join(self.window.core.config.path, 'context', id + '.json')
+        if os.path.exists(path):
+            try:
+                os.remove(path)
+            except Exception as e:
+                self.window.core.debug.log(e)
+
+    def truncate(self):
+        """Delete all ctx"""
+        # delete all ctx files
+        contexts = self.get_meta()
+        for id in contexts:
+            path = os.path.join(self.window.core.config.path, 'context', id + '.json')
+            if os.path.exists(path):
                 try:
-                    appended.append(image)
-                    self.append_raw(self.get_image_html(image))
-                    self.images_appended.append(image)
+                    os.remove(path)
                 except Exception as e:
-                    pass
-
-        # files and attachments, TODO check attachments
-        if len(item.files) > 0:
-            for file in item.files:
-                if file in appended:
-                    continue
-                try:
-                    appended.append(file)
-                    self.append_raw(self.get_file_html(file))
-                except Exception as e:
-                    pass
-
-        # urls
-        if len(item.urls) > 0:
-            for url in item.urls:
-                if url in appended or url in self.urls_appended:
-                    continue
-                try:
-                    appended.append(url)
-                    self.append_raw(self.get_url_html(url))
-                    self.urls_appended.append(url)
-                except Exception as e:
-                    pass
-
-        # jump to end
-        if len(appended) > 0:
-            self.to_end()
-
-    def append_chunk(self, item: CtxItem, text_chunk: str, begin: bool = False):
-        """
-        Append output chunk to output
-
-        :param item: context item
-        :param text_chunk: text chunk
-        :param begin: if it is the beginning of the text
-        """
-        if text_chunk is None or text_chunk == "":
-            return
-
-        raw_chunk = str(text_chunk)
-
-        if begin:
-            self.buffer = ""  # reset buffer
-            self.is_cmd = False  # reset command flag
-
-            if self.is_timestamp_enabled() and item.output_timestamp is not None:
-                name = ""
-                if item.output_name is not None and item.output_name != "":
-                    name = item.output_name + " "
-                ts = datetime.fromtimestamp(item.output_timestamp)
-                hour = ts.strftime("%H:%M:%S")
-                text_chunk = "{}{}: ".format(name, hour) + text_chunk
-
-            text_chunk = "\n" + text_chunk
-
-            self.append_block()
-            self.append_chunk_start()
-
-        self.buffer += raw_chunk
-        self.append(self.format_chunk(text_chunk), "")
-
-    def append_block(self):
-        """Append block to output"""
-        cursor = self.get_output_node().textCursor()
-        cursor.movePosition(QTextCursor.End)
-        block_format = QTextBlockFormat()
-        block_format.setIndent(0)
-        cursor.insertBlock(block_format)
-        self.get_output_node().setTextCursor(cursor)
-
-    def to_end(self):
-        """Move cursor to end of output"""
-        cursor = self.get_output_node().textCursor()
-        cursor.movePosition(QTextCursor.End)
-        self.get_output_node().setTextCursor(cursor)
+                    self.window.core.debug.log(e)
 
-    def append_raw(self, text: str, type: str = "msg-bot", item: CtxItem = None):
-        """
-        Append and format raw text to output
-
-        :param text: text to append
-        :param type: type of message
-        :param item: CtxItem instance
-        """
-        prev_text = self.get_output_node().toPlainText()
-        if prev_text != "":
-            prev_text += "\n\n"
-        new_text = prev_text + text.strip()
-        self.get_output_node().setText(new_text)
-        cur = self.get_output_node().textCursor()  # Move cursor to end of text
-        cur.movePosition(QTextCursor.End)
-
-    def append_chunk_start(self):
-        """
-        Append start of chunk to output
-        """
-        cursor = self.get_output_node().textCursor()
-        cursor.movePosition(QTextCursor.End)
-        self.get_output_node().setTextCursor(cursor)
-
-    def append_context_item(self, item: CtxItem):
-        """
-        Append context item to output
-
-        :param item: context item
-        """
-        self.append_input(item)
-        self.append_output(item)
-        self.append_extra(item)
-
-    def get_image_html(self, url: str) -> str:
-        """
-        Get image HTML
-
-        :param url: URL to image
-        :return: HTML code
-        """
-        url, path = self.window.core.filesystem.extract_local_url(url)
-        return """\n{prefix}: {path}\n""".\
-            format(prefix=trans('chat.prefix.img'),
-                   path=path)
-
-    def get_url_html(self, url: str) -> str:
-        """
-        Get URL HTML
-
-        :param url: external URL
-        :return: HTML
-        """
-        return """\n{prefix}: {url}\n""".\
-            format(prefix=trans('chat.prefix.url'),
-                   url=url)
-
-    def get_file_html(self, url: str) -> str:
-        """
-        Get file HTML
-
-        :param url: URL to file
-        :return: HTML
-        """
-        url, path = self.window.core.filesystem.extract_local_url(url)
-        return """\n{prefix}: {path}\n""".\
-            format(prefix=trans('chat.prefix.file'),
-                   path=path)
-
-    def append(self, text: str, end: str = "\n"):
-        """
-        Append text to output
-
-        :param text: text to append
-        :param end: end of the line character
-        """
-        cur = self.get_output_node().textCursor()  # Move cursor to end of text
-        cur.movePosition(QTextCursor.End)
-        s = str(text) + end
-        while s:
-            head, sep, s = s.partition("\n")  # Split line at LF
-            cur.insertText(head)  # Insert text at cursor
-            if sep:  # New line if LF
-                cur.insertText("\n")
-        self.get_output_node().setTextCursor(cur)  # Update visible cursor
-
-    def append_timestamp(self, text: str, item: CtxItem) -> str:
-        """
-        Append timestamp to text
-
-        :param text: Input text
-        :param item: Context item
-        :return: Text with timestamp (if enabled)
-        """
-        if item is not None \
-                and self.is_timestamp_enabled() \
-                and item.input_timestamp is not None:
-            ts = datetime.fromtimestamp(item.input_timestamp)
-            hour = ts.strftime("%H:%M:%S")
-            text = '{}: {}'.format(hour, text)
-        return text
-
-    def pre_format_text(self, text: str) -> str:
-        """
-        Post-format text
-
-        :param text: text to format
-        :return: formatted text
-        """
-        text = text.strip()
-        text = text.replace("#~###~", "~###~")  # fix for #~###~ in text (previous versions)
-        text = text.replace("# ~###~", "~###~")  # fix for # ~###~ in text (previous versions)
-        return text
-
-    def post_format_text(self, text: str) -> str:
-        """
-        Post-format text
-
-        :param text: text to format
-        :return: formatted text
-        """
-        return text.strip()
-
-    def format_user_text(self, text: str) -> str:
-        """
-        Post-format user text
-
-        :param text: text to format
-        :return: formatted text
-        """
-        return text
-
-    def format_chunk(self, text: str) -> str:
-        """
-        Format chunk
-
-        :param text: text to format
-        :return: formatted text
-        """
-        return text
-
-    def is_timestamp_enabled(self) -> bool:
-        """
-        Check if timestamp is enabled
-
-        :return: True if timestamp is enabled
-        """
-        return self.window.core.config.get('output_timestamp')
-
-    def get_output_node(self) -> ChatOutput:
-        """
-        Get output node
-
-        :return: output node
-        """
-        return self.window.ui.nodes['output']
-
-    def get_input_node(self) -> ChatInput:
-        """
-        Get input node
-
-        :return: input node
-        """
-        return self.window.ui.nodes['input']
+        # truncate ctx index
+        index_path = os.path.join(self.window.core.config.path, 'context.json')
+        data = {}
+        data['items'] = {}
+        data['__meta__'] = self.window.core.config.append_meta()
+        try:
+            dump = json.dumps(data, indent=4)
+            with open(index_path, 'w', encoding="utf-8") as f:
+                f.write(dump)
+        except Exception as e:
+            self.window.core.debug.log(e)
+
+    def patch(self, version: Version) -> bool:
+        """
+        Migrate ctx to current app version
+
+        :param version: current app version
+        :return: True if migrated
+        """
+        return False
+
+    @staticmethod
+    def serialize_meta(meta: CtxMeta) -> dict:
+        """
+        Serialize CtxMeta to dict
+
+        :param meta: CtxMeta
+        :return: serialized CtxMeta dict
+        """
+        return {
+            'id': meta.id,
+            'name': meta.name,
+            'date': meta.date,
+            'mode': meta.mode,
+            'last_mode': meta.last_mode,
+            'thread': meta.thread,
+            'assistant': meta.assistant,
+            'preset': meta.preset,
+            'run': meta.run,
+            'status': meta.status,
+            'initialized': meta.initialized,
+        }
+
+    @staticmethod
+    def deserialize_meta(data: dict, meta: CtxMeta):
+        """
+        Deserialize CtxMeta from dict
+
+        :param data: dict
+        :param meta: CtxMeta
+        """
+        if 'id' in data:
+            meta.id = data['id']
+        if 'name' in data:
+            meta.name = data['name']
+        if 'date' in data:
+            meta.date = data['date']
+        if 'mode' in data:
+            meta.mode = data['mode']
+        if 'last_mode' in data:
+            meta.last_mode = data['last_mode']
+        if 'thread' in data:
+            meta.thread = data['thread']
+        if 'assistant' in data:
+            meta.assistant = data['assistant']
+        if 'preset' in data:
+            meta.preset = data['preset']
+        if 'run' in data:
+            meta.run = data['run']
+        if 'status' in data:
+            meta.status = data['status']
+        if 'initialized' in data:
+            meta.initialized = data['initialized']
+        return meta
+
+    @staticmethod
+    def serialize_item(ctx: CtxItem) -> dict:
+        """
+        Serialize CtxItem to dict
+
+        :param ctx: CtxItem
+        :return: serialized item dict
+        """
+        return {
+            'input': ctx.input,
+            'output': ctx.output,
+            'mode': ctx.mode,
+            'thread': ctx.thread,
+            'msg_id': ctx.msg_id,
+            'run_id': ctx.run_id,
+            'input_name': ctx.input_name,
+            'output_name': ctx.output_name,
+            'input_tokens': ctx.input_tokens,
+            'output_tokens': ctx.output_tokens,
+            'total_tokens': ctx.total_tokens,
+            'input_timestamp': ctx.input_timestamp,
+            'output_timestamp': ctx.output_timestamp
+        }
+
+    @staticmethod
+    def deserialize_item(data: dict, ctx: CtxItem):
+        """
+        Deserialize CtxItem from dict
+
+        :param data: data dict
+        :param ctx: CtxItem
+        """
+        if 'input' in data:
+            ctx.input = data['input']
+        if 'output' in data:
+            ctx.output = data['output']
+        if 'mode' in data:
+            ctx.mode = data['mode']
+        if 'thread' in data:
+            ctx.thread = data['thread']
+        if 'msg_id' in data:
+            ctx.msg_id = data['msg_id']
+        if 'run_id' in data:
+            ctx.run_id = data['run_id']
+        if 'input_name' in data:
+            ctx.input_name = data['input_name']
+        if 'output_name' in data:
+            ctx.output_name = data['output_name']
+        if 'input_tokens' in data:
+            ctx.input_tokens = data['input_tokens']
+        if 'output_tokens' in data:
+            ctx.output_tokens = data['output_tokens']
+        if 'total_tokens' in data:
+            ctx.total_tokens = data['total_tokens']
+        if 'input_timestamp' in data:
+            ctx.input_timestamp = data['input_timestamp']
+        if 'output_timestamp' in data:
+            ctx.output_timestamp = data['output_timestamp']
+
+    def dump(self, ctx: CtxItem) -> str:
+        """
+        Dump ctx to string
+
+        :param ctx: CtxItem
+        :return: dumped item as string (json)
+        """
+        return json.dumps(self.serialize_item(ctx))
+
+    def parse_data(self, data: list) -> list:
+        """
+        Parse ctx data from json to objects
+
+        :param data: ctx items data
+        :return: ctx items (deserialized) as objects list
+        """
+        items = []
+        for item in data:
+            ctx = CtxItem()
+            self.deserialize_item(item, ctx)
+            items.append(ctx)
+        return items
+
+    def parse_meta(self, data: dict) -> dict:
+        """
+        Parse ctx data from json to objects
+
+        :param data: ctx items data
+        :return: ctx items (deserialized) dict
+        """
+        items = {}
+        for k in data:
+            meta = CtxMeta()
+            self.deserialize_meta(data[k], meta)
+            items[meta.id] = meta
+        return items
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/core/settings.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/widget/dialog/editor_file.py`

 * *Files 27% similar despite different names*

```diff
@@ -2,182 +2,184 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.17 20:00:00                  #
+# Updated Date: 2024.04.14 18:00:00                  #
 # ================================================== #
 
-import json
+import datetime
 import os
-import shutil
 
+from PySide6.QtCore import Qt
+from PySide6.QtGui import QAction, QIcon
+from PySide6.QtWidgets import QMenuBar
 
-class Settings:
-    def __init__(self, window=None):
+from pygpt_net.utils import trans
+from .base import BaseDialog
+
+import pygpt_net.icons_rc
+
+class EditorFileDialog(BaseDialog):
+    def __init__(self, window=None, id="editor_file"):
         """
-        Settings core
+        File editor dialog
 
-        :param window: Window instance
+        :param window: main window
+        :param id: dialog id
         """
+        super(EditorFileDialog, self).__init__(window, id)
         self.window = window
-
-        # prepare cfg ids
-        self.ids = ['settings', 'editor']
-        self.active = {}
-        self.options = {}
-        self.sections = {}
-        self.initialized = False
-
-        # prepare active
-        for id in self.ids:
-            self.active[id] = False
-
-    def get_options(self, id: str = None) -> dict:
-        """
-        Return options for given id
-
-        :param id: settings id
-        :return: dictionary of options
-        """
-        if not self.initialized:
-            self.load()
-        if id is None:
-            return self.options
-        if id in self.options:
-            return self.options[id]
-
-    def get_sections(self, id: str = None) -> dict:
-        """
-        Return sections for given id
-
-        :param id: settings id
-        :return: dictionary of options
-        """
-        if not self.initialized:
-            self.load()
-        if id is None:
-            return self.sections
-        if id in self.sections:
-            return self.sections[id]
-
-    def get_persist_options(self) -> list:
-        """
-        Return persist options keys (options that should be persisted when loading defaults)
-
-        :return: list of keys
-        """
-        if not self.initialized:
-            self.load()
-        persist_options = []
-        for option in self.options:
-            if 'persist' in self.options[option] and self.options[option]['persist']:
-                persist_options.append(option)
-        return persist_options
-
-    def load(self):
-        """
-        Load settings options
-        """
-        self.options = self.window.core.config.get_options()
-        self.sections = self.window.core.config.get_sections()
-        self.initialized = True
-
-    def load_user_settings(self):
-        """Load user config (from user home dir)"""
-        # replace config with user base config
-        self.window.core.config.load_config()
-
-    def load_app_settings(self):
-        """Load base app config (from app root dir)"""
-        # persist important values
-        persist_options = self.get_persist_options()
-        persist_values = {}
-        for option in persist_options:
-            if self.window.core.config.has(option):
-                persist_values[option] = self.window.core.config.get(option)
-
-        # save current config backup
-        self.window.core.config.save('config.json.backup')
-
-        # replace config with app base config
-        self.window.core.config.from_base_config()
-
-        # restore persisted values
-        for option in persist_options:
-            if option in persist_values:
-                self.window.core.config.set(option, persist_values[option])
-
-    def load_default_editor(self):
-        """Load defaults from file"""
-        file = self.window.ui.dialog['config.editor'].file
-        self.load_editor(file)
-        self.window.ui.status("Loaded defaults from file: {}".format(file))
-
-    def load_editor(self, file: str = None):
-        """
-        Load file to editor
-
-        :param file: file name
-        """
-        # load file
-        path = None
-        if file.endswith('.json'):
-            path = os.path.join(self.window.core.config.path, file)
-        elif file.endswith('.css'):
-            path = os.path.join(self.window.core.config.path, 'css', file)
-
-        self.window.ui.paths['config'].setText(path)
-        self.window.ui.dialog['config.editor'].file = file
-        try:
-            with open(path, 'r', encoding="utf-8") as f:
-                txt = f.read()
-                self.window.ui.editor['config'].setPlainText(txt)
-        except Exception as e:
-            self.window.core.debug.log(e)
-            self.window.ui.status("Error loading file: {}".format(e))
-
-    def save_editor(self):
-        """Save file to disk"""
-        file = self.window.ui.dialog['config.editor'].file
-        path = None
-        data = self.window.ui.editor['config'].toPlainText()
-
-        # check if this is a valid JSON
-        if file.endswith('.json'):
-            try:
-                json.loads(data)
-            except Exception as e:
-                self.window.ui.status("This is not a valid JSON: {}".format(e))
-                self.window.ui.dialogs.alert("This is not a valid JSON: {}".format(e))
+        self.file = None
+        self.base_content = ""
+        self.disable_geometry_store = False
+        self.id = id
+        self.accept_close = False
+
+    def reset_file_title(self):
+        """Reset file title"""
+        self.setWindowTitle(trans("untitled"))
+
+    def update_file_title(self, force: bool = False):
+        """
+        Update file edited time title
+
+        :param force: force update
+        """
+        title = trans("untitled")
+        if self.file:
+            title = os.path.basename(self.file)
+        if self.is_changed():
+            title += "*"
+        if self.file and os.path.exists(self.file):
+            file_size = self.window.core.filesystem.sizeof_fmt(os.path.getsize(self.file))
+            title += " - {}".format(file_size)
+        if self.is_changed() or force:
+            time = datetime.datetime.now().strftime("%H:%M")
+            title += " (" + time + ")"
+        self.setWindowTitle(title)
+
+    def is_changed(self) -> bool:
+        """
+        Check if file was changed
+
+        :return: True if file was changed
+        """
+        return str(self.window.ui.editor[self.id].toPlainText()) != str(self.base_content)
+
+    def setup_menu(self) -> QMenuBar:
+        """
+        Setup menu
+
+        :return: menu bar
+        """
+        self.menu_bar = QMenuBar()
+        self.file_menu = self.menu_bar.addMenu(trans("menu.file"))
+        self.actions = {}
+
+        # new
+        self.actions["new"] = QAction(QIcon(":/icons/add.svg"), trans("action.new"))
+        self.actions["new"].triggered.connect(
+            lambda: self.window.tools.get("editor").new()
+        )
+
+        # open
+        self.actions["open"] = QAction(QIcon(":/icons/folder.svg"), trans("action.open"))
+        self.actions["open"].triggered.connect(
+            lambda: self.window.tools.get("editor").open_file(self.id, auto_close=True)
+        )
+
+        # open (new window)
+        self.actions["open_new"] = QAction(QIcon(":/icons/folder.svg"), trans("action.open_new_window"))
+        self.actions["open_new"].triggered.connect(
+            lambda: self.window.tools.get("editor").open_file(self.id, auto_close=False)
+        )
+
+        # save
+        self.actions["save"] = QAction(QIcon(":/icons/save.svg"), trans("action.save"))
+        self.actions["save"].triggered.connect(
+            lambda: self.window.tools.get("editor").save(self.id)
+        )
+
+        # save as
+        self.actions["save_as"] = QAction(QIcon(":/icons/save.svg"), trans("action.save_as"))
+        self.actions["save_as"].triggered.connect(
+            lambda: self.window.tools.get("editor").save_as_file(self.id)
+        )
+
+        # clear
+        self.actions["clear"] = QAction(QIcon(":/icons/close.svg"), trans("action.clear"))
+        self.actions["clear"].triggered.connect(
+            lambda: self.window.tools.get("editor").clear(self.id)
+        )
+
+        # close
+        self.actions["exit"] = QAction(QIcon(":/icons/logout.svg"), trans("menu.file.exit"))
+        self.actions["exit"].triggered.connect(
+            lambda: self.window.tools.get("editor").close(self.id)
+        )
+
+        # add actions
+        self.file_menu.addAction(self.actions["new"])
+        self.file_menu.addAction(self.actions["open"])
+        self.file_menu.addAction(self.actions["open_new"])
+        self.file_menu.addAction(self.actions["save"])
+        self.file_menu.addAction(self.actions["save_as"])
+        self.file_menu.addAction(self.actions["clear"])
+        self.file_menu.addAction(self.actions["exit"])
+
+        return self.menu_bar
+
+    def append_layout(self, layout):
+        """
+        Update layout
+
+        :param layout: layout
+        """
+        layout.setMenuBar(self.setup_menu())  # attach menu
+        self.setLayout(layout)
+
+    def closeEvent(self, event):
+        """
+        Close event
+
+        :param event: close event
+        """
+        if self.id != "editor_file" and not self.accept_close:  # only for text editor tool
+            if self.is_changed():
+                self.window.ui.dialogs.confirm(
+                    type='editor.changed.close',
+                    id=self.id,
+                    msg=trans("changed.confirm"),
+                )
+                event.ignore()
                 return
-            path = os.path.join(self.window.core.config.path, file)
-        elif file.endswith('.css'):
-            path = os.path.join(self.window.core.config.path, 'css', file)
-
-        # make backup of current file
-        backup_file = file + '.backup'
-        if file.endswith('.css'):
-            backup_path = os.path.join(self.window.core.config.path, "css", backup_file)
+        self.cleanup()
+        super(EditorFileDialog, self).closeEvent(event)
+
+    def keyPressEvent(self, event):
+        """
+        Key press event
+
+        :param event: key press event
+        """
+        # CTRL+S
+        if self.id != "editor_file":  # only for text editor
+            if event.modifiers() & Qt.ControlModifier and event.key() == Qt.Key_S:
+                self.window.tools.get("editor").save(self.id)
+
+        if event.key() == Qt.Key_Escape:
+            self.cleanup()
+            self.close()  # close dialog when the Esc key is pressed.
         else:
-            backup_path = os.path.join(self.window.core.config.path, backup_file)
-        if os.path.isfile(path):
-            shutil.copyfile(path, backup_path)
-            self.window.ui.status("Created backup file: {}".format(backup_file))
-
-        # save changes to current file
-        try:
-            with open(path, 'w', encoding="utf-8") as f:
-                f.write(data)
-            self.window.ui.status("Saved file: {}".format(path))
-            self.window.ui.dialogs.alert("Saved file: {}".format(path))
-            if file == "config.json":
-                self.window.core.config.load_config()  # reload config
-            elif file == "models.json":
-                self.window.core.models.load()  # reload models
-            elif file.endswith('.css'):
-                self.window.controller.theme.reload(force=True)  # reload theme
-        except Exception as e:
-            self.window.core.debug.log(e)
-            self.window.ui.status("Error saving file: {}".format(path))
+            super(EditorFileDialog, self).keyPressEvent(event)
+
+    def cleanup(self):
+        """
+        Cleanup on close
+        """
+        if self.id == "editor_file":
+            self.window.core.settings.active['editor'] = False
+            self.window.controller.settings.close('editor')
+            self.window.controller.settings.update()
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/core/tokens.py` & `pygpt_net-2.2.0/src/pygpt_net/core/tokens.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/core/updater/__init__.py` & `pygpt_net-2.2.0/src/pygpt_net/core/updater/__init__.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/core/web.py` & `pygpt_net-2.2.0/src/pygpt_net/core/web.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/core/worker.py` & `pygpt_net-2.2.0/src/pygpt_net/core/worker.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/data/config/config.json` & `pygpt_net-2.2.0/src/pygpt_net/data/config/config.json`

 * *Files 27% similar despite different names*

#### Pretty-printed

 * *Similarity: 0.6855828220858896%*

 * *Differences: {"'__meta__'": "{'version': '2.2.0', 'app.version': '2.2.0', 'updated_at': '2024-04-28T00:00:00'}",*

 * * "'api_endpoint'": "'https://api.openai.com/v1'",*

 * * "'assistant.store.hide_threads'": 'True',*

 * * "'audio.transcribe.convert_video'": 'True',*

 * * "'ctx.code_interpreter'": 'True',*

 * * "'ctx.convert_lists'": 'False',*

 * * "'ctx.counters.all'": 'False',*

 * * "'ctx.edit_icons'": 'False',*

 * * "'ctx.list.expanded'": '[]',*

 * * "'ctx.records.filter.labels'": '[0, 1, 2, 3, 4, 5, 6, 7]',*

 * * "'ctx.sources'": 'True',*

 * * "'ctx.use_extra'": 'True',*

 * * […]*

```diff
@@ -1,36 +1,53 @@
 {
     "__meta__": {
-        "app.version": "2.1.9",
-        "updated_at": "2024-03-04T00:00:00",
-        "version": "2.1.9"
+        "app.version": "2.2.0",
+        "updated_at": "2024-04-28T00:00:00",
+        "version": "2.2.0"
     },
     "agent.auto_stop": true,
     "agent.goal.notify": true,
     "agent.idx": "base",
     "agent.iterations": 3,
     "agent.mode": "chat",
     "ai_name": "",
+    "api_endpoint": "https://api.openai.com/v1",
     "api_key": "",
     "assistant": "",
+    "assistant.store.hide_threads": true,
     "assistant_thread": "",
     "attachments_capture_clear": true,
     "attachments_send_clear": true,
+    "audio.transcribe.convert_video": true,
     "cmd": false,
-    "cmd.prompt": "RUNNING COMMANDS:\nYou can execute commands and also use them to run commands in the user's environment.\n\nImportant rules:\n1) The list of available commands is defined below.\n2) To execute a defined command, return a JSON object with the \"cmd\" key and the command name as its value.\n3) Always use the syntax defined in the command definition and the correct command name.\n4) Put command parameters in the \"params\" key. Example: {\"cmd\": \"web\", \"params\": {\"query\": \"some query\"}}. Use ONLY this syntax. DO NOT use any other syntax.\n5) Append the JSON object to the response at the end and around it with the `~###~` characters. Example: text response ~###~ {\"cmd\": \"web\", \"params\": {\"query\": \"some query\"}} ~###~.\n6) If you want to execute a command without any response, return only the JSON object.\n7) Responses from commands will be returned in the \"result\" key.\n8) Commands are listed one command per line and each command is described with syntax: \"<name>\": <action>, params: <params>\n9) Always use the correct command name, e.g., if the command name is \"sys_exec\", then use \"sys_exec\" and don't use other names, like \"run\" or something.\n10) With these commands, you are allowed to run external commands and apps in the user's system (environment).\n11) Always use the defined syntax to prevent errors.\n12) Always choose the most appropriate command from the list to perform the task, based on the description of the action performed by a given command.\n13) Reply to the user in the language in which they started the conversation with you.\n14) Use ONLY params described in the command definition, do NOT use any additional params not described on the list.\n15) ALWAYS remember that any text content must appear at the beginning of your response and commands must only be included at the end.\n16) Every command parameter must be placed in one line, so when you generate code you must put all of the code in one line.\n17) Run the commands immediately.\n\nCommands list:",
     "context_threshold": 200,
     "ctx": "",
     "ctx.auto_summary": true,
     "ctx.auto_summary.model": "gpt-3.5-turbo-1106",
-    "ctx.auto_summary.prompt": "Summarize topic of this conversation in one sentence. Use best keywords to describe it. Summary must be in the same language as the conversation and it will be used for conversation title so it must be EXTREMELY SHORT and concise - use maximum 5 words: \n\nUser: {input}\nAI Assistant: {output}",
-    "ctx.auto_summary.system": "You are an expert in conversation summarization",
+    "ctx.code_interpreter": true,
+    "ctx.convert_lists": false,
+    "ctx.counters.all": false,
+    "ctx.edit_icons": false,
+    "ctx.list.expanded": [],
     "ctx.records.filter": "all",
+    "ctx.records.filter.labels": [
+        0,
+        1,
+        2,
+        3,
+        4,
+        5,
+        6,
+        7
+    ],
     "ctx.records.limit": 0,
     "ctx.search.string": "",
     "ctx.search_content": false,
+    "ctx.sources": true,
+    "ctx.use_extra": true,
     "current_model": {
         "agent": "gpt-4-turbo-preview",
         "assistant": "gpt-3.5-turbo",
         "chat": "gpt-3.5-turbo",
         "completion": "gpt-3.5-turbo-instruct",
         "img": "dall-e-3",
         "langchain": "gpt-3.5-turbo",
@@ -44,28 +61,30 @@
         "completion": "",
         "img": "",
         "langchain": "",
         "llama_index": "",
         "vision": ""
     },
     "debug": false,
-    "default_prompt": "You are a helpful assistant.",
     "download.dir": "download",
     "font_size": 12,
     "font_size.ctx": 12,
     "font_size.input": 12,
     "font_size.toolbox": 12,
     "frequency_penalty": 0.0,
     "img_dialog_open": true,
-    "img_prompt": "Whenever I provide a basic idea or concept for an image, such as 'a picture of mountains', I want you to ALWAYS translate it into English and expand and elaborate on this idea. Use your knowledge and creativity to add details that would make the image more vivid and interesting. This could include specifying the time of day, weather conditions, surrounding environment, and any additional elements that could enhance the scene. Your goal is to create a detailed and descriptive prompt that provides DALL-E with enough information to generate a rich and visually appealing image. Remember to maintain the original intent of my request while enriching the description with your imaginative details.\n",
     "img_prompt_model": "gpt-4-1106-preview",
     "img_quality": "standard",
     "img_raw": true,
     "img_resolution": "1792x1024",
     "img_variants": 1,
+    "interpreter.auto_clear": true,
+    "interpreter.edit": false,
+    "interpreter.execute_all": true,
+    "interpreter.input": "",
     "lang": "en",
     "layout.density": -1,
     "layout.dialog.geometry": {},
     "layout.dialog.geometry.store": true,
     "layout.dpi.factor": 1.0,
     "layout.dpi.scaling": true,
     "layout.groups": {},
@@ -76,39 +95,69 @@
     "layout.tray.minimize": false,
     "layout.window": {},
     "license.accepted": false,
     "llama.hub.loaders.args": [],
     "llama.hub.loaders.use_local": false,
     "llama.idx.auto": false,
     "llama.idx.auto.index": "base",
+    "llama.idx.auto.modes": "chat,completion,vision,assistant,langchain,llama_index,agent",
     "llama.idx.current": "base",
+    "llama.idx.custom_meta": [
+        {
+            "extensions": "*",
+            "key": "file_name",
+            "value": "{relative_path}"
+        }
+    ],
+    "llama.idx.custom_meta.web": [],
     "llama.idx.db.index": "base",
     "llama.idx.db.last": 0,
-    "llama.idx.excluded_ext": "3g2,3gp,7z,a,aac,aiff,alac,apk,apk,apng,app,ar,avif,bin,bz2,cab,class,deb,deb,dll,dmg,dmg,drv,dsd,dylib,dylib,ear,egg,elf,esd,exe,flac,flv,gz,heic,heif,ico,img,iso,jar,ko,lib,lz,lz4,m2v,mpc,msi,nrg,o,ogg,ogv,pcm,pkg,pkg,psd,pyc,rar,rpm,rpm,so,so,svg,swm,sys,tar,vdi,vhd,vhdx,vmdk,vob,war,whl,wim,wma,wmv,xz,zip,zst",
+    "llama.idx.embeddings.args": [
+        {
+            "name": "model",
+            "type": "str",
+            "value": "text-embedding-3-small"
+        }
+    ],
+    "llama.idx.embeddings.env": [
+        {
+            "name": "OPENAI_API_KEY",
+            "value": "{api_key}"
+        },
+        {
+            "name": "OPENAI_API_BASE",
+            "value": "{api_endpoint}"
+        }
+    ],
+    "llama.idx.embeddings.limit.rpm": 100,
+    "llama.idx.embeddings.provider": "openai",
+    "llama.idx.excluded.ext": "3g2,3gp,7z,a,aac,aiff,alac,apk,apk,apng,app,ar,avif,bin,bz2,cab,class,deb,deb,dll,dmg,dmg,drv,dsd,dylib,dylib,ear,egg,elf,esd,exe,flac,flv,gz,heic,heif,ico,img,iso,jar,ko,lib,lz,lz4,m2v,mpc,msi,nrg,o,ogg,ogv,pcm,pkg,pkg,psd,pyc,rar,rpm,rpm,so,so,svg,swm,sys,tar,vdi,vhd,vhdx,vmdk,vob,war,whl,wim,wma,wmv,xz,zip,zst",
+    "llama.idx.excluded.force": false,
     "llama.idx.list": [
         {
             "id": "base",
             "name": "Base"
         }
     ],
     "llama.idx.raw": false,
     "llama.idx.recursive": false,
     "llama.idx.replace_old": true,
     "llama.idx.status": {},
     "llama.idx.storage": "SimpleVectorStore",
     "llama.idx.storage.args": [],
-    "llama.log": false,
     "lock_modes": true,
     "log.assistants": false,
+    "log.ctx": true,
     "log.dalle": false,
     "log.events": false,
     "log.level": "error",
     "log.llama": false,
     "log.plugins": false,
     "max_output_tokens": 1024,
+    "max_requests_limit": 60,
     "max_tokens_length": 32000,
     "max_total_tokens": 128000,
     "mode": "chat",
     "model": "gpt-3.5-turbo",
     "notepad.num": 1,
     "organization_key": "",
     "output_timestamp": false,
@@ -132,15 +181,29 @@
         "idx_llama_index": false,
         "openai_dalle": true,
         "openai_vision": true,
         "real_time": true
     },
     "presence_penalty": 0.0,
     "preset": "current.chat",
+    "preset.plugins": "",
     "prompt": "",
+    "prompt.agent.continue": "continue if needed...",
+    "prompt.agent.goal": "STATUS UPDATE: You can use \"goal_update\" command to update status of the task. Remember to put it in the form as given, at the end of the surrounding ~###~ marks, e.g.: ~###~{\"cmd\": \"goal_update\", \"params\": {\"status\": \"finished\"}}~###~.\nON GOAL FINISH: When you believe that the task has been completed 100% and all goals have been achieved, run \"goal_update\" command with status = \"finished\".\nON PAUSE, FAILED OR WAIT: If more data from user is needed to achieve the goal or task run must be paused or task was failed or when the conversation falls into a loop, THEN STOP REASONING and include \"goal_update\" command with one of these statuses: \"pause\", \"failed\" or \"wait\".",
+    "prompt.cmd": "RUNNING COMMANDS:\nYou can execute commands and also use them to run commands in the user's environment.\n\nImportant rules:\n\n1) To execute a command, return a JSON object with the \"cmd\" key and the command name as its value.\n2) Always use the syntax defined in the command definition and the correct command name.\n3) Put command parameters in the \"params\" key. Example: {\"cmd\": \"web_search\", \"params\": {\"query\": \"some query\"}}. Use ONLY this syntax. DO NOT use any other syntax.\n4) Append the JSON object to the response at the end and around it with the `~###~` characters. Example: text response ~###~ {\"cmd\": \"web_search\", \"params\": {\"query\": \"some query\"}} ~###~.\n5) If you want to execute a command without any response, return only the JSON object.\n6) Responses from commands will be returned in the \"result\" key.\n7) Always use the correct command name, e.g., if the command name is \"sys_exec\", then use \"sys_exec\" and don't use other names, like \"run\" or something.\n8) With commands, you have access to user's local files and you are allowed to run external commands and apps in the user's system (environment).\n9) Always use the defined syntax to prevent errors.\n10) Always choose the most appropriate command from the list to perform the task, based on the description of the action performed by a given command.\n11) Reply to the user in the language in which they started the conversation with you.\n12) Use ONLY params described in the command definition, do NOT use any additional params not described on the list.\n13) ALWAYS remember that any text content must appear at the beginning of your response and commands must be included at the end of the response.\n14) Every command parameter must be placed in one line, so when you generate code you must put all of the code in one line.\n15) Run the commands immediately without asking for permission.\n16) Use the current path by default when accessing the files and full path is not provided.\n17) The list of available commands is defined below, described in JSON schema.\n\nJSON schema with commands list:\n----------------\n{schema}\n----------------\n{extra}",
+    "prompt.cmd.extra": "When executing command, always use following JSON syntax: {\"cmd\": \"<command_name>\", \"params\": {\"<param_name>\": \"<param_value>\"}}",
+    "prompt.cmd.extra.assistants": "IMPORTANT: never execute above commands in your environment. Instead, could you provide me with the JSON syntax for the command you would use? It will be executed on my system automatically. Always return the command from above schema in JSON format inside the special characters ~###~",
+    "prompt.ctx.auto_summary.system": "You are an expert in conversation summarization",
+    "prompt.ctx.auto_summary.user": "Summarize topic of this conversation in one sentence. Use best keywords to describe it. Summary must be in the same language as the conversation and it will be used for conversation title so it must be EXTREMELY SHORT and concise - use maximum 5 words: \n\nHuman: {input}\nAI Assistant: {output}",
+    "prompt.default": "You are a helpful assistant.",
+    "prompt.img": "Whenever I provide a basic idea or concept for an image, such as 'a picture of mountains', I want you to ALWAYS translate it into English and expand and elaborate on this idea. Use your knowledge and creativity to add details that would make the image more vivid and interesting. This could include specifying the time of day, weather conditions, surrounding environment, and any additional elements that could enhance the scene. Your goal is to create a detailed and descriptive prompt that provides DALL-E with enough information to generate a rich and visually appealing image. Remember to maintain the original intent of my request while enriching the description with your imaginative details.\n",
+    "render.blocks": true,
+    "render.code_syntax": "github-dark",
+    "render.engine": "web",
+    "render.open_gl": false,
     "render.plain": false,
     "send_clear": true,
     "send_mode": 2,
     "store_history": true,
     "store_history_time": true,
     "stream": true,
     "temperature": 1.0,
@@ -151,14 +214,18 @@
     "updater.check.bg.last_time": "",
     "updater.check.bg.last_version": "",
     "updater.check.launch": true,
     "upload.data_dir": false,
     "upload.store": true,
     "use_context": true,
     "user_name": "",
+    "video.player.path": "",
+    "video.player.volume": 100,
+    "video.player.volume.mute": false,
     "vision.capture.auto": false,
     "vision.capture.enabled": false,
     "vision.capture.height": 720,
     "vision.capture.idx": 0,
     "vision.capture.quality": 95,
-    "vision.capture.width": 1280
+    "vision.capture.width": 1280,
+    "zoom": 1.0
 }
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/data/config/modes.json` & `pygpt_net-2.2.0/src/pygpt_net/data/config/modes.json`

 * *Files 8% similar despite different names*

#### Pretty-printed

 * *Similarity: 0.875%*

 * *Differences: {"'__meta__'": "{'version': '2.2.0', 'app.version': '2.2.0', 'updated_at': '2024-04-28T00:00:00'}"}*

```diff
@@ -1,12 +1,12 @@
 {
     "__meta__": {
-        "app.version": "2.1.9",
-        "updated_at": "2024-03-04T00:00:00",
-        "version": "2.1.9"
+        "app.version": "2.2.0",
+        "updated_at": "2024-04-28T00:00:00",
+        "version": "2.2.0"
     },
     "items": {
         "agent": {
             "default": false,
             "id": "agent",
             "label": "mode.agent",
             "name": "Agent (autonomous)"
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/data/config/presets/current.agent.json` & `pygpt_net-2.2.0/src/pygpt_net/data/config/presets/current.agent.json`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/data/config/settings.json` & `pygpt_net-2.2.0/src/pygpt_net/data/config/settings.json`

 * *Files 21% similar despite different names*

#### Pretty-printed

 * *Similarity: 0.6543955176767676%*

 * *Differences: {"'api_endpoint'": "OrderedDict([('section', 'general'), ('type', 'text'), ('slider', False), "*

 * *                   "('label', 'settings.api_endpoint'), ('description', "*

 * *                   "'settings.api_endpoint.desc'), ('value', 'https://api.openai.com/v1'), ('min', "*

 * *                   "None), ('max', None), ('multiplier', None), ('step', None), ('secret', False), "*

 * *                   "('advanced', False)])",*

 * * "'context_threshold'": "{'description': 'settings.context_threshold.desc'}",*

 * * "'ctx.auto_summar […]*

```diff
@@ -35,14 +35,28 @@
         "section": "agent",
         "slider": false,
         "step": null,
         "type": "combo",
         "use": "agent_modes",
         "value": "chat"
     },
+    "api_endpoint": {
+        "advanced": false,
+        "description": "settings.api_endpoint.desc",
+        "label": "settings.api_endpoint",
+        "max": null,
+        "min": null,
+        "multiplier": null,
+        "secret": false,
+        "section": "general",
+        "slider": false,
+        "step": null,
+        "type": "text",
+        "value": "https://api.openai.com/v1"
+    },
     "api_key": {
         "advanced": false,
         "extra": {
             "bold": true
         },
         "label": "settings.api_key",
         "max": null,
@@ -52,28 +66,17 @@
         "secret": true,
         "section": "general",
         "slider": false,
         "step": null,
         "type": "text",
         "value": ""
     },
-    "cmd.prompt": {
-        "advanced": true,
-        "label": "settings.cmd.prompt",
-        "max": null,
-        "min": null,
-        "multiplier": null,
-        "section": "model",
-        "slider": false,
-        "step": null,
-        "type": "textarea",
-        "value": ""
-    },
     "context_threshold": {
         "advanced": false,
+        "description": "settings.context_threshold.desc",
         "label": "settings.context_threshold",
         "max": 1000,
         "min": 1,
         "multiplier": 1,
         "section": "model",
         "slider": true,
         "step": 1,
@@ -89,49 +92,50 @@
         "section": "ctx",
         "slider": false,
         "step": null,
         "type": "bool",
         "value": true
     },
     "ctx.auto_summary.model": {
-        "advanced": true,
+        "advanced": false,
         "label": "settings.ctx.auto_summary.model",
         "max": null,
         "min": null,
         "multiplier": null,
         "section": "ctx",
         "slider": false,
         "step": null,
         "type": "combo",
         "use": "models",
         "value": "gpt-3.5-turbo-1106"
     },
-    "ctx.auto_summary.prompt": {
-        "advanced": true,
-        "label": "settings.ctx.auto_summary.prompt",
+    "ctx.code_interpreter": {
+        "advanced": false,
+        "description": "settings.ctx.code_interpreter.desc",
+        "label": "settings.ctx.code_interpreter",
         "max": null,
         "min": null,
         "multiplier": null,
         "section": "ctx",
         "slider": false,
         "step": null,
-        "type": "textarea",
-        "value": ""
+        "type": "bool",
+        "value": true
     },
-    "ctx.auto_summary.system": {
-        "advanced": true,
-        "label": "settings.ctx.auto_summary.system",
+    "ctx.convert_lists": {
+        "advanced": false,
+        "label": "settings.ctx.convert_lists",
         "max": null,
         "min": null,
         "multiplier": null,
         "section": "ctx",
         "slider": false,
         "step": null,
-        "type": "textarea",
-        "value": ""
+        "type": "bool",
+        "value": true
     },
     "ctx.records.limit": {
         "advanced": false,
         "label": "settings.ctx.records.limit",
         "max": 10000,
         "min": 0,
         "multiplier": 1,
@@ -150,14 +154,40 @@
         "multiplier": null,
         "section": "ctx",
         "slider": false,
         "step": null,
         "type": "bool",
         "value": false
     },
+    "ctx.sources": {
+        "advanced": false,
+        "description": "settings.ctx.sources.desc",
+        "label": "settings.ctx.sources",
+        "max": null,
+        "min": null,
+        "multiplier": null,
+        "section": "ctx",
+        "slider": false,
+        "step": null,
+        "type": "bool",
+        "value": true
+    },
+    "ctx.use_extra": {
+        "advanced": false,
+        "description": "settings.ctx.use_extra.desc",
+        "label": "settings.ctx.use_extra",
+        "max": null,
+        "min": null,
+        "multiplier": null,
+        "section": "ctx",
+        "slider": false,
+        "step": null,
+        "type": "bool",
+        "value": true
+    },
     "debug": {
         "advanced": false,
         "label": "settings.developer.debug",
         "max": 0,
         "min": 0,
         "multiplier": 1,
         "section": "developer",
@@ -249,26 +279,14 @@
         "multiplier": null,
         "section": "images",
         "slider": false,
         "step": null,
         "type": "bool",
         "value": true
     },
-    "img_prompt": {
-        "advanced": true,
-        "label": "settings.img_prompt",
-        "max": null,
-        "min": null,
-        "multiplier": null,
-        "section": "images",
-        "slider": false,
-        "step": null,
-        "type": "textarea",
-        "value": ""
-    },
     "img_prompt_model": {
         "advanced": true,
         "label": "settings.img_prompt_model",
         "max": null,
         "min": null,
         "multiplier": null,
         "section": "images",
@@ -484,43 +502,164 @@
         "section": "llama-index",
         "slider": false,
         "step": null,
         "tab": "update",
         "type": "text",
         "value": "base"
     },
-    "llama.idx.excluded_ext": {
+    "llama.idx.auto.modes": {
+        "advanced": false,
+        "description": "model.mode.desc",
+        "label": "settings.llama.extra.btn.idx_auto.modes",
+        "max": null,
+        "min": null,
+        "multiplier": null,
+        "section": "llama-index",
+        "slider": false,
+        "step": null,
+        "tab": "update",
+        "type": "text",
+        "value": ""
+    },
+    "llama.idx.custom_meta": {
+        "advanced": false,
+        "description": "settings.llama.idx.custom_meta.desc",
+        "keys": {
+            "extensions": "text",
+            "key": "text",
+            "value": "textarea"
+        },
+        "label": "settings.llama.idx.custom_meta",
+        "max": null,
+        "min": null,
+        "multiplier": null,
+        "section": "llama-index",
+        "slider": false,
+        "step": null,
+        "tab": "indexing",
+        "type": "dict",
+        "value": []
+    },
+    "llama.idx.custom_meta.web": {
         "advanced": false,
-        "description": "settings.llama.idx.excluded_ext.desc",
-        "label": "settings.llama.idx.excluded_ext",
+        "description": "settings.llama.idx.custom_meta.web.desc",
+        "keys": {
+            "key": "text",
+            "loader": {
+                "type": "combo",
+                "use": "llama_index_loaders_web"
+            },
+            "value": "textarea"
+        },
+        "label": "settings.llama.idx.custom_meta.web",
+        "max": null,
+        "min": null,
+        "multiplier": null,
+        "section": "llama-index",
+        "slider": false,
+        "step": null,
+        "tab": "indexing",
+        "type": "dict",
+        "value": []
+    },
+    "llama.idx.embeddings.args": {
+        "advanced": false,
+        "description": "settings.llama.idx.embeddings.args.desc",
+        "keys": {
+            "name": "text",
+            "type": {
+                "type": "combo",
+                "use": "var_types"
+            },
+            "value": "text"
+        },
+        "label": "settings.llama.idx.embeddings.args",
+        "section": "llama-index",
+        "tab": "embeddings",
+        "type": "dict",
+        "value": []
+    },
+    "llama.idx.embeddings.env": {
+        "advanced": false,
+        "description": "settings.llama.idx.embeddings.env.desc",
+        "keys": {
+            "name": "text",
+            "value": "text"
+        },
+        "label": "settings.llama.idx.embeddings.env",
+        "section": "llama-index",
+        "tab": "embeddings",
+        "type": "dict",
+        "value": []
+    },
+    "llama.idx.embeddings.limit.rpm": {
+        "advanced": false,
+        "description": "settings.llama.idx.embeddings.limit.rpm.desc",
+        "label": "settings.llama.idx.embeddings.limit.rpm",
+        "max": null,
+        "min": 0,
+        "multiplier": 1,
+        "section": "llama-index",
+        "slider": false,
+        "step": 1,
+        "tab": "embeddings",
+        "type": "int",
+        "value": 60
+    },
+    "llama.idx.embeddings.provider": {
+        "advanced": false,
+        "label": "settings.llama.idx.embeddings.provider",
+        "section": "llama-index",
+        "tab": "embeddings",
+        "type": "combo",
+        "use": "embeddings_providers",
+        "value": "openai"
+    },
+    "llama.idx.excluded.ext": {
+        "advanced": false,
+        "description": "settings.llama.idx.excluded.ext.desc",
+        "label": "settings.llama.idx.excluded.ext",
         "max": null,
         "min": null,
         "multiplier": null,
         "section": "llama-index",
         "slider": false,
         "step": null,
         "tab": "indexing",
         "type": "textarea",
         "value": ""
     },
+    "llama.idx.excluded.force": {
+        "advanced": false,
+        "description": "settings.llama.idx.excluded.force.desc",
+        "label": "settings.llama.idx.excluded.force",
+        "max": null,
+        "min": null,
+        "multiplier": null,
+        "section": "llama-index",
+        "slider": false,
+        "step": null,
+        "tab": "indexing",
+        "type": "bool",
+        "value": false
+    },
     "llama.idx.list": {
         "advanced": false,
         "keys": {
             "id": "text",
             "name": "text"
         },
         "label": "settings.llama.idx.list",
         "max": null,
         "min": null,
         "multiplier": null,
         "section": "llama-index",
         "slider": false,
         "step": null,
         "type": "dict",
-        "use": "models",
         "value": [
             {
                 "id": "base",
                 "name": "Base"
             }
         ]
     },
@@ -603,14 +742,26 @@
         "multiplier": null,
         "section": "developer",
         "slider": false,
         "step": null,
         "type": "bool",
         "value": false
     },
+    "log.ctx": {
+        "advanced": false,
+        "label": "Log and debug context",
+        "max": null,
+        "min": null,
+        "multiplier": null,
+        "section": "developer",
+        "slider": false,
+        "step": null,
+        "type": "bool",
+        "value": true
+    },
     "log.dalle": {
         "advanced": false,
         "label": "Log DALL-E usage to console",
         "max": null,
         "min": null,
         "multiplier": null,
         "section": "developer",
@@ -690,32 +841,44 @@
         "multiplier": 1,
         "section": "model",
         "slider": true,
         "step": 1,
         "type": "int",
         "value": 50
     },
+    "max_requests_limit": {
+        "advanced": false,
+        "description": "settings.max_requests_limit.desc",
+        "label": "settings.max_requests_limit",
+        "max": null,
+        "min": 0,
+        "multiplier": 1,
+        "section": "model",
+        "slider": false,
+        "step": 1,
+        "type": "int",
+        "value": 60
+    },
     "max_total_tokens": {
         "advanced": false,
         "label": "settings.max_total_tokens",
         "max": 256000,
         "min": 0,
         "multiplier": 1,
         "section": "model",
         "slider": true,
         "step": 1,
         "type": "int",
         "value": 400
     },
     "notepad.num": {
         "advanced": false,
-        "description": "settings.restart.required",
         "label": "settings.notepad.num",
         "max": 10,
-        "min": 0,
+        "min": 1,
         "multiplier": 1,
         "section": "general",
         "slider": true,
         "step": 1,
         "type": "int",
         "value": 5
     },
@@ -747,14 +910,159 @@
         "multiplier": 100,
         "section": "model",
         "slider": true,
         "step": 1,
         "type": "float",
         "value": 0.0
     },
+    "prompt.agent.continue": {
+        "advanced": false,
+        "description": "settings.prompt.agent.continue.desc",
+        "label": "settings.prompt.agent.continue",
+        "max": 0,
+        "min": 0,
+        "multiplier": 1,
+        "section": "prompts",
+        "slider": false,
+        "step": 1,
+        "type": "textarea",
+        "value": "continue if needed..."
+    },
+    "prompt.agent.goal": {
+        "advanced": false,
+        "description": "settings.prompt.agent.goal.desc",
+        "label": "settings.prompt.agent.goal",
+        "max": 0,
+        "min": 0,
+        "multiplier": 1,
+        "section": "prompts",
+        "slider": false,
+        "step": 1,
+        "type": "textarea",
+        "value": ""
+    },
+    "prompt.cmd": {
+        "advanced": false,
+        "description": "settings.prompt.cmd.desc",
+        "label": "settings.prompt.cmd",
+        "max": null,
+        "min": null,
+        "multiplier": null,
+        "section": "prompts",
+        "slider": false,
+        "step": null,
+        "type": "textarea",
+        "value": ""
+    },
+    "prompt.cmd.extra": {
+        "advanced": false,
+        "label": "settings.prompt.cmd.extra",
+        "max": null,
+        "min": null,
+        "multiplier": null,
+        "section": "prompts",
+        "slider": false,
+        "step": null,
+        "type": "textarea",
+        "value": ""
+    },
+    "prompt.cmd.extra.assistants": {
+        "advanced": false,
+        "description": "settings.prompt.cmd.extra.assistants.desc",
+        "label": "settings.prompt.cmd.extra.assistants",
+        "max": null,
+        "min": null,
+        "multiplier": null,
+        "section": "prompts",
+        "slider": false,
+        "step": null,
+        "type": "textarea",
+        "value": ""
+    },
+    "prompt.ctx.auto_summary.system": {
+        "advanced": false,
+        "label": "settings.prompt.ctx.auto_summary.system",
+        "max": null,
+        "min": null,
+        "multiplier": null,
+        "section": "prompts",
+        "slider": false,
+        "step": null,
+        "type": "textarea",
+        "value": ""
+    },
+    "prompt.ctx.auto_summary.user": {
+        "advanced": false,
+        "description": "settings.prompt.ctx.auto_summary.user.desc",
+        "label": "settings.prompt.ctx.auto_summary.user",
+        "max": null,
+        "min": null,
+        "multiplier": null,
+        "section": "prompts",
+        "slider": false,
+        "step": null,
+        "type": "textarea",
+        "value": ""
+    },
+    "prompt.img": {
+        "advanced": false,
+        "description": "settings.prompt.img.desc",
+        "label": "settings.prompt.img",
+        "max": null,
+        "min": null,
+        "multiplier": null,
+        "section": "prompts",
+        "slider": false,
+        "step": null,
+        "type": "textarea",
+        "value": ""
+    },
+    "render.code_syntax": {
+        "advanced": false,
+        "description": "settings.render.web.only.desc",
+        "label": "settings.render.code_syntax",
+        "section": "layout",
+        "type": "combo",
+        "use": "syntax_styles",
+        "value": "github-dark"
+    },
+    "render.engine": {
+        "advanced": false,
+        "description": "settings.restart.required",
+        "keys": [
+            {
+                "web": "WebEngine / Chromium"
+            },
+            {
+                "legacy": "Legacy (markdown)"
+            }
+        ],
+        "label": "settings.render.engine",
+        "max": null,
+        "min": null,
+        "multiplier": null,
+        "section": "general",
+        "slider": false,
+        "step": null,
+        "type": "combo",
+        "value": ""
+    },
+    "render.open_gl": {
+        "advanced": false,
+        "description": "settings.render.web.only.desc",
+        "label": "settings.render.open_gl",
+        "max": 0,
+        "min": 0,
+        "multiplier": 1,
+        "section": "general",
+        "slider": false,
+        "step": 1,
+        "type": "bool",
+        "value": true
+    },
     "render.plain": {
         "advanced": false,
         "label": "settings.render.plain",
         "max": 0,
         "min": 0,
         "multiplier": 1,
         "section": "layout",
@@ -928,9 +1236,22 @@
         "min": 320,
         "multiplier": 1,
         "section": "vision",
         "slider": true,
         "step": 1,
         "type": "int",
         "value": 800
+    },
+    "zoom": {
+        "advanced": false,
+        "description": "settings.render.web.only.desc",
+        "label": "settings.zoom",
+        "max": 3.0,
+        "min": 0.2,
+        "multiplier": 100,
+        "section": "layout",
+        "slider": true,
+        "step": 1,
+        "type": "float",
+        "value": 1.0
     }
 }
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/data/config/settings_section.json` & `pygpt_net-2.2.0/src/pygpt_net/data/config/settings_section.json`

 * *Files 3% similar despite different names*

#### Pretty-printed

 * *Similarity: 0.9166666666666666%*

 * *Differences: {"'prompts'": "OrderedDict([('label', 'settings.section.prompts')])"}*

```diff
@@ -22,14 +22,17 @@
     },
     "llama-index": {
         "label": "settings.section.llama_index"
     },
     "model": {
         "label": "settings.section.model"
     },
+    "prompts": {
+        "label": "settings.section.prompts"
+    },
     "updates": {
         "label": "settings.section.updates"
     },
     "vision": {
         "label": "settings.section.vision"
     }
 }
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/data/css/fix_windows.css` & `pygpt_net-2.2.0/src/pygpt_net/data/css/fix_windows.css`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/data/css/markdown.dark.css` & `pygpt_net-2.2.0/src/pygpt_net/data/css/markdown.dark.css`

 * *Files 24% similar despite different names*

```diff
@@ -1,9 +1,13 @@
+* {{
+    font-family: 'Lato'; 
+}}
 body {{ 
-  color: #fff;
+    color: #fff;
+    word-wrap: break-word;
 }}
 a {{
     color: #fff;
 }}
 .msg-user {{
     color: #bdbdbd !important;
     white-space: pre-wrap;
@@ -14,22 +18,27 @@
     color: #fff;
     white-space: pre-wrap;
     width: 100%;
     max-width: 100%;
 }}
 .cmd {{
     color: #4d4d4d;
+    font-family: 'Lato';
 }}
 .ts {{
     color: #4d4d4d;
 }}
 .list {{
 }}
 pre {{
     color: {QTMATERIAL_PRIMARYLIGHTCOLOR};
     background-color: #202225;
-    font-family: 'Lato';
+    font-family: 'Monaspace Neon';
     display: block;
+    word-wrap: break-word;
+    white-space: pre-wrap;
 }}
 code {{
     color: {QTMATERIAL_PRIMARYLIGHTCOLOR};
+    word-wrap: break-word;
+    font-family: 'Monaspace Neon';
 }}
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/data/css/style.light.css` & `pygpt_net-2.2.0/src/pygpt_net/data/css/style.light.css`

 * *Files 14% similar despite different names*

```diff
@@ -1,12 +1,13 @@
 * {{ 
   font-family: 'Lato' !important; 
 }}
 QWidget {{
-    background-color: #e7e7e7;
+  background-color: #e7e7e7;
+  color: #000;
 }}
 
 QListView, 
 QTreeView {{
   color: #000;
   background-color: #fff;
   border: 1px solid #c0c0c0;
@@ -27,43 +28,74 @@
   color: #000;
 }}
 
 QPushButton {{
   color: #3e3e3e;
   text-transform: none;
   background-color: {QTMATERIAL_SECONDARYCOLOR};
-  border: 1px solid #c0c0c0;
+  border: 1px solid #fff;
 }}
 
 QLineEdit {{
   color: #000000; 
   border: 1px solid #c0c0c0;
   background-color: #fff;
 }}
+QLineEdit::focus {{
+  color: #000000; 
+  border: 1px solid #c0c0c0;
+  background-color: #fff;
+}}
 QTextEdit {{
   color: #000000; 
   border: 1px solid #c0c0c0;
   background-color: #fff;
 }}
 QMenu {{ 
   background-color: #fff; 
 }} 
+QMenu::item {{ 
+  color: #0e0e0e;
+}} 
+QComboBox,
+QComboBox::focus {{
+  background-color: #fff;
+  color: #000000;
+}}
 
 QMainWindow::separator:horizontal,
 QSplitter::handle:vertical {{
-  width: 5px;
+  width: 100%;
+  height: 1px;
+  background-color: #d4d4d4;
 }}
 QTableView::item,
 QTreeView::item,
 QListView::item {{
+  color: #0e0e0e;
   padding: 4px;
   min-height: 20px;
 }}
 .label-title {{
   font-weight: bold;
 }}
 .label-help {{
   color: #414141;
 }}
 .label-chat-status {{
   color: #414141;
+}}
+.interpreter-input {{
+  font-family: 'Monaspace Neon';
+}}
+.interpreter-output,
+.code-editor {{
+  font-family: 'Monaspace Neon';
+  background: #fff; 
+  color: #000;
+}}
+QCalendarWidget QWidget {{
+  background: #fff;
+}}
+QScrollBar::handle {{
+  background: {QTMATERIAL_PRIMARYCOLOR};
 }}
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/data/fonts/Lato/Lato-Black.ttf` & `pygpt_net-2.2.0/src/pygpt_net/data/fonts/Lato/Lato-Black.ttf`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/data/fonts/Lato/Lato-BlackItalic.ttf` & `pygpt_net-2.2.0/src/pygpt_net/data/fonts/Lato/Lato-BlackItalic.ttf`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/data/fonts/Lato/Lato-Bold.ttf` & `pygpt_net-2.2.0/src/pygpt_net/data/fonts/Lato/Lato-Bold.ttf`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/data/fonts/Lato/Lato-BoldItalic.ttf` & `pygpt_net-2.2.0/src/pygpt_net/data/fonts/Lato/Lato-BoldItalic.ttf`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/data/fonts/Lato/Lato-Italic.ttf` & `pygpt_net-2.2.0/src/pygpt_net/data/fonts/Lato/Lato-Italic.ttf`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/data/fonts/Lato/Lato-Light.ttf` & `pygpt_net-2.2.0/src/pygpt_net/data/fonts/Lato/Lato-Light.ttf`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/data/fonts/Lato/Lato-LightItalic.ttf` & `pygpt_net-2.2.0/src/pygpt_net/data/fonts/Lato/Lato-LightItalic.ttf`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/data/fonts/Lato/Lato-Regular.ttf` & `pygpt_net-2.2.0/src/pygpt_net/data/fonts/Lato/Lato-Regular.ttf`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/data/fonts/Lato/Lato-Thin.ttf` & `pygpt_net-2.2.0/src/pygpt_net/data/fonts/Lato/Lato-Thin.ttf`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/data/fonts/Lato/Lato-ThinItalic.ttf` & `pygpt_net-2.2.0/src/pygpt_net/data/fonts/Lato/Lato-ThinItalic.ttf`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/data/fonts/Lato/OFL.txt` & `pygpt_net-2.2.0/src/pygpt_net/data/fonts/Lato/OFL.txt`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/data/icon.ico` & `pygpt_net-2.2.0/src/pygpt_net/data/icon.ico`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/data/icon.png` & `pygpt_net-2.2.0/src/pygpt_net/data/icon.png`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/data/icon_tray_busy.ico` & `pygpt_net-2.2.0/src/pygpt_net/data/icon_tray_busy.ico`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/data/icon_tray_error.ico` & `pygpt_net-2.2.0/src/pygpt_net/data/icon_tray_error.ico`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/data/icon_tray_idle.ico` & `pygpt_net-2.2.0/src/pygpt_net/data/icon_tray_idle.ico`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/data/icons/abc.svg` & `pygpt_net-2.2.0/src/pygpt_net/data/icons/abc.svg`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/data/icons/alarm.svg` & `pygpt_net-2.2.0/src/pygpt_net/data/icons/alarm.svg`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/data/icons/apps.svg` & `pygpt_net-2.2.0/src/pygpt_net/data/icons/apps.svg`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/data/icons/build.svg` & `pygpt_net-2.2.0/src/pygpt_net/data/icons/build.svg`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/data/icons/calendar.svg` & `pygpt_net-2.2.0/src/pygpt_net/data/icons/calendar.svg`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/data/icons/cut.svg` & `pygpt_net-2.2.0/src/pygpt_net/data/icons/cut.svg`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/data/icons/db.svg` & `pygpt_net-2.2.0/src/pygpt_net/data/icons/db.svg`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/data/icons/error.svg` & `pygpt_net-2.2.0/src/pygpt_net/data/icons/error.svg`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/data/icons/hearing.svg` & `pygpt_net-2.2.0/src/pygpt_net/data/icons/hearing.svg`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/data/icons/help.svg` & `pygpt_net-2.2.0/src/pygpt_net/data/icons/help.svg`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/data/icons/info.svg` & `pygpt_net-2.2.0/src/pygpt_net/data/icons/info.svg`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/data/icons/key.svg` & `pygpt_net-2.2.0/src/pygpt_net/data/icons/key.svg`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/data/icons/keyboard.svg` & `pygpt_net-2.2.0/src/pygpt_net/data/icons/keyboard.svg`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/data/icons/language.svg` & `pygpt_net-2.2.0/src/pygpt_net/data/icons/language.svg`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/data/icons/palette.svg` & `pygpt_net-2.2.0/src/pygpt_net/data/icons/palette.svg`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/data/icons/public_filled.svg` & `pygpt_net-2.2.0/src/pygpt_net/data/icons/public_filled.svg`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/data/icons/robot.svg` & `pygpt_net-2.2.0/src/pygpt_net/data/icons/robot.svg`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/data/icons/router.svg` & `pygpt_net-2.2.0/src/pygpt_net/data/icons/router.svg`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/data/icons/sensors.svg` & `pygpt_net-2.2.0/src/pygpt_net/data/icons/sensors.svg`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/data/icons/settings.svg` & `pygpt_net-2.2.0/src/pygpt_net/data/icons/settings.svg`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/data/icons/share.svg` & `pygpt_net-2.2.0/src/pygpt_net/data/icons/share.svg`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/data/icons/view.svg` & `pygpt_net-2.2.0/src/pygpt_net/data/icons/view.svg`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/data/icons/voice.svg` & `pygpt_net-2.2.0/src/pygpt_net/data/icons/voice.svg`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/data/locale/locale.de.ini` & `pygpt_net-2.2.0/src/pygpt_net/data/locale/locale.de.ini`

 * *Files 21% similar despite different names*

```diff
@@ -1,37 +1,54 @@
 [LOCALE]
 about.thanks = Besonderer Dank an die GitHub-Community
 action.add = Hinzufügen
+action.clear = Löschen
+action.copy = Kopieren
 action.ctx_copy_id = ID kopieren
 action.ctx.indexed = Zuletzt indiziert am
+action.ctx.new = Neuer Kontext...
+action.ctx.new.in_group = Neuer Kontext in: {group}...
+action.group.delete.only = Löschen (nur Gruppe)
+action.group.delete.all = Alles löschen (mit Elementen)
+action.group.new = Neue Gruppe
+action.group.remove = Aus Gruppe entfernen
+action.move_to = Verschieben nach
 action.delete = Löschen
 action.download = Herunterladen
 action.duplicate = Duplizieren
 action.edit = Bearbeiten
 action.idx = Index with Llama-index...
 action.idx.remove = Entfernen aus
 action.mkdir = Verzeichnis erstellen...
 action.open = Öffnen
 action.open_dir = Im Verzeichnis öffnen...
 action.pin = Oben anheften
 action.unpin = Loslösen
+action.paste = Einfügen
+action.profile.delete = Profil entfernen (nur aus Liste)
+action.profile.delete_all = Profil löschen (und alle Benutzerdateien)
 action.refresh = Aktualisieren
 action.rename = Umbenennen
 action.redo = Wiederholen
+action.restore = Wiederherstellen
 action.save = Speichern
 action.save_as = Speichern unter...
+action.save_selection_as = Auswahl speichern unter...
+action.select_all = Alle auswählen
 action.touch = Datei erstellen...
 action.truncate = Alles löschen
 action.undo = Rückgängig
 action.upload = Dateien hier hochladen...
 action.use = Verwenden
 action.use.attachment = Als Anhang
 action.use.copy_work_path = Arbeitspfad kopieren
 action.use.copy_sys_path = Systempfad kopieren
 action.use.read_cmd = Bitten, diese Datei zu lesen...
+action.video.open = Video oder Audio öffnen...
+action.video.play = Video oder Audio abspielen...
 alert.preset.empty_id = Name ist erforderlich.
 alert.preset.no_chat_completion = Mindestens eine der Optionen: Chat, Vervollständigung, Bild oder Vision wird benötigt!
 alert.snap.file_manager = Snap erkannt. Bitte das Verzeichnis manuell in Ihrem Dateimanager öffnen:
 alert.title = Info
 agent.infinity.confirm.content = WARNUNG: Sie versuchen, eine unendliche Schleife zu starten! Dies kann zu einem hohen Tokenverbrauch führen. Sind Sie sicher, dass Sie fortfahren möchten?
 assistant.action.delete = Löschen
 assistant.action.duplicate = Duplizieren
@@ -47,24 +64,35 @@
 assistant.model = Modell
 assistant.name = Name
 assistant.new = Erstellen
 assistant.new.id_tip = Lassen Sie die ID leer, wenn Sie einen neuen Assistenten erstellen.\n...oder geben Sie die ID von OpenAI ein, wenn der Assistent bereits auf dem Server existiert.
 assistant.run.completed = Ausführung: Abgeschlossen
 assistant.run.failed = Ausführung: Fehlgeschlagen
 assistant.run.listening = Ausführung: in Bearbeitung...
-assistant.tool.code_interpreter = Werkzeug: Code-Interpreter
+assistant.store.id = ID
+assistant.store.files.suffix = Dateien
+assistant.store.name = Name
+assistant.store.expire_days = Ablauftage
+assistant.store.status = Status
+assistant.store.hide_threads = Thread-Vektor-Speicher verbergen
+assistant.store.thread_only = (nur aktueller Thread)
+assistant.tool.code_interpreter = Code-Interpreter
 assistant.tool.function = Werkzeug: Funktion
 assistant.tool.retrieval = Werkzeug: Abruf
+assistant.tool.file_search = Chat mit Dateien
+assistant.vector_store = Vektor Speicher
+attachments.header.store = Vektor Speicher(e)
 attachments.btn.add = Datei hinzufügen
 attachments.btn.clear = Dateien löschen
 attachments.capture_clear = Beim Erfassen löschen
 attachments.clear.confirm = Liste löschen?
 attachments.delete.confirm = Datei aus der Liste entfernen?
 attachments.header.name = Name
 attachments.header.path = Pfad
+attachments.header.size = Größe
 attachments.send_clear = Liste nach dem Senden löschen
 attachments.tab = Anhänge
 attachments_uploaded.btn.clear = Dateien löschen
 attachments_uploaded.btn.sync = Synchronisieren
 attachments_uploaded.clear.confirm = WARNUNG: Sind Sie sicher, dass Sie alle diese Dateien vom Remote-Server löschen möchten?
 attachments_uploaded.delete.confirm = WARNUNG: Sind Sie sicher, dass Sie die Datei vom Remote-Server löschen möchten?
 attachments_uploaded.sync.tip = Tipp: Klicken Sie auf 'Synchronisieren', um die Dateiliste von OpenAI abzurufen
@@ -77,75 +105,142 @@
 audio.speak.btn.tooltip = Klicken, um das Mikrofonhören zu starten
 audio.speak.btn.stop.tooltip = Klicken, um das Mikrofonhören zu beenden
 audio.speak.ignoring = Ignoriert (kein Präfix)
 audio.speak.now = Sprich jetzt...
 audio.speak.wait = Warten...
 audio.speak.sending = Senden...
 audio.speak.energy = Mik. Lautstärke
+audio.transcribe.title = Audio-Transkription
+audio.transcribe.tip = Tipp: Klicken Sie auf "Öffnen...", um mit der Transkription des Audios aus einer Datei zu beginnen. Der Audioeingabe-Anbieter aus den Plugin-Einstellungen wird verwendet.
+audio.transcribe.open = Audio-/Videodatei öffnen und transkribieren...
+audio.transcribe.confirm = Sind Sie sicher, dass Sie diese Audio-/Videodatei transkribieren möchten?
+audio.transcribe.clear.confirm = Aktuelle Transkription löschen?
+audio.transcribe.auto_convert = Video immer vor der Transkription in mp3 konvertieren (ffmpeg erforderlich)
+audio.transcribe.result.finished = Fertiggestellt: {path}
+audio.transcribe.result.selected = Ausgewählte Datei: {path}
 calendar.day.search = Gespräche anzeigen
 calendar.day.label = Etikettenfarbe festlegen...
 calendar.day.label.color.default = Standard
 calendar.day.label.color.red = Rot
 calendar.day.label.color.orange = Orange
 calendar.day.label.color.yellow = Gelb
 calendar.day.label.color.green = Grün
 calendar.day.label.color.blue = Blau
 calendar.day.label.color.indigo = Indigo
 calendar.day.label.color.violet = Violett
 calendar.note.label = Tagesnotiz
+changed.confirm = Möchten Sie Ihre Änderungen speichern, bevor Sie fortfahren?
 chatbox.label = Chat
 chatbox.plugins = Plugin(s)
 chat.prefix.attachment = Anhang
 chat.prefix.file = Datei
 chat.prefix.img = Bild
 chat.prefix.url = Link
+chat.name.user = Du
+chat.name.bot = KI
 clipboard.copied = In die Zwischenablage kopiert.
+clipboard.copied_to = In die Zwischenablage kopiert:
 cmd.enabled = Befehle ausführen
 cmd.tip = Tipp: Um die Ausführung von Befehlen aus Plugins zu ermöglichen, die mit "Command:" gekennzeichnet sind, müssen Sie die Option "Befehle ausführen" aktivieren.
 coming_soon = Demnächst...
 confirm.assistant.delete = Assistent löschen?
 confirm.assistant.import = Alle Assistenten von API importieren?
-confirm.assistant.import_files = Alle Dateien für diesen Assistenten von API importieren?
+confirm.assistant.files.truncate = Sind Sie sicher, dass Sie alle Dateien von allen Assistenten entfernen?
+confirm.assistant.import_files = Alle Dateien von API importieren?
+confirm.assistant.store.import = Alle Vektor Speicher von API importieren?
+confirm.assistant.store.truncate = Alle Vektor Speicher im API löschen?
+confirm.assistant.store.clear = Vektor Speicher löschen (nur lokal)?
+confirm.assistant.files.clear = Dateien löschen (nur lokal)?
+confirm.assistant.store.refresh = Alle Vektor Speicher aktualisieren?
 confirm.img.delete = Datei von der Festplatte löschen?
 confirm.preset.clear = Sind Sie sicher, dass Sie das Voreinstellung löschen möchten?
 confirm.preset.delete = Sind Sie sicher, dass Sie diese Voreinstellung löschen möchten?
 confirm.preset.overwrite = Voreinstellung existiert. Überschreiben?
 confirm.preset.restore = Standard-Preset für diesen Modus wiederherstellen?
+confirm.profile.delete = Sind Sie sicher, dass Sie das Profil löschen möchten? Es wird nur aus der Liste entfernt.
+confirm.profile.delete_all = Sind Sie sicher, dass Sie das Profil samt aller Konfigurationsdateien und Benutzerdateien im Profil-Arbeitsverzeichnis löschen möchten?
+confirm.profile.reset = Sind Sie sicher, dass Sie das Profil auf die Standardeinstellungen zurücksetzen möchten? WARNUNG: Alle Konfigurationsdateien und die Kontext-Datenbank werden entfernt! Das Datenverzeichnis wird beibehalten - um es zu entfernen, müssen Sie es manuell löschen oder die Lösch-Option verwenden.
 context.btn.clear = Erinnerung löschen
 context.items = Elemente
 context.label = Kontext
 context.tokens = Tokens
 ctx.delete.all.confirm = Sind Sie sicher, dass Sie ALLE Verlaufskontexte löschen möchten?
 ctx.delete.confirm = Sind Sie sicher, dass Sie löschen möchten?
+ctx.delete.item.confirm = Gesprächselement löschen?
+ctx.delete.item.link = löschen
+ctx.extra.audio = Antwort vorlesen (Audio)
+ctx.extra.copy = In die Zwischenablage kopieren
+ctx.extra.copy_code = in die Zwischenablage kopieren
+ctx.extra.join = An vorherige Antwort anhängen (zusammenführen)
+ctx.extra.reply = Antwort neu generieren (ab diesem Punkt)
+ctx.extra.edit = Bearbeiten und Antwort neu generieren (ab diesem Punkt)
+ctx.extra.delete = Diesen Eintrag löschen
+ctx.join.item.confirm = Diese Antwort an die vorherige Antwort anhängen (Elemente zusammenführen)?
 ctx.list.label = Kontext und Verlauf
 ctx.list.search.placeholder = Suchen...
 ctx.new = Neu...
 ctx.new.prefix = Neu
+ctx.replay.item.confirm = Antwort ab diesem Punkt neu generieren?
 ctx.tokens = Token
+db.backup = Automatische Sicherung
+db.backup.tip = Vor jedem Löschen/Kürzen/Update eine Sicherung erstellen
+db.limit = Limit
+db.next = Nächste
+db.page = Seite
+db.prev = Vorherige
+db.refresh = Aktualisieren
+db.sort = Sortieren nach
+db.order = Reihenfolge
+db.search = Suche
+db.search_in = in
+db.search.placeholder = Suchen...
+db.time_convert = Zeit konvertieren()
+db.time_convert.tip = Zeitstempelspalten in das Format JJJJ-MM-TT SS:MM:TT umwandeln
+db.table = Tabelle:
 dialog.about.build = Build
 dialog.about.docs = Dokumentation
 dialog.about.email = E-Mail
 dialog.about.github = GitHub
 dialog.about.title = Über
 dialog.about.version = Version
 dialog.about.website = Offizielle Webseite
 dialog.assistant = Assistent erstellen / bearbeiten
 dialog.assistant.btn.current = Aktuelle verwenden
-dialog.assistant.btn.save = Hinzufügen / aktualisieren
+dialog.assistant.btn.close = Abbrechen
+dialog.assistant.btn.save = Speichern
+dialog.assistant.btn.store = Vektor Speicher
+dialog.assistant.store = Vektor Speicher der Assistenten
+dialog.assistant.store.btn.close = Abbrechen
+dialog.assistant.store.btn.new = Erstellen
+dialog.assistant.store.btn.save = Speichern
+dialog.assistant.store.btn.refresh_status = Status aktualisieren
+dialog.assistant.store.delete.confirm = Sind Sie sicher, dass Sie den Vektor Speicher des Assistenten löschen wollen?
+dialog.assistant.store.menu.import = Alles importieren
+dialog.assistant.store.menu.refresh_store = Alles aktualisieren
+dialog.assistant.store.menu.clear_store = Vektor Speicher leeren (nur lokal)
+dialog.assistant.store.menu.clear_files = Dateien leeren (nur lokal)
+dialog.assistant.store.menu.truncate_store = Speicher leeren (lokal + remote)
+dialog.assistant.store.menu.truncate_files = Dateien leeren (lokal + remote)
 dialog.changelog.title = Änderungsprotokoll
 dialog.confirm.no = Nein
 dialog.confirm.title = Bestätigung
 dialog.confirm.yes = Ja
 dialog.create.dismiss = Abbrechen
 dialog.create.title = Name
 dialog.create.update = Erstellen
+dialog.css.restore.confirm = Standard-CSS wiederherstellen? (Alle Änderungen in benutzerdefinierten CSS-Dateien werden in .backup Dateien verschoben)
+dialog.css.restore.confirm.success = OK. Zu den Standard-CSS-Stilen wiederhergestellt.
 dialog.editor.btn.defaults = Wiederherstellen
+dialog.editor.btn.defaults.app = Standardwerte laden
 dialog.editor.btn.save = Speichern
 dialog.editor.label = Bearbeitung der Konfigurationsdatei - ein Neustart der Applikation ist erforderlich, um Änderungen neu zu laden.
 dialog.editor.title = JSON/CSS bearbeiten
+dialog.find.btn.clear = Löschen
+dialog.find.btn.find_prev = Vorheriges finden
+dialog.find.btn.find_next = Nächstes finden
 dialog.image.title = Generiertes Bild
 dialog.license.title = Lizenz
 dialog.license.label = Durch die Verwendung dieser Software akzeptieren Sie die folgenden Bedingungen:
 dialog.license.accept = Ich stimme zu
 dialog.logger.btn.clear = Löschen
 dialog.logger.title = Protokollierung
 dialog.plugin_settings = Plugin-Einstellungen
@@ -155,28 +250,68 @@
 dialog.plugin.settings.defaults.app.confirm = Fabrikeinstellungen der Plugins laden?
 dialog.plugin.settings.defaults.app.result = Auf Werkseinstellungen der Plugins wiederhergestellt.
 dialog.plugin.settings.defaults.user.confirm = Aktuelle Änderungen rückgängig machen?
 dialog.plugin.settings.defaults.user.result = Benutzerkonfiguration des Plugins wiederhergestellt
 dialog.preset = Voreinstellungseditor
 dialog.preset.btn.current = Aktuelle verwenden
 dialog.preset.btn.save = Speichern
+dialog.preset.plugins.editor = Plugin-Voreinstellungen Editor
+dialog.profile.alert.delete.current = Aktuelles aktives Profil kann nicht gelöscht werden!
+dialog.profile.alert.name.empty = Name darf nicht leer sein!
+dialog.profile.alert.path.same = Quell- und Zielverzeichnis sind identisch! Abgebrochen.
+dialog.profile.alert.path.empty = Arbeitsverzeichnispfad darf nicht leer sein!
+dialog.profile.alert.path.not_exists = Verzeichnis existiert nicht!
+dialog.profile.alert.duplicate.not_empty = Verzeichnis ist nicht leer und enthält keine vorherige Konfiguration! Abbruch.\n\nTipp: Wählen Sie ein existierendes Arbeitsverzeichnis oder ein leeres Verzeichnis, um darin ein neues Arbeitsverzeichnis zu erstellen.
+dialog.profile.alert.src.empty = Quellprofil nicht gefunden! Abgebrochen.
+dialog.profile.checkbox.include_db = + Datenbank
+dialog.profile.checkbox.include_datadir = + Verzeichnis "data"
+dialog.profile.checkbox.switch = Zum erstellten Profil wechseln
+dialog.profile.editor = Profile
+dialog.profile.item.editor = Profil
+dialog.profile.item.btn.dismiss = Abbrechen
+dialog.profile.item.btn.create = Erstellen
+dialog.profile.item.btn.update = Aktualisieren
+dialog.profile.item.btn.duplicate = Hier duplizieren
+dialog.profile.name.label = Profilname
+dialog.profile.new = Neues Profil
+dialog.profile.status.created = Profil erstellt.
+dialog.profile.status.changed = Profil geändert zu
+dialog.profile.status.updated = Profil aktualisiert.
+dialog.profile.status.deleted = Profil gelöscht
+dialog.profile.status.duplicated = Profil dupliziert.
+dialog.profile.status.removed = Profil von der Liste entfernt
+dialog.profile.tip = Durch das Erstellen neuer Profile können Sie separate Einstellungen, unterschiedliche Kontexthistorien und Benutzerdaten verwenden und schnell zwischen ihnen wechseln.
+dialog.profile.workdir.label = Arbeitsverzeichnis (Verzeichnis für Konfigurationsdateien und Benutzerdaten)
 dialog.rename.dismiss = Abbrechen
 dialog.rename.title = Name ändern
 dialog.rename.update = Namen aktualisieren
 dialog.settings = Einstellungen
 dialog.settings.btn.defaults.user = Änderungen rückgängig machen
 dialog.settings.btn.defaults.app = Standardwerte laden
 dialog.settings.btn.save = Speichern
 dialog.settings.defaults.user.result = Benutzerkonfiguration wiederhergestellt
 dialog.settings.defaults.app.result = Auf Werkseinstellungen wiederhergestellt. Vorherige Einstellungen gespeichert in: config.json.backup.
 dialog.start.btn = Zu den Einstellungen gehen...
 dialog.start.link = https://platform.openai.com/account/api-keys
 dialog.start.settings.text = Wenn Sie bereits einen API-KEY haben, dann können Sie ihn im Einstellungsfenster konfigurieren.\nKlicken Sie auf die Schaltfläche EINSTELLUNGEN ÖFFNEN und fügen Sie dann Ihren API-KEY in das API-KEY-Feld ein.
 dialog.start.title = API-KEY ist noch nicht konfiguriert
 dialog.start.title.text = Ihr API-Schlüssel ist noch nicht konfiguriert...\nSie erhalten einen API-Schlüssel, indem Sie ein Konto auf der OpenAI-Website registrieren:
+dialog.workdir.tip = Wählen Sie ein Verzeichnis von der Festplatte aus und klicken Sie auf 'Ändern/Verschieben...', um das aktuelle Arbeitsverzeichnis zu dem ausgewählten zu verschieben, oder um das aktuelle Arbeitsverzeichnis zu einem bestehenden zu setzen. Erforderlicher Festplattenspeicherplatz (zum Verschieben): {size}
+dialog.workdir.reset.btn = Aktuell
+dialog.workdir.update.btn = Ändern/Verschieben...
+dialog.workdir.change.confirm = Sind Sie sicher, dass Sie das Arbeitsverzeichnis zu folgendem ändern/verschieben möchten:\n{path}?
+dialog.workdir.change.empty.alert = Verzeichnis ist nicht leer! Vorgang wird abgebrochen.
+dialog.workdir.update.confirm = VORHANDENESARBEITSVERZEICHNIS: Das Verzeichnis "{path}" ist nicht leer und enthält bereits Daten von einem anderen Arbeitsverzeichnis. Möchten Sie dieses bestehende Verzeichnis NUR als das aktuelle Arbeitsverzeichnis einstellen (ohne Daten zu verschieben)?
+dialog.workdir.title = Arbeitsverzeichnis ändern
+dialog.workdir.result.no_free_space = Zu wenig Speicherplatz auf der Festplatte! Erforderlich: {required}, Freier Speicherplatz: {free}.
+dialog.workdir.result.same_directory = Nichts zu verschieben.
+dialog.workdir.result.success = [OK] Das Arbeitsverzeichnis ist derzeit gesetzt auf: {path}
+dialog.workdir.result.failed = Ein Fehler ist aufgetreten beim Verschieben des Arbeitsverzeichnisses.
+dialog.workdir.result.wait = Bitte warten... das aktuelle Arbeitsverzeichnis wird verschoben... Dies kann eine Weile dauern...
+dialog.workdir.result.directory_not_exists = Zielverzeichnis existiert nicht!
 dt.days_ago = vor Tagen
 dt.month = vor einem Monat
 dt.today = heute
 dt.week = vor einer Woche
 dt.weeks = vor Wochen
 dt.yesterday = gestern
 error.assistant_not_selected = Bitte erstellen, importieren oder wählen Sie zuerst einen Assistenten aus!
@@ -185,15 +320,17 @@
 files.delete.confirm = Datei/Verzeichnis löschen?
 files.delete.recursive.confirm = Verzeichnis ist nicht leer! Sind Sie sicher, dass Sie das Verzeichnis und alle Dateien darin löschen möchten?
 files.explorer.header.name = Name
 files.explorer.header.size = Größe
 files.explorer.header.type = Typ
 files.explorer.header.modified = Änderungsdatum
 files.explorer.header.indexed = Indiziert am
+filter.ctx.counters.all = Alle Zähler
 filter.ctx.label = Filter zur Anzeige der Kontextliste
+filter.ctx.label.colors = Nach Labels anzeigen
 filter.ctx.radio.all = Alle
 filter.ctx.radio.pinned = Angepinnt
 filter.ctx.radio.labeled = Beschriftet
 filter.ctx.radio.indexed = Indiziert (llama-index)
 header.assistant.tool.function.name = Name
 header.assistant.tool.function.params = Parameter (JSON)
 header.assistant.tool.function.desc = Beschreibung
@@ -213,15 +350,15 @@
 idx.status.empty = Nichts indiziert.
 idx.status.error = [FEHLER] Nichts indiziert.
 idx.status.indexing = Indizierung läuft... bitte warten...
 idx.status.success = [ERFOLG] Indizierte Elemente:
 idx.status.truncating = Index entfernen... bitte warten...
 idx.status.truncate.success = [OK] Index erfolgreich entfernt.
 idx.status.truncate.error = [FEHLER] Index nicht entfernt.
-idx.token.warn = Dies wird zusätzliche Token für das Einbetten der Daten verbrauchen (das Modell text-embedding-ada-002 wird verwendet)
+idx.token.warn = Dies wird zusätzliche Token für das Einbetten der Daten verbrauchen.
 img.status.downloading = Herunterladen...
 img.status.error = Fehler bei der Bildgenerierung
 img.status.finished = Bild generiert und heruntergeladen.
 img.status.generating = Bitte warten... Bild wird aus
 img.status.prompt.error = Fehler bei der Bildaufforderung durch das Modell
 img.status.prompt.wait = Um Bildaufforderung wird gebeten... bitte warten...
 img.status.save.error = Fehler beim Speichern des Bildes
@@ -230,64 +367,99 @@
 img.raw = Raw-Modus
 img.save.title = Bild speichern
 info.settings.all.saved = Alle Einstellungen gespeichert
 info.settings.saved = Einstellungen gespeichert
 inline.vision = Sichtmodus
 input.btn.send = Senden
 input.btn.stop = Stopp
+input.btn.cancel = Abbrechen
+input.btn.update = Aktualisieren
 input.label = Eingabe (Ihr Prompt)
 input.radio.enter = Eingabetaste
 input.radio.enter_shift = Umschalt+Eingabe
 input.radio.none = Aus
 input.send_clear = Nach dem Senden löschen
 input.stream = Streamen
 input.tab = Eingabe
+interpreter.all = Verlauf ausführen (alle)
+interpreter.auto_clear = Bei Senden löschen
+interpreter.btn.clear = Ausgabe löschen
+interpreter.btn.send = Senden / ausführen
+interpreter.clear.confirm = Aktuelles Fenster löschen?
+interpreter.edit_label.edit = Code (Verlauf)
+interpreter.edit_label.output = Ausgabe
+interpreter.edit = Bearbeitungsmodus
+interpreter.input.placeholder = Auszuführender Python-Code...
 menu.audio = Audio / Stimme
 menu.audio.input = Eingabe: Spracherkennung
 menu.audio.output = Ausgabe: Sprachsynthese
 menu.config = Konfiguration
 menu.config.edit.config = config.json bearbeiten...
 menu.config.edit.models = models.json bearbeiten...
 menu.config.edit.css = CSS-Stylesheets bearbeiten...
+menu.config.edit.css.restore = Standard-CSS wiederherstellen...
 menu.config.open_dir = Arbeitsverzeichnis öffnen...
+menu.config.change_dir = Arbeitsverzeichnis ändern...
+menu.config.profile = Profil
+menu.config.profile.edit = Profile bearbeiten...
+menu.config.profile.new = Neues Profil...
 menu.config.save = Konfiguration speichern
 menu.config.settings = Einstellungen...
 menu.debug = Debug
 menu.debug.assistants = Assistenten...
 menu.debug.attachments = Dateien/Anhänge...
 menu.debug.config = Konfiguration...
 menu.debug.context = Kontext...
+menu.debug.indexes = Indizes...
 menu.debug.logger = Protokollierung
 menu.debug.models = Modelle...
 menu.debug.plugins = Plugins...
 menu.debug.presets = Voreinstellungen...
-menu.debug.ui = Benutzeroberfläche...
+menu.debug.app.log = Logdatei ansehen (app.log)
+menu.debug.agent = Agent...
+menu.debug.db = DB-Ansicht
+menu.debug.ui = UI...
 menu.file = Datei
 menu.file_clear_history = Verlauf löschen
+menu.file_clear_history_groups = Verlauf löschen (+ Gruppen)
+menu.file.current = Aktuellen auswählen
 menu.file.exit = Beenden
 menu.file.new = Neuer Kontext...
+menu.file.group.new = Neue Kontextgruppe...
 menu.info = Über
 menu.info.about = Über
 menu.info.changelog = Änderungsprotokoll
 menu.info.docs = Dokumentation
+menu.info.donate = Unterstützen/Spenden Sie
 menu.info.github = GitHub-Projektseite
 menu.info.license = Lizenz
 menu.info.pypi = PyPi
 menu.info.snap = Snap Store
 menu.info.updates = Nach Updates suchen...
 menu.info.website = Offizielle Webseite - pygpt.net
 menu.lang = Sprache
 menu.plugins = Plugins
+menu.plugins.presets = Voreinstellungen...
+menu.plugins.presets.edit = Voreinstellungen bearbeiten...
+menu.plugins.presets.new = Neues Voreinstellung...
 menu.plugins.settings = Einstellungen...
 menu.theme = Thema
 menu.theme.dark = Dunkle Farbe...
 menu.theme.light = Helle Farbe...
+menu.theme.syntax = Syntaxhervorhebung des Codes...
 menu.theme.density = Layoutgröße
 menu.theme.tooltips = Tooltips anzeigen
 menu.theme.settings = Einstellungen...
+menu.theme.blocks = Blöcke anzeigen
+menu.tools = Werkzeuge
+menu.tools.audio.transcribe = Audio-/Videodateien transkribieren
+menu.tools.interpreter = Python-Code-Interpreter
+menu.tools.media.player = Mediaplayer
+menu.tools.image.viewer = Bildbetrachter
+menu.tools.text.editor = Texteditor
 menu.tray.notepad = Notepad öffnen...
 menu.tray.screenshot = Fragen mit Screenshot...
 menu.tray.scheduled = Geplante Aufträge
 menu.video = Video
 menu.video.capture = Eingang: kamera
 menu.video.capture.auto = Automatische Bildaufnahme
 mode.agent = Agent (autonom)
@@ -308,14 +480,15 @@
 mode.vision.tooltip = Bildanalyse mit GPT-4 Vision
 notify.agent.goal.title = Ziel erreicht
 notify.agent.goal.content = Agent: das Ziel wurde erreicht.
 notify.agent.stop.title = Beendet
 notify.agent.stop.content = Agent: gestoppt
 notify.cron.title = Geplante Aufgabe wird ausgeführt
 notify.update.title = Neue Version verfügbar
+output.edit = Bearbeiten
 output.raw = Plain text
 output.tab.calendar = Kalender
 output.tab.chat = Chat
 output.tab.files = Dateien
 output.tab.notepad = Notizbuch
 output.timestamp = Zeit anzeigen
 output.tab.painter = Zeichnen
@@ -338,86 +511,114 @@
 preset.filename = ID (Dateiname)
 preset.img = Bild
 preset.langchain = Langchain
 preset.llama_index = Chat mit Dateien
 preset.name = Voreinstellungsname
 preset.new = Erstellen
 preset.prompt = Systemaufforderung
+preset.prompt.paste_template: Aus Vorlage einfügen...
 preset.temperature = Temperatur
 preset.untitled = (unbetitelt)
 preset.use = Verwenden
 preset.user_name = Benutzername
 preset.vision = Vision
+profile.current.suffix = (aktuell)
 screenshot.capture.name.prefix = Screenshot von
 settings.advanced.collapse = Erweiterte Optionen ein-/ausblenden
 settings.agent.mode = Interner Modus
 settings.agent.mode.desc = Interner Modus für die Verwendung im Agentenmodus (Chat, Vervollständigung, Langchain, Llama_Index usw.)
 settings.agent.goal.notify = Zeige eine Benachrichtigung im Infobereich an, wenn das Ziel erreicht ist.
 settings.agent.idx = Index
 settings.agent.idx.desc = Nur wenn der interne Modus Llama_Index ist (Chat mit Dateien), wählen Sie den Index für die Verwendung im Agentenmodus
+settings.api_endpoint = API-Endpunkt
+settings.api_endpoint.desc = OpenAI-API-Endpunkt-URL, Standard: https://api.openai.com/v1
 settings.api_key = OpenAI API-KEY
 settings.check_updates = Beim Start nach Updates suchen
 settings.check_updates.bg = Im Hintergrund nach Updates suchen
-settings.cmd.prompt = Aufforderung (anfügen): Befehl ausführen Anleitung
 settings.context_threshold = Kontextschwelle
+settings.ctx.audio = Audio-Symbol immer anzeigen
 settings.ctx.auto_summary = Kontext automatisch zusammenfassen
-settings.ctx.auto_summary.prompt = Aufforderung (Benutzer): automatische Zusammenfassung
-settings.ctx.auto_summary.system = Aufforderung (System): automatische Zusammenfassung
 settings.ctx.auto_summary.model = Modell für automatische Zusammenfassung verwendet
+settings.ctx.code_interpreter = Ausgabe des Code-Interpreters anzeigen
+settings.ctx.code_interpreter.desc = Wenn diese Option aktiviert ist, wird die Ausgabe des Code-Interpreters in der Assistant-API in Echtzeit angezeigt (im Stream-Modus).
+settings.ctx.convert_lists = Listen in Absätze umwandeln
+settings.ctx.copy_code = "In Zwischenablage kopieren" in Codeblöcken anzeigen
 settings.ctx.records.limit = Limit der letzten Kontexte in der Liste (0 = unbegrenzt)
 settings.ctx.search_content = Suche auch im Inhalt der Gespräche, nicht nur in den Titeln
 settings.ctx.search.desc = Aktiviere die Suche auch im Inhalt der Kontextelemente
+settings.ctx.sources = Zeige Llama-Indexquellen
+settings.ctx.sources.desc = Falls aktiviert, werden die genutzten Quellen in der Antwort angezeigt (falls verfügbar, funktioniert nicht im gestreamten Chat)
 settings.defaults.app.confirm = Werksseitige App-Einstellungen laden?
 settings.defaults.user.confirm = Aktuelle Änderungen rückgängig machen?
 settings.download.dir = Verzeichnis für Dateidownloads
 settings.download.dir.desc = Unterordner für heruntergeladene Dateien, z.B. im Assistentenmodus, innerhalb von "data"
 settings.dict.delete.confirm = Eintrag aus der Liste entfernen?
 settings.font_size.tip = Tipp: Sie können die Schriftgröße ändern, indem Sie STRG + Mausrad verwenden
-settings.font_size = Schriftgröße (Chatfenster)
+settings.font_size = Schriftgröße (Chat-Text, Notizblöcke)
 settings.font_size.ctx = Schriftgröße (Kontextliste)
 settings.font_size.input = Schriftgröße (Eingabe)
 settings.font_size.toolbox = Schriftgröße (Werkzeugkasten)
 settings.frequency_penalty = Frequenzstrafe
-settings.img_prompt = DALL-E: Aufforderung (System): Prompterzeugung
 settings.img_prompt_model = DALL-E: Modell zur Prompterzeugung
 settings.img_resolution = DALL-E: Bildgröße
 settings.img_quality = DALL-E: image quality
 settings.img_dialog_open = Bild-Dialog nach Generierung öffnen (Bildmodus)
 settings.layout.density = Layoutdichte
 settings.layout.dpi.scaling = DPI-Skalierung
 settings.layout.dpi.factor = DPI-Faktor
 settings.layout.dialog.geometry.store = Dialogfensterpositionen speichern
 settings.layout.minimized = Minimiert starten
 settings.layout.tooltips = Tipps anzeigen (Hilfebeschreibungen)
 settings.layout.tray = Symbol im Infobereich anzeigen
 settings.layout.tray.desc = Neustart erforderlich. Das Symbol im Infobereich bietet zusätzliche Funktionen wie "Frage mit Screenshot" oder "Notizblock öffnen".
 settings.layout.tray.minimize = Beim Beenden in den Infobereich minimieren
 settings.layout.tray.minimize.desc = Ein aktiviertes Tray-Symbol ist erforderlich, damit diese Option funktioniert.
-settings.llama.idx.excluded_ext = Ausgeschlossene Erweiterungen
-settings.llama.idx.excluded_ext.desc = Erweiterungen zum Ausschließen, wenn kein Datenlader für diese Erweiterung vorhanden ist, durch Komma getrennt
+settings.llama.idx.custom_meta = Benutzerdefinierte Metadaten, die an indexierte Dokumente angehängt/ersetzt werden
+settings.llama.idx.custom_meta.desc = Definieren Sie benutzerdefinierte Metadaten Schlüssel => Wert Felder für spezifische Dateierweiterungen, trennen Sie Erweiterungen durch Komma.\nErlaubte Platzhalter: {path}, {relative_path} {filename}, {dirname}, {relative_dir} {ext}, {size}, {mtime}, {date}, {date_time}, {time}, {timestamp}
+settings.llama.idx.excluded.ext = Ausgeschlossene Erweiterungen
+settings.llama.idx.excluded.ext.desc = Erweiterungen zum Ausschließen, wenn kein Datenlader für diese Erweiterung vorhanden ist, durch Komma getrennt
+settings.llama.idx.excluded.force = Ausschluss von Dateien erzwingen
+settings.llama.idx.excluded.force.desc = Wenn aktiviert, wird die Ausschlussliste angewendet, selbst wenn der Datenlader für die Erweiterung aktiv ist.
 settings.llama.idx.list = Indizes
 settings.llama.idx.recursive = Rekursive Verzeichnisindizierung
 settings.llama.idx.replace_old = Ersetzen Sie alte Dokumentversionen im Index während der Reindizierung
 settings.llama.idx.replace_old.desc = Wenn aktiviert, werden frühere Versionen von Dokumenten aus dem Index gelöscht, wenn die neuesten Versionen indiziert werden
 settings.llama.idx.storage = Vector Store
 settings.llama.hub.loaders = Zusätzliche Online-Datenlader zum Gebrauch (LlamaHub) - nur für die Python-Version, funktionieren nicht in der kompilierten und Snap-Version.
-settings.llama.extra.api.warning = Warnung: Denken Sie daran, dass beim Indizieren von Inhalten API-Aufrufe an das Einbettungsmodell (text-embedding-ada-002) verwendet werden. Jede Indizierung verbraucht zusätzliche Token. Kontrollieren Sie immer die Anzahl der auf der OpenAI-Seite verwendeten Token!
+settings.llama.extra.api.warning = Warnung: Denken Sie daran, dass beim Indizieren von Inhalten API-Aufrufe an das Einbettungsmodell verwendet werden. Jede Indizierung verbraucht zusätzliche Token. Kontrollieren Sie immer die Anzahl der auf der OpenAI-Seite verwendeten Token!
 settings.llama.extra.db.never = (nie)
 settings.llama.extra.btn.idx_auto = Indexation automatique de la BD en temps réel (en arrière-plan de la conversation)
 settings.llama.extra.btn.idx_head = Klicken Sie hier, um Dateien oder DB zu indizieren:
 settings.llama.extra.btn.idx_db_all = DB (alle)
 settings.llama.extra.btn.idx_db_update = DB (Aktualisierung)
 settings.llama.extra.btn.idx_files_all = Dateien (alle)
 settings.llama.extra.legend = Legende:\nDB (alle) - wird die gesamte Konversationsdatenbank neu indizieren\nDB (Aktualisierung) - wird die Datenbank nur seit der letzten Indexierung neu indizieren\nDateien (alle) - wird alle Dateien im 'data'-Verzeichnis indexieren\nDB automatisch indexieren - automatisch im Hintergrund alle neuen Konversationen indexieren (fügt nur neue Daten hinzu)\n
 settings.lock_modes = Unverträgliche Modi sperren
 settings.max_output_tokens = Maximale Ausgabentoken
+settings.max_requests_limit = RPM-Grenze
+settings.max_requests_limit.desc = Geben Sie das Limit für die maximale Anzahl von Anfragen pro Minute (RPM) an, 0 = kein Limit
 settings.max_total_tokens = Maximale Gesamttoken
 settings.notepad.num = Anzahl der Notizblöcke
 settings.organization_key = OpenAI ORGANISATIONSKEY
 settings.presence_penalty = Anwesenheitsstrafe
+settings.prompt.agent.continue = Agent: fortsetzen
+settings.prompt.agent.continue.desc = Aufforderung zur automatischen Fortsetzung des Gesprächs
+settings.prompt.agent.goal = Agent: Zielaktualisierung
+settings.prompt.agent.goal.desc = Anweisung zur Aktualisierung des aktuellen Zielstatus
+settings.prompt.cmd = Befehlsausführung: Anweisung
+settings.prompt.cmd.desc = Platzhalter: {schema}, {extra}
+settings.prompt.cmd.extra = Befehlsausführung: zusätzliches Nachwort (Nicht-Assistent-Modi)
+settings.prompt.cmd.extra.assistants = Befehlsausführung: zusätzliches Nachwort (nur im Assistentenmodus)
+settings.prompt.cmd.extra.assistants.desc = Zusätzliche Anweisungen zur Trennung lokaler Befehle von der bereits konfigurierten entfernten Umgebung in den Assistenten.
+settings.prompt.ctx.auto_summary.system = Kontext: Auto-Zusammenfassung (Systemaufforderung)
+settings.prompt.ctx.auto_summary.user = Kontext: Auto-Zusammenfassung (Benutzernachricht)
+settings.prompt.ctx.auto_summary.user.desc = Platzhalter: {input}, {output}
+settings.prompt.img = DALL-E: Bildgenerierung
+settings.prompt.img.desc = Aufforderung zur Erzeugung von Anweisungen für DALL-E (falls Rohmodus deaktiviert ist). Nur im Bildmodus.
+settings.render.code_syntax = Stil der Syntaxhervorhebung für Code
 settings.render.plain = Markdown-Formatierung in der Ausgabe deaktivieren (RAW-Textmodus)
 settings.restart.required = Ein Neustart der Anwendung ist notwendig, damit die Änderungen für diese Option übernommen werden.
 settings.section.agent = Agent (autonom)
 settings.section.files = Dateien und Anhänge
 settings.section.general = Allgemein
 settings.section.layout = Layout
 settings.section.ctx = Kontext
@@ -442,14 +643,16 @@
 settings.vision.capture.idx = Kameraindex (Nummer)
 settings.vision.capture.width = Kamerabildbreite (px)
 settings.vision.capture.quality = Bildqualität beim Erfassen (%%)
 speech.enable = Sprachausgabe aktivieren
 speech.listening = Sprechen Sie jetzt...
 status.assistant.deleted = Assistent gelöscht
 status.assistant.saved = Assistent aktualisiert
+status.audio.start = Audio wird generiert, bitte warten...
+status.audio.stopped = Audio-Wiedergabe gestoppt.
 status.cmd.wait = Befehl wird ausgeführt... bitte warten...
 status.deleted = Gelöscht
 status.error = Ooops... ein Fehler ist aufgetreten :(
 status.img.generated = Bild wurde generiert
 status.finished = Abgeschlossen.
 status.img.saved = Bild gespeichert
 status.preset.cleared = Voreinstellung gelöscht
@@ -466,14 +669,15 @@
 status.uploaded = Dateien hochgeladen
 status.uploading = Dateien hochladen...
 text.context_menu.audio.read = Ausgewählten Text vorlesen (Sprachsynthese)...
 text.context_menu.copy_to = Kopieren zu...
 text.context_menu.copy_to.calendar = Kalender
 text.context_menu.copy_to.notepad = Notepad
 text.context_menu.copy_to.input = Eingabe
+text.context_menu.find = Suchen...
 tip.tokens.ctx = Kontext (Erinnerung): in Gebrauch / alle - Token
 tip.tokens.input = Token: Eingabeaufforderung + Systemaufforderung + Kontext + extra = Summe / max
 tip.output.tab.files = Dieses Verzeichnis mit Arbeitsdateien befindet sich auf Ihrer Festplatte. Die Dateien hier sind für KI zum Lesen zugänglich. KI kann Dateien lesen und schreiben sowie Code aus diesem Verzeichnis ausführen. Sie können dieses Verzeichnis lokal auf Ihrem System öffnen und beliebige Dateien hierhin verschieben. Sie können auch die Dateien mit Llama-Index indizieren, damit sie als zusätzliche Wissens Quelle dienen.
 tip.output.tab.draw = Sie können das Zeichenwerkzeug für schnelle Skizzen oder das Erfassen eines Bildes von der Kamera verwenden, und dann solche Bilder im Vision-Modus zur Analyse an die KI senden. Sie können hier ein Bild mit der Kamera erfassen oder ein Bild von der Festplatte öffnen. Wenn Sie ein Bild verwenden, wird es als Anhang in der gesendeten Nachricht enthalten sein.
 tip.output.tab.notepad = Das Notizbuch kann als Werkzeug zum Notieren und Speichern von Informationen dienen. Sie können hier jeden Text aufbewahren, Text aus dem Chat-Fenster kopieren, und alle Informationen werden automatisch gespeichert. Sie können weitere Notizbücher mit der Konfigurationsoption in den Einstellungen erstellen.
 tip.output.tab.calendar = Mit dem Kalender können Sie zu ausgewählten Gesprächen von einem bestimmten Tag navigieren. Klicken Sie in den Kalender auf einen Tag, um die Anzeige des Chat-Verlaufs auf diesen Tag zu beschränken. Sie können auch Tagesnotizen erstellen und ihnen farbige Etiketten zuweisen.
 tip.input.attachments = Hier können Sie Ihrer Nachricht Anhänge hinzufügen, wenn der Modus dies unterstützt. Hier können Sie Dateien zur Analyse im Assistant-Modus oder Bilder und von der Kamera erfasste Bilder zur Analyse im Vision-Modus senden.
@@ -482,26 +686,67 @@
 tip.toolbox.prompt = Der aktuelle Systemprompt kann in Echtzeit geändert werden. Um Befehle aus Plugins auszuführen, aktivieren Sie die Option „Befehle ausführen“.
 tip.toolbox.assistants = Die Liste der Assistenten zeigt die erstellten Assistenten, die auf dem entfernten Server arbeiten. Alle Änderungen werden mit dem entfernten Assistenten synchronisiert.
 tip.toolbox.indexes = Durch das Indizieren von Gesprächen und Dateien können Sie das verfügbare Wissen mit Ihren eigenen Daten und Gesprächsverläufen erweitern.
 tip.toolbox.ctx = Erstellen Sie so viele Gesprächskontexte, wie Sie benötigen; Sie können jederzeit zu ihnen zurückkehren.
 tip.toolbox.mode = Sie können den Arbeitsmodus und das Modell in Echtzeit ändern.
 theme.dark = Dunkel
 theme.light = Hell
+tool.indexer = Indexierer...
+tool.indexer.alert.no_files = Keine Dateien oder Verzeichnisse ausgewählt!
+tool.indexer.alert.no_loader = Kein Datenlader ausgewählt!
+tool.indexer.alert.no_idx = Kein Index ausgewählt!
+tool.indexer.confirm.idx = Indexierung ausführen?
+tool.indexer.confirm.remove = Element aus dem Index entfernen?
+tool.indexer.db.copy = Wert in Zwischenablage kopieren
+tool.indexer.db.remove = Element löschen
+tool.indexer.idx = Index
+tool.indexer.idx.btn.add = Zum Index hinzufügen
+tool.indexer.loaders = Verfügbare Datenlader
+tool.indexer.menu.file.clear_log = Protokoll löschen
+tool.indexer.menu.file.remove_idx = Index entfernen
+tool.indexer.menu.config.settings = Einstellungen
+tool.indexer.option.clear = Dateiliste nach Indexierung löschen
+tool.indexer.option.recursive = Rekursiv (Unterverzeichnisse einschließen)
+tool.indexer.option.replace = Die alte Dokumentenversion aus dem Index entfernen (falls vorhanden)
+tool.indexer.status = Ausgabe-Protokoll (Llama-index):
+tool.indexer.tab.browser = idx durchsuchen
+tool.indexer.tab.browse.tip = Aktuell indizierte Elemente durchsuchen oder entfernen (hier wird die Datenbankzuordnung zum Index angezeigt).
+tool.indexer.tab.ctx = Kontext
+tool.indexer.tab.ctx.auto.yes = JA
+tool.indexer.tab.ctx.auto.no = NEIN
+tool.indexer.tab.ctx.auto_enabled = Automatische Indexierung aktiviert
+tool.indexer.tab.ctx.idx.tip = Klicken Sie hier, um die Kontext-Datenbank zu reindizieren:
+tool.indexer.tab.ctx.last_auto = Letztes automatisches Update des Kontext-Datenbank-Index
+tool.indexer.tab.ctx.last_meta_id = Letzte ctx meta ID
+tool.indexer.tab.ctx.last_meta_ts = Letztes ctx meta TS
+tool.indexer.tab.ctx.tip = Hier können Sie die gesamte Kontext-Datenbank neu indizieren oder die Daten aus der letzten Batch-Indexierung aktualisieren.
+tool.indexer.tab.files = Dateien
+tool.indexer.tab.files.path.dir = Verzeichnis auswählen:
+tool.indexer.tab.files.path.files = Datei(en) auswählen:
+tool.indexer.tab.files.tip = Wählen Sie Datei(en) oder Verzeichnis, um Dateien in den ausgewählten Index einzubetten. Der Datenlader wird automatisch basierend auf der Dateierweiterung ausgewählt.
+tool.indexer.tab.web = Web
+tool.indexer.tab.web.cfg = Konfiguration (globale Einstellungen) - Einstellungen -> Llama-index -> Datenlader
+tool.indexer.tab.web.help = Hilfe
+tool.indexer.tab.web.loader = Datenlader
+tool.indexer.tab.web.source = Datenquelle
+tool.indexer.tab.web.tip = Wählen Sie einen Datenlader aus und definieren Sie die Laderparameter, um externe Daten aus dem Web einzubetten.
+tool.indexer.title = Indexierer
 toolbox.agent.auto_stop.label = Automatischer Stopp
 toolbox.agent.iterations.label = Durchlaufschritte (Iterationen, 0 = unendlich)
 toolbox.assistants.label = Assistenten
 toolbox.indexes.label = Indizes
 toolbox.img_variants.label = Anzahl der zu generierenden Bildvarianten
 toolbox.mode.label = Modus
 toolbox.model.label = Modell
 toolbox.name.ai = KI-Name
 toolbox.name.user = Benutzername
 toolbox.presets.label = Voreinstellungen
 toolbox.prompt = Systemaufforderung
 toolbox.temperature.label = Temperatur
+untitled = Unbenannt
 update.current_version = Ihre Version
 update.download = Zum Download gehen
 update.snap = Zum Snap Store gehen
 update.info = Neue Version ist verfügbar
 update.info.upgrade = Sie können jetzt mit folgendem Befehl aktualisieren:
 update.info.none = Ihre Version ist auf aktuellem Stand
 update.new_version = Neueste Version
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/data/locale/locale.en.ini` & `pygpt_net-2.2.0/src/pygpt_net/data/locale/locale.en.ini`

 * *Files 20% similar despite different names*

```diff
@@ -1,38 +1,60 @@
 [LOCALE]
 about.thanks = Special thanks to GitHub community
 action.add = Add
+action.clear = Clear
+action.copy = Copy
+action.ctx.new = New context...
 action.ctx_copy_id = Copy ID
 action.ctx.indexed = Last indexed at
+action.ctx.new.in_group = New context in: {group}...
 action.delete = Delete
 action.download = Download
 action.duplicate = Duplicate
 action.edit = Edit
+action.group.delete.only = Delete (group only)
+action.group.delete.all = Delete all (with items)
+action.group.new = New group
+action.group.remove = Remove from group
 action.idx = Index with Llama-index...
 action.idx.remove = Remove from
 action.mkdir = Create directory...
+action.move_to = Move to
+action.new = New...
 action.open = Open
+action.open_new_window = Open (new window)
 action.open_dir = Open in directory...
 action.pin = Pin on top
 action.unpin = Unpin
+action.paste = Paste
+action.preview = Preview
+action.profile.delete = Remove profile (from list only)
+action.profile.delete_all = Delete profile (with all user files)
 action.refresh = Refresh
 action.rename = Rename
+action.reset = Reset
 action.restore = Restore
 action.redo = Redo
 action.save = Save
 action.save_as = Save as...
+action.save_selection_as = Save selection as...
+action.select_all = Select all
 action.touch = Create file...
 action.truncate = Truncate
 action.undo = Undo
 action.upload = Upload files here...
 action.use = Use
+action.use.image = As image...
 action.use.attachment = As attachment
 action.use.copy_work_path = Copy working path
 action.use.copy_sys_path = Copy system path
 action.use.read_cmd = Ask for read this file...
+action.video.open = Open video or audio...
+action.video.play = Play video or audio...
+action.video.transcribe = Transcribe audio...
 alert.preset.empty_id = Name is required.
 alert.preset.no_chat_completion = At least one of: chat, completion, img or vision option is required!
 alert.snap.file_manager = Snap detected. Please open the directory manually in you file manager:
 alert.title = Info
 agent.infinity.confirm.content = WARNING: You are attempting to run an infinite loop! This may cause heavy token usage. Are you sure you want to continue?
 assistant.action.delete = Delete
 assistant.action.duplicate = Duplicate
@@ -49,24 +71,36 @@
 assistant.name = Name
 assistant.new = Create
 assistant.new.id_tip = Leave empty ID if you are creating new Assistant.\n...or provide ID from OpenAI if Assistant already exists on server.
 assistant.run.completed = Run: Completed
 assistant.run.failed = Run: Failed
 assistant.run.listening = Run: in progress...
 assistant.run.func.call = Run: func call...
-assistant.tool.code_interpreter = Tool: code interpreter
-assistant.tool.function = Tool: function
-assistant.tool.retrieval = Tool: retrieval
+assistant.store.id = ID
+assistant.store.files.suffix = files
+assistant.store.name = Name
+assistant.store.expire_days = Expire days
+assistant.store.expire_days.desc = 0 = Never
+assistant.store.status = Status
+assistant.store.hide_threads = Hide threads vector stores
+assistant.store.thread_only = (current thread only)
+assistant.tool.code_interpreter = Code interpreter
+assistant.tool.function = Function
+assistant.tool.retrieval = Retrieval
+assistant.tool.file_search = Chat with files
+assistant.vector_store = Vector Store
 attachments.btn.add = Add file
 attachments.btn.clear = Clear files
 attachments.capture_clear = Clear on capture
 attachments.clear.confirm = Clear list?
 attachments.delete.confirm = Remove file from list?
 attachments.header.name = Name
 attachments.header.path = Path
+attachments.header.size = Size
+attachments.header.store = Vector Store(s)
 attachments.send_clear = Clear list after send
 attachments.tab = Attachments
 attachments_uploaded.btn.clear = Clear files
 attachments_uploaded.btn.sync = Sync
 attachments_uploaded.clear.confirm = WARNING: are you sure to delete all this files from remote server?
 attachments_uploaded.delete.confirm = WARNING: are you sure to delete file from remote server?
 attachments_uploaded.sync.tip = Tip: click on 'Sync' to retrieve files list from OpenAI
@@ -79,171 +113,302 @@
 audio.speak.btn.tooltip = Click to start microphone listening
 audio.speak.btn.stop.tooltip = Click to stop microphone listening
 audio.speak.ignoring = Ignored (no prefix)
 audio.speak.now = Speak now...
 audio.speak.wait = Wait...
 audio.speak.sending = Sending...
 audio.speak.energy = Mic. Volume
+audio.transcribe.title = Audio transcribe
+audio.transcribe.tip = Tip: click on "Open..." to begin transcribing the audio from file. The audio input provider from the plugin settings will be utilized.
+audio.transcribe.open = Open audio/video file and transcribe...
+audio.transcribe.confirm = Are you sure you want to transcribe this audio/video file?
+audio.transcribe.clear.confirm = Clear current transcription?
+audio.transcribe.auto_convert = Always convert video to mp3 before transcription (ffmpeg required)
+audio.transcribe.result.finished = Finished: {path} 
+audio.transcribe.result.selected = Selected file: {path}
 calendar.day.search = Show conversations
 calendar.day.label = Set label color...
 calendar.day.label.color.default = Default
 calendar.day.label.color.red = Red
 calendar.day.label.color.orange = Orange
 calendar.day.label.color.yellow = Yellow
 calendar.day.label.color.green = Green
 calendar.day.label.color.blue = Blue
 calendar.day.label.color.indigo = Indigo
 calendar.day.label.color.violet = Violet
 calendar.note.label = Day note
+changed.confirm = Do you want to save your changes before continue?
 chatbox.label = Chat
 chatbox.plugins = plugin(s)
 chat.prefix.attachment = Attachment
+chat.prefix.doc = Sources (Llama-index)
 chat.prefix.file = File
 chat.prefix.img = Image
 chat.prefix.url = Link
+chat.name.user = You
+chat.name.bot = AI
 clipboard.copied = Copied to clipboard.
+clipboard.copied_to = Copied to clipboard:
 cmd.enabled = Execute commands
 cmd.tip = Tip: To enable the execution of commands from plugins that are prefixed with "Command:", you must enable the "Execute commands" option.
 coming_soon = Coming soon...
 confirm.assistant.delete = Delete assistant?
+confirm.assistant.files.truncate = Are you sure to remove all files from all Assistants?
 confirm.assistant.import = Import all assistants from API?
-confirm.assistant.import_files = Import all files for this assistant from API?
+confirm.assistant.import_files = Import all files from API?
+confirm.assistant.store.import = Import all vector stores from API?
+confirm.assistant.store.truncate = Delete all vector stores in API?
+confirm.assistant.store.clear = Clear vector stores (local only)?
+confirm.assistant.files.clear = Clear files (local only)?
+confirm.assistant.store.refresh = Refresh all stores?
+confirm.ctx.delete = Delete group?
+confirm.ctx.delete.all = Delete group and all items?
 confirm.img.delete = Delete file from disk?
 confirm.preset.clear = Are you sure to clear preset?
 confirm.preset.delete = Are you sure to delete this preset?
 confirm.preset.overwrite = Preset exists. Overwrite?
 confirm.preset.restore = Restore default preset for this mode?
+confirm.profile.delete = Are you sure to delete profile? It will be only removed from the list.
+confirm.profile.delete_all = Are you sure to delete profile with all config files and user data files in profile working directory?
+confirm.profile.reset = Are you sure you want to restore the profile to default settings? WARNING: All configuration files and context database will be removed! The data directory will be kept - to remove it, you must delete it manually or use the delete option.
 context.btn.clear = Clear memory
 context.items = items
 context.label = Context
 context.tokens = tokens
+ctx.extra.audio = Read response (audio)
+ctx.extra.copy = Copy to clipboard
+ctx.extra.copy_code = copy to clipboard
+ctx.extra.join = Append to previous response (merge)
+ctx.extra.reply = Regerate response (from this point)
+ctx.extra.edit = Edit and regenerate (from this point)
+ctx.extra.delete = Delete this item
 ctx.delete.all.confirm = Are you sure to delete ALL history contexts?
+ctx.delete.item.confirm = Delete conversation item?
+ctx.delete.item.link = delete
 ctx.delete.confirm = Are you sure to delete?
+ctx.join.item.confirm = Append this response to the previous response (merge items)?
 ctx.list.label = Context and history
 ctx.list.search.placeholder = Search...
 ctx.new = New...
 ctx.new.prefix = New
+ctx.replay.item.confirm = Regenerate response from this point?
 ctx.tokens = tokens
+db.backup = Auto backup
+db.backup.tip = Create backup before every delete/truncate/update
+db.limit = Limit
+db.next = Next
+db.page = Page
+db.prev = Prev
+db.refresh = Refresh
+db.sort = Sort by
+db.order = Order
+db.search = Search
+db.search_in = in
+db.search.placeholder = Search...
+db.time_convert = Convert time()
+db.time_convert.tip = Convert timestamp columns to YYYY-MM-DD HH:MM:SS format
+db.table = Table:
 dialog.about.build = Build
 dialog.about.docs = Documentation
 dialog.about.email = Email
 dialog.about.github = GitHub
 dialog.about.title = About
 dialog.about.version = Version
 dialog.about.website = Official website
 dialog.assistant = Create / Edit assistant
 dialog.assistant.btn.current = Use current
-dialog.assistant.btn.save = Add / update
+dialog.assistant.btn.close = Cancel
+dialog.assistant.btn.save = Save
+dialog.assistant.btn.store = Vector Stores
+dialog.assistant.store = Assistants Vector Stores
+dialog.assistant.store.btn.close = Cancel
+dialog.assistant.store.btn.new = Create
+dialog.assistant.store.btn.save = Save
+dialog.assistant.store.btn.refresh_status = Refresh status
+dialog.assistant.store.delete.confirm = Are you sure to delete Assistants Vector Store?
+dialog.assistant.store.menu.import = Import all
+dialog.assistant.store.menu.refresh_store = Refresh all
+dialog.assistant.store.menu.clear_store = Clear vector stores (local only)
+dialog.assistant.store.menu.clear_files = Clear files (local only)
+dialog.assistant.store.menu.truncate_store = Truncate vector stores (local + remote)
+dialog.assistant.store.menu.truncate_files = Truncate files (local + remote)
 dialog.changelog.title = Changelog
 dialog.confirm.no = No
 dialog.confirm.title = Confirmation
 dialog.confirm.yes = Yes
 dialog.create.dismiss = Cancel
 dialog.create.title = Name
 dialog.create.update = Create
+dialog.css.restore.confirm = Restore default CSS? (all changes in custom CSS files will be moved to .backup files)
+dialog.css.restore.confirm.success = OK. Restored to default CSS styles.
 dialog.editor.btn.defaults = Restore
+dialog.editor.btn.defaults.app = Load defaults
 dialog.editor.btn.save = Save
 dialog.editor.label = Editing config file - restart is required to reload changes.
 dialog.editor.title = Edit JSON/CSS file
+dialog.find.btn.clear = Clear
+dialog.find.btn.find_prev = Find Prev
+dialog.find.btn.find_next = Find Next
+dialog.find.title = Find...
 dialog.image.title = Generated image
+dialog.interpreter.title = Python code interpreter
 dialog.license.title = License
 dialog.license.label = By using this Software you are accepting the following terms:
 dialog.license.accept = I agree
 dialog.logger.btn.clear = Clear
 dialog.logger.title = Logger
 dialog.models.editor = Models editor
 dialog.models.editor.btn.new = Create
-dialog.models.editor.btn.save = Apply
+dialog.models.editor.btn.save = Save
 dialog.models.editor.btn.defaults.user = Undo changes
 dialog.models.editor.btn.defaults.app = Load defaults
 dialog.models.editor.defaults.app.confirm = Load models factory settings?
 dialog.models.editor.defaults.app.result = Restored to models factory settings.
 dialog.models.editor.defaults.user.confirm = Undo current changes?
 dialog.models.editor.defaults.user.result = Restored models user config
 dialog.models.editor.delete.confirm = Are you sure to delete model?
 dialog.plugin_settings = Plugin settings
 dialog.plugin.settings.btn.defaults.app = Load defaults
-dialog.plugin.settings.btn.save = Apply
+dialog.plugin.settings.btn.save = Save
 dialog.plugin.settings.btn.defaults.user = Undo changes
 dialog.plugin.settings.defaults.app.confirm = Load factory plugin settings?
 dialog.plugin.settings.defaults.app.result = Restored to plugin factory settings.
 dialog.plugin.settings.defaults.user.confirm = Undo current changes?
 dialog.plugin.settings.defaults.user.result = Restored plugin user config
 dialog.preset = Preset editor
+dialog.preset.plugins.editor = Plugins preset editor
 dialog.preset.btn.current = Use current
 dialog.preset.btn.save = Save
+dialog.profile.alert.delete.current = Cannot delete current active profile!
+dialog.profile.alert.name.empty = Name cannot be empty!
+dialog.profile.alert.path.same = Source and destination paths are the same! Aborted.
+dialog.profile.alert.path.empty = Workdir path cannot be empty!
+dialog.profile.alert.path.not_exists = Directory not exists!
+dialog.profile.alert.duplicate.not_empty = Directory is not empty and there is no previous config inside! Aborting.\n\nTip: choose existing workdir or an empty directory to create new workdir in it.
+dialog.profile.alert.src.empty = Source profile not found! Aborted.
+dialog.profile.checkbox.include_db = + database
+dialog.profile.checkbox.include_datadir = + "data" directory
+dialog.profile.checkbox.switch = Switch to created profile
+dialog.profile.editor = Profiles
+dialog.profile.item.editor = Profile
+dialog.profile.item.btn.dismiss = Cancel
+dialog.profile.item.btn.create = Create
+dialog.profile.item.btn.update = Update
+dialog.profile.item.btn.duplicate = Duplicate here
+dialog.profile.name.label = Profile name
+dialog.profile.new = New profile
+dialog.profile.status.changed = Profile changed to
+dialog.profile.status.created = Profile created.
+dialog.profile.status.updated = Profile updated.
+dialog.profile.status.deleted = Profile deleted
+dialog.profile.status.duplicated = Profile duplicated.
+dialog.profile.status.removed = Profile removed from list
+dialog.profile.tip = By creating new profiles, you can use separate settings, different context histories, and user data, and quickly switch between them.
+dialog.profile.workdir.label = Workdir (directory for config files and user data)
 dialog.rename.dismiss = Cancel
 dialog.rename.title = Change name
 dialog.rename.update = Update name
 dialog.settings = Settings
 dialog.settings.btn.defaults.user = Undo changes
 dialog.settings.btn.defaults.app = Load defaults
 dialog.settings.btn.save = Save
 dialog.settings.defaults.user.result = Restored user config
 dialog.settings.defaults.app.result = Restored to factory settings. Previous settings saved in: config.json.backup.
 dialog.start.btn = Go to settings...
 dialog.start.link = https://platform.openai.com/account/api-keys
 dialog.start.settings.text = If you already have an API KEY then you can configure it in the settings window.\nClick on button GO TO SETTINGS and then paste your API KEY into API KEY field.
 dialog.start.title = API KEY is not configured yet
 dialog.start.title.text = Your API key is not configured yet...\nYou will obtain an API key by registering an account on the OpenAI website:
+dialog.workdir.tip = Choose a directory from the disk and click 'Change/Move...' to move the current working directory to a new location, or to set the current working directory to an existing one. Required disk space (for move): {size}
+dialog.workdir.reset.btn = Current
+dialog.workdir.update.btn = Change/Move...
+dialog.workdir.change.confirm = Are you sure to change/move workdir to:\n{path}?
+dialog.workdir.change.empty.alert = Directory is not empty! Aborting.
+dialog.workdir.update.confirm = EXISTING WORKDIR: The directory "{path}" is not empty and already contains data from another workdir. Would you like to ONLY set this existing directory as the current workdir (without moving any data)?
+dialog.workdir.title = Change working directory
+dialog.workdir.result.no_free_space = Too low space on disk! Required: {required}, Free space: {free}.
+dialog.workdir.result.same_directory = Nothing to move.
+dialog.workdir.result.success = [OK] The working directory is currently set to: {path}
+dialog.workdir.result.failed = An error occurred while moving working directory.
+dialog.workdir.result.wait = Please wait... moving current working directory... This may take a while...
+dialog.workdir.result.directory_not_exists = Destination directory not exist!
 dictionary.assistant.tool.function.name = Function name
 dictionary.assistant.tool.function.params = Function params (JSON object)
 dictionary.assistant.tool.function.desc = Description (optional)
+dictionary.cmd.param.name = Param name
+dictionary.cmd.param.type = Param type
+dictionary.cmd.param.description = Description (optional)
+dictionary.cmd.param.required = Required (optional)
+dictionary.config.llama.idx.custom_meta.extensions = File extension(s), separated by comma. Use * (asterisk) as extension if you want to apply field to all files
+dictionary.config.llama.idx.custom_meta.key = Metadata key (field name)
+dictionary.config.llama.idx.custom_meta.value = Metadata value. Allowed placeholders: {path}, {relative_path} {filename}, {dirname}, {relative_dir} {ext}, {size}, {mtime}, {date}, {date_time}, {time}, {timestamp}. Set empty value to remove field with specified key from metadata.
+dictionary.config.llama.idx.custom_meta.web.loader = Data type (loader)
+dictionary.config.llama.idx.custom_meta.web.key = Metadata key (field name)
+dictionary.config.llama.idx.custom_meta.web.value = Metadata value. Allowed placeholders: {mtime}, {date}, {date_time}, {time}, {timestamp} + {data loader args}
+dictionary.config.llama.idx.embeddings.env.name = ENV name (to set with os.environ)
+dictionary.config.llama.idx.embeddings.env.value = ENV value, use {config_key} as a placeholder to use the value from the application configuration.
+dictionary.config.llama.idx.embeddings.args.name = Name of keyword argument
+dictionary.config.llama.idx.embeddings.args.value = Value of keyword argument
+dictionary.config.llama.idx.embeddings.args.type = Type, for dict use JSON string, for list: item1,item2,etc.
 dictionary.config.llama.idx.list.id = ID (directory name for index)
 dictionary.config.llama.idx.list.name = Name
 dictionary.config.llama.idx.list.model_embed = Model to use for embedding (indexing), default: gpt-3.5-turbo 
 dictionary.config.llama.idx.list.model_query = Model for querying
-dictionary.config.llama.idx.storage.args.name = Name of extra argument
-dictionary.config.llama.idx.storage.args.value = Value of extra argument
+dictionary.config.llama.idx.storage.args.name = Name of keyword argument
+dictionary.config.llama.idx.storage.args.value = Value of keyword argument
 dictionary.config.llama.idx.storage.args.type = Type, for dict use JSON string, for list: item1,item2,etc.
 dictionary.config.llama.hub.loaders.args.loader = Data loader
-dictionary.config.llama.hub.loaders.args.name = Name of extra argument
-dictionary.config.llama.hub.loaders.args.value = Value of extra argument
+dictionary.config.llama.hub.loaders.args.name = Name of keyword argument
+dictionary.config.llama.hub.loaders.args.value = Value of keyword argument
 dictionary.config.llama.hub.loaders.args.type = Type, for dict use JSON string, for list: item1,item2,etc.
 dictionary.config.llama.hub.loaders.ext = File extensions (separated by comma if more than one)
 dictionary.config.llama.hub.loaders.loader = Loader name on LlamaHub (name is passed to download_loader())
-dictionary.model.langchain.args.name = Name of extra argument
-dictionary.model.langchain.args.value = Value of extra argument
+dictionary.model.langchain.args.name = Name of keyword argument
+dictionary.model.langchain.args.value = Value of keyword argument
 dictionary.model.langchain.args.type = Type, for dict use JSON string, for list: item1,item2,etc.
-dictionary.model.langchain.env.name = Name of extra ENV var
-dictionary.model.langchain.env.value = Value of extra ENV var
-dictionary.model.llama_index.args.name = Name of extra argument
-dictionary.model.llama_index.args.value = Value of extra argument
+dictionary.model.langchain.env.name = ENV name (to set with os.environ)
+dictionary.model.langchain.env.value = ENV value, use {config_key} as a placeholder to use the value from the application configuration.
+dictionary.model.llama_index.args.name = Name of keyword argument
+dictionary.model.llama_index.args.value = Value of keyword argument
 dictionary.model.llama_index.args.type = Type, for dict use JSON string, for list: item1,item2,etc.
-dictionary.model.llama_index.env.name = Name of extra ENV var
-dictionary.model.llama_index.env.value = Value of extra ENV var
+dictionary.model.llama_index.env.name = ENV name (to set with os.environ)
+dictionary.model.llama_index.env.value = ENV value, use {config_key} as a placeholder to use the value from the application configuration.
+dictionary.plugin.agent.prompts.enabled = Enabled (on/off)
+dictionary.plugin.agent.prompts.name = Name
+dictionary.plugin.agent.prompts.prompt = Prompt to handle autonomus mode
 dictionary.plugin.audio_input.google_args.name = Keyword argument name
 dictionary.plugin.audio_input.google_args.value = Keyword argument value
 dictionary.plugin.audio_input.google_args.type = Type, for dict use JSON string, for list: item1,item2,etc.
 dictionary.plugin.audio_input.google_cloud_args.name = Keyword argument name
 dictionary.plugin.audio_input.google_cloud_args.value = Keyword argument value
 dictionary.plugin.audio_input.google_cloud_args.type = Type, for dict use JSON string, for list: item1,item2,etc.
 dictionary.plugin.audio_input.bing_args.name = Keyword argument name
 dictionary.plugin.audio_input.bing_args.value = Keyword argument value
 dictionary.plugin.audio_input.bing_args.type = Type, for dict use JSON string, for list: item1,item2,etc.
 dictionary.plugin.crontab.crontab.enabled = Enabled (True/False)
 dictionary.plugin.crontab.crontab.crontab = Crontab (cron-syntax)
 dictionary.plugin.crontab.crontab.prompt = Prompt to send
 dictionary.plugin.crontab.crontab.preset = Preset to use
-dictionary.plugin.cmd_api.cmds.enabled = Enabled (True / False)
+dictionary.plugin.cmd_api.cmds.enabled = Enabled (True/False)
 dictionary.plugin.cmd_api.cmds.name = Name: unique API call name (ID)
 dictionary.plugin.cmd_api.cmds.instruction = Instruction: description for model when and how to use this API call
 dictionary.plugin.cmd_api.cmds.get_params = GET params: list, separated by comma, GET params to append to endpoint URL
 dictionary.plugin.cmd_api.cmds.post_params = POST params: list, separated by comma, POST params to send in POST request
 dictionary.plugin.cmd_api.cmds.post_json = POST JSON: provide the JSON object, template to send in POST JSON request, use %%param%% as POST param placeholders
 dictionary.plugin.cmd_api.cmds.headers = Headers: provide the JSON object with dictionary of extra request headers, like Authorization, API keys, etc.
 dictionary.plugin.cmd_api.cmds.type = Request type: use GET for basic GET request, POST to send encoded POST params or POST_JSON to send JSON-encoded object as body
 dictionary.plugin.cmd_api.cmds.endpoint = Endpoint: API endpoint URL, use {param} as GET param placeholders
+dictionary.plugin.cmd_custom.cmds.enabled = Enabled (True/False)
 dictionary.plugin.cmd_custom.cmds.name = Command name
 dictionary.plugin.cmd_custom.cmds.instruction = Instruction prompt
 dictionary.plugin.cmd_custom.cmds.params = Params list (separated by comma)
 dictionary.plugin.cmd_custom.cmds.cmd = Command to execute
 dictionary.plugin.extra_prompt.prompts.enabled = Active (True/False)
 dictionary.plugin.extra_prompt.prompts.name = Name
-dictionary.plugin.extra_prompt.prompts.prompt = Prompt to append to system prompt
+dictionary.plugin.extra_prompt.prompts.prompt = Prompt to append to the system prompt
 dictionary.plugin.self_loop.prompts.enabled = Active (True/False)
 dictionary.plugin.self_loop.prompts.name = Name
 dictionary.plugin.self_loop.prompts.prompt = Prompt (system instruction)
 dictionary.preset.tool.function.name = Function name
 dictionary.preset.tool.function.params = Function params (JSON object)
 dictionary.preset.tool.function.desc = Description (optional)
 dt.days_ago = days ago
@@ -258,29 +423,31 @@
 files.delete.confirm = Delete file/directory?
 files.delete.recursive.confirm = Directory is not empty! Are you sure you want to delete the directory and all the files in it?
 files.explorer.header.name = Name
 files.explorer.header.size = Size
 files.explorer.header.type = Type
 files.explorer.header.modified = Date modified
 files.explorer.header.indexed = Indexed at
+filter.ctx.counters.all = All counters
 filter.ctx.label = Context list display filter
+filter.ctx.label.colors = Display by labels
 filter.ctx.radio.all = All
 filter.ctx.radio.pinned = Pinned
 filter.ctx.radio.labeled = Labeled
 filter.ctx.radio.indexed = Indexed (llama-index)
 header.assistant.tool.function.name = Nazwa
 header.assistant.tool.function.params = Parametry (JSON)
 header.assistant.tool.function.desc =  Opis
 icon.audio.input = Enable/disable audio input
 icon.audio.output = Enable/disable audio output
 icon.video.capture = Enable/disable camera capture
 idx.btn.index_all = Index all
 idx.btn.clear = Clear index
 idx.btn.truncate = Clear index (all)
-idx.last = Last DB indexing
+idx.last = Last DB auto-indexing
 idx.confirm.db.content = Are you sure to index records from database?
 idx.confirm.file.content = Are you sure to index this file/directory:\n{dir}?
 idx.confirm.files.content = Are you sure to index all the files in directory:\n{dir}?
 idx.confirm.clear.content = Are you sure to delete all data in index?\nThis will delete entire index directory from disk!
 idx.confirm.file.remove.content = Are you sure to delete this file/directory from index:\n{dir}?
 idx.new = New
 idx.index_now = Index
@@ -288,15 +455,15 @@
 idx.status.empty = Nothing indexed.
 idx.status.error = [ERROR] Nothing indexed.
 idx.status.indexing = Indexing... please wait...
 idx.status.success = [OK] Indexed items:
 idx.status.truncating = Removing index... please wait...
 idx.status.truncate.success = [OK] Index truncated.
 idx.status.truncate.error = [ERROR] Index not truncated.
-idx.token.warn = This will consume additional tokens to embed the data (text-embedding-ada-002 model will be used)
+idx.token.warn = This will consume additional tokens to embed the data.
 img.status.downloading = Downloading... 
 img.status.error = Image generate error
 img.status.finished = Image generated and downloaded.
 img.status.generating = Please wait... generating image from
 img.status.prompt.error = Image prompt generate by model error
 img.status.prompt.wait = Asking for image prompt... please wait...
 img.status.save.error = Image save error
@@ -305,69 +472,101 @@
 img.raw = Raw mode
 img.save.title = Save image
 info.settings.all.saved = All settings saved
 info.settings.saved = Settings saved
 inline.vision = + Vision
 input.btn.send = Send
 input.btn.stop = Stop
+input.btn.cancel = Cancel
+input.btn.update = Update
 input.label = Input (Your prompt)
 input.radio.enter = Enter
 input.radio.enter_shift = Shift+Enter
 input.radio.none = Off
 input.send_clear = Clear on send
 input.stream = Stream
 input.tab = Input
+interpreter.all = Execute history (all)
+interpreter.auto_clear = Clear on send
+interpreter.btn.clear = Clear output
+interpreter.btn.send = Send / execute
+interpreter.clear.confirm = Clear current window?
+interpreter.edit_label.edit = Code (history)
+interpreter.edit_label.output = Output
+interpreter.edit = Edit mode
+interpreter.input.placeholder = Python code to execute...
 menu.audio = Audio / Voice
 menu.audio.input = Input: speech recognition
 menu.audio.output = Output: speech synthesis
 menu.config = Config
 menu.config.edit.config = Edit config.json...
 menu.config.edit.models = Edit models.json...
 menu.config.edit.css = Edit CSS stylesheets...
+menu.config.edit.css.restore = Restore default CSS...
 menu.config.edit.json = Edit JSON configs...
 menu.config.models = Models...
-menu.config.open_dir = Open working dir...
+menu.config.open_dir = Open working directory...
+menu.config.change_dir = Change working directory...
+menu.config.profile = Profile
+menu.config.profile.edit = Edit profiles...
+menu.config.profile.new = New profile...
 menu.config.save = Save config
 menu.config.settings = Settings...
 menu.debug = Debug
 menu.debug.app.log = View log file (app.log)
 menu.debug.agent = Agent...
 menu.debug.assistants = Assistants...
 menu.debug.attachments = Files / attachments...
 menu.debug.config = Config...
 menu.debug.context = Context...
+menu.debug.db = DB Viewer
 menu.debug.indexes = Indexes...
 menu.debug.logger = Open Logger
 menu.debug.models = Models...
 menu.debug.plugins = Plugins...
 menu.debug.presets = Presets...
 menu.debug.ui = UI...
 menu.file = File
 menu.file_clear_history = Clear history
+menu.file_clear_history_groups = Clear history (+ groups)
+menu.file.current = Select current
 menu.file.exit = Exit
+menu.file.group.new = New context group...
 menu.file.new = New context...
 menu.info = About
 menu.info.about = About
 menu.info.changelog = Changelog
 menu.info.docs = Documentation
-menu.info.github = GitHub project page
+menu.info.donate = Support and donate
+menu.info.github = GitHub (source code)
 menu.info.license = License
 menu.info.pypi = PyPi
 menu.info.snap = Snap Store
 menu.info.updates = Check for updates...
 menu.info.website = Official website - pygpt.net
 menu.lang = Language
 menu.plugins = Plugins
+menu.plugins.presets = Presets...
+menu.plugins.presets.edit = Edit presets...
+menu.plugins.presets.new = New preset...
 menu.plugins.settings = Settings...
 menu.theme = Theme
 menu.theme.dark = Dark color...
 menu.theme.light = Light color...
+menu.theme.syntax = Code syntax highlight...
 menu.theme.density = Layout size
 menu.theme.tooltips = Show tooltips
 menu.theme.settings = Settings...
+menu.theme.blocks = Display blocks
+menu.tools = Tools
+menu.tools.audio.transcribe = Transcribe audio/video files
+menu.tools.interpreter = Python code interpreter
+menu.tools.media.player = Media player
+menu.tools.image.viewer = Image viewer
+menu.tools.text.editor = Text editor
 menu.tray.notepad = Open Notepad...
 menu.tray.screenshot = Ask with screenshot...
 menu.tray.scheduled = Scheduled tasks
 menu.video = Video
 menu.video.capture = Input: camera
 menu.video.capture.auto = Auto capture
 mode.agent = Agent (autonomous)
@@ -413,14 +612,15 @@
 model.llama_index.env.desc = Environment variables to set for Llama-index provider (API keys, etc.)
 notify.agent.goal.title = Goal achieved
 notify.agent.goal.content = Agent: the goal has been achieved.
 notify.agent.stop.title = Finished
 notify.agent.stop.content = Agent: stopped
 notify.cron.title =  Running scheduled task
 notify.update.title = New version available
+output.edit = Edit
 output.raw = Plain text
 output.tab.calendar = Calendar
 output.tab.chat = Chat
 output.tab.files = Files
 output.tab.notepad = Notepad
 output.timestamp = Show time
 output.tab.painter = Draw
@@ -444,111 +644,165 @@
 preset.filename = ID (filename)
 preset.img = Image
 preset.langchain = Langchain
 preset.llama_index = Chat with files
 preset.name = Preset Name
 preset.new = Create
 preset.prompt = System prompt
+preset.prompt.paste_template = Paste from template...
 preset.temperature = Temperature
 preset.tool.function = Functions
 preset.untitled = (untitled)
 preset.use = Use
 preset.user_name = User name
 preset.vision = Vision
+profile.current.suffix = (current)
 screenshot.capture.name.prefix = Screenshot from
 settings.advanced.collapse = Show/hide advanced options
 settings.agent.mode = Sub-mode to use
 settings.agent.mode.desc = Sub-mode to use in Agent mode (chat, completion, langchain, llama_index, etc.)
 settings.agent.goal.notify = Display a tray notification when the goal is achieved.
 settings.agent.idx = Index to use
 settings.agent.idx.desc = Only if sub-mode is llama_index (Chat with files), choose the index to use in Agent mode
+settings.api_endpoint = API Endpoint
+settings.api_endpoint.desc = OpenAI API endpoint URL, default: https://api.openai.com/v1
 settings.api_key = OpenAI API KEY
 settings.check_updates = Check for updates on start
 settings.check_updates.bg = Check for updates in background
-settings.cmd.prompt = Prompt (append): command execute instruction
+settings.cmd.config.collapse = JSON parameters (show/hide)
+settings.cmd.field.enable = Enable: {cmd} (cmd)
+settings.cmd.field.desc = Enable `{cmd}` command execution.
+settings.cmd.field.tooltip = Enable `{cmd}` command execution
+settings.cmd.field.instruction = Instruction for model
+settings.cmd.field.params = JSON parameters (command arguments)
 settings.context_threshold = Context threshold
+settings.context_threshold.desc = Tokens reserved for responses
+settings.ctx.audio = Always show audio icon
+settings.ctx.allow_item_delete = Allow context item delete
+settings.ctx.allow_item_delete.desc = Enable display of the delete conversation item link
 settings.ctx.auto_summary = Context auto-summary
-settings.ctx.auto_summary.prompt = Prompt (user): auto-summary
-settings.ctx.auto_summary.system = Prompt (sys): auto-summary
 settings.ctx.auto_summary.model = Model used for auto-summary
+settings.ctx.code_interpreter = Show code interpreter output
+settings.ctx.code_interpreter.desc = If enabled, output from the code interpreter in the Assistant API will be displayed in real-time (in stream mode).
+settings.ctx.copy_code = Show "copy to clipboard" in code blocks
+settings.ctx.convert_lists = Convert lists to paragraphs
 settings.ctx.records.limit = Limit of last contexts on list  (0 = unlimited)
 settings.ctx.search_content = Search also in conversation content, not only in titles
 settings.ctx.search.desc = Enable search also in context items' content
+settings.ctx.sources = Show Llama-index sources
+settings.ctx.sources.desc = If enabled, sources utilized will be displayed in the response (if available, it will not work in streamed chat)
+settings.ctx.use_extra = Use extra context output
+settings.ctx.use_extra.desc = If enabled, plain text output (if available) from command results will be displayed alongside the JSON output.
 settings.developer.debug = Show debug menu
 settings.defaults.app.confirm = Load factory app settings?
 settings.defaults.user.confirm = Undo current changes?
 settings.dict.delete.confirm = Remove item from list?
 settings.download.dir = Directory for file downloads
 settings.download.dir.desc = Subdirectory for downloaded files, e.g. in Assistants mode, inside "data"
 settings.font_size.tip = Tip: You can change the font size using CTRL + Mouse Wheel
-settings.font_size = Font size (chat window)
+settings.font_size = Font size (chat plain-text, notepads)
 settings.font_size.ctx = Font size (ctx list)
 settings.font_size.input = Font size (input)
 settings.font_size.toolbox = Font size (toolbox)
 settings.frequency_penalty = Frequency Penalty
-settings.img_prompt = DALL-E: Prompt (sys): prompt generation
 settings.img_prompt_model = DALL-E: prompt generation model
 settings.img_resolution = DALL-E: image size
 settings.img_quality = DALL-E: image quality
 settings.img_dialog_open = Open image dialog after generate (Image mode)
 settings.layout.density = Layout density
 settings.layout.dpi.scaling = DPI Scaling
 settings.layout.dpi.factor = DPI factor
 settings.layout.dialog.geometry.store = Store dialog window positions
 settings.layout.minimized = Start minimized
 settings.layout.tooltips = Display tips (help descriptions)
 settings.layout.tray = Show tray icon
 settings.layout.tray.desc = Restart required. Tray icon provides additional features like "Ask with screenshot" or "Open notepad".
 settings.layout.tray.minimize = Minimize to tray on exit
 settings.layout.tray.minimize.desc = Tray icon enabled is required for this option to work.
-settings.llama.idx.excluded_ext = Excluded file extensions
-settings.llama.idx.excluded_ext.desc = File extensions to exclude if no data loader for this extension, separated by comma
+settings.llama.idx.custom_meta = Custom metadata to append/replace to indexed documents (files)
+settings.llama.idx.custom_meta.desc = Define custom metadata key => value fields for specified file extensions, separate extensions by comma.\nAllowed placeholders: {path}, {relative_path} {filename}, {dirname}, {relative_dir} {ext}, {size}, {mtime}, {date}, {date_time}, {time}, {timestamp}
+settings.llama.idx.custom_meta.web = Custom metadata to append/replace to indexed documents (web/external content)
+settings.llama.idx.custom_meta.web.desc = Define custom metadata key => value fields for specified external data loaders.\nAllowed placeholders: {date}, {date_time}, {time}, {timestamp} + {data loader args}
+settings.llama.idx.embeddings.provider = Embeddings provider
+settings.llama.idx.embeddings.limit.rpm = RPM limit
+settings.llama.idx.embeddings.limit.rpm.desc = Limit for embeddings API calls - specify the limit of maximum requests per minute (RPM), 0 = no limit
+settings.llama.idx.embeddings.env = Embeddings provider ENV vars
+settings.llama.idx.embeddings.env.desc = Environment to setup before embedding provider initialization, such as API keys, etc. Use {config_key} as a placeholder to use the value from the application configuration.
+settings.llama.idx.embeddings.args = Embeddings provider **kwargs
+settings.llama.idx.embeddings.args.desc = Additional keyword arguments (**kwargs), such as model name, for the embeddings provider instance. These arguments will be passed to the provider instance; please refer to the Llama-index API reference for a list of required arguments for the specified embeddings provider.
+settings.llama.idx.excluded.ext = Excluded file extensions
+settings.llama.idx.excluded.ext.desc = File extensions to exclude if no data loader for this extension, separated by comma
+settings.llama.idx.excluded.force = Force exclude files
+settings.llama.idx.excluded.force.desc = If enabled, the exclusion list will be applied even when the data loader for the extension is active.
 settings.llama.idx.list = Indexes
 settings.llama.idx.recursive = Recursive directory indexing
 settings.llama.idx.replace_old = Replace old document versions in the index during re-indexing
 settings.llama.idx.replace_old.desc = If enabled, previous versions of documents will be deleted from the index when the newest versions are indexed
 settings.llama.idx.storage = Vector Store
 settings.llama.idx.storage.args = Vector Store (**kwargs)
 settings.llama.idx.storage.args.desc = Additional keyword arguments (**kwargs), such as API keys, for the Vector Store provider. These arguments will be passed to the provider; please refer to the Llama-index API reference for a list of required arguments for the specified Vector Store.
 settings.llama.hub.loaders = Additional online data loaders to use (LlamaHub) - only for the Python version, will not work in the compiled or Snap versions
 settings.llama.hub.loaders.args = Additional keyword arguments (**kwargs) for data loaders
 settings.llama.hub.loaders.args.desc = Additional keyword arguments (**kwargs), such as settings, API keys, for the data loader. These arguments will be passed to the loader; please refer to the PyGPT documentation or LlamaHub loaders reference for a list of allowed arguments for the specified data loader. One argument per single row.
 settings.llama.hub.loaders.use_local = Use local models in Video/Audio and Image (vision) loaders
 settings.llama.hub.loaders.use_local.desc = Enable usage of local models in Video/Audio and Image (vision) loaders. If disabled then API models will be used (GPT-4 Vision and Whisper). Note: local models will work only in Python version (not compiled/Snap)
-settings.llama.extra.api.warning = Warning: remember that when indexing content, API calls to the embedding model (text-embedding-ada-002) are used. Each indexing consumes additional tokens. Always control the number of tokens used on the OpenAI page!
+settings.llama.extra.api.warning = Warning: remember that when indexing content, API calls to the embedding model are used. Each indexing consumes additional tokens. Always control the number of tokens used on the OpenAI page!
 settings.llama.extra.db.never = (never)
 settings.llama.extra.btn.idx_auto.index = ID of index for auto-indexing
 settings.llama.extra.btn.idx_auto = Auto-index DB in real-time (in background of conversation)
+settings.llama.extra.btn.idx_auto.modes = Enable auto-index in modes
 settings.llama.extra.btn.idx_head = Click here to index files or DB:
 settings.llama.extra.btn.idx_db_all = DB (all)
 settings.llama.extra.btn.idx_db_update = DB (update)
 settings.llama.extra.btn.idx_files_all = Files (all)
 settings.llama.extra.loaders = Built-in data loaders
 settings.llama.extra.legend = Legend:\nDB (all) - will reindex the entire conversation database\nDB (update) - will reindex the database only since the last indexing\nFiles (all) - will index all files in the 'data' directory\nAuto-index DB - automatically index in the background all new conversations (append only new data)\n
 settings.lock_modes = Lock incompatible modes
 settings.max_output_tokens = Max output tokens
+settings.max_requests_limit = RPM limit
+settings.max_requests_limit.desc = Specify the limit of maximum requests per minute (RPM), 0 = no limit
 settings.max_total_tokens = Max total tokens
 settings.notepad.num = Number of notepads
 settings.organization_key = OpenAI ORGANIZATION KEY
 settings.presence_penalty = Presence Penalty
+settings.prompt.agent.continue = Agent: continue
+settings.prompt.agent.continue.desc = Prompt sent to automatically continue the conversation
+settings.prompt.agent.goal = Agent: goal update
+settings.prompt.agent.goal.desc = Prompt to instruct how to update current goal status
+settings.prompt.cmd = Command execute: instruction
+settings.prompt.cmd.desc = Placeholders: {schema}, {extra}
+settings.prompt.cmd.extra = Command execute: extra footer (non-Assistant modes)
+settings.prompt.cmd.extra.assistants = Command execute: extra footer (Assistant mode only)
+settings.prompt.cmd.extra.assistants.desc = Additional instructions to separate local commands from the remote environment that is already configured in the Assistants.
+settings.prompt.ctx.auto_summary.system = Context: auto-summary (system prompt)
+settings.prompt.ctx.auto_summary.user = Context: auto-summary (user message)
+settings.prompt.ctx.auto_summary.user.desc = Placeholders: {input}, {output}
+settings.prompt.img = DALL-E: image generate
+settings.prompt.img.desc = Prompt for generating prompts for DALL-E (if raw-mode is disabled). Image mode only.
+settings.render.engine = Rendering engine
+settings.render.open_gl = OpenGL hardware acceleration
+settings.render.web.only.desc = WebEngine / Chromium rendering engine only
+settings.render.code_syntax = Code syntax highlight
 settings.render.plain = Disable markdown formatting in output (RAW plain text mode)
 settings.restart.required = Restart of the application is required for this option to take effect.
 settings.section.agent = Agent (autonomous)
 settings.section.files = Files and attachments
 settings.section.general = General
 settings.section.layout = Layout
 settings.section.llama_index = Indexes (llama-index)
 settings.section.ctx = Context
 settings.section.developer = Developer
 settings.section.model = Models
 settings.section.images = Images
+settings.section.prompts = Prompts
 settings.section.updates = Updates
 settings.section.vision = Vision
 settings.section.tab.general = General
 settings.section.llama-index.data_loaders = Data loaders
+settings.section.llama-index.embeddings = Embeddings
 settings.section.llama-index.indexing = Indexing
 settings.section.llama-index.store = Vector Store
 settings.section.llama-index.update = Update
 settings.store_history = Store history
 settings.store_history_time = Store time in history
 settings.temperature = Temperature
 settings.theme.markdown = Use theme colors in chat window
@@ -560,18 +814,21 @@
 settings.use_context = Use context (memory)
 settings.vision.capture.auto = Auto capture
 settings.vision.capture.enabled = Camera
 settings.vision.capture.height = Camera capture height (px)
 settings.vision.capture.idx = Camera IDX (number)
 settings.vision.capture.width = Camera capture width (px)
 settings.vision.capture.quality = Image capture quality (%%)
+settings.zoom = Chat output window zoom
 speech.enable = Speak
 speech.listening = Speak now...
 status.assistant.deleted = Assistant deleted
 status.assistant.saved = Assistant updated
+status.audio.start = Generating audio, please wait...
+status.audio.stopped = Stopped audio playback.
 status.cmd.wait = Executing command... please wait...
 status.deleted = Deleted
 status.error = Ooopss... error occurred :(
 status.finished = Finished.
 status.img.generated = Image has been generated.
 status.img.saved = Image saved
 status.preset.cleared = Preset cleared
@@ -588,14 +845,17 @@
 status.uploaded = Files are uploaded
 status.uploading = Uploading files...
 text.context_menu.audio.read = Read selected text (speech synthesis)...
 text.context_menu.copy_to = Copy to...
 text.context_menu.copy_to.calendar = Calendar
 text.context_menu.copy_to.notepad = Notepad
 text.context_menu.copy_to.input = Input
+text.context_menu.copy_to.python.code = Python interpreter (Code/history)
+text.context_menu.copy_to.python.input = Python interpreter (Input)
+text.context_menu.find = Find...
 tip.tokens.ctx = Context (memory): in use / all - tokens
 tip.tokens.input = Tokens: input prompt + system prompt + context + extra = sum / max
 tip.output.tab.files = This working files directory is on your disk. The files here are accessible for AI. AI can write and read files, as well as run code from this directory. You can open this directory locally on your system and place any files here. You can also index the files from here with Llama-index, so they serve as an additional knowledge source.
 tip.output.tab.draw = You can use the drawing tool for quick sketching or capturing an image from the camera, and then send such images to the AI in Vision mode for analysis. You can capture an image with the camera here or open an image from the disk. When using an image, it will be included in the sent message as an attachment.
 tip.output.tab.notepad = The notepad can serve as a tool for taking notes and storing information. You can keep any text here, copy text from the chat window, and all information will be automatically saved. You can create more notepads using the configuration option in the settings.
 tip.output.tab.calendar = Using the calendar, you can navigate back to selected conversations from a specific day. Click on a day in the calendar to limit the display of chat history to that day. You can also create day notes and assign them colorful labels.
 tip.input.attachments = Here you can add attachments to the message you are sending if the mode supports it. You can send files here for analysis in Assistant mode or images and captured images from the camera for analysis in Vision mode.
@@ -604,27 +864,68 @@
 tip.toolbox.prompt = The current system prompt can be modified in real time. To execute commands from plugins, enable the option "Execute commands."
 tip.toolbox.assistants = The list of assistants shows the assistants created and operating on the remote server. Any changes will be synchronized with the remote assistant.
 tip.toolbox.indexes = By indexing conversations and files, you can expand the available knowledge with your own data and conversation history.
 tip.toolbox.ctx = Create as many conversation contexts as you need; you can return to them at any time.
 tip.toolbox.mode = You can change the working mode and model in real time.
 theme.dark = Dark
 theme.light = Light
+tool.indexer = Indexer...
+tool.indexer.alert.no_files = No files or directories selected!
+tool.indexer.alert.no_loader = No loader selected!
+tool.indexer.alert.no_idx = No index selected!
+tool.indexer.confirm.idx = Execute indexing?
+tool.indexer.confirm.remove = Remove item from index?
+tool.indexer.db.copy = Copy value to clipboard
+tool.indexer.db.remove = Delete item
+tool.indexer.idx = Index
+tool.indexer.idx.btn.add = Add to index
+tool.indexer.loaders = Available data loaders
+tool.indexer.menu.file.clear_log = Clear log
+tool.indexer.menu.file.remove_idx = Remove index
+tool.indexer.menu.config.settings = Settings
+tool.indexer.option.clear = Clear the files list after indexing
+tool.indexer.option.recursive = Recursive (include subdirectories)
+tool.indexer.option.replace = Remove the old document version from the index (if exists)
+tool.indexer.status = Output Log (Llama-index):
+tool.indexer.tab.browser = Browse idx
+tool.indexer.tab.browse.tip = Browse or remove currently indexed elements (database mapping to the index is displayed here).
+tool.indexer.tab.ctx = Context
+tool.indexer.tab.ctx.auto.yes = YES
+tool.indexer.tab.ctx.auto.no = NO
+tool.indexer.tab.ctx.auto_enabled = Auto-index enabled
+tool.indexer.tab.ctx.idx.tip = Click to batch re-index the context database:
+tool.indexer.tab.ctx.last_auto = Last ctx db index batch update
+tool.indexer.tab.ctx.last_meta_id = Last ctx meta ID
+tool.indexer.tab.ctx.last_meta_ts = Last ctx meta TS
+tool.indexer.tab.ctx.tip = You can batch re-index the entire context database here or update the data from the last batch indexing.
+tool.indexer.tab.files = Files
+tool.indexer.tab.files.path.dir = Select directory:
+tool.indexer.tab.files.path.files = Select file(s):
+tool.indexer.tab.files.tip = Select file(s) or directory to embed files into the selected index. The data loader will be chosen automatically based on the file extension.
+tool.indexer.tab.web = Web
+tool.indexer.tab.web.cfg = Configuration (global settings) - Settings -> Llama-index -> Data loaders
+tool.indexer.tab.web.help = Help
+tool.indexer.tab.web.loader = Loader
+tool.indexer.tab.web.source = Data source
+tool.indexer.tab.web.tip = Select a data loader and define the loader parameters to embed external data from the web.
+tool.indexer.title = Indexer
 toolbox.agent.auto_stop.label = Auto-stop
 toolbox.agent.iterations.label = Run steps (iterations, 0 = infinity)
 toolbox.assistants.label = Assistants
 toolbox.indexes.label = Indexes
 toolbox.img_variants.label = Number of image variants to generate
 toolbox.llama_index.label = Llama-index
 toolbox.mode.label = Mode
 toolbox.model.label = Model
 toolbox.name.ai = AI Name
 toolbox.name.user = User Name
 toolbox.presets.label = Presets
 toolbox.prompt = System prompt
 toolbox.temperature.label = Temperature
+untitled = Untitled
 update.current_version = Your version
 update.download = Go to download
 update.snap = Go to Snap Store
 update.info = New version is available
 update.info.upgrade = You can upgrade now with:
 update.info.none = Your version is up to date
 update.new_version = Newest version
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/data/locale/locale.fr.ini` & `pygpt_net-2.2.0/src/pygpt_net/data/locale/locale.fr.ini`

 * *Files 22% similar despite different names*

```diff
@@ -1,37 +1,54 @@
 [LOCALE]
 about.thanks = Remerciements spéciaux à la communauté GitHub
 action.add = Ajouter
+action.clear = Effacer
+action.copy = Copier
 action.ctx_copy_id = Copier l'ID
 action.ctx.indexed = Dernière indexation le
+action.ctx.new = Nouveau contexte...
+action.ctx.new.in_group = Nouveau contexte dans : {group}...
+action.group.delete.only = Supprimer (groupe seulement)
+action.group.delete.all = Tout supprimer (avec les éléments)
+action.group.new = Nouveau groupe
+action.group.remove = Retirer du groupe
+action.move_to = Déplacer vers
 action.delete = Supprimer
 action.download = Télécharger
 action.duplicate = Dupliquer
 action.edit = Modifier
 action.idx = Indexer avec Llama-index...
 action.idx.remove = Retirer de
 action.mkdir = Créer un répertoire...
 action.open = Ouvrir
 action.open_dir = Ouvrir dans le répertoire...
 action.pin = Épingler en haut
 action.unpin = Détacher
+action.paste = Coller
+action.profile.delete = Supprimer le profil (seulement de la liste)
+action.profile.delete_all = Supprimer le profil (et tous les fichiers utilisateur)
 action.refresh = Actualiser
 action.rename = Renommer
 action.redo = Refaire
+action.restore = Restaurer
 action.save = Enregistrer
 action.save_as = Enregistrer sous...
+action.save_selection_as = Enregistrer la sélection sous...
+action.select_all = Sélectionner tout
 action.touch = Créer un fichier...
 action.truncate = Tout effacer
 action.undo = Annuler
 action.upload = Téléchargez des fichiers ici...
 action.use = Utiliser
 action.use.attachment = En pièce jointe
 action.use.copy_work_path = Copier le chemin de travail
 action.use.copy_sys_path = Copier le chemin système
 action.use.read_cmd = Demander à lire ce fichier...
+action.video.open = Ouvrir une vidéo ou un audio...
+action.video.play = Lire une vidéo ou un audio...
 alert.preset.empty_id = Le nom est requis.
 alert.preset.no_chat_completion = Au moins une des options suivantes est requise : chat, complétion, img ou vision !
 alert.snap.file_manager = Snap détecté. Veuillez ouvrir le répertoire manuellement dans votre gestionnaire de fichiers :
 alert.title = Info
 agent.infinity.confirm.content = AVERTISSEMENT : Vous êtes sur le point de lancer une boucle infinie ! Cela pourrait entraîner une consommation élevée de jetons. Êtes-vous sûr de vouloir continuer ?
 assistant.action.delete = Supprimer
 assistant.action.duplicate = Dupliquer
@@ -47,24 +64,35 @@
 assistant.model = Modèle
 assistant.name = Nom
 assistant.new = Créer
 assistant.new.id_tip = Laisser l'ID vide si vous créez un nouvel assistant.\n...ou fournissez l'ID d'OpenAI si l'assistant existe déjà sur le serveur.
 assistant.run.completed = Exécution : Terminée
 assistant.run.failed = Exécution : Échouée
 assistant.run.listening = Exécution : en cours...
-assistant.tool.code_interpreter = Outil : interpréteur de code
+assistant.store.id = ID
+assistant.store.files.suffix = Fichiers
+assistant.store.name = Nom
+assistant.store.expire_days = Jours d'expiration
+assistant.store.status = Statut
+assistant.store.hide_threads = Masquer les bases de vecteurs de threads
+assistant.store.thread_only = (uniquement le fil actuel)
+assistant.tool.code_interpreter = Interpréteur de code
 assistant.tool.function = Outil : fonction
 assistant.tool.retrieval = Outil : récupération
+assistant.tool.file_search = Chat avec des fichiers
+assistant.vector_store = Base vectorielle
+attachments.header.store = Base(s) vectorielle(s)
 attachments.btn.add = Ajouter un fichier
 attachments.btn.clear = Effacer les fichiers
 attachments.capture_clear = Effacer à la capture
 attachments.clear.confirm = Effacer la liste ?
 attachments.delete.confirm = Supprimer le fichier de la liste ?
 attachments.header.name = Nom
 attachments.header.path = Chemin
+attachments.header.size = Taille
 attachments.send_clear = Effacer la liste après envoi
 attachments.tab = Pièces jointes
 attachments_uploaded.btn.clear = Effacer les fichiers
 attachments_uploaded.btn.sync = Synchroniser
 attachments_uploaded.clear.confirm = ATTENTION : êtes-vous sûr de vouloir supprimer tous ces fichiers du serveur distant ?
 attachments_uploaded.delete.confirm = ATTENTION : êtes-vous sûr de vouloir supprimer le fichier du serveur distant ?
 attachments_uploaded.sync.tip = Astuce : cliquez sur 'Synchroniser' pour récupérer la liste des fichiers depuis OpenAI
@@ -77,75 +105,142 @@
 audio.speak.btn.tooltip = Cliquez pour commencer l'écoute par le microphone
 audio.speak.btn.stop.tooltip = Cliquez pour arrêter l'écoute par le microphone
 audio.speak.ignoring = Ignoré (pas de préfixe)
 audio.speak.now = Parlez maintenant...
 audio.speak.wait = Attendez...
 audio.speak.sending = Envoi en cours...
 audio.speak.energy = Volume du micro
+audio.transcribe.title = Transcription audio
+audio.transcribe.tip = Astuce : cliquez sur "Ouvrir..." pour commencer la transcription audio à partir d'un fichier. Le fournisseur d'entrée audio des paramètres du plugin sera utilisé.
+audio.transcribe.open = Ouvrir un fichier audio/vidéo et transcrire...
+audio.transcribe.confirm = Êtes-vous sûr de vouloir transcrire ce fichier audio/vidéo ?
+audio.transcribe.clear.confirm = Effacer la transcription actuelle ?
+audio.transcribe.auto_convert = Toujours convertir la vidéo en mp3 avant la transcription (ffmpeg nécessaire)
+audio.transcribe.result.finished = Terminé : {path}
+audio.transcribe.result.selected = Fichier sélectionné : {path}
 calendar.day.search = Afficher les conversations
 calendar.day.label = Définir la couleur de l'étiquette...
 calendar.day.label.color.default = Par défaut
 calendar.day.label.color.red = Rouge
 calendar.day.label.color.orange = Orange
 calendar.day.label.color.yellow = Jaune
 calendar.day.label.color.green = Vert
 calendar.day.label.color.blue = Bleu
 calendar.day.label.color.indigo = Indigo
 calendar.day.label.color.violet = Violet
 calendar.note.label = Note du jour
+changed.confirm = Voulez-vous enregistrer vos modifications avant de continuer ?
 chatbox.label = Chat
 chatbox.plugins = plugin(s)
 chat.prefix.attachment = Pièce jointe
 chat.prefix.file = Fichier
 chat.prefix.img = Image
 chat.prefix.url = Lien
+chat.name.user = Vous
+chat.name.bot = IA
 clipboard.copied = Copié dans le presse-papiers.
+clipboard.copied_to = Copié dans le presse-papiers:
 cmd.enabled = Exécuter des commandes
 cmd.tip = Astuce : Pour activer l'exécution des commandes provenant des plugins préfixés par "Command:", vous devez activer l'option "Exécuter des commandes".
 coming_soon = À venir...
 confirm.assistant.delete = Supprimer l'assistant ?
 confirm.assistant.import = Importer tous les assistants depuis l'API ?
-confirm.assistant.import_files = Importer tous les fichiers pour cet assistant depuis l'API ?
+confirm.assistant.files.truncate = Êtes-vous sûr de vouloir supprimer tous les fichiers de tous les Assistants?
+confirm.assistant.import_files = Importer tous les fichiers depuis l'API?
+confirm.assistant.store.import = Importer toutes les bases vectorielles depuis l'API?
+confirm.assistant.store.truncate = Supprimer toutes les bases vectorielles dans l'API?
+confirm.assistant.store.clear = Effacer les bases vectorielles (local uniquement)?
+confirm.assistant.files.clear = Effacer les fichiers (local uniquement)?
+confirm.assistant.store.refresh = Actualiser toutes les bases vectorielles?
 confirm.img.delete = Supprimer le fichier du disque ?
 confirm.preset.clear = Êtes-vous sûr de vouloir effacer le préréglage ?
 confirm.preset.delete = Êtes-vous sûr de vouloir supprimer ce préréglage ?
 confirm.preset.overwrite = Le préréglage existe. Remplacer ?
 confirm.preset.restore = Restaurer le préréglage par défaut pour ce mode?
+confirm.profile.delete = Êtes-vous sûr de vouloir supprimer le profil ? Il sera retiré de la liste uniquement.
+confirm.profile.delete_all = Êtes-vous sûr de vouloir supprimer le profil avec tous les fichiers de configuration et les fichiers de données utilisateur dans le répertoire de travail du profil ?
+confirm.profile.reset = Êtes-vous sûr de vouloir restaurer le profil aux paramètres par défaut? ATTENTION: Tous les fichiers de configuration et la base de données de contexte seront supprimés! Le répertoire des données sera conservé - pour le supprimer, vous devez le faire manuellement ou utiliser l'option de suppression.
 context.btn.clear = Effacer la mémoire
 context.items = éléments
 context.label = Contexte
 context.tokens = jetons
 ctx.delete.all.confirm = Êtes-vous sûr de vouloir supprimer TOUS les contextes d'historique ?
 ctx.delete.confirm = Êtes-vous sûr de vouloir supprimer ?
+ctx.delete.item.confirm = Supprimer l'élément de la conversation ?
+ctx.delete.item.link = supprimer
+ctx.extra.audio = Lire la réponse (audio)
+ctx.extra.copy = Copier dans le presse-papier
+ctx.extra.copy_code = copier dans le presse-papier
+ctx.extra.join = Joindre à la réponse précédente (fusionner)
+ctx.extra.reply = Régénérer la réponse (à partir de ce point)
+ctx.extra.edit = Modifier et régénérer (à partir de ce point)
+ctx.extra.delete = Supprimer cet élément
+ctx.join.item.confirm = Joindre cette réponse à la réponse précédente (fusionner les éléments) ?
 ctx.list.label = Contexte et historique
 ctx.list.search.placeholder = Rechercher...
 ctx.new = Nouveau...
 ctx.new.prefix = Nouveau
+ctx.replay.item.confirm = Régénérer la réponse à partir de ce point ?
 ctx.tokens = jetons
+db.backup = Sauvegarde automatique
+db.backup.tip = Créer une sauvegarde avant chaque suppression/raccourcissement/mise à jour
+db.limit = Limite
+db.next = Suivant
+db.page = Page
+db.prev = Précédent
+db.refresh = Actualiser
+db.sort = Trier par
+db.order = Ordre
+db.search = Rechercher
+db.search_in = dans
+db.search.placeholder = Recherche...
+db.time_convert = Convertir le temps()
+db.time_convert.tip = Convertir les colonnes horodatées au format AAAA-MM-JJ HH:MM:SS
+db.table = Table :
 dialog.about.build = Build
 dialog.about.docs = Documentation
 dialog.about.email = Email
 dialog.about.github = GitHub
 dialog.about.title = À propos
 dialog.about.version = Version
 dialog.about.website = Site officiel
 dialog.assistant = Créer / Éditer un assistant
 dialog.assistant.btn.current = Utiliser l'actuel
-dialog.assistant.btn.save = Ajouter / mettre à jour
+dialog.assistant.btn.close = Annuler
+dialog.assistant.btn.save = Sauvegarder
+dialog.assistant.btn.store = Bases vectorielles
+dialog.assistant.store = Bases vectorielles des Assistants
+dialog.assistant.store.btn.close = Annuler
+dialog.assistant.store.btn.new = Créer
+dialog.assistant.store.btn.save = Sauvegarder
+dialog.assistant.store.btn.refresh_status = Actualiser le statut
+dialog.assistant.store.delete.confirm = Êtes-vous sûr de vouloir supprimer la Base vectorielle des Assistants?
+dialog.assistant.store.menu.import = Importer tout
+dialog.assistant.store.menu.refresh_store = Actualiser tout
+dialog.assistant.store.menu.clear_store = Effacer les bases vectorielles (local uniquement)
+dialog.assistant.store.menu.clear_files = Effacer les fichiers (local uniquement)
+dialog.assistant.store.menu.truncate_store = Tronquer les bases (local + à distance)
+dialog.assistant.store.menu.truncate_files = Tronquer les fichiers (local + à distance)
 dialog.changelog.title = Historique des changements
 dialog.confirm.no = Non
 dialog.confirm.title = Confirmation
 dialog.confirm.yes = Oui
 dialog.create.dismiss = Annuler
 dialog.create.title = Nom
 dialog.create.update = Créer
+dialog.css.restore.confirm = Restaurer le CSS par défaut ? (toutes les modifications dans les fichiers CSS personnalisés seront déplacées vers des fichiers .backup)
+dialog.css.restore.confirm.success = OK. Restauré aux styles CSS par défaut.
 dialog.editor.btn.defaults = Restaurer
+dialog.editor.btn.defaults.app = Charger les valeurs par défaut
 dialog.editor.btn.save = Sauvegarder
 dialog.editor.label = Édition du fichier de configuration - redémarrage de l'application requis pour recharger les changements.
 dialog.editor.title = Modifier le fichier JSON/CSS
+dialog.find.btn.clear = Effacer
+dialog.find.btn.find_prev = Trouver précédent
+dialog.find.btn.find_next = Trouver suivant
 dialog.image.title = Image générée
 dialog.license.title = Licence
 dialog.license.label = En utilisant ce logiciel, vous acceptez les termes suivants :
 dialog.license.accept = J'accepte
 dialog.logger.btn.clear = Effacer
 dialog.logger.title = Journal
 dialog.plugin_settings = Paramètres des plugins
@@ -155,28 +250,68 @@
 dialog.plugin.settings.defaults.app.confirm = Charger les paramètres par défaut du plugin ?
 dialog.plugin.settings.defaults.app.result = Restauré aux paramètres par défaut du plugin.
 dialog.plugin.settings.defaults.user.confirm = Annuler les modifications actuelles ?
 dialog.plugin.settings.defaults.user.result = Configuration utilisateur du plugin restaurée
 dialog.preset = Éditeur de préréglage
 dialog.preset.btn.current = Utiliser l'actuel
 dialog.preset.btn.save = Sauvegarder
+dialog.preset.plugins.editor = Éditeur de préréglages des plugins
+dialog.profile.alert.delete.current = Impossible de supprimer le profil actif actuel !
+dialog.profile.alert.name.empty = Le nom ne peut pas être vide !
+dialog.profile.alert.path.same = Les chemins source et destination sont les mêmes ! Abandonné.
+dialog.profile.alert.path.empty = Le chemin du répertoire de travail ne peut pas être vide !
+dialog.profile.alert.path.not_exists = Le répertoire n'existe pas !
+dialog.profile.alert.duplicate.not_empty = Le répertoire n'est pas vide et il n'y a pas de configuration précédente à l'intérieur ! Abandon.\n\nAstuce : choisissez un répertoire de travail existant ou un répertoire vide pour créer un nouveau répertoire de travail dedans.
+dialog.profile.alert.src.empty = Profil source non trouvé ! Abandonné.
+dialog.profile.checkbox.include_db = + base de données
+dialog.profile.checkbox.include_datadir = + répertoire "data"
+dialog.profile.checkbox.switch = Basculer vers le profil créé
+dialog.profile.editor = Profils
+dialog.profile.item.editor = Profil
+dialog.profile.item.btn.dismiss = Annuler
+dialog.profile.item.btn.create = Créer
+dialog.profile.item.btn.update = Mettre à jour
+dialog.profile.item.btn.duplicate = Dupliquer ici
+dialog.profile.name.label = Nom du profil
+dialog.profile.new = Nouveau profil
+dialog.profile.status.changed = Profil modifié en
+dialog.profile.status.created = Profil créé.
+dialog.profile.status.updated = Profil mis à jour.
+dialog.profile.status.deleted = Profil supprimé
+dialog.profile.status.duplicated = Profil dupliqué.
+dialog.profile.status.removed = Profil retiré de la liste
+dialog.profile.tip = En créant de nouveaux profils, vous pouvez utiliser des paramètres séparés, des historiques de contextes différents et des données utilisateur, et basculer rapidement entre eux.
+dialog.profile.workdir.label = Répertoire de travail (dossier pour les fichiers de configuration et les données utilisateur)
 dialog.rename.dismiss = Annuler
 dialog.rename.title = Changer le nom
 dialog.rename.update = Mettre à jour le nom
 dialog.settings = Paramètres
 dialog.settings.btn.defaults.user = Annuler les modifications
 dialog.settings.btn.defaults.app = Charger les valeurs par défaut
 dialog.settings.btn.save = Sauvegarder
 dialog.settings.defaults.user.result = Configuration utilisateur restaurée
 dialog.settings.defaults.app.result = Restauré aux paramètres d'usine. Paramètres précédents enregistrés dans : config.json.backup.
 dialog.start.btn = Aller aux paramètres...
 dialog.start.link = https://platform.openai.com/account/api-keys
 dialog.start.settings.text = Si vous avez déjà une CLÉ API, vous pouvez la configurer dans la fenêtre des paramètres.\nCliquez sur le bouton ALLER AUX PARAMÈTRES, puis collez votre CLÉ API dans le champ CLÉ API.
 dialog.start.title = La CLÉ API n’est pas encore configurée
 dialog.start.title.text = Votre clé API n'est pas encore configurée...\nVous obtiendrez une clé API en vous inscrivant sur le site web d'OpenAI :
+dialog.workdir.tip = Choisissez un répertoire sur le disque et cliquez sur 'Changer/Déplacer...' pour déplacer le répertoire de travail actuel vers le répertoire sélectionné, ou pour définir le répertoire de travail actuel sur un existant. Espace disque requis (pour déplacer) : {size}
+dialog.workdir.reset.btn = Actuel
+dialog.workdir.update.btn = Changer/Déplacer...
+dialog.workdir.change.confirm = Êtes-vous sûr de vouloir changer/déplacer le répertoire de travail vers :\n{path}?
+dialog.workdir.change.empty.alert = Le répertoire n'est pas vide ! Opération annulée.
+dialog.workdir.update.confirm = RÉPERTOIRE DE TRAVAIL EXISTANT : Le répertoire "{path}" n'est pas vide et contient déjà des données d'un autre répertoire de travail. Souhaitez-vous UNIQUEMENT définir ce répertoire existant comme le répertoire de travail actuel (sans déplacer les données)?
+dialog.workdir.title = Changer de répertoire de travail
+dialog.workdir.result.no_free_space = Espace disque trop faible ! Requis : {required}, Espace libre : {free}.
+dialog.workdir.result.same_directory = Rien à déplacer.
+dialog.workdir.result.success = [OK] Le répertoire de travail est actuellement défini sur : {path}
+dialog.workdir.result.failed = Une erreur s'est produite lors du déplacement du répertoire de travail.
+dialog.workdir.result.wait = Veuillez patienter... déplacement du répertoire de travail actuel... Cela peut prendre un moment...
+dialog.workdir.result.directory_not_exists = Le répertoire de destination n'existe pas !
 dt.days_ago = il y a des jours
 dt.month = il y a un mois
 dt.today = aujourd'hui
 dt.week = il y a une semaine
 dt.weeks = il y a des semaines
 dt.yesterday = hier
 error.assistant_not_selected = Veuillez créer, importer ou sélectionner un assistant d'abord !
@@ -185,14 +320,16 @@
 files.delete.confirm = Supprimer le fichier/répertoire ?
 files.delete.recursive.confirm = Le répertoire n'est pas vide ! Êtes-vous sûr de vouloir supprimer le répertoire et tous les fichiers qu'il contient ?
 files.explorer.header.name = Nom
 files.explorer.header.size = Taille
 files.explorer.header.type = Type
 files.explorer.header.modified = Date de modification
 files.explorer.header.indexed = Indexé le
+filter.ctx.counters.all = Tous les compteurs
+filter.ctx.label.colors = Afficher par étiquettes
 filter.ctx.label = Filtre d'affichage de la liste de contexte
 filter.ctx.radio.all = Tous
 filter.ctx.radio.pinned = Épinglé
 filter.ctx.radio.labeled = Étiqueté
 filter.ctx.radio.indexed = Indexé (llama-index)
 header.assistant.tool.function.name = Nom
 header.assistant.tool.function.params = Paramètres (JSON)
@@ -213,15 +350,15 @@
 idx.status.empty = Rien d'indexé.
 idx.status.error = [ERREUR] Rien d'indexé.
 idx.status.indexing = Indexation en cours... veuillez patienter...
 idx.status.success = [SUCCÈS] Éléments indexés :
 idx.status.truncating = Suppression de l'index... veuillez patienter...
 idx.status.truncate.success = [OK] Index tronqué.
 idx.status.truncate.error = [ERREUR] Index non tronqué.
-idx.token.warn = Cela consommera des jetons supplémentaires pour l'encastrement des données (le modèle text-embedding-ada-002 sera utilisé)
+idx.token.warn = Cela consommera des jetons supplémentaires pour l'encastrement des données.
 img.status.downloading = Téléchargement en cours...
 img.status.error = Erreur de génération d'image
 img.status.finished = Image générée et téléchargée.
 img.status.generating = Veuillez patienter... génération de l'image depuis
 img.status.prompt.error = Erreur de génération de l'invite par le modèle pour l'image
 img.status.prompt.wait = Demande d'invite pour l'image... veuillez patienter...
 img.status.save.error = Erreur d'enregistrement de l'image
@@ -230,64 +367,99 @@
 img.raw = Mode brut
 img.save.title = Enregistrer l'image
 info.settings.all.saved = Tous les paramètres ont été sauvegardés
 info.settings.saved = Paramètres sauvegardés
 inline.vision = Mode de vision
 input.btn.send = Envoyer
 input.btn.stop = Arrêter
+input.btn.cancel = Annuler
+input.btn.update = Mettre à jour
 input.label = Entrée (Votre invite)
 input.radio.enter = Entrée
 input.radio.enter_shift = Maj+Entrée
 input.radio.none = Désactivé
 input.send_clear = Effacer après envoi
 input.stream = Flux
 input.tab = Entrée
+interpreter.all = Exécuter l'historique (tous)
+interpreter.auto_clear = Effacer à l'envoi
+interpreter.btn.clear = Effacer la sortie
+interpreter.btn.send = Envoyer / exécuter
+interpreter.clear.confirm = Effacer la fenêtre actuelle ?
+interpreter.edit_label.edit = Code (historique)
+interpreter.edit_label.output = Sortie
+interpreter.edit = Mode édition
+interpreter.input.placeholder = Code Python à exécuter...
 menu.audio = Audio / Voix
 menu.audio.input = Entrée : reconnaissance vocale
 menu.audio.output = Sortie : synthèse vocale
 menu.config = Config
 menu.config.edit.config = Modifier config.json...
 menu.config.edit.models = Modifier models.json...
 menu.config.edit.css = Modifier les feuilles de style CSS...
+menu.config.edit.css.restore = Restaurer le CSS par défaut...
 menu.config.open_dir = Ouvrir le répertoire de travail...
+menu.config.change_dir = Changer le répertoire de travail...
+menu.config.profile = Profil
+menu.config.profile.edit = Modifier les profils...
+menu.config.profile.new = Nouveau profil...
 menu.config.save = Sauvegarder la config
 menu.config.settings = Paramètres...
 menu.debug = Débogage
 menu.debug.assistants = Assistants...
 menu.debug.attachments = Fichiers / pièces jointes...
 menu.debug.config = Config...
 menu.debug.context = Contexte...
+menu.debug.indexes = Index...
 menu.debug.logger = Journal
 menu.debug.models = Modèles...
 menu.debug.plugins = Plugins...
 menu.debug.presets = Préréglages...
+menu.debug.app.log = Voir le fichier de log (app.log)
+menu.debug.agent = Agent...
+menu.debug.db = Visualiseur de BD
 menu.debug.ui = UI...
 menu.file = Fichier
 menu.file_clear_history = Effacer l'historique
+menu.file_clear_history_groups = Effacer l'historique (+ groupes)
+menu.file.current = Sélectionnez actuel
 menu.file.exit = Quitter
 menu.file.new = Nouveau contexte...
+menu.file.group.new = Nouveau groupe de contexte...
 menu.info = À propos
 menu.info.about = À propos
 menu.info.changelog = Historique des changements
 menu.info.docs = Documentation
+menu.info.donate = Soutenez/faire un don
 menu.info.github = Page du projet GitHub
 menu.info.license = Licence
 menu.info.pypi = PyPi
 menu.info.snap = Snap Store
 menu.info.updates = Vérifier les mises à jour...
 menu.info.website = Site officiel - pygpt.net
 menu.lang = Langue
 menu.plugins = Plugins
+menu.plugins.presets = Préréglages...
+menu.plugins.presets.edit = Modifier les préréglages...
+menu.plugins.presets.new = Nouveau préréglage...
 menu.plugins.settings = Paramètres...
 menu.theme = Thème
 menu.theme.dark = Couleur sombre...
 menu.theme.light = Couleur claire...
+menu.theme.syntax = Coloration syntaxique du code...
 menu.theme.density = Taille de la mise en page
 menu.theme.tooltips = Afficher les infobulles
 menu.theme.settings = Paramètres...
+menu.theme.blocks = Afficher les blocs
+menu.tools = Outils
+menu.tools.audio.transcribe = Transcrire des fichiers audio/vidéo
+menu.tools.interpreter = Interpréteur de code Python
+menu.tools.media.player = Lecteur multimédia
+menu.tools.image.viewer = Visionneuse d'image
+menu.tools.text.editor = Éditeur de texte
 menu.tray.notepad = Ouvrir le Bloc-notes...
 menu.tray.screenshot = Demander avec une capture d'écran...
 menu.tray.scheduled = Tâches planifiées
 menu.video = Vidéo
 menu.video.capture = Entrée : caméra
 menu.video.capture.auto = Capture automatique
 mode.agent = Agent (autonome)
@@ -308,14 +480,15 @@
 mode.vision.tooltip = Analyse d'image avec GPT-4 Vision
 notify.agent.goal.title = Objectif atteint
 notify.agent.goal.content = Agent : l'objectif a été atteint.
 notify.agent.stop.title = Terminé
 notify.agent.stop.content = Agent : arrêté
 notify.cron.title = Tâche planifiée en cours d'exécution
 notify.update.title = Nouvelle version disponible
+output.edit = Modifier
 output.tab.calendar = Calendrier
 output.tab.chat = Chat
 output.tab.files = Fichiers
 output.tab.notepad = Bloc-notes
 output.timestamp = Afficher l'heure
 output.tab.painter = Dessiner
 painter.mode.paint = Peindre
@@ -337,87 +510,115 @@
 preset.filename = ID (nom de fichier)
 preset.img = Image
 preset.langchain = Langchain
 preset.llama_index = Chat avec fichiers
 preset.name = Nom du préréglage
 preset.new = Créer
 preset.prompt = Invite du système
+preset.prompt.paste_template: Coller à partir du modèle...
 preset.temperature = Température
 preset.untitled = (sans titre)
 preset.use = Utiliser
 preset.user_name = Nom de l'utilisateur
 preset.vision = Vision
+profile.current.suffix = (actuel)
 screenshot.capture.name.prefix = Capture d'écran de
 settings.advanced.collapse = Afficher/masquer les options avancées
 settings.agent.mode = Mode interne
 settings.agent.mode.desc = Mode interne à utiliser en mode Agent (chat, complétion, langchain, llama_index, etc.)
 settings.agent.goal.notify = Afficher une notification dans la barre des tâches lorsque l'objectif est atteint.
 settings.agent.idx = Index
 settings.agent.idx.desc = Seulement si le mode interne est llama_index (Chat avec fichiers), choisissez l'index à utiliser en mode Agent
+settings.api_endpoint = Point de terminaison API
+settings.api_endpoint.desc = URL du point de terminaison de l'API OpenAI, par défaut : https://api.openai.com/v1
 settings.api_key = Clé API OpenAI
 settings.check_updates = Vérifier les mises à jour au démarrage
 settings.check_updates.bg = Vérifier les mises à jour en arrière-plan
-settings.cmd.prompt = Invite (ajouter) : instruction d'exécution de commande
 settings.context_threshold = Seuil de contexte
+settings.ctx.audio = Toujours afficher l'icône audio
 settings.ctx.auto_summary = Résumé automatique du contexte
-settings.ctx.auto_summary.prompt = Invite (utilisateur) : résumé automatique
-settings.ctx.auto_summary.system = Invite (système) : résumé automatique
 settings.ctx.auto_summary.model = Modèle utilisé pour le résumé automatique
+settings.ctx.code_interpreter = Afficher la sortie de l'interprèteur de code
+settings.ctx.code_interpreter.desc = Si activé, la sortie de l'interpréteur de code dans l'API Assistant sera affichée en temps réel (en mode flux).
+settings.ctx.convert_lists = Convertir les listes en paragraphes
+settings.ctx.copy_code = Afficher "copier dans le presse-papier" dans les blocs de code
 settings.ctx.records.limit = Limite des derniers contextes dans la liste (0 = illimité)
 settings.ctx.search_content = Rechercher également dans le contenu des conversations, pas seulement dans les titres
 settings.ctx.search.desc = Activer la recherche également dans le contenu des éléments de contexte
+settings.ctx.sources = Afficher les sources de l'index Llama
+settings.ctx.sources.desc = Si activé, les sources utilisées seront affichées dans la réponse (si disponibles, cela ne fonctionnera pas dans le chat en continu)
 settings.defaults.app.confirm = Charger les réglages par défaut de l'application ?
 settings.defaults.user.confirm = Annuler les modifications actuelles ?
 settings.dict.delete.confirm = Supprimer l'élément de la liste ?
 settings.download.dir = Répertoire pour les téléchargements de fichiers
 settings.download.dir.desc = Sous-répertoire pour les fichiers téléchargés, par exemple en mode Assistants, à l'intérieur de "data"
 settings.font_size.tip = Astuce : Vous pouvez changer la taille de la police en utilisant CTRL + Molette de la souris
-settings.font_size = Taille de police (fenêtre de chat)
+settings.font_size = Taille de police (texte brut de chat, blocs-notes)
 settings.font_size.ctx = Taille de police (liste ctx)
 settings.font_size.input = Taille de police (entrée)
 settings.font_size.toolbox = Taille de police (boîte à outils)
 settings.frequency_penalty = Pénalité de fréquence
-settings.img_prompt = DALL-E : Invite (sys) : génération d'invite
 settings.img_prompt_model = DALL-E : modèle de génération d'invite
 settings.img_resolution = DALL-E : taille de l'image
 settings.img_quality = DALL-E: qualité d'image
 settings.img_dialog_open = Ouvrir la boîte de dialogue d'image après la génération (Mode image)
 settings.layout.density = Densité de la disposition
 settings.layout.dpi.scaling = Mise à l'échelle DPI
 settings.layout.dpi.factor = Facteur DPI
 settings.layout.dialog.geometry.store = Enregistrer les positions des fenêtres de dialogue
 settings.layout.minimized = Démarrer minimisé
 settings.layout.tooltips = Afficher les astuces (descriptions d'aide)
 settings.layout.tray = Afficher l'icône dans la zone de notification
 settings.layout.tray.desc = Redémarrage requis. L'icône dans la zone de notification offre des fonctionnalités supplémentaires telles que "Demander avec une capture d'écran" ou "Ouvrir le bloc-notes".
 settings.layout.tray.minimize = Réduire dans la zone de notification lors de la sortie
 settings.layout.tray.minimize.desc = L'icône dans la barre des tâches doit être activée pour que cette option fonctionne.
-settings.llama.idx.excluded_ext = Extensions exclues
-settings.llama.idx.excluded_ext.desc = Extensions à exclure s'il n'y a pas de chargeur de données pour cette extension, séparées par une virgule
+settings.llama.idx.custom_meta = Métadonnées personnalisées à ajouter/remplacer dans les documents indexés
+settings.llama.idx.custom_meta.desc = Définissez des champs de métadonnées personnalisés clé => valeur pour les extensions de fichiers spécifiées, séparez les extensions par une virgule.\nMarqueurs autorisés : {path}, {relative_path} {filename}, {dirname}, {relative_dir} {ext}, {size}, {mtime}, {date}, {date_time}, {time}, {timestamp}
+settings.llama.idx.excluded.ext = Extensions exclues
+settings.llama.idx.excluded.ext.desc = Extensions à exclure s'il n'y a pas de chargeur de données pour cette extension, séparées par une virgule
+settings.llama.idx.excluded.force = Toujours exclure (exclure de force)
+settings.llama.idx.excluded.force.desc = Si activé, la liste d'exclusion sera appliquée même lorsque le chargeur de données pour l'extension est actif.
 settings.llama.idx.list = Indexes
 settings.llama.idx.recursive = Indexation récursive des répertoires
 settings.llama.idx.replace_old = Remplacer les anciennes versions des documents dans l'index lors de la réindexation
 settings.llama.idx.replace_old.desc = Si activé, les versions précédentes des documents seront supprimées de l'index lorsque les versions les plus récentes seront indexées
 settings.llama.idx.storage = Vector Store
 settings.llama.hub.loaders = Chargeurs de données en ligne supplémentaires à utiliser (LlamaHub) - uniquement pour la version Python, ne fonctionneront pas dans la version compilée et Snap.
-settings.llama.extra.api.warning = Avertissement : n'oubliez pas que lors de l'indexation du contenu, des appels API au modèle d'encastrement (text-embedding-ada-002) sont utilisés. Chaque indexation consomme des jetons supplémentaires. Contrôlez toujours le nombre de jetons utilisés sur la page OpenAI !
+settings.llama.extra.api.warning = Avertissement : n'oubliez pas que lors de l'indexation du contenu, des appels API au modèle d'encastrement sont utilisés. Chaque indexation consomme des jetons supplémentaires. Contrôlez toujours le nombre de jetons utilisés sur la page OpenAI !
 settings.llama.extra.db.never = (jamais)
 settings.llama.extra.btn.idx_auto.index = ID d'index pour l'indexation automatique
 settings.llama.extra.btn.idx_auto = Indexation automatique de la BD en temps réel (en arrière-plan de la conversation)
 settings.llama.extra.btn.idx_head = Cliquez ici pour indexer des fichiers ou la BD :
 settings.llama.extra.btn.idx_db_all = DB (tout)
 settings.llama.extra.btn.idx_db_update = DB (mise à jour)
 settings.llama.extra.btn.idx_files_all = Fichiers (tout)
 settings.llama.extra.legend = Légende :\nDB (tout) - va réindexer toute la base de données de conversation\nDB (mise à jour) - va réindexer la base de données seulement depuis la dernière indexation\nFichiers (tout) - va indexer tous les fichiers dans le répertoire 'data'\nIndexation auto DB - indexe automatiquement en arrière-plan toutes les nouvelles conversations (ajoute uniquement de nouvelles données)\n
 settings.lock_modes = Verrouiller les modes incompatibles
 settings.max_output_tokens = Max jetons de sortie
+settings.max_requests_limit = Limite RPM
+settings.max_requests_limit.desc = Spécifiez la limite du nombre maximal de requêtes par minute (RPM), 0 = pas de limite
 settings.max_total_tokens = Max jetons totaux
 settings.notepad.num = Nombre de blocs-notes
 settings.organization_key = Clé d'organisation OpenAI
 settings.presence_penalty = Pénalité de présence
+settings.prompt.agent.continue = Agent : continuer
+settings.prompt.agent.continue.desc = Prompt envoyé pour continuer automatiquement la conversation
+settings.prompt.agent.goal = Agent : mise à jour de l'objectif
+settings.prompt.agent.goal.desc = Prompt pour indiquer comment mettre à jour le statut de l'objectif actuel
+settings.prompt.cmd = Exécuter une commande: instruction
+settings.prompt.cmd.desc = Espaces réservés: {schema}, {extra}
+settings.prompt.cmd.extra = Exécuter une commande: pied de page supplémentaire (modes non-Assistant)
+settings.prompt.cmd.extra.assistants = Exécuter une commande: pied de page supplémentaire (mode Assistant uniquement)
+settings.prompt.cmd.extra.assistants.desc = Instructions supplémentaires pour séparer les commandes locales de l'environnement à distance qui est déjà configuré dans les Assistants.
+settings.prompt.ctx.auto_summary.system = Contexte: résumé automatique (prompt système)
+settings.prompt.ctx.auto_summary.user = Contexte: résumé automatique (message utilisateur)
+settings.prompt.ctx.auto_summary.user.desc = Espaces réservés: {input}, {output}
+settings.prompt.img = DALL-E: génération d'image
+settings.prompt.img.desc = Prompt pour générer des commandes pour DALL-E (si le mode brut est désactivé). Mode image uniquement.
+settings.render.code_syntax = Style de mise en évidence de la syntaxe du code
 settings.render.plain = Désactiver le formatage markdown dans la sortie (mode texte brut RAW)
 settings.restart.required = Un redémarrage de l'application est requis pour que les modifications de cette option soient appliquées.
 settings.section.agent = Agent (autonome)
 settings.section.files = Fichiers et pièces jointes
 settings.section.general = Général
 settings.section.layout = Mise en page
 settings.section.ctx = Contexte
@@ -442,14 +643,16 @@
 settings.vision.capture.idx = IDX de la caméra (numéro)
 settings.vision.capture.width = Largeur de capture par caméra (px)
 settings.vision.capture.quality = Qualité de capture d'image (%%)
 speech.enable = Parler
 speech.listening = Parler maintenant...
 status.assistant.deleted = Assistant supprimé
 status.assistant.saved = Assistant mis à jour
+status.audio.start = Génération de l'audio, veuillez patienter...
+status.audio.stopped = Lecture audio arrêtée.
 status.cmd.wait = Exécution de la commande... veuillez patienter...
 status.deleted = Supprimé
 status.error = Oups... une erreur s'est produite :(
 status.finished = Terminé.
 status.img.generated = L'image a été générée.
 status.img.saved = Image sauvegardée
 status.preset.cleared = Préréglage effacé
@@ -466,14 +669,15 @@
 status.uploaded = Les fichiers sont téléversés
 status.uploading = Téléversement des fichiers...
 text.context_menu.audio.read = Lire le texte sélectionné (synthèse vocale)...
 text.context_menu.copy_to = Copier vers...
 text.context_menu.copy_to.calendar = Calendrier
 text.context_menu.copy_to.notepad = Bloc-notes
 text.context_menu.copy_to.input = Entrée
+text.context_menu.find = Trouver...
 tip.tokens.ctx = Contexte (mémoire) : en utilisation / total - jetons
 tip.tokens.input = Jetons : invite de l'utilisateur + invite du système + contexte + suppléments = somme / max
 tip.output.tab.files = Ce répertoire de fichiers de travail se trouve sur votre disque. Les fichiers ici sont accessibles pour l'IA à lire. L'IA peut lire et écrire des fichiers, ainsi qu'exécuter du code à partir de ce répertoire. Vous pouvez ouvrir ce répertoire localement sur votre système et placer n'importe quels fichiers ici. Vous pouvez également indexer les fichiers avec Llama-index, afin qu'ils servent de source de connaissances supplémentaire.
 tip.output.tab.draw = Vous pouvez utiliser l'outil de dessin pour esquisser rapidement ou capturer une image de la caméra, puis envoyer de telles images à l'IA en mode Vision pour analyse. Vous pouvez capturer une image avec la caméra ici ou ouvrir une image du disque. Lors de l'utilisation d'une image, elle sera incluse dans le message envoyé en tant que pièce jointe.
 tip.output.tab.notepad = Le bloc-notes peut servir d'outil pour prendre des notes et stocker des informations. Vous pouvez conserver ici tout texte, copier du texte de la fenêtre de chat, et toutes les informations seront automatiquement sauvegardées. Vous pouvez créer plus de blocs-notes à l'aide de l'option de configuration dans les paramètres.
 tip.output.tab.calendar = En utilisant le calendrier, vous pouvez revenir à des conversations sélectionnées d'un jour spécifique. Cliquez sur un jour dans le calendrier pour limiter l'affichage de l'historique de chat à ce jour. Vous pouvez également créer des notes de jour et leur attribuer des étiquettes colorées.
 tip.input.attachments = Ici, vous pouvez ajouter des pièces jointes au message que vous envoyez si le mode le permet. Vous pouvez envoyer ici des fichiers pour analyse en mode Assistant ou des images et des images capturées de la caméra pour analyse en mode Vision.
@@ -482,26 +686,67 @@
 tip.toolbox.prompt = L'invite de système actuelle peut être modifiée en temps réel. Pour exécuter des commandes à partir de plugins, activez l'option "Exécuter des commandes."
 tip.toolbox.assistants = La liste des assistants montre les assistants créés et opérant sur le serveur distant. Tout changement sera synchronisé avec l'assistant distant.
 tip.toolbox.indexes = En indexant des conversations et des fichiers, vous pouvez étendre les connaissances disponibles avec vos propres données et historique de conversation.
 tip.toolbox.ctx = Créez autant de contextes de conversation que vous en avez besoin ; vous pouvez y revenir à tout moment.
 tip.toolbox.mode = Vous pouvez changer le mode de travail et le modèle en temps réel.
 theme.dark = Sombre
 theme.light = Lumière
+tool.indexer = Indexeur...
+tool.indexer.alert.no_files = Aucun fichier ou dossier sélectionné!
+tool.indexer.alert.no_loader = Aucun chargeur de données sélectionné!
+tool.indexer.alert.no_idx = Aucun index sélectionné!
+tool.indexer.confirm.idx = Exécuter l'indexation?
+tool.indexer.confirm.remove = Retirer l'élément de l'index?
+tool.indexer.db.copy = Copier la valeur dans le presse-papier
+tool.indexer.db.remove = Supprimer l'élément
+tool.indexer.idx = Index
+tool.indexer.idx.btn.add = Ajouter à l'index
+tool.indexer.loaders = Chargeurs de données disponibles
+tool.indexer.menu.file.clear_log = Effacer le journal
+tool.indexer.menu.file.remove_idx = Retirer l'index
+tool.indexer.menu.config.settings = Paramètres
+tool.indexer.option.clear = Effacer la liste des fichiers après l'indexation
+tool.indexer.option.recursive = Récursif (inclure les sous-dossiers)
+tool.indexer.option.replace = Supprimer l'ancienne version du document de l'index (si elle existe)
+tool.indexer.status = Journal de sortie (Llama-index) :
+tool.indexer.tab.browser = Parcourir idx
+tool.indexer.tab.browse.tip = Parcourir ou supprimer les éléments actuellement indexés (le mapping de la base de données vers l'index est affiché ici).
+tool.indexer.tab.ctx = Contexte
+tool.indexer.tab.ctx.auto.yes = OUI
+tool.indexer.tab.ctx.auto.no = NON
+tool.indexer.tab.ctx.auto_enabled = Indexation automatique activée
+tool.indexer.tab.ctx.idx.tip = Cliquez pour réindexer en masse la base de données contextuelle :
+tool.indexer.tab.ctx.last_auto = Dernière mise à jour en masse de l'index de la base de données contextuelle
+tool.indexer.tab.ctx.last_meta_id = Dernier ctx meta ID
+tool.indexer.tab.ctx.last_meta_ts = Dernier ctx meta TS
+tool.indexer.tab.ctx.tip = Vous pouvez ici réindexer en masse l'ensemble de la base de données contextuelle ou mettre à jour les données depuis la dernière indexation en masse.
+tool.indexer.tab.files = Fichiers
+tool.indexer.tab.files.path.dir = Sélectionner un dossier :
+tool.indexer.tab.files.path.files = Sélectionner le(s) fichier(s) :
+tool.indexer.tab.files.tip = Sélectionnez fichier(s) ou dossier pour intégrer les fichiers dans l'index sélectionné. Le chargeur de données sera choisi automatiquement en fonction de l'extension de fichier.
+tool.indexer.tab.web = Web
+tool.indexer.tab.web.cfg = Configuration (paramètres globaux) - Paramètres -> Llama-index -> Chargeurs de données
+tool.indexer.tab.web.help = Aide
+tool.indexer.tab.web.loader = Chargeur de données
+tool.indexer.tab.web.source = Source de données
+tool.indexer.tab.web.tip = Sélectionnez un chargeur de données et définissez les paramètres du chargeur pour intégrer des données externes provenant du web.
+tool.indexer.title = Indexeur
 toolbox.agent.auto_stop.label = Arrêt automatique
 toolbox.agent.iterations.label = Nombre de pas (itérations, 0 = infini)
 toolbox.assistants.label = Assistants
 toolbox.indexes.label = Index
 toolbox.img_variants.label = Nombre de variantes d'image à générer
 toolbox.mode.label = Mode
 toolbox.model.label = Modèle
 toolbox.name.ai = Nom de l'IA
 toolbox.name.user = Nom de l'utilisateur
 toolbox.presets.label = Préréglages
 toolbox.prompt = Invite du système
 toolbox.temperature.label = Température
+untitled = Sans titre
 update.current_version = Votre version
 update.download = Aller télécharger
 update.snap = Aller au Snap Store
 update.info = Une nouvelle version est disponible
 update.info.upgrade = Vous pouvez mettre à jour maintenant avec :
 update.info.none = Votre version est à jour
 update.new_version = Nouvelle version
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/data/locale/locale.it.ini` & `pygpt_net-2.2.0/src/pygpt_net/data/locale/locale.it.ini`

 * *Files 22% similar despite different names*

```diff
@@ -1,37 +1,54 @@
 [LOCALE]
 about.thanks = Un ringraziamento speciale alla comunità di GitHub
 action.add = Aggiungi
+action.clear = Cancella
+action.copy = Copia
 action.ctx_copy_id = Copia ID
 action.ctx.indexed = Ultima indicizzazione il
+action.ctx.new = Nuovo contesto...
+action.ctx.new.in_group = Nuovo contesto in: {group}...
+action.group.delete.only = Elimina (solo gruppo)
+action.group.delete.all = Elimina tutto (con elementi)
+action.group.new = Nuovo gruppo
+action.group.remove = Rimuovi dal gruppo
+action.move_to = Sposta in
 action.delete = Elimina
 action.download = Scarica
 action.duplicate = Duplica
 action.edit = Modifica
 action.idx = Indicizzare con Llama-index...
 action.idx.remove = Rimuovi da
 action.mkdir = Crea directory...
 action.open = Apri
 action.open_dir = Apri nella cartella...
+action.paste = Incolla
 action.pin = Fissa in alto
+action.profile.delete = Rimuovi profilo (solo dall'elenco)
+action.profile.delete_all = Elimina profilo (e tutti i file utente)
 action.unpin = Sgancia
 action.refresh = Aggiorna
 action.rename = Rinomina
 action.redo = Rifare
+action.restore = Ripristina
 action.save = Salva
 action.save_as = Salva con nome...
+action.save_selection_as = Salva selezione come...
+action.select_all = Seleziona tutto
 action.touch = Crea file...
 action.truncate = Cancellare tutto
 action.undo = Annulla
 action.upload = Carica file qui...
 action.use = Usa
 action.use.attachment = Come allegato
 action.use.copy_work_path = Copia percorso di lavoro
 action.use.copy_sys_path = Copia percorso di sistema
 action.use.read_cmd = Chiedi di leggere questo file...
+action.video.open = Apri video o audio...
+action.video.play = Riproduci video o audio...
 alert.preset.empty_id = Il nome è richiesto.
 alert.preset.no_chat_completion = È richiesta almeno una delle opzioni: chat, completamento, immagine o visione!
 alert.snap.file_manager = Rilevato Snap. Apri la cartella manualmente nel file manager:
 alert.title = Informazioni
 agent.infinity.confirm.content = AVVERTIMENTO: Stai tentando di eseguire un ciclo infinito! Questo potrebbe causare un uso elevato di token. Sei sicuro di voler continuare?
 assistant.action.delete = Elimina
 assistant.action.duplicate = Duplica
@@ -47,24 +64,35 @@
 assistant.model = Modello
 assistant.name = Nome
 assistant.new = Crea
 assistant.new.id_tip = Lascia l'ID vuoto se stai creando un nuovo Assistente.\n...oppure fornisci l'ID di OpenAI se l'Assistente esiste già sul server.
 assistant.run.completed = Esecuzione: Completata
 assistant.run.failed = Esecuzione: Fallita
 assistant.run.listening = Esecuzione: in corso...
-assistant.tool.code_interpreter = Strumento: interprete di codice
+assistant.store.id = ID
+assistant.store.files.suffix = File
+assistant.store.name = Nome
+assistant.store.expire_days = Giorni di scadenza
+assistant.store.status = Stato
+assistant.store.hide_threads = Nascondi archivi vettoriali dei thread
+assistant.store.thread_only = (solo il thread corrente)
+assistant.tool.code_interpreter = Interprete di codice
 assistant.tool.function = Strumento: funzione
 assistant.tool.retrieval = Strumento: recupero
+assistant.tool.file_search = Chat con file
+assistant.vector_store = Archivio vettoriale
+attachments.header.store = Archivio(i) vettoriale(i)
 attachments.btn.add = Aggiungi file
 attachments.btn.clear = Pulisci file
 attachments.capture_clear = Pulisci alla cattura
 attachments.clear.confirm = Pulire l'elenco?
 attachments.delete.confirm = Rimuovere il file dall'elenco?
 attachments.header.name = Nome
 attachments.header.path = Percorso
+attachments.header.size = Dimensione
 attachments.send_clear = Pulire l'elenco dopo l'invio
 attachments.tab = Allegati
 attachments_uploaded.btn.clear = Pulisci file
 attachments_uploaded.btn.sync = Sincronizza
 attachments_uploaded.clear.confirm = ATTENZIONE: sei sicuro di voler eliminare tutti questi file dal server remoto?
 attachments_uploaded.delete.confirm = ATTENZIONE: sei sicuro di voler eliminare il file dal server remoto?
 attachments_uploaded.sync.tip = Suggerimento: clicca su 'Sincronizza' per recuperare l'elenco dei file da OpenAI
@@ -77,75 +105,142 @@
 audio.speak.btn.tooltip = Clicca per iniziare l'ascolto tramite microfono
 audio.speak.btn.stop.tooltip = Clicca per terminare l'ascolto tramite microfono
 audio.speak.ignoring = Ignorato (nessun prefisso)
 audio.speak.now = Parla ora...
 audio.speak.wait = Attendere...
 audio.speak.sending = Inviando...
 audio.speak.energy = Volume microfono
+audio.transcribe.title = Trascrizione audio
+audio.transcribe.tip = Suggerimento: clicca su "Apri..." per iniziare a trascrivere l'audio dal file. Sarà utilizzato il fornitore di input audio dalle impostazioni del plugin.
+audio.transcribe.open = Apri file audio/video e trascrivi...
+audio.transcribe.confirm = Sei sicuro di voler trascrivere questo file audio/video?
+audio.transcribe.clear.confirm = Cancellare la trascrizione corrente?
+audio.transcribe.auto_convert = Converti sempre il video in mp3 prima della trascrizione (ffmpeg richiesto)
+audio.transcribe.result.finished = Finito: {path}
+audio.transcribe.result.selected = File selezionato: {path}
 calendar.day.search = Mostra conversazioni
 calendar.day.label = Imposta il colore dell'etichetta...
 calendar.day.label.color.default = Predefinito
 calendar.day.label.color.red = Rosso
 calendar.day.label.color.orange = Arancione
 calendar.day.label.color.yellow = Giallo
 calendar.day.label.color.green = Verde
 calendar.day.label.color.blue = Blu
 calendar.day.label.color.indigo = Indaco
 calendar.day.label.color.violet = Viola
 calendar.note.label = Nota del giorno
+changed.confirm = Vuoi salvare le modifiche prima di continuare?
 chatbox.label = Chat
 chatbox.plugins = plugin
 chat.prefix.attachment = Allegato
 chat.prefix.file = File
 chat.prefix.img = Immagine
 chat.prefix.url = Link
+chat.name.user = Lei
+chat.name.bot = IA
 clipboard.copied = Copiato negli appunti.
+clipboard.copied_to = Copiato negli appunti:
 cmd.enabled = Esegui comandi
 cmd.tip = Suggerimento: Per abilitare l'esecuzione dei comandi dai plugin che sono prefissati con "Command:", devi attivare l'opzione "Esegui comandi".
 coming_soon = Prossimamente...
 confirm.assistant.delete = Eliminare l'assistente?
 confirm.assistant.import = Importare tutti gli assistenti dall'API?
-confirm.assistant.import_files = Importare tutti i file per questo assistente dall'API?
+confirm.assistant.files.truncate = Sei sicuro di voler rimuovere tutti i file da tutti gli Assistenti?
+confirm.assistant.import_files = Importare tutti i file dall'API?
+confirm.assistant.store.import = Importare tutti gli archivi vettoriali dall'API?
+confirm.assistant.store.truncate = Eliminare tutti gli archivi vettoriali nell'API?
+confirm.assistant.store.clear = Pulire gli archivi vettoriali (solo locale)?
+confirm.assistant.files.clear = Pulire i file (solo locale)?
+confirm.assistant.store.refresh = Aggiornare tutti gli archivi vettoriali?
 confirm.img.delete = Eliminare il file dal disco?
 confirm.preset.clear = Sei sicuro di voler cancellare il preset?
 confirm.preset.delete = Sei sicuro di voler cancellare questo preset?
 confirm.preset.overwrite = Il preset esiste. Sovrascrivere?
 confirm.preset.restore = Ripristinare il preset di default per questa modalità?
+confirm.profile.delete = Sei sicuro di voler eliminare il profilo? Sarà rimosso solo dall'elenco.
+confirm.profile.delete_all = Sei sicuro di voler eliminare il profilo insieme a tutti i file di configurazione e i file dati utente nella directory di lavoro del profilo?
+confirm.profile.reset = Sei sicuro di voler ripristinare il profilo alle impostazioni predefinite? ATTENZIONE: Tutti i file di configurazione e il database di contesto saranno rimossi! La directory dei dati verrà mantenuta - per rimuoverla, devi cancellarla manualmente o utilizzare l'opzione di cancellazione.
 context.btn.clear = Pulisci memoria
 context.items = elementi
 context.label = Contesto
 context.tokens = token
 ctx.delete.all.confirm = Sei sicuro di voler eliminare TUTTI i contesti della cronologia?
 ctx.delete.confirm = Sei sicuro di voler eliminare?
+ctx.delete.item.confirm = Eliminare l'elemento della conversazione?
+ctx.delete.item.link = elimina
+ctx.extra.audio = Leggi la risposta (audio)
+ctx.extra.copy = Copia negli appunti
+ctx.extra.copy_code = copia negli appunti
+ctx.extra.reply = Rigenera risposta (da questo punto)
+ctx.extra.edit = Modifica e rigenera (da questo punto)
+ctx.extra.delete = Elimina questo elemento
+ctx.extra.join = Aggiungi alla risposta precedente (unisci)
+ctx.join.item.confirm = Aggiungere questa risposta alla risposta precedente (unire gli elementi)?
 ctx.list.label = Contesto e cronologia
 ctx.list.search.placeholder = Cerca...
 ctx.new = Nuovo...
 ctx.new.prefix = Nuovo
+ctx.replay.item.confirm = Rigenerare la risposta da questo punto?
 ctx.tokens = token
+db.backup = Backup automatico
+db.backup.tip = Crea un backup prima di ogni eliminazione/troncamento/aggiornamento
+db.limit = Limite
+db.next = Successivo
+db.page = Pagina
+db.prev = Precedente
+db.refresh = Aggiorna
+db.sort = Ordina per
+db.order = Ordine
+db.search = Cerca
+db.search_in = in
+db.search.placeholder = Cerca...
+db.time_convert = Converti tempo()
+db.time_convert.tip = Converti le colonne timestamp nel formato AAAA-MM-GG HH:MM:SS
+db.table = Tabella:
 dialog.about.build = Costruisci
 dialog.about.docs = Documentazione
 dialog.about.email = Email
 dialog.about.github = GitHub
 dialog.about.title = Informazioni
 dialog.about.version = Versione
 dialog.about.website = Sito ufficiale
 dialog.assistant = Crea / Modifica assistente
 dialog.assistant.btn.current = Usa attuale
-dialog.assistant.btn.save = Aggiungi / aggiorna
+dialog.assistant.btn.close = Annulla
+dialog.assistant.btn.save = Salva
+dialog.assistant.btn.store = Archivi vettoriali
+dialog.assistant.store = Archivi vettoriali degli Assistenti
+dialog.assistant.store.btn.close = Annulla
+dialog.assistant.store.btn.new = Crea
+dialog.assistant.store.btn.save = Salva
+dialog.assistant.store.btn.refresh_status = Aggiorna stato
+dialog.assistant.store.delete.confirm = Sei sicuro di voler eliminare l'Archivio vettoriale degli Assistenti?
+dialog.assistant.store.menu.import = Importa tutto
+dialog.assistant.store.menu.refresh_store = Aggiorna tutto
+dialog.assistant.store.menu.clear_store = Pulisci archivi vettoriali (solo locale)
+dialog.assistant.store.menu.clear_files = Pulisci file (solo locale)
+dialog.assistant.store.menu.truncate_store = Svuota archivi (locale + remoto)
+dialog.assistant.store.menu.truncate_files = Svuota file (locale + remoto)
 dialog.changelog.title = Cronologia modifiche
 dialog.confirm.no = No
 dialog.confirm.title = Conferma
 dialog.confirm.yes = Sì
 dialog.create.dismiss = Annulla
 dialog.create.title = Nome
 dialog.create.update = Crea
+dialog.css.restore.confirm = Ripristinare il CSS predefinito? (tutte le modifiche nei file CSS personalizzati saranno spostate nei file .backup)
+dialog.css.restore.confirm.success = OK. Ripristinato agli stili CSS predefiniti.
 dialog.editor.btn.defaults = Ripristina
+dialog.editor.btn.defaults.app = Carica i valori predefiniti
 dialog.editor.btn.save = Salva
 dialog.editor.label = Modifica file di configurazione - è richiesto il riavvio dell'applicazione per ricaricare le modifiche.
 dialog.editor.title = Modifica file JSON/CSS
+dialog.find.btn.clear = Pulisci
+dialog.find.btn.find_prev = Trova Precedente
+dialog.find.btn.find_next = Trova Successivo
 dialog.image.title = Immagine generata
 dialog.license.title = Licenza
 dialog.license.label = Utilizzando questo software si accettano i seguenti termini:
 dialog.license.accept = Accetto
 dialog.logger.btn.clear = Pulisci
 dialog.logger.title = Logger
 dialog.plugin_settings = Impostazioni plugin
@@ -155,28 +250,68 @@
 dialog.plugin.settings.defaults.app.confirm = Caricare le impostazioni di fabbrica del plugin?
 dialog.plugin.settings.defaults.app.result = Ripristinate le impostazioni di fabbrica del plugin.
 dialog.plugin.settings.defaults.user.confirm = Annullare le modifiche correnti?
 dialog.plugin.settings.defaults.user.result = Ripristinata la configurazione utente del plugin
 dialog.preset = Editor di preset
 dialog.preset.btn.current = Usa attuale
 dialog.preset.btn.save = Salva
+dialog.preset.plugins.editor = Editor di preset dei plugin
+dialog.profile.alert.delete.current = Impossibile eliminare il profilo attivo corrente!
+dialog.profile.alert.name.empty = Il nome non può essere vuoto!
+dialog.profile.alert.path.same = I percorsi di origine e destinazione sono uguali! Annullato.
+dialog.profile.alert.path.empty = Il percorso della directory di lavoro non può essere vuoto!
+dialog.profile.alert.path.not_exists = La directory non esiste!
+dialog.profile.alert.duplicate.not_empty = La directory non è vuota e non contiene una precedente configurazione! Annullato.\n\nSuggerimento: scegli una directory di lavoro esistente o una directory vuota per crearne una nuova al suo interno.
+dialog.profile.alert.src.empty = Profilo sorgente non trovato! Annullato.
+dialog.profile.checkbox.include_db = + database
+dialog.profile.checkbox.include_datadir = + cartella "data"
+dialog.profile.checkbox.switch = Passa al profilo creato
+dialog.profile.editor = Profili
+dialog.profile.item.editor = Profilo
+dialog.profile.item.btn.dismiss = Annulla
+dialog.profile.item.btn.create = Crea
+dialog.profile.item.btn.update = Aggiorna
+dialog.profile.item.btn.duplicate = Duplica qui
+dialog.profile.name.label = Nome del profilo
+dialog.profile.new = Nuovo profilo
+dialog.profile.status.changed = Profilo cambiato in
+dialog.profile.status.created = Profilo creato.
+dialog.profile.status.updated = Profilo aggiornato.
+dialog.profile.status.deleted = Profilo eliminato
+dialog.profile.status.duplicated = Profilo duplicato.
+dialog.profile.status.removed = Profilo rimosso dall'elenco
+dialog.profile.tip = Creando nuovi profili, puoi utilizzare impostazioni separate, diverse cronologie di contesto e dati utente, e passare rapidamente da uno all'altro.
+dialog.profile.workdir.label = Workdir (directory per file di configurazione e dati utente)
 dialog.rename.dismiss = Annulla
 dialog.rename.title = Cambia nome
 dialog.rename.update = Aggiorna nome
 dialog.settings = Impostazioni
 dialog.settings.btn.defaults.user = Annulla modifiche
 dialog.settings.btn.defaults.app = Carica i valori predefiniti
 dialog.settings.btn.save = Salva
 dialog.settings.defaults.user.result = Configurazione utente ripristinata
 dialog.settings.defaults.app.result = Ripristinate le impostazioni di fabbrica. Impostazioni precedenti salvate in: config.json.backup.
 dialog.start.btn = Vai alle impostazioni...
 dialog.start.link = https://platform.openai.com/account/api-keys
 dialog.start.settings.text = Se hai già una API KEY puoi configurarla nella finestra delle impostazioni.\nClicca sul pulsante VAI ALLE IMPOSTAZIONI e poi incolla la tua API KEY nel campo API KEY.
 dialog.start.title = API KEY non ancora configurata
 dialog.start.title.text = La tua API key non è ancora configurata...\nOtterrai una API key registrando un account sul sito web di OpenAI:
+dialog.workdir.tip = Scegliere una directory dal disco e fare clic su 'Cambia/Sposta...' per spostare la directory di lavoro corrente in quella selezionata, o per impostare la directory di lavoro corrente su una esistente. Spazio su disco richiesto (per lo spostamento): {size}
+dialog.workdir.reset.btn = Corrente
+dialog.workdir.update.btn = Cambia/Sposta...
+dialog.workdir.change.confirm = Sei sicuro di voler cambiare/spostare la workdir a:\n{path}?
+dialog.workdir.change.empty.alert = La cartella non è vuota! Annullamento dell'operazione.
+dialog.workdir.update.confirm = WORKDIR ESISTENTE: La directory "{path}" non è vuota e contiene già dati da un'altra workdir. Vorresti SOLO impostare questa directory esistente come la workdir corrente (senza spostare i dati)?
+dialog.workdir.title = Cambia directory di lavoro
+dialog.workdir.result.no_free_space = Spazio insufficiente su disco! Richiesto: {required}, Spazio libero: {free}.
+dialog.workdir.result.same_directory = Niente da spostare.
+dialog.workdir.result.success = [OK] La directory di lavoro è attualmente impostata su: {path}
+dialog.workdir.result.failed = Si è verificato un errore durante lo spostamento della directory di lavoro.
+dialog.workdir.result.wait = Attendere prego... spostamento della directory di lavoro corrente... Questo potrebbe richiedere del tempo...
+dialog.workdir.result.directory_not_exists = La directory di destinazione non esiste!
 dt.days_ago = giorni fa
 dt.month = mese fa
 dt.today = oggi
 dt.week = settimana fa
 dt.weeks = settimane fa
 dt.yesterday = ieri
 error.assistant_not_selected = Per favore, crea, importa o seleziona un assistente prima!
@@ -185,15 +320,17 @@
 files.delete.confirm = Eliminare il file/la cartella?
 files.delete.recursive.confirm = La directory non è vuota! Sei sicuro di voler eliminare la directory e tutti i file in essa?
 files.explorer.header.name = Nome
 files.explorer.header.size = Dimensione
 files.explorer.header.type = Tipo
 files.explorer.header.modified = Data di modifica
 files.explorer.header.indexed = Indicizzato il
+filter.ctx.counters.all = Tutti i contatori
 filter.ctx.label = Filtro di visualizzazione elenco contesti
+filter.ctx.label.colors = Visualizza per etichette
 filter.ctx.radio.all = Tutti
 filter.ctx.radio.pinned = Appuntati
 filter.ctx.radio.labeled = Etichettati
 filter.ctx.radio.indexed = Indicizzato (llama-index)
 header.assistant.tool.function.name = Nome
 header.assistant.tool.function.params = Parametri (JSON)
 header.assistant.tool.function.desc = Descrizione
@@ -213,15 +350,15 @@
 idx.status.empty = Niente indicizzato.
 idx.status.error = [ERRORE] Niente indicizzato.
 idx.status.indexing = Indicizzazione in corso... si prega di attendere...
 idx.status.success = [SUCCESSO] Elementi indicizzati:
 idx.status.truncating = Rimozione dell'indice... si prega di attendere...
 idx.status.truncate.success = [OK] Indice troncato.
 idx.status.truncate.error = [ERRORE] Indice non troncato.
-idx.token.warn = Questo consumerà token aggiuntivi per incorporare i dati (verrà utilizzato il modello text-embedding-ada-002)
+idx.token.warn = Questo consumerà token aggiuntivi per incorporare i dati.
 img.status.downloading = Scaricamento in corso... 
 img.status.error = Errore nella generazione dell'immagine
 img.status.finished = Immagine generata e scaricata.
 img.status.generating = Attendere... generazione dell'immagine da
 img.status.prompt.error = Errore nella generazione del prompt dell'immagine dal modello
 img.status.prompt.wait = Richiesta del prompt dell'immagine... attendere prego...
 img.status.save.error = Errore nel salvataggio dell'immagine
@@ -230,64 +367,99 @@
 img.raw = Modalità grezza
 img.save.title = Salva immagine
 info.settings.all.saved = Tutte le impostazioni sono state salvate
 info.settings.saved = Impostazioni salvate
 inline.vision = Modalità visione
 input.btn.send = Invia
 input.btn.stop = Arresta
+input.btn.cancel = Annulla
+input.btn.update = Aggiorna
 input.label = Input (Il tuo prompt)
 input.radio.enter = Invio
 input.radio.enter_shift = Shift+Invio
 input.radio.none = Disattivato
 input.send_clear = Pulisci dopo l'invio
 input.stream = Flusso
 input.tab = Input
+interpreter.all = Esegui cronologia (tutto)
+interpreter.auto_clear = Cancella all'invio
+interpreter.btn.clear = Cancella output
+interpreter.btn.send = Invia / esegui
+interpreter.clear.confirm = Cancellare la finestra corrente?
+interpreter.edit_label.edit = Codice (cronologia)
+interpreter.edit_label.output = Risultato
+interpreter.edit = Modalità modifica
+interpreter.input.placeholder = Codice Python da eseguire...
 menu.audio = Audio / Voce
 menu.audio.input = Input: riconoscimento vocale
 menu.audio.output = Output: sintesi vocale
 menu.config = Config
 menu.config.edit.config = Modifica config.json...
 menu.config.edit.models = Modifica models.json...
 menu.config.edit.css = Modifica fogli di stile CSS...
-menu.config.open_dir = Apri cartella di lavoro...
+menu.config.edit.css.restore = Ripristina CSS predefinito...
+menu.config.open_dir = Apri directory di lavoro...
+menu.config.change_dir = Cambia directory di lavoro...
+menu.config.profile = Profilo
+menu.config.profile.edit = Modifica profili...
+menu.config.profile.new = Nuovo profilo...
 menu.config.save = Salva configurazione
 menu.config.settings = Impostazioni...
 menu.debug = Debug
 menu.debug.assistants = Assistenti...
 menu.debug.attachments = File / allegati...
 menu.debug.config = Configurazione...
 menu.debug.context = Contesto...
+menu.debug.indexes = Indici...
 menu.debug.logger = Logger
 menu.debug.models = Modelli...
 menu.debug.plugins = Plugin...
 menu.debug.presets = Preset...
+menu.debug.app.log = Visualizza il file di log (app.log)
+menu.debug.agent = Agente...
+menu.debug.db = Visualizzatore del DB
 menu.debug.ui = UI...
 menu.file = File
 menu.file_clear_history = Cancella cronologia
+menu.file_clear_history_groups = Cancella cronologia (+ gruppi)
+menu.file.current = Seleziona corrente
 menu.file.exit = Esci
 menu.file.new = Nuovo contesto...
+menu.file.group.new = Nuovo gruppo di contesto...
 menu.info = Informazioni
 menu.info.about = Circa
 menu.info.changelog = Cronologia delle versioni
 menu.info.docs = Documentazione
+menu.info.donate = Supporta/fai una donazione
 menu.info.github = Pagina del progetto su GitHub
 menu.info.license = Licenza
 menu.info.pypi = PyPi
 menu.info.snap = Snap Store
 menu.info.updates = Verifica aggiornamenti...
 menu.info.website = Sito ufficiale - pygpt.net
 menu.lang = Lingua
 menu.plugins = Plugin
+menu.plugins.presets = Preset...
+menu.plugins.presets.edit = Modifica preset...
+menu.plugins.presets.new = Nuovo preset...
 menu.plugins.settings = Impostazioni...
 menu.theme = Tema
 menu.theme.dark = Colore scuro...
 menu.theme.light = Colore chiaro...
+menu.theme.syntax = Evidenziazione della sintassi del codice...
 menu.theme.density = Dimensione del layout
 menu.theme.tooltips = Mostra suggerimenti
 menu.theme.settings = Impostazioni...
+menu.theme.blocks = Visualizza blocchi
+menu.tools = Strumenti
+menu.tools.audio.transcribe = Trascrivi file audio/video
+menu.tools.interpreter = Interprete del codice Python
+menu.tools.media.player = Riproduttore multimediale
+menu.tools.image.viewer = Visualizzatore di immagini
+menu.tools.text.editor = Editor di testo
 menu.tray.notepad = Apri Blocco note...
 menu.tray.screenshot = Chiedi con uno screenshot...
 menu.tray.scheduled = Lavori programmati
 menu.video = Video
 menu.video.capture = Ingresso: fotocamera
 menu.video.capture.auto = Cattura automatica
 mode.agent = Agente (autonomo)
@@ -308,14 +480,15 @@
 mode.vision.tooltip = Analisi immagine con GPT-4 Vision
 notify.agent.goal.title = Obiettivo raggiunto
 notify.agent.goal.content = Agente: l'obiettivo è stato raggiunto.
 notify.agent.stop.title = Finito
 notify.agent.stop.content = Agente: fermato
 notify.cron.title = Esecuzione compito pianificato
 notify.update.title = Nuova versione disponibile
+output.edit = Modifica
 output.raw = Plain text
 output.tab.calendar = Calendario
 output.tab.chat = Chat
 output.tab.files = File
 output.tab.notepad = Blocco note
 output.timestamp = Mostra tempo
 output.tab.painter = Disegnare
@@ -338,87 +511,115 @@
 preset.filename = ID (nome del file)
 preset.img = Immagine
 preset.langchain = Langchain
 preset.llama_index = Chat con file
 preset.name = Nome del preset
 preset.new = Crea
 preset.prompt = Prompt del sistema
+preset.prompt.paste_template: Incolla dal modello...
 preset.temperature = Temperatura
 preset.untitled = (senza titolo)
 preset.use = Usa
 preset.user_name = Nome dell'utente
 preset.vision = Visione
+profile.current.suffix = (corrente)
 screenshot.capture.name.prefix = Screenshot da
 settings.advanced.collapse = Mostra/nascondi opzioni avanzate
 settings.agent.mode = Modalità interna
 settings.agent.mode.desc = Modalità interna da utilizzare in modalità Agente (chat, completamento, langchain, llama_index, ecc.)
 settings.agent.goal.notify = Visualizza una notifica nella barra delle applicazioni quando l'obiettivo è raggiunto.
 settings.agent.idx = Indice
 settings.agent.idx.desc = Solo se la modalità interna è llama_index (Chat con file), scegli l'indice da utilizzare in modalità Agente
+settings.api_endpoint = Endpoint API
+settings.api_endpoint.desc = URL dell'endpoint API di OpenAI, predefinito: https://api.openai.com/v1
 settings.api_key = OpenAI API KEY
 settings.check_updates = Controlla aggiornamenti all'avvio
 settings.check_updates.bg = Controlla gli aggiornamenti in background
-settings.cmd.prompt = Prompt (aggiungere): istruzione esecuzione comando
 settings.context_threshold = Soglia del contesto
+settings.ctx.audio = Mostra sempre l'icona audio
 settings.ctx.auto_summary = Riassunto automatico del contesto
-settings.ctx.auto_summary.prompt = Prompt (utente): riassunto automatico
-settings.ctx.auto_summary.system = Prompt (sistema): riassunto automatico
 settings.ctx.auto_summary.model = Modello utilizzato per riassunto automatico
+settings.ctx.code_interpreter = Mostra l'output dell'interprete del codice
+settings.ctx.code_interpreter.desc = Se abilitato, l'output dell'interprete del codice nell'API dell'Assistente verrà visualizzato in tempo reale (in modalità streaming).
+settings.ctx.convert_lists = Converti liste in paragrafi
+settings.ctx.copy_code = Mostra "copia negli appunti" nei blocchi di codice
 settings.ctx.records.limit = Limite di contesti passati nella lista (0 = illimitato)
 settings.ctx.search_content = Cerca anche nel contenuto delle conversazioni, non solo nei titoli
 settings.ctx.search.desc = Abilita la ricerca anche nel contenuto degli elementi di contesto
+settings.ctx.sources = Mostra le fonti dell'indice Llama
+settings.ctx.sources.desc = Se abilitato, le fonti utilizzate saranno mostrate nella risposta (se disponibili, non funzionerà nella chat in streaming)
 settings.defaults.app.confirm = Caricare le impostazioni predefinite dell'applicazione?
 settings.defaults.user.confirm = Annullare le modifiche correnti?
 settings.dict.delete.confirm = Rimuovere l'elemento dall'elenco?
 settings.download.dir = Directory per il download dei file
 settings.download.dir.desc = Sottodirectory per i file scaricati, ad esempio in modalità Assistenti, all'interno di "data"
 settings.font_size.tip = Suggerimento: Puoi cambiare la dimensione del carattere usando CTRL + Rotellina del mouse
-settings.font_size = Dimensione del carattere (finestra chat)
+settings.font_size = Dimensione del carattere (testo semplice della chat, blocchi appunti)
 settings.font_size.ctx = Dimensione del carattere (lista dei contesti)
 settings.font_size.input = Dimensione del carattere (input)
 settings.font_size.toolbox = Dimensione del carattere (toolbox)
 settings.frequency_penalty = Penale di frequenza
-settings.img_prompt = DALL-E: Prompt (sistema): generazione del prompt
 settings.img_prompt_model = DALL-E: modello di generazione del prompt
 settings.img_resolution = DALL-E: dimensione dell'immagine
 settings.img_quality = DALL-E: qualità dell'immagine
 settings.img_dialog_open = Apri la finestra di dialogo dell'immagine dopo la generazione (Modalità immagine)
 settings.layout.density = Densità del layout
 settings.layout.dpi.scaling = Scalatura DPI
 settings.layout.dpi.factor = Fattore DPI
 settings.layout.dialog.geometry.store = Salva le posizioni delle finestre di dialogo
 settings.layout.minimized = Avvia minimizzato
 settings.layout.tooltips = Visualizza sugger
 settings.layout.tray = Mostra icona nella barra delle applicazioni
 settings.layout.tray.desc = Riavvio richiesto. L'icona nella barra delle applicazioni fornisce funzionalità aggiuntive come "Chiedi con screenshot" o "Apri blocco note".
 settings.layout.tray.minimize = Riduci a icona nella barra delle applicazioni all'uscita
 settings.layout.tray.minimize.desc = È richiesta l'icona nella tray attiva affinché questa opzione funzioni.
-settings.llama.idx.excluded_ext = Estensioni escluse
-settings.llama.idx.excluded_ext.desc = Estensioni da escludere se non c'è un caricatore di dati per questa estensione, separate da una virgola
+settings.llama.idx.custom_meta = Metadati personalizzati da aggiungere/sostituire ai documenti indicizzati
+settings.llama.idx.custom_meta.desc = Definire i campi dei metadati personalizzati chiave => valore per le estensioni di file specificate, separare le estensioni con una virgola.\nSegnaposto consentiti: {path}, {relative_path} {filename}, {dirname}, {relative_dir} {ext}, {size}, {mtime}, {date}, {date_time}, {time}, {timestamp}
+settings.llama.idx.excluded.ext = Estensioni escluse
+settings.llama.idx.excluded.ext.desc = Estensioni da escludere se non c'è un caricatore di dati per questa estensione, separate da una virgola
+settings.llama.idx.excluded.force = Escludi forzatamente i file
+settings.llama.idx.excluded.force.desc = Se abilitato, l'elenco di esclusione sarà applicato anche quando il caricatore di dati per l'estensione è attivo
 settings.llama.idx.list = Indici
 settings.llama.idx.recursive = Indicizzazione ricorsiva delle directory
 settings.llama.idx.replace_old = Sostituire le vecchie versioni dei documenti nell'indice durante la reindicizzazione
 settings.llama.idx.replace_old.desc = Se abilitato, le versioni precedenti dei documenti verranno eliminate dall'indice quando le versioni più recenti vengono indicizzate
 settings.llama.idx.storage = Vector Store
 settings.llama.hub.loaders = Caricatori di dati online aggiuntivi da utilizzare (LlamaHub) - solo per la versione Python, non funzioneranno nella versione compilata e Snap.
-settings.llama.extra.api.warning = Avviso: ricorda che durante l'indicizzazione dei contenuti vengono utilizzate chiamate API al modello di embedding (text-embedding-ada-002). Ogni indicizzazione consuma token aggiuntivi. Controlla sempre il numero di token utilizzati sulla pagina OpenAI!
+settings.llama.extra.api.warning = Avviso: ricorda che durante l'indicizzazione dei contenuti vengono utilizzate chiamate API al modello di embedding. Ogni indicizzazione consuma token aggiuntivi. Controlla sempre il numero di token utilizzati sulla pagina OpenAI!
 settings.llama.extra.db.never = (mai)
 settings.llama.extra.btn.idx_auto.index = ID dell'indice per l'indicizzazione automatica
 settings.llama.extra.btn.idx_auto = Auto-indicizzazione del DB in tempo reale (in background della conversazione)
 settings.llama.extra.btn.idx_head = Clicca qui per indicizzare file o DB:
 settings.llama.extra.btn.idx_db_all = Indicizza DB (tutto)
 settings.llama.extra.btn.idx_db_update = Indicizza DB (aggiornamento)
 settings.llama.extra.btn.idx_files_all = Indicizza file (tutti)
 settings.llama.extra.legend = Legenda:\nDB (tutto) - reindizzerà l'intera banca dati delle conversazioni\nDB (aggiornamento) - reindizzerà la banca dati solo dall'ultima indicizzazione\nFile (tutti) - indicherà tutti i file nella directory 'data'\nAuto-indicizzazione DB - indicizza automaticamente in background tutte le nuove conversazioni (aggiunge soltanto nuovi dati)\n
 settings.lock_modes = Blocca modalità incompatibili
 settings.max_output_tokens = Massimo token in output
+settings.max_requests_limit = Limite RPM
+settings.max_requests_limit.desc = Specificare il limite massimo di richieste al minuto (RPM), 0 = nessun limite
 settings.max_total_tokens = Massimo token totali
 settings.notepad.num = Numero di blocchi note
 settings.organization_key = OpenAI ORGANIZATION KEY
 settings.presence_penalty = Penale di presenza
+settings.prompt.agent.continue = Agente: continua
+settings.prompt.agent.continue.desc = Prompt inviato per continuare automaticamente la conversazione
+settings.prompt.agent.goal = Agente: aggiornamento dell'obiettivo
+settings.prompt.agent.goal.desc = Prompt per istruire come aggiornare lo stato dell'obiettivo corrente
+settings.prompt.cmd = Esegui comando: istruzione
+settings.prompt.cmd.desc = Placeholder: {schema}, {extra}
+settings.prompt.cmd.extra = Esegui comando: piè di pagina extra (modalità non assistente)
+settings.prompt.cmd.extra.assistants = Esegui comando: piè di pagina extra (solo modalità assistente)
+settings.prompt.cmd.extra.assistants.desc = Istruzioni aggiuntive per separare i comandi locali dall'ambiente remoto già configurato negli Assistenti.
+settings.prompt.ctx.auto_summary.system = Contesto: auto-riassunto (prompt del sistema)
+settings.prompt.ctx.auto_summary.user = Contesto: auto-riassunto (messaggio dell'utente)
+settings.prompt.ctx.auto_summary.user.desc = Placeholder: {input}, {output}
+settings.prompt.img = DALL-E: generazione immagine
+settings.prompt.img.desc = Prompt per generare comandi per DALL-E (se la modalità grezza è disabilitata). Solo modalità immagine.
+settings.render.code_syntax = Stile di evidenziazione della sintassi del codice
 settings.restart.required = È necessario riavviare l'applicazione affinché le modifiche a questa opzione siano applicate.
 settings.section.agent = Agente (autonomo)
 settings.section.files = File e allegati
 settings.section.general = Generale
 settings.section.layout = Layout
 settings.section.ctx = Contesto
 settings.section.model = Modelli
@@ -442,14 +643,16 @@
 settings.vision.capture.idx = IDX fotocamera (numero)
 settings.vision.capture.width = Larghezza cattura fotocamera (px)
 settings.vision.capture.quality = Qualità cattura immagine (%%)
 speech.enable = Parla
 speech.listening = Parla ora...
 status.assistant.deleted = Assistente eliminato
 status.assistant.saved = Assistente aggiornato
+status.audio.start = Generazione audio, attendere prego...
+status.audio.stopped = Riproduzione audio interrotta.
 status.cmd.wait = Esecuzione del comando... attendere prego...
 status.deleted = Eliminato
 status.error = Ops... si è verificato un errore :(
 status.finished = Finito.
 status.img.generated = L'immagine è stata generata.
 status.img.saved = Immagine salvata.
 status.preset.cleared = Preset cancellato.
@@ -466,14 +669,15 @@
 status.uploaded = I file sono stati caricati.
 status.uploading = Caricamento dei file...
 text.context_menu.audio.read = Leggi il testo selezionato (sintesi vocale)...
 text.context_menu.copy_to = Copia a...
 text.context_menu.copy_to.calendar = Calendario
 text.context_menu.copy_to.notepad = Blocco note
 text.context_menu.copy_to.input = Input
+text.context_menu.find = Trova...
 tip.tokens.ctx = Contesto (memoria): in uso / totale - token
 tip.tokens.input = Token: prompt di input + prompt di sistema + contesto + extra = somma / massimo
 tip.output.tab.files = Questa directory di file di lavoro si trova sul tuo disco. I file qui sono accessibili per l'IA per la lettura. L'IA può scrivere e leggere file, così come eseguire codice da questa directory. Puoi aprire questa directory localmente sul tuo sistema e posizionare qui qualsiasi file. Puoi anche indicizzare i file con Llama-index, in modo che servano come fonte di conoscenza aggiuntiva.
 tip.output.tab.draw = Puoi utilizzare lo strumento di disegno per fare rapidi schizzi o catturare un'immagine dalla fotocamera, e poi inviare tali immagini all'IA in modalità Vision per l'analisi. Puoi catturare un'immagine con la fotocamera qui o aprire un'immagine dal disco. Quando utilizzi un'immagine, questa sarà inclusa nel messaggio inviato come allegato.
 tip.output.tab.notepad = Il blocco note può servire come strumento per prendere appunti e memorizzare informazioni. Puoi conservare qui qualsiasi testo, copiare il testo dalla finestra di chat, e tutte le informazioni verranno salvate automaticamente. Puoi creare più blocchi note utilizzando l'opzione di configurazione nelle impostazioni.
 tip.output.tab.calendar = Utilizzando il calendario, puoi tornare a conversazioni selezionate di un giorno specifico. Clicca su un giorno nel calendario per limitare la visualizzazione della cronologia della chat a quel giorno. Puoi anche creare note giornaliere e assegnarle etichette colorate.
 tip.input.attachments = Qui puoi aggiungere allegati al messaggio che stai inviando se la modalità lo supporta. Qui puoi inviare файлы per l'analisi in modalità Assistant o immagini e immagini catturate dalla fotocamera per l'analisi in modalità Vision.
@@ -482,26 +686,67 @@
 tip.toolbox.prompt = Il prompt del sistema corrente può essere modificato in tempo reale. Per eseguire comandi dai plugin, abilitare l'opzione "Esegui comandi."
 tip.toolbox.assistants = L'elenco degli assistenti mostra gli assistenti creati e operanti sul сервер remoto. Tutte le modifiche saranno sincronizzate con l'assistente remoto.
 tip.toolbox.indexes = Indicizzando conversazioni e файлы, puoi espandere le conoscenze disponibili con i tuoi propri dati e storico delle conversazioni.
 tip.toolbox.ctx = Crea quanti contesti di conversazione hai bisogno; puoi ritornarci in qualsiasi momento.
 tip.toolbox.mode = Puoi cambiare la modalità di lavoro e il modello in tempo reale.
 theme.dark = Scuro
 theme.light = Luminoso
+tool.indexer = Indicizzatore...
+tool.indexer.alert.no_files = Nessun file o directory selezionati!
+tool.indexer.alert.no_loader = Nessun caricatore selezionato!
+tool.indexer.alert.no_idx = Nessun indice selezionato!
+tool.indexer.confirm.idx = Eseguire l'indicizzazione?
+tool.indexer.confirm.remove = Rimuovere l'elemento dall'indice?
+tool.indexer.db.copy = Copia valore negli appunti
+tool.indexer.db.remove = Elimina elemento
+tool.indexer.idx = Indice
+tool.indexer.idx.btn.add = Aggiungi all'indice
+tool.indexer.loaders = Caricatori di dati disponibili
+tool.indexer.menu.file.clear_log = Pulisci registro
+tool.indexer.menu.file.remove_idx = Rimuovi indice
+tool.indexer.menu.config.settings = Impostazioni
+tool.indexer.option.clear = Pulisci la lista dei file dopo l'indicizzazione
+tool.indexer.option.recursive = Ricorsivo (includi sottodirectory)
+tool.indexer.option.replace = Rimuovi la vecchia versione del documento dall'indice (se esiste)
+tool.indexer.status = Registro di uscita (Llama-index):
+tool.indexer.tab.browser = Sfoglia idx
+tool.indexer.tab.browse.tip = Sfoglia o rimuovi gli elementi attualmente indicizzati (qui viene visualizzata la mappatura del database all'indice).
+tool.indexer.tab.ctx = Contesto
+tool.indexer.tab.ctx.auto.yes = SÌ
+tool.indexer.tab.ctx.auto.no = NO
+tool.indexer.tab.ctx.auto_enabled = Indicizzazione automatica abilitata
+tool.indexer.tab.ctx.idx.tip = Fai clic per re-indicizzare in batch il database del contesto:
+tool.indexer.tab.ctx.last_auto = Ultimo aggiornamento batch dell'indice del database del contesto
+tool.indexer.tab.ctx.last_meta_id = Ultimo ctx meta ID
+tool.indexer.tab.ctx.last_meta_ts = Ultimo ctx meta TS
+tool.indexer.tab.ctx.tip = Qui puoi re-indicizzare in batch l'intero database del contesto o aggiornare i dati dall'ultima indicizzazione batch.
+tool.indexer.tab.files = File
+tool.indexer.tab.files.path.dir = Seleziona directory:
+tool.indexer.tab.files.path.files = Seleziona file:
+tool.indexer.tab.files.tip = Seleziona file(s) o directory per incorporare file nell'indice selezionato. Il caricatore di dati sarà scelto automaticamente in base all'estensione del file.
+tool.indexer.tab.web = Web
+tool.indexer.tab.web.cfg = Configurazione (impostazioni globali) - Impostazioni -> Llama-index -> Caricatori di dati
+tool.indexer.tab.web.help = Aiuto
+tool.indexer.tab.web.loader = Caricatore di dati
+tool.indexer.tab.web.source = Fonte dati
+tool.indexer.tab.web.tip = Seleziona un caricatore di dati e definisci i parametri del caricatore per incorporare dati esterni dal web.
+tool.indexer.title = Indicizzatore
 toolbox.agent.auto_stop.label = Arresto automatico
 toolbox.agent.iterations.label = Passi di esecuzione (iterazioni, 0 = infinito)
 toolbox.assistants.label = Assistenti
 toolbox.indexes.label = Indici
 toolbox.img_variants.label = Numero di varianti di immagine da generare
 toolbox.mode.label = Modalità
 toolbox.model.label = Modello
 toolbox.name.ai = Nome AI
 toolbox.name.user = Nome utente
 toolbox.presets.label = Preset
 toolbox.prompt = Prompt del sistema
 toolbox.temperature.label = Temperatura
+untitled = Senza titolo
 update.current_version = La tua versione
 update.download = Vai al download
 update.snap = Vai allo Snap Store
 update.info = È disponibile una nuova versione
 update.info.upgrade = Puoi aggiornare ora con:
 update.info.none = La tua versione è aggiornata
 update.new_version = Versione più recente
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/data/locale/locale.pl.ini` & `pygpt_net-2.2.0/src/pygpt_net/data/locale/locale.pl.ini`

 * *Files 22% similar despite different names*

```diff
@@ -1,37 +1,54 @@
 [LOCALE]
 about.thanks = Specjalne podziękowania dla społeczności GitHub-a
 action.add = Dodaj
+action.clear = Wyczyść
+action.copy = Kopiuj
 action.ctx_copy_id = Kopiuj ID
 action.ctx.indexed = Ostatnio zindeksowane
+action.ctx.new = Nowy kontekst...
+action.ctx.new.in_group = Nowy kontekst w: {group}...
+action.group.delete.only = Usuń (tylko grupę)
+action.group.delete.all = Usuń wszystko (razem z elementami)
+action.group.new = Nowa grupa
+action.group.remove = Usuń z grupy
+action.move_to = Przenieś do
 action.delete = Usuń
 action.download = Pobierz
 action.duplicate = Zduplikuj
 action.edit = Edytuj
 action.idx = Indeksuj w Llama-index...
 action.idx.remove = Usuń z
 action.mkdir = Utwórz katalog...
 action.open = Otwórz
 action.open_dir = Otwórz w katalogu...
 action.pin = Przypnij na górze
 action.unpin = Odepnij
+action.paste = Wklej
+action.profile.delete = Usuń profil (tylko z listy)
+action.profile.delete_all = Usuń profil (i wszystkie pliki użytkownika)
 action.refresh = Odśwież
 action.rename = Zmień nazwę
+action.restore = Przywróć
 action.redo = Powtórz
 action.save = Zapisz
 action.save_as = Zapisz jako...
+action.save_selection_as = Zapisz zaznaczenie jako...
+action.select_all = Wybierz wszystko
 action.touch = Utwórz plik...
 action.truncate = Wyczyść wszystko
 action.undo = Cofnij
 action.upload = Prześlij tutaj pliki...
 action.use = Użyj
 action.use.attachment = Jako załącznik
 action.use.copy_work_path = Kopiuj ścieżkę roboczą
 action.use.copy_sys_path = Kopiuj ścieżkę systemową
 action.use.read_cmd = Poproś o odczytanie tego pliku...
+action.video.open = Otwórz wideo lub audio...
+action.video.play = Odtwórz wideo lub audio...
 alert.preset.empty_id = Podanie nazwy jest wymagane.
 alert.preset.no_chat_completion = Przynajmniej jedna opcja: czat, completion, obraz albo wizja jest wymagana!
 alert.snap.file_manager = Uruchomiono za pomocą Snap-a. Proszę otworzyć katalog manualnie za pomocą przeglądarki plików:
 alert.title = Informacja
 agent.infinity.confirm.content = UWAGA: Próbujesz uruchomić nieskończoną pętlę! Może to spowodować intensywne zużycie tokenów. Czy na pewno chcesz kontynuować?
 assistant.action.delete = Usuń
 assistant.action.duplicate = Duplikuj
@@ -47,24 +64,35 @@
 assistant.model = Model
 assistant.name = Nazwa
 assistant.new = Utwórz
 assistant.new.id_tip = Pozostaw puste ID jeśli dodajesz nowego Asystenta.\n...lub podaj ID z OpenAI jeśli taki Asystent już istnieje na serwerze.
 assistant.run.completed = Run: Zakończono sukcesem
 assistant.run.failed = Run: Wystąpił błąd
 assistant.run.listening = Run: W trakcie...
-assistant.tool.code_interpreter = Tool: code interpreter
+assistant.store.id = ID
+assistant.store.files.suffix = Pliki
+assistant.store.name = Nazwa
+assistant.store.expire_days = Dni ważności
+assistant.store.status = Status
+assistant.store.hide_threads = Ukryj bazy wątków
+assistant.store.thread_only = (tylko bieżący wątek)
+assistant.tool.code_interpreter = Interpreter kodu
 assistant.tool.function = Tool: function
 assistant.tool.retrieval = Tool: retrieval
+assistant.tool.file_search = Czat z plikami
+assistant.vector_store = Baza wektorowa
+attachments.header.store = Baza(y) wektorowa
 attachments.btn.add = Dodaj plik
 attachments.btn.clear = Wyczyść
 attachments.capture_clear = Wyczyść przy przechwytywaniu
 attachments.clear.confirm = Wyczyścić listę plików?
 attachments.delete.confirm = Usunąć plik z listy?
 attachments.header.name = Nazwa
 attachments.header.path = Ścieżka
+attachments.header.size = Rozmiar
 attachments.send_clear = Wyczyść listę po wysłaniu
 attachments.tab = Załączniki
 attachments_uploaded.btn.clear = Wyczyść
 attachments_uploaded.btn.sync = Synchronizuj
 attachments_uploaded.clear.confirm = UWAGA: Czy na pewno usunąć wszystkie te pliki ze zdalnego serwera?
 attachments_uploaded.delete.confirm = UWAGA: Czy na pewno usunąć plik ze zdalnego serwera?
 attachments_uploaded.sync.tip = Tip: kliknij na 'Synchronizuj', aby pobrać listę plików z OpenAI
@@ -77,85 +105,179 @@
 audio.speak.btn.tooltip = Kliknij, aby rozpocząć nasłuchiwanie przez mikrofon
 audio.speak.btn.stop.tooltip = Kliknij, aby zakończyć nasłuchiwanie przez mikrofon
 audio.speak.ignoring = Zignorowano (brak prefixu)
 audio.speak.now = Mów teraz...
 audio.speak.wait = Czekaj...
 audio.speak.sending = Wysyłam...
 audio.speak.energy = Głośność
+audio.transcribe.title = Transkrypcja audio
+audio.transcribe.tip = Wskazówka: kliknij "Otwórz...", aby rozpocząć transkrypcję audio z pliku. Zostanie użyty dostawca wejścia audio z ustawień wtyczki.
+audio.transcribe.open = Otwórz plik audio/wideo i przepisz...
+audio.transcribe.confirm = Czy na pewno chcesz przetransportować ten plik audio/wideo?
+audio.transcribe.clear.confirm = Czy wyczyścić obecną transkrypcję?
+audio.transcribe.auto_convert = Zawsze konwertuj wideo do mp3 przed transkrypcją (wymagany ffmpeg)
+audio.transcribe.result.finished = Zakończono: {path}
+audio.transcribe.result.selected = Wybrany plik: {path}
 calendar.day.search = Pokaż rozmowy
 calendar.day.label = Ustaw kolor etykiety...
 calendar.day.label.color.default = Domyślny
 calendar.day.label.color.red = Czerwony
 calendar.day.label.color.orange = Pomarańczony
 calendar.day.label.color.yellow = Źółty
 calendar.day.label.color.green = Zielony
 calendar.day.label.color.blue = Niebieski
 calendar.day.label.color.indigo = Indygo
 calendar.day.label.color.violet = Fioletowy
 calendar.note.label = Notatka dnia
+changed.confirm = Czy chcesz zapisać zmiany przed kontynuowaniem?
 chatbox.label = Czat
 chatbox.plugins = plugin(ów)
 chat.prefix.attachment = Załącznik
 chat.prefix.file = Plik
 chat.prefix.img = Obraz
 chat.prefix.url = Link
+chat.name.user = Ty
+chat.name.bot = AI
 clipboard.copied = Skopiowano do schowka.
+clipboard.copied_to = Skopiowano do schowka:
 cmd.enabled = Uruchamianie poleceń
 cmd.tip = Tip: Aby umożliwić wykonanie poleceń z pluginów z prefixem "Command/Polecenie:", musisz włączyć opcję "Uruchamianie poleceń".
 coming_soon = Dostępne wkrótce...
 confirm.assistant.delete = Na pewno usunąć asystenta?
 confirm.assistant.import = Na pewno zaimportować listę asystentów z API?
-confirm.assistant.import_files = Na pewno zaimportować listę plików dla tego asystenta z API?
+confirm.assistant.files.truncate = Czy na pewno chcesz usunąć wszystkie pliki we wszystkich asystentach?
+confirm.assistant.import_files = Zaimportować wszystkie pliki z API?
+confirm.assistant.store.import = Zaimportować wszystkie bazy wektorowe z API?
+confirm.assistant.store.truncate = Usunąć wszystkie bazy wektorowe w API?
+confirm.assistant.store.clear = Wyczyścić bazy wektorowe (tylko lokalnie)?
+confirm.assistant.files.clear = Wyczyścić pliki (tylko lokalnie)?
+confirm.assistant.store.refresh = Odświeżyć wszystkie bazy wektorowe?
 confirm.img.delete = Usunąć obraz z dysku?
 confirm.preset.clear = Na pewno wyczyścić preset?
 confirm.preset.delete = Na pewno chcesz usunąć ten preset?
 confirm.preset.overwrite = Preset już istnieje. Czy zastąpić plik?
 confirm.preset.restore = Przywrócić domyślny preset dla tego trybu?
+confirm.profile.delete = Czy na pewno chcesz usunąć profil? Zostanie on usunięty tylko z listy.
+confirm.profile.delete_all = Czy jesteś pewien, że chcesz usunąć profil wraz ze wszystkimi plikami konfiguracyjnymi i plikami danych użytkownika w katalogu roboczym profilu?
+confirm.profile.reset = Czy na pewno chcesz przywrócić profil do ustawień domyślnych? UWAGA: Wszystkie pliki konfiguracyjne oraz baza danych kontekstów zostaną usunięte! Katalog z danymi zostanie zachowany - aby go usunąć, musisz zrobić to ręcznie lub użyć opcji usuwania.
 context.btn.clear = Wyczyść pamięć
 context.items = elementy
 context.label = Kontekst
 context.tokens = tokeny
 ctx.delete.all.confirm = Czy na pewno usunąć CAŁĄ historię?
 ctx.delete.confirm = Czy na pewno usunąć?
+ctx.delete.item.confirm = Usunąć element rozmowy?
+ctx.delete.item.link = usuń
+ctx.extra.audio = Odczytaj odpowiedź (audio)
+ctx.extra.copy = Kopiuj do schowka
+ctx.extra.copy_code = kopiuj do schowka
+ctx.extra.join = Dołącz do poprzedniej odpowiedzi (połącz)
+ctx.extra.reply = Wygeneruj ponownie odpowiedź (od tego miejsca)
+ctx.extra.edit = Edytuj i wygeneruj ponownie (od tego miejsca)
+ctx.extra.delete = Usuń ten element
+ctx.join.item.confirm = Czy dołączyć tę odpowiedź do poprzedniej odpowiedzi (połączyć elementy)?
 ctx.list.label = Kontekst i historia
 ctx.list.search.placeholder = Szukaj...
 ctx.new = Nowy...
 ctx.new.prefix = Nowy
+ctx.replay.item.confirm = Wygenerować ponownie odpowiedź od tego miejsca?
 ctx.tokens = tokenów
+db.backup = Automatyczna kopia zapasowa
+db.backup.tip = Utwórz kopię zapasową przed każdym usunięciem/skróceniem/aktualizacją
+db.limit = Limit
+db.next = Następny
+db.page = Strona
+db.prev = Poprzedni
+db.refresh = Odśwież
+db.sort = Sortuj według
+db.order = Kolejność
+db.search = Szukaj
+db.search_in = w
+db.search.placeholder = Szukaj...
+db.time_convert = Konwertuj czas()
+db.time_convert.tip = Konwertuj kolumny ze znacznikiem czasu do formatu RRRR-MM-DD GG:MM:SS
+db.table = Tabela:
 dialog.about.build = Build
 dialog.about.docs = Dokumentacja
 dialog.about.email = Email
 dialog.about.github = GitHub
 dialog.about.title = O programie
 dialog.about.version = Wersja
 dialog.about.website = Strona WWW
 dialog.assistant = Dodawanie / Edycja asystenta
 dialog.assistant.btn.current = Użyj obecnego
-dialog.assistant.btn.save = Dodaj / zapisz zmiany
+dialog.assistant.btn.close = Anuluj
+dialog.assistant.btn.save = Zapisz
+dialog.assistant.btn.store = Bazy wektorowe
+dialog.assistant.store = Bazy wektorowe asystentów
+dialog.assistant.store.btn.close = Anuluj
+dialog.assistant.store.btn.new = Utwórz
+dialog.assistant.store.btn.save = Zapisz
+dialog.assistant.store.btn.refresh_status = Odśwież status
+dialog.assistant.store.delete.confirm = Czy na pewno chcesz usunąć bazę wektorową asystenta?
+dialog.assistant.store.menu.import = Zaimportuj wszystko
+dialog.assistant.store.menu.refresh_store = Odśwież wszystko
+dialog.assistant.store.menu.clear_store = Wyczyść bazy wektorowe (tylko lokalnie)
+dialog.assistant.store.menu.clear_files = Wyczyść pliki (tylko lokalnie)
+dialog.assistant.store.menu.truncate_store = Opróżnij bazy (lokalnie + zdalnie)
+dialog.assistant.store.menu.truncate_files = Opróżnij pliki (lokalnie + zdalnie)
 dialog.changelog.title = Dziennik zmian
 dialog.confirm.no = Nie
 dialog.confirm.title = Potwierdź
 dialog.confirm.yes = Tak
 dialog.create.dismiss = Anuluj
 dialog.create.title = Nazwa
 dialog.create.update = Utwórz
+dialog.css.restore.confirm = Przywrócić domyślny CSS? (wszystkie zmiany w plikach CSS zostaną przeniesione do plików .backup)
+dialog.css.restore.confirm.success = OK. Przywrócono domyślne style CSS.
 dialog.editor.btn.defaults = Przywróć
+dialog.editor.btn.defaults.app = Wczytaj domyślne
 dialog.editor.btn.save = Zapis zmiany
 dialog.editor.label = Edytujesz plik konfiguracyjny - wymagany restart aplikacji aby załadować zmiany.
 dialog.editor.title = Edycja pliku JSON/CSS
+dialog.find.btn.clear = Wyczyść
+dialog.find.btn.find_prev = Znajdź poprzedni
+dialog.find.btn.find_next = Znajdź następny
 dialog.image.title = Wygenerowany obraz
 dialog.license.title = Licencja
 dialog.license.label = Korzystając z tego oprogramowania, akceptujesz następujące warunki:
 dialog.license.accept = Zgadzam się
 dialog.logger.btn.clear = Wyczyść
 dialog.logger.title = Logger
 dialog.plugin_settings = Ustawienia pluginów
 dialog.preset = Edytor presetów
 dialog.preset.btn.current = Użyj aktualnego
 dialog.preset.btn.save = Zapisz zmiany
+dialog.preset.plugins.editor = Edytor presetów wtyczek
+dialog.profile.alert.delete.current = Nie można usunąć bieżącego aktywnego profilu!
+dialog.profile.alert.name.empty = Nazwa nie może być pusta!
+dialog.profile.alert.path.same = Ścieżki źródłowa i docelowa są takie same! Przerwano.
+dialog.profile.alert.path.empty = Ścieżka katalogu roboczego nie może być pusta!
+dialog.profile.alert.path.not_exists = Katalog nie istnieje!
+dialog.profile.alert.duplicate.not_empty = Katalog nie jest pusty i nie zawiera wcześniejszej konfiguracji! Przerywam.\n\nWskazówka: wybierz istniejący katalog roboczy lub pusty katalog, aby w nim utworzyć nowy katalog roboczy.
+dialog.profile.alert.src.empty = Nie znaleziono profilu źródłowego! Przerwano.
+dialog.profile.checkbox.include_db = + baza danych
+dialog.profile.checkbox.include_datadir = + katalog "data"
+dialog.profile.checkbox.switch = Przełącz na utworzony profil
+dialog.profile.editor = Profile
+dialog.profile.item.editor = Profil
+dialog.profile.item.btn.dismiss = Anuluj
+dialog.profile.item.btn.create = Utwórz
+dialog.profile.item.btn.update = Aktualizuj
+dialog.profile.item.btn.duplicate = Zduplikuj tutaj
+dialog.profile.name.label = Nazwa profilu
+dialog.profile.new = Nowy profil
+dialog.profile.status.changed = Zmieniono profil na
+dialog.profile.status.created = Profil utworzony.
+dialog.profile.status.updated = Profil zaktualizowany.
+dialog.profile.status.deleted = Profil usunięty
+dialog.profile.status.duplicated = Profil zduplikowany.
+dialog.profile.status.removed = Profil usunięty z listy
+dialog.profile.tip = Tworząc nowe profile, możesz używać oddzielnych ustawień, różnych historii kontekstów i danych użytkownika, oraz szybko przełączać się między nimi.
+dialog.profile.workdir.label = Katalog roboczy (katalog dla plików konfiguracyjnych i danych użytkownika)
 dialog.rename.dismiss = Anuluj
 dialog.rename.title = Zmień nazwę
 dialog.rename.update = Zmień nazwę
 dialog.settings = Ustawienia
 dialog.settings.btn.defaults.user = Cofnij zmiany
 dialog.settings.btn.defaults.app = Wczytaj domyślne
 dialog.settings.btn.save = Zapisz zmiany
@@ -169,14 +291,27 @@
 dialog.plugin.settings.defaults.user.confirm = Przywrócić dokonane zmiany?
 dialog.plugin.settings.defaults.user.result = Przywrócono ustawienia użytkownika dla pluginu
 dialog.start.btn = PRZEJDŹ DO USTAWIEŃ...
 dialog.start.link = https://platform.openai.com/account/api-keys
 dialog.start.settings.text = Jeśli posiadasz już klucz API możesz go skonfigurować w oknie ustawień.\nAby to zrobić, kliknij na przycisk poniżej i wklej swój klucz API do pola Klucz API.
 dialog.start.title = Klucz API nie jest zdefiniowany
 dialog.start.title.text = Nie skonfigurowałeś jeszcze klucza API...\nKlucz API uzyskasz rejestrując konto na stronie internetowej OpenAI:
+dialog.workdir.tip = Wybierz katalog z dysku i kliknij 'Zmień/Przenieś...', aby przenieść bieżący katalog roboczy do wybranego, lub ustawić istniejący katalog jako bieżący katalog roboczy. Wymagane miejsce na dysku (do przeniesienia): {size}
+dialog.workdir.reset.btn = Aktualny
+dialog.workdir.update.btn = Zmień/Przenieś...
+dialog.workdir.change.confirm = Czy jesteś pewny, że chcesz zmienić/przenieść katalog roboczy do:\n{path}?
+dialog.workdir.change.empty.alert = Katalog nie jest pusty! Anulowanie.
+dialog.workdir.update.confirm = ISTNIEJĄCY KATALOG ROBOCZY: Katalog "{path}" nie jest pusty i zawiera już dane z innego katalogu roboczego. Czy chcesz TYLKO ustawić ten istniejący katalog jako bieżący katalog roboczy (bez przenoszenia danych)?
+dialog.workdir.title = Zmiana katalogu roboczego
+dialog.workdir.result.no_free_space = Za mało miejsca na dysku! Wymagane: {required}, Wolne miejsce: {free}.
+dialog.workdir.result.same_directory = Nic do przeniesienia.
+dialog.workdir.result.success = [OK] Bieżący katalog roboczy to teraz: {path}
+dialog.workdir.result.failed = Wystąpił błąd podczas przenoszenia katalogu roboczego.
+dialog.workdir.result.wait = Proszę czekać... przenoszenie bieżącego katalogu roboczego... To może chwilę potrwać...
+dialog.workdir.result.directory_not_exists = Katalog docelowy nie istnieje!
 dt.days_ago = dni temu
 dt.month = miesiąc temu
 dt.today = dziś
 dt.week = tydzień temu
 dt.weeks = tygodnie temu
 dt.yesterday = wczoraj
 error.assistant_not_selected = Musisz najpierw utworzyć, zaimportować lub wybrać asystenta!
@@ -185,15 +320,17 @@
 files.delete.confirm = Usunąć plik/katalog?
 files.delete.recursive.confirm = Katalog nie jest pusty! Czy na pewno chcesz usunąć katalog i wszystkie pliki w nim?
 files.explorer.header.name = Nazwa
 files.explorer.header.size = Rozmiar
 files.explorer.header.type = Typ
 files.explorer.header.modified = Data modyfikacji
 files.explorer.header.indexed = Zindeksowano dnia
+filter.ctx.counters.all = Wszystkie liczniki
 filter.ctx.label = Filtr wyświetlania listy kontekstów
+filter.ctx.label.colors = Wyświetl według etykiet
 filter.ctx.radio.all = Wszystkie
 filter.ctx.radio.pinned = Przypięte
 filter.ctx.radio.labeled = Oznaczone etykietą
 filter.ctx.radio.indexed = Zindeksowane (llama-index)
 header.assistant.tool.function.name = Name
 header.assistant.tool.function.params = Parameters (JSON)
 header.assistant.tool.function.desc =  Description
@@ -213,15 +350,15 @@
 idx.status.empty = Nic nie zindeksowano.
 idx.status.error = [BŁĄD] Nic nie zindeksowano.
 idx.status.indexing = Indeksowanie... proszę czekać...
 idx.status.success = [SUKCES] Zindeksowane elementy:
 idx.status.truncating = Usuwanie indeksu... proszę czekać...
 idx.status.truncate.success = [OK] Indeks usunięty.
 idx.status.truncate.error = [BŁĄD] Indeks nie został usunięty.
-idx.token.warn = Spowoduje to użycie dodatkowych tokenów w celu osadzenia danych (zostanie użyty model text-embedding-ada-002)
+idx.token.warn = Spowoduje to użycie dodatkowych tokenów w celu osadzenia danych.
 img.status.downloading = Pobieranie obrazu... 
 img.status.error = Błąd generowania obrazu
 img.status.finished = Wygenerowało i pobrano obraz.
 img.status.generating = Proszę czekać... generowanie obrazu dla
 img.status.prompt.error = Błąd generowania zapytania
 img.status.prompt.wait = Oczekuję na wygenerowanie zapytania... czekaj...
 img.status.save.error = Błąd zapisu obrazu
@@ -230,64 +367,99 @@
 img.raw = Tryb raw
 img.save.title = Zapisz obraz
 info.settings.all.saved = Zapisano ustawienia
 info.settings.saved = Zapisano
 inline.vision = + Wizja
 input.btn.send = Wyślij
 input.btn.stop = Stop
+input.btn.cancel = Anuluj
+input.btn.update = Zaktualizuj
 input.label = Wejście (Twój prompt)
 input.radio.enter = Enter
 input.radio.enter_shift = Shift+Enter
 input.radio.none = Wył.
 input.send_clear = Wyczyść po wysłaniu
 input.stream = Stream
 input.tab = Input
+interpreter.all = Wykonaj historię (wszystko)
+interpreter.auto_clear = Wyczyść przy wysyłaniu
+interpreter.btn.clear = Wyczyść wyniki
+interpreter.btn.send = Wyślij / wykonaj
+interpreter.clear.confirm = Wyczyścić bieżące okno?
+interpreter.edit_label.edit = Kod (historia)
+interpreter.edit_label.output = Wynik
+interpreter.edit = Tryb edycji
+interpreter.input.placeholder = Kod Pythona do wykonania...
 menu.audio = Audio / Mowa
 menu.audio.input = Wejście: rozpoznawanie mowy
 menu.audio.output = Wyjście: synteza mowy
 menu.config = Opcje
 menu.config.edit.config = Edytuj config.json...
 menu.config.edit.models = Edytuj models.json...
 menu.config.edit.css = Edytuj style CSS...
-menu.config.open_dir = Otwórz katalog z plikami...
+menu.config.edit.css.restore = Przywróć domyślny CSS...
+menu.config.open_dir = Otwórz katalog roboczy...
+menu.config.change_dir = Zmień katalog roboczy...
+menu.config.profile = Profil
+menu.config.profile.edit = Edytuj profile...
+menu.config.profile.new = Nowy profil...
 menu.config.save = Zapisz ustawienia
 menu.config.settings = Ustawienia...
 menu.debug = Debug
 menu.debug.assistants = Asystenci...
 menu.debug.attachments = Pliki / załączniki...
 menu.debug.config = Konfiguracja...
 menu.debug.context = Kontekst...
+menu.debug.indexes = Indeksy...
 menu.debug.logger = Logger
 menu.debug.models = Modele...
 menu.debug.plugins = Pluginy...
 menu.debug.presets = Presety...
+menu.debug.app.log = Wyświetl plik logów (app.log)
+menu.debug.agent = Agent...
+menu.debug.db = Przeglądarka bazy danych
 menu.debug.ui = UI...
 menu.file = Plik
 menu.file_clear_history = Usuń całą historię
+menu.file_clear_history_groups = Usuń całą historię (+ grupy)
+menu.file.current = Wybierz bieżący
 menu.file.exit = Zakończ
 menu.file.new = Nowa rozmowa...
+menu.file.group.new = Nowa grupa kontekstu...
 menu.info = Informacje
 menu.info.about = O programie
 menu.info.changelog = Dziennik zmian
 menu.info.docs = Dokumentacja (EN)
+menu.info.donate = Wesprzyj/przekaż donację
 menu.info.github = Strona na GitHub-ie
 menu.info.license = Licencja
 menu.info.pypi = PyPi
 menu.info.snap = Snap Store
 menu.info.updates = Sprawdź dostępność aktualizacji...
 menu.info.website = Strona projektu - pygpt.net
 menu.lang = Język
 menu.plugins = Pluginy
+menu.plugins.presets = Presety...
+menu.plugins.presets.edit = Edytuj presety...
+menu.plugins.presets.new = Nowy preset...
 menu.plugins.settings = Ustawienia...
 menu.theme = Wygląd
 menu.theme.dark = Ciemny kolor...
 menu.theme.light = Jasny kolor...
+menu.theme.syntax = Podświetlanie składni kodu...
 menu.theme.density = Rozmiar układu
 menu.theme.tooltips = Pokaż podpowiedzi
 menu.theme.settings = Ustawienia...
+menu.theme.blocks = Wyświetl bloki
+menu.tools = Narzędzia
+menu.tools.audio.transcribe = Transkrybuj pliki audio/wideo
+menu.tools.interpreter = Interpreter kodu Python
+menu.tools.media.player = Odtwarzacz multimedialny
+menu.tools.image.viewer = Przeglądarka obrazów
+menu.tools.text.editor = Edytor tekstu
 menu.tray.notepad = Otwórz Notatnik...
 menu.tray.screenshot = Zapytaj ze zrzutem ekranu...
 menu.tray.scheduled = Zaplanowane zadania
 menu.video = Wideo
 menu.video.capture = Wejście: kamera
 menu.video.capture.auto = Automatyczne przechwytywanie
 mode.agent = Agent (autonomiczny)
@@ -308,14 +480,15 @@
 mode.vision.tooltip = Analiza obrazu z GPT-4 Vision
 notify.agent.goal.title = Cel osiągnięty
 notify.agent.goal.content = Agent: cel został osiągnięty.
 notify.agent.stop.title = Zakończono
 notify.agent.stop.content = Agent: zatrzymany
 notify.cron.title = Uruchomione zadanie zaplanowane
 notify.update.title = Dostępna nowa wersja
+output.edit = Edytuj
 output.raw = Plain text
 output.tab.calendar = Kalendarz
 output.tab.chat = Czat
 output.tab.files = Pliki
 output.tab.notepad = Notes
 output.timestamp = Pokaż czas
 output.tab.painter = Rysuj
@@ -338,87 +511,115 @@
 preset.filename = ID (nazwa pliku)
 preset.img = Obraz (Image / DALL-E)
 preset.langchain = Langchain
 preset.llama_index = Czat z plikami
 preset.name = Nazwa presetu
 preset.new = Utwórz
 preset.prompt = Prompt systemowy
+preset.prompt.paste_template: Wklej z szablonu...
 preset.temperature = Temperatura
 preset.untitled = (bez nazwy)
 preset.use = Użyj
 preset.user_name = Imię użytkownika
 preset.vision = Wizja (Vision)
+profile.current.suffix = (bieżący)
 screenshot.capture.name.prefix = Zrzut ekranu z
 settings.advanced.collapse = Pokaż/ukryj zaawansowane opcje
 settings.agent.mode = Tryb wewnętrzny
 settings.agent.mode.desc = Tryb wewnętrzny do użycia w trybie Agenta (chat, completion, langchain, llama_index itp.)
 settings.agent.goal.notify = Wyświetl powiadomienie w zasobniku systemowym, gdy cel zostanie osiągnięty.
 settings.agent.idx = Indeks
 settings.agent.idx.desc = Tylko jeśli tryb wewnętrzny to llama_index (Czat z plikami), wybierz indeks do użycia w trybie Agenta
+settings.api_endpoint = Punkt końcowy API
+settings.api_endpoint.desc = URL punktu końcowego API OpenAI, domyślnie: https://api.openai.com/v1
 settings.api_key = Klucz API OpenAI
 settings.check_updates = Sprawdź aktualizacje przy starcie
 settings.check_updates.bg = Sprawdź aktualizacje w tle
-settings.cmd.prompt = Prompt (append): wykonywanie kodu i poleceń
 settings.context_threshold = Zarezerwowany kontekst
+settings.ctx.audio = Zawsze pokazuj ikonę audio
 settings.ctx.auto_summary = Kontekst: auto-podsumowanie
-settings.ctx.auto_summary.prompt = Prompt (user): auto-podsumowanie
-settings.ctx.auto_summary.system = Prompt (sys): auto-podsumowanie
 settings.ctx.auto_summary.model = Model używany do auto-podsumowania
+settings.ctx.code_interpreter = Pokaż wyniki interpretacji kodu
+settings.ctx.code_interpreter.desc = Jeśli ta opcja jest włączona, wyniki z interpretacji kodu w API Asystenta będą wyświetlane w czasie rzeczywistym (w trybie strumienia).
+settings.ctx.convert_lists = Konwertuj listy na akapity
+settings.ctx.copy_code = Pokaż "kopiuj do schowka" w blokach kodu
 settings.ctx.records.limit = Liczba ost. kontekstów (0 = bez limitu)
 settings.ctx.search_content = Szukaj również w treści rozmów, nie tylko w tytułach
 settings.ctx.search.desc = Włącz wyszukiwanie również w treści elementów kontekstu
+settings.ctx.sources = Pokaż źródła indeksu Llama
+settings.ctx.sources.desc = Jeśli opcja jest włączona, wykorzystane źródła będą wyświetlane w odpowiedzi (jeśli dostępne, nie zadziała w czacie z wł. opcją stream)
 settings.defaults.app.confirm = Wczytać fabryczne ustawienia aplikacji?
 settings.defaults.user.confirm = Przywrócić dokonane zmiany?
 settings.dict.delete.confirm = Usunąć pozycję z listy?
 settings.download.dir = Katalog na pliki do pobrania
 settings.download.dir.desc = Podkatalog na pobrane pliki, np. w trybie Asystentów, wewnątrz "data"
 settings.font_size.tip = Wskazówka: Możesz zmienić rozmiar czcionki używając CTRL + Rolka myszy
-settings.font_size = Rozmiar czcionki (okno chatu)
+settings.font_size = Rozmiar czcionki (czat plain-text, notatniki)
 settings.font_size.ctx = Rozmiar czcionki (lista rozmów)
 settings.font_size.input = Rozmiar czcionki (wejście)
 settings.font_size.toolbox = Rozmiar czcionki (narzędzia)
 settings.frequency_penalty = Frequency Penalty
-settings.img_prompt = DALL-E: Prompt (sys): generowanie promptów
 settings.img_prompt_model = DALL-E: model do generowania promptów
 settings.img_resolution = DALL-E: rozmiar obrazu
 settings.img_quality = DALL-E: jakość obrazu
 settings.img_dialog_open = Otwórz okno dialogowe obrazu po wygenerowaniu (Tryb obrazu)
 settings.layout.density = Rozmiar layoutu
 settings.layout.dpi.scaling = Skalowanie DPI
 settings.layout.dpi.factor = Współczynnik DPI
 settings.layout.dialog.geometry.store = Zapisz pozycje okien dialogowych
 settings.layout.minimized = Uruchom zminimalizowany
 settings.layout.tooltips = Wyświetlanie wskazówek (opisy pomocy)
 settings.layout.tray = Pokaż ikonę w zasobniku
 settings.layout.tray.desc = Wymagany restart. Ikona w zasobniku zapewnia dodatkowe funkcje takie jak "Zapytaj ze zrzutem ekranu" lub "Otwórz notatnik".
 settings.layout.tray.minimize = Zminimalizuj do zasobnika przy wyjściu
 settings.layout.tray.minimize.desc = Wymagane jest włączenie ikony w zasobniku, aby ta opcja działała.
-settings.llama.idx.excluded_ext = Wykluczone rozszerzenia
-settings.llama.idx.excluded_ext.desc = Rozszerzenia do wykluczenia, jeśli nie ma ładowarki danych dla tego rozszerzenia, oddzielone przecinkiem
+settings.llama.idx.custom_meta = Niestandardowe metadane do dołączenia/zastąpienia w indeksowanych dokumentach
+settings.llama.idx.custom_meta.desc = Zdefiniuj niestandardowe pola metadanych klucz => wartość dla określonych rozszerzeń plików, rozdziel rozszerzenia przecinkiem.\nDozwolone placeholdery: {path}, {relative_path} {filename}, {dirname}, {relative_dir} {ext}, {size}, {mtime}, {date}, {date_time}, {time}, {timestamp}
+settings.llama.idx.excluded.ext = Wykluczone rozszerzenia
+settings.llama.idx.excluded.ext.desc = Rozszerzenia do wykluczenia, jeśli nie ma ładowarki danych dla tego rozszerzenia, oddzielone przecinkiem
+settings.llama.idx.excluded.force = Wymuszaj wykluczenie plików
+settings.llama.idx.excluded.force.desc = Jeśli opcja jest włączona, lista wykluczeń będzie stosowana nawet gdy aktywny jest moduł ładowania danych dla rozszerzenia.
 settings.llama.idx.list = Indeksy
 settings.llama.idx.recursive = Rekursywne indeksowanie katalogów
 settings.llama.idx.replace_old = Zastąp stare wersje dokumentów w indeksie podczas reindeksacji
 settings.llama.idx.replace_old.desc = Jeśli włączone, poprzednie wersje dokumentów zostaną usunięte z indeksu, gdy najnowsze wersje zostaną zindeksowane
 settings.llama.idx.storage = Vector Store
 settings.llama.hub.loaders = Dodatkowe ładowarki danych online do użycia (LlamaHub) - tylko dla wersji Python, nie będzie działać w wersji skompilowanej i Snap
-settings.llama.extra.api.warning = Uwaga: pamiętaj, że podczas indeksowania treści wykorzystywane są wywołania API do modelu osadzania (text-embedding-ada-002). Każde indeksowanie zużywa dodatkowe tokeny. Zawsze kontroluj liczbę używanych tokenów na stronie OpenAI!
+settings.llama.extra.api.warning = Uwaga: pamiętaj, że podczas indeksowania treści wykorzystywane są wywołania API do modelu osadzania. Każde indeksowanie zużywa dodatkowe tokeny. Zawsze kontroluj liczbę używanych tokenów na stronie OpenAI!
 settings.llama.extra.db.never = (nigdy)
 settings.llama.extra.btn.idx_auto.index = ID indeksu do auto-indeksowania
 settings.llama.extra.btn.idx_auto = Auto-indeksowanie bazy w czasie rzeczywistym (w tle rozmowy)
 settings.llama.extra.btn.idx_head = Kliknij tutaj, aby zaindeksować pliki lub bazę danych:
 settings.llama.extra.btn.idx_db_all = DB (wszystko)
 settings.llama.extra.btn.idx_db_update = DB (update)
 settings.llama.extra.btn.idx_files_all = Pliki (wszystko)
 settings.llama.extra.legend = Legenda:\nDB (wszystko) - ponownie indeksuje całą bazę danych konwersacji\nDB (update) - indeksuje bazę danych tylko od ostatniego indeksowania\nPliki (wszystko) - indeksuje wszystkie pliki w katalogu 'data'\nAutomatyczny indeks DB - automatycznie indeksuje w tle wszystkie nowe konwersacje (dodaje tylko nowe dane)\n
 settings.lock_modes = Blokuj niekompatybilne tryby
 settings.max_output_tokens = Max generowane tokeny
+settings.max_requests_limit = Limit RPM
+settings.max_requests_limit.desc = Określ limit maksymalnej liczby żądań na minutę (RPM), 0 = brak limitu
 settings.max_total_tokens = Max wszystkich tokenów
 settings.notepad.num = Liczba notatników
 settings.organization_key = Klucz ORGANIZACJI OpenAI
 settings.presence_penalty = Presence Penalty
+settings.prompt.agent.continue = Agent: kontynuuj
+settings.prompt.agent.continue.desc = Prompt wysyłany do automatycznego kontynuowania rozmowy
+settings.prompt.agent.goal = Agent: aktualizacja celu
+settings.prompt.agent.goal.desc = Prompt instrukujący jak zaktualizować obecny status celu
+settings.prompt.cmd = Wykonaj polecenie: instrukcja
+settings.prompt.cmd.desc = Placeholdery: {schema}, {extra}
+settings.prompt.cmd.extra = Wykonaj polecenie: dodatkowa stopka (poza trybem Asystenta)
+settings.prompt.cmd.extra.assistants = Wykonaj polecenie: dodatkowa stopka (tryb Asystenta wyłącznie)
+settings.prompt.cmd.extra.assistants.desc = Dodatkowe instrukcje do oddzielenia lokalnych poleceń od zdalnego środowiska, które już jest skonfigurowane w Asystentach.
+settings.prompt.ctx.auto_summary.system = Kontekst: auto-podsumowanie (komunikat systemowy)
+settings.prompt.ctx.auto_summary.user = Kontekst: auto-podsumowanie (wiadomość użytkownika)
+settings.prompt.ctx.auto_summary.user.desc = Placeholdery: {input}, {output}
+settings.prompt.img = DALL-E: generowanie obrazu
+settings.prompt.img.desc = Prompt do generowania poleceń dla DALL-E (jeśli surowy tryb jest wyłączony). Tylko tryb obrazu.
+settings.render.code_syntax = Styl podświetlenia składni kodu
 settings.render.plain = Wyłącz formatowanie markdown w wyjściu (tryb plain-text)
 settings.restart.required = Restart aplikacji jest wymagany, aby zmiany dla tej opcji zostały wprowadzone.
 settings.section.agent = Agent (autonomiczny)
 settings.section.files = Pliki i załączniki
 settings.section.general = Ogólne
 settings.section.layout = Wygląd
 settings.section.ctx = Kontekst
@@ -443,14 +644,16 @@
 settings.vision.capture.idx = Nr. kamery (index)
 settings.vision.capture.width = Kamera - obraz wysokość (px)
 settings.vision.capture.quality = Jakość przechwyt. obrazu (%%)
 speech.enable = Mowa
 speech.listening = Mów teraz...
 status.assistant.deleted = Usunięto asystenta
 status.assistant.saved = Zapisano asystenta
+status.audio.start = Generowanie audio, proszę czekać...
+status.audio.stopped = Zatrzymano odtwarzanie dźwięku.
 status.cmd.wait = Uruchamiam polecenie... czekaj...
 status.deleted = Usunięto
 status.error = Upsss... wystąpił błąd :(
 status.finished = Zakończono.
 status.img.generated = Obraz został wygenerowany.
 status.img.saved = Obraz został zapisany
 status.preset.cleared = Preset wyczyszczony
@@ -467,14 +670,15 @@
 status.uploaded = Pliki wgrane na serwer
 status.uploading = Upload plików...
 text.context_menu.audio.read = Przeczytaj (synteza mowy)...
 text.context_menu.copy_to = Kopiuj do...
 text.context_menu.copy_to.calendar = Kalendarz
 text.context_menu.copy_to.notepad = Notatnik
 text.context_menu.copy_to.input = Wejście (input)
+text.context_menu.find = Znajdź...
 theme.dark = Ciemny
 theme.light = Jasny
 tip.tokens.ctx = Kontekst (pamięć): w użyciu / całość - l.tokenów
 tip.tokens.input = Tokeny: prompt usera + prompt systemowy + kontekst + extra = suma / max
 tip.output.tab.files = Katalog z plikami roboczymi znajduje się na Twoim dysku. Pliki tutaj są dostępne dla AI. AI może czytać i zapisywać pliki, a także uruchamiać kod z tego katalogu. Możesz otworzyć ten katalog lokalnie w swoim systemie i umieścić tutaj dowolne pliki. Możesz także zindeksować pliki tutaj przy użyciu Llama-index, aby służyły jako dodatkowe źródło wiedzy.
 tip.output.tab.draw = Możesz użyć narzędzia do rysowania do szybkiego szkicowania lub przechwytywania obrazu z kamery, a następnie wysyłać takie obrazy do AI w trybie Vision do analizy. Możesz tu przechwycić obraz za pomocą kamery lub otworzyć obraz z dysku. Przy użyciu obrazu zostanie on dołączony do wysłanej wiadomości jako załącznik.
 tip.output.tab.notepad = Notatnik może służyć jako narzędzie do robienia notatek i przechowywania informacji. Możesz tutaj przechowywać dowolny tekst, kopiować tekst z okna czatu, a wszystkie informacje zostaną automatycznie zapisane. Możesz utworzyć więcej notatników, korzystając z opcji konfiguracji w ustawieniach.
@@ -483,26 +687,67 @@
 tip.input.attachments.uploaded = Tutaj znajduje się lista plików przesłanych na serwer w trybie Asystenta. Te pliki znajdują się na zdalnym serwerze, a nie na lokalnym komputerze, więc model może używać i analizować je za pomocą narzędzi dostępnych zewnętrznie na zdalnym serwerze.
 tip.toolbox.presets = Twórz presety z różnymi konfiguracjami, aby szybko przełączać się między różnymi ustawieniami, takimi jak prompt systemowy i inne.
 tip.toolbox.prompt = Prompt systemowy może być modyfikowany w czasie rzeczywistym. Aby wykonywać polecenia z wtyczek, włącz opcję "Uruchamianie poleceń".
 tip.toolbox.assistants = Lista asystentów pokazuje asystentów stworzonych i działających na zdalnym serwerze. Wszelkie zmiany zostaną zsynchronizowane ze zdalnym asystentem.
 tip.toolbox.indexes = Indeksując rozmowy i pliki, możesz rozszerzyć dostępną wiedzę o własne dane i historię rozmów.
 tip.toolbox.ctx = Twórz tyle kontekstów rozmów, ile potrzebujesz; możesz do nich wrócić w dowolnym momencie.
 tip.toolbox.mode = Możesz zmienić tryb pracy i model w czasie rzeczywistym.
+tool.indexer = Indeksator...
+tool.indexer.alert.no_files = Nie wybrano plików ani katalogów!
+tool.indexer.alert.no_loader = Nie wybrano ładowarki danych!
+tool.indexer.alert.no_idx = Nie wybrano indeksu!
+tool.indexer.confirm.idx = Wykonać indeksację?
+tool.indexer.confirm.remove = Usunąć element z indeksu?
+tool.indexer.db.copy = Skopiuj wartość do schowka
+tool.indexer.db.remove = Usuń element
+tool.indexer.idx = Indeks
+tool.indexer.idx.btn.add = Dodaj do indeksu
+tool.indexer.loaders = Dostępne ładowarki danych
+tool.indexer.menu.file.clear_log = Wyczyść logi
+tool.indexer.menu.file.remove_idx = Usuń indeks
+tool.indexer.menu.config.settings = Ustawienia
+tool.indexer.option.clear = Wyczyść listę plików po indeksacji
+tool.indexer.option.recursive = Rekursywnie (uwzględnij podkatalogi)
+tool.indexer.option.replace = Usuń starą wersję dokumentu z indeksu (jeśli istnieje)
+tool.indexer.status = Dziennik wyjściowy (Llama-index):
+tool.indexer.tab.browser = Przeglądaj idx
+tool.indexer.tab.browse.tip = Przeglądaj lub usuń obecnie zindeksowane elementy (tutaj wyświetlany jest odwzorowanie bazy danych do indeksu).
+tool.indexer.tab.ctx = Kontekst
+tool.indexer.tab.ctx.auto.yes = TAK
+tool.indexer.tab.ctx.auto.no = NIE
+tool.indexer.tab.ctx.auto_enabled = Automatyczne indeksowanie włączone
+tool.indexer.tab.ctx.idx.tip = Kliknij, aby masowo ponownie zindeksować bazę danych kontekstu:
+tool.indexer.tab.ctx.last_auto = Ostatnia masowa aktualizacja indeksu bazy danych kontekstu
+tool.indexer.tab.ctx.last_meta_id = Ostatnie ctx meta ID
+tool.indexer.tab.ctx.last_meta_ts = Ostatnie ctx meta TS
+tool.indexer.tab.ctx.tip = Tutaj możesz masowo ponownie zindeksować całą bazę danych kontekstu lub zaktualizować dane z ostatniej masowej indeksacji.
+tool.indexer.tab.files = Pliki
+tool.indexer.tab.files.path.dir = Wybierz katalog:
+tool.indexer.tab.files.path.files = Wybierz plik(i):
+tool.indexer.tab.files.tip = Wybierz plik(i) lub katalog, aby umieścić pliki w wybranym indeksie. Ładowarka danych zostanie wybrana automatycznie na podstawie rozszerzenia pliku.
+tool.indexer.tab.web = Web
+tool.indexer.tab.web.cfg = Konfiguracja (ustawienia globalne) - Ustawienia -> Llama-index -> Ładowarki danych
+tool.indexer.tab.web.help = Pomoc
+tool.indexer.tab.web.loader = Ładowarka danych
+tool.indexer.tab.web.source = Źródło danych
+tool.indexer.tab.web.tip = Wybierz ładowarkę danych i zdefiniuj parametry ładowarki, aby osadzić zewnętrzne dane z internetu.
+tool.indexer.title = Indeksator
 toolbox.agent.auto_stop.label = Auto-stop
 toolbox.agent.iterations.label = Liczba kroków (iteracje, 0 = nieskończoność)
 toolbox.assistants.label = Asystenci
 toolbox.indexes.label = Indeksy
 toolbox.img_variants.label = Ilość wariantów obrazów do wygenerowania
 toolbox.mode.label = Tryb
 toolbox.model.label = Model
 toolbox.name.ai = Imię AI
 toolbox.name.user = Imię użytkownika
 toolbox.presets.label = Presety
 toolbox.prompt = Prompt systemowy
 toolbox.temperature.label = Temperatura
+untitled = Bez tytułu
 update.current_version = Twoja wersja
 update.download = Pobierz najnowszą wersję
 update.snap = Pobierz ze Snap Store
 update.info = Dostępna jest nowa wersja
 update.info.upgrade = Możesz teraz zaktualizować za pomocą:
 update.info.none = Posiadasz aktualną wersję
 update.new_version = Najnowsza wersja
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/data/locale/locale.ua.ini` & `pygpt_net-2.2.0/src/pygpt_net/data/locale/locale.uk.ini`

 * *Files 20% similar despite different names*

```diff
@@ -1,37 +1,54 @@
 [LOCALE]
 about.thanks = Особлива подяка спільноті GitHub
 action.add = Додати
+action.clear = Очистити
+action.copy = Копіювати
 action.ctx_copy_id = Копіювати ID
 action.ctx.indexed = Останнє індексування в
+action.ctx.new = Новий контекст...
+action.ctx.new.in_group = Новий контекст у: {group}...
+action.group.delete.only = Видалити (тільки групу)
+action.group.delete.all = Видалити все (разом з елементами)
+action.group.new = Нова група
+action.group.remove = Видалити з групи
+action.move_to = Перемістити до
 action.delete = Видалити
 action.download = Завантажити
 action.duplicate = Дублювати
 action.edit = Редагувати
 action.idx = Індексувати за допомогою Llama-index...
 action.idx.remove = Видалити з
 action.mkdir = Створити каталог...
 action.open = Відкрити
 action.open_dir = Відкрити в директорії...
+action.paste = Вставити
 action.pin = Прикріпити зверху
+action.profile.delete = Видалити профіль (лише зі списку)
+action.profile.delete_all = Видалити профіль (і всі файли користувача)
 action.unpin = Відкріпити
 action.refresh = Оновити
 action.rename = Перейменувати
 action.redo = Повторити
+action.restore = Відновити
 action.save = Зберегти
 action.save_as = Зберегти як...
+action.save_selection_as = Зберегти вибір як...
+action.select_all = Вибрати все
 action.touch = Створити файл...
 action.truncate = Очистити все
 action.undo = Скасувати
 action.upload = Завантажте файли тут...
 action.use = Використовуйте
 action.use.attachment = Як вкладення
 action.use.copy_work_path = Копіювати робочий шлях
 action.use.copy_sys_path = Копіювати системний шлях
 action.use.read_cmd = Попросіть прочитати цей файл...
+action.video.open = Відкрити відео або аудіо...
+action.video.play = Відтворити відео або аудіо...
 alert.preset.empty_id = Назва є обов'язковою.
 alert.preset.no_chat_completion = Потрібно хоча б одне з: чат, завершення, зображення або візуальна опція!
 alert.snap.file_manager = Виявлено Snap. Будь ласка, відкрийте директорію вручну у вашому файловому менеджері:
 alert.title = Інформація
 agent.infinity.confirm.content = ПОПЕРЕДЖЕННЯ: Ви намагаєтеся запустити нескінченний цикл! Це може призвести до інтенсивного використання токенів. Ви впевнені, що хочете продовжити?
 assistant.action.delete = Видалити
 assistant.action.duplicate = Дублікувати
@@ -47,24 +64,35 @@
 assistant.model = Модель
 assistant.name = Ім'я
 assistant.new = Створити
 assistant.new.id_tip = Залиште порожній ID, якщо ви створюєте нового помічника.\n...або вкажіть ID з OpenAI, якщо помічник уже існує на сервері.
 assistant.run.completed = Виконання: Завершено
 assistant.run.failed = Виконання: Помилка
 assistant.run.listening = Виконання: в процесі...
-assistant.tool.code_interpreter = Інструмент: інтерпретатор коду
+assistant.store.id = ID
+assistant.store.files.suffix = Файли
+assistant.store.name = Назва
+assistant.store.expire_days = Дні до закінчення
+assistant.store.status = Статус
+assistant.store.hide_threads = Приховати векторні сховища тем
+assistant.store.thread_only = (лише поточний потік)
+assistant.tool.code_interpreter = Iнтерпретатор коду
 assistant.tool.function = Інструмент: функція
 assistant.tool.retrieval = Інструмент: пошук
+assistant.tool.file_search = Чат з файлами
+assistant.vector_store = Векторне сховище
+attachments.header.store = Векторне(і) сховище(а)
 attachments.btn.add = Додати файл
 attachments.btn.clear = Очистити файли
 attachments.capture_clear = Очистити під час захоплення
 attachments.clear.confirm = Очистити список?
 attachments.delete.confirm = Видалити файл зі списку?
 attachments.header.name = Ім'я
 attachments.header.path = Шлях
+attachments.header.size = Розмір
 attachments.send_clear = Очистити список після відправлення
 attachments.tab = Вкладення
 attachments_uploaded.btn.clear = Очистити файли
 attachments_uploaded.btn.sync = Синхронізація
 attachments_uploaded.clear.confirm = ПОПЕРЕДЖЕННЯ: ви впевнені, що хочете видалити всі ці файли з віддаленого сервера?
 attachments_uploaded.delete.confirm = ПОПЕРЕДЖЕННЯ: ви впевнені, що хочете видалити файл з віддаленого сервера?
 attachments_uploaded.sync.tip = Підказка: натисніть "Синхронізація", щоб отримати список файлів з OpenAI
@@ -77,75 +105,142 @@
 audio.speak.btn.tooltip = Натисніть, щоб почати слухання через мікрофон
 audio.speak.btn.stop.tooltip = Натисніть, щоб закінчити слухання через мікрофон
 audio.speak.ignoring = Ігнорування (без префіксу)
 audio.speak.now = Говоріть зараз...
 audio.speak.wait = Зачекайте...
 audio.speak.sending = Відправка...
 audio.speak.energy = Гучність мікрофона
+audio.transcribe.title = Транскрипція аудіо
+audio.transcribe.tip = Порада: натисніть "Відкрити...", щоб почати транскрипцію аудіо з файлу. Буде використано провайдера звукового введення з налаштувань плагіна.
+audio.transcribe.open = Відкрити аудіо/відео файл та транскрибувати...
+audio.transcribe.confirm = Ви впевнені, що хочете транскрибувати цей аудіо/відео файл?
+audio.transcribe.clear.confirm = Очистити поточне транскрибування?
+audio.transcribe.auto_convert = Завжди конвертувати відео до mp3 перед транскрибуванням (потрібен ffmpeg)
+audio.transcribe.result.finished = Завершено: {path}
+audio.transcribe.result.selected = Обраний файл: {path}
 calendar.day.search = Показати бесіди
 calendar.day.label = Встановити колір етикетки...
 calendar.day.label.color.default = Стандартний
 calendar.day.label.color.red = Червоний
 calendar.day.label.color.orange = Помаранчевий
 calendar.day.label.color.yellow = Жовтий
 calendar.day.label.color.green = Зелений
 calendar.day.label.color.blue = Синій
 calendar.day.label.color.indigo = Індиго
 calendar.day.label.color.violet = Фіолетовий
 calendar.note.label = Замітка дня
+changed.confirm = Ви хочете зберегти зміни перед продовженням?
 chatbox.label = Чат
 chatbox.plugins = плагін(и)
 chat.prefix.attachment = Вкладення
 chat.prefix.file = Файл
 chat.prefix.img = Зображення
 chat.prefix.url = Посилання
+chat.name.user = Ви
+chat.name.bot = ШІ
 clipboard.copied = Скопійовано до буфера обміну.
+clipboard.copied_to = Скопійовано до буфера обміну:
 cmd.enabled = Виконувати команди
 cmd.tip = Порада: Щоб дозволити виконання команд з плагінів, які починаються з "Command:", ви повинні увімкнути опцію "Виконувати команди".
 coming_soon = Незабаром...
 confirm.assistant.delete = Видалити помічника?
 confirm.assistant.import = Імпортувати всіх помічників з API?
-confirm.assistant.import_files = Імпортувати всі файли для цього помічника з API?
+confirm.assistant.files.truncate = Ви впевнені, що хочете видалити всі файли з усіх помічників?
+confirm.assistant.import_files = Імпортувати всі файли з API?
+confirm.assistant.store.import = Імпортувати всі векторні сховища з API?
+confirm.assistant.store.truncate = Видалити всі векторні сховища в API?
+confirm.assistant.store.clear = Очистити векторні сховища (тільки локально)?
+confirm.assistant.files.clear = Очистити файли (тільки локально)?
+confirm.assistant.store.refresh = Оновити всі векторні сховища?
 confirm.img.delete = Видалити файл з диска?
 confirm.preset.clear = Ви впевнені, що хочете очистити пресет?
 confirm.preset.delete = Ви впевнені, що хочете видалити цей пресет?
 confirm.preset.overwrite = Пресет існує. Перезаписати?
 confirm.preset.restore = Відновити стандартний пресет для цього режиму?
+confirm.profile.delete = Ви впевнені, що хочете видалити профіль? Він буде видалений лише зі списку.
+confirm.profile.delete_all = Ви впевнені, що хочете видалити профіль разом зі всіма конфігураційними файлами та файлами даних користувача у робочій директорії профілю?
+confirm.profile.reset = Ви впевнені, що хочете відновити профіль до налаштувань за замовчуванням? УВАГА: Всі файли конфігурації та база даних контекстів будуть видалені! Директорія даних залишиться - щоб видалити її, вам доведеться зробити це вручну або скористатися опцією видалення.
 context.btn.clear = Очистити пам'ять
 context.items = елементи
 context.label = Контекст
 context.tokens = токени
 ctx.delete.all.confirm = Ви впевнені, що хочете видалити ВСІ контексти історії?
 ctx.delete.confirm = Ви впевнені, що хочете видалити?
+ctx.delete.item.confirm = Видалити елемент розмови?
+ctx.delete.item.link = видалити
+ctx.extra.audio = Читати відповідь (аудіо)
+ctx.extra.copy = Скопіювати до буфера обміну
+ctx.extra.copy_code = скопіювати в буфер обміну
+ctx.extra.join = Долучити до попередньої відповіді (об'єднати)
+ctx.extra.reply = Згенерувати відповідь знову (з цього місця)
+ctx.extra.edit = Редагувати та згенерувати знову (з цього місця)
+ctx.extra.delete = Видалити цей елемент
+ctx.join.item.confirm = Долучити цю відповідь до попередньої відповіді (об'єднати елементи)?
 ctx.list.label = Контекст та історія
 ctx.list.search.placeholder = Пошук...
 ctx.new = Новий...
 ctx.new.prefix = Новий
+ctx.replay.item.confirm = Згенерувати відповідь знову з цього місця?
 ctx.tokens = токени
+db.backup = Автоматичний бекап
+db.backup.tip = Створіть резервну копію перед кожним видаленням/обрізанням/оновленням
+db.limit = Ліміт
+db.next = Наступний
+db.page = Сторінка
+db.prev = Попередній
+db.refresh = Оновити
+db.sort = Сортувати за
+db.order = Порядок
+db.search = Пошук
+db.search_in = у
+db.search.placeholder = Шукати...
+db.time_convert = Конвертувати час()
+db.time_convert.tip = Конвертувати стовпці міток часу до формату РРРР-ММ-ДД ГГ:ХХ:СС
+db.table = Таблиця:
 dialog.about.build = Будівництво
 dialog.about.docs = Документація
 dialog.about.email = Електронна пошта
 dialog.about.github = GitHub
 dialog.about.title = Про програму
 dialog.about.version = Версія
 dialog.about.website = Офіційний сайт
 dialog.assistant = Створити / Редагувати помічника
 dialog.assistant.btn.current = Використовувати поточний
-dialog.assistant.btn.save = Додати / оновити
+dialog.assistant.btn.close = Скасувати
+dialog.assistant.btn.save = Зберегти
+dialog.assistant.btn.store = Векторні сховища
+dialog.assistant.store = Векторні сховища помічників
+dialog.assistant.store.btn.close = Скасувати
+dialog.assistant.store.btn.new = Створити
+dialog.assistant.store.btn.save = Зберегти
+dialog.assistant.store.btn.refresh_status = Оновити статус
+dialog.assistant.store.delete.confirm = Ви впевнені, що хочете видалити векторне сховище помічника?
+dialog.assistant.store.menu.import = Імпортувати все
+dialog.assistant.store.menu.refresh_store = Оновити все
+dialog.assistant.store.menu.clear_store = Очистити векторні сховища (тільки локально)
+dialog.assistant.store.menu.clear_files = Очистити файли (тільки локально)
+dialog.assistant.store.menu.truncate_store = Очистити сховища (локально + віддалено)
+dialog.assistant.store.menu.truncate_files = Очистити файли (локально + віддалено)
 dialog.changelog.title = Список змін
 dialog.confirm.no = Ні
 dialog.confirm.title = Підтвердження
 dialog.confirm.yes = Так
 dialog.create.dismiss = Скасувати
 dialog.create.title = Назва
 dialog.create.update = Створити
+dialog.css.restore.confirm = Відновити CSS за замовчуванням? (усі зміни в користувацьких файлах CSS будуть переміщені до файлів .backup)
+dialog.css.restore.confirm.success = ОК. Відновлено до стилів CSS за замовчуванням.
 dialog.editor.btn.defaults = Відновити
+dialog.editor.btn.defaults.app = Завантажити стандартні
 dialog.editor.btn.save = Зберегти
 dialog.editor.label = Редагування файлу конфігурації - перезапуск додатка необхідний для перезавантаження змін.
 dialog.editor.title = Редагувати JSON/CSS файл
+dialog.find.btn.clear = Очистити
+dialog.find.btn.find_prev = Знайти попереднє
+dialog.find.btn.find_next = Знайти наступне
 dialog.image.title = Згенероване зображення
 dialog.license.title = Ліцензія
 dialog.license.label = Використовуючи це програмне забезпечення, ви приймаєте наступні умови:
 dialog.license.accept = Згоден
 dialog.logger.btn.clear = Очистити
 dialog.logger.title = Логер
 dialog.plugin_settings = Налаштування плагінів
@@ -155,28 +250,68 @@
 dialog.plugin.settings.defaults.app.confirm = Завантажити заводські налаштування плагіну?
 dialog.plugin.settings.defaults.app.result = Повернуто до заводських налаштувань плагіну.
 dialog.plugin.settings.defaults.user.confirm = Відмінити поточні зміни?
 dialog.plugin.settings.defaults.user.result = Відновлено конфігурацію користувача плагіну
 dialog.preset = Редактор пресетів
 dialog.preset.btn.current = Використовувати поточний
 dialog.preset.btn.save = Зберегти
+dialog.preset.plugins.editor = Редактор пресетів плагінів
+dialog.profile.alert.delete.current = Неможливо видалити поточний активний профіль!
+dialog.profile.alert.name.empty = Назва не може бути пустою!
+dialog.profile.alert.path.same = Шляхи джерела та призначення збігаються! Скасовано.
+dialog.profile.alert.path.empty = Шлях до робочої директорії не може бути пустим!
+dialog.profile.alert.path.not_exists = Директорія не існує!
+dialog.profile.alert.duplicate.not_empty = Директорія не порожня та не містить попередньої конфігурації! Скасування.\n\nПідказка: оберіть існуючу робочу директорію або порожню, щоб створити в ній нову робочу директорію.
+dialog.profile.alert.src.empty = Джерельний профіль не знайдено! Скасовано.
+dialog.profile.checkbox.include_db = + база даних
+dialog.profile.checkbox.include_datadir = + каталог "data"
+dialog.profile.checkbox.switch = Перейти до створеного профілю
+dialog.profile.editor = Профілі
+dialog.profile.item.editor = Профіль
+dialog.profile.item.btn.dismiss = Скасувати
+dialog.profile.item.btn.create = Створити
+dialog.profile.item.btn.update = Оновити
+dialog.profile.item.btn.duplicate = Дублювати тут
+dialog.profile.name.label = Назва профілю
+dialog.profile.new = Новий профіль
+dialog.profile.status.changed = Профіль змінено на
+dialog.profile.status.created = Профіль створено.
+dialog.profile.status.updated = Профіль оновлено.
+dialog.profile.status.deleted = Профіль видалено
+dialog.profile.status.duplicated = Профіль дубльовано.
+dialog.profile.status.removed = Профіль видалено зі списку
+dialog.profile.tip = Створюючи нові профілі, ви можете використовувати окремі налаштування, різні історії контекстів та дані користувачів, а також швидко перемикатися між ними.
+dialog.profile.workdir.label = Робоча директорія (директорія для конфігураційних файлів та даних користувача)
 dialog.rename.dismiss = Скасувати
 dialog.rename.title = Змінити назву
 dialog.rename.update = Оновити назву
 dialog.settings = Налаштування
 dialog.settings.btn.defaults.user = Відмінити зміни
 dialog.settings.btn.defaults.app = Завантажити стандартні
 dialog.settings.btn.save = Зберегти
 dialog.settings.defaults.user.result = Відновлено користувацькі налаштування
 dialog.settings.defaults.app.result = Відновлено до заводських налаштувань. Попередні налаштування збережені в: config.json.backup.
 dialog.start.btn = Перейти до налаштувань...
 dialog.start.link = https://platform.openai.com/account/api-keys
 dialog.start.settings.text = Якщо у вас вже є API КЛЮЧ, то ви можете налаштувати його у вікні налаштувань.\nНатисніть на кнопку ПЕРЕЙТИ ДО НАЛАШТУВАНЬ, а потім вставте свій API КЛЮЧ у поле API КЛЮЧ.
 dialog.start.title = API КЛЮЧ ще не налаштований
 dialog.start.title.text = Ваш API ключ ще не налаштований...\nВи отримаєте API ключ, зареєструвавшись на сайті OpenAI:
+dialog.workdir.tip = Виберіть каталог з диску та натисніть 'Змінити/Перемісти...', щоб перемістити поточний робочий каталог до обраного, або встановити поточний робочий каталог на існуючий. Необхідний вільний простір на диску (для переміщення): {size}
+dialog.workdir.reset.btn = Поточний
+dialog.workdir.update.btn = Змінити/Перемістити...
+dialog.workdir.change.confirm = Ви впевнені, що хочете змінити/перемістити робочий каталог до:\n{path}?
+dialog.workdir.change.empty.alert = Каталог не порожній! Операцію скасовано.
+dialog.workdir.update.confirm = ІСНУЮЧИЙ РОБОЧИЙ КАТАЛОГ: Каталог "{path}" не порожній і вже містить дані з іншого робочого каталогу. Чи хочете ви ЛИШЕ встановити цей існуючий каталог як поточний робочий каталог (без переміщення даних)?
+dialog.workdir.title = Зміна робочого каталогу
+dialog.workdir.result.no_free_space = Занадто мало місця на диску! Потрібно: {required}, Вільне місце: {free}.
+dialog.workdir.result.same_directory = Немає чого переміщувати.
+dialog.workdir.result.success = [OK] Поточний робочий каталог встановлено: {path}
+dialog.workdir.result.failed = Під час переміщення робочого каталогу сталася помилка.
+dialog.workdir.result.wait = Будь ласка, зачекайте... переміщення поточного робочого каталогу... Це може зайняти деякий час...
+dialog.workdir.result.directory_not_exists = Кінцевий каталог не існує!
 dt.days_ago = днів тому
 dt.month = місяць тому
 dt.today = сьогодні
 dt.week = тиждень тому
 dt.weeks = тижнів тому
 dt.yesterday = вчора
 error.assistant_not_selected = Будь ласка, спершу створіть, імпортуйте або оберіть помічника!
@@ -185,15 +320,17 @@
 files.delete.confirm = Видалити файл/директорію?
 files.delete.recursive.confirm = Каталог не порожній! Ви впевнені, що хочете видалити каталог та всі файли в ньому?
 files.explorer.header.name = Ім'я
 files.explorer.header.size = Розмір
 files.explorer.header.type = Тип
 files.explorer.header.modified = Дата зміни
 files.explorer.header.indexed = Індексовано на
+filter.ctx.counters.all = Усі лічильники
 filter.ctx.label = Фільтр відображення списку контекстів
+filter.ctx.label.colors = Показувати за мітками
 filter.ctx.radio.all = Всі
 filter.ctx.radio.pinned = Прикріплені
 filter.ctx.radio.labeled = Позначені
 filter.ctx.radio.indexed = Індексовано (llama-index)
 header.assistant.tool.function.name = Назва
 header.assistant.tool.function.params = Параметри (JSON)
 header.assistant.tool.function.desc = Опис
@@ -213,15 +350,15 @@
 idx.status.empty = Нічого не індексовано.
 idx.status.error = [ПОМИЛКА] Нічого не індексовано.
 idx.status.indexing = Індексування... будь ласка, зачекайте...
 idx.status.success = [УСПІХ] Індексовані елементи:
 idx.status.truncating = Видалення індексу... будь ласка, зачекайте...
 idx.status.truncate.success = [OK] Індекс скорочено.
 idx.status.truncate.error = [ПОМИЛКА] Індекс не скорочено.
-idx.token.warn = Це призведе до використання додаткових токенів для вбудовування даних (буде використано модель text-embedding-ada-002)
+idx.token.warn = Це призведе до використання додаткових токенів для вбудовування даних.
 img.status.downloading = Завантаження... 
 img.status.error = Помилка генерації зображення
 img.status.finished = Зображення згенеровано і завантажено.
 img.status.generating = Будь ласка, зачекайте... генерується зображення з
 img.status.prompt.error = Помилка генерування запиту зображення моделлю
 img.status.prompt.wait = Запит на зображення... будь ласка, зачекайте...
 img.status.save.error = Помилка збереження зображення
@@ -230,64 +367,99 @@
 img.raw = Режим сирця
 img.save.title = Зберегти зображення
 info.settings.all.saved = Усі налаштування збережені
 info.settings.saved = Налаштування збережені
 inline.vision = Режим візії
 input.btn.send = Відправити
 input.btn.stop = Зупинити
+input.btn.cancel = Скасувати
+input.btn.update = Оновити
 input.label = Вхід (Ваш запит)
 input.radio.enter = Введення
 input.radio.enter_shift = Shift+Enter
 input.radio.none = Вимкнено
 input.send_clear = Очистити після відправлення
 input.stream = Потік
 input.tab = Введення
+interpreter.all = Виконати історію (все)
+interpreter.auto_clear = Очистити при відправці
+interpreter.btn.clear = Очистити вивід
+interpreter.btn.send = Надіслати / виконати
+interpreter.clear.confirm = Очистити поточне вікно?
+interpreter.edit_label.edit = Код (історія)
+interpreter.edit_label.output = Вивід
+interpreter.edit = Режим редагування
+interpreter.input.placeholder = Python код для виконання...
 menu.audio = Аудіо / Голос
 menu.audio.input = Введення: розпізнавання мови
 menu.audio.output = Вивід: синтез мови
 menu.config = Конфігурація
 menu.config.edit.config = Редагувати config.json...
 menu.config.edit.models = Редагувати models.json...
 menu.config.edit.css = Редагувати CSS-стилі...
-menu.config.open_dir = Відкрити робочу директорію...
+menu.config.open_dir = Відкрити робочий каталог...
+menu.config.change_dir = Змінити робочий каталог...
+menu.config.profile = Профіль
+menu.config.profile.edit = Редагувати профілі...
+menu.config.profile.new = Новий профіль...
 menu.config.save = Зберегти конфігурацію
 menu.config.settings = Налаштування...
+menu.config.edit.css.restore = Відновити CSS за замовчуванням...
 menu.debug = Відладка
 menu.debug.assistants = Помічники...
 menu.debug.attachments = Файли / вкладення...
 menu.debug.config = Конфігурація...
 menu.debug.context = Контекст...
+menu.debug.indexes = Індекси...
 menu.debug.logger = Логер
 menu.debug.models = Моделі...
 menu.debug.plugins = Плагіни...
 menu.debug.presets = Пресети...
-menu.debug.ui = Інтерфейс користувача...
+menu.debug.app.log = Переглянути файл логів (app.log)
+menu.debug.agent = Агент...
+menu.debug.db = Переглядач БД
+menu.debug.ui = UI...
 menu.file = Файл
 menu.file_clear_history = Видалити історію
+menu.file_clear_history_groups = Видалити історію (+ групи)
+menu.file.current = Вибрати поточний
 menu.file.exit = Вийти
 menu.file.new = Новий контекст...
+menu.file.group.new = Нова група контексту...
 menu.info = Про програму
 menu.info.about = Про програму
 menu.info.changelog = Список змін
 menu.info.docs = Документація
+menu.info.donate = Підтримайте/зробіть пожертву
 menu.info.github = GitHub проект
 menu.info.license = Ліцензія
 menu.info.pypi = PyPi
 menu.info.snap = Snap магазин
 menu.info.updates = Перевірка оновлень...
 menu.info.website = Офіційний сайт - pygpt.net
 menu.lang = Мова
 menu.plugins = Плагіни
+menu.plugins.presets = Пресети...
+menu.plugins.presets.edit = Редагувати пресети...
+menu.plugins.presets.new = Новий пресет...
 menu.plugins.settings = Налаштування...
 menu.theme = Тема
 menu.theme.dark = Темний колір...
 menu.theme.light = Світлий колір...
+menu.theme.syntax = Підсвітка синтаксису коду...
 menu.theme.density = Розмір компонування
 menu.theme.tooltips = Показувати підказки
 menu.theme.settings = Налаштування...
+menu.theme.blocks = Показати блоки
+menu.tools = Інструменти
+menu.tools.audio.transcribe = Транскрибувати аудіо/відео файли
+menu.tools.interpreter = Інтерпретатор коду Python
+menu.tools.media.player = Медіаплеєр
+menu.tools.image.viewer = Переглядач зображень
+menu.tools.text.editor = Редактор текстів
 menu.tray.notepad = Відкрити Блокнот...
 menu.tray.screenshot = Запитати зі скріншотом...
 menu.tray.scheduled = Заплановані завдання
 menu.video = Відео
 menu.video.capture = Вхід: камера
 menu.video.capture.auto = Автоматичне захоплення зображення
 mode.agent = Агент (автономний)
@@ -308,14 +480,15 @@
 mode.vision.tooltip = Аналіз зображень за допомогою GPT-4 Vision
 notify.agent.goal.title = Мету досягнуто
 notify.agent.goal.content = Агент: мету досягнуто.
 notify.agent.stop.title = Завершено
 notify.agent.stop.content = Агент: зупинено
 notify.cron.title = Виконання запланованого завдання
 notify.update.title = Доступна нова версія
+output.edit = Редагувати
 output.raw = Plain text
 output.tab.calendar = Календар
 output.tab.chat = Чат
 output.tab.files = Файли
 output.tab.notepad = Блокнот
 output.timestamp = Показати час
 output.tab.painter = Малювати
@@ -338,87 +511,115 @@
 preset.filename = ID (ім'я файлу)
 preset.img = Зображення
 preset.langchain = Langchain
 preset.llama_index = Чат з файлами
 preset.name = Ім'я пресета
 preset.new = Створити
 preset.prompt = Системний запит
+preset.prompt.paste_template: Вставити з шаблону...
 preset.temperature = Температура
 preset.untitled = (без назви)
 preset.use = Використовувати
 preset.user_name = Ім'я користувача
 preset.vision = Оптика
+profile.current.suffix = (поточний)
 screenshot.capture.name.prefix = Скріншот з
 settings.advanced.collapse = Показати/сховати додаткові опції
 settings.agent.mode = Внутрішній режим
 settings.agent.mode.desc = Внутрішній режим для використання в режимі Агента (чат, завершення, langchain, llama_index тощо)
 settings.agent.goal.notify = Показати сповіщення в системному треї, коли мета досягнута.
 settings.agent.idx = Індекс
 settings.agent.idx.desc = Тільки якщо внутрішній режим є llama_index (Чат з файлами), виберіть індекс для використання в режимі Агента
+settings.api_endpoint = Кінцева точка API
+settings.api_endpoint.desc = URL кінцевої точки API OpenAI, за замовчуванням: https://api.openai.com/v1
 settings.api_key = OpenAI API КЛЮЧ
 settings.check_updates = Перевіряти оновлення при запуску
 settings.check_updates.bg = Перевіряти оновлення у фоновому режимі
-settings.cmd.prompt = Запит (додати): інструкція для виконання команди
 settings.context_threshold = Поріг контексту
+settings.ctx.audio = Завжди показувати значок аудіо
 settings.ctx.auto_summary = Автоматичне стиснення контексту
-settings.ctx.auto_summary.prompt = Запит (користувач): автоматичне стиснення
-settings.ctx.auto_summary.system = Запит (система): автоматичне стиснення
 settings.ctx.auto_summary.model = Модель, що використовується для автоматичного стиснення
+settings.ctx.code_interpreter = Показати вивід інтерпретатора коду
+settings.ctx.code_interpreter.desc = Якщо включено, результати інтерпретатора коду в API Асистента будуть відображатися в реальному часі (в режимі потоку).
+settings.ctx.convert_lists = Конвертувати списки в абзаци
+settings.ctx.copy_code = Показати "копіювати до буфера обміну" у блоках коду
 settings.ctx.records.limit = Обмеження останніх контекстів у списку (0 = безлімітно)
 settings.ctx.search_content = Шукати також у вмісті розмов, не лише в заголовках
 settings.ctx.search.desc = Увімкнути пошук також у вмісті елементів контексту
+settings.ctx.sources = Показати джерела індексу Llama
+settings.ctx.sources.desc = Якщо включено, використані джерела будуть відображатися в відповіді (якщо доступно, не працюватиме в потоковому чаті)
 settings.defaults.app.confirm = Завантажити заводські налаштування додатку?
 settings.defaults.user.confirm = Відмінити поточні зміни?
 settings.dict.delete.confirm = Видалити елемент зі списку?
 settings.download.dir = Директорія для завантаження файлів
 settings.download.dir.desc = Піддиректорія для завантажених файлів, наприклад, у режимі помічників, всередині "data"
 settings.font_size.tip = Підказка: Ви можете змінити розмір шрифту, використовуючи CTRL + Колесо миші
-settings.font_size = Розмір шрифту (вікно чату)
+settings.font_size = Розмір шрифту (звичайний текст чату, блокноти)
 settings.font_size.ctx = Розмір шрифту (список ctx)
 settings.font_size.input = Розмір шрифту (введення)
 settings.font_size.toolbox = Розмір шрифту (панель інструментів)
 settings.frequency_penalty = Частотний штраф
-settings.img_prompt = DALL-E: Запит (система): генерація запиту
 settings.img_prompt_model = DALL-E: модель генерації запиту
 settings.img_resolution = DALL-E: розмір зображення
 settings.img_quality = DALL-E: якість зображення
 settings.img_dialog_open = Відкрити діалогове вікно зображення після генерації (Режим зображення)
 settings.layout.density = Щільність компонування
 settings.layout.dpi.scaling = Масштабування DPI
 settings.layout.dpi.factor = Коефіцієнт DPI
 settings.layout.dialog.geometry.store = Зберегти позиції діалогових вікон
 settings.layout.minimized = Запускати мінімізовано
 settings.layout.tooltips = Відображати поради (описи допомоги)
 settings.layout.tray = Показати значок у системному треї
 settings.layout.tray.desc = Необхідний перезапуск. Значок у системному треї надає додаткові функції, такі як "Запитати зі скріншотом" або "Відкрити блокнот".
 settings.layout.tray.minimize = Мінімізувати в трей при виході
 settings.layout.tray.minimize.desc = Для роботи цієї опції необхідно ввімкнути значок у треї.
-settings.llama.idx.excluded_ext = Виключені розширення
-settings.llama.idx.excluded_ext.desc = Розширення для виключення, якщо немає завантажувача даних для цього розширення, розділені комою
+settings.llama.idx.custom_meta = Користувацькі метадані для додавання/заміни в індексованих документах
+settings.llama.idx.custom_meta.desc = Визначте користувацькі поля метаданих ключ => значення для певних розширень файлів, розділіть розширення комою.\nДозволені заповнювачі: {path}, {relative_path} {filename}, {dirname}, {relative_dir} {ext}, {size}, {mtime}, {date}, {date_time}, {time}, {timestamp}
+settings.llama.idx.excluded.ext = Виключені розширення
+settings.llama.idx.excluded.ext.desc = Розширення для виключення, якщо немає завантажувача даних для цього розширення, розділені комою
+settings.llama.idx.excluded.force = Примусове виключення файлів
+settings.llama.idx.excluded.force.desc = Якщо включено, список виключень буде застосований навіть тоді, коли активний завантажувач даних для розширення.
 settings.llama.idx.list = Iндекси
 settings.llama.idx.recursive = Рекурсивне індексування каталогів
 settings.llama.idx.replace_old = Замініть старі версії документів у індексі під час переіндексації
 settings.llama.idx.replace_old.desc = Якщо включено, попередні версії документів будуть видалені з індексу, коли будуть проіндексовані найновіші версії / Snap
 settings.llama.idx.storage = Vector Store
 settings.llama.hub.loaders = Додаткові онлайн-завантажувачі даних для використання (LlamaHub) - тільки для версії Python, не працюватимуть у скомпільованій та версії Snap.
-settings.llama.extra.api.warning = Попередження: пам'ятайте, що під час індексації вмісту використовуються API-виклики до моделі вбудовування (text-embedding-ada-002). Кожна індексація споживає додаткові токени. Завжди контролюйте кількість використаних токенів на сторінці OpenAI!
+settings.llama.extra.api.warning = Попередження: пам'ятайте, що під час індексації вмісту використовуються API-виклики до моделі вбудовування. Кожна індексація споживає додаткові токени. Завжди контролюйте кількість використаних токенів на сторінці OpenAI!
 settings.llama.extra.db.never = (ніколи)
 settings.llama.extra.btn.idx_auto.index = ID індексу для автоіндексації
 settings.llama.extra.btn.idx_auto = Автоіндексація БД у реальному часі (на задньому плані розмови)
 settings.llama.extra.btn.idx_head = Натисніть тут, щоб індексувати файли або БД:
 settings.llama.extra.btn.idx_db_all = DB (все)
 settings.llama.extra.btn.idx_db_update = DB (оновлення)
 settings.llama.extra.btn.idx_files_all = файли (все)
 settings.llama.extra.legend = Легенда:\nDB (все) - переіндексує всю базу даних розмов\nDB (оновлення) - переіндексує базу даних лише з останнього індексування\nФайли (все) - проіндексує всі файли в директорії 'data'\nАвто-індексація DB - автоматично індексує у фоновому режимі всі нові розмови (додає лише нові дані)\n
 settings.lock_modes = Блокування несумісних режимів
 settings.max_output_tokens = Максимальна кількість токенів виходу
+settings.max_requests_limit = Ліміт RPM
+settings.max_requests_limit.desc = Вкажіть ліміт максимальної кількості запитів на хвилину (RPM), 0 = без обмежень
 settings.max_total_tokens = Максимальна загальна кількість токенів
 settings.notepad.num = Кількість блокнотів
 settings.organization_key = OpenAI ORGANIZATION KEY
 settings.presence_penalty = Штраф за наявність
+settings.prompt.agent.continue = Агент: продовжити
+settings.prompt.agent.continue.desc = Підказка, що надсилається для автоматичного продовження розмови
+settings.prompt.agent.goal = Агент: оновлення цілі
+settings.prompt.agent.goal.desc = Підказка, яка інструктує, як оновити поточний статус цілі
+settings.prompt.cmd = Виконання команди: інструкція
+settings.prompt.cmd.desc = Заповнювачі: {schema}, {extra}
+settings.prompt.cmd.extra = Виконання команди: додатковий низ (режими без Асистента)
+settings.prompt.cmd.extra.assistants = Виконання команди: додатковий низ (тільки режим Асистента)
+settings.prompt.cmd.extra.assistants.desc = Додаткові інструкції для відокремлення локальних команд від віддаленого середовища, яке вже налаштоване в Асистентах.
+settings.prompt.ctx.auto_summary.system = Контекст: авто-резюме (системний запит)
+settings.prompt.ctx.auto_summary.user = Контекст: авто-резюме (повідомлення користувача)
+settings.prompt.ctx.auto_summary.user.desc = Заповнювачі: {input}, {output}
+settings.prompt.img = DALL-E: генерація зображення
+settings.prompt.img.desc = Підказка для генерації команддля DALL-E (якщо вимкнено сирівний режим). Тільки режим зображення.
+settings.render.code_syntax = Стиль підсвічування синтаксису коду
 settings.render.plain = Вимкнути форматування markdown у виводі (режим простого тексту RAW)
 settings.restart.required = Для внесення змін у цю опцію необхідно перезапустити програму.
 settings.section.agent = Агент (автономний)
 settings.section.files = Файли та вкладення
 settings.section.general = Загальні
 settings.section.layout = Макет
 settings.section.ctx = Контекст
@@ -443,14 +644,16 @@
 settings.vision.capture.idx = IDX камери (число)
 settings.vision.capture.width = Ширина захоплення з камери (пікселі)
 settings.vision.capture.quality = Якість захоплення зображення (%%)
 speech.enable = Говоріть
 speech.listening = Говоріть зараз...
 status.assistant.deleted = Помічник видалений
 status.assistant.saved = Помічник оновлений
+status.audio.start = Генерація аудіо, будь ласка, зачекайте...
+status.audio.stopped = Відтворення аудіо зупинено.
 status.cmd.wait = Виконання команди... будь ласка, зачекайте...
 status.deleted = Видалено
 status.error = Ой... Виникла помилка :(
 status.finished = Завершено.
 status.img.generated = Зображення було згенеровано.
 status.img.saved = Зображення збережено
 status.preset.cleared = Пресет очищено
@@ -467,14 +670,15 @@
 status.uploaded = Файли завантажено
 status.uploading = Вивантаження файлів...
 text.context_menu.audio.read = Читати вибраний текст (синтез мовлення)...
 text.context_menu.copy_to = Копіювати до...
 text.context_menu.copy_to.calendar = Календар
 text.context_menu.copy_to.notepad = Блокнот
 text.context_menu.copy_to.input = Введення
+text.context_menu.find = Знайти...
 tip.tokens.ctx = Контекст (пам'ять): використано / всього - токени
 tip.tokens.input = Токени: введений запит + системний запит + контекст + додатково = сума / максимум
 tip.output.tab.files = Ця директорія робочих файлів знаходиться на вашому диску. Файли тут доступні для ШІ для читання. ШІ може читати і записувати файли, а також виконувати код з цієї директорії. Ви можете відкрити цю директорію локально на вашій системі та розмістити будь-які файли тут. Ви також можете індексувати файли за допомогою Llama-index, щоб вони служили додатковим джерелом знань.
 tip.output.tab.draw = Ви можете використовувати інструмент малювання для швидкого скетчингу або захоплення зображення з камери, а потім надсилати такі зображення ШІ у режимі Vision для аналізу. Ви можете захопити зображення за допомогою камери тут або відкрити зображення з диску. При використанні зображення, воно буде включене в наді слане повідомлення як вкладення.
 tip.output.tab.notepad = Блокнот може слугувати інструментом для роблення нотаток та зберігання інформації. Ви можете зберігати тут будь-який текст, копіювати текст з вікна чату, і всі інформація буде автоматично збережена. Ви можете створити більше блокнотів за допомогою опції конфігурації в налаштуваннях.
 tip.output.tab.calendar = Використовуючи календар, ви можете повертатись до обраних розмов з певного дня. Натисніть на день у календарі, щоб обмежити відображення історії чату до цього дня. Ви також можете створювати денні нотатки та присвоювати їм кольорові мітки.
 tip.input.attachments = Тут ви можете додати вкладення до повідомлення, яке ви відправляєте, якщо режим це підтримує. Тут ви можете відправляти файли для аналізу у режимі Асистента або зображення та захоплені зображення з камери для аналізу у режимі Vision.
@@ -483,26 +687,67 @@
 tip.toolbox.prompt = Поточний системний запит можна змінювати в реальному часі. Щоб виконувати команди з плагінів, увімкніть опцію "Виконувати команди".
 tip.toolbox.assistants = Список асистентів показує асистентів, створених і що працюють на віддаленому сервері. Будь-які зміни будуть синхронізовані з віддаленим асистентом.
 tip.toolbox.indexes = Індексуючи розмови та файли, ви можете розширити доступні знання зі своїми власними даними та історією розмов.
 tip.toolbox.ctx = Створіть стільки контекстів розмов, як вам потрібно; ви можете повернутися до них у будь-який час.
 tip.toolbox.mode = Ви можете змінити робочий режим та модель в реальному часі.
 theme.dark = Темна
 theme.light = Світла
+tool.indexer = Індексатор...
+tool.indexer.alert.no_files = Не вибрано жодного файлу чи каталогу!
+tool.indexer.alert.no_loader = Не вибрано завантажувач даних!
+tool.indexer.alert.no_idx = Не вибрано індекс!
+tool.indexer.confirm.idx = Виконати індексацію?
+tool.indexer.confirm.remove = Видалити елемент з індексу?
+tool.indexer.db.copy = Скопіювати значення до буферу обміну
+tool.indexer.db.remove = Видалити елемент
+tool.indexer.idx = Індекс
+tool.indexer.idx.btn.add = Додати до індексу
+tool.indexer.loaders = Доступні завантажувачі даних
+tool.indexer.menu.file.clear_log = Очистити лог
+tool.indexer.menu.file.remove_idx = Видалити індекс
+tool.indexer.menu.config.settings = Налаштування
+tool.indexer.option.clear = Очистити список файлів після індексації
+tool.indexer.option.recursive = Рекурсивно (включити підкаталоги)
+tool.indexer.option.replace = Видалити стару версію документа з індексу (якщо вона існує)
+tool.indexer.status = Вихідний лог (Llama-index):
+tool.indexer.tab.browser = Переглянути idx
+tool.indexer.tab.browse.tip = Переглядати або видалити поточно проіндексовані елементи (тут відображається відображення бази даних на індекс).
+tool.indexer.tab.ctx = Контекст
+tool.indexer.tab.ctx.auto.yes = ТАК
+tool.indexer.tab.ctx.auto.no = НІ
+tool.indexer.tab.ctx.auto_enabled = Авто-індексація включена
+tool.indexer.tab.ctx.idx.tip = Клікніть для масової переіндексації контекстної бази даних:
+tool.indexer.tab.ctx.last_auto = Останнє автоматичне оновлення пакетного індексу бази даних контексту
+tool.indexer.tab.ctx.last_meta_id = Останній ctx meta ID
+tool.indexer.tab.ctx.last_meta_ts = Останній ctx meta TS
+tool.indexer.tab.ctx.tip = Тут ви можете масово переіндексувати всю контекстну базу даних або оновити дані з останньої пакетної індексації.
+tool.indexer.tab.files = Файли
+tool.indexer.tab.files.path.dir = Вибрати каталог:
+tool.indexer.tab.files.path.files = Вибрати файли:
+tool.indexer.tab.files.tip = Виберіть файл(и) або каталог для вбудовування файлів у вибраний індекс. Завантажувач даних буде обрано автоматично на основі розширення файлу.
+tool.indexer.tab.web = Веб
+tool.indexer.tab.web.cfg = Конфігурація (глобальні налаштування) - Налаштування -> Llama-index -> Завантажувачі даних
+tool.indexer.tab.web.help = Допомога
+tool.indexer.tab.web.loader = Завантажувач даних
+tool.indexer.tab.web.source = Джерело даних
+tool.indexer.tab.web.tip = Виберіть завантажувач даних та визначте параметри завантажувача для вбудовування зовнішніх даних з вебу.
+tool.indexer.title = Індексатор
 toolbox.agent.auto_stop.label = Авто-стоп
 toolbox.agent.iterations.label = Кількість кроків (ітерації, 0 = нескінченність)
 toolbox.assistants.label = Помічники
 toolbox.indexes.label = Індекси
 toolbox.img_variants.label = Кількість варіантів зображень для генерації
 toolbox.mode.label = Режим
 toolbox.model.label = Модель
 toolbox.name.ai = Ім'я AI
 toolbox.name.user = Ім'я користувача
 toolbox.presets.label = Пресети
 toolbox.prompt = Системний запит
 toolbox.temperature.label = Температура
+untitled = Без назви
 update.current_version = Ваша версія
 update.download = Перейти до завантаження
 update.snap = Перейти до Snap Store
 update.info = Доступна нова версія
 update.info.upgrade = Ви можете оновити зараз за допомогою:
 update.info.none = Ваша версія актуальна
 update.new_version = Найновіша версія
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/data/locale/plugin.agent.pl.ini` & `pygpt_net-2.2.0/src/pygpt_net/data/locale/plugin.agent.pl.ini`

 * *Files 13% similar despite different names*

```diff
@@ -1,23 +1,20 @@
 [LOCALE]
 plugin.name = Autonomiczny Agent (inline)
 plugin.description = Włącza tryb autonomiczny (Agent) w aktualnie wybranym trybie rozmowy. UWAGA: Proszę używać z ostrożnością - ten tryb, w połączeniu z innymi wtyczkami, może prowadzić do nieoczekiwanych rezultatów!
 
 prompts.label = Prompty
-prompts.description = Prompty systemowe opisujące jak obsłużyć tryb autonomiczny. Możesz dodać wiele promptów, zostanie użyty pierwszy aktywny na liście.
+prompts.description = Prompty systemowe opisujące jak obsłużyć tryb autonomiczny. Możesz dodać wiele promptów, zostanie użyty pierwszy aktywny na liście. INFO: Co najmniej jeden aktywny prompt jest wymagany!
 prompts.tooltip = Prompty systemowe opisujące jak obsłużyć tryb autonomiczny.
 
 iterations.label = Iteracje
-iterations.description = Ile iteracji przeprowadzić? 0 = nieskończoność.\nUWAGA: ustawienie wartości na 0 może spowodować dużą ilość żądań i intensywne użycie tokenów!!!
-iterations.tooltip = Ile iteracji przeprowadzić? 0 = nieskończoność.\nUWAGA: ustawienie wartości na 0 może spowodować dużą ilość żądań i intensywne użycie tokenów!!!
+iterations.description = Ile iteracji przeprowadzić? 0 = nieskończoność.\nUWAGA: ustawienie wartości na 0 może spowodować dużą ilość żądań i intensywne użycie tokenów!
 
 reverse_roles.label = Zamień role między iteracjami
-reverse_roles.description = Jeżeli włączone, role zostaną zamienione między iteracjami (tylko tryb Completion/uzupełnianie)
+reverse_roles.description = Jeżeli włączone, role zostaną zamienione między iteracjami (tylko tryb Completion/uzupełnianie).
 reverse_roles.tooltip = Jeżeli włączone, role zostaną zamienione między iteracjami.
 
 auto_stop.label = Auto-stop po wykonaniu zadania
-auto_stop.description = Gdy włączone, plugin spróbuje zatrzymać działanie po wykonaniu zadania
-auto_stop.tooltip = Gdy włączone, plugin spróbuje zatrzymać działanie po wykonaniu zadania
+auto_stop.description = Gdy włączone, plugin spróbuje zatrzymać działanie po wykonaniu zadania.
 
 use_extended.label = Użyj rozszerzonego prompa
-use_extended.description = Gdy włączone, rozszerzony prompt zostanie użyty zamiast standardowego
-use_extended.tooltip = Gdy włączone, rozszerzony prompt zostanie użyty zamiast standardowego
+use_extended.description = Gdy włączone, rozszerzony prompt zostanie użyty zamiast standardowego.
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/data/locale/plugin.audio_input.pl.ini` & `pygpt_net-2.2.0/src/pygpt_net/data/locale/plugin.audio_input.pl.ini`

 * *Files 24% similar despite different names*

```diff
@@ -16,76 +16,61 @@
 
 auto_send.label = Automatyczne wysyłanie
 auto_send.description = Automatycznie wysyłaj prompta, gdy głos zostanie rozpoznany. Domyślnie: Wł.
 auto_send.tooltip = Automatycznie wysyłaj prompta, gdy głos zostanie rozpoznany. Domyślnie: Wł.
 
 continuous_listen.label = Nasłuch ciągły
 continuous_listen.description = OPCJA EKSPERYMENTALNA: ciągłe słuchanie - nie zatrzymuj słuchania po pojedynczym wejściu.\nOstrzeżenie: Ta funkcja może prowadzić do nieoczekiwanych wyników i wymaga precyzyjnego dostrojenia pozostałych opcji.
-continuous_listen.tooltip = OPCJA EKSPERYMENTALNA: ciągłe słuchanie - nie zatrzymuj słuchania po pojedynczym wejściu.\nOstrzeżenie: Ta funkcja może prowadzić do nieoczekiwanych wyników i wymaga precyzyjnego dostrojenia pozostałych opcji.
 
 magic_word.label = Magiczne słowo
 magic_word.description = Aktywuj słuchanie tylko po podaniu magicznego słowa, jak 'Hey GPT' lub 'OK GPT'. Domyślnie: Wył.
-magic_word.tooltip = Aktywuj słuchanie tylko po podaniu magicznego słowa, jak 'Hey GPT' lub 'OK GPT'. Domyślnie: Wył.
 
 magic_word_phrase_length.label = Maksymalna długość frazy magicznego słowa
 magic_word_phrase_length.description = Długość frazy dla magicznego słowa. Domyślnie: 2
-magic_word_phrase_length.tooltip = Długość frazy, domyślnie: 2
 
 magic_word_reset.label = Resetuj Magiczne Słowo
 magic_word_reset.description = Resetuj status magicznego słowa po jego przyjęciu (magiczne słowo będzie musiało zostać podane ponownie). Domyślnie: Wł.
-magic_word_reset.tooltip = Resetuj status magicznego słowa po jego przyjęciu (magiczne słowo będzie musiało zostać podane ponownie). Domyślnie: Wł.
 
 magic_word_timeout.label = Timeout dla magicznego słowa
-magic_word_timeout.description = Maksymalny czas oczekiwania na rozpoznanie magicznego słowa. Domyślnie: 1
-magic_word_timeout.tooltip = Maksymalny czas oczekiwania, domyślnie: 1
+magic_word_timeout.description = Maksymalny czas oczekiwania na rozpoznanie magicznego słowa. Domyślnie: 1.
 
 magic_words.label = Magiczne słowa
 magic_words.description = Określ magiczne słowa dla opcji 'Magiczne słowo': jeśli wykryte zostanie to słowo, wówczas zacznij słuchanie, wpisz słowa oddzielone przecinkiem, opcja Magiczne słowo musi być włączona, przykłady: "Hey GPT, OK GPT"
-magic_words.tooltip = Określ magiczne słowa dla opcji 'Magiczne słowo': jeśli wykryte zostanie to słowo, wówczas zacznij słuchanie, wpisz słowa oddzielone przecinkiem, opcja Magiczne słowo musi być włączona, przykłady: "Hey GPT, OK GPT"
 
 min_energy.label = Min. energia
-min_energy.description = Minimalny próg mnożnika powyżej poziomu szumu, aby zacząć nagrywanie; 1 = wyłączone. Domyślnie: 1.3
+min_energy.description = Minimalny próg mnożnika powyżej poziomu szumu, aby zacząć nagrywanie; 1 = wyłączone. Domyślnie: 1.3.
 min_energy.tooltip = Min. energia, domyślnie: 1.3, 1 = wyłączone, dostosuj do swojego mikrofonu
 
 whisper_model.label = Model
-whisper_model.description = Określ model, domyślnie: whisper-1
-whisper_model.tooltip = Określ model, domyślnie: whisper-1
+whisper_model.description = Określ model, domyślnie: whisper-1.
 
 phrase_length.label = Maksymalna długość frazy
-phrase_length.description = Długość rozpoznawanej frazy mowy. Domyślnie: 10
-phrase_length.tooltip = Maksymalna długość frazy, domyślnie: 10
+phrase_length.description = Długość rozpoznawanej frazy mowy. Domyślnie: 10.
 
 prefix_words.label = Słowa przedrostkowe
 prefix_words.description = Określ słowa przedrostkowe: jeśli zdefiniowane, tylko frazy zaczynające się tymi słowami będą transmitowane, a reszta zostanie zignorowana. Oddziel słowa przecinkiem, np. 'OK, Dobrze, GPT'. Pozostaw puste, aby wyłączyć funkcję
-prefix_words.tooltip = Określ słowa przedrostkowe: jeśli zdefiniowane, tylko frazy zaczynające się tymi słowami będą transmitowane, a reszta zostanie zignorowana. Oddziel słowa przecinkiem, np. 'OK, Dobrze, GPT'. Pozostaw puste, aby wyłączyć funkcję
 
 recognition_adjust_for_ambient_noise_duration.label = adjust_for_ambient_noise: czas trwania
 recognition_adjust_for_ambient_noise_duration.description = Parametr czasu trwania to maksymalna liczba sekund, przez którą system będzie dynamizuje dostosowywać próg przed powrotem. Domyślnie: 1
-recognition_adjust_for_ambient_noise_duration.tooltip = Parametr czasu trwania to maksymalna liczba sekund, przez którą system dynamicznie dostosowuje próg przed powrotem. Domyślnie: 1
 
 recognition_dynamic_energy_adjustment_damping.label = dynamic_energy_adjustment_damping
-recognition_dynamic_energy_adjustment_damping.description = Reprezentuje w przybliżeniu część obecnego progu energii, który jest zatrzymywany po jednej sekundzie dynamicznej regulacji progu. Domyślnie: 0.15
-recognition_dynamic_energy_adjustment_damping.tooltip = Reprezentuje w przybliżeniu część obecnego progu energii, który jest zatrzymywany po jednej sekundzie dynamicznej regulacji progu. Domyślnie: 0.15
+recognition_dynamic_energy_adjustment_damping.description = Reprezentuje w przybliżeniu część obecnego progu energii, który jest zatrzymywany po jednej sekundzie dynamicznej regulacji progu. Domyślnie: 0.15.
 
 recognition_dynamic_energy_threshold.label = dynamic_energy_threshold
 recognition_dynamic_energy_threshold.description = Reprezentuje czy próg poziomu energii dla dźwięków powinien być automatycznie dostosowany na podstawie aktualnego poziomu szumu otoczenia podczas słuchania. Domyślnie: Wł.
-recognition_dynamic_energy_threshold.tooltip = Reprezentuje czy próg poziomu energii dla dźwięków powinien być automatycznie dostosowany na podstawie aktualnego poziomu szumu otoczenia podczas słuchania. Domyślnie: Wł.
 
 recognition_energy_threshold.label = energy_threshold
-recognition_energy_threshold.description = Reprezentuje próg poziomu energii dla dźwięków. Domyślnie: 300
-recognition_energy_threshold.tooltip = Reprezentuje próg poziomu energii dla dźwięków. Domyślnie: 300
+recognition_energy_threshold.description = Reprezentuje próg poziomu energii dla dźwięków. Domyślnie: 300.
 
 recognition_pause_threshold.label = pause_threshold
 recognition_pause_threshold.description = Reprezentuje minimalną długość ciszy (w sekundach), która będzie rejestrowana jako koniec frazy.\nDomyślnie: 0.8
-recognition_pause_threshold.tooltip = Reprezentuje minimalną długość ciszy (w sekundach), która będzie rejestrowana jako koniec frazy.\nDomyślnie: 0.8
 
 stop_words.label = Słowa stopujące
-stop_words.description = Określ słowa stopujące: jeśli wykryte zostanie któreś z tych słów, wówczas zatrzymaj słuchanie. Oddziel słowa przecinkiem, albo pozostaw puste, aby wyłączyć funkcję, domyślnie: stop, exit, quit, end, finish, close, terminate, kill, halt, abort
-stop_words.tooltip = Określ słowa stopujące: jeśli wykryte zostanie któreś z tych słów, wówczas zatrzymaj słuchanie. Oddziel słowa przecinkiem, albo pozostaw puste, aby wyłączyć funkcję, domyślnie: stop, exit, quit, end, finish, close, terminate, kill, halt, abort
+stop_words.description = Określ słowa stopujące: jeśli wykryte zostanie któreś z tych słów, wówczas zatrzymaj słuchanie. Oddziel słowa przecinkiem, albo pozostaw puste, aby wyłączyć funkcję, domyślnie: stop, exit, quit, end, finish, close, terminate, kill, halt, abort.
 
 timeout.label = Timeout
-timeout.description = Maksymalny czas oczekiwania na rozpoznanie mowy. Domyślnie: 5
+timeout.description = Maksymalny czas oczekiwania na rozpoznanie mowy. Domyślnie: 5.
 timeout.tooltip = Maksymalny czas oczekiwania, domyślnie: 5
 
 wait_response.label = Czekaj na odpowiedź
 wait_response.description = Czekaj na odpowiedź przed nasłuchaniem kolejnego wejścia. Domyślnie: Wł.
 wait_response.tooltip = Czekaj na odpowiedź przed nasłuchaniem kolejnego wejścia. Domyślnie: Wł.
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/data/locale/plugin.audio_output.en.ini` & `pygpt_net-2.2.0/src/pygpt_net/data/locale/plugin.audio_output.en.ini`

 * *Files 14% similar despite different names*

```diff
@@ -3,53 +3,41 @@
 plugin.description = Enables audio/voice output (speech synthesis)
 
 provider.label = Provider
 provider.description = Select audio output provider (speech synthesis)
 provider.tooltip = Select audio output provider
 
 openai_model.label = Model
-openai_model.description = Specify model, available models: tts-1, tts-1-hd
-openai_model.tooltip = Specify model, available models: tts-1, tts-1-hd
+openai_model.description = Specify model, available models: tts-1, tts-1-hd.
 
 openai_voice.label = Voice
-openai_voice.description = Specify voice, available voices: alloy, echo, fable, onyx, nova, shimmer
-openai_voice.tooltip = Specify voice, available voices: alloy, echo, fable, onyx, nova, shimmer
+openai_voice.description = Specify voice, available voices: alloy, echo, fable, onyx, nova, shimmer.
 
 azure_api_key.label = Azure API Key
 azure_api_key.description = You can obtain your own API key at: https://azure.microsoft.com/en-us/services/cognitive-services/text-to-speech/
-azure_api_key.tooltip = Azure API Key
 
 azure_region.label = Azure Region
-azure_region.description = Specify Azure region, e.g. eastus
-azure_region.tooltip = Azure Region
+azure_region.description = Specify Azure region, e.g. eastus.
 
 azure_voice_en.label = Voice (EN)
-azure_voice_en.description = Specify voice for English language, e.g. en-US-AriaNeural
-azure_voice_en.tooltip = Voice (EN)
+azure_voice_en.description = Specify voice for English language, e.g. en-US-AriaNeural.
 
 azure_voice_pl.label = Voice (non-English)
 azure_voice_pl.description = Specify voice for non-English languages, e.g. pl-PL-MarekNeural or pl-PL-AgnieszkaNeural
-azure_voice_pl.tooltip = Voice (non-English)
 
 google_api_key.label = Google Cloud Text-to-speech API Key
 google_api_key.description = You can obtain your own API key at: https://console.cloud.google.com/apis/library/texttospeech.googleapis.com
-google_api_key.tooltip = Google Cloud Text-to-speech API Key
 
 google_voice.label = Voice
-google_voice.description = Specify voice
-google_voice.tooltip = Voice name
+google_voice.description = Specify voice.
 
 google_lang.label = Language code
-google_lang.description = Specify language code
-google_lang.tooltip = Language code
+google_lang.description = Specify language code.
 
 eleven_labs_api_key.label = Eleven Labs API Key
 eleven_labs_api_key.description = You can obtain your own API key at: https://elevenlabs.io/speech-synthesis
-eleven_labs_api_key.tooltip = Eleven Labs API Key
 
 eleven_labs_voice.label = Voice ID
-eleven_labs_voice.description = Specify Voice ID
-eleven_labs_voice.tooltip = Voice ID
+eleven_labs_voice.description = Specify Voice ID.
 
 eleven_labs_model.label = Model
-eleven_labs_model.description = Specify model
-eleven_labs_model.tooltip = Model name
+eleven_labs_model.description = Specify model.
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/data/locale/plugin.audio_output.pl.ini` & `pygpt_net-2.2.0/src/pygpt_net/data/locale/plugin.audio_output.pl.ini`

 * *Files 6% similar despite different names*

```diff
@@ -3,29 +3,29 @@
 plugin.description = Umożliwia wyjście audio/głos (syntezę mowy)
 
 provider.label = Silnik
 provider.description = Wybierz silnik do generowania audio
 provider.tooltip = Wybierz silnik do generowania audio
 
 openai_model.label = Model
-openai_model.description = Określ model, dostępne modele: tts-1, tts-1-hd
+openai_model.description = Określ model, dostępne modele: tts-1, tts-1-hd.
 openai_model.tooltip = Określ model, dostępne modele: tts-1, tts-1-hd
 
 openai_voice.label = Głos
-openai_voice.description = Określ głos, dostępne głosy: alloy, echo, fable, onyx, nova, shimmer
+openai_voice.description = Określ głos, dostępne głosy: alloy, echo, fable, onyx, nova, shimmer.
 openai_voice.tooltip = Określ głos, dostępne głosy: alloy, echo, fable, onyx, nova, shimmerr
 
 azure_api_key.label = Klucz API Azure
 azure_api_key.description = Swój własny klucz API możesz uzyskać na stronie: https://azure.microsoft.com/pl-pl/services/cognitive-services/text-to-speech/
 azure_api_key.tooltip = Klucz API Azure
 
 azure_region.label = Region Azure
-azure_region.description = Określ region Azure, np. eastus
+azure_region.description = Określ region Azure, np. eastus.
 azure_region.tooltip = Region Azure
 
 azure_voice_en.label = Głos (EN)
-azure_voice_en.description = Określ głos dla języka angielskiego, np. en-US-AriaNeural
+azure_voice_en.description = Określ głos dla języka angielskiego, np. en-US-AriaNeural.
 azure_voice_en.tooltip = Głos (EN)
 
 azure_voice_pl.label = Głos (pozostałe)
-azure_voice_pl.description = Określ głos dla języka innego niż angielski, np. pl-PL-MarekNeural lub pl-PL-AgnieszkaNeural
+azure_voice_pl.description = Określ głos dla języka innego niż angielski, np. pl-PL-MarekNeural lub pl-PL-AgnieszkaNeural.
 azure_voice_pl.tooltip = Głos (pozostałe)
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/data/locale/plugin.cmd_api.en.ini` & `pygpt_net-2.2.0/src/pygpt_net/data/locale/plugin.cmd_api.en.ini`

 * *Files 10% similar despite different names*

```diff
@@ -1,19 +1,16 @@
 [LOCALE]
 plugin.name = Command: API calls
 plugin.description = Provides the ability to make external API calls
 
 cmds.label = Your custom API calls
-cmds.description = Add your custom API calls here
+cmds.description = Add your custom API calls here.
 cmds.tooltip = See the documentation for more details about examples, usage and list of predefined placeholders
 
 user_agent.label = User agent
-user_agent.description = User agent to use when making requests, default: Mozilla/5.0
-user_agent.tooltip = User agent to use when making requests
+user_agent.description = User agent to use when making requests, default: Mozilla/5.0.
 
 disable_ssl.label = Disable SSL verify
-disable_ssl.description = Disables SSL verification when making calls to API
-disable_ssl.tooltip = Disable SSL verify
+disable_ssl.description = Disables SSL verification when making calls to API.
 
 timeout.label = Timeout
-timeout.description = Connection timeout (seconds)
-timeout.tooltip = Connection timeout (seconds)
+timeout.description = Connection timeout (seconds).
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/data/locale/plugin.cmd_api.pl.ini` & `pygpt_net-2.2.0/src/pygpt_net/data/locale/plugin.cmd_api.pl.ini`

 * *Files 13% similar despite different names*

```diff
@@ -1,19 +1,19 @@
 [LOCALE]
 plugin.name = Polecenie: Dostęp do API
 plugin.description = Pozwala na integrację z zewnętrznymi usługami za pomocą API
 
 cmds.label = Twoje wywołania do zewnętrznych API
-cmds.description = Dodaj tutaj listę wywołań do zewn. usług API
+cmds.description = Dodaj tutaj listę wywołań do zewn. usług API.
 cmds.tooltip = Zobacz dokumentację, aby zobaczyć przykłady jak definiować wywołania do API
 
 user_agent.label = User agent
-user_agent.description = User agent używany podczas połączenia, domyślnie: Mozilla/5.0
+user_agent.description = User agent używany podczas połączenia, domyślnie: Mozilla/5.0.
 user_agent.tooltip = User agent używany podczas połączenia
 
 disable_ssl.label = Wyłącz weryfikację SSL
-disable_ssl.description = Wyłącza weryfikację SSL podczas przeglądania stron internetowych
+disable_ssl.description = Wyłącza weryfikację SSL podczas przeglądania stron internetowych.
 disable_ssl.tooltip = Wyłącz weryfikację SSL
 
 timeout.label = Timeout
 timeout.description = Timeout połączenia (sekundy)
 timeout.tooltip = Timeout połączenia (sekundy)
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/data/locale/plugin.cmd_custom.pl.ini` & `pygpt_net-2.2.0/src/pygpt_net/data/locale/plugin.cmd_custom.pl.ini`

 * *Files 21% similar despite different names*

```diff
@@ -1,7 +1,7 @@
 [LOCALE]
 plugin.name = Polecenie: Własne polecenia
 plugin.description = Umożliwia tworzenie i wykonywanie własnych poleceń
 
 cmds.label = Twoje własne polecenia
-cmds.description = Dodaj swoje własne polecenia tutaj, użyj {placeholders} do otrzymania parametrów, możesz również użyć predefiniowanych symboli zastępczych: {_time}, {_date}, {_datetime}, {_file}, {_home}
+cmds.description = Dodaj swoje własne polecenia tutaj, użyj {placeholders} do otrzymania parametrów, możesz również użyć predefiniowanych symboli zastępczych: {_time}, {_date}, {_datetime}, {_file}, {_home}.
 cmds.tooltip = Sprawdź dokumentację, aby uzyskać więcej przykładów, informacji o użytkowaniu i listę predefiniowanych symboli zastępczych
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/data/locale/plugin.cmd_serial.pl.ini` & `pygpt_net-2.2.0/src/pygpt_net/data/locale/plugin.cmd_serial.pl.ini`

 * *Files 15% similar despite different names*

```diff
@@ -1,43 +1,34 @@
 [LOCALE]
 plugin.name = Polecenie: Port szeregowy / USB
 plugin.description = Zapewnia polecenia do odczytu i wysyłania danych do portu USB
 
 serial_port.label = Port USB
-serial_port.description = Nazwa portu USB, np. /dev/ttyUSB0, /dev/ttyACM0, COM3
-serial_port.tooltip = Nazwa portu USB, np. /dev/ttyUSB0, /dev/ttyACM0, COM3
+serial_port.description = Nazwa portu USB, np. /dev/ttyUSB0, /dev/ttyACM0, COM3.
 
 serial_bps.label = Prędkość połączenia (baudrate, bps)
 serial_bps.description = Prędkość połączenia, w bps, domyślnie: 9600
-serial_bps.tooltip = Prędkość połączenia, w bps, domyślnie: 9600
 
 timeout.label = Limit czasu
-timeout.description = Limit czasu w sekundach, domyślnie: 1
+timeout.description = Limit czasu w sekundach, domyślnie: 1.
 timeout.tooltip = Limit czasu w sekundach, domyślnie: 1
 
 sleep.label = Uśpienie
-sleep.description = Uśpienie w sekundach po połączeniu, domyślnie: 2
-sleep.tooltip = Uśpienie w sekundach po połączeniu, domyślnie: 2
+sleep.description = Uśpienie w sekundach po połączeniu, domyślnie: 2.
 
-cmd_serial_send.label = Włącz: Wysyłanie poleceń tekstowych do portu USB
-cmd_serial_send.description = Umożliwia wykonanie polecenia serial_send
-cmd_serial_send.tooltip = Umożliwia wykonanie polecenia serial_send
-
-cmd_serial_send_bytes.label = Włącz: Wysyłanie surowych bajtów do portu USB
-cmd_serial_send_bytes.description = Umożliwia wykonanie polecenia serial_send_bytes
-cmd_serial_send_bytes.tooltip = Umożliwia wykonanie polecenia serial_send_bytes
-
-cmd_serial_read.label = Włącz: Odczyt danych z portu USB
-cmd_serial_read.description = Umożliwia wykonanie polecenia serial_read
-cmd_serial_read.tooltip = Umożliwia wykonanie polecenia serial_read
+cmd.serial_send.label = Włącz: Wysyłanie poleceń tekstowych do portu USB
+cmd.serial_send.description = Umożliwia wykonanie polecenia serial_send
+
+cmd.serial_send_bytes.label = Włącz: Wysyłanie surowych bajtów do portu USB
+cmd.serial_send_bytes.description = Umożliwia wykonanie polecenia serial_send_bytes.
+
+cmd.serial_read.label = Włącz: Odczyt danych z portu USB
+cmd.serial_read.description = Umożliwia wykonanie polecenia serial_read.
 
 syntax_serial_send.label = Składnia: serial_send
-syntax_serial_send.description = Składnia dla wysyłania polecenia tekstowego do portu USB
-syntax_serial_send.tooltip = Składnia dla wysyłania polecenia tekstowego do portu USB
+syntax_serial_send.description = Składnia dla wysyłania polecenia tekstowego do portu USB.
 
 syntax_serial_send_bytes.label = Składnia: serial_send_raw
-syntax_serial_send_bytes.description = Składnia dla wysyłania surowych bajtów do portu USB
-syntax_serial_send_bytes.tooltip = Składnia dla wysyłania surowych bajtów do portu USB
+syntax_serial_send_bytes.description = Składnia dla wysyłania surowych bajtów do portu USB.
 
 syntax_serial_read.label = Składnia: serial_read
-syntax_serial_read.description = Składnia dla odczytu danych z portu USB
-syntax_serial_read.tooltip = Składnia dla odczytu danych z portu USB
+syntax_serial_read.description = Składnia dla odczytu danych z portu USB.
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/data/locale/plugin.crontab.en.ini` & `pygpt_net-2.2.0/src/pygpt_net/data/locale/plugin.crontab.en.ini`

 * *Files 11% similar despite different names*

```diff
@@ -1,15 +1,12 @@
 [LOCALE]
 plugin.name = Crontab / Task scheduler
 plugin.description = Plugin provides cron-style job scheduling - you can schedule prompts to be sent at any time using cron-based syntax for task setup.
 
 crontab.label = Your tasks
 crontab.description = Add your cron-style tasks here. They will be executed automatically at the times you specify in the cron-based job format. If you are unfamiliar with Cron, consider visiting the Crontab Guru page for assistance.
-crontab.tooltip = 
 
 new_ctx.label = Create a new context on job run
-new_ctx.description = If enabled, then a new context will be created on every run of the job
-new_ctx.tooltip = If enabled, then a new context will be created on every run of the job
+new_ctx.description = If enabled, then a new context will be created on every run of the job.
 
 show_notify.label = Show notification on job run
 show_notify.description = If enabled, then a tray notification will be shown on every run of the job.
-show_notify.tooltip =
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/data/locale/plugin.crontab.pl.ini` & `pygpt_net-2.2.0/src/pygpt_net/data/locale/plugin.crontab.pl.ini`

 * *Files 18% similar despite different names*

```diff
@@ -1,15 +1,12 @@
 [LOCALE]
 plugin.name = Crontab / Zadania automatyczne
 plugin.description = Wtyczka umożliwia planowanie zadań w stylu cron - możesz zaplanować wysyłanie poleceń o dowolnej porze, używając składni opartej na cron-ie do ustawienia zadań.
 
 crontab.label = Twoje zadania
 crontab.description = Dodaj tutaj swoje zadania używając składni cron-a. Zostaną one wykonane automatycznie o godzinach, które określisz w formacie opartym na cron-ie. Jeśli nie znasz Crona, rozważ odwiedzenie strony Crontab Guru po pomoc.
-crontab.tooltip = 
 
 new_ctx.label = Utwórz nowy kontekst dla każdego zadanai
-new_ctx.description = Jeśli włączone, nowy kontekst będzie tworzony przy każdym uruchomieniu zadania
-new_ctx.tooltip = Jeśli włączone, nowy kontekst będzie tworzony przy każdym uruchomieniu zadania
+new_ctx.description = Jeśli włączone, nowy kontekst będzie tworzony przy każdym uruchomieniu zadania.
 
 show_notify.label = Pokaż powiadomienie przy uruchomieniu
-show_notify.description = Jeśli włączone, zostanie wyświetlone powiadomienie w tray'u podczas uruchomienia zadania.
-show_notify.tooltip = 
+show_notify.description = Jeśli włączone, zostanie wyświetlone powiadomienie w tray'u podczas uruchomienia zadania.
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/data/locale/plugin.idx_llama_index.en.ini` & `pygpt_net-2.2.0/src/pygpt_net/data/locale/plugin.idx_llama_index.en.ini`

 * *Files 10% similar despite different names*

```diff
@@ -1,39 +1,33 @@
 [LOCALE]
 plugin.name = Chat with files (Llama-index, inline)
 plugin.description = Integrates Llama-index (Chat with files) storage in any chat and provides additional knowledge into context (from files and from context history in database)
 
 prompt.label = Prompt
-prompt.description = Prompt used for instruct how to use additional data provided from Llama-index
-prompt.tooltip = Prompt
+prompt.description = Prompt used for instruct how to use additional data provided from Llama-index.
 
 ask_llama_first.label = Ask Llama-index first
-ask_llama_first.description = When enabled, then Llama-index will be asked first, and response will be used as additional knowledge in prompt. When disabled, then Llama-index will be asked only when needed.
-ask_llama_first.tooltip = Ask Llama-index first
+ask_llama_first.description = When enabled, then Llama-index will be asked first, and response will be used as additional knowledge in prompt. When disabled, then Llama-index will be asked only when needed. INFO: Disabled in autonomous mode (via plugin)!
 
 prepare_question.label = Auto-prepare question before asking Llama-index first
 prepare_question.description = When enabled, then question will be prepared before asking Llama-index first to create best query.
-prepare_question.tooltip = When enabled, then question will be prepared before asking Llama-index first to create best query.
 
 model_prepare_question.label = Model for question preparation
 model_prepare_question.description = Model used to prepare question before asking Llama-index, default: gpt-3.5-turbo
-model_prepare_question.tooltip = Model used to prepare question before asking Llama-index, default: gpt-3.5-turbo
 
 prepare_question_max_tokens.label = Max output tokens for question preparation
-prepare_question_max_tokens.description = Max tokens in output when preparing question before asking Llama-index
-prepare_question_max_tokens.tooltip = Max tokens in output when preparing question before asking Llama-index
+prepare_question_max_tokens.description = Max tokens in output when preparing question before asking Llama-index.
 
 max_question_chars.label = Max characters in question
-max_question_chars.description = Max characters in question when querying Llama-index, 0 = no limit
-max_question_chars.tooltip = Max characters in question when querying Llama-index, 0 = no limit
+max_question_chars.description = Max characters in question when querying Llama-index, 0 = no limit.
 
 syntax_prepare_question.label = Prompt for question preparation
-syntax_prepare_question.description = System prompt for question preparation
-syntax_prepare_question.tooltip = System prompt for question preparation
+syntax_prepare_question.description = System prompt for question preparation.
+
+append_meta.label = Append metadata to context
+append_meta.description = If enabled, then metadata from Llama-index will be appended to additional context
 
 model_query.label = Model
-model_query.description = Model used for querying Llama-index, default: gpt-3.5-turbo
-model_query.tooltip = Model
+model_query.description = Model used for querying Llama-index, default: gpt-3.5-turbo.
 
 idx.label = Indexes to use
-idx.description = ID's of indexes to use, default: base, separate by comma if you want to use more than one index at once
-idx.tooltip = Indexes to use
+idx.description = ID's of indexes to use, default: base, separate by comma if you want to use more than one index at once.
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/data/locale/plugin.idx_llama_index.pl.ini` & `pygpt_net-2.2.0/src/pygpt_net/data/locale/plugin.idx_llama_index.pl.ini`

 * *Files 13% similar despite different names*

```diff
@@ -1,19 +1,18 @@
 [LOCALE]
 plugin.name = Chat z plikami (Llama-index, w tle)
 plugin.description = Integruje Llama-index (Czat z plikami) w dowolnej rozmowie i dostarcza dodatkowej wiedzy do kontekstu (z plików oraz z historii konwersacji w bazie danych)
 
 prompt.label = Prompt
 prompt.description = Prompt używany do instruowania, jak korzystać z dodatkowych danych dostarczonych przez Llama-index
-prompt.tooltip = Prompt
 
 ask_llama_first.label = Pytaj najpierw Llama-index
-ask_llama_first.description = Kiedy włączone, Llama-index będzie pytany jako pierwszy, a odpowiedź będzie używana jako dodatkowa wiedza w prompcie. Kiedy wyłączone, Llama-index będzie pytany tylko wtedy, gdy jest to potrzebne.
-ask_llama_first.tooltip = Pytaj najpierw Llama-index
+ask_llama_first.description = Kiedy włączone, Llama-index będzie pytany jako pierwszy, a odpowiedź będzie używana jako dodatkowa wiedza w prompcie. Kiedy wyłączone, Llama-index będzie pytany tylko wtedy, gdy jest to potrzebne. INFO: Niedostępne w trybie autonomicznym (przy użyciu plugina)!
 
 model_query.label = Model
-model_query.description = Model używany do zapytań w Llama-index, domyślnie: gpt-3.5-turbo
-model_query.tooltip = Model
+model_query.description = Model używany do zapytań w Llama-index, domyślnie: gpt-3.5-turbo.
+
+append_meta.label = Dołącz metadata do kontekstu
+append_meta.description = Kiedy włączone, metadata z Llama-index zostaną dołączone do dodatkowego kontekstu
 
 idx.label = ID indeksów do użycia
-idx.description = Indeksy do użycia, domyślnie: base, wymień po przecinku jeśli chcesz użyć więcej niż jednego
-idx.tooltip = ID indeksów do użycia
+idx.description = Indeksy do użycia, domyślnie: base, wymień po przecinku jeśli chcesz użyć więcej niż jednego.
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/data/locale/plugin.openai_vision.en.ini` & `pygpt_net-2.2.0/src/pygpt_net/data/locale/plugin.openai_vision.en.ini`

 * *Files 23% similar despite different names*

```diff
@@ -1,23 +1,20 @@
 [LOCALE]
 plugin.name = GPT-4 Vision (inline)
 plugin.description = Integrates vision capabilities with any chat mode, not just Vision mode. When the plugin is enabled, the model temporarily switches to vision in the background when an image attachment or vision capture is provided.
 
 model.label = Model
 model.description = The model used to temporarily provide vision capabilities; default is "gpt-4-vision-preview".
-model.tooltip = The model used to temporarily provide vision capabilities; default is "gpt-4-vision-preview".
 
 prompt.label = Prompt
-prompt.description = Prompt used for vision mode. It will append or replace current system prompt when using vision model
-prompt.tooltip = Prompt used for vision mode. It will append or replace current system prompt when using vision model
+prompt.description = Prompt used for vision mode. It will append or replace current system prompt when using vision model.
 
 replace_prompt.label = Replace prompt
-replace_prompt.description = Replace whole system prompt with vision prompt against appending it to the current prompt
-replace_prompt.tooltip = Replace whole system prompt with vision prompt against appending it to the current prompt
+replace_prompt.description = Replace whole system prompt with vision prompt against appending it to the current prompt.
 
-cmd_capture.label = Enable: "camera capture" command
-cmd_capture.description = Allow using command: camera capture ("Execute commands" option enabled is required)
-cmd_capture.tooltip = If enabled, model will be able to capture images from camera itself.
+cmd.camera_capture.label = Enable: capturing images from camera
+cmd.camera_capture.description = Enable `camera_capture` command execution.\nIf enabled, model will be able to capture images from camera itself. The `Execute commands` option must be enabled.
+cmd.camera_capture.tooltip = Example prompt: Capture the image from my webcam.
 
-cmd_screenshot.label = Enable: "make screenshot" command
-cmd_screenshot.description = Allow using command: make screenshot ("Execute commands" option enabled is required)
-cmd_screenshot.tooltip = If enabled, model will be able to making screenshots itself.
+cmd.make_screenshot.label = Enable: making screenshots
+cmd.make_screenshot.description = Enable `make_screenshot` command execution.\nIf enabled, model will be able to making screenshots itself. The `Execute commands` option must be enabled.
+cmd.make_screenshot.tooltip = Example prompt: Make a screenshot and describe what you see.
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/data/locale/plugin.openai_vision.pl.ini` & `pygpt_net-2.2.0/src/pygpt_net/data/locale/plugin.openai_vision.pl.ini`

 * *Files 20% similar despite different names*

```diff
@@ -1,23 +1,20 @@
 [LOCALE]
 plugin.name = GPT-4 Wizja (w tle)
 plugin.description = Integruje możliwości wizyjne z dowolnym trybem czatu, nie tylko z trybem Vision. Gdy wtyczka jest aktywna, model tymczasowo przełącza się w tle na tryb wizyjny zawsze kiedy przesyłany jest obrazek lub przechwycony obraz z kamery.
 
 model.label = Model
 model.description = Model używany do tymczasowego zapewnienia możliwości wizyjnych; domyślnie "gpt-4-vision-preview".
-model.tooltip = Model używany do tymczasowego zapewnienia możliwości wizyjnych; domyślnie "gpt-4-vision-preview".
 
 prompt.label = Prompt
-prompt.description = Prompt używany dla trybu wizji. Zastąpi lub zostanie dołączony do obecnego systemowego prompta przy użyciu modelu wizji
-prompt.tooltip = Prompt używany dla trybu wizji. Zastąpi lub zostanie dołączony do obecnego systemowego prompta przy użyciu modelu wizji
+prompt.description = Prompt używany dla trybu wizji. Zastąpi lub zostanie dołączony do obecnego systemowego prompta przy użyciu modelu wizji.
 
 replace_prompt.label = Zastąp prompt
-replace_prompt.description = Zastąp systemowy prompt promptem wizji zamiast dopisywać go jedynie do bieżącego promptu
-replace_prompt.tooltip = Zastąp systemowy prompt promptem wizji zamiast dopisywać go jedynie do bieżącego promptu
+replace_prompt.description = Zastąp systemowy prompt promptem wizji zamiast dopisywać go jedynie do bieżącego promptu.
 
-cmd_capture.label = Zezwól na polecenie: przechwytywanie obrazu z kamery
-cmd_capture.description = Pozwala na użycie polecenia: przechwytywanie obrazu z kamery (wymagane jest włączenie opcji 'Uruchamianie poleceń')
-cmd_capture.tooltip = Jeśli włączone, model będzie mógł przechwytywać obrazy z kamery
+cmd.camera_capture.label = Zezwól na polecenie: przechwytywanie obrazu z kamery
+cmd.camera_capture.description = Pozwala na użycie polecenia: przechwytywanie obrazu z kamery (wymagane jest włączenie opcji 'Uruchamianie poleceń').
+cmd.camera_capture.tooltip = Jeśli włączone, model będzie mógł przechwytywać obrazy z kamery
 
-cmd_screenshot.label = Zezwól na polecenie: robienie zrzutu ekranu
-cmd_screenshot.description = Pozwala na użycie polecenia: robienie zrzutu ekranu (wymagane jest włączenie opcji 'Uruchamianie poleceń')
-cmd_screenshot.tooltip = Jeśli włączone, model będzie mógł wykonywać zrzuty ekranu
+cmd.make_screenshot.label = Zezwól na polecenie: robienie zrzutu ekranu
+cmd.make_screenshot.description = Pozwala na użycie polecenia: robienie zrzutu ekranu (wymagane jest włączenie opcji 'Uruchamianie poleceń').
+cmd.make_screenshot.tooltip = Jeśli włączone, model będzie mógł wykonywać zrzuty ekranu
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/data/locale/plugin.real_time.en.ini` & `pygpt_net-2.2.0/src/pygpt_net/data/locale/plugin.real_time.en.ini`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/data/locale/plugin.real_time.pl.ini` & `pygpt_net-2.2.0/src/pygpt_net/data/locale/plugin.real_time.pl.ini`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/data/logo.png` & `pygpt_net-2.2.0/src/pygpt_net/data/logo.png`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/data/win32/README.rtf` & `pygpt_net-2.2.0/src/pygpt_net/data/win32/README.rtf`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/data/win32/USER-LICENSE.rtf` & `pygpt_net-2.2.0/src/pygpt_net/data/win32/USER-LICENSE.rtf`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/data/win32/pygpt.aip` & `pygpt_net-2.2.0/src/pygpt_net/data/win32/pygpt.aip`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/icons.qrc` & `pygpt_net-2.2.0/src/pygpt_net/icons.qrc`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/icons_rc.py` & `pygpt_net-2.2.0/src/pygpt_net/icons_rc.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/item/assistant.py` & `pygpt_net-2.2.0/src/pygpt_net/plugin/cmd_custom/__init__.py`

 * *Files 26% similar despite different names*

```diff
@@ -2,204 +2,195 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.21 01:00:00                  #
+# Updated Date: 2024.03.12 06:00:00                  #
 # ================================================== #
 
-import json
-
-from pygpt_net.item.attachment import AttachmentItem
-
-
-class AssistantItem:
-    def __init__(self):
-        """
-        Assistant item
-        """
-        self.id = None
-        self.name = None
-        self.description = None
-        self.instructions = None
-        self.model = None
-        self.meta = {}
-        self.files = {}  # file IDs (files uploaded to remote storage)
-        self.attachments = {}  # local attachments
-        self.tools = {
-            "code_interpreter": False,
-            "retrieval": False,
-            "function": [],
-        }
-
-    def reset(self):
-        """
-        Reset assistant
-        """
-        self.id = None
-        self.name = None
-        self.description = None
-        self.instructions = None
-        self.model = None
-        self.meta = {}
-        self.files = {}
-        self.attachments = {}
-        self.tools = {
-            "code_interpreter": False,
-            "retrieval": False,
-            "function": [],
-        }
-
-    def to_dict(self):
-        return {
-            "id": self.id,
-            "name": self.name,
-            "description": self.description,
-            "instructions": self.instructions,
-            "model": self.model,
-            "meta": self.meta,
-            "files": self.files,
-            "attachments": self.attachments,
-            "tool.code_interpreter": self.tools["code_interpreter"],
-            "tool.retrieval": self.tools["retrieval"],
-            "tool.function": self.tools["function"],
-        }
-
-    def clear_functions(self):
-        """
-        Clear functions
-        """
-        self.tools['function'] = []
-
-    def clear_tools(self):
-        """
-        Clear tools
-        """
-        self.tools = {
-            "code_interpreter": False,
-            "retrieval": False,
-            "function": [],
-        }
-
-    def add_function(self, name: str, parameters: str, desc: str):
-        """
-        Add function to assistant
-
-        :param name: function name
-        :param parameters: function parameters (JSON encoded)
-        :param desc: function description
-        """
-        function = {
-            'name': name,
-            'params': parameters,
-            'desc': desc,
+from pygpt_net.plugin.base import BasePlugin
+from pygpt_net.core.dispatcher import Event
+from pygpt_net.item.ctx import CtxItem
+
+from .worker import Worker
+
+
+class Plugin(BasePlugin):
+    def __init__(self, *args, **kwargs):
+        super(Plugin, self).__init__(*args, **kwargs)
+        self.id = "cmd_custom"
+        self.name = "Command: Custom Commands"
+        self.description = "Provides availability to create and execute custom commands"
+        self.order = 100
+        self.use_locale = True
+        self.init_options()
+
+    def init_options(self):
+        """Initialize options"""
+        keys = {
+            "enabled": "bool",
+            "name": "text",
+            "instruction": "textarea",
+            "params": "textarea",
+            "cmd": "textarea",
         }
-        self.tools['function'].append(function)
-
-    def has_functions(self) -> bool:
-        """
-        Check if assistant has functions
-
-        :return: bool
-        """
-        return len(self.tools['function']) > 0
-
-    def get_functions(self) -> list:
-        """
-        Return assistant functions
-
-        :return: functions
-        """
-        return self.tools['function']
-
-    def has_tool(self, tool: str) -> bool:
-        """
-        Check if assistant has tool
-
-        :param tool: tool name
-        :return: bool
-        """
-        return tool in self.tools and self.tools[tool] is True
-
-    def has_file(self, id: str) -> bool:
-        """
-        Check if assistant has file with ID
-
-        :param id: file ID
-        """
-        return id in self.files
-
-    def add_file(self, id: str):
-        """
-        Add empty file to assistant
-
-        :param id: file ID
-        """
-        self.files[id] = {}
-        self.files[id]['id'] = id
-
-    def delete_file(self, file_id: str):
-        """
-        Delete file from assistant
-
-        :param file_id: file ID
-        """
-        if file_id in self.files:
-            self.files.pop(file_id)
-
-    def clear_files(self):
-        """
-        Clear files
-        """
-        self.files = {}
+        items = [
+            {
+                "enabled": True,
+                "name": "example_cmd",
+                "instruction": "execute tutorial test command by replacing 'hello' and 'world' params with some funny "
+                               "words",
+                "params": "hello, world",
+                "cmd": 'echo "Response from {hello} and {world} at {_time}"',
+            },
+        ]
+        desc = "Add your custom commands here, use {placeholders} to receive params, you can also use predefined " \
+               "placeholders: {_time}, {_date}, {_datetime}, {_file}, {_home) "
+        tooltip = "See the documentation for more details about examples, usage and list of predefined placeholders"
+        self.add_option(
+            "cmds",
+            type="dict",
+            value=items,
+            label="Your custom commands",
+            description=desc,
+            tooltip=tooltip,
+            keys=keys,
+        )
+
+    def setup(self) -> dict:
+        """
+        Return available config options
+
+        :return: config options
+        """
+        return self.options
+
+    def attach(self, window):
+        """
+        Attach window
+
+        :param window: Window instance
+        """
+        self.window = window
+
+    def handle(self, event: Event, *args, **kwargs):
+        """
+        Handle dispatched event
+
+        :param event: event object
+        :param args: event args
+        :param kwargs: event kwargs
+        """
+        name = event.name
+        data = event.data
+        ctx = event.ctx
+
+        if name == Event.CMD_SYNTAX:
+            self.cmd_syntax(data)
+
+        elif name == Event.CMD_EXECUTE:
+            self.cmd(
+                ctx,
+                data['commands'],
+            )
+
+    def cmd_syntax(self, data: dict):
+        """
+        Event: CMD_SYNTAX
+
+        :param data: event data dict
+        """
+        for item in self.get_option_value("cmds"):
+            if not item["enabled"]:
+                continue
+
+            cmd_syntax = {
+                "cmd": item["name"],
+                "instruction": item["instruction"],  # instruction for model
+                "params": [],  # parameters
+                "enabled": True,  # enabled
+            }
+            if item["params"].strip() != "":
+                cmd_syntax["params"] = self.extract_params(item["params"])
+
+            data['cmd'].append(cmd_syntax)  # append command
+
+    def cmd(self, ctx: CtxItem, cmds: list):
+        """
+        Event: CMD_EXECUTE
+
+        :param ctx: CtxItem
+        :param cmds: commands dict
+        """
+        is_cmd = False
+        my_commands = []
+        for item in cmds:
+            for my_cmd in self.get_option_value("cmds"):
+                if not my_cmd["enabled"]:
+                    continue
+                if my_cmd["name"] == item["cmd"]:
+                    is_cmd = True
+                    my_commands.append(item)
 
-    def has_attachment(self, id: str) -> bool:
-        """
-        Check if assistant has attachment with ID
-
-        :param id: attachment ID
-        :return: bool
-        """
-        return id in self.attachments
-
-    def add_attachment(self, attachment: AttachmentItem):
-        """
-        Add attachment to assistant
-
-        :param attachment: attachment
-        """
-        id = attachment.id
-        self.attachments[id] = attachment
+        if not is_cmd:
+            return
 
-    def delete_attachment(self, id: str):
-        """
-        Delete attachment from assistant
+        try:
+            # worker
+            worker = Worker()
+            worker.plugin = self
+            worker.cmds = my_commands
+            worker.ctx = ctx
+
+            # signals (base handlers)
+            worker.signals.finished.connect(self.handle_finished)
+            worker.signals.log.connect(self.handle_log)
+            worker.signals.debug.connect(self.handle_debug)
+            worker.signals.status.connect(self.handle_status)
+            worker.signals.error.connect(self.handle_error)
+
+            # check if async allowed
+            if not self.window.core.dispatcher.async_allowed(ctx):
+                worker.run()
+                return
 
-        :param id: attachment ID
-        """
-        if id in self.attachments:
-            self.attachments.pop(id)
+            # start
+            self.window.threadpool.start(worker)
 
-    def clear_attachments(self):
-        """
-        Clear attachments
-        """
-        self.attachments = {}
+        except Exception as e:
+            self.error(e)
 
-    def dump(self):
+    def extract_params(self, text: str) -> list:
         """
-        Dump item to string
+        Extract params from params string
 
-        :return: serialized item
-        :rtype: str
+        :param text: text
+        :return: params list
         """
-        try:
-            return json.dumps(self.to_dict())
-        except Exception as e:
-            pass
-        return ""
-
-    def __str__(self):
-        """To string"""
-        return self.dump()
+        params = []
+        if text is None or text == "":
+            return params
+        params_list = text.split(",")
+        for param in params_list:
+            param = param.strip()
+            if param == "":
+                continue
+            params.append({
+                "name": param,
+                "type": "str",
+                "description": param,
+            })
+        return params
+
+    def log(self, msg: str):
+        """
+        Log message to console
+
+        :param msg: message to log
+        """
+        full_msg = '[CMD] ' + str(msg)
+        self.debug(full_msg)
+        self.window.ui.status(full_msg)
+        if self.is_log():
+            print(full_msg)
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/item/attachment.py` & `pygpt_net-2.2.0/src/pygpt_net/item/index.py`

 * *Files 20% similar despite different names*

```diff
@@ -2,61 +2,57 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.01.27 15:00:00                  #
+# Updated Date: 2024.01.27 17:00:00                  #
 # ================================================== #
 
 import json
 
 
-class AttachmentItem:
+class IndexItem:
     def __init__(self):
         """
-        Attachment item
+        Index item
         """
-        self.name = None
         self.id = None
-        self.path = None
-        self.remote = None
-        self.send = False
+        self.name = None
+        self.store = None
+        self.items = {}
 
     def serialize(self) -> dict:
         """
         Serialize item to dict
 
         :return: serialized item
         """
         return {
             'id': self.id,
             'name': self.name,
-            'path': self.path,
-            'remote': self.remote,
-            'send': self.send
+            'store': self.store,
+            'items': self.items,
         }
 
     def deserialize(self, data: dict):
         """
         Deserialize item from dict
 
         :param data: serialized item
         """
         if 'id' in data:
             self.id = data['id']
         if 'name' in data:
             self.name = data['name']
-        if 'path' in data:
-            self.path = data['path']
-        if 'remote_id' in data:
-            self.remote = data['remote']
-        if 'send' in data:
-            self.send = data['send']
+        if 'store' in data:
+            self.store = data['store']
+        if 'items' in data:
+            self.items = data['items']
 
     def dump(self):
         """
         Dump item to string
 
         :return: serialized item
         :rtype: str
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/item/calendar_note.py` & `pygpt_net-2.2.0/src/pygpt_net/item/calendar_note.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/item/ctx.py` & `pygpt_net-2.2.0/src/pygpt_net/item/ctx.py`

 * *Files 11% similar despite different names*

```diff
@@ -2,28 +2,29 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.03.04 20:00:00                  #
+# Updated Date: 2024.04.08 21:00:00                  #
 # ================================================== #
 
+import copy
 import datetime
 import json
 import time
 
 
 class CtxItem:
     def __init__(self, mode=None):
         """
         Context item
 
-        :param mode: Mode (completion, chat, img, vision, langchain, assistant)
+        :param mode: Mode (completion, chat, img, vision, langchain, assistant, llama_index, agent)
         """
         self.id = None
         self.meta_id = None
         self.external_id = None
         self.stream = None
         self.cmds = []
         self.results = []
@@ -52,14 +53,25 @@
         self.internal = False
         self.is_vision = False
         self.idx = 0
         self.first = False
         self.tool_calls = []  # API tool calls
         self.index_meta = {}  # llama-index metadata ctx used
         self.doc_ids = []  # document ids
+        self.prev_ctx = None  # previous context (reply output)
+
+    def clear_reply(self):
+        """Clear current reply output"""
+        if self.reply:
+            self.urls = []
+
+    def from_previous(self):
+        """Copy data from previous context reply to current context"""
+        if self.prev_ctx is not None:
+            self.urls = copy.deepcopy(self.prev_ctx.urls)
 
     def add_doc_meta(self, meta: dict):
         """
         Add document meta
 
         :param meta: document meta data
         """
@@ -229,14 +241,15 @@
         self.extra = None
         self.initialized = False
         self.deleted = False
         self.important = False
         self.archived = False
         self.label = 0  # label color
         self.indexes = {}  # indexes data
+        self.group_id = None
 
     def to_dict(self) -> dict:
         """
         Dump context meta to dict
 
         :return: dict
         """
@@ -261,14 +274,15 @@
             "extra": self.extra,
             "initialized": self.initialized,
             "deleted": self.deleted,
             "important": self.important,
             "archived": self.archived,
             "label": self.label,
             "indexes": self.indexes,
+            "group_id": self.group_id,
         }
 
     def from_dict(self, data: dict):
         """
         Load context meta from dict
 
         :param data: dict
@@ -293,7 +307,54 @@
         self.extra = data.get("extra", None)
         self.initialized = data.get("initialized", False)
         self.deleted = data.get("deleted", False)
         self.important = data.get("important", False)
         self.archived = data.get("archived", False)
         self.label = data.get("label", 0)
         self.indexes = data.get("indexes", {})
+        self.group_id = data.get("group_id", None)
+
+class CtxGroup:
+    def __init__(self, id=None, name=None):
+        """
+        Context group
+
+        :param id: Group ID
+        :param name: Group name
+        """
+        self.id = id
+        self.uuid = None
+        self.name = name
+        self.items = []
+        self.created = int(time.time())
+        self.updated = int(time.time())
+        self.count = 0
+
+    def to_dict(self) -> dict:
+        """
+        Dump context group to dict
+
+        :return: dict
+        """
+        return {
+            "id": self.id,
+            "uuid": self.uuid,
+            "name": self.name,
+            "items": self.items,
+            "created": self.created,
+            "updated": self.updated,
+            "count": self.count,
+        }
+
+    def from_dict(self, data: dict):
+        """
+        Load context group from dict
+
+        :param data: dict
+        """
+        self.id = data.get("id", None)
+        self.uuid = data.get("uuid", None)
+        self.name = data.get("name", None)
+        self.items = data.get("items", [])
+        self.created = data.get("created", None)
+        self.updated = data.get("updated", None)
+        self.count = data.get("count", 0)
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/item/index.py` & `pygpt_net-2.2.0/src/pygpt_net/item/attachment.py`

 * *Files 12% similar despite different names*

```diff
@@ -2,64 +2,75 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.01.27 17:00:00                  #
+# Updated Date: 2024.04.26 23:00:00                  #
 # ================================================== #
 
 import json
 
 
-class IndexItem:
+class AttachmentItem:
     def __init__(self):
         """
-        Index item
+        Attachment item
         """
-        self.id = None
         self.name = None
-        self.store = None
-        self.items = {}
+        self.id = None
+        self.path = None
+        self.remote = None
+        self.vector_store_ids = []
+        self.size = 0
+        self.send = False
 
     def serialize(self) -> dict:
         """
         Serialize item to dict
 
         :return: serialized item
         """
         return {
             'id': self.id,
             'name': self.name,
-            'store': self.store,
-            'items': self.items,
+            'path': self.path,
+            'size': self.size,
+            'remote': self.remote,
+            'vector_store_ids': self.vector_store_ids,
+            'send': self.send
         }
 
     def deserialize(self, data: dict):
         """
         Deserialize item from dict
 
         :param data: serialized item
         """
         if 'id' in data:
             self.id = data['id']
         if 'name' in data:
             self.name = data['name']
-        if 'store' in data:
-            self.store = data['store']
-        if 'items' in data:
-            self.items = data['items']
+        if 'path' in data:
+            self.path = data['path']
+        if 'size' in data:
+            self.size = data['size']
+        if 'remote_id' in data:
+            self.remote = data['remote']
+        if 'vector_store_ids' in data:
+            self.vector_store_ids = data['vector_store_ids']
+        if 'send' in data:
+            self.send = data['send']
 
-    def dump(self):
+    def dump(self) -> str:
         """
         Dump item to string
 
         :return: serialized item
-        :rtype: str
         """
         try:
             return json.dumps(self.serialize())
         except Exception as e:
             pass
         return ""
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/item/mode.py` & `pygpt_net-2.2.0/src/pygpt_net/item/mode.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/item/model.py` & `pygpt_net-2.2.0/src/pygpt_net/item/model.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/item/notepad.py` & `pygpt_net-2.2.0/src/pygpt_net/item/notepad.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/item/preset.py` & `pygpt_net-2.2.0/src/pygpt_net/item/preset.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/launcher.py` & `pygpt_net-2.2.0/src/pygpt_net/launcher.py`

 * *Files 14% similar despite different names*

```diff
@@ -2,26 +2,28 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.24 00:00:00                  #
+# Updated Date: 2024.04.20 06:00:00                  #
 # ================================================== #
 
 import sys
 import argparse
 from logging import ERROR, WARNING, INFO, DEBUG
 
+from PySide6.QtCore import QCoreApplication, Qt
 from PySide6.QtGui import QScreen
 from PySide6.QtWidgets import QApplication
 
 from pygpt_net.core.debug import Debug
 from pygpt_net.core.platforms import Platforms
+from pygpt_net.tools import BaseTool
 from pygpt_net.ui.main import MainWindow
 from pygpt_net.plugin.base import BasePlugin
 from pygpt_net.provider.llms.base import BaseLLM
 from pygpt_net.provider.loaders.base import BaseLoader
 from pygpt_net.provider.vector_stores.base import BaseStore
 from pygpt_net.provider.audio_input.base import BaseProvider as BaseAudioInput
 from pygpt_net.provider.audio_output.base import BaseProvider as BaseAudioOutput
@@ -30,48 +32,73 @@
 
 class Launcher:
     def __init__(self):
         """Launcher"""
         self.app = None
         self.window = None
         self.debug = False
+        self.force_legacy = False
+        self.force_disable_gpu = False
 
     def setup(self) -> dict:
         """
         Setup launcher
 
         :return: dict with launcher arguments
         """
         parser = argparse.ArgumentParser()
         parser.add_argument(
             "-d",
             "--debug",
             required=False,
             help="debug mode (0=disabled, 1=info, 2=debug)",
         )
+        parser.add_argument(
+            "-l",
+            "--legacy",
+            required=False,
+            help="force enable legacy mode (0=disabled, 1=enable)",
+        )
+        parser.add_argument(
+            "-n",
+            "--disable-gpu",
+            required=False,
+            help="force disable OpenGL (1=disabled, 0=enabled)",
+        )
         args = vars(parser.parse_args())
 
         # set log level [ERROR|WARNING|INFO|DEBUG]
         if "debug" in args and args["debug"] == "1":
             print("** Debug mode enabled (1=INFO)")
             Debug.init(INFO)
             self.debug = True
         elif "debug" in args and args["debug"] == "2":
             print("** Debug mode enabled (2=DEBUG)")
             Debug.init(DEBUG)
             self.debug = True
         else:
             Debug.init(ERROR)  # default log level
 
+        # force legacy mode
+        if "legacy" in args and args["legacy"] == "1":
+            print("** Force legacy mode enabled")
+            self.force_legacy = True
+
+        # force disable GPU
+        if "disable-gpu" in args and args["disable-gpu"] == "1":
+            print("** Force disable GPU enabled")
+            self.force_disable_gpu = True
+
         return args
 
     def init(self):
         """Initialize app"""
         args = self.setup()
         Platforms.prepare()  # setup platform specific options
+        QCoreApplication.setAttribute(Qt.AA_ShareOpenGLContexts)
         self.app = QApplication(sys.argv)
         self.window = MainWindow(self.app, args=args)
 
     def add_plugin(self, plugin: BasePlugin):
         """
         Register plugin
 
@@ -172,14 +199,29 @@
                 "Web provider must be instance of: "
                 "pygpt_net.provider.web.base.BaseProvider"
             )
         self.window.add_web(provider)
         if self.debug:
             print("Loaded web provider: {} ({})".format(provider.id, provider.__class__.__name__))
 
+    def add_tool(self, tool: BaseTool):
+        """
+        Register tool
+
+        :param tool: tool instance
+        """
+        if not isinstance(tool, BaseTool):
+            raise TypeError(
+                "Tool must be instance of: "
+                "pygpt_net.tools.base.BaseTool"
+            )
+        self.window.add_tool(tool)
+        if self.debug:
+            print("Loaded tool: {} ({})".format(tool.id, tool.__class__.__name__))
+
     def run(self):
         """Run app"""
         self.window.setup()
         geometry = self.window.screen().availableGeometry()
         pos = QScreen.availableGeometry(QApplication.primaryScreen()).topLeft()
         margin = 100
         self.window.resize(geometry.width() - margin, geometry.height() - margin)
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/migrations/Version20231227152900.py` & `pygpt_net-2.2.0/src/pygpt_net/migrations/Version20231227152900.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/migrations/Version20231230095000.py` & `pygpt_net-2.2.0/src/pygpt_net/migrations/Version20231230095000.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/migrations/Version20231231230000.py` & `pygpt_net-2.2.0/src/pygpt_net/migrations/Version20231231230000.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/migrations/Version20240106060000.py` & `pygpt_net-2.2.0/src/pygpt_net/migrations/Version20240106060000.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/migrations/Version20240107060000.py` & `pygpt_net-2.2.0/src/pygpt_net/migrations/Version20240107060000.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/migrations/Version20240222160000.py` & `pygpt_net-2.2.0/src/pygpt_net/migrations/Version20240222160000.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/migrations/Version20240223050000.py` & `pygpt_net-2.2.0/src/pygpt_net/migrations/Version20240223050000.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/migrations/Version20240303190000.py` & `pygpt_net-2.2.0/src/pygpt_net/migrations/Version20240303190000.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/migrations/__init__.py` & `pygpt_net-2.2.0/src/pygpt_net/migrations/__init__.py`

 * *Files 11% similar despite different names*

```diff
@@ -2,26 +2,27 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.03.03 22:00:00                  #
+# Updated Date: 2024.04.26 23:00:00                  #
 # ================================================== #
 
 from .Version20231227152900 import Version20231227152900  # 2.0.59
 from .Version20231230095000 import Version20231230095000  # 2.0.66
 from .Version20231231230000 import Version20231231230000  # 2.0.71
 from .Version20240106060000 import Version20240106060000  # 2.0.84
 from .Version20240107060000 import Version20240107060000  # 2.0.88
 from .Version20240222160000 import Version20240222160000  # 2.0.162
 from .Version20240223050000 import Version20240223050000  # 2.0.163
 from .Version20240303190000 import Version20240303190000  # 2.1.8
-
+from .Version20240408180000 import Version20240408180000  # 2.1.41
+from .Version20240426050000 import Version20240426050000  # 2.1.79
 
 class Migrations:
     def __init__(self):
         pass
 
     @staticmethod
     def get_versions() -> list:
@@ -35,8 +36,10 @@
             Version20231230095000(),  # 2.0.66
             Version20231231230000(),  # 2.0.71
             Version20240106060000(),  # 2.0.84
             Version20240107060000(),  # 2.0.88
             Version20240222160000(),  # 2.0.162
             Version20240223050000(),  # 2.0.163
             Version20240303190000(),  # 2.1.8
+            Version20240408180000(),  # 2.1.41
+            Version20240426050000(),  # 2.1.79
         ]
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/migrations/base.py` & `pygpt_net-2.2.0/src/pygpt_net/migrations/base.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/plugin/agent/__init__.py` & `pygpt_net-2.2.0/src/pygpt_net/plugin/agent/__init__.py`

 * *Files 3% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.25 06:00:00                  #
+# Updated Date: 2024.03.06 22:00:00                  #
 # ================================================== #
 
 from pygpt_net.plugin.base import BasePlugin
 from pygpt_net.core.dispatcher import Event
 from pygpt_net.item.ctx import CtxItem
 
 
@@ -187,17 +187,22 @@
         :param args: event args
         :param kwargs: event kwargs
         """
         name = event.name
         data = event.data
         ctx = event.ctx
 
+        always_events = [Event.FORCE_STOP, Event.PLUGIN_SETTINGS_CHANGED, Event.ENABLE, Event.DISABLE]
+
         if not self.is_allowed() and name != Event.DISABLE:
             return
 
+        if name not in always_events and not self.is_active_prompt():
+            return
+
         if name == Event.CTX_BEFORE:
             self.on_ctx_before(ctx)
 
         elif name == Event.CTX_AFTER:
             self.on_ctx_after(ctx)
 
         elif name == Event.CTX_END:
@@ -231,22 +236,35 @@
         ]:
             if self.get_option_value("auto_stop"):
                 self.cmd(
                     ctx,
                     data['commands'],
                 )
 
+    def is_active_prompt(self) -> bool:
+        """
+        Check if active prompt is enabled
+
+        :return: True if active prompt is enabled
+        """
+        for item in self.get_option_value("prompts"):
+            if item["enabled"]:
+                return True
+        return False
+
     def on_system_prompt(self, prompt: str) -> str:
         """
         Event: SYSTEM_PROMPT
 
         :param prompt: prompt
         :return: updated prompt
         """
-        return self.window.controller.agent.flow.on_system_prompt(
+        pre_prompt = ("YOU ARE NOW AN AUTONOMOUS AGENT AND YOU ARE ENTERING NOW INTO AGENT MODE.\n"
+                      "Use below instructions in every agent run iteration:\n\n")
+        return pre_prompt + self.window.controller.agent.flow.on_system_prompt(
             prompt,
             append_prompt=self.get_first_active_prompt(),
             auto_stop=self.get_option_value("auto_stop"),
         )
 
     def on_input_before(self, prompt: str) -> str:
         """
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/plugin/audio_input/__init__.py` & `pygpt_net-2.2.0/src/pygpt_net/plugin/audio_input/__init__.py`

 * *Files 4% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.29 19:00:00                  #
+# Updated Date: 2024.03.25 10:00:00                  #
 # ================================================== #
 
 import os
 
 from PySide6.QtCore import Slot
 
 from pygpt_net.plugin.base import BasePlugin
@@ -442,14 +442,17 @@
 
         elif name == Event.AUDIO_INPUT_RECORD_TOGGLE:
             self.toggle_recording_simple()
 
         elif name == Event.AUDIO_INPUT_STOP:
             self.on_stop()
 
+        elif name == Event.AUDIO_INPUT_TRANSCRIBE:
+            self.handle_transcribe(data["path"])
+
         elif name == Event.PLUGIN_OPTION_GET:
             if "name" in data and data["name"] == "audio.input.advanced":
                 data["value"] = self.is_advanced()
 
     def on_ctx_begin(self, ctx: CtxItem):
         """
         Event: CTX_BEGIN
@@ -505,14 +508,52 @@
     def destroy(self):
         """Destroy thread"""
         self.waiting = True
         self.listening = False
         self.thread_started = False
         self.set_status('')
 
+    @Slot(str, str)
+    def handle_transcribed(self, path: str, text: str):
+        """
+        Handle transcribed text
+
+        :param path: audio file path
+        :param text: transcribed text
+        """
+        self.window.tools.get("transcriber").on_transcribe(path, text)
+
+    def handle_transcribe(self, path: str):
+        """
+        Handle transcribe thread
+
+        :param path: audio file path
+        """
+        try:
+            # worker
+            worker = Worker()
+            worker.plugin = self
+            worker.path = path
+            worker.transcribe = True  # file transcribe mode
+
+            # signals
+            worker.signals.transcribed.connect(self.handle_transcribed)
+            worker.signals.finished.connect(self.handle_input)
+            worker.signals.destroyed.connect(self.handle_destroy)
+            worker.signals.started.connect(self.handle_started)
+            worker.signals.stopped.connect(self.handle_stop)
+            worker.signals.status.connect(self.handle_status)
+            worker.signals.error.connect(self.handle_error)
+
+            # start
+            self.window.threadpool.start(worker)
+
+        except Exception as e:
+            self.error(e)
+
     def handle_thread(self, force: bool = False):
         """
         Handle listener thread
 
         :param force: force start
         """
         if self.thread_started and not force:
@@ -525,14 +566,15 @@
             worker.path = os.path.join(
                 self.window.core.config.path,
                 self.input_file,
             )
             worker.advanced = self.is_advanced()  # advanced mode
 
             # signals
+            worker.signals.transcribed.connect(self.handle_transcribed)
             worker.signals.finished.connect(self.handle_input)
             worker.signals.destroyed.connect(self.handle_destroy)
             worker.signals.started.connect(self.handle_started)
             worker.signals.stopped.connect(self.handle_stop)
             worker.signals.status.connect(self.handle_status)
             worker.signals.error.connect(self.handle_error)
 
@@ -649,15 +691,18 @@
                 self.window.controller.calendar.note.append_text(text)
                 self.set_status('')
                 self.window.controller.chat.render.clear_input()  # clear here
             # to: chat
             else:
                 self.set_status('...')
                 self.window.ui.status(trans('audio.speak.sending'))
-                self.window.controller.chat.input.send(text)  # send text, input clear in send method
+                prefix = ""
+                if self.window.controller.agent.enabled():
+                    prefix = "user: "
+                self.window.controller.chat.input.send(prefix + text)  # send text, input clear in send method
                 self.set_status('')
 
     @Slot(object)
     def handle_status(self, data: str):
         """
         Handle thread status msg signal
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/plugin/audio_input/simple.py` & `pygpt_net-2.2.0/src/pygpt_net/plugin/audio_input/simple.py`

 * *Files 18% similar despite different names*

```diff
@@ -2,36 +2,42 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.27 18:00:00                  #
+# Updated Date: 2024.04.25 01:00:00                  #
 # ================================================== #
 
 import pyaudio
 import wave
 import os
 
+from PySide6.QtCore import QTimer
+
 from pygpt_net.utils import trans
 
 
 class Simple:
+
+    TIMEOUT_SECONDS = 120  # 2 minutes, max recording time before timeout
+
     def __init__(self, plugin=None):
         """
         Simple audio input handler
 
         :param plugin: plugin instance
         """
         self.plugin = plugin
         self.is_recording = False
         self.frames = []
         self.p = None
         self.stream = None
+        self.timer = None
 
     def toggle_recording(self):
         """Toggle recording"""
         if self.is_recording:
             self.stop_recording()
         else:
             self.start_recording()
@@ -43,61 +49,84 @@
             trans('audio.speak.btn.stop.tooltip'))
 
     def switch_btn_start(self):
         """Switch button to start"""
         self.plugin.window.ui.plugin_addon['audio.input.btn'].btn_toggle.setText(trans('audio.speak.btn'))
         self.plugin.window.ui.plugin_addon['audio.input.btn'].btn_toggle.setToolTip(trans('audio.speak.btn.tooltip'))
 
+    def stop_timeout(self):
+        """Stop timeout"""
+        self.stop_recording(timeout=True)
+
     def start_recording(self):
         """Start recording"""
         self.frames = []  # clear audio frames
 
         def callback(in_data, frame_count, time_info, status):
             self.frames.append(in_data)
             if self.is_recording:
                 return (in_data, pyaudio.paContinue)
             else:
                 return (in_data, pyaudio.paComplete)
 
         try:
             self.is_recording = True
             self.switch_btn_stop()
+
+            # start timeout timer to prevent infinite recording
+            if self.timer is None:
+                self.timer = QTimer()
+                self.timer.timeout.connect(self.stop_timeout)
+                self.timer.start(self.TIMEOUT_SECONDS * 1000)
+
             self.p = pyaudio.PyAudio()
             self.stream = self.p.open(format=pyaudio.paInt16,
                                       channels=1,
                                       rate=44100,
                                       input=True,
                                       frames_per_buffer=1024,
                                       stream_callback=callback)
 
             self.plugin.window.ui.status(trans('audio.speak.now'))
             self.stream.start_stream()
         except Exception as e:
             self.is_recording = False
             self.plugin.window.core.debug.log(e)
-            self.plugin.window.ui.dialogs.alert(str(e))
+            self.plugin.window.ui.dialogs.alert(e)
             if self.plugin.window.core.platforms.is_snap():
                 self.plugin.window.ui.dialogs.open(
                     'snap_audio_input',
                     width=400,
                     height=200
                 )
             self.switch_btn_start()  # switch button to start
 
-    def stop_recording(self):
-        """Stop recording"""
+    def stop_recording(self, timeout: bool = False):
+        """
+        Stop recording
+
+        :param timeout: True if stopped due to timeout
+        """
         self.is_recording = False
-        self.switch_btn_start()
+        if self.timer:
+            self.timer.stop()
+            self.timer = None
+        self.switch_btn_start()  # switch button to start
         path = os.path.join(self.plugin.window.core.config.path, self.plugin.input_file)
 
         if self.stream is not None:
             self.stream.stop_stream()
             self.stream.close()
             self.p.terminate()
 
+            # abort if timeout
+            if timeout:
+                self.plugin.window.ui.status("Timeout ({}s). Aborting...".format(self.TIMEOUT_SECONDS))
+                return
+
             if self.frames:
                 wf = wave.open(path, 'wb')
                 wf.setnchannels(1)
                 wf.setsampwidth(self.p.get_sample_size(pyaudio.paInt16))
                 wf.setframerate(44100)
                 wf.writeframes(b''.join(self.frames))
                 wf.close()
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/plugin/audio_input/worker.py` & `pygpt_net-2.2.0/src/pygpt_net/plugin/audio_input/worker.py`

 * *Files 10% similar despite different names*

```diff
@@ -2,52 +2,76 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.26 22:00:00                  #
+# Updated Date: 2024.03.19 06:00:00                  #
 # ================================================== #
 
 import os.path
 import time
 import speech_recognition as sr
 import audioop
 
-from PySide6.QtCore import Slot
+from PySide6.QtCore import Slot, Signal
 
 from pygpt_net.utils import trans
 from pygpt_net.plugin.base import BaseWorker, BaseSignals
 
 
 class WorkerSignals(BaseSignals):
-    pass  # add custom signals here
+    transcribed = Signal(str, str)
 
 
 class Worker(BaseWorker):
     def __init__(self, *args, **kwargs):
         super(Worker, self).__init__()
         self.signals = WorkerSignals()
         self.args = args
         self.kwargs = kwargs
         self.plugin = None
         self.path = None
         self.advanced = False
+        self.transcribe = False
 
     @Slot()
     def run(self):
         """Run worker."""
-        if self.advanced:
-            self.handle_advanced()
+
+        # from file
+        if self.transcribe:
+            self.handle_file()
+
+        # from microphone
         else:
-            self.handle_simple()
+            if self.advanced:
+                self.handle_advanced()
+            else:
+                self.handle_simple()
+
+    def handle_file(self):
+        """Handle file"""
+        try:
+            # do transcribe
+            if os.path.exists(self.path):
+                transcript = self.plugin.get_provider().transcribe(self.path)
+                if transcript is not None and transcript.strip() != '':
+                    self.signals.transcribed.emit(self.path, transcript)
+                else:
+                    self.status('Error: No transcript.')
+        except Exception as e:
+            self.plugin.window.ui.nodes['audio.transcribe.status'].setText("Failed. Error: {}".format(e))
+            self.error(e)
+            self.stopped()
+            self.status('Error: {}'.format(e))
 
     def handle_simple(self):
-        """Handle simple mode."""
+        """Handle mic simple mode."""
         try:
             # do transcribe
             if os.path.exists(self.path):
                 # set status
                 self.status(trans('audio.speak.wait'))
                 # transcribe audio
                 transcript = self.plugin.get_provider().transcribe(self.path)
@@ -58,15 +82,15 @@
 
         except Exception as e:
             self.error(e)
             self.stopped()
             self.status('Error: {}'.format(e))
 
     def handle_advanced(self):
-        """Handle advanced mode."""
+        """Handle mic advanced mode."""
         try:
             if not self.plugin.listening:
                 return
 
             # print("Starting audio listener....")
 
             self.started()
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/plugin/audio_output/__init__.py` & `pygpt_net-2.2.0/src/pygpt_net/plugin/audio_output/__init__.py`

 * *Files 3% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.24 00:00:00                  #
+# Updated Date: 2024.03.09 10:00:00                  #
 # ================================================== #
 
 from PySide6.QtCore import Slot
 
 from pygpt_net.plugin.base import BasePlugin
 from pygpt_net.provider.audio_output.base import BaseProvider
 from pygpt_net.core.dispatcher import Event
@@ -136,56 +136,62 @@
         if name == Event.INPUT_BEFORE:
             self.on_input_before(data['value'])
 
         elif name in [
             Event.CTX_AFTER,
             Event.AUDIO_READ_TEXT
         ]:
-            self.on_ctx_after(ctx)
+            self.on_ctx_after(ctx, name)
 
         elif name == Event.AUDIO_OUTPUT_STOP:
             self.stop_audio()
 
     def on_input_before(self, text: str):
         """
         Event: INPUT_BEFORE
 
         :param text: text to read
         """
         self.input_text = text
 
-    def on_ctx_after(self, ctx: CtxItem):
+    def on_ctx_after(self, ctx: CtxItem, name: str):
         """
         Events: CTX_AFTER, AUDIO_READ_TEXT
 
         :param ctx: CtxItem
+        :param name: event name
         """
         # check if provider is configured
         if not self.get_provider().is_configured():
             msg = self.get_provider().get_config_message()
             self.window.ui.dialogs.alert(msg)
             return
 
         text = ctx.output
         try:
             if text is not None and len(text) > 0:
                 # worker
                 worker = Worker()
                 worker.plugin = self
+                worker.event = name
                 worker.text = self.window.core.audio.clean_text(text)
 
                 # signals
                 worker.signals.playback.connect(self.handle_playback)
                 worker.signals.stop.connect(self.handle_stop)
                 worker.signals.status.connect(self.handle_status)  # base handler
                 worker.signals.error.connect(self.handle_error)  # base handler
 
                 # start
                 self.window.threadpool.start(worker)
 
+                # only for manual reading
+                if name == Event.AUDIO_READ_TEXT:
+                    self.window.controller.audio.on_begin(worker.text)
+
         except Exception as e:
             self.error(e)
 
     def destroy(self):
         """Destroy thread"""
         pass
 
@@ -217,20 +223,22 @@
 
         Stop playing the audio
         """
         if self.playback is not None:
             self.playback.stop()
             self.playback = None
 
-    @Slot(object)
-    def handle_playback(self, playback):
+    @Slot(object, str)
+    def handle_playback(self, playback, event: str):
         """
         Handle thread playback object
 
         :param playback: playback object
+        :param event: event name
         """
         self.playback = playback
+        self.window.controller.audio.on_play(event)
 
     @Slot()
     def handle_stop(self):
         """Handle thread playback stop"""
         self.stop_audio()
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/plugin/audio_output/worker.py` & `pygpt_net-2.2.0/src/pygpt_net/plugin/audio_output/worker.py`

 * *Files 7% similar despite different names*

```diff
@@ -2,34 +2,35 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.03.04 22:00:00                  #
+# Updated Date: 2024.03.09 10:00:00                  #
 # ================================================== #
 
 from PySide6.QtCore import Slot, Signal
 from pygpt_net.plugin.base import BaseWorker, BaseSignals
 
 
 class WorkerSignals(BaseSignals):
-    playback = Signal(object)
+    playback = Signal(object, str)
     stop = Signal()
 
 
 class Worker(BaseWorker):
     def __init__(self, *args, **kwargs):
         super(Worker, self).__init__()
         self.signals = WorkerSignals()
         self.args = args
         self.kwargs = kwargs
         self.plugin = None
         self.text = None
+        self.event = None
 
     @Slot()
     def run(self):
         from pygame import mixer
         try:
             path = self.plugin.get_provider().speech(self.text)
             if path:
@@ -43,15 +44,15 @@
 
     def send(self, playback):
         """
         Send playback object to main thread
 
         :param playback: playback object
         """
-        self.signals.playback.emit(playback)
+        self.signals.playback.emit(playback, self.event)
 
     def stop_playback(self):
         """Stop audio playback"""
         self.stop()
 
     def stop(self):
         """Send stop signal to main thread"""
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/plugin/base.py` & `pygpt_net-2.2.0/src/pygpt_net/plugin/base.py`

 * *Files 14% similar despite different names*

```diff
@@ -2,18 +2,21 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.03.04 20:00:00                  #
+# Updated Date: 2024.03.18 03:00:00                  #
 # ================================================== #
 
+import copy
+
 from PySide6.QtCore import QObject, Signal, QRunnable, Slot
+from typing_extensions import deprecated
 
 from pygpt_net.core.dispatcher import Event
 from pygpt_net.item.ctx import CtxItem
 from pygpt_net.utils import trans
 
 
 class BasePlugin:
@@ -23,35 +26,37 @@
         self.name = ""
         self.type = []  # Types:
         # audio.input, audio.output, image.input, image.output, schedule, text.input, text.output, vision
         self.description = ""
         self.urls = {}
         self.options = {}
         self.initial_options = {}
+        self.allowed_cmds = []
         self.tabs = {}
         self.parent = None
         self.enabled = False
         self.use_locale = False
         self.order = 0
 
     def setup(self) -> dict:
         """
         Return available config options
 
         :return: config options
         """
         return self.options
 
-    def add_option(self, name: str, type: str, **kwargs):
+    def add_option(self, name: str, type: str, **kwargs) -> dict:
         """
         Add plugin configuration option
 
         :param name: option name (ID, key)
         :param type: option type (text, textarea, bool, int, float, dict, combo)
         :param kwargs: additional keyword arguments for option properties
+        :return: added option config dict
         """
         defaults = {
             "value": None,
             "label": "",
             "description": "",
             "tooltip": None,
             "min": None,
@@ -67,14 +72,93 @@
             "use": None,
         }
         option = {**defaults, **kwargs}
         option['tooltip'] = option['tooltip'] or option['description']
         option["id"] = name
         option["type"] = type
         self.options[name] = option
+        return option
+
+    def add_cmd(self, cmd: str, **kwargs) -> dict:
+        """
+        Add plugin command
+
+        :param cmd: command name
+        :param kwargs: additional keyword arguments for command properties
+        :return: added option config dict
+        """
+        cmd_syntax = {
+            "instruction": "",  # instruction for model
+            "params": {},  # parameters
+            "enabled": True,  # enabled
+        }
+        if "instruction" in kwargs and isinstance(kwargs.get("instruction"), str):
+            cmd_syntax["instruction"] = kwargs.get("instruction")
+            kwargs.pop("instruction")
+        if "params" in kwargs and isinstance(kwargs.get("params"), list):
+            cmd_syntax["params"] = kwargs.get("params")
+            kwargs.pop("params")
+        if "enabled" in kwargs and isinstance(kwargs.get("enabled"), bool):
+            cmd_syntax["enabled"] = kwargs.get("enabled")
+            kwargs.pop("enabled")
+
+        name = "cmd." + cmd
+        kwargs["cmd"] = cmd
+        kwargs["value"] = cmd_syntax
+
+        # static keys
+        kwargs["params_keys"] = {
+            "name": "text",
+            "type": {
+                "type": "combo",
+                "use": "var_types",
+                "keys": {},
+            },
+            "description": "text",
+            "required": "bool",
+        }
+
+        return self.add_option(name, "cmd", **kwargs)
+
+    def has_cmd(self, cmd: str) -> bool:
+        """
+        Check if command exists
+
+        :param cmd: command name
+        :return: True if exists
+        """
+        key = "cmd." + cmd
+        if key in self.options:
+            if "value" in self.options[key] and "enabled" in self.options[key]["value"]:
+                return self.options[key]["value"]["enabled"]
+        return False
+
+    def cmd_allowed(self, cmd: str) -> bool:
+        """
+        Check if command allowed
+
+        :param cmd: command name
+        :return: True if allowed
+        """
+        if cmd in self.allowed_cmds:
+            return True
+        return False
+
+    def get_cmd(self, cmd: str) -> dict:
+        """
+        Return command
+
+        :param cmd: command name
+        :return: command dict
+        """
+        key = "cmd." + cmd
+        if key in self.options:
+            data = copy.deepcopy(self.options[key]["value"]) # make copy to prevent changes in original data
+            data = {"cmd": cmd, **data}
+            return data
 
     def has_option(self, name: str) -> bool:
         """
         Check if option exists
 
         :param name: option name
         :return: True if exists
@@ -147,29 +231,40 @@
         if text is None:
             return ""
         domain = 'plugin.{}'.format(self.id)
         return trans(text, False, domain)
 
     def error(self, err: any):
         """
-        Send error message to logger
+        Send error message to logger and alert dialog
 
         :param err: error message
         """
         self.window.core.debug.log(err)
-        self.window.ui.dialogs.alert("{}: {}".format(self.name, err))
+        msg = self.window.core.debug.parse_alert(err)
+        self.window.ui.dialogs.alert("{}: {}".format(self.name, msg))
 
     def debug(self, data: any):
         """
         Send debug message to logger window
 
         :param data: data to send
         """
         self.window.core.debug.info(data)
 
+    def reply(self, response: dict, ctx: CtxItem = None, extra_data: dict = None):
+        """
+        Send reply from plugin (command response)
+
+        :param response: response
+        :param ctx: context (CtxItem)
+        :param extra_data: extra data
+        """
+        self.handle_finished(response, ctx, extra_data)
+
     def is_log(self) -> bool:
         """
         Check if logging to console is enabled
 
         :return: True if log is enabled
         """
         if self.window.core.config.has("log.plugins") \
@@ -200,21 +295,24 @@
         # handle post-finishing operations
         if isinstance(extra_data, dict):
             if "post_update" in extra_data and isinstance(extra_data["post_update"], list):
                 if "file_explorer" in extra_data["post_update"]:
                     # update file explorer view
                     self.window.controller.files.update_explorer()
 
-        # dispatch late response (reply)
+        # dispatch response (reply)
         if ctx is not None:
             ctx.results.append(response)
             ctx.reply = True
             if "context" in response:
-                ctx.extra_ctx = response["context"]
-                response["result"] = "OK"
+                if self.window.core.config.get("ctx.use_extra"):
+                    ctx.extra_ctx = response["context"]
+                    response["result"] = "OK"
+                else:
+                    del response["context"]
             self.window.core.dispatcher.reply(ctx)
 
     @Slot(object)
     def handle_status(self, data: str):
         """
         Handle thread status msg signal
 
@@ -299,19 +397,31 @@
         Emit log signal
 
         :param msg: log message
         """
         if self.signals is not None and hasattr(self.signals, "log"):
             self.signals.log.emit(msg)
 
+    @deprecated("From 2.1.29: BaseWorker.response() is deprecated, use BaseWorker.reply() instead")
     def response(self, response: dict, extra_data: dict = None):
         """
-        Emit finished signal
+        Emit finished signal (deprecated)
 
-        :param response: response
+        :param response: response (dict)
+        :param extra_data: extra data
+        """
+        # show warning
+        self.debug("BaseWorker.response is deprecated from 2.1.29, use BaseWorker.reply instead")
+        self.reply(response, extra_data)
+
+    def reply(self, response: dict, extra_data: dict = None):
+        """
+        Emit finished signal (on reply from command output)
+
+        :param response: response (dict)
         :param extra_data: extra data
         """
         if self.signals is not None and hasattr(self.signals, "finished"):
             self.signals.finished.emit(response, self.ctx, extra_data)
 
     def started(self):
         """Emit started signal"""
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/plugin/cmd_api/worker.py` & `pygpt_net-2.2.0/src/pygpt_net/plugin/cmd_api/worker.py`

 * *Files 17% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.25 01:00:00                  #
+# Updated Date: 2024.03.16 12:00:00                  #
 # ================================================== #
 
 import json
 from urllib.parse import quote
 
 from PySide6.QtCore import Slot
 
@@ -29,130 +29,151 @@
         self.kwargs = kwargs
         self.plugin = None
         self.cmds = None
         self.ctx = None
 
     @Slot()
     def run(self):
+        responses = []
         msg = None
         for item in self.cmds:
             for my_cmd in self.plugin.get_option_value("cmds"):
-                request = {
-                    "cmd": item["cmd"],
-                }  # prepare request item for result
-
                 if my_cmd["name"] == item["cmd"]:
-                    request = {
-                        "cmd": my_cmd["name"],
-                        "type": my_cmd["type"],
-                        "url": my_cmd["endpoint"],
-                    }
                     try:
-                        post_params = {}
-                        post_json = str(my_cmd["post_json"])  # POST JSON, as string
-                        headers = {}  # HTTP headers, if any, Auth, API key, etc.
-                        result = None
-
-                        # prepare call
-                        endpoint = my_cmd["endpoint"]  # API endpoint URL
-
-                        # extract extra headers from JSON if any
-                        if 'headers' in my_cmd and my_cmd["headers"].strip() != "":
-                            try:
-                                headers = json.loads(my_cmd["headers"])  # key-value pairs
-                            except json.JSONDecodeError as e:
-                                msg = "Error decoding headers JSON: {}".format(e)
-                                self.log(msg)
-                                continue
-
-                        # append GET params to endpoint URL placeholders
-                        if 'get_params' in my_cmd and my_cmd["get_params"].strip() != "":
-                            # append params to cmd placeholders
-                            params_list = self.plugin.extract_params(
-                                my_cmd["get_params"],
-                            )
-                            for param in params_list:
-                                if param in item["params"]:
-                                    endpoint = endpoint.replace(
-                                        "{" + param + "}",  # replace { placeholder }
-                                        quote(str(item["params"][param])),
-                                    )
-
-                        # append POST params to POST data placeholders and POST JSON
-                        if 'post_params' in my_cmd and my_cmd["post_params"].strip() != "":
-                            # append params to post params
-                            params_list = self.plugin.extract_params(
-                                my_cmd["post_params"],
-                            )
-                            for param in params_list:
-                                if param in item["params"]:
-                                    post_params[param] = item["params"][param]
-
-                                    # append to POST JSON
-                                    post_json = post_json.replace(
-                                        "%" + param + "%",  # replace % placeholder
-                                        str(item["params"][param]),
-                                    )
-
-                        # check if endpoint is not empty
-                        if endpoint is None or endpoint == "":
-                            msg = "Endpoint URL is empty!"
-                            self.log(msg)
+                        response = self.handle_cmd(my_cmd, item)
+                        if response is False:
                             continue
-
-                        # check if type is not empty
-                        if my_cmd["type"] not in ["POST", "POST_JSON", "GET"]:
-                            my_cmd["type"] = "GET"
-
-                        # POST
-                        if my_cmd["type"] == "POST":
-                            msg = "[POST] Calling API endpoint: {}".format(endpoint)
-                            self.log(msg)
-                            result = self.plugin.call_post(endpoint, post_params, headers)
-
-                        # POST JSON
-                        elif my_cmd["type"] == "POST_JSON":
-                            msg = "[POST JSON] Calling API endpoint: {}".format(endpoint)
-                            self.log(msg)
-                            try:
-                                json_object = {}
-                                if post_json is not None and post_json.strip() != "":
-                                    json_object = json.loads(post_json)
-                                result = self.plugin.call_post_json(endpoint, json_object, headers)
-                            except Exception as e:
-                                msg = "Error: {}".format(e)
-                                self.error(e)
-                                self.log(msg)
-
-                        # GET
-                        elif my_cmd["type"] == "GET":
-                            msg = "[GET] Calling API endpoint: {}".format(endpoint)
-                            self.log(msg)
-                            result = self.plugin.call_get(endpoint, headers)
-
-                        if result is None:
-                            result = "No response from API."
-                            self.log(result)
-                        else:
-                            # encode bytes result to utf-8
-                            result = result.decode("utf-8")
-
-                        request["url"] = endpoint
-
-                        response = {
-                            "request": request,
-                            "result": result,
-                        }
+                        responses.append(response)
 
                     except Exception as e:
                         msg = "Error: {}".format(e)
-                        response = {
-                            "request": request,
+                        responses.append({
+                            "request": {
+                                "cmd": item["cmd"],
+                            },
                             "result": "Error {}".format(e),
-                        }
+                        })
                         self.error(e)
                         self.log(msg)
-                    self.response(response)
+
+        # send response
+        if len(responses) > 0:
+            for response in responses:
+                self.reply(response)
 
         # update status
         if msg is not None:
             self.status(msg)
+
+    def handle_cmd(self, command: dict, item: dict) -> dict or bool:
+        """
+        Handle API command
+
+        :param command: command configuration
+        :param item: requested item
+        :return: response or False
+        """
+        request = {
+            "cmd": command["name"],
+            "type": command["type"],
+            "url": command["endpoint"],
+        }
+        post_params = {}
+        post_json_tpl = ""
+        headers = {}  # HTTP headers, if any, Auth, API key, etc.
+        result = None
+        if 'post_json' in command and command["post_json"].strip() != "":
+            post_json_tpl = str(command["post_json"])  # POST JSON, as string
+
+        # prepare call
+        endpoint = command["endpoint"]  # API endpoint URL
+
+        # extract extra headers from JSON if any
+        if 'headers' in command and command["headers"].strip() != "":
+            try:
+                headers = json.loads(command["headers"])  # key-value pairs
+            except json.JSONDecodeError as e:
+                msg = "Error decoding headers JSON: {}".format(e)
+                self.log(msg)
+                return False # abort
+
+        # append GET params to endpoint URL placeholders
+        if 'get_params' in command and command["get_params"].strip() != "":
+            # append params to cmd placeholders
+            params_list = self.plugin.extract_params(
+                command["get_params"],
+            )
+            for p in params_list:
+                param = p["name"]
+                if param in item["params"]:
+                    endpoint = endpoint.replace(
+                        "{" + param + "}",  # replace { placeholder }
+                        quote(str(item["params"][param])),
+                    )
+
+        # append POST params to POST data placeholders and POST JSON
+        if 'post_params' in command and command["post_params"].strip() != "":
+            # append params to post params
+            params_list = self.plugin.extract_params(
+                command["post_params"],
+            )
+            for p in params_list:
+                param = p["name"]
+                if param in item["params"]:
+                    post_params[param] = item["params"][param]
+
+                    # append to POST JSON
+                    post_json_tpl = post_json_tpl.replace(
+                        "%" + param + "%",  # replace % placeholder
+                        str(item["params"][param]),
+                    )
+
+        # check if endpoint is not empty
+        if endpoint is None or endpoint == "":
+            msg = "Endpoint URL is empty!"
+            self.log(msg)
+            return False # abort
+
+        # check if type is not empty
+        if command["type"] not in ["POST", "POST_JSON", "GET"]:
+            command["type"] = "GET"
+
+        # POST
+        if command["type"] == "POST":
+            msg = "[POST] Calling API endpoint: {}".format(endpoint)
+            self.log(msg)
+            result = self.plugin.call_post(endpoint, post_params, headers)
+
+        # POST JSON
+        elif command["type"] == "POST_JSON":
+            msg = "[POST JSON] Calling API endpoint: {}".format(endpoint)
+            self.log(msg)
+            try:
+                json_object = {}
+                if post_json_tpl is not None and post_json_tpl.strip() != "":
+                    json_object = json.loads(post_json_tpl)
+                result = self.plugin.call_post_json(endpoint, json_object, headers)
+            except Exception as e:
+                msg = "Error: {}".format(e)
+                self.error(e)
+                self.log(msg)
+
+        # GET
+        elif command["type"] == "GET":
+            msg = "[GET] Calling API endpoint: {}".format(endpoint)
+            self.log(msg)
+            result = self.plugin.call_get(endpoint, headers)
+
+        if result is None:
+            result = "No response from API."
+            self.log(result)
+        else:
+            # encode bytes result to utf-8
+            result = result.decode("utf-8")
+
+        # prepare response
+        request["url"] = endpoint
+        response = {
+            "request": request,
+            "result": result,
+        }
+        return response
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/plugin/cmd_code_interpreter/__init__.py` & `pygpt_net-2.2.0/src/pygpt_net/plugin/cmd_code_interpreter/__init__.py`

 * *Files 23% similar despite different names*

```diff
@@ -2,36 +2,45 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.18 05:00:00                  #
+# Updated Date: 2024.03.25 10:00:00                  #
 # ================================================== #
 
+from PySide6.QtCore import Slot
+
 from pygpt_net.plugin.base import BasePlugin
 from pygpt_net.core.dispatcher import Event
 from pygpt_net.item.ctx import CtxItem
 
 from .runner import Runner
 from .worker import Worker
 
 
 class Plugin(BasePlugin):
     def __init__(self, *args, **kwargs):
         super(Plugin, self).__init__(*args, **kwargs)
         self.id = "cmd_code_interpreter"
         self.name = "Command: Code Interpreter"
         self.description = "Provides Python code execution"
+        self.type = [
+            'interpreter',
+        ]
         self.order = 100
         self.allowed_cmds = [
             "code_execute",
             "code_execute_file",
+            "code_execute_all",
             "sys_exec",
+            "get_python_output",
+            "get_python_input",
+            "clear_python_output",
         ]
         self.use_locale = True
         self.init_options()
         self.runner = Runner(self)
 
     def init_options(self):
         """Initialize options"""
@@ -40,35 +49,14 @@
             "python_cmd_tpl",
             type="text",
             value="python3 {filename}",
             label="Python command template",
             description="Python command template to execute, use {filename} for filename placeholder",
         )
         self.add_option(
-            "cmd_code_execute",
-            type="bool",
-            value=True,
-            label="Enable: Python Code Generate and Execute",
-            description="Allows Python code execution (generate and execute from file)",
-        )
-        self.add_option(
-            "cmd_code_execute_file",
-            type="bool",
-            value=True,
-            label="Enable: Python Code Execute (File)",
-            description="Allows Python code execution from existing file",
-        )
-        self.add_option(
-            "cmd_sys_exec",
-            type="bool",
-            value=True,
-            label="Enable: System Command Execute",
-            description="Allows system commands execution",
-        )
-        self.add_option(
             "sandbox_docker",
             type="bool",
             value=False,
             label="Sandbox (docker container)",
             description="Executes commands in sandbox (docker container). "
                         "Docker must be installed and running.",
         )
@@ -82,40 +70,107 @@
         self.add_option(
             "auto_cwd",
             type="bool",
             value=True,
             label="Auto-append CWD to sys_exec",
             description="Automatically append current working directory to sys_exec command",
         )
-
-        # cmd syntax (prompt/instruction)
         self.add_option(
-            "syntax_code_execute",
-            type="textarea",
-            value='"code_execute": create and execute Python code, params: "filename", "code"',
-            label="Syntax: code_execute",
-            description="Syntax for Python code execution (generate and execute from file)",
-            advanced=True,
+            "attach_output",
+            type="bool",
+            value=True,
+            label="Connect to the Python code interpreter window",
+            description="Attach code input/output to the Python code interpreter window.",
         )
-        self.add_option(
-            "syntax_code_execute_file",
-            type="textarea",
-            value='"code_execute_file": execute Python code from existing file, params: "filename"',
-            label="Syntax: code_execute_file",
-            description="Syntax for Python code execution from existing file",
-            advanced=True,
+
+        # commands
+        self.add_cmd(
+            "code_execute",
+            instruction="save generated Python code and execute it",
+            params=[
+                {
+                    "name": "path",
+                    "type": "str",
+                    "description": "path to save",
+                    "default": ".interpreter.current.py",
+                    "required": True,
+                },
+                {
+                    "name": "code",
+                    "type": "str",
+                    "description": "code",
+                    "required": True,
+                },
+            ],
+            enabled=True,
+            description="Allows Python code execution (generate and execute from file)",
         )
-        self.add_option(
-            "syntax_sys_exec",
-            type="textarea",
-            value='"sys_exec": execute ANY system command, script or application in user\'s '
-                  'environment, params: "command"',
-            label="Syntax: sys_exec",
-            description="Syntax for system commands execution",
-            advanced=True,
+        self.add_cmd(
+            "code_execute_file",
+            instruction="execute Python code from existing file",
+            params=[
+                {
+                    "name": "path",
+                    "type": "str",
+                    "description": "file path",
+                    "required": True,
+                },
+            ],
+            enabled=True,
+            description="Allows Python code execution from existing file",
+        )
+        # commands
+        self.add_cmd(
+            "code_execute_all",
+            instruction="run all Python code from my interpreter",
+            params=[
+                {
+                    "name": "code",
+                    "type": "str",
+                    "description": "code to append and execute",
+                    "required": True,
+                },
+            ],
+            enabled=True,
+            description="Allows Python code execution (generate and execute from file)",
+        )
+        self.add_cmd(
+            "sys_exec",
+            instruction="execute ANY system command, script or app in user's environment",
+            params=[
+                {
+                    "name": "command",
+                    "type": "str",
+                    "description": "system command",
+                    "required": True,
+                },
+            ],
+            enabled=True,
+            description="Allows system commands execution",
+        )
+        self.add_cmd(
+            "get_python_output",
+            instruction="get output from my Python interpreter",
+            params=[],
+            enabled=True,
+            description="Allows to get output from last executed code",
+        )
+        self.add_cmd(
+            "get_python_input",
+            instruction="get all input code from my Python interpreter",
+            params=[],
+            enabled=True,
+            description="Allows to get input from Python interpreter",
+        )
+        self.add_cmd(
+            "clear_python_output",
+            instruction="clear output from my Python interpreter",
+            params=[],
+            enabled=True,
+            description="Allows to clear output from last executed code",
         )
 
     def setup(self) -> dict:
         """
         Return available config options
 
         :return: config options
@@ -159,22 +214,37 @@
         """
         # get current working directory
         cwd = self.window.core.config.get_user_dir('data')
         if self.get_option_value("sandbox_docker"):
             cwd = "/data (in docker sandbox)"
 
         for item in self.allowed_cmds:
-            if self.is_cmd_allowed(item):
-                key = "syntax_" + item
-                if self.has_option(key):
-                    value = self.get_option_value(key)
-                    if self.get_option_value("auto_cwd") and item == "sys_exec":
-                        value += "\nIMPORTANT: ALWAYS use an absolute (not relative) paths when passing " \
-                                 "ANY commands to \"command\" param, the current working directory is: {}".format(cwd)
-                    data['syntax'].append(value)
+            if self.has_cmd(item):
+                cmd = self.get_cmd(item)
+                if self.get_option_value("auto_cwd") and item == "sys_exec":
+                    cmd["instruction"] += "\nIMPORTANT: ALWAYS use absolute (not relative) path when passing " \
+                                          "ANY command to \"command\" param, current working directory: {}".format(cwd)
+                data['cmd'].append(cmd)  # append command
+
+    @Slot(object, str)
+    def handle_interpreter_output(self, data, type):
+        """
+        Handle interpreter output
+
+        :param data: output data
+        :param type: output type
+        """
+        if not self.get_option_value("attach_output"):
+            return
+        self.window.tools.get("interpreter").append_output(data, type)
+
+    @Slot()
+    def handle_interpreter_clear(self):
+        """Handle interpreter clear"""
+        self.window.tools.get("interpreter").clear_all()
 
     def cmd(self, ctx: CtxItem, cmds: list):
         """
         Event: CMD_EXECUTE
 
         :param ctx: CtxItem
         :param cmds: commands dict
@@ -198,14 +268,16 @@
 
             # signals (base handlers)
             worker.signals.finished.connect(self.handle_finished)
             worker.signals.log.connect(self.handle_log)
             worker.signals.debug.connect(self.handle_debug)
             worker.signals.status.connect(self.handle_status)
             worker.signals.error.connect(self.handle_error)
+            worker.signals.output.connect(self.handle_interpreter_output)
+            worker.signals.clear.connect(self.handle_interpreter_clear)
 
             # connect signals
             self.runner.signals = worker.signals
 
             # check if async allowed
             if not self.window.core.dispatcher.async_allowed(ctx):
                 worker.run()
@@ -213,26 +285,14 @@
 
             # start
             self.window.threadpool.start(worker)
 
         except Exception as e:
             self.error(e)
 
-    def is_cmd_allowed(self, cmd: str) -> bool:
-        """
-        Check if cmd is allowed
-
-        :param cmd: command name
-        :return: True if allowed
-        """
-        key = "cmd_" + cmd
-        if self.has_option(key) and self.get_option_value(key) is True:
-            return True
-        return False
-
     def log(self, msg):
         """
         Log message to console
 
         :param msg: message to log
         """
         full_msg = '[CMD] ' + str(msg)
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/plugin/cmd_code_interpreter/runner.py` & `pygpt_net-2.2.0/src/pygpt_net/plugin/cmd_code_interpreter/runner.py`

 * *Files 22% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.03.03 22:00:00                  #
+# Updated Date: 2024.03.20 06:00:00                  #
 # ================================================== #
 
 import os.path
 import subprocess
 import docker
 
 from pygpt_net.item.ctx import CtxItem
@@ -22,42 +22,66 @@
         Cmd Runner
 
         :param plugin: plugin
         """
         self.plugin = plugin
         self.signals = None
 
+    def send_interpreter_input(self, data: str):
+        """
+        Send input to subprocess
+
+        :param data: input text
+        """
+        if self.signals is not None:
+            self.signals.output.emit(data, "stdin")
+
+    def send_interpreter_output(self, data: str, type: str):
+        """
+        Send output to interpreter
+
+        :param data: output text
+        :param type: output type (stdout/stderr)
+        """
+        if self.signals is not None:
+            self.signals.output.emit(data, type)
+
     def handle_result(self, stdout, stderr):
         """
         Handle result from subprocess
 
         :param stdout: stdout
         :param stderr: stderr
         :return: result
         """
         result = None
         if stdout:
             result = stdout.decode("utf-8")
+            self.send_interpreter_output(result, "stdout")
             self.log("STDOUT: {}".format(result))
         if stderr:
             result = stderr.decode("utf-8")
+            self.send_interpreter_output(result, "stderr")
             self.log("STDERR: {}".format(result))
         if result is None:
             result = "No result (STDOUT/STDERR empty)"
             self.log(result)
         return result
 
     def handle_result_docker(self, response) -> str:
         """
         Handle result from docker container
 
         :param response: response
         :return: result
         """
-        result = response.decode('utf-8')
+        result = None
+        if response:
+            result = response.decode('utf-8')
+        self.send_interpreter_output(result, "stdout")
         self.log(
             "Result: {}".format(result),
             sandbox=True,
         )
         return result
 
     def is_sandbox(self) -> bool:
@@ -94,223 +118,316 @@
         mapping = {}
         mapping[path] = {
             "bind": "/data",
             "mode": "rw",
         }
         return mapping
 
-    def run_docker(self, cmd: str):
+    def run_docker(self, cmd: str) -> bytes or None:
         """
         Run docker container with command and return response
 
         :param cmd: command to run
         :return: response
         """
         client = self.get_docker()
         mapping = self.get_volumes()
-        return client.containers.run(
-            self.get_docker_image(),
-            cmd,
-            volumes=mapping,
-            working_dir="/data",
-            stdout=True,
-            stderr=True,
-        )
+        response = None
+        try:
+            response = client.containers.run(
+                self.get_docker_image(),
+                cmd,
+                volumes=mapping,
+                working_dir="/data",
+                stdout=True,
+                stderr=True,
+            )
+        except Exception as e:
+            # self.error(e)
+            response = str(e).encode("utf-8")
+        return response
 
-    def code_execute_file_sandbox(self, ctx: CtxItem, item: dict, request_item: dict) -> dict:
+
+    def code_execute_file_host(self, ctx, item: dict, request: dict) -> dict or None:
         """
-        Execute code from file in sandbox (docker)
+        Execute code from file on host machine
 
         :param ctx: CtxItem
         :param item: command item
-        :param request_item: request item
+        :param request: request item
         :return: response dict
         """
-        msg = "Executing Python file: {}".format(item["params"]['filename'])
-        self.log(msg, sandbox=True)
-        cmd = self.plugin.get_option_value('python_cmd_tpl').format(
-            filename=item["params"]['filename'],
-        )
-        self.log("Running command: {}".format(cmd), sandbox=True)
-        response = self.run_docker(cmd)
-        result = self.handle_result_docker(response)
-        return {
-            "request": request_item,
-            "result": result,
-        }
+        msg = "Executing Python file: {}".format(item["params"]['path'])
+        self.log(msg)
+        path = self.prepare_path(item["params"]['path'], on_host=True)
 
-    def code_execute_sandbox(self, ctx, item: dict, request_item: dict) -> dict:
-        """
-        Execute code in sandbox (docker)
+        # check if file exists
+        if not os.path.isfile(path):
+            return {
+                "request": request,
+                "result": "File not found",
+            }
 
-        :param ctx: CtxItem
-        :param item: command item
-        :param request_item: request item
-        :return: response dict
         """
-        msg = "Saving Python file: {}".format(item["params"]['filename'])
-        self.log(msg, sandbox=True)
-        path = self.prepare_path(item["params"]['filename'])
-        data = item["params"]['code']
-        with open(path, 'w', encoding="utf-8") as file:
-            file.write(data)
+        # send input to interpreter
+        with open(path, 'r', encoding="utf-8") as file:
+            code = file.read()
+            self.append_input(code)
+            self.send_interpreter_input(code)  # send input to interpreter
+        """
 
         # run code
-        msg = "Executing Python code: {}".format(item["params"]['code'])
-        self.log(msg, sandbox=True)
-        cmd = self.plugin.get_option_value('python_cmd_tpl').format(
-            filename=item["params"]['filename'],
-        )
-        self.log("Running command: {}".format(cmd), sandbox=True)
-        response = self.run_docker(cmd)
-        result = self.handle_result_docker(response)
+        cmd = self.plugin.get_option_value('python_cmd_tpl').format(filename=path)
+        self.log("Running command: {}".format(cmd))
+        try:
+            process = subprocess.Popen(
+                cmd,
+                shell=True,
+                stdout=subprocess.PIPE,
+                stderr=subprocess.PIPE,
+            )
+            stdout, stderr = process.communicate()
+        except Exception as e:
+            self.error(e)
+            stdout = None
+            stderr = str(e).encode("utf-8")
+        result = self.handle_result(stdout, stderr)
         return {
-            "request": request_item,
-            "result": result,
+            "request": request,
+            "result": str(result),
+            "context": "PYTHON OUTPUT:\n--------------------------------\n" + str(result),
         }
 
-    def sys_exec_sandbox(self, ctx: CtxItem, item: dict, request_item: dict) -> dict:
+    def code_execute_file_sandbox(self, ctx: CtxItem, item: dict, request: dict) -> dict:
         """
-        Execute system command in sandbox (docker)
+        Execute code from file in sandbox (docker)
 
         :param ctx: CtxItem
         :param item: command item
-        :param request_item: request item
+        :param request: request item
         :return: response dict
         """
-        msg = "Executing system command: {}".format(item["params"]['command'])
+        path = item["params"]['path']
+        msg = "Executing Python file: {}".format(path)
         self.log(msg, sandbox=True)
-        self.log(
-            "Running command: {}".format(item["params"]['command']),
-            sandbox=True,
+        cmd = self.plugin.get_option_value('python_cmd_tpl').format(
+            filename=path,
         )
-        response = self.run_docker(item["params"]['command'])
+
+        """
+        # send input to interpreter
+        with open(self.prepare_path(path, on_host=True), 'r', encoding="utf-8") as file:
+            code = file.read()
+            self.append_input(code)
+            self.send_interpreter_input(code)  # send input to interpreter
+        """
+
+        self.log("Running command: {}".format(cmd), sandbox=True)
+        response = self.run_docker(cmd)
         result = self.handle_result_docker(response)
         return {
-            "request": request_item,
-            "result": result,
+            "request": request,
+            "result": str(result),
+            "context": "PYTHON OUTPUT:\n--------------------------------\n" + str(result),
         }
 
-    def code_execute_file_host(self, ctx, item: dict, request_item: dict) -> dict or None:
+    def code_execute_host(self, ctx: CtxItem, item: dict, request: dict, all: bool = False) -> dict:
         """
-        Execute code from file on host machine
+        Execute code on host machine
 
         :param ctx: CtxItem
         :param item: command item
-        :param request_item: request item
+        :param request: request item
+        :param all: execute all
         :return: response dict
         """
-        msg = "Executing Python file: {}".format(item["params"]['filename'])
-        self.log(msg)
-        path = self.prepare_path(item["params"]['filename'])
+        # write code to file
+        data = item["params"]['code']
+        if not all:
+            path = self.plugin.window.tools.get("interpreter").file_current
+            if "path" in item["params"]:
+                path = item["params"]['path']
+            path = self.prepare_path(path, on_host=True)
+            msg = "Saving Python file: {}".format(path)
+            self.log(msg)
+            with open(path, 'w', encoding="utf-8") as file:
+                file.write(data)
+        else:
+            path = self.prepare_path(self.plugin.window.tools.get("interpreter").file_input, on_host=True)
 
-        # check if file exists
-        if not os.path.isfile(path):
-            ctx.results.append(
-                {"request": request_item, "result": "File not found"}
-            )
-            return
+        self.append_input(data)
+        self.send_interpreter_input(data)  # send input to interpreter
 
         # run code
         cmd = self.plugin.get_option_value('python_cmd_tpl').format(filename=path)
         self.log("Running command: {}".format(cmd))
-        process = subprocess.Popen(
-            cmd,
-            shell=True,
-            stdout=subprocess.PIPE,
-            stderr=subprocess.PIPE,
-        )
-        stdout, stderr = process.communicate()
+        try:
+            process = subprocess.Popen(
+                cmd,
+                shell=True,
+                stdout=subprocess.PIPE,
+                stderr=subprocess.PIPE,
+            )
+            stdout, stderr = process.communicate()
+        except Exception as e:
+            self.error(e)
+            stdout = None
+            stderr = str(e).encode("utf-8")
         result = self.handle_result(stdout, stderr)
         return {
-            "request": request_item,
-            "result": result,
+            "request": request,
+            "result": str(result),
+            "context": "PYTHON OUTPUT:\n--------------------------------\n" + str(result),
         }
 
-    def code_execute_host(self, ctx: CtxItem, item: dict, request_item: dict) -> dict:
+    def code_execute_sandbox(self, ctx, item: dict, request: dict, all: bool = False) -> dict:
         """
-        Execute code on host machine
+        Execute code in sandbox (docker)
 
         :param ctx: CtxItem
         :param item: command item
-        :param request_item: request item
+        :param request: request item
+        :param all: execute all
         :return: response dict
         """
-        # write code to file
-        msg = "Saving Python file: {}".format(item["params"]['filename'])
-        self.log(msg)
-        path = self.prepare_path(item["params"]['filename'])
         data = item["params"]['code']
-        with open(path, 'w', encoding="utf-8") as file:
-            file.write(data)
+        if not all:
+            path = self.plugin.window.tools.get("interpreter").file_current
+            if "path" in item["params"]:
+                path = item["params"]['path']
+            msg = "Saving Python file: {}".format(path)
+            self.log(msg, sandbox=True)
+            with open(self.prepare_path(path, on_host=True), 'w', encoding="utf-8") as file:
+                file.write(data)
+        else:
+            path = self.plugin.window.tools.get("interpreter").file_input
+
+        self.append_input(data)
+        self.send_interpreter_input(data)  # send input to interpreter
 
         # run code
-        cmd = self.plugin.get_option_value('python_cmd_tpl').format(filename=path)
-        self.log("Running command: {}".format(cmd))
-        process = subprocess.Popen(
-            cmd,
-            shell=True,
-            stdout=subprocess.PIPE,
-            stderr=subprocess.PIPE,
+        path = self.prepare_path(path, on_host=False)
+        msg = "Executing Python code: {}".format(item["params"]['code'])
+        self.log(msg, sandbox=True)
+        cmd = self.plugin.get_option_value('python_cmd_tpl').format(
+            filename=path,
         )
-        stdout, stderr = process.communicate()
-        result = self.handle_result(stdout, stderr)
+        self.log("Running command: {}".format(cmd), sandbox=True)
+        response = self.run_docker(cmd)
+        result = self.handle_result_docker(response)
         return {
-            "request": request_item,
-            "result": result,
+            "request": request,
+            "result": str(result),
+            "context": "PYTHON OUTPUT:\n--------------------------------\n" + str(result),
         }
 
-    def sys_exec_host(self, ctx: CtxItem, item: dict, request_item: dict) -> dict:
+    def sys_exec_host(self, ctx: CtxItem, item: dict, request: dict) -> dict:
         """
         Execute system command on host
 
         :param ctx: CtxItem
         :param item: command item
-        :param request_item: request item
+        :param request: request item
         :return: response dict
         """
         msg = "Executing system command: {}".format(item["params"]['command'])
         self.log(msg)
         self.log("Running command: {}".format(item["params"]['command']))
-        process = subprocess.Popen(
-            item["params"]['command'],
-            shell=True,
-            stdout=subprocess.PIPE,
-            stderr=subprocess.PIPE,
-        )
-        stdout, stderr = process.communicate()
+        try:
+            process = subprocess.Popen(
+                item["params"]['command'],
+                shell=True,
+                stdout=subprocess.PIPE,
+                stderr=subprocess.PIPE,
+            )
+            stdout, stderr = process.communicate()
+        except Exception as e:
+            self.error(e)
+            stdout = None
+            stderr = str(e).encode("utf-8")
         result = self.handle_result(stdout, stderr)
         return {
-            "request": request_item,
-            "result": result,
+            "request": request,
+            "result": str(result),
+            "context": "SYS OUTPUT:\n--------------------------------\n" + str(result),
+        }
+
+    def sys_exec_sandbox(self, ctx: CtxItem, item: dict, request: dict) -> dict:
+        """
+        Execute system command in sandbox (docker)
+
+        :param ctx: CtxItem
+        :param item: command item
+        :param request: request item
+        :return: response dict
+        """
+        msg = "Executing system command: {}".format(item["params"]['command'])
+        self.log(msg, sandbox=True)
+        self.log(
+            "Running command: {}".format(item["params"]['command']),
+            sandbox=True,
+        )
+        response = self.run_docker(item["params"]['command'])
+        result = self.handle_result_docker(response)
+        return {
+            "request": request,
+            "result": str(result),
+            "context": "SYS OUTPUT:\n--------------------------------\n" + str(result),
         }
 
+    def append_input(self, data: str):
+        """
+        Append input to interpreter input file
+
+        :param data: input data
+        """
+        if not self.plugin.get_option_value("attach_output"):
+            return
+
+        content = ""
+        path = self.prepare_path(self.plugin.window.tools.get("interpreter").file_input, on_host=True)
+        if os.path.isfile(path):
+            with open(path, "r", encoding="utf-8") as f:
+                content = f.read()
+        with open(path, "a", encoding="utf-8") as f:
+            nl = ""
+            if content != "":
+                nl = "\n"
+            if data != "":
+                f.write(nl + data)
+            else:
+                f.write("")
+
     def is_absolute_path(self, path: str) -> bool:
         """
         Check if path is absolute
 
         :param path: path to check
         :return: True if absolute
         """
         return os.path.isabs(path)
 
-    def prepare_path(self, path: str) -> str:
+    def prepare_path(self, path: str, on_host: bool = True) -> str:
         """
         Prepare path
 
         :param path: path to prepare
+        :param on_host: is on host
         :return: prepared path
         """
         if self.is_absolute_path(path):
             return path
         else:
-            return os.path.join(
-                self.plugin.window.core.config.get_user_dir('data'),
-                path,
-            )
+            if not self.is_sandbox() or on_host:
+                return os.path.join(
+                    self.plugin.window.core.config.get_user_dir('data'),
+                    path,
+                )
+            else:
+                return path
 
     def error(self, err: any):
         """
         Log error message
 
         :param err: exception or error message
         """
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/plugin/cmd_custom/__init__.py` & `pygpt_net-2.2.0/src/pygpt_net/plugin/cmd_serial/__init__.py`

 * *Files 16% similar despite different names*

```diff
@@ -2,64 +2,120 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.25 01:00:00                  #
+# Updated Date: 2024.03.16 12:00:00                  #
 # ================================================== #
 
 from pygpt_net.plugin.base import BasePlugin
 from pygpt_net.core.dispatcher import Event
 from pygpt_net.item.ctx import CtxItem
 
 from .worker import Worker
 
 
 class Plugin(BasePlugin):
     def __init__(self, *args, **kwargs):
         super(Plugin, self).__init__(*args, **kwargs)
-        self.id = "cmd_custom"
-        self.name = "Command: Custom Commands"
-        self.description = "Provides availability to create and execute custom commands"
+        self.id = "cmd_serial"
+        self.name = "Command: Serial port / USB"
+        self.description = "Provides commands for reading and sending data to USB ports"
         self.order = 100
+        self.allowed_cmds = [
+            "serial_send",
+            "serial_send_bytes",
+            "serial_read",
+        ]
         self.use_locale = True
         self.init_options()
 
     def init_options(self):
         """Initialize options"""
-        keys = {
-            "enabled": "bool",
-            "name": "text",
-            "instruction": "textarea",
-            "params": "textarea",
-            "cmd": "textarea",
-        }
-        items = [
-            {
-                "enabled": True,
-                "name": "example_cmd",
-                "instruction": "execute tutorial test command by replacing 'hello' and 'world' params with some funny "
-                               "words",
-                "params": "hello, world",
-                "cmd": 'echo "Response from {hello} and {world} at {_time}"',
-            },
-        ]
-        desc = "Add your custom commands here, use {placeholders} to receive params, you can also use predefined " \
-               "placeholders: {_time}, {_date}, {_datetime}, {_file}, {_home) "
-        tooltip = "See the documentation for more details about examples, usage and list of predefined placeholders"
         self.add_option(
-            "cmds",
-            type="dict",
-            value=items,
-            label="Your custom commands",
-            description=desc,
-            tooltip=tooltip,
-            keys=keys,
+            "serial_port",
+            type="text",
+            value="/dev/ttyUSB0",
+            label="USB port",
+            description="USB port name, e.g. /dev/ttyUSB0, /dev/ttyACM0, COM3",
+            min=1,
+            max=None,
+        )
+        self.add_option(
+            "serial_bps",
+            type="int",
+            value=9600,
+            label="Connection speed (baudrate, bps)",
+            description="Port connection speed, in bps, default: 9600",
+            min=1,
+            max=None,
+        )
+        self.add_option(
+            "timeout",
+            type="int",
+            value=1,
+            label="Timeout",
+            description="Timeout in seconds, default: 1",
+            min=0,
+            max=None,
+        )
+        self.add_option(
+            "sleep",
+            type="int",
+            value=2,
+            label="Sleep",
+            description="Sleep in seconds after connection, default: 2",
+            min=0,
+            max=None,
+        )
+
+        # commands
+        self.add_cmd(
+            "serial_send",
+            instruction="send text command to USB port",
+            params=[
+                {
+                    "name": "command",
+                    "type": "str",
+                    "description": "command",
+                    "required": True,
+                },
+            ],
+            enabled=True,
+            description="Enable: Send text commands to USB port",
+        )
+        self.add_cmd(
+            "serial_send_bytes",
+            instruction="send raw bytes to USB port",
+            params=[
+                {
+                    "name": "bytes",
+                    "type": "int",
+                    "description": "bytes",
+                    "required": True,
+                },
+            ],
+            enabled=True,
+            description="Enable: Send raw bytes to USB port",
+        )
+        self.add_cmd(
+            "serial_read",
+            instruction="read data from serial port in seconds duration",
+            params=[
+                {
+                    "name": "duration",
+                    "type": "int",
+                    "description": "duration",
+                    "required": True,
+                },
+            ],
+            enabled=True,
+            description="Enable: Read data from USB port",
         )
 
     def setup(self) -> dict:
         """
         Return available config options
 
         :return: config options
@@ -97,45 +153,31 @@
 
     def cmd_syntax(self, data: dict):
         """
         Event: CMD_SYNTAX
 
         :param data: event data dict
         """
-        for item in self.get_option_value("cmds"):
-            if not item["enabled"]:
-                continue
-            cmd = {
-                "cmd": item["name"],
-                "instruction": item["instruction"],
-                "params": [],
-            }
-            if item["params"].strip() != "":
-                params = self.extract_params(item["params"])
-                if len(params) > 0:
-                    cmd["params"] = params
-
-            data['syntax'].append(cmd)
+        for option in self.allowed_cmds:
+            if self.has_cmd(option):
+                data['cmd'].append(self.get_cmd(option))  # append command
 
     def cmd(self, ctx: CtxItem, cmds: list):
         """
         Event: CMD_EXECUTE
 
         :param ctx: CtxItem
         :param cmds: commands dict
         """
         is_cmd = False
         my_commands = []
         for item in cmds:
-            for my_cmd in self.get_option_value("cmds"):
-                if not my_cmd["enabled"]:
-                    continue
-                if my_cmd["name"] == item["cmd"]:
-                    is_cmd = True
-                    my_commands.append(item)
+            if item["cmd"] in self.allowed_cmds:
+                my_commands.append(item)
+                is_cmd = True
 
         if not is_cmd:
             return
 
         try:
             # worker
             worker = Worker()
@@ -157,32 +199,14 @@
 
             # start
             self.window.threadpool.start(worker)
 
         except Exception as e:
             self.error(e)
 
-    def extract_params(self, text: str) -> list:
-        """
-        Extract params from params string
-
-        :param text: text
-        :return: params list
-        """
-        params = []
-        if text is None or text == "":
-            return params
-        params_list = text.split(",")
-        for param in params_list:
-            param = param.strip()
-            if param == "":
-                continue
-            params.append(param)
-        return params
-
     def log(self, msg: str):
         """
         Log message to console
 
         :param msg: message to log
         """
         full_msg = '[CMD] ' + str(msg)
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/plugin/cmd_custom/worker.py` & `pygpt_net-2.2.0/src/pygpt_net/plugin/cmd_custom/worker.py`

 * *Files 17% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.25 01:00:00                  #
+# Updated Date: 2024.03.16 12:00:00                  #
 # ================================================== #
 
 import os.path
 import subprocess
 from datetime import datetime
 from PySide6.QtCore import Slot
 
@@ -29,80 +29,116 @@
         self.kwargs = kwargs
         self.plugin = None
         self.cmds = None
         self.ctx = None
 
     @Slot()
     def run(self):
+        responses = []
         msg = None
         for item in self.cmds:
             for my_cmd in self.plugin.get_option_value("cmds"):
-                request = {"cmd": item["cmd"]}  # prepare request item for result
                 if my_cmd["name"] == item["cmd"]:
                     try:
-                        # prepare cmd
-                        cmd = my_cmd["cmd"]
-
-                        # append system placeholders
-                        cmd = cmd.replace("{_file}", os.path.dirname(os.path.realpath(__file__)))
-                        cmd = cmd.replace("{_home}", self.plugin.window.core.config.path)
-                        cmd = cmd.replace("{_date}", datetime.now().strftime("%Y-%m-%d"))
-                        cmd = cmd.replace("{_time}", datetime.now().strftime("%H:%M:%S"))
-                        cmd = cmd.replace("{_datetime}", datetime.now().strftime("%Y-%m-%d %H:%M:%S"))
-
-                        # append custom params to cmd placeholders
-                        if 'params' in my_cmd and my_cmd["params"].strip() != "":
-                            # append params to cmd placeholders
-                            params_list = self.plugin.extract_params(
-                                my_cmd["params"],
-                            )
-                            for param in params_list:
-                                if param in item["params"]:
-                                    cmd = cmd.replace(
-                                        "{" + param + "}",
-                                        str(item["params"][param]),
-                                    )
-
-                        # check if cmd is not empty
-                        if cmd is None or cmd == "":
+                        response = self.handle_cmd(my_cmd, item)
+                        if response is False:
                             msg = "Command is empty"
                             continue
-
-                        # execute custom cmd
-                        msg = "Running custom cmd: {}".format(cmd)
-                        self.log(msg)
-                        process = subprocess.Popen(
-                            cmd,
-                            shell=True,
-                            stdout=subprocess.PIPE,
-                            stderr=subprocess.PIPE,
-                        )
-                        stdout, stderr = process.communicate()
-                        result = None
-                        if stdout:
-                            result = stdout.decode("utf-8")
-                            self.log("STDOUT: {}".format(result))
-                        if stderr:
-                            result = stderr.decode("utf-8")
-                            self.log("STDERR: {}".format(result))
-                        if result is None:
-                            result = "No result (STDOUT/STDERR empty)"
-                            self.log(result)
-
-                        response = {
-                            "request": request,
-                            "result": result,
-                        }
+                        responses.append(response)
 
                     except Exception as e:
                         msg = "Error: {}".format(e)
-                        response = {
-                            "request": request,
+                        responses.append({
+                            "request": {
+                                "cmd": item["cmd"],
+                            },
                             "result": "Error {}".format(e),
-                        }
+                        })
                         self.error(e)
                         self.log(msg)
-                    self.response(response)
+
+        # send response
+        if len(responses) > 0:
+            for response in responses:
+                self.reply(response)
 
         # update status
         if msg is not None:
             self.status(msg)
+
+    def handle_cmd(self, command: dict, item: dict) -> dict or bool:
+        """
+        Handle custom command
+
+        :param command: command configuration
+        :param item: command item
+        :return: response item
+        """
+        request = self.prepare_request(item)
+
+        # prepare cmd
+        cmd = command["cmd"]
+
+        # check if cmd is not empty
+        if cmd is None or cmd == "":
+            return False
+        
+        try:
+            cmd = cmd.format(
+                _file=os.path.dirname(os.path.realpath(__file__)),
+                _home=self.plugin.window.core.config.path,
+                _date=datetime.now().strftime("%Y-%m-%d"),
+                _time=datetime.now().strftime("%H:%M:%S"),
+                _datetime=datetime.now().strftime("%Y-%m-%d %H:%M:%S"),
+            )
+        except Exception as e:
+            pass
+
+        # append params to placeholders
+        if 'params' in command and command["params"].strip() != "":
+            # append params to cmd placeholders
+            params_list = self.plugin.extract_params(
+                command["params"],
+            )
+            for param in params_list:
+                if param in item["params"]:
+                    cmd = cmd.replace(
+                        "{" + param + "}",
+                        str(item["params"][param]),
+                    )
+
+        # execute
+        msg = "Running custom cmd: {}".format(cmd)
+        self.log(msg)
+        process = subprocess.Popen(
+            cmd,
+            shell=True,
+            stdout=subprocess.PIPE,
+            stderr=subprocess.PIPE,
+        )
+        stdout, stderr = process.communicate()
+        result = None
+        if stdout:
+            result = stdout.decode("utf-8")
+            self.log("STDOUT: {}".format(result))
+        if stderr:
+            result = stderr.decode("utf-8")
+            self.log("STDERR: {}".format(result))
+        if result is None:
+            result = "No result (STDOUT/STDERR empty)"
+            self.log(result)
+
+        # prepare response
+        response = {
+            "request": request,
+            "result": result,
+        }
+        return response
+
+    def prepare_request(self, item) -> dict:
+        """
+        Prepare request item for result
+
+        :param item: item with parameters
+        :return: request item
+        """
+        return {"cmd": item["cmd"]}
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/plugin/cmd_files/worker.py` & `pygpt_net-2.2.0/src/pygpt_net/plugin/cmd_files/worker.py`

 * *Files 16% similar despite different names*

```diff
@@ -2,17 +2,18 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.03.04 20:00:00                  #
+# Updated Date: 2024.04.25 03:00:00                  #
 # ================================================== #
 
+import fnmatch
 import mimetypes
 import os.path
 import shutil
 import ssl
 from urllib.request import Request, urlopen
 from PySide6.QtCore import Slot
 
@@ -32,109 +33,127 @@
         self.plugin = None
         self.cmds = None
         self.ctx = None
         self.msg = None
 
     @Slot()
     def run(self):
+        responses = []
         for item in self.cmds:
             try:
-                if item["cmd"] in self.plugin.allowed_cmds and self.plugin.is_cmd_allowed(item["cmd"]):
+                response = None
+                if item["cmd"] in self.plugin.allowed_cmds and self.plugin.has_cmd(item["cmd"]):
 
                     # save file
                     if item["cmd"] == "save_file":
-                        self.cmd_save_file(item)
+                        response = self.cmd_save_file(item)
 
                     # append to file
                     elif item["cmd"] == "append_file":
-                        self.cmd_append_file(item)
+                        response = self.cmd_append_file(item)
 
                     # read file
                     elif item["cmd"] == "read_file":
-                        self.cmd_read_file(item)
+                        response = self.cmd_read_file(item)
 
                     # query file
                     elif item["cmd"] == "query_file":
-                        self.cmd_query_file(item)
+                        response = self.cmd_query_file(item)
 
                     # delete file
                     elif item["cmd"] == "delete_file":
-                        self.cmd_delete_file(item)
+                        response = self.cmd_delete_file(item)
 
                     # list files
                     elif item["cmd"] == "list_dir":
-                        self.cmd_list_dir(item)
+                        response = self.cmd_list_dir(item)
+
+                    # tree
+                    elif item["cmd"] == "tree":
+                        response = self.cmd_tree(item)
 
                     # mkdir
                     elif item["cmd"] == "mkdir":
-                        self.cmd_mkdir(item)
+                        response = self.cmd_mkdir(item)
 
                     # rmdir
                     elif item["cmd"] == "rmdir":
-                        self.cmd_rmdir(item)
+                        response = self.cmd_rmdir(item)
 
                     # download
                     elif item["cmd"] == "download_file":
-                        self.cmd_download_file(item)
+                        response = self.cmd_download_file(item)
 
                     # copy file
                     elif item["cmd"] == "copy_file":
-                        self.cmd_copy_file(item)
+                        response = self.cmd_copy_file(item)
 
                     # copy dir
                     elif item["cmd"] == "copy_dir":
-                        self.cmd_copy_dir(item)
+                        response = self.cmd_copy_dir(item)
 
                     # move
                     elif item["cmd"] == "move":
-                        self.cmd_move(item)
+                        response = self.cmd_move(item)
 
                     # is dir
                     elif item["cmd"] == "is_dir":
-                        self.cmd_is_dir(item)
+                        response = self.cmd_is_dir(item)
 
                     # is file
                     elif item["cmd"] == "is_file":
-                        self.cmd_is_file(item)
+                        response = self.cmd_is_file(item)
 
                     # file exists
                     elif item["cmd"] == "file_exists":
-                        self.cmd_file_exists(item)
+                        response = self.cmd_file_exists(item)
 
                     # file size
                     elif item["cmd"] == "file_size":
-                        self.cmd_file_size(item)
+                        response = self.cmd_file_size(item)
 
                     # file info
                     elif item["cmd"] == "file_info":
-                        self.cmd_file_info(item)
+                        response = self.cmd_file_info(item)
 
                     # cwd
                     elif item["cmd"] == "cwd":
-                        self.cmd_cwd(item)
+                        response = self.cmd_cwd(item)
 
                     # get file as attachment
                     elif item["cmd"] == "send_file":
-                        self.cmd_send_file(item)
+                        response = self.cmd_send_file(item)
 
                     # index file or directory
                     elif item["cmd"] == "file_index":
-                        self.cmd_file_index(item)
+                        response = self.cmd_file_index(item)
+
+                    # find file or directory
+                    elif item["cmd"] == "find":
+                        response = self.cmd_find(item)
+
+                    # send response
+                    if response:
+                        responses.append(response)
 
             except Exception as e:
-                self.response(
-                    {
-                        "request": item,
-                        "result": "Error: {}".format(e),
+                responses.append({
+                    "request": {
+                        "cmd": item["cmd"],
                     },
-                    self.get_extra_data(),
-                )
+                    "result": "Error {}".format(e),
+                })
                 self.error(e)
                 self.log("Error: {}".format(e))
 
+        # send response
+        if len(responses) > 0:
+            for response in responses:
+                self.reply(response, self.get_extra_data())
+
         if self.msg is not None:
             self.status(self.msg)
 
     def prepare_request(self, item) -> dict:
         """
         Prepare request item for result
 
@@ -150,25 +169,26 @@
 
         :return: extra data
         """
         return {
             "post_update": ["file_explorer"],  # update file explorer after processing
         }
 
-    def cmd_save_file(self, item: dict):
+    def cmd_save_file(self, item: dict) -> dict:
         """
         Save file
 
         :param item: item with parameters
+        :return: response item
         """
         request = self.prepare_request(item)
         try:
-            self.msg = "Saving file: {}".format(item["params"]['filename'])
+            path = self.prepare_path(item["params"]['path'])
+            self.msg = "Saving file: {}".format(path)
             self.log(self.msg)
-            path = self.prepare_path(item["params"]['filename'])
             data = item["params"]['data']
             with open(path, 'w', encoding="utf-8") as file:
                 file.write(data)
                 response = {
                     "request": request,
                     "result": "OK",
                 }
@@ -176,27 +196,28 @@
         except Exception as e:
             response = {
                 "request": request,
                 "result": "Error: {}".format(e),
             }
             self.error(e)
             self.log("Error: {}".format(e))
-        self.response(response, self.get_extra_data())
+        return response
 
-    def cmd_append_file(self, item: dict):
+    def cmd_append_file(self, item: dict) -> dict:
         """
         Append to file
 
         :param item: item with parameters
+        :return: response item
         """
         request = self.prepare_request(item)
         try:
-            self.msg = "Appending file: {}".format(item["params"]['filename'])
+            path = self.prepare_path(item["params"]['path'])
+            self.msg = "Appending file: {}".format(path)
             self.log(self.msg)
-            path = self.prepare_path(item["params"]['filename'])
             data = item["params"]['data']
             with open(path, 'a', encoding="utf-8") as file:
                 file.write(data)
                 response = {
                     "request": request,
                     "result": "OK",
                 }
@@ -204,27 +225,28 @@
         except Exception as e:
             response = {
                 "request": request,
                 "result": "Error: {}".format(e),
             }
             self.error(e)
             self.log("Error: {}".format(e))
-        self.response(response, self.get_extra_data())
+        return response
 
-    def cmd_read_file(self, item: dict):
+    def cmd_read_file(self, item: dict) -> dict:
         """
         Read file
 
         :param item: item with parameters
+        :return: response item
         """
         request = self.prepare_request(item)
         try:
-            self.msg = "Reading file: {}".format(item["params"]['filename'])
+            self.msg = "Reading file: {}".format(item["params"]['path'])
             self.log(self.msg)
-            path = item["params"]['filename']
+            path = item["params"]['path']
             paths = []
             if isinstance(path, list):
                 paths = path
             elif isinstance(path, str):
                 paths = [path]
             data, context = self.read_files(paths)
             context_str = None
@@ -239,38 +261,51 @@
         except Exception as e:
             response = {
                 "request": request,
                 "result": "Error: {}".format(e),
             }
             self.error(e)
             self.log("Error: {}".format(e))
-        self.response(response, self.get_extra_data())
+        return response
 
-    def cmd_query_file(self, item: dict):
+    def cmd_query_file(self, item: dict) -> dict:
         """
         Query file
 
         :param item: item with parameters
+        :return: response item
         """
         request = self.prepare_request(item)
         response = {}
         query = None
         try:
-            self.msg = "Reading path: {}".format(item["params"]['path'])
-            self.log(self.msg)
             path = self.prepare_path(item["params"]['path'])
+            self.msg = "Reading path: {}".format(path)
+            self.log(self.msg)
             if "query" in item["params"] and item["params"]["query"]:
                 query = item["params"]["query"]
 
             # check if file exists
             if os.path.exists(path):
                 if query is not None:
                     # query file using temp index (created on the fly)
                     self.log("Querying file: {}".format(path))
-                    answer = self.plugin.window.core.idx.chat.query_file(path, query)
+
+                    # get tmp query model
+                    model = self.plugin.window.core.models.from_defaults()
+                    tmp_model = self.plugin.get_option_value("model_tmp_query")
+                    if self.plugin.window.core.models.has(tmp_model):
+                        model = self.plugin.window.core.models.get(tmp_model)
+
+                    answer = self.plugin.window.core.idx.chat.query_file(
+                        ctx=self.ctx,
+                        path=path,
+                        query=query,
+                        model=model,
+                    )
                     self.log("Response from temporary in-memory index: {}".format(answer))
                     if answer:
                         response = {
                             "request": request,
                             "result": answer,
                             "context": "From: " + os.path.basename(path) + ":\n--------------------------------\n" + answer,
                             # add additional context
@@ -292,27 +327,28 @@
         except Exception as e:
             response = {
                 "request": request,
                 "result": "Error: {}".format(e),
             }
             self.error(e)
             self.log("Error: {}".format(e))
-        self.response(response, self.get_extra_data())
+        return response
 
-    def cmd_delete_file(self,item: dict):
+    def cmd_delete_file(self,item: dict) -> dict:
         """
         Delete file
 
         :param item: item with parameters
+        :return: response item
         """
         request = self.prepare_request(item)
         try:
-            self.msg = "Deleting file: {}".format(item["params"]['filename'])
+            path = self.prepare_path(item["params"]['path'])
+            self.msg = "Deleting file: {}".format(path)
             self.log(self.msg)
-            path = self.prepare_path(item["params"]['filename'])
             if os.path.exists(path):
                 os.remove(path)
                 response = {"request": request, "result": "OK"}
                 self.log("File deleted: {}".format(path))
             else:
                 response = {
                     "request": request,
@@ -322,27 +358,30 @@
         except Exception as e:
             response = {
                 "request": request,
                 "result": "Error: {}".format(e),
             }
             self.error(e)
             self.log("Error: {}".format(e))
-        self.response(response, self.get_extra_data())
+        return response
 
-    def cmd_list_dir(self, item: dict):
+    def cmd_list_dir(self, item: dict) -> dict:
         """
         List directory
 
         :param item: item with parameters
+        :return: response item
         """
         request = self.prepare_request(item)
         try:
-            self.msg = "Listing directory: {}".format(item["params"]['path'])
+            path = self.plugin.window.core.config.get_user_dir('data')
+            if "path" in item["params"]:
+                path = self.prepare_path(item["params"]['path'])
+            self.msg = "Listing directory: {}".format(path)
             self.log(self.msg)
-            path = self.prepare_path(item["params"]['path'])
             if os.path.exists(path):
                 files = os.listdir(path)
                 response = {
                     "request": request,
                     "result": files,
                 }
                 self.log("Files listed: {}".format(path))
@@ -356,27 +395,78 @@
         except Exception as e:
             response = {
                 "request": request,
                 "result": "Error: {}".format(e),
             }
             self.error(e)
             self.log("Error: {}".format(e))
-        self.response(response, self.get_extra_data())
+        return response
 
-    def cmd_mkdir(self, item: dict):
+    def cmd_tree(self, item: dict) -> dict:
         """
-        Make directory
+        Get directory tree
 
         :param item: item with parameters
+        :return: response item
         """
         request = self.prepare_request(item)
         try:
-            self.msg = "Creating directory: {}".format(item["params"]['path'])
+            path = self.plugin.window.core.config.get_user_dir('data')
+            if "path" in item["params"]:
+                path = self.prepare_path(item["params"]['path'])
+            self.msg = "Listing directory: {}".format(path)
             self.log(self.msg)
+            tree_str = ""
+            tree = {}
+            if os.path.exists(path):
+                for root, dirs, files in os.walk(path):
+                    dirs.sort()
+                    files.sort()
+                    level = root.replace(path, '').count(os.sep)
+                    indent = ' ' * 4 * (level)
+                    tree_str += '{}{}/\n'.format(indent, os.path.basename(root))
+                    sub_indent = ' ' * 4 * (level + 1)
+                    files = sorted(files)
+                    for f in files:
+                        tree_str += '{}{}\n'.format(sub_indent, f)
+                    tree[os.path.basename(root)] = files
+                response = {
+                    "request": request,
+                    "result": tree,
+                    "context": path + "\n--------------------------------\n" + tree_str ,
+                }
+                self.log("Directory tree: {}".format(path))
+                self.log("Result: {}".format(tree_str))
+            else:
+                response = {
+                    "request": request,
+                    "result": "Directory not found",
+                }
+                self.log("Directory not found: {}".format(path))
+        except Exception as e:
+            response = {
+                "request": request,
+                "result": "Error: {}".format(e),
+            }
+            self.error(e)
+            self.log("Error: {}".format(e))
+        return response
+
+    def cmd_mkdir(self, item: dict) -> dict:
+        """
+        Make directory
+
+        :param item: item with parameters
+        :return: response item
+        """
+        request = self.prepare_request(item)
+        try:
             path = self.prepare_path(item["params"]['path'])
+            self.msg = "Creating directory: {}".format(path)
+            self.log(self.msg)
             if not os.path.exists(path):
                 os.makedirs(path)
                 response = {
                     "request": request,
                     "result": "OK",
                 }
                 self.log("Directory created: {}".format(path))
@@ -389,27 +479,28 @@
         except Exception as e:
             response = {
                 "request": request,
                 "result": "Error: {}".format(e),
             }
             self.error(e)
             self.log("Error: {}".format(e))
-        self.response(response, self.get_extra_data())
+        return response
 
-    def cmd_rmdir(self, item: dict):
+    def cmd_rmdir(self, item: dict) -> dict:
         """
         Remove directory
 
         :param item: item with parameters
+        :return: response item
         """
         request = self.prepare_request(item)
         try:
-            self.msg = "Deleting directory: {}".format(item["params"]['path'])
-            self.log(self.msg)
             path = self.prepare_path(item["params"]['path'])
+            self.msg = "Deleting directory: {}".format(path)
+            self.log(self.msg)
             if os.path.exists(path):
                 shutil.rmtree(path)
                 response = {
                     "request": request,
                     "result": "OK",
                 }
                 self.log("Directory deleted: {}".format(path))
@@ -422,21 +513,22 @@
         except Exception as e:
             response = {
                 "request": request,
                 "result": "Error: {}".format(e),
             }
             self.error(e)
             self.log("Error: {}".format(e))
-        self.response(response, self.get_extra_data())
+        return response
 
-    def cmd_download_file(self, item: dict):
+    def cmd_download_file(self, item: dict) -> dict:
         """
         Download file
 
         :param item: item with parameters
+        :return: response item
         """
         request = self.prepare_request(item)
         try:
             dst = self.prepare_path(item["params"]['dst'])
             self.msg = "Downloading file: {} into {}".format(item["params"]['src'], dst)
             self.log(self.msg)
             # Check if src is URL
@@ -483,109 +575,112 @@
         except Exception as e:
             response = {
                 "request": request,
                 "result": "Error: {}".format(e),
             }
             self.error(e)
             self.log("Error: {}".format(e))
-        self.response(response, self.get_extra_data())
+        return response
 
-    def cmd_copy_file(self, item: dict):
+    def cmd_copy_file(self, item: dict) -> dict:
         """
         Copy file
 
         :param item: item with parameters
+        :return: response item
         """
         request = self.prepare_request(item)
         try:
-            self.msg = "Copying file: {} into {}".format(item["params"]['src'], item["params"]['dst'])
-            self.log(self.msg)
-            dst = self.prepare_path(item["params"]['dst'])
             src = self.prepare_path(item["params"]['src'])
+            dst = self.prepare_path(item["params"]['dst'])
+            self.msg = "Copying file: {} into {}".format(src, dst)
+            self.log(self.msg)
             shutil.copyfile(src, dst)
             response = {
                 "request": request,
                 "result": "OK",
             }
             self.log("File copied: {} into {}".format(src, dst))
         except Exception as e:
             response = {
                 "request": request,
                 "result": "Error: {}".format(e),
             }
             self.error(e)
             self.log("Error: {}".format(e))
-        self.response(response, self.get_extra_data())
+        return response
 
-    def cmd_copy_dir(self, item: dict):
+    def cmd_copy_dir(self, item: dict) -> dict:
         """
         Copy directory
 
         :param item: item with parameters
+        :return: response item
         """
         request = self.prepare_request(item)
         try:
-            self.msg = "Copying directory: {} into {}".format(item["params"]['src'],
-                                                              item["params"]['dst'])
-            self.log(self.msg)
-            dst = self.prepare_path(item["params"]['dst'])
             src = self.prepare_path(item["params"]['src'])
+            dst = self.prepare_path(item["params"]['dst'])
+            self.msg = "Copying directory: {} into {}".format(src, dst)
+            self.log(self.msg)
             shutil.copytree(src, dst)
             response = {
                 "request": request,
                 "result": "OK",
             }
             self.log("Directory copied: {} into {}".format(src, dst))
         except Exception as e:
             response = {
                 "request": request,
                 "result": "Error {}".format(e),
             }
             self.error(e)
             self.log("Error: {}".format(e))
-        self.response(response, self.get_extra_data())
+        return response
 
-    def cmd_move(self, item: dict):
+    def cmd_move(self, item: dict) -> dict:
         """
         Move file or directory
 
         :param item: item with parameters
+        :return: response item
         """
         request = self.prepare_request(item)
         try:
-            self.msg = "Moving: {} into {}".format(item["params"]['src'], item["params"]['dst'])
-            self.log(self.msg)
-            dst = self.prepare_path(item["params"]['dst'])
             src = self.prepare_path(item["params"]['src'])
+            dst = self.prepare_path(item["params"]['dst'])
+            self.msg = "Moving: {} into {}".format(src, dst)
+            self.log(self.msg)
             shutil.move(src, dst)
             response = {
                 "request": request,
                 "result": "OK",
             }
             self.log("Moved: {} into {}".format(src, dst))
         except Exception as e:
             response = {
                 "request": request,
                 "result": "Error: {}".format(e),
             }
             self.error(e)
             self.log("Error: {}".format(e))
-        self.response(response, self.get_extra_data())
+        return response
 
-    def cmd_is_dir(self, item: dict):
+    def cmd_is_dir(self, item: dict) -> dict:
         """
         Check if directory exists
 
         :param item: item with parameters
+        :return: response item
         """
         request = self.prepare_request(item)
         try:
-            self.msg = "Checking if directory exists: {}".format(item["params"]['path'])
-            self.log(self.msg)
             path = self.prepare_path(item["params"]['path'])
+            self.msg = "Checking if directory exists: {}".format(path)
+            self.log(self.msg)
             if os.path.isdir(path):
                 response = {
                     "request": request,
                     "result": "OK",
                 }
                 self.log("Directory exists: {}".format(path))
             else:
@@ -594,27 +689,28 @@
         except Exception as e:
             response = {
                 "request": request,
                 "result": "Error: {}".format(e),
             }
             self.error(e)
             self.log("Error: {}".format(e))
-        self.response(response, self.get_extra_data())
+        return response
 
-    def cmd_is_file(self, item: dict):
+    def cmd_is_file(self, item: dict) -> dict:
         """
         Check if file exists
 
         :param item: item with parameters
+        :return: response item
         """
         request = self.prepare_request(item)
         try:
-            self.msg = "Checking if file exists: {}".format(item["params"]['path'])
-            self.log(self.msg)
             path = self.prepare_path(item["params"]['path'])
+            self.msg = "Checking if file exists: {}".format(path)
+            self.log(self.msg)
             if os.path.isfile(path):
                 response = {
                     "request": request,
                     "result": "OK",
                 }
                 self.log("File exists: {}".format(path))
             else:
@@ -626,27 +722,28 @@
         except Exception as e:
             response = {
                 "request": request,
                 "result": "Error: {}".format(e),
             }
             self.error(e)
             self.log("Error: {}".format(e))
-        self.response(response, self.get_extra_data())
+        return response
 
-    def cmd_file_exists(self, item: dict):
+    def cmd_file_exists(self, item: dict) -> dict:
         """
         Check if file exists
 
         :param item: item with parameters
+        :return: response item
         """
         request = self.prepare_request(item)
         try:
-            self.msg = "Checking if path exists: {}".format(item["params"]['path'])
-            self.log(self.msg)
             path = self.prepare_path(item["params"]['path'])
+            self.msg = "Checking if path exists: {}".format(path)
+            self.log(self.msg)
             if os.path.exists(path):
                 response = {
                     "request": request,
                     "result": "OK",
                 }
                 self.log("Path exists: {}".format(path))
             else:
@@ -658,27 +755,28 @@
         except Exception as e:
             response = {
                 "request": request,
                 "result": "Error: {}".format(e),
             }
             self.error(e)
             self.log("Error: {}".format(e))
-        self.response(response, self.get_extra_data())
+        return response
 
-    def cmd_file_size(self, item: dict):
+    def cmd_file_size(self, item: dict) -> dict:
         """
         Check file size
 
         :param item: item with parameters
+        :return: response item
         """
         request = self.prepare_request(item)
         try:
-            self.msg = "Checking file size: {}".format(item["params"]['path'])
-            self.log(self.msg)
             path = self.prepare_path(item["params"]['path'])
+            self.msg = "Checking file size: {}".format(path)
+            self.log(self.msg)
             if os.path.exists(path):
                 size = os.path.getsize(path)
                 response = {
                     "request": request,
                     "result": {
                         'size_bytes': size,
                         'size_human': self.plugin.human_readable_size(size),
@@ -694,27 +792,28 @@
         except Exception as e:
             response = {
                 "request": request,
                 "result": "Error: {}".format(e),
             }
             self.error(e)
             self.log("Error: {}".format(e))
-        self.response(response, self.get_extra_data())
+        return response
 
-    def cmd_file_info(self, item: dict):
+    def cmd_file_info(self, item: dict) -> dict:
         """
         Check file info
 
         :param item: item with parameters
+        :return: response item
         """
         request = self.prepare_request(item)
         try:
-            self.msg = "Checking file info: {}".format(item["params"]['path'])
-            self.log(self.msg)
             path = self.prepare_path(item["params"]['path'])
+            self.msg = "Checking file info: {}".format(path)
+            self.log(self.msg)
             if os.path.exists(path):
                 size = os.path.getsize(path)
                 data = {
                     "size": size,
                     "size_human": self.get_human_readable_size(size),
                     'mime_type': mimetypes.guess_type(path)[0] or 'application/octet-stream',
                     "last_access": os.path.getatime(path),
@@ -740,21 +839,22 @@
         except Exception as e:
             response = {
                 "request": request,
                 "result": "Error: {}".format(e),
             }
             self.error(e)
             self.log("Error: {}".format(e))
-        self.response(response, self.get_extra_data())
+        return response
 
-    def cmd_cwd(self, item: dict):
+    def cmd_cwd(self, item: dict) -> dict:
         """
         Get current working directory
 
         :param item: item with parameters
+        :return: response item
         """
         request = self.prepare_request(item)
         try:
             self.msg = "Getting CWD: {}".format(self.plugin.window.core.config.get_user_dir('data'))
             self.log(self.msg)
             response = {
                 "request": request,
@@ -763,27 +863,28 @@
         except Exception as e:
             response = {
                 "request": request,
                 "result": "Error: {}".format(e),
             }
             self.error(e)
             self.log("Error: {}".format(e))
-        self.response(response, self.get_extra_data())
+        return response
 
-    def cmd_send_file(self, item: dict):
+    def cmd_send_file(self, item: dict) -> dict:
         """
-        Get file as attachment
+        Get/send file as attachment
 
         :param item: item with parameters
+        :return: response item
         """
         request = self.prepare_request(item)
         try:
-            self.msg = "Adding attachment: {}".format(item["params"]['path'])
-            self.log(self.msg)
             path = self.prepare_path(item["params"]['path'])
+            self.msg = "Adding attachment: {}".format(path)
+            self.log(self.msg)
             if os.path.exists(path):
                 # make attachment
                 mode = self.plugin.window.core.config.get('mode')
                 title = os.path.basename(path)
                 self.plugin.window.core.attachments.new(mode, title, path, False)
                 self.plugin.window.core.attachments.save()
                 self.plugin.window.controller.attachment.update()
@@ -801,27 +902,28 @@
         except Exception as e:
             response = {
                 "request": request,
                 "result": "Error: {}".format(e),
             }
             self.error(e)
             self.log("Error: {}".format(e))
-        self.response(response, self.get_extra_data())
+        return response
 
-    def cmd_file_index(self, item: dict):
+    def cmd_file_index(self, item: dict) -> dict:
         """
         Index file or directory
 
         :param item: item with parameters
+        :return: response item
         """
         request = self.prepare_request(item)
         try:
-            self.msg = "Indexing path: {}".format(item["params"]['path'])
-            self.log(self.msg)
             path = self.prepare_path(item["params"]['path'])
+            self.msg = "Indexing path: {}".format(path)
+            self.log(self.msg)
             if os.path.exists(path):
                 idx_name = self.plugin.get_option_value("idx")
                 # index path using Llama-index
                 files, errors = self.plugin.window.core.idx.index_files(
                     idx_name,
                     path,
                 )
@@ -844,15 +946,75 @@
         except Exception as e:
             response = {
                 "request": request,
                 "result": "Error: {}".format(e),
             }
             self.error(e)
             self.log("Error: {}".format(e))
-        self.response(response, self.get_extra_data())
+        return response
+
+    def cmd_find(self, item: dict) -> dict:
+        """
+        Search for files in directory
+
+        :param item: item with parameters
+        :return: response item
+        """
+        request = self.prepare_request(item)
+        try:
+            recursive = True
+            path = self.plugin.window.core.config.get_user_dir('data')
+            pattern = item["params"]['pattern']
+            if "path" in item["params"]:
+                path = self.prepare_path(item["params"]['path'])
+            if "recursive" in item["params"]:
+                recursive = item["params"]['recursive']
+            self.msg = "Searching in directory: {}".format(path)
+            self.log(self.msg)
+            if os.path.exists(path):
+                files = self.find_files(path, pattern, recursive)
+                response = {
+                    "request": request,
+                    "result": files,
+                }
+                self.log("Result: {}".format(files))
+            else:
+                response = {
+                    "request": request,
+                    "result": "Directory not found",
+                }
+                self.log("Directory not found: {}".format(path))
+        except Exception as e:
+            response = {
+                "request": request,
+                "result": "Error: {}".format(e),
+            }
+            self.error(e)
+            self.log("Error: {}".format(e))
+        return response
+
+    def find_files(self, directory: str, pattern: str, recursive: bool = True) -> list:
+        """
+        Find files in directory
+
+        :param directory: search directory
+        :param pattern: search pattern
+        :param recursive: search recursively
+        :return: list of files
+        """
+        matches = []
+        if recursive:
+            for root, dirs, files in os.walk(directory):
+                for filename in fnmatch.filter(files, pattern):
+                    matches.append(os.path.join(root, filename))
+        else:
+            for filename in os.listdir(directory):
+                if fnmatch.fnmatch(filename, pattern):
+                    matches.append(os.path.join(directory, filename))
+        return matches
 
     def get_human_readable_size(self, size, decimal_places=2):
         """
         Return a human-readable file size.
 
         :param size: file size in bytes
         :param decimal_places: number of decimal places
@@ -920,14 +1082,21 @@
                         return data, context
 
                 # read file as text
                 content = self.plugin.read_as_text(
                     path,
                     use_loaders=self.plugin.get_option_value("use_loaders"),
                 )
+                data.append({
+                    "path": os.path.basename(path),
+                    "content": content,
+                })
                 context.append(os.path.basename(path) + ":\n--------------------------------\n" + content)
                 self.log("File read: {}".format(path))
             else:
                 self.log("File not found: {}".format(path))
-                data.append("File not found: {}".format(path))
+                data.append({
+                    "path": os.path.basename(path),
+                    "content": "File not found",
+                })
 
         return data, context
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/plugin/cmd_history/__init__.py` & `pygpt_net-2.2.0/src/pygpt_net/plugin/cmd_history/__init__.py`

 * *Files 20% similar despite different names*

```diff
@@ -2,25 +2,29 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.14 15:00:00                  #
+# Updated Date: 2024.03.16 12:00:00                  #
 # ================================================== #
 
 import json
 import re
 from datetime import datetime
 
+from PySide6.QtCore import Slot
+
 from pygpt_net.plugin.base import BasePlugin
 from pygpt_net.core.dispatcher import Event
 from pygpt_net.item.ctx import CtxItem
 
+from .worker import Worker
+
 
 class Plugin(BasePlugin):
     def __init__(self, *args, **kwargs):
         super(Plugin, self).__init__(*args, **kwargs)
         self.id = "cmd_history"
         self.name = "Context history (calendar, inline)"
         self.type = ["cmd.inline"]
@@ -46,63 +50,14 @@
             type="bool",
             value=False,
             label="Enable: using context @ ID tags",
             description="When enabled, it allows to automatically retrieve context history using @ tags, "
                         "e.g. use @123 in question to retrieve summary of context with ID 123",
         )
         self.add_option(
-            "cmd_get_ctx_list_in_date_range",
-            type="bool",
-            value=True,
-            label="Enable: get date range context list",
-            description="When enabled, it allows getting the list of context history (previous conversations)",
-        )
-        self.add_option(
-            "cmd_get_ctx_content_by_id",
-            type="bool",
-            value=True,
-            label="Enable: get context content by ID",
-            description="When enabled, it allows getting summarized content of context with defined ID",
-        )
-        self.add_option(
-            "cmd_count_ctx_in_date",
-            type="bool",
-            value=True,
-            label="Enable: count contexts in date range",
-            description="When enabled, it allows counting contexts in date range",
-        )
-        self.add_option(
-            "cmd_get_day_note",
-            type="bool",
-            value=True,
-            label="Enable: get day note",
-            description="When enabled, it allows retrieving day note for specific date",
-        )
-        self.add_option(
-            "cmd_add_day_note",
-            type="bool",
-            value=True,
-            label="Enable: add day note",
-            description="When enabled, it allows adding day note for specific date",
-        )
-        self.add_option(
-            "cmd_update_day_note",
-            type="bool",
-            value=True,
-            label="Enable: update day note",
-            description="When enabled, it allows updating day note for specific date",
-        )
-        self.add_option(
-            "cmd_remove_day_note",
-            type="bool",
-            value=True,
-            label="Enable: remove day note",
-            description="When enabled, it allows removing day note for specific date",
-        )
-        self.add_option(
             "model_summarize",
             type="combo",
             value="gpt-3.5-turbo",
             label="Model",
             description="Model used for summarize, default: gpt-3.5-turbo",
             tooltip="Summarize model",
             use="models",
@@ -131,83 +86,14 @@
             value=100000,
             label="Per-context items content chunk size",
             description="Per-context content chunk size (max characters per chunk)",
             min=1,
             max=None,
         )
         self.add_option(
-            "syntax_get_ctx_list_in_date_range",
-            type="textarea",
-            value='"get_ctx_list_in_date_range": use to get the list of context history '
-                  '(previous conversations between you and me), with corresponding IDs, '
-                  'using the special date-range query syntax: "@date(YYYY-MM-DD)" for single day, '
-                  '"@date(YYYY-MM-DD,)" for date from, "@date(,YYYY-MM-DD)" for date to, '
-                  'and "@date(YYYY-MM-DD,YYYY-MM-DD)" for date range from-to, params: "range_query"',
-            label="Syntax: get_ctx_list_in_date_range",
-            description="Syntax for get_ctx_list_in_date_range command",
-            advanced=True,
-        )
-        self.add_option(
-            "syntax_get_ctx_content_by_id",
-            type="textarea",
-            value='"get_ctx_content_by_id": use to get summarized content of context with defined ID, prepare summary '
-                  'query to ask another model to summarize the content, '
-                  'starting from e.g. "You are an expert in content summarization. Summarize our previous discussion '
-                  'answering the query: (query)", params: "id", "summary_query"',
-            label="Syntax: get_ctx_content_by_id",
-            description="Syntax for get_ctx_content_by_id command",
-            advanced=True,
-        )
-        self.add_option(
-            "syntax_count_ctx_in_date",
-            type="textarea",
-            value='"count_ctx_in_date": use to count items of context history '
-                  '(previous conversations between you and me) in specified date, by providing year, month, day or a '
-                  'combination of them, params: "year", "month", "day"',
-            label="Syntax: count_ctx_in_date",
-            description="Syntax for count_ctx_in_date command",
-            advanced=True,
-        )
-        self.add_option(
-            "syntax_get_day_note",
-            type="textarea",
-            value='"get_day_note": use to get my day notes and plans for a specific date, '
-                  'params: "year", "month", "day"',
-            label="Syntax: get_day_note",
-            description="Syntax for get_day_note command",
-            advanced=True,
-        )
-        self.add_option(
-            "syntax_add_day_note",
-            type="textarea",
-            value='"add_day_note": use to add day note for specific date, '
-                  'params: "year", "month", "day", "note"',
-            label="Syntax: add_day_note",
-            description="Syntax for add_day_note command",
-            advanced=True,
-        )
-        self.add_option(
-            "syntax_update_day_note",
-            type="textarea",
-            value='"update_day_note": update content of day note for specific date, '
-                  'params: "year", "month", "day", "content"',
-            label="Syntax: update_day_note",
-            description="Syntax for update_day_note command",
-            advanced=True,
-        )
-        self.add_option(
-            "syntax_remove_day_note",
-            type="textarea",
-            value='"remove_day_note": remove day note for specific date, '
-                  'params: "year", "month", "day"',
-            label="Syntax: remove_day_note",
-            description="Syntax for remove_day_note command",
-            advanced=True,
-        )
-        self.add_option(
             "prompt_tag_system",
             type="textarea",
             value="ADDITIONAL CONTEXT: Use the following JSON summary of previous discussions as additional context, "
                   "instead of using commands for retrieve content: {context}",
             label="Prompt: tag_system",
             description="Prompt for use @ tag (system)",
             advanced=True,
@@ -219,14 +105,196 @@
                   "Please summarize the given discussion (ID: {id}) by addressing the query and preparing it to serve "
                   "as additional context for a new discussion or to continue the current one: {query}",
             label="Prompt: tag_summary",
             description="Prompt for use @ tag (summary)",
             advanced=True,
         )
 
+        # commands
+        self.add_cmd(
+            "get_ctx_list_in_date_range",
+            instruction="get list of context history (previous conversations between you and me), using date-range "
+                        "syntax: \"@date(YYYY-MM-DD)\" for single day, \"@date(YYYY-MM-DD,)\" for date FROM, "
+                        "\"@date(,YYYY-MM-DD)\" for date TO, and \"@date(YYYY-MM-DD,YYYY-MM-DD)\" for date FROM-TO",
+            params=[
+                {
+                    "name": "range_query",
+                    "type": "str",
+                    "description": "range query",
+                    "required": True,
+                },
+            ],
+            enabled=True,
+            description="When enabled, it allows getting the list of context history (previous conversations)",
+        )
+        self.add_cmd(
+            "get_ctx_content_by_id",
+            instruction="get summarized content of context by its ID, use summary query to ask another "
+                        "model to summarize content, e.g. \"Summarize following discussion answering the query: (query)\"",
+            params=[
+                {
+                    "name": "id",
+                    "type": "int",
+                    "description": "context ID",
+                    "required": True,
+                },
+                {
+                    "name": "summary_query",
+                    "type": "str",
+                    "description": "query",
+                    "required": True,
+                },
+            ],
+            enabled=True,
+            description="When enabled, it allows getting summarized content of context with defined ID",
+        )
+        self.add_cmd(
+            "count_ctx_in_date",
+            instruction="count items of context history (previous conversations between us), by providing year, "
+                        "month, day or combination of them",
+            params=[
+                {
+                    "name": "year",
+                    "type": "int",
+                    "description": "year",
+                    "required": True,
+                },
+                {
+                    "name": "month",
+                    "type": "int",
+                    "description": "month",
+                    "required": True,
+                },
+                {
+                    "name": "day",
+                    "type": "int",
+                    "description": "day",
+                    "required": True,
+                },
+            ],
+            enabled=True,
+            description="When enabled, it allows counting contexts in date range",
+        )
+        self.add_cmd(
+            "get_day_note",
+            instruction="get day notes for date",
+            params=[
+                {
+                    "name": "year",
+                    "type": "int",
+                    "description": "year",
+                    "required": True,
+                },
+                {
+                    "name": "month",
+                    "type": "int",
+                    "description": "month",
+                    "required": True,
+                },
+                {
+                    "name": "day",
+                    "type": "int",
+                    "description": "day",
+                    "required": True,
+                },
+            ],
+            enabled=True,
+            description="When enabled, it allows retrieving day note for specific date",
+        )
+        self.add_cmd(
+            "add_day_note",
+            instruction="add day note",
+            params=[
+                {
+                    "name": "note",
+                    "type": "str",
+                    "description": "content",
+                    "required": True,
+                },
+                {
+                    "name": "year",
+                    "type": "int",
+                    "description": "year",
+                    "required": True,
+                },
+                {
+                    "name": "month",
+                    "type": "int",
+                    "description": "month",
+                    "required": True,
+                },
+                {
+                    "name": "day",
+                    "type": "int",
+                    "description": "day",
+                    "required": True,
+                },
+            ],
+            enabled=True,
+            description="When enabled, it allows adding day note for specific date",
+        )
+        self.add_cmd(
+            "update_day_note",
+            instruction="update day note",
+            params=[
+                {
+                    "name": "note",
+                    "type": "str",
+                    "description": "content",
+                    "required": True,
+                },
+                {
+                    "name": "year",
+                    "type": "int",
+                    "description": "year",
+                    "required": True,
+                },
+                {
+                    "name": "month",
+                    "type": "int",
+                    "description": "month",
+                    "required": True,
+                },
+                {
+                    "name": "day",
+                    "type": "int",
+                    "description": "day",
+                    "required": True,
+                },
+            ],
+            enabled=True,
+            description="When enabled, it allows updating day note for specific date",
+        )
+        self.add_cmd(
+            "remove_day_note",
+            instruction="remove day note",
+            params=[
+                {
+                    "name": "year",
+                    "type": "int",
+                    "description": "year",
+                    "required": True,
+                },
+                {
+                    "name": "month",
+                    "type": "int",
+                    "description": "month",
+                    "required": True,
+                },
+                {
+                    "name": "day",
+                    "type": "int",
+                    "description": "day",
+                    "required": True,
+                },
+            ],
+            enabled=True,
+            description="When enabled, it allows removing day note for specific date",
+        )
+
     def setup(self) -> dict:
         """
         Return available config options
 
         :return: config options
         """
         return self.options
@@ -365,166 +433,60 @@
     def cmd_syntax(self, data: dict):
         """
         Event: CMD_SYNTAX
 
         :param data: event data dict
         """
         for option in self.allowed_cmds:
-            if self.is_cmd_allowed(option):
-                key = "syntax_" + option
-                if self.has_option(key):
-                    data['syntax'].append(str(self.get_option_value(key)))
-
-    def is_cmd_allowed(self, cmd: str) -> bool:
-        """
-        Check if cmd is allowed
-
-        :param cmd: command name
-        :return: True if allowed
-        """
-        key = "cmd_" + cmd
-        if self.has_option(key) and self.get_option_value(key) is True:
-            return True
-        return False
+            if self.has_cmd(option):
+                data['cmd'].append(self.get_cmd(option))  # append command
+
+    @Slot()
+    def handle_updated(self):
+        """Handle updated signal"""
+        self.window.controller.calendar.setup()
 
     def cmd(self, ctx: CtxItem, cmds: list):
         """
         Events: CMD_EXECUTE
 
         :param ctx: CtxItem
         :param cmds: commands dict
         """
         is_cmd = False
         my_commands = []
         for item in cmds:
-            if item["cmd"] in self.allowed_cmds:
+            if item["cmd"] in self.allowed_cmds and self.has_cmd(item["cmd"]):
                 my_commands.append(item)
                 is_cmd = True
 
         if not is_cmd:
             return
 
-        for item in my_commands:
-            try:
-                if item["cmd"] == "get_ctx_list_in_date_range":
-                    range = item["params"]["range_query"]
-                    request = {
-                        "cmd": item["cmd"],
-                    }
-                    data = self.get_list(range)
-                    response = {
-                        "request": request,
-                        "result": data,
-                    }
-                    ctx.results.append(response)
-                    ctx.reply = True
-
-                elif item["cmd"] == "get_ctx_content_by_id":
-                    id = int(item["params"]["id"])
-                    request = {
-                        "cmd": item["cmd"],
-                    }
-                    prompt = item["params"]["summary_query"]
-                    data = self.get_summary(id, prompt)
-                    response = {
-                        "request": request,
-                        "result": data,
-                    }
-                    ctx.results.append(response)
-                    ctx.reply = True
-
-                elif item["cmd"] == "get_day_note":
-                    year = int(item["params"]["year"])
-                    month = int(item["params"]["month"])
-                    day = int(item["params"]["day"])
-                    request = {
-                        "cmd": item["cmd"],
-                    }
-                    data = self.get_day_note(year, month, day)
-                    response = {
-                        "request": request,
-                        "result": data,
-                    }
-                    ctx.results.append(response)
-                    ctx.reply = True
-
-                elif item["cmd"] == "add_day_note":
-                    year = int(item["params"]["year"])
-                    month = int(item["params"]["month"])
-                    day = int(item["params"]["day"])
-                    note = item["params"]["note"]
-                    request = {
-                        "cmd": item["cmd"],
-                    }
-                    data = self.add_day_note(year, month, day, note)
-                    response = {
-                        "request": request,
-                        "result": data,
-                    }
-                    ctx.results.append(response)
-                    ctx.reply = True
-                    self.window.controller.calendar.setup()  # update calendar
-
-                elif item["cmd"] == "update_day_note":
-                    year = int(item["params"]["year"])
-                    month = int(item["params"]["month"])
-                    day = int(item["params"]["day"])
-                    note = item["params"]["content"]
-                    request = {
-                        "cmd": item["cmd"],
-                    }
-                    data = self.update_day_note(year, month, day, note)
-                    response = {
-                        "request": request,
-                        "result": data,
-                    }
-                    ctx.results.append(response)
-                    ctx.reply = True
-                    self.window.controller.calendar.setup()  # update calendar
-
-                elif item["cmd"] == "remove_day_note":
-                    year = int(item["params"]["year"])
-                    month = int(item["params"]["month"])
-                    day = int(item["params"]["day"])
-                    request = {
-                        "cmd": item["cmd"],
-                    }
-                    data = self.remove_day_note(year, month, day)
-                    response = {
-                        "request": request,
-                        "result": data,
-                    }
-                    ctx.results.append(response)
-                    ctx.reply = True
-                    self.window.controller.calendar.setup()
-
-                elif item["cmd"] == "count_ctx_in_date":
-                    year = None
-                    month = None
-                    day = None
-                    if "year" in item["params"] and item["params"]["year"] != "":
-                        year = int(item["params"]["year"])
-                    if "month" in item["params"] and item["params"]["month"] != "":
-                        month = int(item["params"]["month"])
-                    if "day" in item["params"] and item["params"]["day"] != "":
-                        day = int(item["params"]["day"])
-
-                    request = {
-                        "cmd": item["cmd"],
-                    }
-                    data = self.count_ctx_in_date(year, month, day)
-                    response = {
-                        "request": request,
-                        "result": data,
-                    }
-                    ctx.results.append(response)
-                    ctx.reply = True
-            except Exception as e:
-                self.log("Error: " + str(e))
-                return
+        # worker
+        worker = Worker()
+        worker.plugin = self
+        worker.cmds = my_commands
+        worker.ctx = ctx
+
+        # signals (base handlers)
+        worker.signals.updated.connect(self.handle_updated)
+        worker.signals.finished.connect(self.handle_finished)
+        worker.signals.log.connect(self.handle_log)
+        worker.signals.debug.connect(self.handle_debug)
+        worker.signals.status.connect(self.handle_status)
+        worker.signals.error.connect(self.handle_error)
+
+        # check if async allowed
+        if not self.window.core.dispatcher.async_allowed(ctx):
+            worker.run()
+            return
+
+        # start
+        self.window.threadpool.start(worker)
 
     def get_day_note(self, year: int, month: int, day: int) -> str:
         """
         Get day note
 
         :param year: year
         :param month: month
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/plugin/cmd_serial/__init__.py` & `pygpt_net-2.2.0/src/pygpt_net/plugin/crontab/__init__.py`

 * *Files 24% similar despite different names*

```diff
@@ -2,124 +2,90 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.18 05:00:00                  #
+# Updated Date: 2024.03.15 10:00:00                  #
 # ================================================== #
 
 from pygpt_net.plugin.base import BasePlugin
 from pygpt_net.core.dispatcher import Event
-from pygpt_net.item.ctx import CtxItem
 
-from .worker import Worker
+from datetime import datetime
+from croniter import croniter
+
+from pygpt_net.utils import trans
 
 
 class Plugin(BasePlugin):
     def __init__(self, *args, **kwargs):
         super(Plugin, self).__init__(*args, **kwargs)
-        self.id = "cmd_serial"
-        self.name = "Command: Serial port / USB"
-        self.description = "Provides commands for reading and sending data to USB ports"
-        self.order = 100
-        self.allowed_cmds = [
-            "serial_send",
-            "serial_send_bytes",
-            "serial_read",
+        self.id = "crontab"
+        self.name = "Crontab / Task scheduler"
+        self.type = [
+            'schedule',
         ]
+        self.description = "Plugin provides cron-based job scheduling - " \
+                           "you can schedule prompts to be sent at any time using cron-based syntax for task setup."
+        self.order = 100
         self.use_locale = True
+        self.timers = []
         self.init_options()
 
     def init_options(self):
         """Initialize options"""
-        # cmd enable/disable
-        self.add_option(
-            "serial_port",
-            type="text",
-            value="/dev/ttyUSB0",
-            label="USB port",
-            description="USB port name, e.g. /dev/ttyUSB0, /dev/ttyACM0, COM3",
-            min=1,
-            max=None,
-        )
-        self.add_option(
-            "serial_bps",
-            type="int",
-            value=9600,
-            label="Connection speed (baudrate, bps)",
-            description="Port connection speed, in bps, default: 9600",
-            min=1,
-            max=None,
-        )
-        self.add_option(
-            "timeout",
-            type="int",
-            value=1,
-            label="Timeout",
-            description="Timeout in seconds, default: 1",
-            min=0,
-            max=None,
-        )
-        self.add_option(
-            "sleep",
-            type="int",
-            value=2,
-            label="Sleep",
-            description="Sleep in seconds after connection, default: 2",
-            min=0,
-            max=None,
-        )
-        self.add_option(
-            "cmd_serial_send",
-            type="bool",
-            value=True,
-            label="Enable: Send text commands to USB port",
-            description="Allows `serial_send` command execution",
+        keys = {
+            "enabled": "bool",
+            "crontab": "text",
+            "prompt": "textarea",
+            "preset": {
+                "type": "combo",
+                "use": "presets",
+                "keys": [],
+            },
+        }
+        items = [
+            {
+                "enabled": False,
+                "crontab": "30 9 * * *",
+                "prompt": "Hi! This prompt should be sent at 9:30 every day. What time is it?",
+                "preset": "_",
+            },
+        ]
+        desc = "Add your cron-style tasks here. They will be executed automatically at the times you specify in " \
+               "the cron-based job format. If you are unfamiliar with Cron, consider visiting the Cron Guru " \
+               "page for assistance."
+        tooltip = "Check out the tutorials about Cron or visit the Crontab Guru for help on how to use Cron syntax."
+        self.add_option(
+            "crontab",
+            type="dict",
+            value=items,
+            label="Your tasks",
+            description=desc,
+            tooltip=tooltip,
+            keys=keys,
+            urls={
+                "Crontab Guru": "https://crontab.guru",
+            },
         )
         self.add_option(
-            "cmd_serial_send_bytes",
+            "new_ctx",
             type="bool",
             value=True,
-            label="Enable: Send raw bytes to USB port",
-            description="Allows `serial_send_bytes` command execution",
+            label="Create a new context on job run",
+            description="If enabled, then a new context will be created on every run of the job",
         )
         self.add_option(
-            "cmd_serial_read",
+            "show_notify",
             type="bool",
             value=True,
-            label="Enable: Read data from USB port",
-            description="Allows `serial_read` command execution",
-        )
-
-        # cmd syntax (prompt/instruction)
-        self.add_option(
-            "syntax_serial_send",
-            type="textarea",
-            value='"serial_send": send text command to USB port, params: "command"',
-            label="Syntax: serial_send",
-            description="Syntax for sending text command to USB port",
-            advanced=True,
-        )
-        self.add_option(
-            "syntax_serial_send_bytes",
-            type="textarea",
-            value='"serial_send_bytes": send raw bytes to USB port, params: "bytes"',
-            label="Syntax: serial_send_bytes",
-            description="Syntax for sending raw bytes to USB port",
-            advanced=True,
-        )
-        self.add_option(
-            "syntax_serial_read",
-            type="textarea",
-            value='"serial_read": read data from serial port in seconds duration, params: "duration"',
-            label="Syntax: serial_read",
-            description="Syntax for reading data from USB port",
-            advanced=True,
+            label="Show notification on job run",
+            description="If enabled, then a tray notification will be shown on every run of the job",
         )
 
     def setup(self) -> dict:
         """
         Return available config options
 
         :return: config options
@@ -130,105 +96,156 @@
         """
         Attach window
 
         :param window: Window instance
         """
         self.window = window
 
+    def on_update(self):
+        pass
+
+    def on_post_update(self):
+        """
+        On post update hook
+        """
+        self.schedule_tasks()
+
+    def count_active(self) -> int:
+        """
+        Count active tasks
+
+        :return: number of active tasks
+        """
+        count = 0
+        for item in self.get_option_value("crontab"):
+            if item["enabled"]:
+                count += 1
+        return count
+
     def handle(self, event: Event, *args, **kwargs):
         """
         Handle dispatched event
 
         :param event: event object
         :param args: event args
         :param kwargs: event kwargs
         """
         name = event.name
         data = event.data
-        ctx = event.ctx
-
-        if name == Event.CMD_SYNTAX:
-            self.cmd_syntax(data)
 
-        elif name == Event.CMD_EXECUTE:
-            self.cmd(
-                ctx,
-                data['commands'],
+        if name == Event.PLUGIN_SETTINGS_CHANGED:
+            self.window.ui.tray.update_schedule_tasks(
+                self.count_active()
             )
 
-    def cmd_syntax(self, data: dict):
-        """
-        Event: CMD_SYNTAX
+        elif name == Event.PLUGIN_OPTION_GET:
+            if "name" in data and data["name"] == "scheduled_tasks_count":
+                data["value"] = self.count_active()  # return number of active tasks
 
-        :param data: event data dict
+    def job(self, item: dict):
         """
-        for option in self.allowed_cmds:
-            if self.is_cmd_allowed(option):
-                key = "syntax_" + option
-                if self.has_option(key):
-                    data['syntax'].append(str(self.get_option_value(key)))
+        Execute task
 
-    def cmd(self, ctx: CtxItem, cmds: list):
+        :param item: task item dict
         """
-        Event: CMD_EXECUTE
+        if item["prompt"] == "" or item["prompt"] is None:
+            self.log("Prompt is empty, skipping task")
+            return
 
-        :param ctx: CtxItem
-        :param cmds: commands dict
-        """
-        is_cmd = False
-        my_commands = []
-        for item in cmds:
-            if item["cmd"] in self.allowed_cmds:
-                my_commands.append(item)
-                is_cmd = True
+        self.log("Executing task: {}: {}".format(datetime.now(), item["prompt"]))
 
-        if not is_cmd:
-            return
+        # show notification
+        if self.get_option_value("show_notify"):
+            self.window.ui.tray.show_msg(
+                trans("notify.cron.title"),
+                item["prompt"][0:30] + "...",
+            )
 
-        try:
-            # worker
-            worker = Worker()
-            worker.plugin = self
-            worker.cmds = my_commands
-            worker.ctx = ctx
-
-            # signals (base handlers)
-            worker.signals.finished.connect(self.handle_finished)
-            worker.signals.log.connect(self.handle_log)
-            worker.signals.debug.connect(self.handle_debug)
-            worker.signals.status.connect(self.handle_status)
-            worker.signals.error.connect(self.handle_error)
-
-            # check if async allowed
-            if not self.window.core.dispatcher.async_allowed(ctx):
-                worker.run()
-                return
-
-            # start
-            self.window.threadpool.start(worker)
-
-        except Exception as e:
-            self.error(e)
-
-    def is_cmd_allowed(self, cmd: str) -> bool:
-        """
-        Check if cmd is allowed
-
-        :param cmd: command name
-        :return: True if allowed
-        """
-        key = "cmd_" + cmd
-        if self.has_option(key) and self.get_option_value(key) is True:
-            return True
-        return False
+        # select preset if defined and exists
+        if item["preset"] != "_" and item["preset"] is not None:
+            if self.window.core.presets.exists(item["preset"]):
+                mode = self.window.core.presets.get_first_mode(item["preset"])
+                if mode is not None:
+                    self.log("Using preset: {}".format(item["preset"]))
+                    self.window.controller.presets.set(mode, item["preset"])
+                    self.window.controller.presets.select_current()
+                    self.window.controller.presets.select_model()
+
+        # send prompt
+        if self.get_option_value("new_ctx"):
+            self.window.controller.ctx.new(
+                force=True,
+            )
+        self.window.controller.chat.input.send(
+            text=item["prompt"],
+            force=True,
+        )
+
+    def schedule_tasks(self):
+        """Schedule tasks based on crontab"""
+        crontab = self.get_option_value("crontab")
+        # remove unused or inactive items
+        for timer in self.timers:
+            if not timer["item"]["enabled"] or timer["item"] not in crontab:
+                self.timers.remove(timer)
+
+        for item in crontab:
+            try:
+                if not item["enabled"]:
+                    continue
+                cron = item["crontab"]
+                base_time = datetime.now()
+                iter = croniter(cron, base_time)
+                is_timer = False
+                timer = None
+                for timer in self.timers:
+                    if item == timer["item"]:
+                        is_timer = True
+                        break
+
+                # add to timers if not exists
+                if not is_timer:
+                    timer = {
+                        "item": item,
+                        "next_time": None,
+                    }
+                    self.timers.append(timer)
+
+                next_time = timer["next_time"]
+
+                # if first run
+                if next_time is None:
+                    next_time = iter.get_next(datetime)
+                    timer["next_time"] = next_time
+                    continue
+
+                if datetime.now() >= next_time:
+                    next_time = iter.get_next(datetime)
+                    timer["next_time"] = next_time
+                    self.job(item)
+
+                timer["next_time"] = iter.get_next(datetime)
+            except Exception as e:
+                self.log("Error: {}".format(e))
+
+        # show number of scheduled jobs
+        num_jobs = len(self.timers)
+        if num_jobs > 0:
+            self.window.ui.plugin_addon['schedule'].setVisible(True)
+            self.window.ui.plugin_addon['schedule'].setText(
+                "+ Cron: {} job(s)".format(len(self.timers)),
+            )
+        else:
+            self.window.ui.plugin_addon['schedule'].setVisible(False)
+            self.window.ui.plugin_addon['schedule'].setText("")
 
     def log(self, msg: str):
         """
         Log message to console
 
         :param msg: message to log
         """
-        full_msg = '[CMD] ' + str(msg)
+        full_msg = '[CRON] ' + str(msg)
         self.debug(full_msg)
         self.window.ui.status(full_msg)
         if self.is_log():
             print(full_msg)
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/plugin/cmd_serial/worker.py` & `pygpt_net-2.2.0/src/pygpt_net/plugin/cmd_serial/worker.py`

 * *Files 18% similar despite different names*

```diff
@@ -2,19 +2,20 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.01.30 13:00:00                  #
+# Updated Date: 2024.03.16 12:00:00                  #
 # ================================================== #
 
 import serial
 import time
+
 from PySide6.QtCore import Slot
 
 from pygpt_net.plugin.base import BaseWorker, BaseSignals
 
 
 class WorkerSignals(BaseSignals):
     pass  # add custom signals here
@@ -25,132 +26,171 @@
         super(Worker, self).__init__()
         self.signals = WorkerSignals()
         self.args = args
         self.kwargs = kwargs
         self.plugin = None
         self.cmds = None
         self.ctx = None
+        self.msg = None
 
     @Slot()
     def run(self):
-        msg = None
+        responses = []
         for item in self.cmds:
+            response = None
             try:
-                if item["cmd"] in self.plugin.allowed_cmds and self.plugin.is_cmd_allowed(item["cmd"]):
-                    request = {"cmd": item["cmd"]}  # prepare request item for result
+                if item["cmd"] in self.plugin.allowed_cmds and self.plugin.has_cmd(item["cmd"]):
 
                     # serial: send text command
                     if item["cmd"] == "serial_send":
-                        port = self.plugin.get_option_value("serial_port")
-                        speed = self.plugin.get_option_value("serial_bps")
-                        timeout = self.plugin.get_option_value("timeout")
-                        sleep = self.plugin.get_option_value("sleep")
-                        self.log("Using serial port: {} @ {} bps".format(port, speed))
-                        try:
-                            msg = "Sending command to USB port: {}".format(
-                                item["params"]['command'],
-                            )
-                            self.log(msg)
-                            data = self.send_command(
-                                port,
-                                speed,
-                                item["params"]['command'],
-                                timeout=timeout,
-                                sleep=sleep,
-                            )
-                            self.log("Response: {}".format(data))
-                            response = {
-                                "request": request,
-                                "result": data,
-                            }
-                        except Exception as e:
-                            response = {
-                                "request": request,
-                                "result": "Error: {}".format(e),
-                            }
-                            self.error(e)
-                            self.log("Error: {}".format(e))
-                        self.response(response)
+                        response = self.cmd_serial_send(item)
 
                     # serial: send raw bytes command
                     elif item["cmd"] == "serial_send_bytes":
-                        port = self.plugin.get_option_value("serial_port")
-                        speed = self.plugin.get_option_value("serial_bps")
-                        timeout = self.plugin.get_option_value("timeout")
-                        sleep = self.plugin.get_option_value("sleep")
-                        self.log("Using serial port: {} @ {} bps".format(port, speed))
-                        try:
-                            msg = "Sending binary data to USB port: {}".format(
-                                item["params"]['bytes'],
-                            )
-                            self.log(msg)
-                            data = self.send_binary_data(
-                                port,
-                                speed,
-                                int(item["params"]['bytes']),
-                                timeout=timeout,
-                                sleep=sleep,
-                            )
-                            self.log("Response: {}".format(data))
-                            response = {
-                                "request": request,
-                                "result": data,
-                            }
-                        except Exception as e:
-                            response = {
-                                "request": request,
-                                "result": "Error: {}".format(e),
-                            }
-                            self.error(e)
-                            self.log("Error: {}".format(e))
-                        self.response(response)
+                        response = self.cmd_serial_send_bytes(item)
 
                     # serial: read data from USB port
                     elif item["cmd"] == "serial_read":
-                        port = self.plugin.get_option_value("serial_port")
-                        speed = self.plugin.get_option_value("serial_bps")
-                        timeout = self.plugin.get_option_value("timeout")
-                        duration = int(item["params"]['duration']) \
-                            if "duration" in item["params"] else 3
-                        self.log("Using serial port: {} @ {} bps".format(port, speed))
-                        try:
-                            msg = "Reading data from USB port..."
-                            self.log(msg)
-                            data = self.read_data(
-                                port,
-                                speed,
-                                timeout=timeout,
-                                duration=duration,
-                            )
-                            self.log("Response: {}".format(data))
-                            response = {
-                                "request": request,
-                                "result": data,
-                            }
-                        except Exception as e:
-                            response = {
-                                "request": request,
-                                "result": "Error: {}".format(e),
-                            }
-                            self.error(e)
-                            self.log("Error: {}".format(e))
-                        self.response(response)
+                        response = self.cmd_serial_read(item)
+
+                    if response:
+                        responses.append(response)
 
             except Exception as e:
-                self.response(
-                    {
-                        "request": item,
-                        "result": "Error: {}".format(e),
-                    }
-                )
+                responses.append({
+                    "request": {
+                        "cmd": item["cmd"],
+                    },
+                    "result": "Error {}".format(e),
+                })
                 self.error(e)
                 self.log("Error: {}".format(e))
 
-        if msg is not None:
-            self.status(msg)
+        # send response
+        if len(responses) > 0:
+            for response in responses:
+                self.reply(response)
+
+        if self.msg is not None:
+            self.status(self.msg)
+
+    def cmd_serial_send(self, item: dict) -> dict:
+        """
+        Send command to USB port
+
+        :param item: command item
+        :return: response item
+        """
+        request = self.prepare_request(item)
+        port = self.plugin.get_option_value("serial_port")
+        speed = self.plugin.get_option_value("serial_bps")
+        timeout = self.plugin.get_option_value("timeout")
+        sleep = self.plugin.get_option_value("sleep")
+        self.log("Using serial port: {} @ {} bps".format(port, speed))
+        try:
+            self.msg = "Sending command to USB port: {}".format(
+                item["params"]['command'],
+            )
+            self.log(self.msg)
+            data = self.send_command(
+                port,
+                speed,
+                item["params"]['command'],
+                timeout=timeout,
+                sleep=sleep,
+            )
+            self.log("Response: {}".format(data))
+            response = {
+                "request": request,
+                "result": data,
+            }
+        except Exception as e:
+            response = {
+                "request": request,
+                "result": "Error: {}".format(e),
+            }
+            self.error(e)
+            self.log("Error: {}".format(e))
+        return response
+
+    def cmd_serial_send_bytes(self, item: dict) -> dict:
+        """
+        Send raw bytes to USB port
+
+        :param item: command item
+        :return: response item
+        """
+        request = self.prepare_request(item)
+        port = self.plugin.get_option_value("serial_port")
+        speed = self.plugin.get_option_value("serial_bps")
+        timeout = self.plugin.get_option_value("timeout")
+        sleep = self.plugin.get_option_value("sleep")
+        self.log("Using serial port: {} @ {} bps".format(port, speed))
+        try:
+            self.msg = "Sending binary data to USB port: {}".format(
+                item["params"]['bytes'],
+            )
+            self.log(self.msg)
+            data = self.send_binary_data(
+                port,
+                speed,
+                int(item["params"]['bytes']),
+                timeout=timeout,
+                sleep=sleep,
+            )
+            self.log("Response: {}".format(data))
+            response = {
+                "request": request,
+                "result": data,
+            }
+        except Exception as e:
+            response = {
+                "request": request,
+                "result": "Error: {}".format(e),
+            }
+            self.error(e)
+            self.log("Error: {}".format(e))
+        return response
+
+    def cmd_serial_read(self, item: dict) -> dict:
+        """
+        Read data from USB port
+
+        :param item: command item
+        :return: response item
+        """
+        request = self.prepare_request(item)
+        port = self.plugin.get_option_value("serial_port")
+        speed = self.plugin.get_option_value("serial_bps")
+        timeout = self.plugin.get_option_value("timeout")
+        duration = int(item["params"]['duration']) \
+            if "duration" in item["params"] else 3
+        self.log("Using serial port: {} @ {} bps".format(port, speed))
+        try:
+            self.msg = "Reading data from USB port..."
+            self.log(self.msg)
+            data = self.read_data(
+                port,
+                speed,
+                timeout=timeout,
+                duration=duration,
+            )
+            self.log("Response: {}".format(data))
+            response = {
+                "request": request,
+                "result": data,
+            }
+        except Exception as e:
+            response = {
+                "request": request,
+                "result": "Error: {}".format(e),
+            }
+            self.error(e)
+            self.log("Error: {}".format(e))
+        return response
 
     def send_command(
             self,
             port: str,
             speed: int,
             command: str,
             timeout: int = 1,
@@ -215,7 +255,16 @@
         data = ""
         ser = serial.Serial(port, speed, timeout=timeout)
         end_time = time.time() + duration
         while time.time() < end_time:
             if ser.in_waiting > 0:
                 data += ser.readline().decode().strip()
         return data
+
+    def prepare_request(self, item) -> dict:
+        """
+        Prepare request item for result
+
+        :param item: item with parameters
+        :return: request item
+        """
+        return {"cmd": item["cmd"]}
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/plugin/cmd_web/__init__.py` & `pygpt_net-2.2.0/src/pygpt_net/plugin/cmd_web/__init__.py`

 * *Files 10% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.03.04 20:00:00                  #
+# Updated Date: 2024.03.12 21:00:00                  #
 # ================================================== #
 
 import ssl
 from urllib.request import Request, urlopen
 
 from pygpt_net.plugin.base import BasePlugin
 from pygpt_net.provider.web.base import BaseProvider
@@ -118,70 +118,33 @@
             value=1500,
             label="Max summary tokens",
             description="Max tokens in output when generating summary",
             min=0,
             max=None,
         )
         self.add_option(
-            "cmd_web_search",
-            type="bool",
-            value=True,
-            label="Enable: \"web_search\" command",
-            description="Allow using command: web_search",
-            tooltip="If enabled, model will be able to search the Web",
-        )
-        self.add_option(
-            "cmd_web_url_open",
-            type="bool",
-            value=True,
-            label="Enable: \"web_url_open\" command",
-            description="Allow using command: web_url_open",
-            tooltip="If enabled, model will be able to open specified URL and summarize content",
-        )
-        self.add_option(
-            "cmd_web_url_raw",
-            type="bool",
-            value=True,
-            label="Enable: \"web_url_raw\" command",
-            description="Allow using command: web_url_raw",
-            tooltip="If enabled, model will be able to open specified URL and get raw content",
-        )
-        self.add_option(
-            "cmd_web_urls",
-            type="bool",
-            value=True,
-            label="Enable: \"web_urls\" command",
-            description="Allow using command: web_urls",
-            tooltip="If enabled, model will be able to search the Web and get founded URLs list",
-        )
-        self.add_option(
-            "cmd_web_index",
-            type="bool",
-            value=True,
-            label="Enable: \"web_index\" command",
-            description="If enabled, model will be able to index web content using Llama-index (persistent index)",
-            tooltip="If enabled, model will be able to index web pages using Llama-index (persistent index)",
-            tab="indexing",
-        )
-        self.add_option(
-            "cmd_web_index_query",
-            type="bool",
-            value=True,
-            label="Enable: \"web_index_query\" command - quick query the web content with Llama-index",
-            description="If enabled, model will be able to index and query web content using Llama-index (temporary index, on the fly)",
-            tooltip="If enabled, model will be able to index and query web content using Llama-index (temporary index, on the fly)",
+            "model_tmp_query",
+            type="combo",
+            value="gpt-3.5-turbo",
+            label="Model for query in-memory index",
+            description="Model used for query in-memory index for `web_index_query` command, "
+                        "default: gpt-3.5-turbo",
+            tooltip="Query model",
+            use="models",
             tab="indexing",
         )
         self.add_option(
             "auto_index",
             type="bool",
             value=False,
             label="Auto-index all used URLs using Llama-index",
-            description="If enabled, every URL used by the model will be automatically indexed using Llama-index (persistent index)",
-            tooltip="If enabled, every URL used by the model will be automatically indexed using Llama-index (persistent index)",
+            description="If enabled, every URL used by the model will be automatically indexed using Llama-index "
+                        "(persistent index)",
+            tooltip="If enabled, every URL used by the model will be automatically indexed using Llama-index "
+                    "(persistent index)",
             tab="indexing",
         )
         self.add_option(
             "idx",
             type="text",
             value="base",
             label="Index to use",
@@ -214,93 +177,154 @@
             value="Summarize text in English in a maximum of 3 paragraphs, trying to find the most "
                   "important content.",
             label="Summarize prompt (URL open)",
             description="Prompt used for specified URL page summarize",
             tooltip="Prompt",
             advanced=True,
         )
-        self.add_option(
-            "syntax_web_search",
-            type="textarea",
-            value='"web_search": use it to search the Web for more info, prepare a query for the search '
-                  'engine itself, start from page 1. If you don\'t find anything or don\'t find enough '
-                  'information, try the next page. Use a custom summary prompt if necessary, otherwise, '
-                  'a default summary will be used. Max pages limit: {max_pages}, params: "query", "page", '
-                  '"summarize_prompt"',
-            label="Syntax: web_search",
-            description="Syntax for web_search command, use {max_pages} as a placeholder for "
-                        "`num_pages` value",
-            advanced=True,
+
+        # commands
+        self.add_cmd(
+            "web_search",
+            instruction="search the Web for more info, prepare a query for the search engine itself, start from page 1. "
+                        "If no results, then try the next page. "
+                        "Use a custom summary prompt if necessary, otherwise, a default summary will be used. "
+                        "Max pages: {max_pages}",
+            params=[
+                {
+                    "name": "query",
+                    "type": "str",
+                    "description": "search query",
+                    "required": True,
+                },
+                {
+                    "name": "page",
+                    "type": "int",
+                    "description": "page number",
+                    "required": False,
+                },
+                {
+                    "name": "summarize_prompt",
+                    "type": "str",
+                    "description": "summary prompt",
+                    "required": False,
+                },
+            ],
+            enabled=True,
+            description="If enabled, model will be able to search the Web",
         )
-        self.add_option(
-            "syntax_web_url_open",
-            type="textarea",
-            value='"web_url_open": use it to get contents from a specific Web page. Use a custom summary '
-                  'prompt if necessary, otherwise a default summary will be used, params: "url", '
-                  '"summarize_prompt"',
-            label="Syntax: web_url_open",
-            description="Syntax for web_url_open command",
-            advanced=True,
+        self.add_cmd(
+            "web_url_open",
+            instruction="read and get summarized content from ANY website URL. Use a custom summary prompt if necessary, "
+                        "otherwise default summary will be used",
+            params=[
+                {
+                    "name": "url",
+                    "type": "str",
+                    "description": "URL to website",
+                    "required": True,
+                },
+                {
+                    "name": "summarize_prompt",
+                    "type": "str",
+                    "description": "summary prompt",
+                    "required": False,
+                },
+            ],
+            enabled=True,
+            description="If enabled, model will be able to open URL and summarize content",
         )
-        self.add_option(
-            "syntax_web_url_raw",
-            type="textarea",
-            value='"web_url_raw": use it to get RAW text/html content (not summarized) from a specific Web page, '
-                  'params: "url"',
-            label="Syntax: web_url_raw",
-            description="Syntax for web_url_raw command",
-            advanced=True,
+        self.add_cmd(
+            "web_url_raw",
+            instruction="read and get raw HTML/txt content (not summarized) from ANY website URL",
+            params=[
+                {
+                    "name": "url",
+                    "type": "str",
+                    "description": "URL to website",
+                    "required": True,
+                },
+            ],
+            enabled=True,
+            description="If enabled, model will be able to open specified URL and get raw content",
         )
-        self.add_option(
-            "syntax_web_urls",
-            type="textarea",
-            value='"web_urls": use it to search the Web for URLs to use, prepare a search query itself, '
-                  'a list of found links to websites will be returned, 10 links per page max. You can change the page '
-                  'or the number of links per page using the provided parameters, params: "query", "page", '
-                  '"num_links"',
-            label="Syntax: web_urls",
-            description="Syntax for web_urls command",
-            advanced=True,
+        self.add_cmd(
+            "web_urls",
+            instruction="search the Web for list of URLs, prepare search query itself, list of "
+                        "URLs will be returned, 10 links per page max.",
+            params=[
+                {
+                    "name": "query",
+                    "type": "str",
+                    "description": "search query",
+                    "required": True,
+                },
+                {
+                    "name": "page",
+                    "type": "int",
+                    "description": "page number",
+                    "required": False,
+                },
+                {
+                    "name": "num_links",
+                    "type": "int",
+                    "description": "links per page",
+                    "required": False,
+                },
+            ],
+            enabled=True,
+            description="If enabled, model will be able to search the Web and get founded URLs list",
         )
-        self.add_option(
-            "syntax_web_index_query",
-            type="textarea",
-            value='"web_index_query": read, index and query web content for additional context data, params: (same as for web_index)',
-            label="Syntax: web_index_query",
-            description="Syntax for querying web for additional context data",
-            advanced=True,
+        self.add_cmd(
+            "web_index",
+            instruction="",
+            params=[],
+            enabled=True,
+            tab="indexing",
+            description="If enabled, model will be able to index web content using Llama-index (persistent index)",
         )
-        """
-        # handled by code
-        self.add_option(
-            "syntax_web_index",
-            type="textarea",
-            value='"web_index": use it to index (embed in Vector Store) provided webpage URL for future use, '
-                  'params: "url"',
-            label="Syntax: web_index",
-            description="Syntax for web_index command",
-            advanced=True,
+        self.add_cmd(
+            "web_index_query",
+            instruction="read, index and query external content for additional context.",
+            params=[
+                {
+                    "name": "query",
+                    "description": "query",
+                },
+                {
+                    "name": "type",
+                    "description": "[use config from web_index command]",
+                },
+                {
+                    "name": "args",
+                    "description": "[use config from web_index command]",
+                },
+            ],
+            enabled=True,
+            tab="indexing",
+            description="If enabled, model will be able to index and query web content using Llama-index "
+                    "(temporary index, on the fly)",
         )
-        """
-
+        
         # register provider options
         self.init_provider()
         self.init_idx_options()
 
     def init_provider(self):
         """Initialize provider options"""
         providers = self.get_providers()
         for id in providers:
             providers[id].init(self)
 
     def init_idx_options(self):
         """Initialize indexing options"""
         instructions = self.window.core.idx.indexing.get_external_instructions()
         providers = self.window.core.idx.indexing.get_data_providers()
-        for id in instructions:
+        # enable/disable indexing for each loader
+        for id in list(instructions.keys()):
             name = id
             if id in providers:
                 name = providers[id].name
             self.add_option(
                 "index_web_" + id,
                 type="bool",
                 value=True,
@@ -409,79 +433,105 @@
         """
         Event: INPUT_BEFORE
 
         :param text: input text
         """
         self.input_text = text
 
-    def prepare_idx_syntax(self) -> str:
+    def prepare_idx_syntax(self) -> dict:
         """
         Prepare web_index command syntax with instructions parsed from web loaders
 
         :return: syntax string
         """
         instructions = self.window.core.idx.indexing.get_external_instructions()
-        allowed_types = ""
+        types = {}
+        args = {}
         for type in instructions:
             if not self.is_indexing_allowed(type):  # check if data loader is allowed
                 continue
-            allowed_types += "\n--- {}: {}".format(type, instructions[type])
-
-        if not allowed_types:
-            return ""
+            types[type] = instructions[type]["description"]
+            args[type] = list(instructions[type]["args"].keys())
 
-        return '"web_index": command for READING AND INDEXING CONTENT FROM EXTERNAL SOURCES. ' \
-               'Use it to read and index (embed in Vector Store) the provided URL for webpage or any other ' \
-               'remote resource, like YT video, RSS, etc. Provide type of resource in the "type" ' \
-               'param. If there is no allowed type for a specified resource then use the default "webpage" type. ' \
-               'If selected type requires additional args then pass them into "args" param, params: "type", "args".\n' \
-               'Allowed types (NOT commands) for "web_index" command:{allowed_types}'.format(allowed_types=allowed_types)
+        cmd = {
+            "cmd": "web_index",
+            "instruction": "read and index content from external source. Use it to read and index as vectors "
+                        "(embed in vector DB) the provided URL for webpage or any other remote resource, like "
+                        "YT video, RSS, etc. Provide type of the resource in the \"type\" param. If there is no allowed "
+                        "type for a specified resource then use the default \"webpage\" type. If selected type requires "
+                        "additional args, then pass them into \"args\"",
+            "params": [
+                {
+                    "name": "type",
+                    "type": "enum",
+                    "description": "data type",
+                    "required": True,
+                    "default": "webpage",
+                    "enum": {
+                        "type": types,
+                    }
+                },
+                {
+                    "name": "args",
+                    "type": "dict",
+                    "description": "extra args for type",
+                    "required": True,
+                    "enum": {
+                        "args": args,
+                    }
+                }
+            ],
+            "enabled": True,
+        }
+        return cmd
 
     def cmd_syntax(self, data: dict):
         """
         Event: CMD_SYNTAX
 
         :param data: event data dict
         """
         for option in self.allowed_cmds:
-            if not self.get_option_value("cmd_" + option):
+            if not self.has_cmd(option):
                 continue
 
             # special case for web_index
             if option == "web_index":
-                syntax = self.prepare_idx_syntax()
-                if syntax:
-                    data['syntax'].append(syntax)
+                data['cmd'].append(self.prepare_idx_syntax())
                 continue
-
-            key = "syntax_" + option
-            if self.has_option(key):
-                data['syntax'].append(
-                    self.get_option_value(key),
-                )
+            elif option == "web_search":
+                max_pages = self.get_option_value("num_pages")
+                cmd = self.get_cmd(option)
+                try:
+                    cmd["instruction"] = cmd["instruction"].format(max_pages=max_pages)
+                    data['cmd'].append(cmd)
+                    continue
+                except Exception as e:
+                    pass
+            data['cmd'].append(self.get_cmd(option))  # append command
 
     def cmd(self, ctx: CtxItem, cmds: list):
         """
         Event: CMD_EXECUTE
 
         :param ctx: CtxItem
         :param cmds: commands dict
         """
         my_commands = []
         for item in cmds:
-            if item["cmd"] in self.allowed_cmds and self.get_option_value("cmd_" + item["cmd"]):
+            if item["cmd"] in self.allowed_cmds and self.has_cmd(item["cmd"]):
                 my_commands.append(item)
 
         if len(my_commands) == 0:
             return
 
         # check required API keys and other settings
         if not self.get_provider().is_configured(my_commands):
-            self.gen_api_key_response(ctx, cmds)
             self.window.ui.dialogs.alert(self.get_provider().get_config_message())
+            self.gen_api_key_response(ctx, cmds)
             return
 
         try:
             # worker
             worker = Worker()
             worker.plugin = self
             worker.cmds = my_commands
@@ -525,16 +575,15 @@
             data = {
                 'msg_to_user': msg,
             }
             response = {
                 "request": request,
                 "result": data,
             }
-            ctx.results.append(response)
-            ctx.reply = True
+            self.reply(response, ctx)
             return
 
     def get_url(self, url: str, extra_headers: dict = None) -> bytes:
         """
         Get URL content
 
         :param url: URL
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/plugin/cmd_web/websearch.py` & `pygpt_net-2.2.0/src/pygpt_net/plugin/cmd_web/websearch.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/plugin/cmd_web/worker.py` & `pygpt_net-2.2.0/src/pygpt_net/plugin/cmd_web/worker.py`

 * *Files 18% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.03.04 20:00:00                  #
+# Updated Date: 2024.02.25 12:00:00                  #
 # ================================================== #
 
 import json
 
 from PySide6.QtCore import Slot
 from pygpt_net.plugin.base import BaseWorker, BaseSignals
 
@@ -25,260 +25,340 @@
         self.signals = WorkerSignals()
         self.args = args
         self.kwargs = kwargs
         self.plugin = None
         self.websearch = None
         self.cmds = None
         self.ctx = None
+        self.msg = None
 
     @Slot()
     def run(self):
         self.websearch.signals = self.signals  # connect signals
-
-        msg = None
+        responses = []
         for item in self.cmds:
-            request = {"cmd": item["cmd"]}  # prepare request item for result
-
+            response = None
             try:
-                # cmd: web_search
                 if item["cmd"] == "web_search":
-                    page = 1
-                    if "page" in item["params"]:
-                        page = int(item["params"]["page"])
-                    prompt = None
-                    if "summarize_prompt" in item["params"]:
-                        prompt = item["params"]["summarize_prompt"]
-
-                    # search for query
-                    result, total_found, current, url = self.websearch.make_query(
-                        item["params"]["query"],
-                        page,
-                        prompt,
-                    )
-                    msg = "Web search finished: '{}'".format(item["params"]["query"])
-                    data = {
-                        'content': result,
-                        'url': url,
-                        'page': current,
-                        'total_found': total_found,
-                    }
-                    if url:
-                        self.ctx.urls.append(url)
-
-                    self.response(
-                        {
-                            "request": request,
-                            "result": data,
-                        }
-                    )
+                    response = self.cmd_web_search(item)
 
-                # cmd: web_url_open
                 elif item["cmd"] == "web_url_open":
-                    prompt = None
-                    if "summarize_prompt" in item["params"]:
-                        prompt = item["params"]["summarize_prompt"]
-                    url = item["params"]["url"]
-                    msg = "Opening Web URL: '{}'".format(item["params"]["url"])
-
-                    # open url
-                    result, url = self.websearch.open_url(
-                        url,
-                        prompt,
-                    )
-                    data = {
-                        'content': result,
-                        'url': url,
-                    }
-                    if url:
-                        self.ctx.urls.append(url)
-
-                    self.response(
-                        {
-                            "request": request,
-                            "result": data,
-                        }
-                    )
+                    response = self.cmd_web_url_open(item)
 
-                # cmd: web_url_raw
                 elif item["cmd"] == "web_url_raw":
-                    url = item["params"]["url"]
-                    msg = "Opening Web URL: '{}'".format(item["params"]["url"])
+                    response = self.cmd_web_url_raw(item)
 
-                    # open url (raw)
-                    result, url = self.websearch.open_url_raw(
-                        url,
-                    )
-                    data = {
-                        'content': result,
-                        'url': url,
-                    }
-                    if url:
-                        self.ctx.urls.append(url)
-
-                    self.response(
-                        {
-                            "request": request,
-                            "result": data,
-                        }
-                    )
-
-                # cmd: web_urls
                 elif item["cmd"] == "web_urls":
-                    page = 1
-                    num = 10
-                    if "page" in item["params"]:
-                        page = int(item["params"]["page"])
-                    if "num_links" in item["params"]:
-                        num = int(item["params"]["num_links"])
-                    if num < 1:
-                        num = 1
-                    if num > 10:
-                        num = 10
-                    offset = 1
-                    if page > 1:
-                        offset = (page - 1) * num + 1
-
-                    # search for URLs
-                    urls = self.websearch.google_search(
-                        item["params"]["query"],
-                        num,
-                        offset,
-                    )
-                    msg = "Web search finished: '{}'".format(item["params"]["query"])
-                    data = {
-                        'urls': json.dumps(urls),
-                        'page': page,
-                        'num': num,
-                        'offset': offset,
-                    }
-                    if urls:
-                        for url in urls:
-                            self.ctx.urls.append(url)
-
-                    self.response(
-                        {
-                            "request": request,
-                            "result": data,
-                        }
-                    )
+                    response = self.cmd_web_urls(item)
 
-                # cmd: web_index
                 elif item["cmd"] == "web_index":
-                    type = "webpage"  # default
-                    args = {}
-
-                    if "type" in item["params"]:
-                        type = item["params"]["type"]
-                    if "args" in item["params"]:
-                        args = item["params"]["args"]
-
-                    url = type
-                    if "url" in item["params"]:
-                        url = item["params"]["url"]  # from default param
-                    if "url" in args:
-                        url = args["url"]  # override from args
-
-                    msg = "Indexing URL: '{}'".format(url)
-                    idx_name = self.plugin.get_option_value("idx")
-
-                    # show status
-                    self.status("Please wait... indexing: {}...".format(url))
-
-                    # index URL via Llama-index
-                    num, errors = self.plugin.window.core.idx.index_urls(
-                        idx=idx_name,
-                        urls=[url],
-                        type=type,
-                        extra_args=args,
-                    )
-                    data = {
-                        'num_indexed': num,
-                        'index': idx_name,
-                        'errors': errors,
-                        'url': url,
-                    }
-                    if url and (url.startswith("http://") or url.startswith("https://")):
-                            self.ctx.urls.append(url)
-
-                    self.response(
-                        {
-                            "request": request,
-                            "result": data,
-                        }
-                    )
+                    response = self.cmd_web_index(item)
 
-                # cmd: web_index_query
                 elif item["cmd"] == "web_index_query":
-                    type = "webpage"  # default
-                    args = {}
-                    query = None
-
-                    if "type" in item["params"]:
-                        type = item["params"]["type"]
-                    if "args" in item["params"]:
-                        args = item["params"]["args"]
-
-                    url = type
-                    if "url" in item["params"]:
-                        url = item["params"]["url"]  # from default param
-                    if "url" in args:
-                        url = args["url"]  # override from args
-
-                    if "query" in item["params"] and item["params"]["query"]:
-                        query = item["params"]["query"]
-
-                    response = {
-                        "request": request,
-                        "result": "No data",
-                    }
-
-                    if query is not None:
-                        # query file using temp index (created on the fly)
-                        self.log("Querying web: {}".format(url))
-                        answer = self.plugin.window.core.idx.chat.query_web(type, url, args, query)
-                        self.log("Response from temporary in-memory index: {}".format(answer))
-                        if answer:
-                            from_str = type
-                            if url:
-                                from_str += ", URL: " + url
-                            response = {
-                                "request": request,
-                                "result": answer,
-                                "context": "From: " + from_str + ":\n--------------------------------\n" + answer,
-                                # add additional context
-                            }
-
-                        # + auto-index to main index using Llama-index
-                        if self.plugin.get_option_value("auto_index"):
-                            msg = "Indexing URL: '{}'".format(url)
-                            idx_name = self.plugin.get_option_value("idx")
-
-                            # show status
-                            self.status("Please wait... indexing: {}...".format(url))
-
-                            # index URL via Llama-index
-                            num, errors = self.plugin.window.core.idx.index_urls(
-                                idx=idx_name,
-                                urls=[url],
-                                type=type,
-                                extra_args=args,
-                            )
-
-                    # add URL to context
-                    if url and (url.startswith("http://") or url.startswith("https://")):
-                        self.ctx.urls.append(url)
+                    response = self.cmd_web_index_query(item)
 
-                    self.response(response)
+                if response:
+                    responses.append(response)
 
             except Exception as e:
-                self.response(
-                    {
-                        "request": item,
-                        "result": "Error: {}".format(e),
-                    }
-                )
+                responses.append({
+                    "request": {
+                        "cmd": item["cmd"],
+                    },
+                    "result": "Error {}".format(e),
+                })
                 self.error(e)
                 self.log("Error: {}".format(e))
 
-        if msg is not None:
-            self.log(msg)
-            self.status(msg)
+        # send response
+        if len(responses) > 0:
+            for response in responses:
+                self.reply(response)
+
+        if self.msg is not None:
+            self.log(self.msg)
+            self.status(self.msg)
+
+    def cmd_web_search(self, item: dict) -> dict:
+        """
+        Web search command
+
+        :param item: command item
+        :return: response item
+        """
+        request = self.prepare_request(item)
+        page = 1
+        if "page" in item["params"]:
+            page = int(item["params"]["page"])
+        prompt = None
+        if "summarize_prompt" in item["params"]:
+            prompt = item["params"]["summarize_prompt"]
+        query = item["params"]["query"]
+        request["query"] = query
+
+        # search for query
+        result, total_found, current, url = self.websearch.make_query(
+            query,
+            page,
+            prompt,
+        )
+        self.msg = "Web search finished: '{}'".format(item["params"]["query"])
+        data = {
+            'content': result,
+            'url': url,
+            'page': current,
+            'total_found': total_found,
+        }
+        if url:
+            self.ctx.urls.append(url)
+
+        return {
+            "request": request,
+            "result": data,
+        }
+
+    def cmd_web_url_open(self, item: dict) -> dict:
+        """
+        Open web URL command
+
+        :param item: command item
+        :return: response item
+        """
+        request = self.prepare_request(item)
+        prompt = None
+        if "summarize_prompt" in item["params"]:
+            prompt = item["params"]["summarize_prompt"]
+        url = item["params"]["url"]
+        request["url"] = url
+
+        self.msg = "Opening Web URL: '{}'".format(item["params"]["url"])
+
+        # open url
+        result, url = self.websearch.open_url(
+            url,
+            prompt,
+        )
+        data = {
+            'content': result,
+            'url': url,
+        }
+        if url:
+            self.ctx.urls.append(url)
+
+        return {
+            "request": request,
+            "result": data,
+            "context": "From: " + url + ":\n--------------------------------\n" + result,
+            # add additional context
+        }
+
+    def cmd_web_url_raw(self, item: dict) -> dict:
+        """
+        Open web URL (raw) command
+
+        :param item: command item
+        :return: response item
+        """
+        request = self.prepare_request(item)
+        url = item["params"]["url"]
+        request["url"] = url
+
+        self.msg = "Opening Web URL: '{}'".format(item["params"]["url"])
+
+        # open url (raw)
+        result, url = self.websearch.open_url_raw(
+            url,
+        )
+        data = {
+            'content': result,
+            'url': url,
+        }
+        if url:
+            self.ctx.urls.append(url)
+
+        return {
+            "request": request,
+            "result": data,
+            "context": "From: " + url + ":\n--------------------------------\n" + result,
+            # add additional context
+        }
+
+    def cmd_web_urls(self, item: dict) -> dict:
+        """
+        Web search for URLs command
+
+        :param item: command item
+        :return: response item
+        """
+        request = self.prepare_request(item)
+        page = 1
+        num = 10
+        if "page" in item["params"]:
+            page = int(item["params"]["page"])
+        if "num_links" in item["params"]:
+            num = int(item["params"]["num_links"])
+        if num < 1:
+            num = 1
+        if num > 10:
+            num = 10
+        offset = 1
+        if page > 1:
+            offset = (page - 1) * num + 1
+        query = item["params"]["query"]
+        request["query"] = query
+
+        # search for URLs
+        urls = self.websearch.search(
+            query,
+            num,
+            offset,
+        )
+        self.msg = "Web search finished: '{}'".format(item["params"]["query"])
+        data = {
+            'urls': json.dumps(urls),
+            'page': page,
+            'num': num,
+            'offset': offset,
+        }
+        if urls:
+            for url in urls:
+                self.ctx.urls.append(url)
+
+        return {
+            "request": request,
+            "result": data,
+        }
+
+    def cmd_web_index(self, item: dict) -> dict:
+        """
+        Index web URL command
+
+        :param item: command item
+        :return: response item
+        """
+        request = self.prepare_request(item)
+        type = "webpage"  # default
+        args = {}
+
+        if "type" in item["params"]:
+            type = item["params"]["type"]
+        if "args" in item["params"]:
+            args = item["params"]["args"]
+
+        url = type
+        if "url" in item["params"]:
+            url = item["params"]["url"]  # from default param
+        if "url" in args:
+            url = args["url"]  # override from args
+
+        self.msg = "Indexing URL: '{}'".format(url)
+        idx_name = self.plugin.get_option_value("idx")
+
+        # show status
+        self.status("Please wait... indexing: {}...".format(url))
+
+        # index URL via Llama-index
+        num, errors = self.plugin.window.core.idx.index_urls(
+            idx=idx_name,
+            urls=[url],
+            type=type,
+            extra_args=args,
+        )
+        data = {
+            'num_indexed': num,
+            'index': idx_name,
+            'errors': errors,
+            'url': url,
+        }
+        if url and (url.startswith("http://") or url.startswith("https://")):
+            self.ctx.urls.append(url)
+
+        return {
+            "request": request,
+            "result": data
+        }
+
+    def cmd_web_index_query(self, item: dict) -> dict:
+        request = self.prepare_request(item)
+        type = "webpage"  # default
+        args = {}
+        query = None
+
+        if "type" in item["params"]:
+            type = item["params"]["type"]
+        if "args" in item["params"]:
+            args = item["params"]["args"]
+
+        url = type
+        if "url" in item["params"]:
+            url = item["params"]["url"]  # from default param
+        if "url" in args:
+            url = args["url"]  # override from args
+
+        if "query" in item["params"] and item["params"]["query"]:
+            query = item["params"]["query"]
+
+        response = {
+            "request": request,
+            "result": "No data",
+        }
+
+        if query is not None:
+            # query file using temp index (created on the fly)
+            self.log("Querying web: {}".format(url))
+
+            # get tmp query model
+            model = self.plugin.window.core.models.from_defaults()
+            tmp_model = self.plugin.get_option_value("model_tmp_query")
+            if self.plugin.window.core.models.has(tmp_model):
+                model = self.plugin.window.core.models.get(tmp_model)
+
+            answer = self.plugin.window.core.idx.chat.query_web(
+                ctx=self.ctx,
+                type=type,
+                url=url,
+                args=args,
+                query=query,
+                model=model,
+            )
+            self.log("Response from temporary in-memory index: {}".format(answer))
+            if answer:
+                from_str = type
+                if url:
+                    from_str += ", URL: " + url
+                response = {
+                    "request": request,
+                    "result": answer,
+                    "context": "From: " + from_str + ":\n--------------------------------\n" + answer,
+                    # add additional context
+                }
+
+            # + auto-index to main index using Llama-index
+            if self.plugin.get_option_value("auto_index"):
+                self.msg = "Indexing URL: '{}'".format(url)
+                idx_name = self.plugin.get_option_value("idx")
+
+                # show status
+                self.status("Please wait... indexing: {}...".format(url))
+
+                # index URL via Llama-index
+                num, errors = self.plugin.window.core.idx.index_urls(
+                    idx=idx_name,
+                    urls=[url],
+                    type=type,
+                    extra_args=args,
+                )
+
+        # add URL to context
+        if url and (url.startswith("http://") or url.startswith("https://")):
+            self.ctx.urls.append(url)
+
+        return response
+
+    def prepare_request(self, item) -> dict:
+        """
+        Prepare request item for result
+
+        :param item: item with parameters
+        :return: request item
+        """
+        return {"cmd": item["cmd"]}
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/plugin/extra_prompt/__init__.py` & `pygpt_net-2.2.0/src/pygpt_net/plugin/extra_prompt/__init__.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/plugin/idx_llama_index/__init__.py` & `pygpt_net-2.2.0/src/pygpt_net/plugin/idx_llama_index/__init__.py`

 * *Files 10% similar despite different names*

```diff
@@ -2,47 +2,51 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.03.03 22:00:00                  #
+# Updated Date: 2024.04.17 01:00:00                  #
 # ================================================== #
 
+import json
+
 from pygpt_net.plugin.base import BasePlugin
 from pygpt_net.core.dispatcher import Event
 from pygpt_net.item.ctx import CtxItem
 
+from .worker import Worker
+
 
 class Plugin(BasePlugin):
     def __init__(self, *args, **kwargs):
         super(Plugin, self).__init__(*args, **kwargs)
         self.id = "idx_llama_index"
         self.name = "Llama-index (inline)"
         self.description = "Integrates Llama-index storage in any chat"
         self.allowed_cmds = [
-            "get_knowledge",
+            "get_context",
         ]
         self.ignored_modes = [
             "llama_index",
         ]
         self.order = 100
         self.use_locale = True
         self.mode = None  # current mode
         self.init_options()
 
     def init_options(self):
-        """Initialize options"""   # TODO: make better prompt, redefine context
+        """Initialize options"""
         prompt = 'ADDITIONAL CONTEXT: I will provide you with additional context about my question. ' \
                  'When it is provided, then use this data as additional context and use it in your response. ' \
                  'Additional context will be prefixed with an "ADDITIONAL CONTEXT:" prefix. You can also provide a ' \
                  'command to query my context database anytime you need any additional context - to do this, return ' \
                  'to me the prepared prompt in JSON format, all in one line, using the following syntax: ' \
-                 '~###~{"cmd": "get_knowledge", "params": {"question": "simple and concrete question here"}}~###~. ' \
+                 '~###~{"cmd": "get_context", "params": {"query": "<simple question here>"}}~###~. ' \
                  'Use ONLY this syntax and remember to surround the JSON string with ~###~. DO NOT use any other ' \
                  'syntax. When making query use language that I spoke to you.'
 
         self.add_option(
             "prompt",
             type="textarea",
             value=prompt,
@@ -110,21 +114,42 @@
             value=1000,
             label="Max characters in question",
             description="Max characters in question when querying Llama-index, 0 = no limit",
             min=0,
             max=None,
         )
         self.add_option(
+            "append_meta",
+            type="bool",
+            value=False,
+            label="Append metadata to context",
+            description="If enabled, then metadata from Llama-index will be appended to additional context",
+        )
+        self.add_option(
             "syntax_prepare_question",
             type="textarea",
             value='Simplify the question into a short query for retrieving information from a vector store.',
             label="Prompt for question preparation",
             description="System prompt for question preparation",
             advanced=True,
         )
+        self.add_cmd(
+            "get_context",
+            instruction="get additional context for a given question",
+            params=[
+                {
+                    "name": "query",
+                    "type": "str",
+                    "description": "question to retrieve additional context for",
+                    "required": True,
+                },
+            ],
+            enabled=True,
+            description="If enabled, model will be able to get additional context for a given question",
+        )
 
     def setup(self) -> dict:
         """
         Return available config options
 
         :return: config options
         """
@@ -169,20 +194,24 @@
                 return
 
             data['value'] = self.on_post_prompt(
                 data['value'],
                 ctx,
             )
 
+        elif name == Event.CMD_SYNTAX:
+            self.cmd_syntax(data)
+
         elif name in [
             Event.CMD_INLINE,
             Event.CMD_EXECUTE,
         ]:
             if self.mode in self.ignored_modes:  # ignore
                 return
+
             if ctx.reply:
                 return
 
             self.cmd(
                 ctx,
                 data['commands'],
             )
@@ -193,14 +222,25 @@
 
         :param prompt: prompt
         :return: updated prompt
         """
         prompt += "\n" + self.get_option_value("prompt")
         return prompt
 
+    def cmd_syntax(self, data: dict):
+        """
+        Event: CMD_SYNTAX
+
+        :param data: event data dict
+        """
+        for option in self.allowed_cmds:
+            if not self.has_cmd(option):
+                continue
+            data['cmd'].append(self.get_cmd(option))  # append command
+
     def prepare_question(self, ctx: CtxItem) -> str:
         """
         Prepare query for Llama-index
 
         :param ctx: CtxItem
         :return: prepared question for Llama-index
         """
@@ -229,108 +269,108 @@
         """
         Event: POST_PROMPT
 
         :param prompt: system prompt
         :param ctx: CtxItem
         :return: updated system prompt
         """
-        if not self.get_option_value("ask_llama_first"):
+        if not self.get_option_value("ask_llama_first") or self.window.controller.agent.enabled():
             return prompt
 
         question = ctx.input
         if self.get_option_value("prepare_question"):
             question = self.prepare_question(ctx)
             if question == "":
                 return prompt
 
         self.log("Querying Llama-index for: " + question)
 
-        response, doc_ids = self.query(question)
+        response, doc_ids, metas = self.query(question)
         if response is None or len(response) == 0:
             self.log("No additional context. Aborting.")
             return prompt
         else:
             ctx.doc_ids = doc_ids
 
         prompt += "\nADDITIONAL CONTEXT: " + response
         return prompt
 
-    def query(self, question: str) -> (str, list):
+    def query(self, question: str) -> (str, list, list):
         """
         Query Llama-index
 
         :param question: question
-        :return: response, list of document ids
+        :return: response, list of document ids, list of metadata
         """
         doc_ids = []
+        metas = []
         idx = self.get_option_value("idx")
         model = self.window.core.models.from_defaults()
         if self.get_option_value("model_query") is not None:
             model_query = self.get_option_value("model_query")
             if self.window.core.models.has(model_query):
                 model = self.window.core.models.get(model_query)
+
+        # get indexes
         indexes = idx.split(",")
 
         # max length of question for Llama-index
         max_len = self.get_option_value("max_question_chars")
         if max_len > 0:
             if len(question) > max_len:
                 question = question[:max_len]
 
         # query index(es)
         if len(indexes) > 1:
             responses = []
             for index in indexes:
-                ctx = CtxItem()
+                ctx = CtxItem()  # tmp ctx
                 ctx.input = question
                 self.window.core.idx.chat.query(
                     ctx=ctx,
                     idx=index.strip(),
                     model=model,
                     stream=False,
                 )
-                self.append_meta_to_ctx(ctx)
                 if ctx.index_meta:
                     doc_ids.append(ctx.index_meta)
+                    metas.append(ctx.index_meta)
+                    self.append_meta_to_response(ctx)
                 self.log("Using additional context: " + str(ctx.output))
-                responses.append(ctx.output)  # tmp ctx
+                responses.append(ctx.output)
 
-            return "\n".join(responses), doc_ids
+            return "\n---\n".join(responses), doc_ids, metas
         else:
-            ctx = CtxItem()
+            ctx = CtxItem()  # tmp ctx
             ctx.input = question
             self.window.core.idx.chat.query(
                 ctx=ctx,
                 idx=idx,
                 model=model,
                 stream=False,
             )
-            self.append_meta_to_ctx(ctx)
             if ctx.index_meta:
                 doc_ids.append(ctx.index_meta)
+                metas.append(ctx.index_meta)
+                self.append_meta_to_response(ctx)
             self.log("Using additional context: " + str(ctx.output))
 
-            return ctx.output, doc_ids  # tmp ctx, llama doc_ids
+            return ctx.output, doc_ids, metas  # tmp ctx, llama doc_ids, meta
 
-    def append_meta_to_ctx(self, ctx: CtxItem):
+    def append_meta_to_response(self, ctx: CtxItem):
         """
-        Append metadata from Llama-index to context item
+        Append metadata from Llama-index to context response
 
         :param ctx: CtxItem
         """
-        meta = ""
+        meta = None
         if ctx.index_meta is not None and isinstance(ctx.index_meta, dict):
-            for id in ctx.index_meta:
-                meta += "\n" + id + ": "
-                if "file_path" in ctx.index_meta[id]:
-                    path = ctx.index_meta[id]["file_path"]
-                    path = self.window.core.idx.files.get_id(path)
-                    meta += path
-            if meta:
-                ctx.output += "\nReceived from: " + meta.strip()
+            meta = json.dumps(ctx.index_meta)
+        if self.get_option_value("append_meta") and meta:
+            ctx.output += "\n--------------------------------\nMetadata: " + meta
 
     def cmd(self, ctx: CtxItem, cmds: list):
         """
         Events: CMD_INLINE, CMD_EXECUTE
 
         :param ctx: CtxItem
         :param cmds: commands dict
@@ -341,40 +381,44 @@
             if item["cmd"] in self.allowed_cmds:
                 my_commands.append(item)
                 is_cmd = True
 
         if not is_cmd:
             return
 
-        for item in my_commands:
-            try:
-                if item["cmd"] == "get_knowledge":
-                    question = item["params"]["question"]
-                    request = {
-                        "cmd": item["cmd"],
-                    }
-                    data, doc_ids = self.query(question)  # send question to Llama-index
-                    response = {
-                        "request": request,
-                        "result": data,
-                        "doc_ids": doc_ids,
-                    }
-                    # store doc_ids in context
-                    if doc_ids:
-                        ctx.doc_ids = doc_ids
-                    ctx.results.append(response)
-                    ctx.reply = True
-            except Exception as e:
-                self.log("Error: " + str(e))
+        try:
+            # worker
+            worker = Worker()
+            worker.plugin = self
+            worker.cmds = my_commands
+            worker.ctx = ctx
+
+            # signals (base handlers)
+            worker.signals.finished.connect(self.handle_finished)
+            worker.signals.log.connect(self.handle_log)
+            worker.signals.debug.connect(self.handle_debug)
+            worker.signals.status.connect(self.handle_status)
+            worker.signals.error.connect(self.handle_error)
+
+            # check if async allowed
+            if not self.window.core.dispatcher.async_allowed(ctx):
+                worker.run()
                 return
 
+            # start
+            self.window.threadpool.start(worker)
+
+        except Exception as e:
+            self.error(e)
+
     def log(self, msg: str):
         """
         Log message to console
 
         :param msg: message to log
         """
         full_msg = '[LLAMA-INDEX] ' + str(msg)
         self.debug(full_msg)
         self.window.ui.status(full_msg.replace("\n", " "))
         if self.is_log():
             print(full_msg)
+        self.window.idx_logger_message.emit(msg)
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/plugin/openai_dalle/__init__.py` & `pygpt_net-2.2.0/src/pygpt_net/plugin/openai_dalle/__init__.py`

 * *Files 3% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.14 15:00:00                  #
+# Updated Date: 2024.03.16 12:00:00                  #
 # ================================================== #
 
 from pygpt_net.item.model import ModelItem
 from pygpt_net.plugin.base import BasePlugin
 from pygpt_net.core.dispatcher import Event
 from pygpt_net.item.ctx import CtxItem
 
@@ -56,15 +56,15 @@
         self.add_option(
             "prompt",
             type="textarea",
             value=prompt,
             label="Prompt",
             description="Prompt used for generating a query for DALL-E in background.",
             tooltip="Prompt",
-            advanced=True,
+            advanced=False,
         )
 
     def setup(self) -> dict:
         """
         Return available config options
 
         :return: config options
@@ -135,17 +135,16 @@
         if not is_cmd:
             return
 
         for item in my_commands:
             try:
                 if item["cmd"] == "image":
                     query = item["params"]["query"]
-                    # WHAT'S HAPPENING HERE:
-                    # if internal call (ctx.internal = True) then it will re-send OK response
-                    # if not internal call then it will append image to chat only
+                    # if internal call (ctx.internal = True), then re-send OK response
+                    # if not internal call, then append image to chat only
                     model = ModelItem()
                     model.id = "dall-e-3"
                     self.window.core.bridge.call(
                         mode="image",
                         prompt=query,
                         ctx=ctx,
                         model=model,  # model instance
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/plugin/openai_vision/__init__.py` & `pygpt_net-2.2.0/src/pygpt_net/plugin/openai_vision/__init__.py`

 * *Files 8% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.14 15:00:00                  #
+# Updated Date: 2024.04.11 22:00:00                  #
 # ================================================== #
 
 from pygpt_net.item.ctx import CtxItem
 from pygpt_net.plugin.base import BasePlugin
 from pygpt_net.core.dispatcher import Event
 
 
@@ -45,37 +45,21 @@
                  "related to the photo.  Remember to always describe in great detail all the aspects related to the " \
                  "photo, try to place them in the context of the conversation, and make a full analysis of what you " \
                  "see. "
         self.add_option(
             "model",
             type="combo",
             use="models",
-            value="gpt-4-vision-preview",
+            value="gpt-4-turbo-2024-04-09",
             label="Model",
             description="Model used to temporarily providing vision abilities, "
-                        "default: gpt-4-vision-preview",
+                        "default: gpt-4-turbo-2024-04-09",
             tooltip="Model",
         )
         self.add_option(
-            "cmd_capture",
-            type="bool",
-            value=False,
-            label="Enable: camera capture command",
-            description="Allow using command: camera capture",
-            tooltip="If enabled, model will be able to capture images from camera",
-        )
-        self.add_option(
-            "cmd_screenshot",
-            type="bool",
-            value=False,
-            label="Enable: make screenshot command",
-            description="Allow using command: make screenshot",
-            tooltip="If enabled, model will be able to making screenshots",
-        )
-        self.add_option(
             "prompt",
             type="textarea",
             value=prompt,
             label="Prompt",
             description="Prompt used for vision mode. It will append or replace current system prompt "
                         "when using vision model",
             tooltip="Prompt",
@@ -88,14 +72,26 @@
             label="Replace prompt",
             description="Replace whole system prompt with vision prompt against appending "
                         "it to the current prompt",
             tooltip="Replace whole system prompt with vision prompt against appending it to the "
                     "current prompt",
             advanced=True,
         )
+        self.add_cmd(
+            "camera_capture",
+            instruction="capture image from webcam",
+            params=[],
+            enabled=True,
+        )
+        self.add_cmd(
+            "make_screenshot",
+            instruction="make desktop screenshot",
+            params=[],
+            enabled=True,
+        )
 
     def setup(self) -> dict:
         """
         Return available config options
 
         :return: config options
         """
@@ -179,27 +175,20 @@
 
     def cmd_syntax(self, data: dict):
         """
         Event: CMD_SYNTAX
 
         :param data: event data dict
         """
-        if not self.get_option_value("cmd_capture") \
-                and not self.get_option_value("cmd_screenshot"):
+        if not self.has_cmd("camera_capture") and not self.has_cmd("make_screenshot"):
             return
-
-        # append syntax
-        if self.get_option_value("cmd_capture"):
-            data['syntax'].append(
-                '"camera_capture": use it to capture image from user camera'
-            )
-        if self.get_option_value("cmd_screenshot"):
-            data['syntax'].append(
-                '"make_screenshot": use it to make screenshot from user screen'
-            )
+        if self.has_cmd("camera_capture"):
+            data['cmd'].append(self.get_cmd("camera_capture"))  # append command
+        if self.has_cmd("make_screenshot"):
+            data['cmd'].append(self.get_cmd("make_screenshot"))  # append command
 
     def cmd(self, ctx: CtxItem, cmds: list):
         """
         Event: CMD_EXECUTE
 
         :param ctx: CtxItem
         :param cmds: commands dict
@@ -210,37 +199,70 @@
             if item["cmd"] in self.allowed_cmds:
                 my_commands.append(item)
                 is_cmd = True
 
         if not is_cmd:
             return
 
+        responses = []
         for item in my_commands:
-            if item["cmd"] == "camera_capture" and self.get_option_value("cmd_capture"):
-                request = {
-                    "cmd": item["cmd"],
-                }
-                self.window.controller.camera.manual_capture(force=True)
-                response = {
-                    "request": request,
-                    "result": "OK",
-                }
-                ctx.results.append(response)
-                ctx.reply = True
-            elif item["cmd"] == "make_screenshot" and self.get_option_value("cmd_screenshot"):
-                request = {
-                    "cmd": item["cmd"],
-                }
-                self.window.controller.painter.capture.screenshot()
-                response = {
-                    "request": request,
-                    "result": "OK",
-                }
-                ctx.results.append(response)
-                ctx.reply = True
+            response = None
+
+            if item["cmd"] == "camera_capture" and self.has_cmd(item["cmd"]):
+                response = self.cmd_camera_capture(item)
+
+            elif item["cmd"] == "make_screenshot" and self.has_cmd(item["cmd"]):
+                response = self.cmd_make_screenshot(item)
+
+            if response:
+                responses.append(response)
+
+        # send response
+        if len(responses) > 0:
+            for response in responses:
+                self.reply(response, ctx)
+
+    def cmd_camera_capture(self, item: dict) -> dict:
+        """
+        Capture image from camera
+
+        :param item: command item
+        :return: response item
+        """
+        request = self.prepare_request(item)
+        self.window.controller.camera.manual_capture(force=True)
+        response = {
+            "request": request,
+            "result": "OK",
+        }
+        return response
+
+    def cmd_make_screenshot(self, item: dict) -> dict:
+        """
+        Make desktop screenshot
+
+        :param item: command item
+        :return: response item
+        """
+        request = self.prepare_request(item)
+        self.window.controller.painter.capture.screenshot()
+        response = {
+            "request": request,
+            "result": "OK",
+        }
+        return response
+
+    def prepare_request(self, item) -> dict:
+        """
+        Prepare request item for result
+
+        :param item: item with parameters
+        :return: request item
+        """
+        return {"cmd": item["cmd"]}
 
     def on_toggle(self, value: bool):
         """
         Events: CTX_SELECT, MODE_SELECT, MODEL_SELECT
 
         :param value: vision mode state
         """
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/plugin/real_time/__init__.py` & `pygpt_net-2.2.0/src/pygpt_net/plugin/real_time/__init__.py`

 * *Files 9% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.04 18:00:00                  #
+# Updated Date: 2024.03.13 15:00:00                  #
 # ================================================== #
 
 from datetime import datetime
 
 from pygpt_net.plugin.base import BasePlugin
 from pygpt_net.core.dispatcher import Event
 
@@ -49,15 +49,15 @@
 
         desc = "Template to append to system prompt.\n" \
                "Placeholder {time} will be replaced with current date and time in real-time. "
         tooltip = "Text to append to system prompt."
         self.add_option(
             "tpl",
             type="textarea",
-            value=" Current time is {time}.",
+            value="Current time is {time}.",
             label="Template",
             description=desc,
             tooltip=tooltip,
         )
 
     def setup(self) -> dict:
         """
@@ -99,24 +99,20 @@
         """
         Event: SYSTEM_PROMPT
 
         :param prompt: prompt
         :param silent: silent mode (no logs)
         :return: updated prompt
         """
-        if not silent:
-            self.debug("Plugin: real_time:on_system_prompt [before]: " + str(prompt))  # log
-
         if self.get_option_value("hour") or self.get_option_value("date"):
+            if prompt.strip() != "":
+                prompt += "\n\n"
             if self.get_option_value("hour") and self.get_option_value("date"):
                 prompt += self.get_option_value("tpl").\
                     format(time=datetime.now().strftime('%A, %Y-%m-%d %H:%M:%S'))
             elif self.get_option_value("hour"):
                 prompt += self.get_option_value("tpl").\
                     format(time=datetime.now().strftime('%H:%M:%S'))
             elif self.get_option_value("date"):
                 prompt += self.get_option_value("tpl").\
                     format(time=datetime.now().strftime('%A, %Y-%m-%d'))
-
-        if not silent:
-            self.debug("Plugin: real_time:on_system_prompt [after]: " + str(prompt))  # log
         return prompt
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/audio_input/base.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/audio_input/base.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/audio_input/bing_speech_recognition.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/audio_input/bing_speech_recognition.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/audio_input/google_cloud_speech_recognition.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/audio_input/google_cloud_speech_recognition.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/audio_input/google_speech_recognition.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/audio_input/google_speech_recognition.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/audio_input/openai_whisper.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/audio_input/openai_whisper.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/audio_input/openai_whisper_local.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/audio_input/openai_whisper_local.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/audio_output/base.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/audio_output/base.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/audio_output/eleven_labs.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/audio_output/eleven_labs.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/audio_output/google_tts.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/audio_output/google_tts.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/audio_output/ms_azure_tts.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/audio_output/ms_azure_tts.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/audio_output/openai_tts.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/audio_output/openai_tts.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/core/assistant/base.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/core/assistant/base.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/core/assistant/json_file.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/core/assistant/json_file.py`

 * *Files 6% similar despite different names*

```diff
@@ -141,14 +141,15 @@
             'description': item.description,
             'instructions': item.instructions,
             'model': item.model,
             'meta': item.meta,
             'attachments': attachments,
             'files': item.files,
             'tools': item.tools,
+            'vector_store': item.vector_store,
         }
 
     @staticmethod
     def deserialize(data: dict, item: AssistantItem):
         """
         Deserialize item from dict
 
@@ -167,14 +168,26 @@
             item.model = data['model']
         if 'meta' in data:
             item.meta = data['meta']
         if 'files' in data:
             item.files = data['files']
         if 'tools' in data:
             item.tools = data['tools']
+        if 'vector_store' in data:
+            item.vector_store = data['vector_store']
+
+        # fix for versions < 2.1.79
+        if 'file_search' not in item.tools:
+            if 'retrieval' in item.tools:
+                item.tools['file_search'] = item.tools['retrieval']
+            else:
+                item.tools['file_search'] = False
+
+        if 'retrieval' in item.tools:
+            del item.tools['retrieval']
 
         # fix for older versions
         if 'function' in item.tools:
             if isinstance(item.tools['function'], bool):
                 item.tools['function'] = []
 
         # deserialize attachments
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/core/attachment/base.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/core/attachment/base.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/core/attachment/json_file.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/core/attachment/json_file.py`

 * *Files 3% similar despite different names*

```diff
@@ -137,15 +137,16 @@
         :return: serialized item
         """
         return {
             'id': attachment.id,
             'name': attachment.name,
             'path': attachment.path,
             'remote': attachment.remote,
-            'send': attachment.send
+            'send': attachment.send,
+            'vector_store_ids': attachment.vector_store_ids,
         }
 
     @staticmethod
     def deserialize(data: dict, attachment: AttachmentItem):
         """
         Deserialize item from dict
 
@@ -158,14 +159,16 @@
             attachment.name = data['name']
         if 'path' in data:
             attachment.path = data['path']
         if 'remote_id' in data:
             attachment.remote = data['remote']
         if 'send' in data:
             attachment.send = data['send']
+        if 'vector_store_ids' in data:
+            attachment.vector_store_ids = data['vector_store_ids']
 
     def dump(self, item: AttachmentItem) -> str:
         """
         Dump to string
 
         :param item: item to dump
         :return: dumped item as string (json)
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/core/calendar/base.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/core/calendar/base.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/core/calendar/db_sqlite/__init__.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/core/calendar/db_sqlite/__init__.py`

 * *Files 3% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.01.12 04:00:00                  #
+# Updated Date: 2024.03.07 23:00:00                  #
 # ================================================== #
 
 import uuid
 
 from packaging.version import Version
 
 from pygpt_net.item.calendar_note import CalendarNoteItem
@@ -88,16 +88,22 @@
         :param year: year
         :param month: month
         :param day: day
         :return: CalendarNoteItem object
         """
         return self.storage.get_by_date(year, month, day)
 
-    def get_notes_existence_by_day(self, year, month):
-        """Get notes existence by day"""
+    def get_notes_existence_by_day(self, year, month) -> dict:
+        """
+        Get notes existence by day
+
+        :param year: year
+        :param month: month
+        :return: notes existence by day
+        """
         return self.storage.get_notes_existence_by_day(year, month)
 
     def save(self, note: CalendarNoteItem):
         """
         Save note to DB
 
         :param note: CalendarNoteItem
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/core/calendar/db_sqlite/patch.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/core/calendar/db_sqlite/patch.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/core/calendar/db_sqlite/storage.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/core/calendar/db_sqlite/storage.py`

 * *Files 7% similar despite different names*

```diff
@@ -2,22 +2,23 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.01.12 04:00:00                  #
+# Updated Date: 2024.03.06 04:00:00                  #
 # ================================================== #
 
 import time
 
 from sqlalchemy import text
 
 from pygpt_net.item.calendar_note import CalendarNoteItem
+from pygpt_net.utils import unpack_var
 
 
 class Storage:
     def __init__(self, window=None):
         """
         Initialize storage instance
 
@@ -306,21 +307,21 @@
         """
         Unpack note item from DB row
 
         :param note: CalendarNoteItem item
         :param row: DB row
         :return: CalendarNoteItem item
         """
-        note.id = int(row['id'])
-        note.idx = int(row['idx'] or 0)
+        note.id = unpack_var(row['id'], 'int')
+        note.idx = unpack_var(row['idx'], 'int')
         note.uuid = row['uuid']
-        note.status = int(row['status'] or 0)
-        note.year = int(row['year'] or 0)
-        note.month = int(row['month'] or 0)
-        note.day = int(row['day'] or 0)
-        note.created = int(row['created_ts'])
-        note.updated = int(row['updated_ts'])
+        note.status = unpack_var(row['status'], 'int')
+        note.year = unpack_var(row['year'], 'int')
+        note.month = unpack_var(row['month'], 'int')
+        note.day = unpack_var(row['day'], 'int')
+        note.created = unpack_var(row['created_ts'], 'int')
+        note.updated = unpack_var(row['updated_ts'], 'int')
         note.title = row['title']
         note.content = row['content']
-        note.important = bool(row['is_important'])
-        note.deleted = bool(row['is_deleted'])
+        note.important = unpack_var(row['is_important'], 'bool')
+        note.deleted = unpack_var(row['is_deleted'], 'bool')
         return note
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/core/config/base.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/core/config/base.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/core/config/json_file.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/core/config/json_file.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/core/config/patch.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/core/config/patch.py`

 * *Files 13% similar despite different names*

```diff
@@ -2,17 +2,18 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.03.04 20:00:00                  #
+# Updated Date: 2024.04.26 23:00:00                  #
 # ================================================== #
 
+import copy
 import os
 
 from packaging.version import parse as parse_version, Version
 
 
 class Patch:
     def __init__(self, window=None):
@@ -1006,30 +1007,410 @@
 
             # < 2.1.5 - syntax
             if old < parse_version("2.1.5"):
                 print("Migrating config from < 2.1.5...")
                 if 'cmd_files' in data["plugins"] and 'syntax_file_index' in data["plugins"]["cmd_files"]:
                     syntax = '"file_index": use it to index (embed in Vector Store) a file or directory, params: "path"'
                     data["plugins"]["cmd_files"]["syntax_file_index"] = syntax
+                    updated = True
 
             # < 2.1.8 - syntax
             if old < parse_version("2.1.8"):
                 print("Migrating config from < 2.1.8...")
                 if 'idx_llama_index' in data["plugins"] and 'syntax_prepare_question' in data["plugins"]["idx_llama_index"]:
                     syntax = 'Simplify the question into a short query for retrieving information from a vector store.'
                     data["plugins"]["idx_llama_index"]["syntax_prepare_question"] = syntax
+                    updated = True
 
             # < 2.1.9 - syntax
             if old < parse_version("2.1.9"):
                 print("Migrating config from < 2.1.9...")
                 if 'cmd_files' in data["plugins"] and 'syntax_read_file' in data["plugins"]["cmd_files"]:
                     syntax = '"read_file": read data from file, if multiple files then pass list of files, params: "filename"'
                     data["plugins"]["cmd_files"]["syntax_read_file"] = syntax
                 if 'log.events' not in data:
                     data["log.events"] = False
+                    updated = True
+
+            # < 2.1.10
+            if old < parse_version("2.1.10"):
+                print("Migrating config from < 2.1.10...")
+
+                # fix missing updated before >>>
+                if 'cmd_files' in data["plugins"] and 'syntax_file_index' in data["plugins"]["cmd_files"]:
+                    syntax = '"file_index": use it to index (embed in Vector Store) a file or directory, params: "path"'
+                    data["plugins"]["cmd_files"]["syntax_file_index"] = syntax
+                if 'idx_llama_index' in data["plugins"] and 'syntax_prepare_question' in data["plugins"]["idx_llama_index"]:
+                    syntax = 'Simplify the question into a short query for retrieving information from a vector store.'
+                    data["plugins"]["idx_llama_index"]["syntax_prepare_question"] = syntax
+                if 'cmd_files' in data["plugins"] and 'syntax_read_file' in data["plugins"]["cmd_files"]:
+                    syntax = '"read_file": read data from file, if multiple files then pass list of files, params: "filename"'
+                    data["plugins"]["cmd_files"]["syntax_read_file"] = syntax
+                if 'log.events' not in data:
+                    data["log.events"] = False
+                # <<< fix missing updated before
+
+                # current
+                if 'ctx.records.filter.labels' not in data:
+                    data["ctx.records.filter.labels"] = [0, 1, 2, 3, 4, 5, 6, 7]
+
+                if 'preset.plugins' not in data:
+                    data["preset.plugins"] = ""
+
+                if 'ctx.records.filter' in data and str(data["ctx.records.filter"]).startswith("label"):
+                    data["ctx.records.filter"] = "all"
+                updated = True
+
+            if old < parse_version("2.1.12"):
+                print("Migrating config from < 2.1.12...")
+                if 'max_requests_limit' not in data:
+                    data["max_requests_limit"] = 60
+                if 'ctx.allow_item_delete' not in data:
+                    data["ctx.allow_item_delete"] = True
+                if 'ctx.counters.all' not in data:
+                    data["ctx.counters.all"] = False
+                if 'agent.prompt.continue' not in data:
+                    data["agent.prompt.continue"] = "continue..."
+                if 'api_endpoint' not in data:
+                    data["api_endpoint"] = "https://api.openai.com/v1"
+                updated = True
+
+            if old < parse_version("2.1.15"):
+                print("Migrating config from < 2.1.15...")
+                if 'ctx.edit_icons' not in data:
+                    data["ctx.edit_icons"] = False
+                if 'llama.idx.auto.modes' not in data:
+                    data["llama.idx.auto.modes"] = "chat,completion,vision,assistant,langchain,llama_index,agent"
+                if 'ctx.allow_item_delete' in data:
+                    del data["ctx.allow_item_delete"]
+                updated = True
+
+            if old < parse_version("2.1.16"):
+                print("Migrating config from < 2.1.16...")
+                if 'ctx.sources' not in data:
+                    data["ctx.sources"] = True
+                updated = True
+
+            if old < parse_version("2.1.18"):
+                print("Migrating config from < 2.1.18...")
+                if 'ctx.audio' not in data:
+                    data["ctx.audio"] = True
+                updated = True
+
+            if old < parse_version("2.1.19"):
+                print("Migrating config from < 2.1.19...")
+                if 'llama.idx.excluded_ext' in data:
+                    data["llama.idx.excluded.ext"] = copy.deepcopy(data["llama.idx.excluded_ext"])
+                    del data["llama.idx.excluded_ext"]
+                if 'llama.idx.excluded.force' not in data:
+                    data["llama.idx.excluded.force"] = False
+                if 'llama.idx.custom_meta' not in data:
+                    data["llama.idx.custom_meta"] = [
+                          {
+                              "extensions": "*",
+                              "key": "file_name",
+                              "value": "{relative_path}"
+                          }
+                    ]
+                updated = True
+
+            # < 2.1.20
+            if old < parse_version("2.1.20"):
+                print("Migrating config from < 2.1.20...")
+                data['cmd.prompt'] = self.window.core.config.get_base('cmd.prompt')  # moved to json schema
+                updated = True
+
+            # < 2.1.22
+            if old < parse_version("2.1.22"):
+                print("Migrating config from < 2.1.22...")
+                if 'llama.idx.custom_meta.web' not in data:
+                    data["llama.idx.custom_meta.web"] = []
+                updated = True
+
+            # < 2.1.23
+            if old < parse_version("2.1.23"):
+                print("Migrating config from < 2.1.23...")
+                if 'llama.idx.embeddings.provider' not in data:
+                    data["llama.idx.embeddings.provider"] = "openai"
+                if 'llama.idx.embeddings.args' not in data:
+                    data["llama.idx.embeddings.args"] = [
+                        {
+                            "name": "model",
+                            "value": "text-embedding-3-small",
+                            "type": "str"
+                        }
+                    ]
+                if 'llama.idx.embeddings.env' not in data:
+                    data["llama.idx.embeddings.env"] = [
+                        {
+                            "name": "OPENAI_API_KEY",
+                            "value": "{api_key}",
+                        },
+                        {
+                            "name": "OPENAI_API_BASE",
+                            "value": "{api_endpoint}",
+                        }
+                    ]
+                self.window.core.plugins.reset_options("cmd_web", [
+                    "cmd.web_url_open",
+                    "cmd.web_url_raw",
+                ])
+                updated = True
+
+            # < 2.1.26
+            if old < parse_version("2.1.26"):
+                print("Migrating config from < 2.1.26...")
+                if 'agent.prompt.continue' in data and data['agent.prompt.continue'] == 'continue...':
+                    data["agent.prompt.continue"] = "continue if needed..."
+                self.window.core.plugins.reset_options("idx_llama_index", [
+                    "prompt",
+                ])
+                updated = True
+
+            # < 2.1.28
+            if old < parse_version("2.1.28"):
+                print("Migrating config from < 2.1.28...")
+                if 'log.ctx' not in data:
+                    data["log.ctx"] = True
+                if 'llama.idx.embeddings.limit.rpm' not in data:
+                    data["llama.idx.embeddings.limit.rpm"] = 100
+                updated = True
+
+            # < 2.1.29
+            if old < parse_version("2.1.29"):
+                print("Migrating config from < 2.1.29...")
+                self.window.core.plugins.reset_options("cmd_code_interpreter", [
+                    "cmd.code_execute",
+                ])
+                updated = True
+
+            # < 2.1.31
+            if old < parse_version("2.1.31"):
+                print("Migrating config from < 2.1.31...")
+                self.window.core.plugins.reset_options("cmd_code_interpreter", [
+                    "cmd.code_execute",
+                ])
+                files_to_move = [
+                    {"_interpreter.current.py": ".interpreter.current.py"},
+                    {"_interpreter.py": ".interpreter.output.py"},
+                    {"_interpreter.input.py": ".interpreter.input.py"},
+                ]
+                files_to_remove = [
+                    "_interpreter.tmp.py",
+                ]
+                dir = self.window.core.config.get_user_dir("data")
+                try:
+                    for file in files_to_move:
+                        for src, dst in file.items():
+                            src = os.path.join(dir, src)
+                            dst = os.path.join(dir, dst)
+                            if os.path.exists(src):
+                                os.rename(src, dst)
+                    for file in files_to_remove:
+                        file = os.path.join(dir, file)
+                        if os.path.exists(file):
+                            os.remove(file)
+                except Exception as e:
+                    print("Error while migrating interpreter files:", e)
+
+                updated = True
+
+            # < 2.1.32
+            if old < parse_version("2.1.32"):
+                print("Migrating config from < 2.1.32...")
+                if 'ctx.use_extra' not in data:
+                    data["ctx.use_extra"] = True
+
+                self.window.core.plugins.reset_options("real_time", [
+                    "tpl",
+                ])
+
+                # old keys first
+                data['cmd.prompt'] = self.window.core.config.get_base('prompt.cmd')  # new format
+                data['cmd.prompt.extra'] = self.window.core.config.get_base('prompt.cmd.extra')  # new format
+                data['cmd.prompt.extra.assistants'] = self.window.core.config.get_base('prompt.cmd.extra.assistants')  # new format
+
+                # new keys
+                data['prompt.agent.goal'] = self.window.core.config.get_base('prompt.agent.goal')  # new format
+
+                # replace to new keys
+                self.window.core.config.replace_key(data, "img_prompt", "prompt.img")
+                self.window.core.config.replace_key(data, "ctx.auto_summary.prompt", "prompt.ctx.auto_summary.user")
+                self.window.core.config.replace_key(data, "ctx.auto_summary.system", "prompt.ctx.auto_summary.system")
+                self.window.core.config.replace_key(data, "cmd.prompt", "prompt.cmd")
+                self.window.core.config.replace_key(data, "cmd.prompt.extra", "prompt.cmd.extra")
+                self.window.core.config.replace_key(data, "cmd.prompt.extra.assistants", "prompt.cmd.extra.assistants")
+                self.window.core.config.replace_key(data, "agent.prompt.continue", "prompt.agent.continue")
+                self.window.core.config.replace_key(data, "default_prompt", "prompt.default")
+                updated = True
+
+            # < 2.1.35
+            if old < parse_version("2.1.35"):
+                print("Migrating config from < 2.1.35...")
+                if 'interpreter.auto_clear' not in data:
+                    data["interpreter.auto_clear"] = True
+                if 'interpreter.execute_all' not in data:
+                    data["interpreter.execute_all"] = True
+                if 'interpreter.edit' not in data:
+                    data["interpreter.edit"] = False
+                if 'interpreter.input' not in data:
+                    data["interpreter.input"] = ""
+                if 'video.player.path' not in data:
+                    data["video.player.path"] = ""
+                if 'video.player.volume' not in data:
+                    data["video.player.volume"] = 100
+                if 'video.player.volume.mute' not in data:
+                    data["video.player.volume.mute"] = False
+                updated = True
+
+            # < 2.1.37
+            if old < parse_version("2.1.37"):
+                print("Migrating config from < 2.1.37...")
+                if 'audio.transcribe.convert_video' not in data:
+                    data["audio.transcribe.convert_video"] = True
+                updated = True
+
+            # < 2.1.38
+            if old < parse_version("2.1.38"):
+                print("Migrating config from < 2.1.38...")
+                if 'lang' in data and data['lang'] == 'ua':
+                    data["lang"] = "uk"
+                updated = True
+
+            # < 2.1.45
+            if old < parse_version("2.1.45"):
+                print("Migrating config from < 2.1.45...")
+                if 'ctx.copy_code' not in data:
+                    data["ctx.copy_code"] = True
+                updated = True
+
+            # < 2.1.52
+            if old < parse_version("2.1.52"):
+                print("Migrating config from < 2.1.52...")
+                if 'ctx.code_interpreter' not in data:
+                    data["ctx.code_interpreter"] = True
+                updated = True
+
+            # < 2.1.59
+            if old < parse_version("2.1.59"):
+                print("Migrating config from < 2.1.59...")
+                if 'render.code_syntax' not in data:
+                    data["render.code_syntax"] = "github-dark"
+                if 'zoom' not in data:
+                    data["zoom"] = 1.0
+                if 'ctx.convert_lists' not in data:
+                    data["ctx.convert_lists"] = False
+                if 'render.engine' not in data:
+                    data["render.engine"] = "web"
+                if 'render.open_gl' not in data:
+                    data["render.open_gl"] = False
+
+                # in snap, leave legacy render engine by default
+                # if self.window.core.platforms.is_snap():
+                    # data["render.engine"] = "legacy"
+
+                # css upgrade
+                self.window.core.updater.patch_css('web.css', True)  # NEW
+                self.window.core.updater.patch_css('web.light.css', True)  # NEW
+                self.window.core.updater.patch_css('web.dark.css', True)  #  NEW
+                updated = True
+
+            # < 2.1.60
+            if old < parse_version("2.1.60"):
+                print("Migrating config from < 2.1.60...")
+                # css upgrade
+                self.window.core.updater.patch_css('web.css', True)  # force update
+                updated = True
+
+            # < 2.1.61
+            if old < parse_version("2.1.61"):
+                print("Migrating config from < 2.1.61...")
+                # css upgrade
+                self.window.core.updater.patch_css('web.css', True)  # force update
+                updated = True
+
+            # < 2.1.63
+            if old < parse_version("2.1.63"):
+                print("Migrating config from < 2.1.63...")
+                # css upgrade
+                self.window.core.updater.patch_css('web.css', True)  # force update
+                self.window.core.updater.patch_css('web.light.css', True)  # force update
+                self.window.core.updater.patch_css('web.dark.css', True)  # force update
+                updated = True
+
+            # < 2.1.70
+            if old < parse_version("2.1.70"):
+                print("Migrating config from < 2.1.70...")
+                # css upgrade
+                self.window.core.updater.patch_css('web.css', True)  # force update
+                updated = True
+
+            # < 2.1.72
+            if old < parse_version("2.1.72"):
+                print("Migrating config from < 2.1.72...")
+                # css upgrade
+                self.window.core.updater.patch_css('web.css', True)  # force update
+                self.window.core.updater.patch_css('web.light.css', True)  # force update
+                self.window.core.updater.patch_css('web.dark.css', True)  # force update
+                updated = True
+
+            # < 2.1.73
+            if old < parse_version("2.1.73"):
+                print("Migrating config from < 2.1.73...")
+                # fix: issue #50
+                if "llama.idx.embeddings.args" in data:
+                    for arg in data["llama.idx.embeddings.args"]:
+                        if "type" not in arg:
+                            arg["type"] = "str"
+                updated = True
+
+            # < 2.1.74
+            if old < parse_version("2.1.74"):
+                print("Migrating config from < 2.1.74...")
+                # css upgrade
+                self.window.core.updater.patch_css('web.css', True)  # force update
+                self.window.core.updater.patch_css('web.light.css', True)  # force update
+                self.window.core.updater.patch_css('web.dark.css', True)  # force update
+                updated = True
+
+            # < 2.1.75
+            if old < parse_version("2.1.75"):
+                print("Migrating config from < 2.1.75...")
+                # css upgrade
+                self.window.core.updater.patch_css('web.css', True)  # force update
+                self.window.core.updater.patch_css('web.light.css', True)  # force update
+                self.window.core.updater.patch_css('web.dark.css', True)  # force update
+                updated = True
+
+            # < 2.1.76
+            if old < parse_version("2.1.76"):
+                print("Migrating config from < 2.1.76...")
+                if 'render.blocks' not in data:
+                    data["render.blocks"] = True
+                # css upgrade
+                self.window.core.updater.patch_css('web.css', True)  # force update
+                self.window.core.updater.patch_css('web.light.css', True)  # force update
+                self.window.core.updater.patch_css('web.dark.css', True)  # force update
+                updated = True
+
+            # < 2.1.78
+            if old < parse_version("2.1.78"):
+                print("Migrating config from < 2.1.78...")
+                # css upgrade, scroll bg
+                self.window.core.updater.patch_css('web.css', True)  # force update
+                self.window.core.updater.patch_css('web.light.css', True)  # force update
+                self.window.core.updater.patch_css('web.dark.css', True)  # force update
+                updated = True
+
+            # < 2.1.79
+            if old < parse_version("2.1.79"):
+                print("Migrating config from < 2.1.79...")
+                if 'assistant.store.hide_threads' not in data:
+                    data["assistant.store.hide_threads"] = True
+                updated = True
 
         # update file
         migrated = False
         if updated:
             data = dict(sorted(data.items()))
             self.window.core.config.data = data
             self.window.core.config.save()
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/core/ctx/base.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/core/preset/base.py`

 * *Files 23% similar despite different names*

```diff
@@ -2,86 +2,56 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.23 01:00:00                  #
+# Updated Date: 2024.02.01 00:00:00                  #
 # ================================================== #
 
 from packaging.version import Version
 
-from pygpt_net.item.ctx import CtxMeta, CtxItem
+from pygpt_net.item.preset import PresetItem
 
 
 class BaseProvider:
     def __init__(self, window=None):
         self.window = window
         self.id = ""
-        self.type = "ctx"
+        self.type = "preset"
 
     def attach(self, window):
         self.window = window
 
     def install(self):
         pass
 
     def patch(self, version: Version) -> bool:
         pass
 
-    def append_item(self, meta: CtxMeta, item: CtxItem):
+    def create(self, item: PresetItem):
         pass
 
-    def update_item(self, item: CtxItem):
+    def load(self) -> dict:
         pass
 
-    def create(self, meta: CtxMeta):
+    def load_base(self) -> dict:
         pass
 
-    def load(self, id) -> list:
-        return []
-
-    def save(self, id, meta: CtxMeta, items: list):
-        pass
-
-    def remove(self, id):
-        pass
-
-    def truncate(self):
-        pass
-
-    def get_meta(
-            self,
-            search_string: str = None,
-            order_by: str = None,
-            order_direction: str = None,
-            limit: int = None,
-            offset: int = None,
-            filters: dict = None,
-            search_content: bool = False
-    ):
+    def save(self, id: str, item: PresetItem):
         pass
 
-    def get_meta_indexed(self):
+    def save_all(self, items: dict):
         pass
 
-    def dump(self, ctx: CtxItem):
+    def remove(self, id: str):
         pass
 
-    def set_meta_indexed_by_id(self, id: int, ts: int) -> bool:
-        pass
-
-    def update_meta_indexes_by_id(self, id: int, meta: CtxMeta) -> bool:
-        pass
-
-    def update_meta_indexed_by_id(self, id: int) -> bool:
-        pass
-
-    def update_meta_indexed_to_ts(self, ts: int) -> bool:
+    def truncate(self):
         pass
 
-    def clear_meta_indexed_by_id(self, id: int) -> bool:
+    def dump(self, item: PresetItem):
         pass
 
-    def clear_meta_indexed_all(self) -> bool:
+    def get_version(self):
         pass
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/core/ctx/db_sqlite/__init__.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/core/ctx/db_sqlite/__init__.py`

 * *Files 20% similar despite different names*

```diff
@@ -2,22 +2,22 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.23 01:00:00                  #
+# Updated Date: 2024.04.17 07:00:00                  #
 # ================================================== #
 
 import time
 from uuid import uuid4
 from packaging.version import Version
 
-from pygpt_net.item.ctx import CtxMeta, CtxItem
+from pygpt_net.item.ctx import CtxMeta, CtxItem, CtxGroup
 from .patch import Patch
 from .storage import Storage
 from pygpt_net.provider.core.ctx.base import BaseProvider
 
 
 class DbSqliteProvider(BaseProvider):
     def __init__(self, window=None):
@@ -98,15 +98,15 @@
             order_direction=order_direction,
             limit=param_limit,
             offset=offset,
             filters=filters,
             search_content=search_content,
         )
 
-    def get_meta_indexed(self):
+    def get_meta_indexed(self) -> dict:
         """
         Return dict of ctx meta indexed by ID
 
         :return: dict of ctx meta indexed by ID
         """
         return self.storage.get_meta_indexed()
 
@@ -115,24 +115,41 @@
         Load items for ctx ID
 
         :param id: ctx ID
         :return: list of ctx items
         """
         return self.storage.get_items(id)
 
-    def get_ctx_count_by_day(self, year: int, month: int = None, day: int = None) -> dict:
+    def get_ctx_count_by_day(
+            self, year: int,
+            month: int = None,
+            day: int = None,
+            search_string: str = None,
+            filters: dict = None,
+            search_content: bool = False,
+    ) -> dict:
         """
         Get ctx count by day or by month if only year is provided
 
         :param year: year
         :param month: month
         :param day: day
+        :param search_string: search string (optional)
+        :param filters: filters (optional)
+        :param search_content: search in content (not only in meta) (optional)
         :return: dict of ctx counters by day or by month if only year is provided
         """
-        return self.storage.get_ctx_count_by_day(year, month, day)
+        return self.storage.get_ctx_count_by_day(
+            year=year,
+            month=month,
+            day=day,
+            search_string=search_string,
+            filters=filters,
+            search_content=search_content,
+        )
 
     def append_item(self, meta: CtxMeta, item: CtxItem) -> bool:
         """
         Append item to ctx
 
         :param meta: ctx meta (CtxMeta)
         :param item: ctx item (CtxItem)
@@ -173,21 +190,40 @@
         :return: True if saved
         """
         if self.storage.update_meta_all(meta, items):
             return True
 
     def remove(self, id: int) -> bool:
         """
-        Remove ctx
+        Remove ctx (meta + items)
 
         :param id: ctx meta ID
         :return: True if removed
         """
         return self.storage.delete_meta_by_id(id)
 
+    def remove_item(self, id: int) -> bool:
+        """
+        Remove ctx item
+
+        :param id: ctx item ID
+        :return: True if removed
+        """
+        return self.storage.delete_item_by_id(id)
+
+    def remove_items_from(self, meta_id: int, item_id: int):
+        """
+        Remove ctx items from meta_id
+
+        :param meta_id: meta_id
+        :param item_id: item_id
+        :return: True if removed
+        """
+        return self.storage.delete_items_from(meta_id, item_id)
+
     def truncate(self) -> bool:
         """
         Truncate ctx (remove all ctx, meta + items)
 
         :return: True if truncated
         """
         return self.storage.truncate_all()
@@ -242,7 +278,53 @@
     def clear_meta_indexed_all(self) -> bool:
         """
         Clear all meta indexed timestamps
 
         :return: True if cleared
         """
         return self.storage.clear_meta_indexed_all()
+
+    def get_groups(self) -> dict:
+        """
+        Return dict of groups
+
+        :return: dict of ctx meta
+        """
+        return self.storage.get_groups()
+
+    def insert_group(self, group: CtxGroup):
+        """
+        Insert group
+
+        :param group: CtxGroup
+        """
+        return self.storage.insert_group(group)
+
+    def update_group(self, group: CtxGroup):
+        """
+        Update group
+
+        :param group: CtxGroup
+        """
+        return self.storage.update_group(group)
+
+    def remove_group(self, id: int, all: bool = False):
+        """
+        Remove group by ID
+
+        :param id: group ID
+        :param all: remove items
+        """
+        return self.storage.delete_group(id, all=all)
+
+    def truncate_groups(self):
+        """Remove groups"""
+        return self.storage.truncate_groups()
+
+    def update_meta_group_id(self, id: int, group_id: int):
+        """
+        Update meta group ID
+
+        :param id: ctx ID
+        :param group_id: group ID
+        """
+        return self.storage.update_meta_group_id(id, group_id)
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/core/ctx/db_sqlite/patch.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/core/ctx/db_sqlite/patch.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/core/ctx/db_sqlite/storage.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/core/ctx/db_sqlite/storage.py`

 * *Files 20% similar despite different names*

```diff
@@ -2,31 +2,31 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.03.03 22:00:00                  #
+# Updated Date: 2024.04.08 21:00:00                  #
 # ================================================== #
 
 from datetime import datetime
 import re
 import time
 
 from sqlalchemy import text
 
-from pygpt_net.item.ctx import CtxMeta, CtxItem
+from pygpt_net.item.ctx import CtxMeta, CtxItem, CtxGroup
 from .utils import \
     search_by_date_string, \
     pack_item_value, \
     unpack_meta, \
     unpack_item, \
-    get_month_start_end_timestamps,\
-    get_year_start_end_timestamps
+    get_month_start_end_timestamps, \
+    get_year_start_end_timestamps, unpack_group
 
 
 class Storage:
     def __init__(self, window=None):
         """
         Initialize storage instance
 
@@ -38,40 +38,30 @@
         """
         Attach window instance
 
         :param window: Window instance
         """
         self.window = window
 
-    def get_meta(
+    def prepare_query(
             self,
             search_string: str = None,
-            order_by: str = None,
-            order_direction: str = None,
-            limit: int = None,
-            offset: int = None,
             filters: dict = None,
             search_content: bool = False,
-    ) -> dict:
+            append_date_ranges: bool = True,
+    ):
         """
-        Return dict with CtxMeta objects, indexed by ID
+        Prepare query for search_string and filters
 
         :param search_string: search string
-        :param order_by: order by
-        :param order_direction: order direction (asc, desc)
-        :param limit: result limit
-        :param offset: result offset
         :param filters: dict of filters
         :param search_content: search in content (input, output)
-        :return: dict of CtxMeta
+        :param append_date_ranges: append date ranges
+        :return: where_statement, join_statement, bind_params
         """
-        limit_suffix = ""
-        if limit is not None and limit > 0:
-            limit_suffix = " LIMIT {}".format(limit)
-
         where_clauses = []
         join_clauses = []
         bind_params = {}
 
         # search_string
         if search_string:
             date_ranges = search_by_date_string(search_string)
@@ -79,49 +69,88 @@
                 r'@date\((\d{4}-\d{2}-\d{2})?(,)?(\d{4}-\d{2}-\d{2})?\)',
                 '',
                 search_string.strip(),
             )
             if search_string:
                 if search_content:
                     where_clauses.append(
-                        "m.name LIKE :search_string OR i.input LIKE :search_string OR i.output LIKE :search_string"
+                        "(m.name LIKE :search_string OR i.input LIKE :search_string OR i.output LIKE :search_string)"
                     )
                     join_clauses.append("LEFT JOIN ctx_item i ON m.id = i.meta_id")
                 else:
                     where_clauses.append("m.name LIKE :search_string")
                 bind_params['search_string'] = f"%{search_string}%"
 
-            for start_ts, end_ts in date_ranges:
-                if start_ts and end_ts:
-                    where_clauses.append("(m.updated_ts BETWEEN :start_ts AND :end_ts)")
-                    bind_params['start_ts'] = start_ts
-                    bind_params['end_ts'] = end_ts
-                elif start_ts:
-                    where_clauses.append("(m.updated_ts >= :start_ts)")
-                    bind_params['start_ts'] = start_ts
-                elif end_ts:
-                    where_clauses.append("(m.updated_ts <= :end_ts)")
-                    bind_params['end_ts'] = end_ts
+            if append_date_ranges:
+                for start_ts, end_ts in date_ranges:
+                    if start_ts and end_ts:
+                        where_clauses.append("(m.updated_ts BETWEEN :start_ts AND :end_ts)")
+                        bind_params['start_ts'] = start_ts
+                        bind_params['end_ts'] = end_ts
+                    elif start_ts:
+                        where_clauses.append("(m.updated_ts >= :start_ts)")
+                        bind_params['start_ts'] = start_ts
+                    elif end_ts:
+                        where_clauses.append("(m.updated_ts <= :end_ts)")
+                        bind_params['end_ts'] = end_ts
 
         # display filters
         if filters:
             for key, filter in filters.items():
                 if key == 'date_range':
                     continue
                 mode = filter.get('mode', '=')
                 value = filter.get('value', '')
                 if isinstance(value, int):
                     where_clauses.append(f"{key} {mode} :{key}")
                     bind_params[key] = value
                 elif isinstance(value, str):
                     where_clauses.append(f"{key} {mode} :{key}")
                     bind_params[key] = f"%{value}%"
+                elif isinstance(value, list):
+                    values = "(" + ",".join([str(x) for x in value]) + ")"
+                    where_clauses.append(f"{key} {mode} {values}")
 
         where_statement = " AND ".join(where_clauses) if where_clauses else "1"
         join_statement = " ".join(join_clauses) if join_clauses else ""
+
+        return where_statement, join_statement, bind_params
+
+    def get_meta(
+            self,
+            search_string: str = None,
+            order_by: str = None,
+            order_direction: str = None,
+            limit: int = None,
+            offset: int = None,
+            filters: dict = None,
+            search_content: bool = False,
+    ) -> dict:
+        """
+        Return dict with CtxMeta objects, indexed by ID
+
+        :param search_string: search string
+        :param order_by: order by
+        :param order_direction: order direction (asc, desc)
+        :param limit: result limit
+        :param offset: result offset
+        :param filters: dict of filters
+        :param search_content: search in content (input, output)
+        :return: dict of CtxMeta
+        """
+        limit_suffix = ""
+        if limit is not None and limit > 0:
+            limit_suffix = " LIMIT {}".format(limit)
+
+        where_statement, join_statement, bind_params = self.prepare_query(
+            search_string=search_string,
+            filters=filters,
+            search_content=search_content,
+            append_date_ranges=True,
+        )
         stmt_text = f"""
             SELECT m.* FROM ctx_meta m {join_statement} WHERE {where_statement}
             ORDER BY m.updated_ts DESC {limit_suffix}
         """
         stmt = text(stmt_text).bindparams(**bind_params)
 
         items = {}
@@ -170,24 +199,28 @@
             result = conn.execute(stmt)
             for row in result:
                 item = CtxItem()
                 unpack_item(item, row._asdict())
                 items.append(item)
         return items
 
-    def truncate_all(self) -> bool:
+    def truncate_all(self, reset: bool = True) -> bool:
         """
         Truncate all ctx tables
 
+        :param reset: reset table sequence (autoincrement)
         :return: True if truncated
         """
         db = self.window.core.db.get_db()
         with db.begin() as conn:
             conn.execute(text("DELETE FROM ctx_item"))
             conn.execute(text("DELETE FROM ctx_meta"))
+            if reset:  # reset table sequence (autoincrement)
+                conn.execute(text(f"DELETE FROM sqlite_sequence WHERE name='ctx_item'"))
+                conn.execute(text(f"DELETE FROM sqlite_sequence WHERE name='ctx_meta'"))
         return True
 
     def delete_meta_by_id(self, id: int) -> bool:
         """
         Delete ctx meta by ID
 
         :param id: ctx meta ID
@@ -198,14 +231,48 @@
         """).bindparams(id=id)
         db = self.window.core.db.get_db()
         with db.begin() as conn:
             conn.execute(stmt)
         self.delete_items_by_meta_id(id)
         return True
 
+    def delete_item_by_id(self, id: int) -> bool:
+        """
+        Delete ctx item by ID
+
+        :param id: ctx item ID
+        :return: True if deleted
+        """
+        stmt = text("""
+            DELETE FROM ctx_item WHERE id = :id
+        """).bindparams(id=id)
+        db = self.window.core.db.get_db()
+        with db.begin() as conn:
+            conn.execute(stmt)
+        return True
+
+    def delete_items_from(self, meta_id: int, item_id: int) -> bool:
+        """
+        Delete ctx items from ID
+
+        :param meta_id: ctx meta ID
+        :param item_id: ctx item ID
+        :return: True if deleted
+        """
+        stmt = text("""
+            DELETE FROM ctx_item WHERE id >= :item_id AND meta_id = :meta_id
+        """).bindparams(
+            meta_id=meta_id,
+            item_id=item_id,
+        )
+        db = self.window.core.db.get_db()
+        with db.begin() as conn:
+            conn.execute(stmt)
+        return True
+
     def delete_items_by_meta_id(self, id: int) -> bool:
         """
         Delete ctx items by ctx meta ID
 
         :param id: ctx meta ID
         :return: True if deleted
         """
@@ -474,15 +541,16 @@
                 run_id,
                 status,
                 extra,
                 is_initialized,
                 is_deleted,
                 is_important,
                 is_archived,
-                label
+                label,
+                group_id
             )
             VALUES 
             (
                 :uuid,
                 :external_id,
                 :created_ts,
                 :updated_ts,
@@ -497,15 +565,16 @@
                 :run_id,
                 :status,
                 :extra,
                 :is_initialized,
                 :is_deleted,
                 :is_important,
                 :is_archived,
-                :label
+                :label,
+                :group_id
             )
         """).bindparams(
             uuid=meta.uuid,
             external_id=meta.external_id,
             created_ts=int(meta.created or 0),
             updated_ts=int(meta.updated or 0),
             name=meta.name,
@@ -520,14 +589,15 @@
             status=meta.status,
             extra=meta.extra,
             is_initialized=int(meta.initialized),
             is_deleted=int(meta.deleted),
             is_important=int(meta.important),
             is_archived=int(meta.archived),
             label=int(meta.label),
+            group_id=meta.group_id,
         )
         with db.begin() as conn:
             result = conn.execute(stmt)
             meta.id = result.lastrowid
             return meta.id
 
     def insert_item(self, meta: CtxMeta, item: CtxItem) -> int:
@@ -689,59 +759,247 @@
             is_internal=int(item.internal or 0),
             docs_json=pack_item_value(item.doc_ids),
         )
         with db.begin() as conn:
             conn.execute(stmt)
         return True
 
-    def get_ctx_count_by_day(self, year: int, month: int = None, day: int = None) -> dict:
+    def get_ctx_count_by_day(
+            self,
+            year: int,
+            month: int = None,
+            day: int = None,
+            search_string: str = None,
+            filters: dict = None,
+            search_content: bool = False,
+    ) -> dict:
         """
-        Return ctx count by day for given year and month
+        Return ctx counters by day for given year and month
 
         :param year: year
         :param month: month
         :param day: day
+        :param search_string: search string
+        :param filters: dict of filters
+        :param search_content: search in content (input, output)
         :return: dict with day as key and count as value
         """
+        # prepare query with search filters
+        where_statement, join_statement, bind_params = self.prepare_query(
+            search_string=search_string,
+            filters=filters,
+            search_content=search_content,
+            append_date_ranges=False,  # without date ranges
+        )
+
+        # prepare where statement
+        if where_statement == "1":
+            where_statement = ""
+        else:
+            where_statement = f"AND {where_statement}"
+
         db = self.window.core.db.get_db()
         with db.connect() as conn:
-            # in day
+            # by day
             if year and month and day:
-                result = conn.execute(text("""
+                bind_params['start_ts'] = int(datetime(year, month, day, 0, 0, 0).timestamp())
+                bind_params['end_ts'] = int(datetime(year, month, day, 23, 59, 59).timestamp())
+                stmt_text = f"""
                     SELECT
-                        date(datetime(updated_ts, 'unixepoch')) as day,
-                        COUNT(updated_ts) as count
-                    FROM ctx_meta
-                    WHERE updated_ts BETWEEN :start_ts AND :end_ts
+                        date(datetime(m.updated_ts, 'unixepoch')) as day,
+                        COUNT(m.updated_ts) as count
+                    FROM ctx_meta m
+                    {join_statement}
+                    WHERE (m.updated_ts BETWEEN :start_ts AND :end_ts) {where_statement}
                     GROUP BY day
-                """), {'start_ts': int(datetime(year, month, day, 0, 0, 0).timestamp()),
-                       'end_ts': int(datetime(year, month, day, 23, 59, 59).timestamp())})
+                """
+                stmt = text(stmt_text).bindparams(**bind_params)
+                result = conn.execute(stmt)
                 return {row._mapping['day']: row._mapping['count'] for row in result}
 
-            # in month
+            # by month
             elif year and month:
                 start_timestamp, end_timestamp = get_month_start_end_timestamps(year, month)
-                result = conn.execute(text("""
+                bind_params['start_ts'] = start_timestamp
+                bind_params['end_ts'] = end_timestamp
+                stmt_text = f"""
                     SELECT
-                        date(datetime(updated_ts, 'unixepoch')) as day,
-                        COUNT(updated_ts) as count
-                    FROM ctx_meta
-                    WHERE updated_ts BETWEEN :start_ts AND :end_ts
+                        date(datetime(m.updated_ts, 'unixepoch')) as day,
+                        COUNT(m.updated_ts) as count
+                    FROM ctx_meta m
+                    {join_statement}
+                    WHERE (m.updated_ts BETWEEN :start_ts AND :end_ts) {where_statement}
                     GROUP BY day
-                """), {'start_ts': start_timestamp,
-                       'end_ts': end_timestamp})
+                """
+                stmt = text(stmt_text).bindparams(**bind_params)
+                result = conn.execute(stmt)
                 return {row._mapping['day']: row._mapping['count'] for row in result}
 
-            # in year (returns months, not days)
+            # by year (return months, not days)
             elif year:
                 start_timestamp, end_timestamp = get_year_start_end_timestamps(year)
-                result = conn.execute(text("""
+                bind_params['start_ts'] = start_timestamp
+                bind_params['end_ts'] = end_timestamp
+                stmt_text = f"""
                     SELECT
-                        strftime('%m', datetime(updated_ts, 'unixepoch')) as month,
-                        COUNT(updated_ts) as count
-                    FROM ctx_meta
-                    WHERE updated_ts BETWEEN :start_ts AND :end_ts
+                        strftime('%m', datetime(m.updated_ts, 'unixepoch')) as month,
+                        COUNT(m.updated_ts) as count
+                    FROM ctx_meta m
+                    {join_statement}
+                    WHERE (m.updated_ts BETWEEN :start_ts AND :end_ts) {where_statement}
                     GROUP BY month
-                """), {'start_ts': start_timestamp,
-                       'end_ts': end_timestamp})
+                """
+                stmt = text(stmt_text).bindparams(**bind_params)
+                result = conn.execute(stmt)
+                return {row._mapping['month']: row._mapping['count'] for row in result}
+
+    def get_groups(self) -> dict:
+        """
+        Return dict with CtxGroup objects, indexed by ID
 
-            return {row._mapping['month']: row._mapping['count'] for row in result}
+        :return: dict of CtxGroup
+        """
+        stmt_text = f"""
+            SELECT * FROM ctx_group g ORDER BY g.name ASC
+        """
+        stmt = text(stmt_text)
+
+        items = {}
+        db = self.window.core.db.get_db()
+        with db.connect() as conn:
+            result = conn.execute(stmt)
+            for row in result:
+                group = CtxGroup()
+                unpack_group(group, row._asdict())
+                items[group.id] = group
+
+        return items
+
+    def delete_group(self, id: int, all: bool = False) -> bool:
+        """
+        Delete ctx group by ID
+
+        :param id: ctx group ID
+        :param all: remove items
+        :return: True if deleted
+        """
+        stmt = text("""
+            DELETE FROM ctx_group WHERE id = :id
+        """).bindparams(
+            id=id,
+        )
+        db = self.window.core.db.get_db()
+        with db.begin() as conn:
+            conn.execute(stmt)
+
+        # remove items in group
+        if all:
+            stmt = text("""
+                DELETE FROM ctx_meta WHERE group_id = :id
+            """).bindparams(
+                id=id,
+            )
+            with db.begin() as conn:
+                conn.execute(stmt)
+        else:
+            # set group_id to NULL (remove group association)
+            stmt = text("""
+                UPDATE ctx_meta 
+                SET group_id = NULL
+                WHERE group_id = :group_id
+            """).bindparams(
+                group_id=id,
+            )
+            with db.begin() as conn:
+                conn.execute(stmt)
+        return True
+
+    def truncate_groups(self) -> bool:
+        """
+        Remove all groups
+
+        :return: True if truncated
+        """
+        db = self.window.core.db.get_db()
+        with db.begin() as conn:
+            conn.execute(text("DELETE FROM ctx_group"))
+            conn.execute(text("DELETE FROM sqlite_sequence WHERE name='ctx_group'"))
+        return True
+
+    def update_group(self, group: CtxGroup) -> bool:
+        """
+        Update group
+
+        :param group: CtxGroup
+        :return: True if updated
+        """
+        id = group.id
+        db = self.window.core.db.get_db()
+        stmt = text("""
+            UPDATE ctx_group
+            SET
+                name = :name,
+                updated_ts = :updated_ts
+            WHERE id = :id
+        """).bindparams(
+            id=id,
+            name=group.name,
+            updated_ts=int(group.updated),
+        )
+        with db.begin() as conn:
+            conn.execute(stmt)
+            return True
+
+    def insert_group(self, group: CtxGroup) -> int:
+        """
+        Insert ctx group
+
+        :param group: CtxGroup
+        :return: inserted record ID
+        """
+        db = self.window.core.db.get_db()
+        stmt = text("""
+            INSERT INTO ctx_group 
+            (
+                uuid,
+                created_ts,
+                updated_ts,
+                name
+            )
+            VALUES 
+            (
+                :uuid,
+                :created_ts,
+                :updated_ts,
+                :name
+            )
+        """).bindparams(
+            uuid=group.uuid,
+            created_ts=int(group.created or 0),
+            updated_ts=int(group.updated or 0),
+            name=group.name,
+        )
+        with db.begin() as conn:
+            result = conn.execute(stmt)
+            group.id = result.lastrowid
+            return group.id
+
+    def update_meta_group_id(self, meta_id: int, group_id: int = None):
+        """
+        Update meta group ID
+
+        :param meta_id: ctx meta ID
+        :param group_id: ctx group ID
+        """
+        db = self.window.core.db.get_db()
+        stmt = text("""
+            UPDATE ctx_meta 
+            SET
+                group_id = :group_id
+            WHERE id = :id
+        """).bindparams(
+            id=meta_id,
+            group_id=group_id,
+        )
+        with db.begin() as conn:
+            conn.execute(stmt)
+            return True
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/core/ctx/db_sqlite/utils.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/core/ctx/db_sqlite/utils.py`

 * *Files 11% similar despite different names*

```diff
@@ -2,22 +2,23 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.03.03 22:00:00                  #
+# Updated Date: 2024.04.08 21:00:00                  #
 # ================================================== #
 
 import json
 import re
 from datetime import datetime, timedelta, timezone
 
-from pygpt_net.item.ctx import CtxMeta, CtxItem
+from pygpt_net.item.ctx import CtxMeta, CtxItem, CtxGroup
+from pygpt_net.utils import unpack_var
 
 
 def search_by_date_string(search_string: str) -> list:
     """
     Prepare date ranges from search string if @date() syntax is used
 
     :param search_string: search string
@@ -126,68 +127,85 @@
     """
     Unpack context item from DB row
 
     :param item: Context item (CtxItem)
     :param row: DB row
     :return: context item
     """
-    item.id = int(row['id'])
-    item.meta_id = int(row['meta_id'])
+    item.id = unpack_var(row['id'], 'int')
+    item.meta_id = unpack_var(row['meta_id'], 'int')
     item.external_id = row['external_id']
     item.input = row['input']
     item.output = row['output']
     item.input_name = row['input_name']
     item.output_name = row['output_name']
-    item.input_timestamp = int(row['input_ts'] or 0)
-    item.output_timestamp = int(row['output_ts'] or 0)
+    item.input_timestamp = unpack_var(row['input_ts'], 'int')
+    item.output_timestamp = unpack_var(row['output_ts'], 'int')
     item.mode = row['mode']
     item.model = row['model']
     item.thread = row['thread_id']
     item.msg_id = row['msg_id']
     item.run_id = row['run_id']
     item.cmds = unpack_item_value(row['cmds_json'])
     item.results = unpack_item_value(row['results_json'])
     item.urls = unpack_item_value(row['urls_json'])
     item.images = unpack_item_value(row['images_json'])
     item.files = unpack_item_value(row['files_json'])
     item.attachments = unpack_item_value(row['attachments_json'])
     item.extra = unpack_item_value(row['extra'])
-    item.input_tokens = int(row['input_tokens'] or 0)
-    item.output_tokens = int(row['output_tokens'] or 0)
-    item.total_tokens = int(row['total_tokens'] or 0)
-    item.internal = bool(row['is_internal'])
+    item.input_tokens = unpack_var(row['input_tokens'], 'int')
+    item.output_tokens = unpack_var(row['output_tokens'], 'int')
+    item.total_tokens = unpack_var(row['total_tokens'], 'int')
+    item.internal = unpack_var(row['is_internal'], 'bool')
     item.doc_ids = unpack_item_value(row['docs_json'])
     return item
 
 
 def unpack_meta(meta: CtxMeta, row: dict) -> CtxMeta:
     """
     Unpack context meta data from DB row
 
     :param meta: Context meta (CtxMeta)
     :param row: DB row
     :return: context meta
     """
-    meta.id = int(row['id'])
+    meta.id = unpack_var(row['id'], 'int')
     meta.external_id = row['external_id']
     meta.uuid = row['uuid']
-    meta.created = int(row['created_ts'])
-    meta.updated = int(row['updated_ts'])
-    meta.indexed = int(row['indexed_ts'])
+    meta.created = unpack_var(row['created_ts'], 'int')
+    meta.updated = unpack_var(row['updated_ts'], 'int')
+    meta.indexed = unpack_var(row['indexed_ts'], 'int')
     meta.name = row['name']
     meta.mode = row['mode']
     meta.model = row['model']
     meta.last_mode = row['last_mode']
     meta.last_model = row['last_model']
     meta.thread = row['thread_id']
     meta.assistant = row['assistant_id']
     meta.preset = row['preset_id']
     meta.run = row['run_id']
     meta.status = row['status']
     meta.extra = row['extra']
-    meta.initialized = bool(row['is_initialized'])
-    meta.deleted = bool(row['is_deleted'])
-    meta.important = bool(row['is_important'])
-    meta.archived = bool(row['is_archived'])
-    meta.label = int(row['label'] or 0)
+    meta.initialized = unpack_var(row['is_initialized'], 'bool')
+    meta.deleted = unpack_var(row['is_deleted'], 'bool')
+    meta.important = unpack_var(row['is_important'], 'bool')
+    meta.archived = unpack_var(row['is_archived'], 'bool')
+    meta.label = unpack_var(row['label'], 'int')
     meta.indexes = unpack_item_value(row['indexes_json'])
+    meta.group_id = unpack_var(row['group_id'], 'int')
     return meta
+
+
+def unpack_group(group: CtxGroup, row: dict) -> CtxGroup:
+    """
+    Unpack context group data from DB row
+
+    :param group: Context group (CtxGroup)
+    :param row: DB row
+    :return: context meta
+    """
+    group.id = unpack_var(row['id'], 'int')
+    group.uuid = row['uuid']
+    group.created = unpack_var(row['created_ts'], 'int')
+    group.updated = unpack_var(row['updated_ts'], 'int')
+    group.name = row['name']
+    return group
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/core/ctx/json_file.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/widget/option/dictionary.py`

 * *Files 27% similar despite different names*

```diff
@@ -2,367 +2,399 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2023.12.31 04:00:00                  #
+# Updated Date: 2024.03.11 01:00:00                  #
 # ================================================== #
 
-import datetime
-import json
-import os
+from PySide6.QtCore import Qt, QAbstractItemModel, QModelIndex, QSize
+from PySide6.QtGui import QAction, QIcon
+from PySide6.QtWidgets import QWidget, QVBoxLayout, QPushButton, QTreeView, QMenu, QStyledItemDelegate, QComboBox, \
+    QCheckBox, QSizePolicy
 
-from packaging.version import Version
+from pygpt_net.utils import trans
+import pygpt_net.icons_rc
 
-from pygpt_net.provider.core.ctx.base import BaseProvider
-from pygpt_net.item.ctx import CtxItem, CtxMeta
 
+class OptionDict(QWidget):
+    def __init__(self, window=None, parent_id: str = None, id: str = None, option: dict = None):
+        """
+        Settings dictionary items
 
-class JsonFileProvider(BaseProvider):
-    def __init__(self, window=None):
-        super(JsonFileProvider, self).__init__(window)
+        :param window: main window
+        :param id: option id
+        :param parent_id: parent option id
+        :param option: option data
+        """
+        super(OptionDict, self).__init__(window)
         self.window = window
-        self.id = "json_file"
-        self.type = "ctx"
+        self.id = id
+        self.parent_id = parent_id
+        self.option = option
+        self.title = ""
+        self.real_time = False
+        self.keys = {}
+        self.items = []
+
+        # init from option data
+        if self.option is not None:
+            if "label" in self.option:
+                self.title = self.option["label"]
+            if "value" in self.option:
+                self.items = self.option["value"]
+            if "keys" in self.option:
+                self.keys = self.option["keys"]
+            if "items" in self.option:
+                self.items = list(self.option["items"])
+            if "real_time" in self.option:
+                self.real_time = self.option["real_time"]
+
+        # setup dict model
+        headers = list(self.keys.keys())
+
+        self.list = OptionDictItems(self)
+        max_height_delegate = MaxHeightDelegate(40, self.list)
+        self.list.setItemDelegate(max_height_delegate)
+        self.model = OptionDictModel(self.items, headers)
+        self.model.dataChanged.connect(self.model.saveData)
+
+        # append dict model
+        self.list.setModel(self.model)
+
+        # add button
+        self.add_btn = QPushButton(trans('action.add'), self)
+        self.add_btn.setCursor(Qt.PointingHandCursor)
+        self.add_btn.clicked.connect(self.add)
+        self.add_btn.setAutoDefault(False)
+
+        # layout
+        self.layout = QVBoxLayout()
+        self.layout.setContentsMargins(0, 0, 0, 0)
+        self.layout.addWidget(self.add_btn)
+        self.layout.addWidget(self.list)
+        self.setLayout(self.layout)
+
+        # update model list
+        self.update()
+
+    def add(self):
+        """Add new empty item to settings dict"""
+        # create empty dict
+        empty = {header: '' for header in self.model.headers}
+        count = self.model.rowCount()
+
+        # add new item
+        self.model.items.append(empty)
+        self.model.updateData(self.model.items)
+
+        # mark new item
+        new_index = self.model.index(count, 0)
+        self.list.setCurrentIndex(new_index)
+        self.list.scrollTo(new_index)
+
+    def edit_item(self, event):
+        """
+        Open item editor dialog
+
+        :param event: Menu event
+        """
+        index = self.list.indexAt(event.pos())
+        if index.isValid():
+            idx = index.row()
+            data = self.model.items[idx]
+            id = self.parent_id + "." + self.id  # dictionary id
+            self.window.ui.dialogs.open_dictionary_editor(id, self.option, data, idx)
+
+    def update_item(self, idx, data):
+        """
+        Update item data in model by idx
+
+        :param idx: Index of item
+        :param data: Item data dict (key: value)
+        """
+        self.model.items[idx] = data
+        self.model.updateData(self.model.items)
+
+    def delete_item(self, event):
+        """
+        Delete item (show confirm)
+
+        :param event: Menu event
+        """
+        index = self.list.indexAt(event.pos())
+        if index.isValid():
+            idx = index.row()
+            self.window.controller.config.dictionary.delete_item(self, idx)
+
+    def delete_item_execute(self, idx):
+        """
+        Delete item (execute)
+
+        :param idx: Index of item
+        """
+        if len(self.model.items) > idx:
+            self.model.items.pop(idx)
+        self.model.removeRows(idx, 1)
+
+        # update model list
+        self.update()
+        self.list.updateGeometries()
+        self.items = self.model.items
+        self.model.updateData(self.items)
+
+    def remove(self):
+        """
+        Remove all items
+        """
+        self.model.removeRows(0, self.model.rowCount())
+
+    def update(self):
+        """
+        Updates list of items
+        """
+        self.model.removeRows(0, self.model.rowCount())
+        i = 0
+        for item in list(self.items):
+            self.model.insertRow(i)
+            j = 0
+            for k in self.keys:
+                if k in item:
+                    # add item to model list
+                    self.model.setData(self.model.index(i, j), item[k])
+                j += 1
+            i += 1
+
+
+class OptionDictItems(QTreeView):
+    NAME = range(1)  # list of columns
+
+    def __init__(self, owner=None):
+        """
+        Select menu
+
+        :param window: main window
+        :param id: input id
+        """
+        super(OptionDictItems, self).__init__(owner)
+        self.parent = owner
+        self.setIndentation(0)
+        self.setHeaderHidden(False)
+
+        # setup fields
+        keys = self.parent.keys
+        idx = 0
+        for key in keys:
+            item = keys[key]
+            if type(item) is dict:
+                if "type" in item:
+                    if item["type"] == "combo":
+                        handler = ComboBoxDelegate(self, item["keys"])
+                        self.setItemDelegateForColumn(idx, handler)
+            elif type(item) is str:
+                if item == "bool":
+                    handler = CheckBoxDelegate(self)
+                    self.setItemDelegateForColumn(idx, handler)
+                elif item == "hidden":
+                    continue
+            idx += 1
+
+    def contextMenuEvent(self, event):
+        """
+        Context menu event
+
+        :param event: context menu event
+        """
+        actions = {}
+        actions['edit'] = QAction(QIcon(":/icons/edit.svg"), trans('action.edit'), self)
+        actions['edit'].triggered.connect(
+            lambda: self.parent.edit_item(event))
+        actions['delete'] = QAction(QIcon(":/icons/delete.svg"), trans('action.delete'), self)
+        actions['delete'].triggered.connect(
+            lambda: self.parent.delete_item(event))
+        menu = QMenu(self)
+        menu.addAction(actions['edit'])
+        menu.addAction(actions['delete'])
+
+        # get index of item
+        item = self.indexAt(event.pos())
+        idx = item.row()
+        if idx >= 0:
+            menu.exec_(event.globalPos())
+
+
+class OptionDictModel(QAbstractItemModel):
+    def __init__(self, items, headers, parent=None):
+        super(OptionDictModel, self).__init__(parent)
+        self.items = items
+        self.headers = headers
+        self.checkbox_key = 'enabled'
+
+    def headerData(self, section, orientation, role):
+        """
+        Header data
+        :param section: Section
+        :param orientation: Orientation
+        :param role: Role
+        :return: Header data
+        """
+        if orientation == Qt.Horizontal and role == Qt.DisplayRole:
+            return self.headers[section]
+        return None
+
+    def rowCount(self, parent=QModelIndex()):
+        """
+        Row count
+        :param parent: Parent
+        :return: Row count
+        """
+        return len(self.items) if not parent.isValid() else 0
+
+    def columnCount(self, parent=QModelIndex()):
+        """
+        Column count
+        :param parent: Parent
+        :return: Column count
+        """
+        return len(self.headers) if not parent.isValid() else 0
+
+    def data(self, index, role=Qt.DisplayRole):
+        """
+        Data
+        :param index: Index
+        :param role: Role
+        :return: Data
+        """
+        if not index.isValid():
+            return None
+        if role == Qt.CheckStateRole and index.column() == 0 and self.headers[index.column()] == "enabled":
+            value = self.items[index.row()].get('enabled', False)
+            return Qt.Checked if value else Qt.Unchecked
+        if role == Qt.EditRole and index.column() == 0 and self.headers[index.column()] == "enabled":
+            return self.items[index.row()].get('enabled', False)
+        if role == Qt.DisplayRole or role == Qt.EditRole:
+            entry = self.items[index.row()]
+            key = self.headers[index.column()]
+            return entry.get(key, "")
+        return None
+
+    def setData(self, index, value, role=Qt.EditRole):
+        """
+        Set data
+        :param index: Index
+        :param value: Value
+        :param role: Role
+        :return: Set data
+        """
+        if index.isValid() and role == Qt.CheckStateRole and self.headers[index.column()] == "enabled":
+            self.items[index.row()]['enabled'] = (value == Qt.Checked)
+            self.dataChanged.emit(index, index, [Qt.CheckStateRole])
+            return True
+
+        if index.isValid() and role == Qt.EditRole:
+            entry = self.items[index.row()]
+            key = self.headers[index.column()]
+            entry[key] = value
+            self.dataChanged.emit(index, index, [Qt.EditRole])
+            return True
+        return False
 
-    def install(self):
+    def flags(self, index):
         """
-        Install provider data
+        Flags
+        :param index: Index
+        :return: Flags
         """
-        context_dir = os.path.join(self.window.core.config.path, 'context')
-        if not os.path.exists(context_dir):
-            os.mkdir(context_dir)
-
-    def create_id(self) -> str:
-        """
-        Create unique ctx ID, in JSON file this is a timestamp with microseconds
-
-        Format: YYYYMMDDHHMMSS.MICROSECONDS.json
-
-        :return: generated ID
-        """
-        return datetime.datetime.now().strftime("%Y%m%d%H%M%S.%f")
-
-    def create(self, meta: CtxMeta) -> str:
-        """
-        Create new ctx and return its ID
-
-        :param meta: CtxMeta object
-        :return: ctx ID
-        """
-        if meta.id is None or meta.id == "":
-            meta.id = self.create_id()
-        return meta.id
-
-    def get_meta(self, search_string: str = None, order_by: str = None, order_direction: str = None,
-                 limit: int = None, offset: int = None) -> dict:
-        """
-        Load ctx metadata from file
-
-        :param search_string: search string
-        :param order_by: order by field
-        :param order_direction: order direction
-        :param limit: limit
-        :param offset: offset
-        :return: ctx metadata
-        """
-        contexts = {}
-        path = os.path.join(self.window.core.config.path, 'context.json')
-        try:
-            if os.path.exists(path):
-                with open(path, 'r', encoding="utf-8") as file:
-                    data = json.load(file)
-                    if data == "" or data is None or 'items' not in data:
-                        return contexts
-                    contexts = self.parse_meta(data['items'])
-        except Exception as e:
-            self.window.core.debug.log(e)
-            contexts = {}
-
-        return contexts
-
-    def load(self, id: str) -> list:
-        """
-        Load ctx data from json file
-
-        :param id: context id
-        :return: context items (list of CtxItem)
-        """
-        data = []
-        path = os.path.join(self.window.core.config.path, 'context', id + '.json')
-        if os.path.exists(path):
-            try:
-                with open(path, 'r', encoding="utf-8") as file:
-                    data = self.parse_data(json.load(file))
-                    if data == "" or data is None:
-                        return []
-            except Exception as e:
-                self.window.core.debug.log(e)
-                print("Error while loading context: {}".format(id))
-                data = []
-        return data
-
-    def append(self, meta: CtxMeta, item: CtxItem) -> bool:
-        """
-        Append item to ctx
-
-        :param meta: ctx meta (CtxMeta)
-        :param item: ctx item (CtxItem)
-        """
-        return False  # handled after in save() method
-
-    def save(self, id: str, meta: CtxMeta, items: list):
-        """
-        Dump ctx to json file
-
-        :param id: ctx id
-        :param meta: ctx meta (CtxMeta)
-        :param items: ctx items (list of CtxItem)
-        """
-        try:
-            # update current ctx items
-            items_path = os.path.join(self.window.core.config.path, 'context', id + '.json')
-            serialized_items = []
-            for item in items:
-                serialized_items.append(self.serialize_item(item))
-            dump = json.dumps(serialized_items, indent=4)
-
-            # save items
-            with open(items_path, 'w', encoding="utf-8") as f:
-                f.write(dump)
-
-            # update ctx meta (index)
-            index_path = os.path.join(self.window.core.config.path, 'context.json')
-            metas = self.get_meta()
-            metas[id] = meta
-            data = {}
-            serialized_meta = {}
-            for n in metas:
-                serialized_meta[n] = self.serialize_meta(metas[n])
-
-            data['items'] = serialized_meta
-            data['__meta__'] = self.window.core.config.append_meta()
-            dump = json.dumps(data, indent=4)
-
-            # save index
-            with open(index_path, 'w', encoding="utf-8") as f:
-                f.write(dump)
-
-        except Exception as e:
-            self.window.core.debug.log(e)
-            print("Error while dumping context: {}".format(id))
-
-    def remove(self, id: str):
-        """
-        Delete ctx by id
-
-        :param id: ctx id
-        """
-        # delete ctx meta (index)
-        index_path = os.path.join(self.window.core.config.path, 'context.json')
-        metas = self.get_meta()
-        if id in metas:
-            del metas[id]
-        data = {}
-        serialized_meta = {}
-        for n in metas:
-            serialized_meta[n] = self.serialize_meta(metas[n])
-        data['items'] = serialized_meta
-        data['__meta__'] = self.window.core.config.append_meta()
-        dump = json.dumps(data, indent=4)
-
-        # save index
-        with open(index_path, 'w', encoding="utf-8") as f:
-            f.write(dump)
-
-        # delete items
-        path = os.path.join(self.window.core.config.path, 'context', id + '.json')
-        if os.path.exists(path):
-            try:
-                os.remove(path)
-            except Exception as e:
-                self.window.core.debug.log(e)
-
-    def truncate(self):
-        """Delete all ctx"""
-        # delete all ctx files
-        contexts = self.get_meta()
-        for id in contexts:
-            path = os.path.join(self.window.core.config.path, 'context', id + '.json')
-            if os.path.exists(path):
-                try:
-                    os.remove(path)
-                except Exception as e:
-                    self.window.core.debug.log(e)
-
-        # truncate ctx index
-        index_path = os.path.join(self.window.core.config.path, 'context.json')
-        data = {}
-        data['items'] = {}
-        data['__meta__'] = self.window.core.config.append_meta()
-        try:
-            dump = json.dumps(data, indent=4)
-            with open(index_path, 'w', encoding="utf-8") as f:
-                f.write(dump)
-        except Exception as e:
-            self.window.core.debug.log(e)
+        if not index.isValid():
+            return Qt.NoItemFlags
+        if index.column() == 0 and self.headers[index.column()] == "enabled":
+            return super(OptionDictModel, self).flags(index) | Qt.ItemIsUserCheckable | Qt.ItemIsEditable
+        return super(OptionDictModel, self).flags(index) | Qt.ItemIsEditable
 
-    def patch(self, version: Version) -> bool:
+    def parent(self, index):
         """
-        Migrate ctx to current app version
+        Parent
+        :param index: Index
+        :return: Parent
+        """
+        return QModelIndex()
 
-        :param version: current app version
-        :return: True if migrated
+    def index(self, row, column, parent=QModelIndex()):
         """
-        return False
+        Index
+        :param row: Row
+        :param column: Column
+        :param parent: Parent
+        :return: Index
+        """
+        if parent.isValid() or row >= len(self.items) or column >= len(self.headers):
+            return QModelIndex()
+        return self.createIndex(row, column)
 
-    @staticmethod
-    def serialize_meta(meta: CtxMeta) -> dict:
+    def saveData(self):
         """
-        Serialize CtxMeta to dict
+        Save data
+        """
+        pass
 
-        :param meta: CtxMeta
-        :return: serialized CtxMeta dict
+    def updateData(self, data):
+        """
+        Update data
+        :param new_data_list: New data list
         """
-        return {
-            'id': meta.id,
-            'name': meta.name,
-            'date': meta.date,
-            'mode': meta.mode,
-            'last_mode': meta.last_mode,
-            'thread': meta.thread,
-            'assistant': meta.assistant,
-            'preset': meta.preset,
-            'run': meta.run,
-            'status': meta.status,
-            'initialized': meta.initialized,
-        }
-
-    @staticmethod
-    def deserialize_meta(data: dict, meta: CtxMeta):
-        """
-        Deserialize CtxMeta from dict
-
-        :param data: dict
-        :param meta: CtxMeta
-        """
-        if 'id' in data:
-            meta.id = data['id']
-        if 'name' in data:
-            meta.name = data['name']
-        if 'date' in data:
-            meta.date = data['date']
-        if 'mode' in data:
-            meta.mode = data['mode']
-        if 'last_mode' in data:
-            meta.last_mode = data['last_mode']
-        if 'thread' in data:
-            meta.thread = data['thread']
-        if 'assistant' in data:
-            meta.assistant = data['assistant']
-        if 'preset' in data:
-            meta.preset = data['preset']
-        if 'run' in data:
-            meta.run = data['run']
-        if 'status' in data:
-            meta.status = data['status']
-        if 'initialized' in data:
-            meta.initialized = data['initialized']
-        return meta
-
-    @staticmethod
-    def serialize_item(ctx: CtxItem) -> dict:
-        """
-        Serialize CtxItem to dict
-
-        :param ctx: CtxItem
-        :return: serialized item dict
-        """
-        return {
-            'input': ctx.input,
-            'output': ctx.output,
-            'mode': ctx.mode,
-            'thread': ctx.thread,
-            'msg_id': ctx.msg_id,
-            'run_id': ctx.run_id,
-            'input_name': ctx.input_name,
-            'output_name': ctx.output_name,
-            'input_tokens': ctx.input_tokens,
-            'output_tokens': ctx.output_tokens,
-            'total_tokens': ctx.total_tokens,
-            'input_timestamp': ctx.input_timestamp,
-            'output_timestamp': ctx.output_timestamp
-        }
-
-    @staticmethod
-    def deserialize_item(data: dict, ctx: CtxItem):
-        """
-        Deserialize CtxItem from dict
-
-        :param data: data dict
-        :param ctx: CtxItem
-        """
-        if 'input' in data:
-            ctx.input = data['input']
-        if 'output' in data:
-            ctx.output = data['output']
-        if 'mode' in data:
-            ctx.mode = data['mode']
-        if 'thread' in data:
-            ctx.thread = data['thread']
-        if 'msg_id' in data:
-            ctx.msg_id = data['msg_id']
-        if 'run_id' in data:
-            ctx.run_id = data['run_id']
-        if 'input_name' in data:
-            ctx.input_name = data['input_name']
-        if 'output_name' in data:
-            ctx.output_name = data['output_name']
-        if 'input_tokens' in data:
-            ctx.input_tokens = data['input_tokens']
-        if 'output_tokens' in data:
-            ctx.output_tokens = data['output_tokens']
-        if 'total_tokens' in data:
-            ctx.total_tokens = data['total_tokens']
-        if 'input_timestamp' in data:
-            ctx.input_timestamp = data['input_timestamp']
-        if 'output_timestamp' in data:
-            ctx.output_timestamp = data['output_timestamp']
-
-    def dump(self, ctx: CtxItem) -> str:
-        """
-        Dump ctx to string
-
-        :param ctx: CtxItem
-        :return: dumped item as string (json)
-        """
-        return json.dumps(self.serialize_item(ctx))
-
-    def parse_data(self, data: list) -> list:
-        """
-        Parse ctx data from json to objects
-
-        :param data: ctx items data
-        :return: ctx items (deserialized) as objects list
-        """
-        items = []
-        for item in data:
-            ctx = CtxItem()
-            self.deserialize_item(item, ctx)
-            items.append(ctx)
-        return items
-
-    def parse_meta(self, data: dict) -> dict:
-        """
-        Parse ctx data from json to objects
-
-        :param data: ctx items data
-        :return: ctx items (deserialized) dict
-        """
-        items = {}
-        for k in data:
-            meta = CtxMeta()
-            self.deserialize_meta(data[k], meta)
-            items[meta.id] = meta
-        return items
+        self.beginResetModel()
+        self.items = data
+        self.endResetModel()
+
+
+class CheckBoxDelegate(QStyledItemDelegate):
+    def createEditor(self, parent, option, index):
+        editor = QCheckBox(parent)
+        return editor
+
+    def setEditorData(self, editor, index):
+        checked = index.model().data(index, Qt.EditRole)
+        if type(checked) is str:
+            checked = checked == 'true'
+        editor.setChecked(checked)
+
+    def setModelData(self, editor, model, index):
+        model.setData(index, editor.isChecked(), Qt.EditRole)
+
+    def updateEditorGeometry(self, editor, option, index):
+        editor.setGeometry(option.rect)
+
+
+class ComboBoxDelegate(QStyledItemDelegate):
+    def __init__(self, parent=None, keys=None):
+        super(ComboBoxDelegate, self).__init__(parent)
+        self.keys = keys
+
+    def createEditor(self, parent, option, index):
+        editor = QComboBox(parent)
+        for item in self.keys:
+            if type(item) is dict:
+                for key, value in item.items():
+                    editor.addItem(value, key)
+            else:
+                editor.addItem(item)
+        return editor
+
+    def setEditorData(self, editor, index):
+        value = index.model().data(index, Qt.EditRole)
+        editor.setCurrentText(value)
+
+    def setModelData(self, editor, model, index):
+        model.setData(index, editor.currentText(), Qt.EditRole)
+
+
+class MaxHeightDelegate(QStyledItemDelegate):
+    def __init__(self, max, parent=None):
+        super().__init__(parent)
+        self.maxHeight = max
+
+    def sizeHint(self, option, index):
+        original = super().sizeHint(option, index)
+        limited = min(original.height(), self.maxHeight)
+        return QSize(original.width(), limited)
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/core/history/base.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/core/history/base.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/core/history/patch.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/core/history/patch.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/core/history/txt_file.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/core/history/txt_file.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/core/index/base.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/core/index/base.py`

 * *Files 2% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.23 06:00:00                  #
+# Updated Date: 2024.03.06 02:00:00                  #
 # ================================================== #
 
 from packaging.version import Version
 
 from pygpt_net.item.index import IndexItem
 
 
@@ -88,12 +88,15 @@
 
     def truncate_ctx(self, store_id: str = None, idx: str = None) -> bool:
         pass
 
     def truncate_external(self, store_id: str = None, idx: str = None) -> bool:
         pass
 
+    def get_counters(self, type: str) -> dict:
+        pass
+
     def dump(self, index: IndexItem) -> str:
         pass
 
     def get_version(self) -> str:
         pass
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/core/index/db_sqlite/__init__.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/core/index/db_sqlite/__init__.py`

 * *Files 2% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.23 06:00:00                  #
+# Updated Date: 2024.03.06 02:00:00                  #
 # ================================================== #
 
 from packaging.version import Version
 
 from pygpt_net.provider.core.index.base import BaseProvider
 from .patch import Patch
 from .storage import Storage
@@ -258,7 +258,16 @@
         Truncate external idx (remove all items) - all store and indexes
 
         :param store_id: store ID
         :param idx: index
         :return: True if truncated
         """
         return self.storage.truncate_external(store_id, idx)
+
+    def get_counters(self, type: str) -> dict:
+        """
+        Get counters (stats, count items by type [file, ctx, external])
+
+        :param type: type of counter (file, ctx, external)
+        :return: dict of counters
+        """
+        return self.storage.get_counters(type)
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/core/index/db_sqlite/patch.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/core/index/db_sqlite/patch.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/core/index/db_sqlite/storage.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/core/index/db_sqlite/storage.py`

 * *Files 4% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.23 06:00:00                  #
+# Updated Date: 2024.03.06 02:00:00                  #
 # ================================================== #
 
 import uuid
 import time
 
 from sqlalchemy import text
 
@@ -569,7 +569,37 @@
         elif idx:
             query += " WHERE idx = :idx"
             params = {"idx": idx}
         with db.begin() as conn:
             conn.execute(
                 text(query).bindparams(**params))
         return True
+
+    def get_counters(self, type: str) -> dict:
+        """
+        Get counters (stats, count items by type [file, ctx, external])
+
+        :param type: type of counter (file, ctx, external)
+        :return: dict of counters
+        """
+        db_name = "idx_" + type
+        db = self.window.core.db.get_db()
+        counters = {}
+
+        # count items, grouped by store and idx fields
+        stmt = text("""
+            SELECT store, idx, COUNT(*) as count
+            FROM """ + db_name + """
+            GROUP BY store, idx
+        """)
+        with db.connect() as conn:
+            result = conn.execute(stmt)
+            for row in result:
+                data = row._asdict()
+                store = data['store']
+                idx = data['idx']
+                count = data['count']
+                if store not in counters:
+                    counters[store] = {}
+                counters[store][idx] = count
+        return counters
+
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/core/index/db_sqlite/utils.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/core/index/db_sqlite/utils.py`

 * *Files 21% similar despite different names*

```diff
@@ -2,25 +2,28 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.23 01:00:00                  #
+# Updated Date: 2024.03.06 02:00:00                  #
 # ================================================== #
 
+from pygpt_net.utils import unpack_var
+
+
 def unpack_file_item(row: dict) -> (str, dict):
     """
     Unpack item from DB row
 
     :param row: DB row
     :return: idx, file data
     """
     data = {}
     idx = row['idx']
-    data["db_id"] = int(row['id'])
+    data["db_id"] = unpack_var(row['id'], 'int')
     data["id"] = row['doc_id']
     data["name"] = row['name']
     data["path"] = row['path']
-    data["indexed_ts"] = int(row['updated_ts'] or 0)
+    data["indexed_ts"] = unpack_var(row['updated_ts'], 'int')
     return idx, data
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/core/index/json_file.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/core/index/json_file.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/core/index/patch.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/core/index/patch.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/core/mode/base.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/core/mode/base.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/core/mode/json_file.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/core/mode/json_file.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/core/mode/patch.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/core/mode/patch.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/core/model/base.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/core/model/base.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/core/model/json_file.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/core/model/json_file.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/core/model/patch.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/core/model/patch.py`

 * *Files 15% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.01.30 17:00:00                  #
+# Updated Date: 2024.04.11 22:00:00                  #
 # ================================================== #
 
 from packaging.version import parse as parse_version, Version
 
 
 class Patch:
     def __init__(self, window=None):
@@ -149,14 +149,68 @@
                 for id in data:
                     model = data[id]
                     if model.id.startswith("gpt-") and model.id not in exclude:
                         if "agent" not in model.mode:
                             model.mode.append("agent")
                 updated = True
 
+            # fix typo in gpt-4 turbo preview for llama
+            if old < parse_version("2.1.15"):
+                print("Migrating models from < 2.1.15...")
+                if "gpt-4-turbo-preview" in data:
+                    data["gpt-4-turbo-preview"].llama_index["args"] = [
+                        {
+                            "name": "model",
+                            "value": "gpt-4-turbo-preview",
+                            "type": "str",
+                        }
+                    ]
+                updated = True
+
+            # add API endpoint
+            if old < parse_version("2.1.19"):
+                print("Migrating models from < 2.1.19...")
+                for id in data:
+                    model = data[id]
+                    if model.id.startswith("gpt-"):
+                        if "env" not in model.llama_index:
+                            model.llama_index["env"] = []
+                        is_endpoint = False
+                        for arg in model.llama_index["env"]:
+                            if "OPENAI_API_BASE" in arg["name"]:
+                                is_endpoint = True
+                                break
+                        if not is_endpoint:
+                            model.llama_index["env"].append(
+                                {
+                                    "name": "OPENAI_API_BASE",
+                                    "value": "{api_endpoint}",
+                                }
+                            )
+                        if "env" not in model.langchain:
+                            model.langchain["env"] = []
+                        is_endpoint = False
+                        for arg in model.langchain["env"]:
+                            if "OPENAI_API_BASE" in arg["name"]:
+                                is_endpoint = True
+                                break
+                        if not is_endpoint:
+                            model.langchain["env"].append(
+                                {
+                                    "name": "OPENAI_API_BASE",
+                                    "value": "{api_endpoint}",
+                                }
+                            )
+                updated = True
+
+            if old < parse_version("2.1.45"):
+                print("Migrating models from < 2.1.45...")
+                # add missing 2024-04-09
+                updated = True
+
         # update file
         if updated:
             data = dict(sorted(data.items()))
             self.window.core.models.items = data
             self.window.core.models.save()
 
             # also patch any missing models
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/core/notepad/base.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/core/notepad/base.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/core/notepad/db_sqlite/__init__.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/core/notepad/db_sqlite/__init__.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/core/notepad/db_sqlite/patch.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/core/notepad/db_sqlite/patch.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/core/notepad/db_sqlite/storage.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/core/notepad/db_sqlite/storage.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/core/notepad/json_file.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/core/notepad/json_file.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/core/preset/json_file.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/core/preset/json_file.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/core/preset/patch.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/core/preset/patch.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/gpt/__init__.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/gpt/__init__.py`

 * *Files 5% similar despite different names*

```diff
@@ -38,18 +38,23 @@
 
     def get_client(self) -> OpenAI:
         """
         Return OpenAI client
 
         :return: OpenAI client
         """
-        return OpenAI(
-            api_key=self.window.core.config.get('api_key'),
-            organization=self.window.core.config.get('organization_key'),
-        )
+        args = {
+            "api_key": self.window.core.config.get('api_key'),
+            "organization": self.window.core.config.get('organization_key'),
+        }
+        if self.window.core.config.has('api_endpoint'):
+            endpoint = self.window.core.config.get('api_endpoint')
+            if endpoint:
+                args["base_url"] = endpoint
+        return OpenAI(**args)
 
     def call(self, **kwargs) -> bool:
         """
         Call OpenAI API
 
         :param kwargs: Keyword arguments
         :return: result
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/gpt/chat.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/gpt/chat.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/gpt/completion.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/gpt/completion.py`

 * *Files 5% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.01.26 18:00:00                  #
+# Updated Date: 2024.03.09 18:00:00                  #
 # ================================================== #
 
 from pygpt_net.item.ctx import CtxItem
 
 
 class Completion:
     def __init__(self, window=None):
@@ -45,14 +45,19 @@
             prompt=prompt,
             system_prompt=system_prompt,
             ai_name=ai_name,
             user_name=user_name,
             model=model,
         )
 
+        # check if max tokens not exceeded
+        available_tokens = model.ctx - self.input_tokens
+        if available_tokens < max_tokens:
+            max_tokens = available_tokens
+
         # prepare stop word if user_name is set
         stop = ""
         if user_name is not None and user_name != '':
             stop = [user_name + ':']
 
         client = self.window.core.gpt.get_client()
         # fix for deprecated OpenAI davinci models
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/gpt/image.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/gpt/image.py`

 * *Files 1% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.01.26 18:00:00                  #
+# Updated Date: 2024.03.17 13:00:00                  #
 # ================================================== #
 
 import datetime
 import os
 import requests
 from PySide6.QtCore import QObject, Signal, QRunnable, Slot
 
@@ -49,15 +49,15 @@
         worker.window = self.window
         worker.client = self.window.core.gpt.get_client()
         worker.ctx = ctx
         worker.raw = self.window.core.config.get('img_raw')
         worker.model = model.id  # model ID for generate image, e.g. "dall-e-3"
         worker.model_prompt = prompt_model  # model for generate prompt, not image!
         worker.input_prompt = prompt
-        worker.system_prompt = self.window.core.image.get_prompt()
+        worker.system_prompt = self.window.core.prompt.get('img')
         worker.num = num
         worker.inline = inline
 
         # config
         if self.window.core.config.has('img_quality'):
             worker.quality = self.window.core.config.get('img_quality')
         if self.window.core.config.has('img_resolution'):
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/gpt/summarizer.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/gpt/summarizer.py`

 * *Files 19% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.01.26 18:00:00                  #
+# Updated Date: 2024.03.17 13:00:00                  #
 # ================================================== #
 
 from pygpt_net.item.ctx import CtxItem
 
 
 class Summarizer:
     def __init__(self, window=None):
@@ -24,30 +24,20 @@
     def summary_ctx(self, ctx: CtxItem) -> str:
         """
         Summarize conversation begin
 
         :param ctx: context item (CtxItem)
         :return: response text (generated summary)
         """
-        # default values
         model = self.window.core.models.from_defaults()
-        system_prompt = "You are an expert in conversation summarization"
-        text = "Summarize topic of this conversation in one sentence. Use best keywords to describe it. " \
-               "Summary must be in the same language as the conversation and it will be used for conversation title " \
-               "so it must be EXTREMELY SHORT and concise - use maximum 5 words: \n\n"
-        text += "User: " + str(ctx.input) + "\nAI Assistant: " + str(ctx.output)
-
-        # custom values
-        if self.window.core.config.get('ctx.auto_summary.system') is not None \
-                and self.window.core.config.get('ctx.auto_summary.system') != "":
-            sys_prompt = self.window.core.config.get('ctx.auto_summary.system')
-        if self.window.core.config.get('ctx.auto_summary.prompt') is not None \
-                and self.window.core.config.get('ctx.auto_summary.prompt') != "":
-            text = self.window.core.config.get('ctx.auto_summary.prompt'). \
-                replace("{input}", str(ctx.input)).replace("{output}", str(ctx.output))
+        system_prompt = self.window.core.prompt.get('ctx.auto_summary.system')
+        text = (self.window.core.prompt.get('ctx.auto_summary.user').
+                replace("{input}", str(ctx.input)).
+                replace("{output}", str(ctx.output)))
+
         if self.window.core.config.get('ctx.auto_summary.model') is not None \
                 and self.window.core.config.get('ctx.auto_summary.model') != "":
             tmp_model = self.window.core.config.get('ctx.auto_summary.model')
             if self.window.core.models.has(tmp_model):
                 model = self.window.core.models.get(tmp_model)
 
         # quick call OpenAI API
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/gpt/vision.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/gpt/vision.py`

 * *Files 4% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.01.26 18:00:00                  #
+# Updated Date: 2024.03.12 21:00:00                  #
 # ================================================== #
 
 import base64
 import json
 import os
 import re
 
@@ -174,20 +174,30 @@
                         )
                         self.attachments[id] = attachment.path
 
         return content
 
     def extract_urls(self, text: str) -> list:
         """
-        Extract urls from text
+        Extract img urls from text
 
         :param text: text
-        :return: list of urls
+        :return: list of img urls
         """
-        return re.findall(r'(https?://\S+)', text)
+        urls = re.findall(r'(https?://\S+)', text)
+        img_urls = []
+        for url in urls:
+            if self.is_image(url):
+                img_urls.append(url)
+
+        # if single url, return it
+        if "".join(urls).strip() == text.strip():
+            return urls
+
+        return img_urls
 
     def is_image(self, path: str) -> bool:
         """
         Check if url is image
 
         :param path: url
         :return: True if image
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/gpt/worker/assistants.py` & `pygpt_net-2.2.0/src/pygpt_net/tools/media_player/__init__.py`

 * *Files 27% similar despite different names*

```diff
@@ -2,200 +2,198 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.21 01:00:00                  #
+# Updated Date: 2024.03.26 15:00:00                  #
 # ================================================== #
 
-from PySide6.QtCore import QObject, Signal, QRunnable, Slot
+import datetime
+import os.path
+import shutil
 
-from pygpt_net.item.ctx import CtxItem
+from PySide6.QtGui import QAction, QIcon
 
+from pygpt_net.tools.base import BaseTool
+from pygpt_net.tools.media_player.ui.dialogs import VideoPlayer
+from PySide6.QtWidgets import QMessageBox, QFileDialog
 
-class AssistantsWorker:
-    def __init__(self, window=None):
-        """
-        Assistants Worker (async)
+from pygpt_net.utils import trans
 
-        :param window: Window instance
-        """
-        self.window = window
 
-    @Slot(object, object)
-    def handle_error(self, ctx: CtxItem, err: any):
+class MediaPlayer(BaseTool):
+    def __init__(self, *args, **kwargs):
         """
-        Handle thread error signal
-
-        :param ctx: context item
-        :param err: error message
-        """
-        self.window.controller.assistant.threads.handle_run_error(ctx, err)
-
-    @Slot(object, object)
-    def handle_run_created(self, ctx: CtxItem, run):
-        """
-        Handle thread finished signal
-
-        :param ctx: context item
-        :param run
-        """
-        self.window.controller.assistant.threads.handle_run_created(ctx, run)
-
-    def create_run(
-            self,
-            ctx: CtxItem,
-            thread_id: str,
-            assistant_id: str,
-            system_prompt: str
-    ):
-        """
-        Create assistant run
-
-        :param ctx: context item
-        :param thread_id: thread id
-        :param assistant_id: assistant id
-        :param system_prompt: system prompt
-        """
-        worker = Worker()
-        worker.window = self.window
-        worker.mode = "run_create"
-        worker.ctx = ctx
-        worker.thread_id = thread_id
-        worker.assistant_id = assistant_id
-        worker.system_prompt = system_prompt
-        worker.signals.finished.connect(self.handle_run_created)
-        worker.signals.error.connect(self.handle_error)
-        self.window.threadpool.start(worker)
-
-    def msg_send(
-            self,
-            ctx: CtxItem,
-            thread_id: str,
-            assistant_id: str,
-            prompt: str,
-            system_prompt: str
-    ):
-        """
-        Send message to assistant thread
-
-        :param ctx: context item
-        :param thread_id: thread id
-        :param assistant_id: assistant id
-        :param prompt: prompt
-        :param system_prompt: system prompt
-        """
-        worker = Worker()
-        worker.window = self.window
-        worker.mode = "msg_send"
-        worker.ctx = ctx
-        worker.thread_id = thread_id
-        worker.assistant_id = assistant_id
-        worker.prompt = prompt
-        worker.system_prompt = system_prompt
-        worker.signals.finished.connect(self.handle_run_created)
-        worker.signals.error.connect(self.handle_error)
-        self.window.threadpool.start(worker)
-
-    def tools_submit(
-            self,
-            ctx: CtxItem,
-            tools_outputs: list,
-    ):
-        """
-        Send tools outputs to assistant thread
-
-        :param ctx: context item
-        :param tools_outputs: list of tools outputs
-        """
-        worker = Worker()
-        worker.window = self.window
-        worker.mode = "tools_submit"
-        worker.ctx = ctx
-        worker.tools_outputs = tools_outputs
-        worker.signals.finished.connect(self.handle_run_created)
-        worker.signals.error.connect(self.handle_error)
-        self.window.threadpool.start(worker)
-
-
-class WorkerSignals(QObject):
-    finished = Signal(object, object)
-    error = Signal(object, object)
+        Media player
 
-
-class Worker(QRunnable):
-    def __init__(self, *args, **kwargs):
-        super(Worker, self).__init__()
-        self.signals = WorkerSignals()
-        self.window = None
-        self.mode = None
-        self.thread_id = None
-        self.assistant_id = None
-        self.prompt = None
-        self.system_prompt = None
-        self.tools_outputs = None
-        self.ctx = None
-
-    @Slot()
-    def run(self):
-        """Assistants worker thread"""
-        if self.mode == "run_create":
-            self.run_create()
-        elif self.mode == "msg_send":
-            self.msg_send()
-        elif self.mode == "tools_submit":
-            self.tools_submit()
-
-    def run_create(self) -> bool:
-        """
-        Create assistant run
-
-        :return: result
-        """
-        try:
-            run = self.window.core.gpt.assistants.run_create(
-                self.thread_id,
-                self.assistant_id,
-                self.system_prompt,
-            )
-            if run is not None:
-                self.signals.finished.emit(self.ctx, run)
-                return True
-        except Exception as e:
-            self.signals.error.emit(self.ctx, e)
-        return False
-
-    def msg_send(self) -> bool:
-        """
-        Send message to assistant
-
-        :return: result
-        """
-        try:
-            response = self.window.core.gpt.assistants.msg_send(
-                self.thread_id,
-                self.prompt,
-            )
-            if response is not None:
-                self.ctx.msg_id = response.id
-                return self.run_create()
-        except Exception as e:
-            self.signals.error.emit(self.ctx, e)
-        return False
-
-    def tools_submit(self) -> bool:
-        """
-        Submit tools outputs to assistant
-
-        :return: result
-        """
-        try:
-            run = self.window.core.gpt.assistants.run_submit_tool(self.ctx, self.tools_outputs)
-            if run is not None:
-                self.ctx.run_id = run.id  # update run id
-                self.signals.finished.emit(self.ctx, run)  # continue status check
-                return True
-        except Exception as e:
-            self.signals.error.emit(self.ctx, e)
-        return False
+        :param window: Window instance
+        """
+        super(MediaPlayer, self).__init__(*args, **kwargs)
+        self.id = "player"
+        self.opened = False
+        self.dialog = None
+
+    def setup(self):
+        """Setup media player"""
+        if self.window.core.config.has("video.player.path"):
+            path = self.window.core.config.get("video.player.path")
+            if path:
+                path = self.window.core.filesystem.to_workdir(path)
+                if os.path.exists(path):
+                    self.window.video_player.set_path(path)
+        if self.window.core.config.has("video.player.volume"):
+            self.window.video_player.adjust_volume(self.window.core.config.get("video.player.volume"))
+        if self.window.core.config.has("video.player.volume.mute"):
+            self.window.video_player.set_muted(self.window.core.config.get("video.player.volume.mute"))
+        self.window.video_player.update()  # update player volume, slider, etc.
+
+    def update(self):
+        """Update menu"""
+        self.update_menu()
+
+    def update_menu(self):
+        """Update menu"""
+        """
+        if self.opened:
+            self.window.ui.menu['tools.media.player'].setChecked(True)
+        else:
+            self.window.ui.menu['tools.media.player'].setChecked(False)
+        """
+
+    def store_path(self, path: str):
+        """
+        Store current video path
+
+        :param path: video file path
+        """
+        path = self.window.core.filesystem.make_local(path)
+        self.window.core.config.set("video.player.path", path)
+
+    def play(self, path: str):
+        """
+        Open and play video file
+
+        :param path: video file path
+        """
+        self.window.ui.dialogs.open('video_player', width=800, height=600)
+        self.window.video_player.force_resize()
+        self.opened = True
+        self.update()
+        self.window.video_player.open(path)
+
+    def open_file(self):
+        """Open video file"""
+        self.window.video_player.open_file()
+
+    def grab_frame(self) -> str:
+        """
+        Grab frame
+
+        :return: frame path
+        """
+        now = datetime.datetime.now()
+        dt = now.strftime("%Y-%m-%d_%H-%M-%S")
+        name = 'cap-' + dt
+        path = os.path.join(self.window.controller.painter.common.get_capture_dir(), name + '.png')
+        # TODO: implement grab screenshot
+        return path
+
+    def save_as_file(self):
+        """Save video as file"""
+        path = self.window.video_player.path
+        if not path:
+            QMessageBox.warning(self.window.video_player, "Save Error", "No video loaded.")
+            return
+        save_path, _ = QFileDialog.getSaveFileName(
+            self.window.video_player,
+            "Save video As",
+            path,
+            "Video Files (*.mp4 *.avi *.mkv)",
+        )
+        if save_path and save_path != path:
+            try:
+                shutil.copy2(path, save_path)
+                QMessageBox.information(
+                    self.window.video_player,
+                    "OK",
+                    f"Video saved to: {save_path}"
+                )
+            except Exception as e:
+                QMessageBox.critical(
+                    self.window.video_player,
+                    "Error",
+                    f"An error occurred while saving the video: {e}"
+                )
+    def open(self):
+        """Open player window"""
+        self.window.ui.dialogs.open('video_player', width=800, height=600)
+        self.window.video_player.force_resize()
+        self.opened = True
+        self.update()
+
+    def close(self):
+        """Close player window"""
+        self.on_close()
+        self.window.ui.dialogs.close('video_player')
+        self.opened = False
+        self.update()
+
+    def on_close(self):
+        """On player window close"""
+        self.opened = False
+        self.update()
+        self.window.video_player.on_close()
+
+    def toggle(self):
+        """Toggle player window"""
+        if self.opened:
+            self.close()
+        else:
+            self.open()
+
+    def show_hide(self, show: bool = True):
+        """
+        Show/hide player window
+
+        :param show: show/hide
+        """
+        if show:
+            self.open()
+        else:
+            self.close()
+
+    def setup_menu(self) -> dict:
+        """
+        Setup main menu
+
+        :return dict with menu actions
+        """
+        actions = {}
+        actions["media.player"] = QAction(
+            QIcon(":/icons/video.svg"),
+            trans("menu.tools.media.player"),
+            self.window,
+            checkable=False,
+        )
+        actions["media.player"].triggered.connect(
+            lambda: self.toggle()
+        )
+        return actions
+
+    def setup_dialogs(self):
+        """Setup dialogs (static)"""
+        self.dialog = VideoPlayer(self.window)
+        self.dialog.setup()
+
+    def get_lang_mappings(self) -> dict:
+        """
+        Get language mappings
+
+        :return: dict with language mappings
+        """
+        return {
+            'menu.text': {
+                'tools.media.player': 'menu.tools.media.player',
+            }
+        }
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/gpt/worker/importer.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/layout/toolbox/assistants.py`

 * *Files 27% similar despite different names*

```diff
@@ -2,144 +2,121 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.21 14:00:00                  #
+# Updated Date: 2024.04.27 10:00:00                  #
 # ================================================== #
 
-from PySide6.QtCore import QObject, Signal, QRunnable, Slot
+from PySide6 import QtCore
+from PySide6.QtGui import QStandardItemModel, Qt
+from PySide6.QtWidgets import QVBoxLayout, QHBoxLayout, QPushButton, QWidget
 
-from pygpt_net.item.assistant import AssistantItem
+from pygpt_net.ui.widget.element.labels import HelpLabel, TitleLabel
+from pygpt_net.ui.widget.lists.assistant import AssistantList
+from pygpt_net.utils import trans
 
 
-class Importer:
+class Assistants:
     def __init__(self, window=None):
         """
-        Importer core
+        Toolbox UI
 
         :param window: Window instance
         """
         self.window = window
+        self.id = 'assistants'
 
-    @Slot(str, object)
-    def handle_error(self, mode: str, err: any):
+    def setup(self) -> QWidget:
         """
-        Handle thread error signal
+        Setup assistants
 
-        :param mode: mode
-        :param err: error message
+        :return: QWidget
         """
-        if mode == "assistants":
-            self.window.controller.assistant.handle_imported_assistants_failed(err)
-        elif mode == "files":
-            self.window.controller.assistant.files.handle_imported_files_failed(err)
-
-    @Slot(str, int)
-    def handle_finished(self, mode: str, num: int):
-        """
-        Handle thread finished signal
-
-        :param mode: mode
-        :param num: number of imported items
-        """
-        if mode == "assistants":
-            self.window.controller.assistant.handle_imported_assistants(num)
-        elif mode == "files":
-            self.window.controller.assistant.files.handle_imported_files(num)
-
-    def import_assistants(self):
-        """Import assistants"""
-        worker = ImportWorker()
-        worker.window = self.window
-        worker.mode = "assistants"
-        worker.signals.finished.connect(self.handle_finished)
-        worker.signals.error.connect(self.handle_error)
-        self.window.threadpool.start(worker)
-
-    def import_files(self, assistant: AssistantItem):
-        """
-        Import assistant files
-
-        :param assistant: assistant
-        """
-        worker = ImportWorker()
-        worker.window = self.window
-        worker.mode = "files"
-        worker.assistant = assistant
-        worker.signals.finished.connect(self.handle_finished)
-        worker.signals.error.connect(self.handle_error)
-        self.window.threadpool.start(worker)
-
-
-class ImportWorkerSignals(QObject):
-    finished = Signal(str, int)
-    error = Signal(str, object)
-
-
-class ImportWorker(QRunnable):
-    def __init__(self, *args, **kwargs):
-        super(ImportWorker, self).__init__()
-        self.signals = ImportWorkerSignals()
-        self.window = None
-        self.mode = "assistants"
-        self.assistant = None
-
-    @Slot()
-    def run(self):
-        """Importer thread"""
-        try:
-            # import data
-            if self.mode == "assistants":
-                self.import_assistants()
-            elif self.mode == "files":
-                self.import_files(self.assistant)
-
-        except Exception as e:
-            self.signals.error.emit(self.mode, e)
-
-    def import_assistants(self, silent: bool = False) -> bool:
-        """
-        Import assistants from API
-
-        :param silent: silent mode (no signals)
-        :return: result
-        """
-        try:
-            items = self.window.core.assistants.get_all()
-            self.window.core.gpt.assistants.import_api(items)
-            self.window.core.assistants.items = items
-            self.window.core.assistants.save()
-
-            # import uploaded files
-            for id in self.window.core.assistants.items:
-                assistant = self.window.core.assistants.get_by_id(id)
-                self.import_files(assistant, True)
-
-            if not silent:
-                self.signals.finished.emit("assistants", len(items))
-            return True
-        except Exception as e:
-            self.signals.error.emit("assistants", e)
-            return False
-
-    def import_files(self, assistant: AssistantItem, silent: bool = False) -> bool:
-        """
-        Import assistant files from API
-
-        :param assistant: assistant
-        :param silent: silent mode (no signals)
-        :return: result
-        """
-        try:
-            files = self.window.core.gpt.assistants.file_list(assistant.id)
-            self.window.core.assistants.import_files(assistant, files)
-            self.window.core.assistants.save()
-
-            if not silent:
-                self.signals.finished.emit("files", len(files))
-            return True
-        except Exception as e:
-            self.signals.error.emit("files", e)
-        return False
+        layout = self.setup_assistants()
+
+        self.window.ui.nodes['assistants.widget'] = QWidget()
+        self.window.ui.nodes['assistants.widget'].setLayout(layout)
+        self.window.ui.nodes['assistants.widget'].setMinimumHeight(150)
+
+        return self.window.ui.nodes['assistants.widget']
+
+    def setup_assistants(self) -> QVBoxLayout:
+        """
+        Setup list of assistants
+
+        :return: QVBoxLayout
+        """
+        # new
+        self.window.ui.nodes['assistants.new'] = QPushButton(trans('assistant.new'))
+        self.window.ui.nodes['assistants.new'].clicked.connect(
+            lambda: self.window.controller.assistant.editor.edit())
+
+        # import
+        self.window.ui.nodes['assistants.import'] = QPushButton(trans('assistant.import'))
+        self.window.ui.nodes['assistants.import'].clicked.connect(
+            lambda: self.window.controller.assistant.batch.import_assistants())
+
+        # label
+        self.window.ui.nodes['assistants.label'] = TitleLabel(trans("toolbox.assistants.label"))
+
+        # header
+        header = QHBoxLayout()
+        header.addWidget(self.window.ui.nodes['assistants.label'])
+        header.addStretch(1)
+        header.addWidget(self.window.ui.nodes['assistants.import'], alignment=Qt.AlignRight)
+        header.addWidget(self.window.ui.nodes['assistants.new'], alignment=Qt.AlignRight)
+        header.setContentsMargins(0, 0, 0, 0)
+        header_widget = QWidget()
+        header_widget.setLayout(header)
+
+        # list
+        self.window.ui.nodes[self.id] = AssistantList(self.window, self.id)
+        self.window.ui.nodes[self.id].selection_locked = self.window.controller.assistant.change_locked
+        self.window.ui.nodes[self.id].setMinimumWidth(40)
+
+        self.window.ui.nodes['tip.toolbox.assistants'] = HelpLabel(trans('tip.toolbox.assistants'), self.window)
+
+        # rows
+        layout = QVBoxLayout()
+        layout.addWidget(header_widget)
+        layout.addWidget(self.window.ui.nodes[self.id])
+        layout.addWidget(self.window.ui.nodes['tip.toolbox.assistants'])
+
+        # model
+        self.window.ui.models[self.id] = self.create_model(self.window)
+        self.window.ui.nodes[self.id].setModel(self.window.ui.models[self.id])
+
+        return layout
+
+    def create_model(self, parent) -> QStandardItemModel:
+        """
+        Create list model
+
+        :param parent: parent widget
+        :return: QStandardItemModel
+        """
+        return QStandardItemModel(0, 1, parent)
+
+    def update(self, data):
+        """
+        Update list of assistants
+
+        :param data: Data to update
+        """
+        # store previous selection
+        self.window.ui.nodes[self.id].backup_selection()
+
+        self.window.ui.models[self.id].removeRows(0, self.window.ui.models[self.id].rowCount())
+        i = 0
+        for n in data:
+            self.window.ui.models[self.id].insertRow(i)
+            name = data[n].name
+            index = self.window.ui.models[self.id].index(i, 0)
+            self.window.ui.models[self.id].setData(index, "ID: " + data[n].id, QtCore.Qt.ToolTipRole)
+            self.window.ui.models[self.id].setData(self.window.ui.models[self.id].index(i, 0), name)
+            i += 1
+
+        # restore previous selection
+        self.window.ui.nodes[self.id].restore_selection()
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/llms/anthropic.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/llms/anthropic.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/llms/azure_openai.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/llms/azure_openai.py`

 * *Files 24% similar despite different names*

```diff
@@ -2,29 +2,34 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.27 22:00:00                  #
+# Updated Date: 2024.03.13 15:00:00                  #
 # ================================================== #
 
 from langchain_openai import AzureOpenAI
 from langchain_openai import AzureChatOpenAI
 
+from llama_index.core.llms.llm import BaseLLM as LlamaBaseLLM
+from llama_index.core.base.embeddings.base import BaseEmbedding
+from llama_index.llms.azure_openai import AzureOpenAI as LlamaAzureOpenAI
+from llama_index.embeddings.azure_openai import AzureOpenAIEmbedding
+
 from pygpt_net.provider.llms.base import BaseLLM
 from pygpt_net.item.model import ModelItem
 
 
 class AzureOpenAILLM(BaseLLM):
     def __init__(self, *args, **kwargs):
         super(AzureOpenAILLM, self).__init__(*args, **kwargs)
         self.id = "azure_openai"
-        self.type = ["langchain"]
+        self.type = ["langchain", "llama_index", "embeddings"]
 
     def completion(self, window, model: ModelItem, stream: bool = False):
         """
         Return LLM provider instance for completion
 
         :param window: window instance
         :param model: model instance
@@ -41,7 +46,34 @@
         :param window: window instance
         :param model: model instance
         :param stream: stream mode
         :return: LLM provider instance
         """
         args = self.parse_args(model.langchain)
         return AzureChatOpenAI(**args)
+
+    def llama(self, window, model: ModelItem, stream: bool = False) -> LlamaBaseLLM:
+        """
+        Return LLM provider instance for llama
+
+        :param window: window instance
+        :param model: model instance
+        :param stream: stream mode
+        :return: LLM provider instance
+        """
+        args = self.parse_args(model.llama_index)
+        return LlamaAzureOpenAI(**args)
+
+    def get_embeddings_model(self, window, config: list = None) -> BaseEmbedding:
+        """
+        Return provider instance for embeddings
+
+        :param window: window instance
+        :param config: config keyword arguments list
+        :return: Embedding provider instance
+        """
+        args = {}
+        if config is not None:
+            args = self.parse_args({
+                "args": config,
+            })
+        return AzureOpenAIEmbedding(**args)
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/llms/base.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/llms/ollama.py`

 * *Files 27% similar despite different names*

```diff
@@ -2,85 +2,45 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.01.15 04:00:00                  #
+# Updated Date: 2024.01.14 11:00:00                  #
 # ================================================== #
 
-import os
+from langchain_community.chat_models import ChatOllama
 
+
+from pygpt_net.provider.llms.base import BaseLLM
 from pygpt_net.item.model import ModelItem
-from pygpt_net.utils import parse_args
 
 
-class BaseLLM:
+class OllamaLLM(BaseLLM):
     def __init__(self, *args, **kwargs):
-        self.id = ""
-        self.name = ""
-        self.type = []  # langchain, llama_index
-        self.description = ""
-
-    def init(self, window, model: ModelItem, mode: str, sub_mode: str = None):
-        """
-        Initialize provider
-
-        :param window: window instance
-        :param model: model instance
-        :param mode: mode (langchain, llama_index)
-        :param sub_mode: sub mode (chat, completion)
-        """
-        options = {}
-        if mode == 'langchain':
-            options = model.langchain
-        elif mode == 'llama_index':
-            options = model.llama_index
-        if 'env' in options:
-            for item in options['env']:
-                os.environ[item['name']] = str(item['value'].format(**window.core.config.all()))
-
-    def parse_args(self, options: dict) -> dict:
-        """
-        Parse extra args
-
-        :param options: LLM options dict (langchain, llama_index)
-        :return: dict
-        """
-        args = {}
-        if 'args' in options:
-            args = parse_args(options['args'])
-        return args
-
-    def completion(self, window, model: ModelItem, stream: bool = False) -> any:
-        """
-        Return LLM provider instance for completion in langchain mode
-
-        :param window: window instance
-        :param model: model instance
-        :param stream: stream mode
-        :return: provider instance
-        """
-        pass
+        super(OllamaLLM, self).__init__(*args, **kwargs)
+        self.id = "ollama"
+        self.type = ["langchain"]
 
-    def chat(self, window, model: ModelItem, stream: bool = False) -> any:
+    def completion(self, window, model: ModelItem, stream: bool = False):
         """
-        Return LLM provider instance for chat in langchain mode
+        Return LLM provider instance for completion
 
         :param window: window instance
         :param model: model instance
         :param stream: stream mode
-        :return: provider instance
+        :return: LLM provider instance
         """
-        pass
+        return None
 
-    def llama(self, window, model: ModelItem, stream: bool = False):
+    def chat(self, window, model: ModelItem, stream: bool = False):
         """
-        Return LLM provider instance for llama index query and chat
+        Return LLM provider instance for chat
 
         :param window: window instance
         :param model: model instance
         :param stream: stream mode
-        :return: provider instance
+        :return: LLM provider instance
         """
-        pass
+        args = self.parse_args(model.langchain)
+        return ChatOllama(args)
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/llms/hugging_face.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/llms/hugging_face.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/llms/llama.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/llms/llama.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/llms/ollama.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/widget/dialog/db.py`

 * *Files 24% similar despite different names*

```diff
@@ -2,45 +2,54 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.01.14 11:00:00                  #
+# Updated Date: 2024.03.06 02:00:00                  #
 # ================================================== #
 
-from langchain_community.chat_models import ChatOllama
+from PySide6.QtCore import Qt
 
+from .base import BaseDialog
 
-from pygpt_net.provider.llms.base import BaseLLM
-from pygpt_net.item.model import ModelItem
 
+class DatabaseDialog(BaseDialog):
+    def __init__(self, window=None, id=None):
+        """
+        Debug window dialog
 
-class OllamaLLM(BaseLLM):
-    def __init__(self, *args, **kwargs):
-        super(OllamaLLM, self).__init__(*args, **kwargs)
-        self.id = "ollama"
-        self.type = ["langchain"]
+        :param window: Window instance
+        :param id: debug window id
+        """
+        super(DatabaseDialog, self).__init__(window, id)
+        self.window = window
+        self.id = id
 
-    def completion(self, window, model: ModelItem, stream: bool = False):
+    def closeEvent(self, event):
         """
-        Return LLM provider instance for completion
+        Close event
 
-        :param window: window instance
-        :param model: model instance
-        :param stream: stream mode
-        :return: LLM provider instance
+        :param event: close event
         """
-        return None
+        self.cleanup()
+        super(DatabaseDialog, self).closeEvent(event)
 
-    def chat(self, window, model: ModelItem, stream: bool = False):
+    def keyPressEvent(self, event):
         """
-        Return LLM provider instance for chat
+        Key press event
 
-        :param window: window instance
-        :param model: model instance
-        :param stream: stream mode
-        :return: LLM provider instance
+        :param event: key press event
+        """
+        if event.key() == Qt.Key_Escape:
+            self.cleanup()
+            self.close()  # close dialog when the Esc key is pressed.
+        else:
+            super(DatabaseDialog, self).keyPressEvent(event)
+
+    def cleanup(self):
+        """
+        Cleanup on close
         """
-        args = self.parse_args(model.langchain)
-        return ChatOllama(args)
+        self.window.controller.dialogs.debug.active[self.id] = False
+        self.window.controller.debug.update_menu()
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/llms/openai.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/llms/openai.py`

 * *Files 16% similar despite different names*

```diff
@@ -2,31 +2,34 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.27 22:00:00                  #
+# Updated Date: 2024.03.13 15:00:00                  #
 # ================================================== #
 
 from langchain_openai import OpenAI
 from langchain_openai import ChatOpenAI
-from llama_index.llms.openai import OpenAI as LlamaOpenAI
 
+from llama_index.core.llms.llm import BaseLLM as LlamaBaseLLM
+from llama_index.core.base.embeddings.base import BaseEmbedding
+from llama_index.llms.openai import OpenAI as LlamaOpenAI
+from llama_index.embeddings.openai import OpenAIEmbedding
 
 from pygpt_net.provider.llms.base import BaseLLM
 from pygpt_net.item.model import ModelItem
 
 
 class OpenAILLM(BaseLLM):
     def __init__(self, *args, **kwargs):
         super(OpenAILLM, self).__init__(*args, **kwargs)
         self.id = "openai"
-        self.type = ["langchain", "llama_index"]
+        self.type = ["langchain", "llama_index", "embeddings"]
 
     def completion(self, window, model: ModelItem, stream: bool = False):
         """
         Return LLM provider instance for completion
 
         :param window: window instance
         :param model: model instance
@@ -44,18 +47,33 @@
         :param model: model instance
         :param stream: stream mode
         :return: LLM provider instance
         """
         args = self.parse_args(model.langchain)
         return ChatOpenAI(**args)
 
-    def llama(self, window, model: ModelItem, stream: bool = False):
+    def llama(self, window, model: ModelItem, stream: bool = False) -> LlamaBaseLLM:
         """
         Return LLM provider instance for llama
 
         :param window: window instance
         :param model: model instance
         :param stream: stream mode
         :return: LLM provider instance
         """
         args = self.parse_args(model.llama_index)
         return LlamaOpenAI(**args)
+
+    def get_embeddings_model(self, window, config: list = None) -> BaseEmbedding:
+        """
+        Return provider instance for embeddings
+
+        :param window: window instance
+        :param config: config keyword arguments list
+        :return: Embedding provider instance
+        """
+        args = {}
+        if config is not None:
+            args = self.parse_args({
+                "args": config,
+            })
+        return OpenAIEmbedding(**args)
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/loaders/base.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/loaders/base.py`

 * *Files 1% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.03.01 02:00:00                  #
+# Updated Date: 2024.04.17 01:00:00                  #
 # ================================================== #
 
 from llama_index.core.readers.base import BaseReader
 
 
 class BaseLoader:
     def __init__(self, *args, **kwargs):
@@ -18,14 +18,15 @@
         self.id = ""
         self.name = ""
         self.extensions = []
         self.type = ["file"]  # list of types: file, web
         self.instructions = []  # list of instructions for 'web_index' command for how to handle this type
         self.args = {}  # custom keyword arguments
         self.init_args = {}  # initial keyword arguments
+        self.init_args_types = {}
         self.allow_compiled = True  # allow in compiled and Snap versions
         # This is required due to some readers may require Python environment to install additional packages
 
     def attach_window(self, window):
         """
         Attach window instance
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/loaders/file_csv.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/loaders/file_csv.py`

 * *Files 8% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.28 22:00:00                  #
+# Updated Date: 2024.04.17 01:00:00                  #
 # ================================================== #
 
 from llama_index.core.readers.base import BaseReader
 
 from .hub.simple_csv.base import SimpleCSVReader
 from .base import BaseLoader
 
@@ -22,14 +22,18 @@
         self.name = "CSV files"
         self.extensions = ["csv"]
         self.type = ["file"]
         self.init_args = {
             "concat_rows": True,
             "encoding": "utf-8",
         }
+        self.init_args_types = {
+            "concat_rows": "bool",
+            "encoding": "str",
+        }
 
     def get(self) -> BaseReader:
         """
         Get reader instance
 
         :return: Data reader instance
         """
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/loaders/file_docx.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/loaders/file_docx.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/loaders/file_epub.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/loaders/file_epub.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/loaders/file_excel.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/loaders/file_excel.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/loaders/file_html.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/loaders/file_html.py`

 * *Files 10% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.29 02:00:00                  #
+# Updated Date: 2024.04.17 01:00:00                  #
 # ================================================== #
 
 from llama_index.core.readers.base import BaseReader
 from llama_index.readers.file.html import HTMLTagReader
 
 from .base import BaseLoader
 
@@ -22,14 +22,18 @@
         self.name = "HTML files"
         self.extensions = ["html", "htm"]
         self.type = ["file"]
         self.init_args = {
             "tag": "section",
             "ignore_no_id": False,
         }
+        self.init_args_types = {
+            "tag": "str",
+            "ignore_no_id": "bool",
+        }
 
     def get(self) -> BaseReader:
         """
         Get reader instance
 
         :return: Data reader instance
         """
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/loaders/file_image_vision.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/loaders/file_video_audio.py`

 * *Files 19% similar despite different names*

```diff
@@ -2,43 +2,53 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.03.01 02:00:00                  #
+# Updated Date: 2024.04.17 01:00:00                  #
 # ================================================== #
 
 from llama_index.core.readers.base import BaseReader
 
-from .hub.image_vision.base import ImageVisionLLMReader
+from .hub.video_audio.base import VideoAudioReader
 from .base import BaseLoader
 
 
 class Loader(BaseLoader):
     def __init__(self, *args, **kwargs):
         super().__init__(*args, **kwargs)
-        self.id = "image_vision"
-        self.name = "Image (vision)"
-        self.extensions = ["jpg", "jpeg", "png", "gif", "bmp", "tiff", "webp"]
+        self.id = "video_audio"
+        self.name = "Video/audio"
+        self.extensions = ["mp4", "avi", "mov", "mkv", "webm", "mp3", "mpeg", "mpga", "m4a", "wav"]
         self.type = ["file"]
         self.init_args = {
             "use_local": False,  # use local model instead of API
-            "keep_image": False,
-            "local_prompt": "Question: describe what you see in this image. Answer:",
-            "api_prompt": "Describe what you see in this image",
-            "api_model": "gpt-4-vision-preview",
-            "api_tokens": 1000,
+            "model_version": "base", # Whisper model version
         }
+        self.init_args_types = {
+            "use_local": "bool",
+            "model_version": "str",
+        }
+        """
+        https://github.com/openai/whisper
+        Allowed models:
+        - tiny (39 M)
+        - base (74 M)
+        - small (244 M)
+        - medium (769 M)
+        - large (1550 M)
+        - large-v2 (1550 M)
+        """
 
     def get(self) -> BaseReader:
         """
         Get reader instance
 
         :return: Data reader instance
         """
         args = self.get_args()
         args["window"] = self.window  # pass window instance
         if self.window is not None:
             args["use_local"] = self.window.core.config.get("llama.hub.loaders.use_local", False)
-        return ImageVisionLLMReader(**args)
+        return VideoAudioReader(**args)
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/loaders/file_ipynb.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/loaders/file_json.py`

 * *Files 18% similar despite different names*

```diff
@@ -2,36 +2,31 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.29 02:00:00                  #
+# Updated Date: 2024.02.27 22:00:00                  #
 # ================================================== #
 
 from llama_index.core.readers.base import BaseReader
-from llama_index.readers.file.ipynb import IPYNBReader
 
+from .hub.json.base import JSONReader
 from .base import BaseLoader
 
 
 class Loader(BaseLoader):
     def __init__(self, *args, **kwargs):
         super().__init__(*args, **kwargs)
-        self.id = "ipynb"
-        self.name = "IPYNB Notebook files"
-        self.extensions = ["ipynb"]
+        self.id = "json"
+        self.name = "JSON files"
+        self.extensions = ["json"]
         self.type = ["file"]
-        self.init_args = {
-            "parser_config": None,
-            "concatenate": False,
-        }
 
     def get(self) -> BaseReader:
         """
         Get reader instance
 
         :return: Data reader instance
         """
-        args = self.get_args()
-        return IPYNBReader(**args)
+        return JSONReader()
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/loaders/file_json.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/loaders/file_markdown.py`

 * *Files 18% similar despite different names*

```diff
@@ -2,31 +2,40 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.27 22:00:00                  #
+# Updated Date: 2024.04.17 01:00:00                  #
 # ================================================== #
 
 from llama_index.core.readers.base import BaseReader
+from llama_index.readers.file.markdown import MarkdownReader
 
-from .hub.json.base import JSONReader
 from .base import BaseLoader
 
 
 class Loader(BaseLoader):
     def __init__(self, *args, **kwargs):
         super().__init__(*args, **kwargs)
-        self.id = "json"
-        self.name = "JSON files"
-        self.extensions = ["json"]
+        self.id = "md"
+        self.name = "Markdown files"
+        self.extensions = ["md"]
         self.type = ["file"]
+        self.init_args = {
+            "remove_hyperlinks": True,
+            "remove_images": True,
+        }
+        self.init_args_types = {
+            "remove_hyperlinks": "bool",
+            "remove_images": "bool",
+        }
 
     def get(self) -> BaseReader:
         """
         Get reader instance
 
         :return: Data reader instance
         """
-        return JSONReader()
+        args = self.get_args()
+        return MarkdownReader(**args)
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/loaders/file_markdown.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/loaders/file_xml.py`

 * *Files 18% similar despite different names*

```diff
@@ -2,36 +2,38 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.28 22:00:00                  #
+# Updated Date: 2024.04.17 01:00:00                  #
 # ================================================== #
 
 from llama_index.core.readers.base import BaseReader
-from llama_index.readers.file.markdown import MarkdownReader
+from llama_index.readers.file.xml import XMLReader
 
 from .base import BaseLoader
 
 
 class Loader(BaseLoader):
     def __init__(self, *args, **kwargs):
         super().__init__(*args, **kwargs)
-        self.id = "md"
-        self.name = "Markdown files"
-        self.extensions = ["md"]
+        self.id = "xml"
+        self.name = "XML files"
+        self.extensions = ["xml"]
         self.type = ["file"]
         self.init_args = {
-            "remove_hyperlinks": True,
-            "remove_images": True,
+            "tree_level_split": 0,
+        }
+        self.init_args_types = {
+            "tree_level_split": "int",
         }
 
     def get(self) -> BaseReader:
         """
         Get reader instance
 
         :return: Data reader instance
         """
         args = self.get_args()
-        return MarkdownReader(**args)
+        return XMLReader(**args)
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/loaders/file_pdf.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/loaders/file_ipynb.py`

 * *Files 14% similar despite different names*

```diff
@@ -2,35 +2,40 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.28 22:00:00                  #
+# Updated Date: 2024.04.17 01:00:00                  #
 # ================================================== #
 
 from llama_index.core.readers.base import BaseReader
-from llama_index.readers.file.docs import PDFReader
+from llama_index.readers.file.ipynb import IPYNBReader
 
 from .base import BaseLoader
 
 
 class Loader(BaseLoader):
     def __init__(self, *args, **kwargs):
         super().__init__(*args, **kwargs)
-        self.id = "pdf"
-        self.name = "PDF documents"
-        self.extensions = ["pdf"]
+        self.id = "ipynb"
+        self.name = "IPYNB Notebook files"
+        self.extensions = ["ipynb"]
         self.type = ["file"]
         self.init_args = {
-            "return_full_document": False,
+            "parser_config": None,
+            "concatenate": False,
+        }
+        self.init_args_types = {
+            "parser_config": "dict",
+            "concatenate": "bool",
         }
 
     def get(self) -> BaseReader:
         """
         Get reader instance
 
         :return: Data reader instance
         """
         args = self.get_args()
-        return PDFReader(**args)
+        return IPYNBReader(**args)
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/loaders/file_video_audio.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/loaders/web_page.py`

 * *Files 23% similar despite different names*

```diff
@@ -2,49 +2,53 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.03.01 02:00:00                  #
+# Updated Date: 2024.03.12 06:00:00                  #
 # ================================================== #
 
 from llama_index.core.readers.base import BaseReader
 
-from .hub.video_audio.base import VideoAudioReader
+from .hub.web_page.base import WebPage
 from .base import BaseLoader
 
 
 class Loader(BaseLoader):
     def __init__(self, *args, **kwargs):
         super().__init__(*args, **kwargs)
-        self.id = "video_audio"
-        self.name = "Video/audio"
-        self.extensions = ["mp4", "avi", "mov", "mkv", "webm", "mp3", "mpeg", "mpga", "m4a", "wav"]
-        self.type = ["file"]
-        self.init_args = {
-            "use_local": False,  # use local model instead of API
-            "model_version": "base", # Whisper model version
-        }
-        """
-        https://github.com/openai/whisper
-        Allowed models:
-        - tiny (39 M)
-        - base (74 M)
-        - small (244 M)
-        - medium (769 M)
-        - large (1550 M)
-        - large-v2 (1550 M)
-        """
+        self.id = "webpage"
+        self.name = "Webpages"
+        self.type = ["web"]
+        self.instructions = [
+            {
+                "webpage": {
+                    "description": "index provided standard webpage URL",
+                    "args": {
+                        "url": {
+                            "type": "str",
+                        },
+                    },
+                }
+            }
+        ]
 
     def get(self) -> BaseReader:
         """
         Get reader instance
 
         :return: Data reader instance
         """
-        args = self.get_args()
-        args["window"] = self.window  # pass window instance
-        if self.window is not None:
-            args["use_local"] = self.window.core.config.get("llama.hub.loaders.use_local", False)
-        return VideoAudioReader(**args)
+        return WebPage()
+
+    def prepare_args(self, **kwargs) -> dict:
+        """
+        Prepare arguments for reader
+
+        :param kwargs: keyword arguments
+        :return: args to pass to reader
+        """
+        args = {}
+        args["url"] = kwargs.get("url")
+        return args
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/loaders/file_xml.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/loaders/web_rss.py`

 * *Files 17% similar despite different names*

```diff
@@ -2,35 +2,53 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.28 22:00:00                  #
+# Updated Date: 2024.03.12 06:00:00                  #
 # ================================================== #
 
 from llama_index.core.readers.base import BaseReader
-from llama_index.readers.file.xml import XMLReader
+from llama_index.readers.web.rss.base import RssReader
 
 from .base import BaseLoader
 
 
 class Loader(BaseLoader):
     def __init__(self, *args, **kwargs):
         super().__init__(*args, **kwargs)
-        self.id = "xml"
-        self.name = "XML files"
-        self.extensions = ["xml"]
-        self.type = ["file"]
-        self.init_args = {
-            "tree_level_split": 0,
-        }
+        self.id = "rss"
+        self.name = "RSS"
+        self.type = ["web"]
+        self.instructions = [
+            {
+                "rss": {
+                    "description": "read RSS feed from URL",
+                    "args": {
+                        "url": {
+                            "type": "str",
+                        },
+                    },
+                }
+            }
+        ]
 
     def get(self) -> BaseReader:
         """
         Get reader instance
 
         :return: Data reader instance
         """
-        args = self.get_args()
-        return XMLReader(**args)
+        return RssReader()
+
+    def prepare_args(self, **kwargs) -> dict:
+        """
+        Prepare arguments for reader
+
+        :param kwargs: keyword arguments
+        :return: args to pass to reader
+        """
+        args = {}
+        args["urls"] = [kwargs.get("url")]  # list of links
+        return args
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/loaders/hub/bitbucket/repo.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/loaders/hub/bitbucket/repo.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/loaders/hub/chatgpt_retrieval/base.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/loaders/hub/chatgpt_retrieval/base.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/loaders/hub/database/base.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/loaders/hub/database/base.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/loaders/hub/github/issues.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/loaders/hub/github/issues.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/loaders/hub/github/repo.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/loaders/hub/github/repo.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/loaders/hub/google/calendar.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/loaders/hub/google/calendar.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/loaders/hub/google/docs.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/loaders/hub/google/docs.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/loaders/hub/google/gmail.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/loaders/hub/google/gmail.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/loaders/hub/google/keep.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/loaders/hub/google/keep.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/loaders/hub/google/sheets.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/loaders/hub/google/sheets.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/loaders/hub/image_vision/base.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/loaders/hub/image_vision/base.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/loaders/hub/json/base.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/loaders/hub/json/base.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/loaders/hub/pandas_excel/base.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/loaders/hub/pandas_excel/base.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/loaders/hub/simple_csv/base.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/loaders/hub/simple_csv/base.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/loaders/hub/video_audio/base.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/loaders/hub/video_audio/base.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/loaders/hub/web_page/base.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/loaders/hub/web_page/base.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/loaders/hub/yt/base.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/loaders/hub/yt/base.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/loaders/hub/yt/utils.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/loaders/hub/yt/utils.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/loaders/web_bitbucket.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/loaders/web_bitbucket.py`

 * *Files 16% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.03.01 17:00:00                  #
+# Updated Date: 2024.04.17 01:00:00                  #
 # ================================================== #
 
 import json
 
 from llama_index.core.readers.base import BaseReader
 
 from .hub.bitbucket.repo import BitbucketReader
@@ -21,23 +21,43 @@
     def __init__(self, *args, **kwargs):
         super().__init__(*args, **kwargs)
         self.id = "bitbucket_repo"
         self.name = "Bitbucket Repository"
         self.type = ["web"]
         self.instructions = [
             {
-                "bitbucket_repo": "use it to read and index BitBucket repository, allowed additional args: "
-                                "`base_url`: str, `project_key`: str, `branch`: str, `repository`: str",
+                "bitbucket_repo": {
+                    "description": "read and index BitBucket repository",
+                    "args": {
+                        "base_url": {
+                            "type": "str",
+                        },
+                        "project_key": {
+                            "type": "str",
+                        },
+                        "branch": {
+                            "type": "str",
+                        },
+                        "repository": {
+                            "type": "str",
+                        },
+                    },
+                }
             }
         ]
         self.init_args = {
             "username": None,
             "api_key": None,
             "extensions_to_skip": [],
         }
+        self.init_args_types = {
+            "username": "str",
+            "api_key": "str",
+            "extensions_to_skip": "list",
+        }
 
     def get(self) -> BaseReader:
         """
         Get reader instance
 
         :return: Data reader instance
         """
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/loaders/web_chatgpt_retrieval.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/loaders/web_chatgpt_retrieval.py`

 * *Files 14% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.03.01 17:00:00                  #
+# Updated Date: 2024.04.17 01:00:00                  #
 # ================================================== #
 
 import json
 
 from llama_index.core.readers.base import BaseReader
 
 from .hub.chatgpt_retrieval.base import ChatGPTRetrievalPluginReader
@@ -21,24 +21,36 @@
     def __init__(self, *args, **kwargs):
         super().__init__(*args, **kwargs)
         self.id = "chatgpt_retrieval"
         self.name = "ChatGPT Retrieval Plugin"
         self.type = ["web"]
         self.instructions = [
             {
-                "chatgpt_retrieval": "use it to read and index data from ChatGPT Retrieval Plugin, "
-                                     "allowed additional args: `query`: str",
+                "chatgpt_retrieval": {
+                    "description": "read and index data from ChatGPT Retrieval Plugin",
+                    "args": {
+                        "query": {
+                            "type": "str",
+                        },
+                    },
+                }
             }
         ]
         self.init_args = {
             "endpoint_url": None,
             "bearer_token": None,
             "retries": None,
             "batch_size": 100,
         }
+        self.init_args_types = {
+            "endpoint_url": "str",
+            "bearer_token": "str",
+            "retries": "int",
+            "batch_size": "int",
+        }
 
     def get(self) -> BaseReader:
         """
         Get reader instance
 
         :return: Data reader instance
         """
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/loaders/web_database.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/loaders/web_google_calendar.py`

 * *Files 22% similar despite different names*

```diff
@@ -2,77 +2,85 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.03.01 17:00:00                  #
+# Updated Date: 2024.04.17 01:00:00                  #
 # ================================================== #
 
 import json
 
 from llama_index.core.readers.base import BaseReader
 
-from .hub.database.base import DatabaseReader
+from .hub.google.calendar import GoogleCalendarReader
 from .base import BaseLoader
 
 
 class Loader(BaseLoader):
     def __init__(self, *args, **kwargs):
         super().__init__(*args, **kwargs)
-        self.id = "db"
-        self.name = "SQL Database"
+        self.id = "google_calendar"
+        self.name = "Google Calendar"
         self.type = ["web"]
         self.instructions = [
             {
-                "db": "use it to read and index files from connected SQL database, allowed additional args: "
-                      "`query`: str",
+                "google_calendar": {
+                    "description": "read and index files from Google Calendar",
+                    "args": {
+                        "number_of_results": {
+                            "type": "int",
+                        },
+                        "start_date": {
+                            "type": "str",
+                        },
+                    },
+                }
             }
         ]
         self.init_args = {
-            "sql_database": None,
-            "engine": None,
-            "uri": None,
-            "scheme": None,
-            "host": None,
-            "port": None,
-            "user": None,
-            "password": None,
-            "dbname": None,
+            "credentials_path": "credentials.json",
+            "token_path": "token.json",
+        }
+        self.init_args_types = {
+            "credentials_path": "str",
+            "token_path": "str",
         }
 
     def get(self) -> BaseReader:
         """
         Get reader instance
 
         :return: Data reader instance
         """
         args = self.get_args()
-        return DatabaseReader(**args)
+        return GoogleCalendarReader(**args)
 
     def get_external_id(self, args: dict = None) -> str:
         """
         Get unique web content identifier
 
         :param args: load_data args
         :return: unique content identifier
         """
         unique = {}
-        if "dbname" in args and args.get("dbname"):
-            unique["dbname"] = args.get("dbname")
-        if "query" in args and args.get("query"):
-            unique["query"] = args.get("query")
+        if "start_date" in args and args.get("start_date"):
+            unique["start_date"] = args.get("start_date")
         return json.dumps(unique)
 
     def prepare_args(self, **kwargs) -> dict:
         """
         Prepare arguments for load_data() method
 
         :param kwargs: keyword arguments
         :return: args to pass to reader
         """
         args = {}
-        if "query" in kwargs and kwargs.get("query"):
-            if isinstance(kwargs.get("query"), str):
-                args["query"] = kwargs.get("query")  # query
+        if "number_of_results" in kwargs and kwargs.get("number_of_results"):
+            if isinstance(kwargs.get("number_of_results"), int):
+                args["number_of_results"] = kwargs.get("number_of_results")  # number of results
+
+        if "start_date" in kwargs and kwargs.get("start_date"):
+            if isinstance(kwargs.get("start_date"), str):
+                args["start_date"] = kwargs.get("start_date")  # start date
         return args
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/loaders/web_github_issues.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/loaders/web_github_issues.py`

 * *Files 26% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.03.01 17:00:00                  #
+# Updated Date: 2024.04.17 01:00:00                  #
 # ================================================== #
 
 import json
 
 from llama_index.core.readers.base import BaseReader
 
 from .hub.github.issues import GitHubRepositoryIssuesReader
@@ -21,23 +21,45 @@
     def __init__(self, *args, **kwargs):
         super().__init__(*args, **kwargs)
         self.id = "github_issues"
         self.name = "GitHub Issues"
         self.type = ["web"]
         self.instructions = [
             {
-                "github_issues": "use it to read and index GitHub issues, allowed additional args: "
-                                "`owner`: str, `repository`: str, `state`: str (open|closed|all), "
-                                "`label_filters_include`: list, `label_filters_exclude`: list",
+                "github_issues": {
+                    "description": "read and index GitHub issues",
+                    "args": {
+                        "owner": {
+                            "type": "str",
+                        },
+                        "repository": {
+                            "type": "str",
+                        },
+                        "state": {
+                            "type": "enum",
+                            "options": ["open", "closed", "all"],
+                        },
+                        "label_filters_include": {
+                            "type": "list",
+                        },
+                        "label_filters_exclude": {
+                            "type": "list",
+                        },
+                    },
+                }
             }
         ]
         self.init_args = {
             "token": "",
             "verbose": False,
         }
+        self.init_args_types = {
+            "token": "str",
+            "verbose": "bool",
+        }
 
     def get(self) -> BaseReader:
         """
         Get reader instance
 
         :return: Data reader instance
         """
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/loaders/web_github_repo.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/loaders/web_github_repo.py`

 * *Files 15% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.03.01 17:00:00                  #
+# Updated Date: 2024.04.17 01:00:00                  #
 # ================================================== #
 
 import json
 
 from llama_index.core.readers.base import BaseReader
 
 from .hub.github.repo import GithubRepositoryReader
@@ -21,30 +21,57 @@
     def __init__(self, *args, **kwargs):
         super().__init__(*args, **kwargs)
         self.id = "github_repo"
         self.name = "GitHub Repository"
         self.type = ["web"]
         self.instructions = [
             {
-                "github_repo": "use it to read and index GitHub repository, allowed additional args: "
-                                "`commit_sha`: str, `branch`: str, `owner`: str, `repository`: str",
-            }
+                "github_repo": {
+                    "description": "read and index GitHub repository",
+                    "args": {
+                        "commit_sha": {
+                            "type": "str",
+                        },
+                        "branch": {
+                            "type": "str",
+                        },
+                        "owner": {
+                            "type": "str",
+                        },
+                        "repository": {
+                            "type": "str",
+                        }
+                    },
+                },
+            },
         ]
         self.init_args = {
             "token": "",
             "use_parser": False,
             "verbose": False,
             "concurrent_requests": 5,
             "timeout": 5,
             "retries": 0,
             "filter_dirs_include": None,  # list of directories to include
             "filter_dirs_exclude": None,  # list of directories to exclude
             "filter_file_ext_include": None,  # list of file extensions to include
             "filter_file_ext_exclude": None,  # list of file extensions to exclude
         }
+        self.init_args_types = {
+            "token": "str",
+            "use_parser": "bool",
+            "verbose": "bool",
+            "concurrent_requests": "int",
+            "timeout": "int",
+            "retries": "int",
+            "filter_dirs_include": "list",
+            "filter_dirs_exclude": "list",
+            "filter_file_ext_include": "list",
+            "filter_file_ext_exclude": "list",
+        }
 
     def get(self) -> BaseReader:
         """
         Get reader instance
 
         :return: Data reader instance
         """
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/loaders/web_google_calendar.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/loaders/web_google_docs.py`

 * *Files 23% similar despite different names*

```diff
@@ -2,72 +2,78 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.03.01 02:00:00                  #
+# Updated Date: 2024.04.17 01:00:00                  #
 # ================================================== #
 
 import json
 
 from llama_index.core.readers.base import BaseReader
 
-from .hub.google.calendar import GoogleCalendarReader
+from .hub.google.docs import GoogleDocsReader
 from .base import BaseLoader
 
 
 class Loader(BaseLoader):
     def __init__(self, *args, **kwargs):
         super().__init__(*args, **kwargs)
-        self.id = "google_calendar"
-        self.name = "Google Calendar"
+        self.id = "google_docs"
+        self.name = "Google Docs"
         self.type = ["web"]
         self.instructions = [
             {
-                "google_calendar": "use it to read and index files from Google Calendar, allowed additional args: "
-                                "`number_of_results`: int, `start_date`: str",
+                "google_docs": {
+                    "description": "read and index files from Google Docs",
+                    "args": {
+                        "document_ids": {
+                            "type": "list",
+                        },
+                    },
+                }
             }
         ]
         self.init_args = {
             "credentials_path": "credentials.json",
             "token_path": "token.json",
         }
+        self.init_args_types = {
+            "credentials_path": "str",
+            "token_path": "str",
+        }
 
     def get(self) -> BaseReader:
         """
         Get reader instance
 
         :return: Data reader instance
         """
         args = self.get_args()
-        return GoogleCalendarReader(**args)
+        return GoogleDocsReader(**args)
 
     def get_external_id(self, args: dict = None) -> str:
         """
         Get unique web content identifier
 
         :param args: load_data args
         :return: unique content identifier
         """
         unique = {}
-        if "start_date" in args and args.get("start_date"):
-            unique["start_date"] = args.get("start_date")
+        if "document_ids" in args and args.get("document_ids"):
+            unique["document_ids"] = args.get("document_ids")
         return json.dumps(unique)
 
     def prepare_args(self, **kwargs) -> dict:
         """
         Prepare arguments for load_data() method
 
         :param kwargs: keyword arguments
         :return: args to pass to reader
         """
         args = {}
-        if "number_of_results" in kwargs and kwargs.get("number_of_results"):
-            if isinstance(kwargs.get("number_of_results"), int):
-                args["number_of_results"] = kwargs.get("number_of_results")  # number of results
-
-        if "start_date" in kwargs and kwargs.get("start_date"):
-            if isinstance(kwargs.get("start_date"), str):
-                args["start_date"] = kwargs.get("start_date")  # start date
+        if "document_ids" in kwargs and kwargs.get("document_ids"):
+            if isinstance(kwargs.get("document_ids"), list):
+                args["document_ids"] = kwargs.get("document_ids")  # list of document ids
         return args
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/loaders/web_google_docs.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/loaders/web_google_keep.py`

 * *Files 17% similar despite different names*

```diff
@@ -2,50 +2,58 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.03.01 02:00:00                  #
+# Updated Date: 2024.04.17 01:00:00                  #
 # ================================================== #
 
 import json
 
 from llama_index.core.readers.base import BaseReader
 
-from .hub.google.docs import GoogleDocsReader
+from .hub.google.keep import GoogleKeepReader
 from .base import BaseLoader
 
 
 class Loader(BaseLoader):
     def __init__(self, *args, **kwargs):
         super().__init__(*args, **kwargs)
-        self.id = "google_docs"
-        self.name = "Google Docs"
+        self.id = "google_keep"
+        self.name = "Google Keep"
         self.type = ["web"]
         self.instructions = [
             {
-                "google_docs": "use it to read and index files from Google Docs, allowed additional args: "
-                                "`document_ids`: list",
+                "google_keep": {
+                    "description": "read and index files from Google Keep",
+                    "args": {
+                        "document_ids": {
+                            "type": "list",
+                        },
+                    },
+                }
             }
         ]
         self.init_args = {
-            "credentials_path": "credentials.json",
-            "token_path": "token.json",
+            "credentials_path": "keep_credentials.json",
+        }
+        self.init_args_types = {
+            "credentials_path": "str",
         }
 
     def get(self) -> BaseReader:
         """
         Get reader instance
 
         :return: Data reader instance
         """
         args = self.get_args()
-        return GoogleDocsReader(**args)
+        return GoogleKeepReader(**args)
 
     def get_external_id(self, args: dict = None) -> str:
         """
         Get unique web content identifier
 
         :param args: load_data args
         :return: unique content identifier
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/loaders/web_google_drive.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/loaders/web_google_drive.py`

 * *Files 10% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.03.01 02:00:00                  #
+# Updated Date: 2024.04.17 01:00:00                  #
 # ================================================== #
 
 import json
 
 from llama_index.core.readers.base import BaseReader
 
 from llama_index.readers.google.drive.base import GoogleDriveReader
@@ -21,24 +21,40 @@
     def __init__(self, *args, **kwargs):
         super().__init__(*args, **kwargs)
         self.id = "google_drive"
         self.name = "Google Drive"
         self.type = ["web"]
         self.instructions = [
             {
-                "google_drive": "use it to read and index files from Google Drive, "
-                                "use `root` as default folder, allowed additional args: "
-                                "`folder_id`: str, `file_ids`: list, `mime_types`: list",
+                "google_drive": {
+                    "description": "read and index files from Google Drive",
+                    "args": {
+                        "folder_id": {
+                            "type": "str",
+                        },
+                        "file_ids": {
+                            "type": "list",
+                        },
+                        "mime_types": {
+                            "type": "list",
+                        },
+                    },
+                }
             }
         ]
         self.init_args = {
             "credentials_path" : "credentials.json",
             "token_path": "token.json",
             "pydrive_creds_path": "creds.txt",
         }
+        self.init_args_types = {
+            "credentials_path": "str",
+            "token_path": "str",
+            "pydrive_creds_path": "str",
+        }
 
     def get(self) -> BaseReader:
         """
         Get reader instance
 
         :return: Data reader instance
         """
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/loaders/web_google_gmail.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/loaders/web_google_gmail.py`

 * *Files 12% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.03.01 02:00:00                  #
+# Updated Date: 2024.04.17 01:00:00                  #
 # ================================================== #
 
 import json
 
 from llama_index.core.readers.base import BaseReader
 
 from .hub.google.gmail import GmailReader
@@ -21,26 +21,40 @@
     def __init__(self, *args, **kwargs):
         super().__init__(*args, **kwargs)
         self.id = "google_gmail"
         self.name = "Google Gmail"
         self.type = ["web"]
         self.instructions = [
             {
-                "google_gmail": "use it to read and index emails from Google Gmail, "
-                                "allowed additional args: `query`: str",
+                "google_gmail": {
+                    "description": "read and index emails from Google Gmail",
+                    "args": {
+                        "query": {
+                            "type": "str",
+                        },
+                    },
+                }
             }
         ]
         self.init_args = {
             "credentials_path": "credentials.json",
             "token_path": "token.json",
             "use_iterative_parser": False,
             "max_results": 10,
             "service": None,
             "results_per_page": None,
         }
+        self.init_args_types = {
+            "credentials_path": "str",
+            "token_path": "str",
+            "use_iterative_parser": "bool",
+            "max_results": "int",
+            "service": "str",
+            "results_per_page": "int",
+        }
 
     def get(self) -> BaseReader:
         """
         Get reader instance
 
         :return: Data reader instance
         """
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/loaders/web_google_keep.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/loaders/web_yt.py`

 * *Files 23% similar despite different names*

```diff
@@ -2,67 +2,53 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.03.01 02:00:00                  #
+# Updated Date: 2024.03.12 06:00:00                  #
 # ================================================== #
 
-import json
-
 from llama_index.core.readers.base import BaseReader
 
-from .hub.google.keep import GoogleKeepReader
+from .hub.yt.base import YoutubeTranscriptReader
 from .base import BaseLoader
 
 
 class Loader(BaseLoader):
     def __init__(self, *args, **kwargs):
         super().__init__(*args, **kwargs)
-        self.id = "google_keep"
-        self.name = "Google Keep"
+        self.id = "youtube"
+        self.name = "YouTube"
         self.type = ["web"]
         self.instructions = [
             {
-                "google_keep": "use it to read and index files from Google Keep, allowed additional args: "
-                                "`document_ids`: list",
+                "youtube": {
+                    "description": "read and index YouTube video URL",
+                    "args": {
+                        "url": {
+                            "type": "str",
+                        },
+                    },
+                }
             }
         ]
-        self.init_args = {
-            "credentials_path": "keep_credentials.json",
-        }
 
     def get(self) -> BaseReader:
         """
         Get reader instance
 
         :return: Data reader instance
         """
-        args = self.get_args()
-        return GoogleKeepReader(**args)
-
-    def get_external_id(self, args: dict = None) -> str:
-        """
-        Get unique web content identifier
-
-        :param args: load_data args
-        :return: unique content identifier
-        """
-        unique = {}
-        if "document_ids" in args and args.get("document_ids"):
-            unique["document_ids"] = args.get("document_ids")
-        return json.dumps(unique)
+        return YoutubeTranscriptReader()
 
     def prepare_args(self, **kwargs) -> dict:
         """
-        Prepare arguments for load_data() method
+        Prepare arguments for reader
 
         :param kwargs: keyword arguments
         :return: args to pass to reader
         """
         args = {}
-        if "document_ids" in kwargs and kwargs.get("document_ids"):
-            if isinstance(kwargs.get("document_ids"), list):
-                args["document_ids"] = kwargs.get("document_ids")  # list of document ids
+        args["ytlinks"] = [kwargs.get("url")]  # list of links
         return args
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/loaders/web_google_sheets.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/loaders/web_google_sheets.py`

 * *Files 16% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.03.01 02:00:00                  #
+# Updated Date: 2024.04.17 01:00:00                  #
 # ================================================== #
 
 import json
 
 from llama_index.core.readers.base import BaseReader
 
 from .hub.google.sheets import GoogleSheetsReader
@@ -21,23 +21,34 @@
     def __init__(self, *args, **kwargs):
         super().__init__(*args, **kwargs)
         self.id = "google_sheets"
         self.name = "Google Sheets"
         self.type = ["web"]
         self.instructions = [
             {
-                "google_sheets": "use it to read and index spreadsheets from Google Sheets, "
-                                "allowed additional args: `spreadsheet_ids`: list",
+                "google_sheets": {
+                    "description": "read and index spreadsheets from Google Sheets",
+                    "args": {
+                        "spreadsheet_ids": {
+                            "type": "list",
+                        },
+                    },
+                }
             }
         ]
         self.init_args = {
             "credentials_path": "credentials.json",
             "token_path": "token.json",
             "is_remote": True,
         }
+        self.init_args_types = {
+            "credentials_path": "str",
+            "token_path": "str",
+            "is_remote": "bool",
+        }
 
     def get(self) -> BaseReader:
         """
         Get reader instance
 
         :return: Data reader instance
         """
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/loaders/web_microsoft_onedrive.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/loaders/web_microsoft_onedrive.py`

 * *Files 14% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.03.01 17:00:00                  #
+# Updated Date: 2024.04.17 01:00:00                  #
 # ================================================== #
 
 import json
 
 from llama_index.core.readers.base import BaseReader
 
 from llama_index.readers.microsoft_onedrive.base import OneDriveReader
@@ -21,25 +21,46 @@
     def __init__(self, *args, **kwargs):
         super().__init__(*args, **kwargs)
         self.id = "microsoft_onedrive"
         self.name = "Microsoft OneDrive"
         self.type = ["web"]
         self.instructions = [
             {
-                "microsoft_onedrive": "use it to read and index files from OneDrive, "
-                                "allowed additional args: "
-                                "`folder_id`: str, `file_ids`: list, `mime_types`: list, "
-                                      "`folder_path`: str, file_paths`: list",
+                "microsoft_onedrive": {
+                    "description": "read and index files from OneDrive",
+                    "args": {
+                        "folder_id": {
+                            "type": "str",
+                        },
+                        "file_ids": {
+                            "type": "list",
+                        },
+                        "mime_types": {
+                            "type": "list",
+                        },
+                        "folder_path": {
+                            "type": "str",
+                        },
+                        "file_paths": {
+                            "type": "list",
+                        },
+                    },
+                }
             }
         ]
         self.init_args = {
             "client_id" : "",
             "client_secret": None,
             "tenant_id": "consumers",
         }
+        self.init_args_types = {
+            "client_id": "str",
+            "client_secret": "str",
+            "tenant_id": "str",
+        }
 
     def get(self) -> BaseReader:
         """
         Get reader instance
 
         :return: Data reader instance
         """
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/loaders/web_sitemap.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/loaders/web_sitemap.py`

 * *Files 23% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.03.01 02:00:00                  #
+# Updated Date: 2024.04.17 01:00:00                  #
 # ================================================== #
 
 from llama_index.core.readers.base import BaseReader
 from llama_index.readers.web.sitemap.base import SitemapReader
 
 from .base import BaseLoader
 
@@ -19,21 +19,32 @@
     def __init__(self, *args, **kwargs):
         super().__init__(*args, **kwargs)
         self.id = "sitemap"
         self.name = "Sitemap"
         self.type = ["web"]
         self.instructions = [
             {
-                "sitemap": "use it to read sitemap XML from URL, allowed args: `url`: str",
+                "rss": {
+                    "description": "read sitemap XML from URL",
+                    "args": {
+                        "url": {
+                            "type": "str",
+                        },
+                    },
+                }
             }
         ]
         self.init_args = {
             "html_to_text": False,
             "limit": 10,
         }
+        self.init_args_types = {
+            "html_to_text": "bool",
+            "limit": "int",
+        }
 
     def get(self) -> BaseReader:
         """
         Get reader instance
 
         :return: Data reader instance
         """
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/loaders/web_twitter.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/loaders/web_twitter.py`

 * *Files 18% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.03.03 02:00:00                  #
+# Updated Date: 2024.04.17 01:00:00                  #
 # ================================================== #
 
 import json
 
 from llama_index.core.readers.base import BaseReader
 
 from llama_index.readers.twitter.base import TwitterTweetReader
@@ -21,22 +21,35 @@
     def __init__(self, *args, **kwargs):
         super().__init__(*args, **kwargs)
         self.id = "twitter"
         self.name = "Twitter posts"
         self.type = ["web"]
         self.instructions = [
             {
-                "twitter": "use it to read and index users tweets from Twitter/X, allowed additional args: "
-                                "`users`: list, `max_tweets`: int (optional)",
+                "twitter": {
+                    "description": "read and index user tweets from Twitter/X",
+                    "args": {
+                        "users": {
+                            "type": "list",
+                        },
+                        "max_tweets": {
+                            "type": "int",
+                        },
+                    },
+                }
             }
         ]
         self.init_args = {
             "bearer_token" : "",
             "num_tweets": 100,
         }
+        self.init_args_types = {
+            "bearer_token": "str",
+            "num_tweets": "int",
+        }
 
     def get(self) -> BaseReader:
         """
         Get reader instance
 
         :return: Data reader instance
         """
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/vector_stores/__init__.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/vector_stores/__init__.py`

 * *Files 11% similar despite different names*

```diff
@@ -2,24 +2,25 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.03.03 22:00:00                  #
+# Updated Date: 2024.03.08 23:00:00                  #
 # ================================================== #
 
 import hashlib
 
 from llama_index.core.indices.base import BaseIndex
 
 from .base import BaseStore
 from .temp import TempProvider
 
+
 class Storage:
     def __init__(self, window=None):
         """
         Storage handler
 
         :param window: Window instance
         """
@@ -102,32 +103,14 @@
         if storage is None:
             raise Exception('Storage engine not found!')
         return storage.get(
             id=id,
             service_context=service_context,
         )
 
-    def get_tmp(self, path: str, service_context=None) -> BaseIndex:
-        """
-        Get tmp index instance
-
-        :param path: file path
-        :param service_context: service context
-        :return: index instance
-        """
-        # convert path to md5 hash
-        id = hashlib.md5(path.encode()).hexdigest()
-        storage = self.get_tmp_storage()
-        if storage is None:
-            raise Exception('Storage engine not found!')
-        return storage.get(
-            id=id,
-            service_context=service_context,
-        )
-
     def store(self, id: str, index: BaseIndex = None):
         """
         Store index
 
         :param id: index name
         :param index: index instance
         """
@@ -135,29 +118,14 @@
         if storage is None:
             raise Exception('Storage engine not found!')
         storage.store(
             id=id,
             index=index,
         )
 
-    def store_tmp(self, id: str, index: BaseIndex = None):
-        """
-        Store index
-
-        :param id: index name
-        :param index: index instance
-        """
-        storage = self.get_tmp_storage()
-        if storage is None:
-            raise Exception('Storage engine not found!')
-        storage.store(
-            id=id,
-            index=index,
-        )
-
     def remove(self, id: str) -> bool:
         """
         Clear index only
 
         :param id: index name
         :return: True if success
         """
@@ -189,7 +157,62 @@
         storage = self.get_storage()
         if storage is None:
             raise Exception('Storage engine not found!')
         return storage.remove_document(
             id=id,
             doc_id=doc_id,
         )
+
+    def get_tmp(self, identifier: str, service_context=None) -> (str, BaseIndex):
+        """
+        Get tmp index instance
+
+        :param identifier: identifier
+        :param service_context: service context
+        :return: index instance
+        """
+        # convert path to md5 hash
+        id = hashlib.md5(identifier.encode()).hexdigest()
+        storage = self.get_tmp_storage()
+        if storage is None:
+            raise Exception('Storage engine not found!')
+        return id, storage.get(
+            id=id,
+            service_context=service_context,
+        )
+
+    def store_tmp(self, id: str, index: BaseIndex = None):
+        """
+        Store index
+
+        :param id: index name
+        :param index: index instance
+        """
+        storage = self.get_tmp_storage()
+        if storage is None:
+            raise Exception('Storage engine not found!')
+        storage.store(
+            id=id,
+            index=index,
+        )
+
+    def count_tmp(self) -> int:
+        """
+        Count temp indices
+
+        :return: number of temp indices
+        """
+        storage = self.get_tmp_storage()
+        if storage is None:
+            raise Exception('Storage engine not found!')
+        return storage.count()
+
+    def clean_tmp(self, id: str):
+        """
+        Clean temp index
+
+        :param id: index name
+        """
+        storage = self.get_tmp_storage()
+        if storage is None:
+            raise Exception('Storage engine not found!')
+        storage.clean(id)
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/vector_stores/base.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/vector_stores/base.py`

 * *Files 17% similar despite different names*

```diff
@@ -2,21 +2,24 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.28 01:00:00                  #
+# Updated Date: 2024.03.11 01:00:00                  #
 # ================================================== #
+
 import os
 import shutil
 
 from llama_index.core.indices.base import BaseIndex
 from llama_index.core.indices.service_context import ServiceContext
+from llama_index.core import StorageContext
+from llama_index.core.indices.vector_store.base import VectorStoreIndex
 
 
 class BaseStore:
     def __init__(self, *args, **kwargs):
         """
         Base vector store provider
 
@@ -24,14 +27,35 @@
         :param kwargs: kwargs
         """
         self.window = kwargs.get('window', None)
         self.id = None
         self.prefix = ""  # prefix for index directory
         self.indexes = {}
 
+    def index_from_store(self, vector_store, storage_context: StorageContext):
+        """
+        Get index instance
+
+        :param vector_store: vector store instance
+        :param storage_context: StorageContext instance
+        :return: index instance
+        """
+        return VectorStoreIndex.from_vector_store(
+            vector_store,
+            storage_context=storage_context,
+        )
+
+    def index_from_empty(self):
+        """
+        Get empty index instance
+
+        :return: index instance
+        """
+        return VectorStoreIndex([])
+
     def attach(self, window=None):
         """
         Attach window instance
 
         :param window: Window instance
         """
         self.window = window
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/vector_stores/chroma.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/vector_stores/chroma.py`

 * *Files 10% similar despite different names*

```diff
@@ -2,25 +2,24 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.03.03 04:00:00                  #
+# Updated Date: 2024.03.11 01:00:00                  #
 # ================================================== #
 
 import os.path
 import chromadb
 from chromadb.config import Settings
 
 from llama_index.core.indices.base import BaseIndex
 from llama_index.core.indices.service_context import ServiceContext
 from llama_index.core import StorageContext
-from llama_index.core.indices.vector_store.base import VectorStoreIndex
 from llama_index.vector_stores.chroma import ChromaVectorStore
 
 from .base import BaseStore
 
 
 class ChromaProvider(BaseStore):
     def __init__(self, *args, **kwargs):
@@ -55,15 +54,15 @@
         """
         Create empty index
 
         :param id: index name
         """
         path = self.get_path(id)
         if not os.path.exists(path):
-            index = VectorStoreIndex([])  # create empty index
+            index = self.index_from_empty()  # create empty index
             self.store(
                 id=id,
                 index=index,
             )
 
     def get(self, id: str, service_context: ServiceContext = None) -> BaseIndex:
         """
@@ -80,18 +79,15 @@
         chroma_collection = db.get_or_create_collection(id)
         vector_store = ChromaVectorStore(
             chroma_collection=chroma_collection,
         )
         storage_context = StorageContext.from_defaults(
             persist_dir=path,
         )
-        self.indexes[id] = VectorStoreIndex.from_vector_store(
-            vector_store,
-            storage_context=storage_context,
-        )
+        self.indexes[id] = self.index_from_store(vector_store, storage_context)
         return self.indexes[id]
 
     def store(self, id: str, index: BaseIndex = None):
         """
         Store index
 
         :param id: index name
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/vector_stores/elasticsearch.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/vector_stores/elasticsearch.py`

 * *Files 10% similar despite different names*

```diff
@@ -2,24 +2,23 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.28 01:00:00                  #
+# Updated Date: 2024.03.11 01:00:00                  #
 # ================================================== #
 
 import datetime
 import os.path
 
 from llama_index.core.indices.base import BaseIndex
 from llama_index.core.indices.service_context import ServiceContext
 from llama_index.core import StorageContext
-from llama_index.core.indices.vector_store.base import VectorStoreIndex
 from llama_index.vector_stores.elasticsearch import ElasticsearchStore
 
 from pygpt_net.utils import parse_args
 from .base import BaseStore
 
 
 class ElasticsearchProvider(BaseStore):
@@ -78,18 +77,15 @@
         """
         if not self.exists(id):
             self.create(id)
         vector_store = self.get_es_client(id)
         storage_context = StorageContext.from_defaults(
             vector_store=vector_store,
         )
-        self.indexes[id] = VectorStoreIndex.from_vector_store(
-            vector_store,
-            storage_context=storage_context,
-        )
+        self.indexes[id] = self.index_from_store(vector_store, storage_context)
         return self.indexes[id]
 
     def store(self, id: str, index: BaseIndex = None):
         """
         Store index
 
         :param id: index name
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/vector_stores/pinecode.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/vector_stores/pinecode.py`

 * *Files 4% similar despite different names*

```diff
@@ -2,26 +2,25 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.28 01:00:00                  #
+# Updated Date: 2024.03.11 01:00:00                  #
 # ================================================== #
 
 import datetime
 import os.path
 
 from pinecone import Pinecone, ServerlessSpec
 
 from llama_index.core import StorageContext
 from llama_index.core.indices.base import BaseIndex
 from llama_index.core.indices.service_context import ServiceContext
-from llama_index.core.indices.vector_store.base import VectorStoreIndex
 from llama_index.vector_stores.pinecone import PineconeVectorStore
 
 from pygpt_net.utils import parse_args
 from .base import BaseStore
 
 
 class PinecodeProvider(BaseStore):
@@ -133,18 +132,15 @@
         """
         if not self.exists(id):
             self.create(id)
         vector_store = self.get_store(id)
         storage_context = StorageContext.from_defaults(
             vector_store=vector_store,
         )
-        self.indexes[id] = VectorStoreIndex.from_vector_store(
-            vector_store,
-            storage_context=storage_context,
-        )
+        self.indexes[id] = self.index_from_store(vector_store, storage_context)
         return self.indexes[id]
 
     def store(self, id: str, index: BaseIndex = None):
         """
         Store index
 
         :param id: index name
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/vector_stores/redis.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/vector_stores/redis.py`

 * *Files 10% similar despite different names*

```diff
@@ -2,24 +2,23 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.28 01:00:00                  #
+# Updated Date: 2024.03.11 01:00:00                  #
 # ================================================== #
 
 import datetime
 import os.path
 
 from llama_index.core import StorageContext
 from llama_index.core.indices.base import BaseIndex
 from llama_index.core.indices.service_context import ServiceContext
-from llama_index.core.indices.vector_store.base import VectorStoreIndex
 from llama_index.vector_stores.redis import RedisVectorStore
 
 from pygpt_net.utils import parse_args
 from .base import BaseStore
 
 
 class RedisProvider(BaseStore):
@@ -78,18 +77,15 @@
         """
         if not self.exists(id):
             self.create(id)
         vector_store = self.get_store(id)
         storage_context = StorageContext.from_defaults(
             vector_store=vector_store,
         )
-        self.indexes[id] = VectorStoreIndex.from_vector_store(
-            vector_store,
-            storage_context=storage_context,
-        )
+        self.indexes[id] = self.index_from_store(vector_store, storage_context)
         return self.indexes[id]
 
     def store(self, id: str, index: BaseIndex = None):
         """
         Store index
 
         :param id: index name
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/vector_stores/simple.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/vector_stores/simple.py`

 * *Files 12% similar despite different names*

```diff
@@ -2,23 +2,22 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.27 22:00:00                  #
+# Updated Date: 2024.03.11 01:00:00                  #
 # ================================================== #
 
 import os.path
 
 from llama_index.core import StorageContext, load_index_from_storage
 from llama_index.core.indices.base import BaseIndex
 from llama_index.core.indices.service_context import ServiceContext
-from llama_index.core.indices.vector_store.base import VectorStoreIndex
 
 from .base import BaseStore
 
 
 class SimpleProvider(BaseStore):
     def __init__(self, *args, **kwargs):
         super(SimpleProvider, self).__init__(*args, **kwargs)
@@ -37,15 +36,15 @@
         """
         Create empty index
 
         :param id: index name
         """
         path = self.get_path(id)
         if not os.path.exists(path):
-            index = VectorStoreIndex([])  # create empty index
+            index = self.index_from_empty()  # create empty index
             self.store(
                 id=id,
                 index=index,
             )
 
     def get(self, id: str, service_context: ServiceContext = None) -> BaseIndex:
         """
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/vector_stores/temp.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/vector_stores/temp.py`

 * *Files 15% similar despite different names*

```diff
@@ -2,23 +2,22 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.03.03 22:00:00                  #
+# Updated Date: 2024.03.11 01:00:00                  #
 # ================================================== #
 
 import os.path
 
 from llama_index.core import StorageContext, load_index_from_storage
 from llama_index.core.indices.base import BaseIndex
 from llama_index.core.indices.service_context import ServiceContext
-from llama_index.core.indices.vector_store.base import VectorStoreIndex
 
 from .base import BaseStore
 
 
 class TempProvider(BaseStore):
     def __init__(self, *args, **kwargs):
         super(TempProvider, self).__init__(*args, **kwargs)
@@ -30,14 +29,22 @@
         """
         self.window = kwargs.get('window', None)
         self.id = "TempVectorStore"
         self.prefix = ""  # prefix for index directory
         self.indexes = {}
         self.persist = False
 
+    def count(self) -> int:
+        """
+        Count indexes
+
+        :return: number of indexes
+        """
+        return len(self.indexes)
+
     def get_path(self, id: str) -> str:
         """
         Get database path
 
         :param id: index name
         :return: database path
         """
@@ -81,21 +88,21 @@
         Create empty index
 
         :param id: index name
         """
         if self.persist:
             path = self.get_path(id)
             if not os.path.exists(path):
-                index = VectorStoreIndex([])  # create empty index
+                index = self.index_from_empty()  # create empty index
                 self.store(
                     id=id,
                     index=index,
                 )
         else:
-            self.indexes[id] = VectorStoreIndex([])
+            self.indexes[id] = self.index_from_empty()
 
     def get(self, id: str, service_context: ServiceContext = None) -> BaseIndex:
         """
         Get index
 
         :param id: tmp idx id
         :param service_context: Service context
@@ -130,7 +137,22 @@
         if index is None:
             index = self.indexes[id]
         path = self.get_path(id)
         index.storage_context.persist(
             persist_dir=path,
         )
         self.indexes[id] = index
+
+    def clean(self, id: str):
+        """
+        Clean index
+
+        :param id: index name
+        """
+        if not self.persist:
+            if id in self.indexes:
+                del self.indexes[id]
+            return
+
+        path = self.get_path(id)
+        if os.path.exists(path):
+            os.remove(path)
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/web/base.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/web/base.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/web/google_custom_search.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/web/google_custom_search.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/provider/web/microsoft_bing.py` & `pygpt_net-2.2.0/src/pygpt_net/provider/web/microsoft_bing.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/ui/__init__.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/__init__.py`

 * *Files 10% similar despite different names*

```diff
@@ -2,23 +2,24 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.01.29 16:00:00                  #
+# Updated Date: 2024.04.09 23:00:00                  #
 # ================================================== #
 
 import os
 
 from PySide6.QtCore import Qt
 from PySide6.QtGui import QFontDatabase, QIcon
 from PySide6.QtWidgets import QSplitter, QMessageBox
 
+from pygpt_net.ui.base.context_menu import ContextMenu
 from pygpt_net.ui.dialogs import Dialogs
 from pygpt_net.ui.layout.chat import ChatMain
 from pygpt_net.ui.layout.ctx import CtxMain
 from pygpt_net.ui.layout.toolbox import ToolboxMain
 from pygpt_net.ui.menu import Menu
 from pygpt_net.ui.tray import Tray
 
@@ -56,14 +57,15 @@
         self.paths = {}
         self.plugin_addon = {}
         self.splitters = {}
         self.tabs = {}
         self.tray_menu = {}
 
         # builders
+        self.context_menu = ContextMenu(window)
         self.chat = ChatMain(window)
         self.contexts = CtxMain(window)
         self.dialogs = Dialogs(window)
         self.menus = Menu(window)
         self.toolbox = ToolboxMain(window)
         self.tray = Tray(window)
 
@@ -96,45 +98,66 @@
         # dialogs
         self.dialogs.setup()
 
         # set central widget
         self.window.setCentralWidget(self.window.ui.splitters['main'])
 
         # set window title
+        self.update_title()
+
+    def update_title(self):
+        """Update window title"""
+        suffix = self.window.core.platforms.get_env_suffix()
+        profile_name = self.window.core.config.profile.get_current_name()
         self.window.setWindowTitle(
-            'PyGPT - Desktop AI Assistant v{} | build {}'.format(self.window.meta['version'],
-                                                                 self.window.meta['build'])
+            'PyGPT - Desktop AI Assistant v{} | build {}{} ({})'.format(
+                self.window.meta['version'],
+                self.window.meta['build'],
+                suffix,
+                profile_name,
+            )
         )
 
     def post_setup(self):
         """Post setup UI (just before show)"""
+        self.menus.post_setup()
         self.dialogs.post_setup()
 
     def status(self, text):
         """
         Update status text
 
         :param text: status text
         """
         msg = str(text)
+        msg = msg.replace("\n", " ")
         status = msg[:self.STATUS_MAX_CHARS] + '...' if len(msg) > self.STATUS_MAX_CHARS else msg  # truncate
         self.nodes['status'].setText(status)
 
     def setup_font(self):
-        """Setup UI font"""
-        path = os.path.join(
-            self.window.core.config.get_app_path(),
-            'data',
-            'fonts',
-            'Lato',
-            'Lato-Regular.ttf'
-        )
-        font_id = QFontDatabase.addApplicationFont(path)
-        if font_id == -1:
-            print("Error loading font file {}".format(path))
+        """Load and setup UI fonts"""
+        extensions = [
+            "ttf",
+            "otf",
+        ]
+        # fonts dirs
+        dirs = [
+            os.path.join(self.window.core.config.get_app_path(), 'data', 'fonts'),  # app fonts
+            os.path.join(self.window.core.config.get_user_path(), 'fonts'),  # user fonts
+        ]
+        # load fonts
+        for dir in dirs:
+            if os.path.exists(dir) and os.path.isdir(dir):
+                for root, _, files in os.walk(dir):
+                    for file in files:
+                        if file.split('.')[-1].lower() in extensions:
+                            path = os.path.join(root, file)
+                            font_id = QFontDatabase.addApplicationFont(path)
+                            if font_id == -1:
+                                print("Error loading font file {}".format(file))
 
     def msg(self, msg: str):
         """
         Show message box
 
         :param msg: Message
         """
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/ui/base/config_dialog.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/base/config_dialog.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/ui/dialog/about.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/dialog/about.py`

 * *Files 2% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.27 22:00:00                  #
+# Updated Date: 2024.04.11 22:00:00                  #
 # ================================================== #
 
 import os
 
 from PySide6.QtGui import QPixmap, Qt
 from PySide6.QtWidgets import QVBoxLayout, QLabel, QPushButton, QHBoxLayout, QPlainTextEdit
 
@@ -30,16 +30,22 @@
     def get_contributors(self) -> list:
         """
         Get contributors list
 
         :return: contributors list
         """
         return [
+            "BillionShields",
+            "gfsysa",
+            "glinkot",
             "kaneda2004",
+            "linnflux",
             "moritz-t-w",
+            "oleksii-honchar",
+            "yf007",
         ]
 
     def prepare_content(self) -> str:
         """
         Get info text
 
         :return: info text
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/ui/dialog/applog.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/dialog/applog.py`

 * *Files 9% similar despite different names*

```diff
@@ -2,24 +2,25 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.14 16:00:00                  #
+# Updated Date: 2024.03.25 12:00:00                  #
 # ================================================== #
 
 import os
 
 from PySide6.QtGui import QTextCursor, Qt
-from PySide6.QtWidgets import QPlainTextEdit, QPushButton, QHBoxLayout, QLabel, QVBoxLayout
+from PySide6.QtWidgets import QPushButton, QHBoxLayout, QLabel, QVBoxLayout
 
 from pygpt_net.ui.widget.dialog.applog import AppLogDialog
 from pygpt_net.ui.widget.element.labels import TitleLabel
+from pygpt_net.ui.widget.textarea.editor import CodeEditor
 
 
 class AppLog:
     def __init__(self, window=None):
         """
         App log dialog
 
@@ -27,16 +28,17 @@
         """
         self.window = window
 
     def setup(self):
         """Setup app log dialog"""
         id = 'app.log'
 
-        self.window.ui.editor[id] = QPlainTextEdit()
+        self.window.ui.editor[id] = CodeEditor(self.window)
         self.window.ui.editor[id].setReadOnly(True)
+        self.window.ui.editor[id].setProperty('class', 'text-editor')
 
         self.window.ui.nodes['editor.app.log.btn.open'] = QPushButton("OPEN (EXTERNAL)")
         self.window.ui.nodes['editor.app.log.btn.clear'] = QPushButton("CLEAR")
         self.window.ui.nodes['editor.app.log.btn.reload'] = QPushButton("RELOAD")
 
         self.window.ui.nodes['editor.app.log.btn.open'].clicked.connect(
             lambda: self.open_external())
@@ -71,28 +73,40 @@
         self.window.ui.dialog['app.log'].setWindowTitle("app.log")
 
     def update_log_level(self):
         """Update log level"""
         level = self.window.core.debug.get_log_level_name().upper()
         self.window.ui.nodes['dialog.app.log.level'].setText("Log level: " + level)
 
-    def reload(self):
-        """Reload app.log file"""
+    def update(self):
+        """Update app log dialog"""
+        self.window.ui.nodes['dialog.app.log.label'].setText(self.get_log_path())
+        self.update_log_level()
+        self.reload(show=False)
+
+    def reload(self, show: bool = True):
+        """
+        Reload app.log file
+
+        :param show: show dialog
+        """
         path = self.get_log_path()
 
         # load data from log file
         if os.path.exists(path):
             try:
                 with open(path, 'rb') as file:
                     content_bytes = file.read()
                     content = content_bytes.decode('utf-8', errors='ignore')
                     self.window.ui.editor['app.log'].setPlainText(content)
             except Exception as e:
                 print(e)
-        self.window.ui.dialog['app.log'].show()
+
+        if show:
+            self.window.ui.dialog['app.log'].show()
 
         # scroll to the end
         cursor = self.window.ui.editor['app.log'].textCursor()
         cursor.movePosition(QTextCursor.End)
         self.window.ui.editor['app.log'].setTextCursor(cursor)
 
     def get_log_path(self) -> str:
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/ui/dialog/assistant.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/dialog/assistant.py`

 * *Files 10% similar despite different names*

```diff
@@ -2,19 +2,20 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.15 01:00:00                  #
+# Updated Date: 2024.04.28 07:00:00                  #
 # ================================================== #
 
 from PySide6.QtCore import Qt
-from PySide6.QtWidgets import QPushButton, QHBoxLayout, QLabel, QVBoxLayout, QSplitter, QWidget, QSizePolicy
+from PySide6.QtGui import QIcon
+from PySide6.QtWidgets import QPushButton, QHBoxLayout,  QVBoxLayout, QSplitter, QWidget, QSizePolicy
 
 from pygpt_net.ui.base.config_dialog import BaseConfigDialog
 from pygpt_net.ui.widget.dialog.editor import EditorDialog
 from pygpt_net.utils import trans
 
 
 class Assistant(BaseConfigDialog):
@@ -31,17 +32,32 @@
 
     def setup(self):
         """Setups assistant editor dialog"""
         self.window.ui.nodes['assistant.btn.save'] = QPushButton(trans("dialog.assistant.btn.save"))
         self.window.ui.nodes['assistant.btn.save'].clicked.connect(
             lambda: self.window.controller.assistant.editor.save()
         )
+        self.window.ui.nodes['assistant.btn.close'] = QPushButton(trans("dialog.assistant.btn.close"))
+        self.window.ui.nodes['assistant.btn.close'].clicked.connect(
+            lambda: self.window.controller.assistant.editor.close()
+        )
+
+
+        # store
+        self.window.ui.nodes['assistant.btn.store.editor'] = QPushButton(QIcon(":/icons/db.svg"), "")
+        self.window.ui.nodes['assistant.btn.store.editor'].setToolTip(trans('dialog.assistant.store'))
+        self.window.ui.nodes['assistant.btn.store.editor'].clicked.connect(
+            lambda: self.window.controller.assistant.store.toggle_editor()
+        )
+
+        self.window.ui.nodes['assistant.btn.store.editor'].setAutoDefault(False)
         self.window.ui.nodes['assistant.btn.save'].setAutoDefault(True)
 
         footer = QHBoxLayout()
+        footer.addWidget(self.window.ui.nodes['assistant.btn.close'])
         footer.addWidget(self.window.ui.nodes['assistant.btn.save'])
 
         # get option fields config
         fields = self.window.controller.assistant.editor.get_options()
 
         # build settings widgets
         widgets = self.build_widgets(self.id, fields)  # from base config dialog
@@ -50,33 +66,14 @@
         for key in widgets:
             self.window.ui.config[self.id][key] = widgets[key]
 
         # btn: add function
         self.window.ui.config[self.id]['tool.function'].add_btn.setText(trans('assistant.func.add'))
         # Empty params: {"type": "object", "properties": {}}
 
-        # set tips
-        self.window.ui.nodes['assistant.id_tip'] = QLabel(trans('assistant.new.id_tip'))
-        self.window.ui.nodes['assistant.id_tip'].setMinimumHeight(40)
-
-        self.window.ui.nodes['assistant.api.tip'] = QPushButton(trans('assistant.api.tip'))  # TODO: url btn
-        self.window.ui.nodes['assistant.api.tip'].setAutoDefault(False)
-        self.window.ui.nodes['assistant.api.tip'].setFlat(True)
-        self.window.ui.nodes['assistant.api.tip'].setStyleSheet(
-            "text-align: left; "
-            "color: #fff; "
-            "text-decoration: underline; "
-            "text-transform: none;"
-        )
-        self.window.ui.nodes['assistant.api.tip'].setStyleSheet("text-transform: none;")
-        self.window.ui.nodes['assistant.api.tip'].setCursor(Qt.PointingHandCursor)
-        self.window.ui.nodes['assistant.api.tip'].clicked.connect(
-            lambda: self.window.controller.assistant.goto_online()
-        )
-
         # apply widgets to layouts
         options = {}
         for key in widgets:
             if fields[key]["type"] == 'text' or fields[key]["type"] == 'int' or fields[key]["type"] == 'float':
                 options[key] = self.add_option(widgets[key], fields[key])
             elif fields[key]["type"] == 'textarea':
                 options[key] = self.add_row_option(widgets[key], fields[key])
@@ -86,42 +83,48 @@
                 options[key] = self.add_row_option(widgets[key], fields[key])
                 if key == "tool.function":
                     widgets[key].setMinimumHeight(150)
             elif fields[key]["type"] == 'combo':
                 options[key] = self.add_option(widgets[key], fields[key])
 
         self.window.ui.nodes['assistant.tool.function.label'].setVisible(False)  # hide label
-        self.window.ui.nodes['assistant.id_tip'].setAlignment(Qt.AlignCenter)
 
-        options["tool.code_interpreter"].setAlignment(Qt.AlignCenter)
-        options["tool.retrieval"].setAlignment(Qt.AlignCenter)
+        options["tool.code_interpreter"].setAlignment(Qt.AlignLeft)
+        options["tool.file_search"].setAlignment(Qt.AlignLeft)
 
+        # base
         rows = QVBoxLayout()
         rows.addLayout(options["id"])
         rows.addLayout(options["name"])
         rows.addLayout(options["description"])
         rows.addLayout(options["model"])
-        rows.addWidget(self.window.ui.nodes['assistant.id_tip'])
-        rows.addWidget(self.window.ui.nodes['assistant.api.tip'])
+
+        store_layout = QHBoxLayout()
+        store_layout.addLayout(options["vector_store"])
+        store_layout.addWidget(self.window.ui.nodes['assistant.btn.store.editor'])
+        rows.addLayout(store_layout)
         rows.setContentsMargins(0, 0, 0, 0)
 
+        # tools
         rows_tools = QHBoxLayout()
+
         rows_tools.addLayout(options["tool.code_interpreter"])
-        rows_tools.addLayout(options["tool.retrieval"])
+        rows_tools.addLayout(options["tool.file_search"])
         rows_tools.setContentsMargins(0, 0, 0, 0)
 
         rows.addLayout(rows_tools)
         rows.addStretch()
 
         widget_base = QWidget()
         widget_base.setLayout(rows)
 
         widget_base.setMinimumWidth(400)
         widget_base.setMaximumWidth(450)
 
+        # prompt
         widget_prompt = QWidget()
         widget_prompt.setLayout(options["instructions"])
         widget_prompt.setSizePolicy(QSizePolicy.Expanding, QSizePolicy.Expanding)
 
         options["instructions"].setContentsMargins(0, 0, 0, 0)
         options["tool.function"].setContentsMargins(0, 0, 0, 0)
 
@@ -133,20 +136,22 @@
         main.addWidget(widget_base)
         main.addWidget(widget_tools)
         main.setContentsMargins(0, 0, 0, 0)
 
         widget_main = QWidget()
         widget_main.setLayout(main)
 
+        # splitters
         self.window.ui.splitters['editor.assistant'] = QSplitter(Qt.Vertical)
         self.window.ui.splitters['editor.assistant'].addWidget(widget_main)
         self.window.ui.splitters['editor.assistant'].addWidget(widget_prompt)
         self.window.ui.splitters['editor.assistant'].setStretchFactor(0, 1)
         self.window.ui.splitters['editor.assistant'].setStretchFactor(1, 2)
 
         layout = QVBoxLayout()
         layout.addWidget(self.window.ui.splitters['editor.assistant'])
         layout.addLayout(footer)
 
+        # dialog
         self.window.ui.dialog['editor.' + self.dialog_id] = EditorDialog(self.window, self.dialog_id)
         self.window.ui.dialog['editor.' + self.dialog_id].setLayout(layout)
         self.window.ui.dialog['editor.' + self.dialog_id].setWindowTitle(trans('dialog.assistant'))
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/ui/dialog/changelog.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/dialog/changelog.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/ui/dialog/create.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/dialog/create.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/ui/dialog/debug.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/dialog/debug.py`

 * *Files 16% similar despite different names*

```diff
@@ -2,22 +2,23 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.26 22:00:00                  #
+# Updated Date: 2024.03.18 03:00:00                  #
 # ================================================== #
 
 from PySide6.QtCore import Qt
 from PySide6.QtWidgets import QGridLayout, QScrollArea, QSplitter, QPlainTextEdit
 
 from pygpt_net.ui.widget.dialog.debug import DebugDialog
 from pygpt_net.ui.widget.lists.debug import DebugList
+from pygpt_net.ui.widget.textarea.editor import CodeEditor
 
 
 class Debug:
     def __init__(self, window=None):
         """
         Debug setup
 
@@ -34,15 +35,15 @@
         self.window.ui.debug[id] = DebugList(self.window)
 
         scroll = QScrollArea()
         scroll.setWidget(self.window.ui.debug[id])
         scroll.setWidgetResizable(True)
 
         # data viewer
-        viewer = QPlainTextEdit()
+        viewer = CodeEditor(self.window)
         viewer.setReadOnly(True)
         self.window.ui.debug[id].viewer = viewer
 
         splitter = QSplitter(Qt.Horizontal)
         splitter.addWidget(scroll)
         splitter.addWidget(viewer)
         splitter.setStretchFactor(0, 3)
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/ui/dialog/dictionary.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/dialog/dictionary.py`

 * *Files 3% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.01.31 18:00:00                  #
+# Updated Date: 2024.03.12 06:00:00                  #
 # ================================================== #
 
 from PySide6.QtWidgets import QPushButton, QHBoxLayout, QVBoxLayout, QScrollArea, QWidget, QSizePolicy
 
 from pygpt_net.ui.base.config_dialog import BaseConfigDialog
 from pygpt_net.ui.widget.dialog.editor import EditorDialog
 from pygpt_net.utils import trans
@@ -47,22 +47,33 @@
 
     def setup(self):
         """Setup dictionary editor dialogs"""
         for dict_id in self.dicts:
             parent_id = self.id + "." + dict_id
             option_key = self.keys[dict_id]
             parent = self.parents[dict_id]
-            fields = self.dicts[dict_id]
+            data = self.dicts[dict_id]
             self.window.ui.config[parent_id] = {}
 
             # widgets
-            fields = self.window.controller.config.dictionary.to_options(
-                parent_id,
-                fields,
-            )  # item to options
+            fields = {}
+
+            # option type: dict
+            if data["type"] == 'dict':
+                fields = self.window.controller.config.dictionary.to_options(
+                    parent_id,
+                    data,
+                )  # item to options
+
+            # option type: cmd
+            elif data["type"] == 'cmd':
+                fields = self.window.controller.config.cmd.to_options(
+                    parent_id,
+                    data,
+                )  # item to options
 
             widgets = self.build_widgets(
                 parent_id,
                 fields,
                 stretch=True,
             )  # from base config dialog
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/ui/dialog/editor.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/dialog/editor.py`

 * *Files 10% similar despite different names*

```diff
@@ -2,21 +2,22 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.01.27 11:00:00                  #
+# Updated Date: 2024.04.09 23:00:00                  #
 # ================================================== #
 
-from PySide6.QtWidgets import QPlainTextEdit, QPushButton, QHBoxLayout, QLabel, QVBoxLayout
+from PySide6.QtWidgets import QPushButton, QHBoxLayout, QLabel, QVBoxLayout
 
 from pygpt_net.ui.widget.dialog.editor_file import EditorFileDialog
-from pygpt_net.ui.widget.element.labels import TitleLabel
+from pygpt_net.ui.widget.element.labels import HelpLabel
+from pygpt_net.ui.widget.textarea.editor import CodeEditor
 from pygpt_net.utils import trans
 
 
 class Editor:
     def __init__(self, window=None):
         """
         Editor dialog
@@ -25,34 +26,43 @@
         """
         self.window = window
 
     def setup(self):
         """Setup config editor dialog"""
         id = 'config'
 
-        self.window.ui.editor[id] = QPlainTextEdit()
+        self.window.ui.editor[id] = CodeEditor(self.window)
         self.window.ui.editor[id].setReadOnly(False)
+        self.window.ui.editor[id].setProperty('class', 'code-editor')
 
-        self.window.ui.nodes['editor.btn.default'] = QPushButton(trans("dialog.editor.btn.defaults"))
+        self.window.ui.nodes['editor.btn.restore'] = QPushButton(trans("dialog.editor.btn.defaults"))
+        self.window.ui.nodes['editor.btn.default'] = QPushButton(trans("dialog.editor.btn.defaults.app"))
         self.window.ui.nodes['editor.btn.save'] = QPushButton(trans("dialog.editor.btn.save"))
+
+        self.window.ui.nodes['editor.btn.restore'].clicked.connect(
+            lambda: self.window.controller.settings.editor.load_editor_defaults_user()
+        )
         self.window.ui.nodes['editor.btn.default'].clicked.connect(
-            lambda: self.window.core.settings.load_default_editor())
+            lambda: self.window.controller.settings.editor.load_editor_defaults_app()
+        )
         self.window.ui.nodes['editor.btn.save'].clicked.connect(
             lambda: self.window.core.settings.save_editor())
 
         bottom_layout = QHBoxLayout()
         bottom_layout.addWidget(self.window.ui.nodes['editor.btn.default'])
+        bottom_layout.addWidget(self.window.ui.nodes['editor.btn.restore'])
         bottom_layout.addWidget(self.window.ui.nodes['editor.btn.save'])
 
-        self.window.ui.paths[id] = TitleLabel("")
+        self.window.ui.paths[id] = HelpLabel("")
+        self.window.ui.paths[id].setWordWrap(False)
 
         self.window.ui.nodes['dialog.editor.label'] = QLabel(trans('dialog.editor.label'))
 
         layout = QVBoxLayout()
         layout.addWidget(self.window.ui.nodes['dialog.editor.label'])
-        layout.addWidget(self.window.ui.paths[id])
         layout.addWidget(self.window.ui.editor['config'])
+        layout.addWidget(self.window.ui.paths[id])
         layout.addLayout(bottom_layout)
 
         self.window.ui.dialog['config.editor'] = EditorFileDialog(self.window)
         self.window.ui.dialog['config.editor'].setLayout(layout)
-        self.window.ui.dialog['config.editor'].setWindowTitle(trans('dialog.editor.title'))
+        self.window.ui.dialog['config.editor'].setWindowTitle(trans('dialog.editor.title'))
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/ui/dialog/image.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/dialog/image.py`

 * *Files 7% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.01.19 18:00:00                  #
+# Updated Date: 2024.03.26 15:00:00                  #
 # ================================================== #
 
 from PySide6.QtWidgets import QVBoxLayout, QHBoxLayout, QCheckBox
 
 from pygpt_net.ui.widget.dialog.image import ImageDialog
 from pygpt_net.ui.widget.image.display import ImageLabel
 from pygpt_net.utils import trans
@@ -45,15 +45,16 @@
 
         state = False
         if self.window.core.config.has('img_dialog_open'):
             state = bool(self.window.core.config.get('img_dialog_open'))
         self.window.ui.nodes['dialog.image.open.toggle'] = QCheckBox(trans('settings.img_dialog_open'), self.window)
         self.window.ui.nodes['dialog.image.open.toggle'].setChecked(state)
         self.window.ui.nodes['dialog.image.open.toggle'].clicked.connect(
-            lambda: self.toggle_dialog_auto_open())
+            lambda: self.toggle_dialog_auto_open()
+        )
 
         layout = QVBoxLayout()
         layout.addLayout(row_one)
         layout.addLayout(row_two)
         layout.addWidget(self.window.ui.nodes['dialog.image.open.toggle'])
 
         self.window.ui.dialog[id] = ImageDialog(self.window, id)
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/ui/dialog/license.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/dialog/license.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/ui/dialog/logger.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/dialog/logger.py`

 * *Files 14% similar despite different names*

```diff
@@ -2,36 +2,38 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.01.27 17:00:00                  #
+# Updated Date: 2024.03.25 12:00:00                  #
 # ================================================== #
 
-from PySide6.QtWidgets import QPushButton, QHBoxLayout, QVBoxLayout, QTextBrowser
+from PySide6.QtWidgets import QPushButton, QHBoxLayout, QVBoxLayout
 
 from pygpt_net.ui.widget.dialog.logger import LoggerDialog
+from pygpt_net.ui.widget.textarea.editor import CodeEditor
 from pygpt_net.utils import trans
 
 
 class Logger:
     def __init__(self, window=None):
         """
         Logger dialog
 
         :param window: Window instance
         """
         self.window = window
 
     def setup(self):
         """Setup logger dialog"""
-        self.window.logger = QTextBrowser()
+        self.window.logger = CodeEditor(self.window)
         self.window.logger.setReadOnly(True)
+        self.window.logger.setProperty('class', 'text-editor')
 
         self.window.ui.nodes['logger.btn.clear'] = QPushButton(trans("dialog.logger.btn.clear"))
         self.window.ui.nodes['logger.btn.clear'].clicked.connect(
             lambda: self.window.controller.debug.clear_logger())
 
         bottom_layout = QHBoxLayout()
         bottom_layout.addWidget(self.window.ui.nodes['logger.btn.clear'])
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/ui/dialog/models.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/dialog/models.py`

 * *Files 5% similar despite different names*

```diff
@@ -9,15 +9,16 @@
 # Updated Date: 2024.02.14 15:00:00                  #
 # ================================================== #
 
 import copy
 
 from PySide6.QtCore import Qt
 from PySide6.QtGui import QStandardItemModel
-from PySide6.QtWidgets import QPushButton, QHBoxLayout, QLabel, QVBoxLayout, QScrollArea, QWidget, QTabWidget, QFrame
+from PySide6.QtWidgets import QPushButton, QHBoxLayout, QLabel, QVBoxLayout, QScrollArea, QWidget, QTabWidget, QFrame, \
+    QSplitter, QSizePolicy
 
 from pygpt_net.item.model import ModelItem
 from pygpt_net.ui.widget.dialog.model import ModelDialog
 from pygpt_net.ui.widget.element.group import CollapsedGroup
 from pygpt_net.ui.widget.element.labels import UrlLabel
 from pygpt_net.ui.widget.lists.model_editor import ModelEditorList
 from pygpt_net.ui.widget.option.checkbox import OptionCheckbox
@@ -146,19 +147,26 @@
         self.window.ui.models[id] = self.create_model(self.window)
         self.window.ui.nodes[id].setModel(self.window.ui.models[id])
 
         # update models list
         self.update_list(id, data)
 
         # set max width to list
-        self.window.ui.nodes[id].setMaximumWidth(250)
+        self.window.ui.nodes[id].setMinimumWidth(250)
+
+        # splitter
+        self.window.ui.splitters['dialog.models'] = QSplitter(Qt.Horizontal)
+        self.window.ui.splitters['dialog.models'].addWidget(self.window.ui.nodes[id])  # list
+        self.window.ui.splitters['dialog.models'].addWidget(area_widget)  # tabs
+        self.window.ui.splitters['dialog.models'].setStretchFactor(0, 2)
+        self.window.ui.splitters['dialog.models'].setStretchFactor(1, 5)
+        self.window.ui.splitters['dialog.models'].setSizePolicy(QSizePolicy.Expanding, QSizePolicy.Expanding)
 
         main_layout = QHBoxLayout()
-        main_layout.addWidget(self.window.ui.nodes[id])
-        main_layout.addWidget(area_widget)
+        main_layout.addWidget(self.window.ui.splitters['dialog.models'])
 
         layout = QVBoxLayout()
         layout.addLayout(main_layout)  # list + model tabs
         layout.addLayout(footer)  # bottom buttons (save, defaults)
 
         self.window.ui.dialog[self.dialog_id] = ModelDialog(self.window, self.dialog_id)
         self.window.ui.dialog[self.dialog_id].setLayout(layout)
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/ui/dialog/plugins.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/dialog/plugins.py`

 * *Files 6% similar despite different names*

```diff
@@ -2,27 +2,29 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.03.02 20:00:00                  #
+# Updated Date: 2024.03.12 06:00:00                  #
 # ================================================== #
 
 from PySide6.QtCore import Qt
 from PySide6.QtGui import QStandardItemModel
-from PySide6.QtWidgets import QPushButton, QHBoxLayout, QLabel, QVBoxLayout, QScrollArea, QWidget, QTabWidget, QFrame
+from PySide6.QtWidgets import QPushButton, QHBoxLayout, QLabel, QVBoxLayout, QScrollArea, QWidget, QTabWidget, QFrame, \
+    QSplitter, QSizePolicy
 
 from pygpt_net.plugin.base import BasePlugin
 from pygpt_net.ui.widget.dialog.settings_plugin import PluginSettingsDialog
 from pygpt_net.ui.widget.element.group import CollapsedGroup
 from pygpt_net.ui.widget.element.labels import UrlLabel, HelpLabel
 from pygpt_net.ui.widget.lists.plugin import PluginList
 from pygpt_net.ui.widget.option.checkbox import OptionCheckbox
+from pygpt_net.ui.widget.option.cmd import OptionCmd
 from pygpt_net.ui.widget.option.combo import OptionCombo
 from pygpt_net.ui.widget.option.dictionary import OptionDict
 from pygpt_net.ui.widget.option.input import OptionInput, PasswordInput
 from pygpt_net.ui.widget.option.slider import OptionSlider
 from pygpt_net.ui.widget.option.textarea import OptionTextarea
 from pygpt_net.utils import trans
 
@@ -116,14 +118,15 @@
                     continue
 
                 tab_id = "general"
                 if 'tab' in options[key]:
                     tab = options[key]['tab']
                     if tab is not None and tab != "":
                         tab_id = tab
+
                 content_tabs[tab_id].addLayout(
                     self.add_option(
                         plugin,
                         widgets[key],
                         options[key],
                     )
                 )  # add to scroll
@@ -138,37 +141,40 @@
 
                     tab_id = "general"
                     if 'tab' in options[key]:
                         tab = options[key]['tab']
                         if tab is not None and tab != "":
                             tab_id = tab
                     if tab_id not in groups:
-                        groups[tab_id] = CollapsedGroup(self.window, group_id, None, False, None)
+                        full_id = group_id + '.' + tab_id
+                        groups[tab_id] = CollapsedGroup(self.window, full_id, None, False, None)
                         groups[tab_id].box.setText(trans('settings.advanced.collapse'))
 
                     option = self.add_option(plugin, widgets[key], options[key])  # build option
                     groups[tab_id].add_layout(option)  # add option to group
 
                 # add advanced options group to scrolls
                 for tab_id in groups:
+                    full_id = group_id + '.' + tab_id
                     content_tabs[tab_id].addWidget(groups[tab_id])
-                    self.window.ui.groups[group_id] = groups[tab_id]
+                    self.window.ui.groups[full_id] = groups[tab_id]
 
             # add stretch to the end of every option tab
             for tab_id in content_tabs:
                 content_tabs[tab_id].addStretch()
 
             # set description, translate if localization is enabled
             name_txt = plugin.name
             desc_key = 'plugin.settings.' + id + '.desc'
             desc_txt = plugin.description
             if plugin.use_locale:
                 domain = 'plugin.' + plugin.id
                 name_txt = trans('plugin.name', False, domain)
                 desc_txt = trans('plugin.description', False, domain)
+
             self.window.ui.nodes[desc_key] = QLabel(desc_txt)
             self.window.ui.nodes[desc_key].setWordWrap(True)
             self.window.ui.nodes[desc_key].setAlignment(Qt.AlignCenter)
             self.window.ui.nodes[desc_key].setStyleSheet("font-weight: bold;")
 
             line = self.add_line()
 
@@ -231,19 +237,26 @@
         self.window.ui.models[id] = self.create_model(self.window)
         self.window.ui.nodes[id].setModel(self.window.ui.models[id])
 
         # update plugins list
         self.update_list(id, data)
 
         # set max width to list
-        self.window.ui.nodes[id].setMaximumWidth(self.max_list_width)
+        self.window.ui.nodes[id].setMinimumWidth(self.max_list_width)
+
+        # splitter
+        self.window.ui.splitters['dialog.plugins'] = QSplitter(Qt.Horizontal)
+        self.window.ui.splitters['dialog.plugins'].addWidget(self.window.ui.nodes[id])  # list
+        self.window.ui.splitters['dialog.plugins'].addWidget(self.window.ui.tabs['plugin.settings'])  # tabs
+        self.window.ui.splitters['dialog.plugins'].setStretchFactor(0, 2)
+        self.window.ui.splitters['dialog.plugins'].setStretchFactor(1, 5)
+        self.window.ui.splitters['dialog.plugins'].setSizePolicy(QSizePolicy.Expanding, QSizePolicy.Expanding)
 
         main_layout = QHBoxLayout()
-        main_layout.addWidget(self.window.ui.nodes[id])
-        main_layout.addWidget(self.window.ui.tabs['plugin.settings'])
+        main_layout.addWidget(self.window.ui.splitters['dialog.plugins'])
 
         self.window.ui.nodes['plugin.settings.cmd.footer'] = HelpLabel(trans('cmd.tip'))
         self.window.ui.nodes['plugin.settings.cmd.footer'].setAlignment(Qt.AlignCenter)
         self.window.ui.nodes['plugin.settings.cmd.footer'].setWordWrap(False)
 
         layout = QVBoxLayout()
         layout.addLayout(main_layout)  # list + plugins tabs
@@ -319,14 +332,17 @@
                 widgets[key] = OptionCheckbox(self.window, parent, key, option)  # checkbox
             elif option['type'] == 'dict':
                 self.window.controller.config.placeholder.apply(option)
                 widgets[key] = OptionDict(self.window, parent, key, option)  # dictionary
             elif option['type'] == 'combo':
                 self.window.controller.config.placeholder.apply(option)
                 widgets[key] = OptionCombo(self.window, parent, key, option)  # combobox
+            elif option['type'] == 'cmd':
+                self.window.controller.config.placeholder.apply(option)
+                widgets[key] = OptionCmd(self.window, plugin, parent, key, option)  # command
 
         return widgets
 
     def add_line(self) -> QFrame:
         """
         Make separator line
 
@@ -367,15 +383,17 @@
         Append option widget to layout
 
         :param plugin: plugin instance
         :param widget: widget instance
         :param option: option dict
         :return: QVBoxLayout
         """
-        one_column_types = ['textarea', 'dict', 'bool']
+        one_column_types = ['textarea', 'dict', 'bool', 'cmd']
+        no_label_types = ['bool', 'cmd']
+        no_desc_types = ['cmd']
         allow_locale = True
 
         key = option['id']
         label_key = 'plugin.' + plugin.id + '.' + key + '.label'
         desc_key = 'plugin.' + plugin.id + '.' + key + '.desc'
 
         # get option label and description
@@ -393,24 +411,29 @@
             txt_desc = trans(key + '.description', False, domain)
             txt_tooltip = trans(key + '.tooltip', False, domain)
 
             # if empty tooltip then use description
             if txt_tooltip == key + '.tooltip':
                 txt_tooltip = txt_desc
 
-        widget.setToolTip(txt_tooltip)
 
-        if option['type'] != 'bool':
+        if option['type'] not in no_desc_types:
+            widget.setToolTip(txt_tooltip)
+
+        if option['type'] not in no_label_types:
             self.window.ui.nodes[label_key] = QLabel(txt_title)
             self.window.ui.nodes[label_key].setStyleSheet("font-weight: bold;")
 
         # 2-columns layout
         if option['type'] not in one_column_types:
             cols = QHBoxLayout()
-            cols.addWidget(self.window.ui.nodes[label_key])  # disable label in bool type
+
+            if option['type'] not in no_label_types:
+                cols.addWidget(self.window.ui.nodes[label_key])  # disable label in bool type
+
             cols.addWidget(widget)
 
             cols_widget = QWidget()
             cols_widget.setLayout(cols)
             cols_widget.setMaximumHeight(90)
 
             self.window.ui.nodes[desc_key] = QLabel(txt_desc)
@@ -419,31 +442,33 @@
             self.window.ui.nodes[desc_key].setStyleSheet("font-size: 10px;")
             self.window.ui.nodes[desc_key].setToolTip(txt_tooltip)
 
             layout = QVBoxLayout()
             layout.addWidget(cols_widget)
             layout.addWidget(self.window.ui.nodes[desc_key])
         else:
-            # 1-column layout: textarea and dict fields
+            # 1-column layout: textarea, dict, cmd fields
             layout = QVBoxLayout()
-            if option['type'] != 'bool':
+
+            if option['type'] not in no_label_types:
                 layout.addWidget(self.window.ui.nodes[label_key])
-            else:
+            elif option['type'] == 'bool':
                 widget.box.setText(txt_title)  # set checkbox label
-            layout.addWidget(widget)
 
-            self.window.ui.nodes[desc_key] = QLabel(txt_desc)
-            self.window.ui.nodes[desc_key].setWordWrap(True)
-            self.window.ui.nodes[desc_key].setMaximumHeight(40)
-            self.window.ui.nodes[desc_key].setStyleSheet("font-size: 10px;")
-            self.window.ui.nodes[desc_key].setToolTip(txt_tooltip)
+            layout.addWidget(widget)
 
-            layout.addWidget(self.window.ui.nodes[desc_key])
+            if option['type'] not in no_desc_types:
+                self.window.ui.nodes[desc_key] = QLabel(txt_desc)
+                self.window.ui.nodes[desc_key].setWordWrap(True)
+                self.window.ui.nodes[desc_key].setMaximumHeight(40)
+                self.window.ui.nodes[desc_key].setStyleSheet("font-size: 10px;")
+                self.window.ui.nodes[desc_key].setToolTip(txt_tooltip)
+                layout.addWidget(self.window.ui.nodes[desc_key])
 
-        # append URLs at the beginning
+        # append URLs
         if option['urls'] is not None and len(option['urls']) > 0:
             urls_widget = self.add_urls(option['urls'])
             layout.addWidget(urls_widget)
 
         line = self.add_line()  # TODO: change name to separator
         layout.addWidget(line)
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/ui/dialog/preset.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/dialog/preset.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/ui/dialog/rename.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/dialog/rename.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/ui/dialog/settings.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/dialog/settings.py`

 * *Files 3% similar despite different names*

```diff
@@ -4,18 +4,18 @@
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
 # Updated Date: 2024.02.28 22:00:00                  #
 # ================================================== #
-
+from PySide6.QtCore import Qt
 from PySide6.QtGui import QStandardItemModel
 from PySide6.QtWidgets import QPushButton, QHBoxLayout, QLabel, QVBoxLayout, QScrollArea, QWidget, QSizePolicy, \
-    QTabWidget
+    QTabWidget, QSplitter
 
 from pygpt_net.ui.base.config_dialog import BaseConfigDialog
 from pygpt_net.ui.widget.dialog.settings import SettingsDialog
 from pygpt_net.ui.widget.element.group import CollapsedGroup
 from pygpt_net.ui.widget.lists.settings import SettingsSectionList
 from pygpt_net.utils import trans
 
@@ -250,19 +250,26 @@
         self.window.ui.models[data_id] = self.create_model(self.window)
         self.window.ui.nodes[data_id].setModel(self.window.ui.models[data_id])
 
         # update section list
         self.update_list(data_id, data)
 
         # set max width to list
-        self.window.ui.nodes[data_id].setMaximumWidth(250)
+        self.window.ui.nodes[data_id].setMinimumWidth(200)
+
+        # splitter
+        self.window.ui.splitters['dialog.settings'] = QSplitter(Qt.Horizontal)
+        self.window.ui.splitters['dialog.settings'].addWidget(self.window.ui.nodes[data_id])  # list
+        self.window.ui.splitters['dialog.settings'].addWidget(self.window.ui.tabs['settings.section'])  # tabs
+        self.window.ui.splitters['dialog.settings'].setStretchFactor(0, 2)
+        self.window.ui.splitters['dialog.settings'].setStretchFactor(1, 5)
+        self.window.ui.splitters['dialog.settings'].setSizePolicy(QSizePolicy.Expanding, QSizePolicy.Expanding)
 
         main_layout = QHBoxLayout()
-        main_layout.addWidget(self.window.ui.nodes[data_id])
-        main_layout.addWidget(self.window.ui.tabs['settings.section'])
+        main_layout.addWidget(self.window.ui.splitters['dialog.settings'])
 
         layout = QVBoxLayout()
         layout.addLayout(main_layout)  # list + plugins tabs
         layout.addLayout(bottom)  # bottom buttons (save, defaults)
 
         self.window.ui.dialog['config.' + id] = SettingsDialog(self.window, id)
         self.window.ui.dialog['config.' + id].setLayout(layout)
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/ui/dialog/snap.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/dialog/snap.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/ui/dialog/start.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/dialog/start.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/ui/dialog/update.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/dialog/update.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/ui/dialogs.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/dialogs.py`

 * *Files 11% similar despite different names*

```diff
@@ -2,88 +2,105 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.27 19:00:00                  #
+# Updated Date: 2024.04.26 23:00:00                  #
 # ================================================== #
 
 from pygpt_net.ui.dialog.about import About
 from pygpt_net.ui.dialog.applog import AppLog
 from pygpt_net.ui.dialog.assistant import Assistant
+from pygpt_net.ui.dialog.assistant_store import AssistantVectorStore
 from pygpt_net.ui.dialog.changelog import Changelog
 from pygpt_net.ui.dialog.create import Create
+from pygpt_net.ui.dialog.db import Database
 from pygpt_net.ui.dialog.debug import Debug
 from pygpt_net.ui.dialog.dictionary import Dictionary
 from pygpt_net.ui.dialog.editor import Editor
+from pygpt_net.ui.dialog.find import Find
 from pygpt_net.ui.dialog.image import Image
 from pygpt_net.ui.dialog.license import License
 from pygpt_net.ui.dialog.logger import Logger
 from pygpt_net.ui.dialog.models import Models
 from pygpt_net.ui.dialog.plugins import Plugins
 from pygpt_net.ui.dialog.preset import Preset
+from pygpt_net.ui.dialog.preset_plugins import PresetPlugins
+from pygpt_net.ui.dialog.profile import Profile, ProfileEdit
 from pygpt_net.ui.dialog.rename import Rename
 from pygpt_net.ui.dialog.settings import Settings
 from pygpt_net.ui.dialog.snap import Snap
 from pygpt_net.ui.dialog.start import Start
 from pygpt_net.ui.dialog.update import Update
+from pygpt_net.ui.dialog.workdir import Workdir
 from pygpt_net.ui.widget.dialog.alert import AlertDialog
 from pygpt_net.ui.widget.dialog.confirm import ConfirmDialog
 
-
 class Dialogs:
     def __init__(self, window=None):
         """
         Dialogs setup
 
         :param window: Window instance
         """
         self.window = window
         self.about = About(self.window)
         self.assistant = Assistant(self.window)
         self.app_log = AppLog(self.window)
         self.changelog = Changelog(self.window)
         self.create = Create(self.window)
+        self.database = Database(self.window)
         self.debug = Debug(self.window)
         self.dictionary = Dictionary(self.window)
         self.editor = Editor(self.window)
+        self.find = Find(self.window)
         self.image = Image(self.window)
         self.license = License(self.window)
         self.logger = Logger(self.window)
         self.preset = Preset(self.window)
+        self.profile_item = ProfileEdit(self.window)
         self.rename = Rename(self.window)
         self.snap = Snap(self.window)
         self.start = Start(self.window)
         self.update = Update(self.window)
+        self.workdir = Workdir(self.window)
 
     def setup(self):
         """Setup dialogs"""
         for id in self.window.controller.dialogs.debug.ids:
             self.debug.setup(id)
 
         self.about.setup()
         self.app_log.setup()
         self.changelog.setup()
         self.create.setup()
         self.preset.setup()
         self.assistant.setup()
         self.editor.setup()
+        self.find.setup()
         self.rename.setup()
         self.snap.setup()
         self.start.setup()
         self.update.setup()
         self.image.setup()
         self.license.setup()
         self.logger.setup()
+        self.database.setup()
+        self.workdir.setup()
+        self.profile_item.setup()
 
         self.window.settings = Settings(self.window)
+        self.window.profiles = Profile(self.window)
         self.window.plugin_settings = Plugins(self.window)
+        self.window.plugin_presets = PresetPlugins(self.window)
         self.window.model_settings = Models(self.window)
+        self.window.assistant_store = AssistantVectorStore(self.window)
+
         self.window.ui.dialog['alert'] = AlertDialog(self.window)
         self.window.ui.dialog['confirm'] = ConfirmDialog(self.window)
 
     def post_setup(self):
         """Post setup dialogs (after plugins and rest of data is registered)"""
         self.dictionary.setup()
 
@@ -104,20 +121,21 @@
         """
         self.window.ui.dialog['confirm'].type = type
         self.window.ui.dialog['confirm'].id = id
         self.window.ui.dialog['confirm'].message.setText(msg)
         self.window.ui.dialog['confirm'].parent_object = parent_object
         self.window.ui.dialog['confirm'].show()
 
-    def alert(self, msg):
+    def alert(self, msg: any):
         """
         Show alert dialog
 
         :param msg: message to show
         """
+        msg = self.window.core.debug.parse_alert(msg)
         self.window.ui.dialog['alert'].message.setPlainText(msg)
         self.window.ui.dialog['alert'].show()
 
     def open_editor(self, id: str, data_id: str, width: int = 400, height: int = 400):
         """
         Open editor dialog
 
@@ -194,14 +212,45 @@
             return
         self.window.ui.dialog[id].resize(width, height)
         qr = self.window.ui.dialog[id].frameGeometry()
         cp = self.window.screen().availableGeometry().center()
         qr.moveCenter(cp)
         self.window.ui.dialog[id].move(qr.topLeft())
         self.window.ui.dialog[id].show()
+        self.window.ui.dialog[id].activateWindow()
+        self.window.ui.dialog[id].setFocus()
+
+    def open_instance(self,
+            id: str,
+            width: int = 400,
+            height: int = 400,
+            type="text_editor"):
+        """
+        Open edit dialog (multiple instances)
+
+        :param id: dialog id
+        :param width: dialog width
+        :param height: dialog height
+        :param type: dialog type
+        """
+        if id not in self.window.ui.dialog:
+            dialog_instance = self.window.tools.get_instance(type, id)
+            if dialog_instance:
+                self.window.ui.dialog[id] = dialog_instance
+            else:
+                print("Dialog not found: " + id)
+                return
+        self.window.ui.dialog[id].resize(width, height)
+        qr = self.window.ui.dialog[id].frameGeometry()
+        cp = self.window.screen().availableGeometry().center()
+        qr.moveCenter(cp)
+        self.window.ui.dialog[id].move(qr.topLeft())
+        self.window.ui.dialog[id].show()
+        self.window.ui.dialog[id].activateWindow()
+        self.window.ui.dialog[id].setFocus()
 
     def close(self, id: str):
         """
         Close dialog
 
         :param id: dialog id
         """
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/ui/layout/chat/__init__.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/layout/chat/__init__.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/ui/layout/chat/attachments.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/layout/chat/attachments.py`

 * *Files 2% similar despite different names*

```diff
@@ -2,17 +2,19 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.01.28 22:00:00                  #
+# Updated Date: 2024.04.14 20:00:00                  #
 # ================================================== #
 
+import os
+
 from PySide6.QtGui import QStandardItemModel, Qt
 from PySide6.QtWidgets import QVBoxLayout, QPushButton, QHBoxLayout, QCheckBox, QWidget
 
 from pygpt_net.ui.widget.element.labels import HelpLabel
 from pygpt_net.ui.widget.lists.attachment import AttachmentList
 from pygpt_net.utils import trans
 
@@ -119,25 +121,32 @@
     def create_model(self, parent) -> QStandardItemModel:
         """
         Create list model
 
         :param parent: parent widget
         :return: QStandardItemModel
         """
-        model = QStandardItemModel(0, 2, parent)
+        model = QStandardItemModel(0, 3, parent)
         model.setHeaderData(0, Qt.Horizontal, trans('attachments.header.name'))
         model.setHeaderData(1, Qt.Horizontal, trans('attachments.header.path'))
+        model.setHeaderData(2, Qt.Horizontal, trans('attachments.header.size'))
+
         return model
 
     def update(self, data):
         """
         Update list
 
         :param data: Data to update
         """
         self.window.ui.models[self.id].removeRows(0, self.window.ui.models[self.id].rowCount())
         i = 0
         for id in data:
+            path = data[id].path
+            size = ""
+            if path and os.path.exists(path):
+                size = self.window.core.filesystem.sizeof_fmt(os.path.getsize(path))
             self.window.ui.models[self.id].insertRow(i)
             self.window.ui.models[self.id].setData(self.window.ui.models[self.id].index(i, 0), data[id].name)
-            self.window.ui.models[self.id].setData(self.window.ui.models[self.id].index(i, 1), data[id].path)
+            self.window.ui.models[self.id].setData(self.window.ui.models[self.id].index(i, 1),path)
+            self.window.ui.models[self.id].setData(self.window.ui.models[self.id].index(i, 2), size)
             i += 1
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/ui/layout/chat/attachments_uploaded.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/layout/chat/attachments_uploaded.py`

 * *Files 19% similar despite different names*

```diff
@@ -2,17 +2,19 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.01.27 11:00:00                  #
+# Updated Date: 2024.04.27 10:00:00                  #
 # ================================================== #
 
+import os
+
 from PySide6 import QtCore
 from PySide6.QtGui import QStandardItemModel, Qt
 from PySide6.QtWidgets import QVBoxLayout, QPushButton, QHBoxLayout, QCheckBox, QLabel, QWidget
 
 from pygpt_net.ui.widget.element.labels import HelpLabel
 from pygpt_net.ui.widget.lists.uploaded import UploadedFileList
 from pygpt_net.utils import trans
@@ -66,43 +68,63 @@
         self.window.ui.nodes[self.id] = UploadedFileList(self.window)
 
         # buttons
         self.window.ui.nodes['attachments_uploaded.btn.sync'] = QPushButton(trans('attachments_uploaded.btn.sync'))
         self.window.ui.nodes['attachments_uploaded.btn.clear'] = QPushButton(trans('attachments_uploaded.btn.clear'))
 
         self.window.ui.nodes['attachments_uploaded.btn.sync'].clicked.connect(
-            lambda: self.window.controller.assistant.files.sync())
+            lambda: self.window.controller.assistant.batch.import_files())
         self.window.ui.nodes['attachments_uploaded.btn.clear'].clicked.connect(
-            lambda: self.window.controller.assistant.files.clear_files())
+            lambda: self.window.controller.assistant.files.clear())
 
         self.window.ui.models[self.id] = self.create_model(self.window)
         self.window.ui.nodes[self.id].setModel(self.window.ui.models[self.id])
 
     def create_model(self, parent) -> QStandardItemModel:
         """
         Create list model
 
         :param parent: parent widget
         :return: QStandardItemModel
         """
-        model = QStandardItemModel(0, 2, parent)
+        model = QStandardItemModel(0, 4, parent)
         model.setHeaderData(0, Qt.Horizontal, trans('attachments.header.name'))
         model.setHeaderData(1, Qt.Horizontal, trans('attachments.header.path'))
+        model.setHeaderData(2, Qt.Horizontal, trans('attachments.header.size'))
+        model.setHeaderData(3, Qt.Horizontal, trans('attachments.header.store'))
         return model
 
     def update(self, data):
         """
         Update list
 
         :param data: Data to update
         """
+        store_names = self.window.core.assistants.store.get_names()
         self.window.ui.models[self.id].removeRows(0, self.window.ui.models[self.id].rowCount())
         i = 0
         for id in data:
-            if 'name' not in data[id] or 'path' not in data[id]:
-                continue
+            item = data[id]
+            size = "-"
+            path = item.path
+
+            # size
+            if item.size is not None:
+                size = self.window.core.filesystem.sizeof_fmt(item.size)
+            else:
+                if path and os.path.exists(path):
+                    size = self.window.core.filesystem.sizeof_fmt(os.path.getsize(path))
+
+            # vector stores
+            if item.store_id is not None and item.store_id in store_names:
+                vector_store = store_names[item.store_id]
+            else:
+                vector_store = trans("assistant.store.thread_only")
+
             self.window.ui.models[self.id].insertRow(i)
             index = self.window.ui.models[self.id].index(i, 0)
-            self.window.ui.models[self.id].setData(index, "ID: " + id, QtCore.Qt.ToolTipRole)
-            self.window.ui.models[self.id].setData(self.window.ui.models[self.id].index(i, 0), data[id]['name'])
-            self.window.ui.models[self.id].setData(self.window.ui.models[self.id].index(i, 1), data[id]['path'])
+            self.window.ui.models[self.id].setData(index, "file_id: " + str(item.file_id), QtCore.Qt.ToolTipRole)
+            self.window.ui.models[self.id].setData(self.window.ui.models[self.id].index(i, 0), item.name)
+            self.window.ui.models[self.id].setData(self.window.ui.models[self.id].index(i, 1), path)
+            self.window.ui.models[self.id].setData(self.window.ui.models[self.id].index(i, 2), size)
+            self.window.ui.models[self.id].setData(self.window.ui.models[self.id].index(i, 3), vector_store)
             i += 1
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/ui/layout/chat/calendar.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/layout/chat/calendar.py`

 * *Files 7% similar despite different names*

```diff
@@ -2,21 +2,22 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.02 17:00:00                  #
+# Updated Date: 2024.03.09 07:00:00                  #
 # ================================================== #
 
 from PySide6.QtCore import Qt
-from PySide6.QtWidgets import QVBoxLayout, QLabel, QHBoxLayout, QWidget, QSplitter, QSizePolicy, QRadioButton
+from PySide6.QtWidgets import QVBoxLayout, QLabel, QHBoxLayout, QWidget, QSplitter, QSizePolicy, QRadioButton, QCheckBox
 
 from pygpt_net.ui.widget.calendar.select import CalendarSelect
+from pygpt_net.ui.widget.element.checkbox import ColorCheckbox
 from pygpt_net.ui.widget.element.labels import HelpLabel
 from pygpt_net.ui.widget.textarea.calendar_note import CalendarNote
 from pygpt_net.utils import trans
 
 
 class Calendar:
     def __init__(self, window=None):
@@ -57,49 +58,64 @@
             lambda: self.window.controller.ctx.common.toggle_display_filter("all"))
 
         # display: only pinned
         self.window.ui.nodes['filter.ctx.radio.pinned'] = QRadioButton(trans("filter.ctx.radio.pinned"))
         self.window.ui.nodes['filter.ctx.radio.pinned'].clicked.connect(
             lambda: self.window.controller.ctx.common.toggle_display_filter("pinned"))
 
-        # display: only labeled
-        self.window.ui.nodes['filter.ctx.radio.labeled'] = QRadioButton(trans("filter.ctx.radio.labeled"))
-        self.window.ui.nodes['filter.ctx.radio.labeled'].clicked.connect(
-            lambda: self.window.controller.ctx.common.toggle_display_filter("labeled"))
-
         # display: only indexed
         self.window.ui.nodes['filter.ctx.radio.indexed'] = QRadioButton(trans("filter.ctx.radio.indexed"))
         self.window.ui.nodes['filter.ctx.radio.indexed'].clicked.connect(
             lambda: self.window.controller.ctx.common.toggle_display_filter("indexed"))
 
+        # all counters
+        self.window.ui.nodes['filter.ctx.counters.all'] = QCheckBox(trans("filter.ctx.counters.all"))
+        self.window.ui.nodes['filter.ctx.counters.all'].stateChanged.connect(
+            lambda: self.window.controller.calendar.note.toggle_counters_all(
+                self.window.ui.nodes['filter.ctx.counters.all'].isChecked())
+        )
+        if self.window.core.config.get("ctx.counters.all"):
+            self.window.ui.nodes['filter.ctx.counters.all'].setChecked(True)
+        else:
+            self.window.ui.nodes['filter.ctx.counters.all'].setChecked(False)
+
         # layout
         layout = QHBoxLayout()
         layout.addWidget(self.window.ui.nodes['filter.ctx.label'])
         layout.addWidget(self.window.ui.nodes['filter.ctx.radio.all'])
         layout.addWidget(self.window.ui.nodes['filter.ctx.radio.pinned'])
-        layout.addWidget(self.window.ui.nodes['filter.ctx.radio.labeled'])
         layout.addWidget(self.window.ui.nodes['filter.ctx.radio.indexed'])
+        layout.addWidget(self.window.ui.nodes['filter.ctx.counters.all'])
         layout.addStretch()
 
+        self.window.ui.nodes['filter.ctx.labels'] = ColorCheckbox(self.window)
+
+        rows = QVBoxLayout()
+        rows.addLayout(layout)
+        rows.addWidget(self.window.ui.nodes['filter.ctx.labels'])
+
         widget = QWidget()
-        widget.setLayout(layout)
+        widget.setLayout(rows)
 
         return widget
 
-    def setup_calendar(self) -> QHBoxLayout:
+    def setup_calendar(self) -> QWidget:
         """
         Setup calendar
 
         :return: QSplitter
         """
         # calendar
+        select_layout = QVBoxLayout()
         self.window.ui.calendar['select'] = CalendarSelect(self.window)
         self.window.ui.calendar['select'].setMinimumHeight(200)
         self.window.ui.calendar['select'].setMinimumWidth(200)
         self.window.ui.calendar['select'].setGridVisible(True)
+        select_layout.addWidget(self.window.ui.calendar['select'])
+        select_layout.setContentsMargins(5, 0, 5, 0)
 
         self.window.ui.calendar['note'] = CalendarNote(self.window)
 
         self.window.ui.nodes['tip.output.tab.calendar'] = HelpLabel(trans('tip.output.tab.calendar'), self.window)
 
         # note
         self.window.ui.calendar['note.label'] = QLabel(trans('calendar.note.label'))
@@ -109,27 +125,32 @@
         layout.addWidget(self.window.ui.nodes['tip.output.tab.calendar'])
         layout.setContentsMargins(0, 0, 0, 0)
 
         widget = QWidget()
         widget.setLayout(layout)
 
         filters = self.setup_filters()
+        select_layout.addWidget(filters)
+
+        select_widget = QWidget()
+        select_widget.setLayout(select_layout)
 
         # layout / splitter
         self.window.ui.splitters['calendar'] = QSplitter(Qt.Horizontal)
-        self.window.ui.splitters['calendar'].addWidget(self.window.ui.calendar['select'])
+        self.window.ui.splitters['calendar'].addWidget(select_widget)
         self.window.ui.splitters['calendar'].addWidget(widget)
         self.window.ui.splitters['calendar'].setStretchFactor(0, 6)  # 60%
         self.window.ui.splitters['calendar'].setStretchFactor(1, 4)  # 40%
 
         self.window.ui.splitters['calendar'].setSizePolicy(QSizePolicy.Expanding, QSizePolicy.Expanding)
         filters.setSizePolicy(QSizePolicy.Expanding, QSizePolicy.Fixed)
 
         layout = QVBoxLayout()
         layout.addWidget(self.window.ui.splitters['calendar'])
-        layout.addWidget(filters)
+        layout.setContentsMargins(0, 0, 0, 0)
+        #layout.addWidget(filters)
 
         widget = QWidget()
         widget.setLayout(layout)
 
         return widget
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/ui/layout/chat/input.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/layout/chat/input.py`

 * *Files 5% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.26 20:00:00                  #
+# Updated Date: 2024.03.09 21:00:00                  #
 # ================================================== #
 
 from PySide6.QtCore import Qt
 from PySide6.QtGui import QIcon
 from PySide6.QtWidgets import QVBoxLayout, QLabel, QHBoxLayout, QPushButton, QRadioButton, QCheckBox, QWidget
 
 from pygpt_net.ui.layout.chat.attachments import Attachments
@@ -200,23 +200,37 @@
 
         # stop button
         self.window.ui.nodes['input.stop_btn'] = QPushButton(trans("input.btn.stop"))
         self.window.ui.nodes['input.stop_btn'].setVisible(False)
         self.window.ui.nodes['input.stop_btn'].clicked.connect(
             lambda: self.window.controller.chat.common.stop())
 
+        # update button
+        self.window.ui.nodes['input.update_btn'] = QPushButton(trans("input.btn.update"))
+        self.window.ui.nodes['input.update_btn'].setVisible(False)
+        self.window.ui.nodes['input.update_btn'].clicked.connect(
+            lambda: self.window.controller.ctx.extra.edit_submit())
+
+        # cancel button
+        self.window.ui.nodes['input.cancel_btn'] = QPushButton(trans("input.btn.cancel"))
+        self.window.ui.nodes['input.cancel_btn'].setVisible(False)
+        self.window.ui.nodes['input.cancel_btn'].clicked.connect(
+            lambda: self.window.controller.ctx.extra.edit_cancel())
+
         # layout
         self.window.ui.nodes['ui.input.buttons'] = QHBoxLayout()
         self.window.ui.nodes['ui.input.buttons'].addWidget(self.window.ui.nodes['input.stream'])
         self.window.ui.nodes['ui.input.buttons'].addWidget(self.window.ui.nodes['input.send_clear'])
         self.window.ui.nodes['ui.input.buttons'].addWidget(self.window.ui.nodes['input.send_enter'])
         self.window.ui.nodes['ui.input.buttons'].addWidget(self.window.ui.nodes['input.send_shift_enter'])
         self.window.ui.nodes['ui.input.buttons'].addWidget(self.window.ui.nodes['input.send_none'])
         self.window.ui.nodes['ui.input.buttons'].addWidget(self.window.ui.nodes['input.send_btn'])
         self.window.ui.nodes['ui.input.buttons'].addWidget(self.window.ui.nodes['input.stop_btn'])
+        self.window.ui.nodes['ui.input.buttons'].addWidget(self.window.ui.nodes['input.cancel_btn'])
+        self.window.ui.nodes['ui.input.buttons'].addWidget(self.window.ui.nodes['input.update_btn'])
         self.window.ui.nodes['ui.input.buttons'].setAlignment(Qt.AlignRight)
 
         return self.window.ui.nodes['ui.input.buttons']
 
     def update_min_height(self):
         """
         Update the minimum height of the input tab
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/ui/layout/chat/markdown.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/layout/chat/markdown.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/ui/layout/chat/output.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/layout/chat/output.py`

 * *Files 6% similar despite different names*

```diff
@@ -2,29 +2,28 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.29 01:00:00                  #
+# Updated Date: 2024.04.21 19:00:00                  #
 # ================================================== #
 
 from PySide6.QtCore import Qt
 from PySide6.QtGui import QIcon
 from PySide6.QtWidgets import QVBoxLayout, QLabel, QHBoxLayout, QCheckBox, QWidget, QSizePolicy
 
 from pygpt_net.ui.layout.chat.input import Input
 from pygpt_net.ui.layout.chat.calendar import Calendar
 from pygpt_net.ui.layout.chat.painter import Painter
 from pygpt_net.ui.widget.audio.output import AudioOutput
 from pygpt_net.ui.widget.element.labels import ChatStatusLabel, IconLabel
 from pygpt_net.ui.widget.tabs.output import OutputTabs
 from pygpt_net.ui.widget.textarea.output import ChatOutput
-from pygpt_net.ui.widget.textarea.notepad import NotepadWidget
 from pygpt_net.ui.widget.filesystem.explorer import FileExplorer
 from pygpt_net.utils import trans
 import pygpt_net.icons_rc
 
 
 class Output:
     def __init__(self, window=None):
@@ -41,54 +40,60 @@
     def setup(self) -> QWidget:
         """
         Setup output
 
         :return: QWidget
         :rtype: QWidget
         """
-        # chat output
-        self.window.ui.nodes['output'] = ChatOutput(self.window)
+        # chat plain-text output
+        self.window.ui.nodes['output_plain'] = ChatOutput(self.window)
+
+        # chat web output
+        if self.window.core.config.get("render.engine") == "web":
+            from pygpt_net.ui.widget.textarea.web import ChatWebOutput, CustomWebEnginePage
+            self.window.ui.nodes['output'] = ChatWebOutput(self.window)
+            self.window.ui.nodes['output'].setPage(
+                CustomWebEnginePage(self.window, self.window.ui.nodes['output'])
+            )
+        else:
+            # chat legacy output
+            self.window.ui.nodes['output'] = ChatOutput(self.window)
+
+        # disable at start
+        self.window.ui.nodes['output_plain'].setVisible(False)
+        self.window.ui.nodes['output'].setVisible(False)
 
         # index status data
         index_data = self.window.core.idx.get_idx_data()  # get all idx data
 
         # file explorer
         path = self.window.core.config.get_user_dir('data')
         self.window.ui.nodes['output_files'] = FileExplorer(self.window, path, index_data)
 
-        # notepad
-        num_notepads = self.window.controller.notepad.get_num_notepads()
-        if num_notepads > 0:
-            for i in range(1, num_notepads + 1):
-                self.window.ui.notepad[i] = NotepadWidget(self.window)
-                self.window.ui.notepad[i].id = i
+        # render engines layout
+        output_layout = QVBoxLayout()
+        output_layout.addWidget(self.window.ui.nodes['output_plain'])
+        output_layout.addWidget(self.window.ui.nodes['output'])
+        output_layout.setContentsMargins(0, 0, 0, 0)
+        output_widget = QWidget()
+        output_widget.setLayout(output_layout)
 
         # tabs
         self.window.ui.tabs['output'] = OutputTabs(self.window)
-        self.window.ui.tabs['output'].addTab(self.window.ui.nodes['output'], trans('output.tab.chat'))
+        self.window.ui.tabs['output'].addTab(output_widget, trans('output.tab.chat'))
         self.window.ui.tabs['output'].addTab(self.window.ui.nodes['output_files'], trans('output.tab.files'))
 
         # calendar
         calendar = self.calendar.setup()
         self.window.ui.tabs['output'].addTab(calendar, trans('output.tab.calendar'))
 
         # painter
         painter = self.painter.setup()
         self.window.ui.tabs['output'].addTab(painter, trans('output.tab.painter'))
 
-        # append notepad
-        if num_notepads > 0:
-            for i in range(1, num_notepads + 1):
-                tab = i + (self.window.controller.notepad.start_tab_idx - 1)
-                title = trans('output.tab.notepad')
-                if num_notepads > 1:
-                    title += " " + str(i)
-                self.window.ui.tabs['output'].addTab(self.window.ui.notepad[i], title)
-                self.window.ui.tabs['output'].setTabIcon(tab, QIcon(":/icons/paste.svg"))
-
         self.window.ui.tabs['output'].currentChanged.connect(self.window.controller.ui.output_tab_changed)
 
         self.window.ui.tabs['output'].setTabIcon(0, QIcon(":/icons/chat.svg"))
         self.window.ui.tabs['output'].setTabIcon(1, QIcon(":/icons/folder_filled.svg"))
         self.window.ui.tabs['output'].setTabIcon(2, QIcon(":/icons/schedule.svg"))
         self.window.ui.tabs['output'].setTabIcon(3, QIcon(":/icons/brush.svg"))
 
@@ -125,14 +130,28 @@
         # audio input icon
         self.window.ui.nodes['icon.audio.input'] = IconLabel(":/icons/mic.svg")
         self.window.ui.nodes['icon.audio.input'].setToolTip(trans("icon.audio.input"))
         self.window.ui.nodes['icon.audio.input'].clicked.connect(
             lambda: self.window.controller.plugins.toggle('audio_input')
         )
 
+        # interpreter icon
+        self.window.ui.nodes['icon.interpreter'] = IconLabel(":/icons/code.svg")
+        self.window.ui.nodes['icon.interpreter'].setToolTip("Python code interpreter")
+        self.window.ui.nodes['icon.interpreter'].clicked.connect(
+            lambda: self.window.tools.get("interpreter").toggle()
+        )
+
+        # indexer icon
+        self.window.ui.nodes['icon.indexer'] = IconLabel(":/icons/db.svg")
+        self.window.ui.nodes['icon.indexer'].setToolTip("Indexer")
+        self.window.ui.nodes['icon.indexer'].clicked.connect(
+            lambda: self.window.tools.get("indexer").toggle()
+        )
+
         # mode
         self.window.ui.nodes['chat.label'] = ChatStatusLabel("")
         self.window.ui.nodes['chat.label'].setSizePolicy(QSizePolicy.Minimum, QSizePolicy.Minimum)
         self.window.ui.nodes['chat.label'].setWordWrap(False)
 
         # model
         self.window.ui.nodes['chat.model'] = ChatStatusLabel("")
@@ -153,14 +172,21 @@
         # plain text
         self.window.ui.nodes['output.raw'] = QCheckBox(trans('output.raw'))
         self.window.ui.nodes['output.raw'].clicked.connect(
             lambda: self.window.controller.chat.common.toggle_raw(
                 self.window.ui.nodes['output.raw'].isChecked())
         )
 
+        # edit icons
+        self.window.ui.nodes['output.edit'] = QCheckBox(trans('output.edit'))
+        self.window.ui.nodes['output.edit'].clicked.connect(
+            lambda: self.window.controller.chat.common.toggle_edit_icons(
+                self.window.ui.nodes['output.edit'].isChecked())
+        )
+
         # inline vision
         self.window.ui.nodes['inline.vision'] = QCheckBox(trans('inline.vision'))
         self.window.ui.nodes['inline.vision'].clicked.connect(
             lambda: self.window.controller.chat.vision.toggle(
                 self.window.ui.nodes['inline.vision'].isChecked())
         )
         self.window.ui.nodes['inline.vision'].setVisible(False)
@@ -178,25 +204,28 @@
         # schedule
         self.window.ui.plugin_addon['schedule'] = ChatStatusLabel("")
 
         opts_layout = QHBoxLayout()
         # opts_layout.setSpacing(2)  #
         opts_layout.setContentsMargins(0, 0, 0, 0)
         opts_layout.addWidget(self.window.ui.nodes['output.timestamp'])
+        opts_layout.addWidget(self.window.ui.nodes['output.edit'])
         opts_layout.addWidget(self.window.ui.nodes['output.raw'])
         opts_layout.addWidget(self.window.ui.nodes['inline.vision'])
         opts_layout.setAlignment(Qt.AlignLeft)
 
         layout = QHBoxLayout()
         layout.addLayout(opts_layout)
         # layout.addWidget(self.window.ui.plugin_addon['audio.output'])
         layout.addStretch(1)
         layout.addWidget(self.window.ui.nodes['icon.video.capture'])
         layout.addWidget(self.window.ui.nodes['icon.audio.input'])
         layout.addWidget(self.window.ui.nodes['icon.audio.output'])
+        layout.addWidget(self.window.ui.nodes['icon.interpreter'])
+        layout.addWidget(self.window.ui.nodes['icon.indexer'])
         layout.addWidget(self.window.ui.plugin_addon['schedule'])
         layout.addWidget(QLabel(" "))
         layout.addWidget(self.window.ui.nodes['chat.plugins'])
         layout.addWidget(QLabel(" "))
         layout.addWidget(self.window.ui.nodes['chat.label'])
         layout.addWidget(QLabel("  "))
         layout.addWidget(self.window.ui.nodes['chat.model'])
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/ui/layout/chat/painter.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/layout/chat/painter.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/ui/layout/ctx/__init__.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/layout/ctx/__init__.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/ui/layout/ctx/ctx_list.py` & `pygpt_net-2.2.0/src/pygpt_net/controller/finder.py`

 * *Files 22% similar despite different names*

```diff
@@ -2,136 +2,168 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.02 17:00:00                  #
+# Updated Date: 2024.04.20 06:00:00                  #
 # ================================================== #
 
-from PySide6 import QtCore
-from PySide6.QtGui import QStandardItemModel
-from PySide6.QtWidgets import QVBoxLayout, QPushButton, QWidget
-from datetime import datetime, timedelta
 
-from pygpt_net.ui.widget.element.labels import TitleLabel
-from pygpt_net.ui.widget.lists.context import ContextList
-from pygpt_net.utils import trans
-
-
-class CtxList:
+class Finder:
     def __init__(self, window=None):
         """
-        Context list UI
+        Finder controller
 
         :param window: Window instance
         """
         self.window = window
+        self.parent = None
+        self.locked = False
+        self.opened = False
+
+    def clear_search(self):
+        """Clear search state"""
+        if self.parent is not None:
+            self.parent.clear_search()
+        self.update_counter()
+
+    def focus_input(self, text: str):
+        """
+        On focus in search string input
+
+        :param text: search string
+        """
+        if text is not None and len(text) > 0:
+            if self.parent is not None:
+                self.parent.find(text)
+        self.update_counter()
+
+    def focus_in(self, parent):
+        """
+        On focus in parent
+
+        :param parent: parent
+        """
+        self.set(parent)
+        self.update_counter()
 
-    def setup(self) -> QWidget:
+    def focus_out(self, parent):
         """
-        Setup list
+        On focus out parent
 
-        :return: QWidget
+        :param parent: parent
         """
-        id = 'ctx.list'
-        self.window.ui.nodes['ctx.new'] = QPushButton(trans('ctx.new'))
-        self.window.ui.nodes['ctx.new'].clicked.connect(
-            lambda: self.window.controller.ctx.new())
-
-        self.window.ui.nodes[id] = ContextList(self.window, id)
-        self.window.ui.nodes[id].selection_locked = self.window.controller.ctx.context_change_locked
-        self.window.ui.nodes['ctx.label'] = TitleLabel(trans("ctx.list.label"))
-
-        layout = QVBoxLayout()
-        layout.addWidget(self.window.ui.nodes['ctx.new'])
-        layout.addWidget(self.window.ui.nodes[id])
-        layout.setContentsMargins(0, 0, 0, 0)
-
-        self.window.ui.models[id] = self.create_model(self.window)
-        self.window.ui.nodes[id].setModel(self.window.ui.models[id])
-        self.window.ui.nodes[id].selectionModel().selectionChanged.connect(
-            lambda: self.window.controller.ctx.selection_change())
-
-        widget = QWidget()
-        widget.setLayout(layout)
-        widget.setContentsMargins(0, 0, 0, 0)
-
-        return widget
-
-    def create_model(self, parent) -> QStandardItemModel:
-        """
-        Create model
-
-        :param parent: parent widget
-        :return: QStandardItemModel
-        """
-        return QStandardItemModel(0, 1, parent)
-
-    def update(self, id, data):
-        """
-        Update list
-
-        :param id: ID of the list
-        :param data: Data to update
-        """
-        self.window.ui.nodes[id].backup_selection()
-        self.window.ui.models[id].removeRows(0, self.window.ui.models[id].rowCount())
-        i = 0
-        for n in data:
-            self.window.ui.models[id].insertRow(i)
-            dt = self.convert_date(data[n].updated)
-            date_time_str = datetime.fromtimestamp(data[n].updated).strftime("%Y-%m-%d %H:%M")
-            title = data[n].name
-            # truncate to max 40 chars
-            if len(title) > 80:
-                title = title[:80] + '...'
-            name = title.replace("\n", "") + ' (' + dt + ')'
-            index = self.window.ui.models[id].index(i, 0)
-            mode_str = ''
-            if data[n].last_mode is not None:
-                mode_str = " ({})".format(trans('mode.' + data[n].last_mode))
-            tooltip_text = "{}: {}{} #{}".format(
-                date_time_str,
-                data[n].name,
-                mode_str,
-                n,
-            )
-            self.window.ui.models[id].setData(index, tooltip_text, QtCore.Qt.ToolTipRole)
-            if data[n].important:
-                self.window.ui.models[id].setData(index, data[n].label + 10, QtCore.Qt.ItemDataRole.UserRole)
-            else:
-                self.window.ui.models[id].setData(index, data[n].label, QtCore.Qt.ItemDataRole.UserRole)
-            self.window.ui.models[id].setData(self.window.ui.models[id].index(i, 0), name)
-            i += 1
-
-        self.window.ui.nodes[id].restore_selection()
-
-    def convert_date(self, timestamp: int) -> str:
-        """
-        Convert timestamp to human readable format
-
-        :param timestamp: timestamp
-        :return: string
-        """
-        today = datetime.today().date()
-        yesterday = today - timedelta(days=1)
-        date = datetime.fromtimestamp(timestamp).date()
-
-        days_ago = (today - date).days
-        weeks_ago = days_ago // 7
-
-        if date == today:
-            return trans('dt.today')
-        elif date == yesterday:
-            return trans('dt.yesterday')
-        elif weeks_ago == 1:
-            return trans('dt.week')
-        elif 1 < weeks_ago < 4:
-            return f"{weeks_ago} " + trans('dt.weeks')
-        elif days_ago < 30:
-            return f"{days_ago} " + trans('dt.days_ago')
-        elif 30 <= days_ago < 32:
-            return trans('dt.month')
-        else:
-            return date.strftime("%Y-%m-%d")
+        pass
+
+    def search_text_changed(self, search_string: str):
+        """
+        On search input text changed
+
+        :param search_string: search string
+        """
+        if self.parent is not None:
+            self.parent.find(search_string)
+        self.update_counter()
+
+    def prev(self):
+        """Find previous match"""
+        if self.parent is not None:
+            self.parent.find_prev()
+        self.update_counter()
+
+    def next(self):
+        """Find next match"""
+        if self.parent is not None:
+            self.parent.find_next()
+        self.update_counter()
+
+    def get_search_string(self):
+        """
+        Get current search string from input
+
+        :return: search string
+        """
+        return self.window.ui.nodes['dialog.find.input'].text()
+
+    def set(self, parent):
+        """
+        Set current parent for the finder
+
+        :param parent: parent
+        """
+        self.parent = parent
+
+    def unset(self, parent):
+        """
+        Unset parent from the finder
+
+        :param parent: parent
+        """
+        if self.parent == parent:
+            self.parent = None
+
+    def open(self, parent):
+        """
+        Open finder dialog
+
+        :param parent: parent finder
+        """
+        self.parent = parent
+        if self.opened:
+            self.window.ui.nodes['dialog.find.input'].setFocus()
+            return
+        if self.parent is not None:
+            self.parent.prepare(clear=False)
+        self.window.ui.dialog['find'].show()
+        self.opened = True
+        self.window.ui.nodes['dialog.find.input'].setFocus()
+        current = self.get_search_string()
+        if current is not None and len(current) > 0:
+            if self.parent is not None:
+                self.parent.find(current)
+
+    def close(self, reset: bool = True):
+        """
+        Close finder dialog
+
+        :param reset: Reset highlights
+        """
+        if reset and self.parent is not None:
+            self.parent.reset()
+        self.window.ui.dialog['find'].hide()
+        self.opened = False
+
+    def clear(self, restore: bool = False, to_end: bool = True):
+        """
+        Clear current parent highlights
+
+        :param restore: Restore original content
+        :param to_end: Move cursor to the end
+        """
+        if self.parent is not None:
+            self.parent.clear(restore, to_end)
+        self.update_counter()
+
+    def clear_input(self):
+        """Clear input text"""
+        self.window.ui.nodes['dialog.find.input'].clear()
+        if self.parent is not None:
+            self.parent.find("")
+
+    def update_counter(self):
+        """Update counter for current parent"""
+        if not self.opened:
+            return
+        self.window.ui.nodes['dialog.find.counter'].setText("0/0")
+        if self.parent is None:
+            return
+        current = 0
+        total_found = 0
+        if isinstance(self.parent.matches, list):
+            current = self.parent.current_match_index + 1 if self.parent.current_match_index >= 0 else 0
+            total_found = len(self.parent.matches)
+        elif isinstance(self.parent.matches, int):
+            current = self.parent.current_match_index if self.parent.current_match_index >= 0 else 0
+            total_found = self.parent.matches
+        self.window.ui.nodes['dialog.find.counter'].setText("{}/{}".format(current, total_found))
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/ui/layout/ctx/search_input.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/layout/ctx/search_input.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/ui/layout/ctx/video.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/layout/ctx/video.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/ui/layout/status.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/layout/status.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/ui/layout/toolbox/__init__.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/layout/toolbox/__init__.py`

 * *Files 1% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.01.27 11:00:00                  #
+# Updated Date: 2024.04.27 14:00:00                  #
 # ================================================== #
 
 from PySide6.QtGui import Qt
 from PySide6.QtWidgets import QSplitter, QVBoxLayout, QWidget
 
 from pygpt_net.ui.layout.toolbox.assistants import Assistants
 from pygpt_net.ui.layout.toolbox.indexes import Indexes
@@ -49,15 +49,15 @@
         # mode / model
         self.window.ui.splitters['toolbox.mode'] = QSplitter(Qt.Horizontal)
         self.window.ui.splitters['toolbox.mode'].addWidget(self.mode.setup())  # modes
         self.window.ui.splitters['toolbox.mode'].addWidget(self.model.setup())  # models
 
         # presets / assistants
         self.window.ui.splitters['toolbox.presets'] = QSplitter(Qt.Horizontal)
-        self.window.ui.splitters['toolbox.presets'].addWidget(self.indexes.setup())  # indexes
+        # self.window.ui.splitters['toolbox.presets'].addWidget(self.indexes.setup())  # indexes
         self.window.ui.splitters['toolbox.presets'].addWidget(self.presets.setup())  # prompts
         self.window.ui.splitters['toolbox.presets'].addWidget(self.assistants.setup())  # assistants
 
         bottom = QVBoxLayout()
         bottom.addWidget(self.prompt.setup())
         bottom.addWidget(self.footer.setup())
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/ui/layout/toolbox/agent.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/layout/toolbox/agent.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/ui/layout/toolbox/assistants.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/dialog/profile.py`

 * *Files 19% similar despite different names*

```diff
@@ -2,121 +2,117 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.01.27 11:00:00                  #
+# Updated Date: 2024.04.09 23:00:00                  #
 # ================================================== #
 
-from PySide6 import QtCore
-from PySide6.QtGui import QStandardItemModel, Qt
-from PySide6.QtWidgets import QVBoxLayout, QHBoxLayout, QPushButton, QWidget
+from PySide6.QtGui import QStandardItemModel
+from PySide6.QtWidgets import QPushButton, QHBoxLayout, QVBoxLayout
 
-from pygpt_net.ui.widget.element.labels import HelpLabel, TitleLabel
-from pygpt_net.ui.widget.lists.assistant import AssistantList
+from pygpt_net.ui.widget.dialog.profile import ProfileDialog, ProfileEditDialog
+from pygpt_net.ui.widget.element.labels import HelpLabel
+from pygpt_net.ui.widget.lists.profile import ProfileList
 from pygpt_net.utils import trans
 
 
-class Assistants:
+class Profile:
     def __init__(self, window=None):
         """
-        Toolbox UI
+        Profile editor dialog
 
         :param window: Window instance
         """
         self.window = window
-        self.id = 'assistants'
+        self.dialog_id = "profile.editor"
 
-    def setup(self) -> QWidget:
-        """
-        Setup assistants
-
-        :return: QWidget
-        """
-        layout = self.setup_assistants()
-
-        self.window.ui.nodes['assistants.widget'] = QWidget()
-        self.window.ui.nodes['assistants.widget'].setLayout(layout)
-        self.window.ui.nodes['assistants.widget'].setMinimumHeight(150)
-
-        return self.window.ui.nodes['assistants.widget']
-
-    def setup_assistants(self) -> QVBoxLayout:
-        """
-        Setup list of assistants
-
-        :return: QVBoxLayout
-        """
-        # new
-        self.window.ui.nodes['assistants.new'] = QPushButton(trans('assistant.new'))
-        self.window.ui.nodes['assistants.new'].clicked.connect(
-            lambda: self.window.controller.assistant.editor.edit())
-
-        # import
-        self.window.ui.nodes['assistants.import'] = QPushButton(trans('assistant.import'))
-        self.window.ui.nodes['assistants.import'].clicked.connect(
-            lambda: self.window.controller.assistant.import_api())
-
-        # label
-        self.window.ui.nodes['assistants.label'] = TitleLabel(trans("toolbox.assistants.label"))
-
-        # header
-        header = QHBoxLayout()
-        header.addWidget(self.window.ui.nodes['assistants.label'])
-        header.addStretch(1)
-        header.addWidget(self.window.ui.nodes['assistants.import'], alignment=Qt.AlignRight)
-        header.addWidget(self.window.ui.nodes['assistants.new'], alignment=Qt.AlignRight)
-        header.setContentsMargins(0, 0, 0, 0)
-        header_widget = QWidget()
-        header_widget.setLayout(header)
+    def setup(self):
+        """Setup presets editor dialog"""
+        self.window.ui.nodes['profile.editor.btn.new'] = \
+            QPushButton(trans("dialog.profile.new"))
+
+        self.window.ui.nodes['profile.editor.btn.new'].clicked.connect(
+            lambda: self.window.controller.settings.profile.new()
+        )
+
+        # set enter key to save button
+        self.window.ui.nodes['profile.editor.btn.new'].setAutoDefault(False)
+
+        # footer buttons
+        footer = QHBoxLayout()
+        footer.addWidget(self.window.ui.nodes['profile.editor.btn.new'])
+        # footer.addWidget(self.window.ui.nodes[profile.editor.btn.save'])
 
         # list
-        self.window.ui.nodes[self.id] = AssistantList(self.window, self.id)
-        self.window.ui.nodes[self.id].selection_locked = self.window.controller.assistant.change_locked
-        self.window.ui.nodes[self.id].setMinimumWidth(40)
-
-        self.window.ui.nodes['tip.toolbox.assistants'] = HelpLabel(trans('tip.toolbox.assistants'), self.window)
+        id = 'profile.list'
+        self.window.ui.nodes[id] = ProfileList(self.window, id)
+        self.window.ui.models[id] = self.create_model(self.window)
+        self.window.ui.nodes[id].setModel(self.window.ui.models[id])
+
+        # get
+        data = self.window.controller.settings.profile.get_profiles()
+
+        # update list
+        self.update_list(id, data)
+
+        self.window.ui.nodes['profile.editor.tip'] = HelpLabel(trans("dialog.profile.tip"))
+
+        main_layout = QVBoxLayout()
+        main_layout.addWidget(self.window.ui.nodes[id])
+        main_layout.addWidget(self.window.ui.nodes['profile.editor.tip'])
 
-        # rows
         layout = QVBoxLayout()
-        layout.addWidget(header_widget)
-        layout.addWidget(self.window.ui.nodes[self.id])
-        layout.addWidget(self.window.ui.nodes['tip.toolbox.assistants'])
-
-        # model
-        self.window.ui.models[self.id] = self.create_model(self.window)
-        self.window.ui.nodes[self.id].setModel(self.window.ui.models[self.id])
+        layout.addLayout(main_layout)  # list
+        layout.addLayout(footer)  # bottom buttons (save, new)
 
-        return layout
+        self.window.ui.dialog[self.dialog_id] = ProfileDialog(self.window, self.dialog_id)
+        self.window.ui.dialog[self.dialog_id].setLayout(layout)
+        self.window.ui.dialog[self.dialog_id].setWindowTitle(trans('dialog.profile.editor'))
 
     def create_model(self, parent) -> QStandardItemModel:
         """
         Create list model
 
         :param parent: parent widget
         :return: QStandardItemModel
         """
         return QStandardItemModel(0, 1, parent)
 
-    def update(self, data):
+    def update_list(self, id: str, data: dict):
         """
-        Update list of assistants
+        Update list
 
+        :param id: ID of the list
         :param data: Data to update
         """
-        # store previous selection
-        self.window.ui.nodes[self.id].backup_selection()
+        if id not in self.window.ui.models:
+            return
 
-        self.window.ui.models[self.id].removeRows(0, self.window.ui.models[self.id].rowCount())
+        current = self.window.core.config.profile.get_current()
+        self.window.ui.models[id].removeRows(0, self.window.ui.models[id].rowCount())
         i = 0
         for n in data:
-            self.window.ui.models[self.id].insertRow(i)
-            name = data[n].name
-            index = self.window.ui.models[self.id].index(i, 0)
-            self.window.ui.models[self.id].setData(index, "ID: " + data[n].id, QtCore.Qt.ToolTipRole)
-            self.window.ui.models[self.id].setData(self.window.ui.models[self.id].index(i, 0), name)
+            self.window.ui.models[id].insertRow(i)
+            name = data[n]['name']
+            if n == current:
+                name += " " + trans("profile.current.suffix")
+            index = self.window.ui.models[id].index(i, 0)
+            self.window.ui.models[id].setData(index, name)
             i += 1
 
-        # restore previous selection
-        self.window.ui.nodes[self.id].restore_selection()
+class ProfileEdit:
+    def __init__(self, window=None):
+        """
+        Profile edit dialog
+
+        :param window: Window instance
+        """
+        self.window = window
+
+    def setup(self):
+        """Setup dialog"""
+        id = 'profile.item'
+        self.window.ui.dialog[id] = ProfileEditDialog(self.window, id)
+        self.window.ui.dialog[id].setWindowTitle(trans("dialog.profile.item.editor"))
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/ui/layout/toolbox/footer.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/layout/toolbox/footer.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/ui/layout/toolbox/image.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/layout/toolbox/image.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/ui/layout/toolbox/indexes.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/layout/toolbox/indexes.py`

 * *Files 18% similar despite different names*

```diff
@@ -2,23 +2,24 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.01.27 11:00:00                  #
+# Updated Date: 2024.04.27 14:00:00                  #
 # ================================================== #
 
 from PySide6 import QtCore
 from PySide6.QtGui import QStandardItemModel, Qt
-from PySide6.QtWidgets import QVBoxLayout, QLabel, QHBoxLayout, QPushButton, QWidget, QCheckBox
+from PySide6.QtWidgets import QVBoxLayout, QLabel, QHBoxLayout, QPushButton, QWidget, QCheckBox, QSizePolicy
 
 from pygpt_net.ui.widget.element.labels import HelpLabel, TitleLabel
 from pygpt_net.ui.widget.lists.index import IndexList
+from pygpt_net.ui.widget.lists.index_combo import IndexCombo
 from pygpt_net.utils import trans
 
 
 class Indexes:
     def __init__(self, window=None):
         """
         Toolbox UI
@@ -72,15 +73,15 @@
 
         self.window.ui.nodes['tip.toolbox.indexes'] = HelpLabel(trans('tip.toolbox.indexes'), self.window)
 
         # rows
         layout = QVBoxLayout()
         layout.addWidget(header_widget)
         layout.addWidget(self.window.ui.nodes[self.id])
-        layout.addWidget(self.window.ui.nodes['tip.toolbox.indexes'])
+        #layout.addWidget(self.window.ui.nodes['tip.toolbox.indexes'])
 
         # model
         self.window.ui.models[self.id] = self.create_model(self.window)
         self.window.ui.nodes[self.id].setModel(self.window.ui.models[self.id])
 
         return layout
 
@@ -102,18 +103,56 @@
         # label
         label = QLabel(trans("toolbox.llama_index.label"))
 
         # add options
         cols = QHBoxLayout()
         cols.addWidget(self.window.ui.config['global']['llama.idx.raw'])
 
+        # index combo
+        option = {
+            "name": "current_index",
+            "label": "toolbox.llama_index.current_index",
+            "keys": [],
+            "value": None,
+        }
+        self.window.ui.nodes['indexes.select'] = IndexCombo(
+            self.window,
+            'global',
+            'current_index',
+            option
+        )
+        self.window.ui.nodes['indexes.select'].setSizePolicy(QSizePolicy.Expanding, QSizePolicy.Fixed)
+
+        # tip
+        self.window.ui.nodes['tip.toolbox.indexes'] = HelpLabel(trans('tip.toolbox.indexes'), self.window)
+
+        # new
+        self.window.ui.nodes['indexes.new'] = QPushButton(trans('idx.new'))
+        self.window.ui.nodes['indexes.new'].clicked.connect(
+            lambda: self.window.controller.settings.open_section('llama-index'))
+
+        # label
+        self.window.ui.nodes['indexes.label'] = TitleLabel(trans("toolbox.indexes.label"))
+
+        idx_layout = QHBoxLayout()
+        idx_layout.addWidget(self.window.ui.nodes['indexes.label'])
+        idx_layout.addWidget(self.window.ui.nodes['indexes.select'])
+        idx_layout.addWidget(self.window.ui.nodes['indexes.new'], alignment=Qt.AlignRight)
+        idx_layout.setContentsMargins(0, 0, 0, 10)
+        idx_widget = QWidget()
+        idx_widget.setLayout(idx_layout)
+        idx_widget.setMinimumHeight(55)
+        idx_widget.setMinimumWidth(275)
+
         # rows
         rows = QVBoxLayout()
         rows.addWidget(label)
-        rows.addLayout(cols)
+        rows.addWidget(idx_widget)
+        rows.addLayout(cols)  # raw option
+        rows.addWidget(self.window.ui.nodes['tip.toolbox.indexes'])
 
         self.window.ui.nodes['idx.options'] = QWidget()
         self.window.ui.nodes['idx.options'].setLayout(rows)
         self.window.ui.nodes['idx.options'].setContentsMargins(0, 0, 0, 0)
 
         return self.window.ui.nodes['idx.options']
 
@@ -128,14 +167,25 @@
 
     def update(self, data):
         """
         Update list of indexes
 
         :param data: Data to update
         """
+        # combo box
+        combo_keys = []
+        for item in data:
+            name = item['name']
+            if name == "":
+                name = item['id']
+            combo_keys.append({
+                item['id']: name
+            })
+        self.window.ui.nodes['indexes.select'].set_keys(combo_keys)
+        """
         # store previous selection
         self.window.ui.nodes[self.id].backup_selection()
 
         self.window.ui.models[self.id].removeRows(0, self.window.ui.models[self.id].rowCount())
         i = 0
         for item in data:
             self.window.ui.models[self.id].insertRow(i)
@@ -143,7 +193,8 @@
             index = self.window.ui.models[self.id].index(i, 0)
             self.window.ui.models[self.id].setData(index, "ID: " + item['id'], QtCore.Qt.ToolTipRole)
             self.window.ui.models[self.id].setData(self.window.ui.models[self.id].index(i, 0), name)
             i += 1
 
         # restore previous selection
         self.window.ui.nodes[self.id].restore_selection()
+        """
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/ui/layout/toolbox/mode.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/layout/toolbox/mode.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/ui/layout/toolbox/model.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/layout/toolbox/model.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/ui/layout/toolbox/presets.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/layout/toolbox/presets.py`

 * *Files 1% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.01.27 11:00:00                  #
+# Updated Date: 2024.03.15 15:00:00                  #
 # ================================================== #
 
 from PySide6 import QtCore
 from PySide6.QtGui import QStandardItemModel, Qt
 from PySide6.QtWidgets import QVBoxLayout, QLabel, QHBoxLayout, QPushButton, QSplitter, QWidget
 
 from pygpt_net.ui.widget.element.labels import HelpLabel, TitleLabel
@@ -73,16 +73,14 @@
         self.window.ui.nodes['tip.toolbox.presets'] = HelpLabel(trans('tip.toolbox.presets'), self.window)
 
         layout = QVBoxLayout()
         layout.addWidget(header_widget)
         layout.addWidget(self.window.ui.nodes[self.id])
         layout.addWidget(self.window.ui.nodes['tip.toolbox.presets'])
 
-
-
         self.window.ui.models[self.id] = self.create_model(self.window)
         self.window.ui.nodes[self.id].setModel(self.window.ui.models[self.id])
 
         return layout
 
     def create_model(self, parent) -> QStandardItemModel:
         """
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/ui/layout/toolbox/prompt.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/layout/toolbox/prompt.py`

 * *Files 12% similar despite different names*

```diff
@@ -2,22 +2,22 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.01.30 17:00:00                  #
+# Updated Date: 2024.03.15 15:00:00                  #
 # ================================================== #
 
 from PySide6.QtGui import Qt
 from PySide6.QtWidgets import QVBoxLayout, QHBoxLayout, QPushButton, QWidget, QCheckBox, QSizePolicy
 
 from pygpt_net.ui.widget.element.labels import HelpLabel, TitleLabel
-from pygpt_net.ui.widget.option.textarea import OptionTextarea
+from pygpt_net.ui.widget.option.prompt import PromptTextarea
 from pygpt_net.utils import trans
 
 
 class Prompt:
     def __init__(self, window=None):
         """
         Toolbox UI
@@ -59,21 +59,16 @@
         header.addWidget(self.window.ui.nodes['cmd.enabled'])
         header.addStretch(1)
         header.addWidget(self.window.ui.nodes['preset.use'], alignment=Qt.AlignRight)
         header.addWidget(self.window.ui.nodes['preset.clear'], alignment=Qt.AlignRight)
 
         # prompt
         option = self.window.controller.presets.editor.get_option('prompt')
-        self.window.ui.nodes['preset.prompt'] = OptionTextarea(self.window, 'preset', 'prompt', option)
-        self.window.ui.nodes['preset.prompt'].real_time = True
-        self.window.ui.nodes['preset.prompt'].update_ui = False
+        self.window.ui.nodes['preset.prompt'] = PromptTextarea(self.window, 'preset', 'prompt', option)
         self.window.ui.nodes['preset.prompt'].setSizePolicy(QSizePolicy.Expanding, QSizePolicy.Expanding)
-        self.window.ui.nodes['preset.prompt'].textChanged.connect(
-            lambda: self.window.controller.ui.update_tokens())
-
         self.window.ui.nodes['tip.toolbox.prompt'] = HelpLabel(trans('tip.toolbox.prompt'), self.window)
 
         # rows
         layout = QVBoxLayout()
         layout.addLayout(header)
         layout.addWidget(self.window.ui.nodes['preset.prompt'])
         layout.addWidget(self.window.ui.nodes['tip.toolbox.prompt'])
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/ui/layout/toolbox/vision.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/layout/toolbox/vision.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/ui/main.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/main.py`

 * *Files 17% similar despite different names*

```diff
@@ -2,23 +2,26 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.24 00:00:00                  #
+# Updated Date: 2024.04.20 22:00:00                  #
 # ================================================== #
 
-from PySide6.QtCore import QTimer, Signal, Slot, QThreadPool, QEvent, Qt
+import os
+
+from PySide6.QtCore import QTimer, Signal, Slot, QThreadPool, QEvent, Qt, QLoggingCategory
 from PySide6.QtWidgets import QApplication, QMainWindow
 from qt_material import QtStyleTools
 
 from pygpt_net.container import Container
 from pygpt_net.controller import Controller
+from pygpt_net.tools import Tools
 from pygpt_net.ui import UI
 from pygpt_net.utils import get_app_meta
 
 
 class MainWindow(QMainWindow, QtStyleTools):
 
     # states
@@ -26,14 +29,15 @@
     STATE_BUSY = 'busy'
     STATE_ERROR = 'error'
 
     # signals
     statusChanged = Signal(str)
     stateChanged = Signal(str)
     logger_message = Signal(object)
+    idx_logger_message = Signal(object)
 
     def __init__(self, app: QApplication, args: dict = None):
         """
         Main window
 
         :param app: QApplication instance
         :param args: launcher arguments
@@ -56,31 +60,66 @@
         self.meta = get_app_meta()
 
         # setup service container
         self.core = Container(self)
         self.core.init()
         self.core.patch()  # patch version if needed
 
+        # before render, handle engine args
+        self.handle_engine_args()
+
         # setup thread pool
         self.threadpool = QThreadPool()
 
-        # setup controllers
+        # setup controller
         self.controller = Controller(self)
 
+        # setup tools
+        self.tools = Tools(self)
+
         # init, load settings options, etc.
         self.controller.init()
 
         # setup UI
         self.ui = UI(self)
         self.ui.init()
 
         # setup signals
         self.statusChanged.connect(self.update_status)
         self.stateChanged.connect(self.update_state)
 
+    def handle_engine_args(self):
+        """Handle launcher arguments"""
+        render_debug = False
+        if self.args is not None:
+            if "debug" in self.args and (self.args["debug"] == "1" or self.args["debug"] == "2"):
+                render_debug = True
+            if "legacy" in self.args and self.args["legacy"] == "1":
+                self.core.config.set("render.engine", "legacy")
+            if "disable-gpu" in self.args and self.args["disable-gpu"] == "1":
+                self.core.config.set("render.open_gl", False)
+
+        # from log level
+        if self.core.config.get("log.level") in ["debug", "info"]:
+            render_debug = True
+
+        # disable/enable logging web engine context
+        if not render_debug:
+            log = QLoggingCategory("qt.webenginecontext")
+            log.setFilterRules("*.info=false")
+        else:
+            os.environ["QTWEBENGINE_CHROMIUM_FLAGS"] = "--enable-logging --log-level=0"
+
+        # OpenGL disable
+        if self.core.config.get("render.open_gl") is False:
+            if "QTWEBENGINE_CHROMIUM_FLAGS" in os.environ:
+                os.environ["QTWEBENGINE_CHROMIUM_FLAGS"] += " --disable-gpu"
+            else:
+                os.environ["QTWEBENGINE_CHROMIUM_FLAGS"] = "--disable-gpu"
+
     def add_plugin(self, plugin):
         """
         Add plugin to app
 
         :param plugin: plugin instance
         """
         self.core.plugins.register(plugin)
@@ -129,17 +168,26 @@
         """
         Add web provider to app
 
         :param provider: web provider instance
         """
         self.core.web.register(provider)
 
+    def add_tool(self, tool):
+        """
+        Add tool to app
+
+        :param tool: tool instance
+        """
+        self.tools.register(tool)
+
     def setup(self):
         """Setup app"""
         self.controller.setup()
+        self.tools.setup()
         self.controller.plugins.setup()
         self.controller.post_setup()
 
     def post_setup(self):
         """Called after setup"""
         self.controller.layout.post_setup()
         self.timer = QTimer()
@@ -149,24 +197,27 @@
         self.post_timer.timeout.connect(self.post_update)
         self.post_timer.start(self.post_timer_interval)
         self.update_timer = QTimer()
         self.update_timer.timeout.connect(self.core.updater.run_check)
         self.update_timer.start(self.update_timer_interval)
         self.logger_message.connect(self.controller.debug.handle_log)
         self.ui.post_setup()
+        self.tools.post_setup()
 
     def update(self):
         """Called on every update"""
         self.controller.on_update()
         self.controller.plugins.on_update()
+        self.tools.on_update()
 
     def post_update(self):
         """Called on post-update (slow)"""
-        self.controller.debug.on_update()
+        self.controller.debug.on_post_update()
         self.controller.plugins.on_post_update()
+        self.tools.on_post_update()
 
     @Slot(str)
     def update_status(self, text: str):
         """
         Update status text
 
         :param text: status text
@@ -195,20 +246,24 @@
             return
 
         self.is_closing = True
         print("Closing...")
         print("Sending terminate signal to all plugins...")
         self.controller.chat.common.stop(exit=True)
         self.controller.plugins.destroy()
+        print("Saving ctx groups...")
+        self.controller.ctx.save_all()
         print("Saving notepad...")
         self.controller.notepad.save_all()
         print("Saving calendar...")
         self.controller.calendar.save_all()
         print("Saving drawing...")
         self.controller.painter.save_all()
+        print("Saving tools...")
+        self.tools.on_exit()
         print("Saving layout state...")
         self.controller.layout.save()
         print("Stopping timers...")
         self.timer.stop()
         self.post_timer.stop()
         self.update_timer.stop()
         print("Saving config...")
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/ui/menu/__init__.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/menu/__init__.py`

 * *Files 4% similar despite different names*

```diff
@@ -2,25 +2,26 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.29 01:00:00                  #
+# Updated Date: 2024.03.25 10:00:00                  #
 # ================================================== #
 
 from .about import About
 from .audio import Audio
 from .config import Config
 from .debug import Debug
 from .file import File
 from .lang import Lang
 from .plugins import Plugins
 from .theme import Theme
+from .tools import Tools
 from .video import Video
 
 
 class Menu:
     def __init__(self, window=None):
         """
         Menu setup
@@ -32,23 +33,29 @@
         self.audio = Audio(window)
         self.config = Config(window)
         self.debug = Debug(window)
         self.file = File(window)
         self.lang = Lang(window)
         self.plugins = Plugins(window)
         self.theme = Theme(window)
+        self.tools = Tools(window)
         self.video = Video(window)
 
     def setup(self):
         """Setup all menus"""
         self.window.ui.menu = {}
         self.file.setup()
         self.plugins.setup()
         self.audio.setup()
         self.video.setup()
         self.config.setup()
         self.about.setup()
 
+    def post_setup(self):
+        """Post setup menus"""
+        # tools menu
+        self.tools.setup()
+
         # debug menu
         show = self.window.core.config.get('debug')
         self.debug.setup()
         self.window.ui.menu['menu.debug'].menuAction().setVisible(show)
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/ui/menu/about.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/menu/about.py`

 * *Files 2% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.16 16:00:00                  #
+# Updated Date: 2024.04.19 01:00:00                  #
 # ================================================== #
 
 from PySide6.QtGui import QAction, QIcon
 
 from pygpt_net.utils import trans
 import pygpt_net.icons_rc
 
@@ -43,14 +43,17 @@
                                                    self.window)
         self.window.ui.menu['info.github'] = QAction(QIcon(":/icons/public_filled.svg"), trans("menu.info.github"),
                                                      self.window)
 
         self.window.ui.menu['info.license'] = QAction(QIcon(":/icons/info.svg"), trans("menu.info.license"),
                                                       self.window)
 
+        self.window.ui.menu['info.donate'] = QAction(QIcon(":/icons/favorite.svg"), trans("menu.info.donate"),
+                                                      self.window)
+
         self.window.ui.menu['info.about'].triggered.connect(
             lambda: self.window.controller.dialogs.info.toggle('about'))
         self.window.ui.menu['info.changelog'].triggered.connect(
             lambda: self.window.controller.dialogs.info.toggle('changelog'))
         self.window.ui.menu['info.updates'].triggered.connect(
             lambda: self.window.controller.launcher.check_updates())
         self.window.ui.menu['info.website'].triggered.connect(
@@ -65,18 +68,21 @@
             lambda: self.window.controller.dialogs.info.goto_github())
         self.window.ui.menu['info.license'].triggered.connect(
             lambda: self.window.controller.dialogs.info.toggle(
                 'license',
                 width=500,
                 height=480,
             ))
+        self.window.ui.menu['info.donate'].triggered.connect(
+            lambda: self.window.controller.dialogs.info.goto_donate())
 
         self.window.ui.menu['menu.about'] = self.window.menuBar().addMenu(trans("menu.info"))
         self.window.ui.menu['menu.about'].addAction(self.window.ui.menu['info.about'])
         self.window.ui.menu['menu.about'].addAction(self.window.ui.menu['info.changelog'])
         self.window.ui.menu['menu.about'].addAction(self.window.ui.menu['info.updates'])
         self.window.ui.menu['menu.about'].addAction(self.window.ui.menu['info.docs'])
         self.window.ui.menu['menu.about'].addAction(self.window.ui.menu['info.pypi'])
         self.window.ui.menu['menu.about'].addAction(self.window.ui.menu['info.snap'])
         self.window.ui.menu['menu.about'].addAction(self.window.ui.menu['info.website'])
         self.window.ui.menu['menu.about'].addAction(self.window.ui.menu['info.github'])
         self.window.ui.menu['menu.about'].addAction(self.window.ui.menu['info.license'])
+        self.window.ui.menu['menu.about'].addAction(self.window.ui.menu['info.donate'])
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/ui/menu/audio.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/menu/audio.py`

 * *Files 2% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.27 18:00:00                  #
+# Updated Date: 2024.03.20 06:00:00                  #
 # ================================================== #
 
 from PySide6.QtGui import QAction
 
 from pygpt_net.utils import trans
 
 
@@ -38,10 +38,11 @@
 
         self.window.ui.menu['audio.output'].triggered.connect(
             lambda: self.window.controller.plugins.toggle('audio_output')
         )
         self.window.ui.menu['audio.input'].triggered.connect(
             lambda: self.window.controller.plugins.toggle('audio_input')
         )
+
         self.window.ui.menu['menu.audio'] = self.window.menuBar().addMenu(trans("menu.audio"))
         self.window.ui.menu['menu.audio'].addAction(self.window.ui.menu['audio.input'])
         self.window.ui.menu['menu.audio'].addAction(self.window.ui.menu['audio.output'])
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/ui/menu/config.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/menu/debug.py`

 * *Files 19% similar despite different names*

```diff
@@ -2,107 +2,81 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.16 16:00:00                  #
+# Updated Date: 2024.03.06 02:00:00                  #
 # ================================================== #
 
-from PySide6.QtGui import QAction, QIcon
-from PySide6.QtWidgets import QMenu
+from PySide6.QtGui import QAction
 
 from pygpt_net.utils import trans
-import pygpt_net.icons_rc
 
-from .lang import Lang
-from .theme import Theme
 
-
-class Config:
+class Debug:
     def __init__(self, window=None):
         """
         Menu setup
 
         :param window: Window instance
         """
         self.window = window
-        self.lang = Lang(window)
-        self.theme = Theme(window)
 
     def setup(self):
-        """Setup config menu"""
-        self.window.ui.menu['config.settings'] = QAction(QIcon(":/icons/settings_filled.svg"),
-                                                         trans("menu.config.settings"), self.window)
-        self.window.ui.menu['config.settings'].setMenuRole(QAction.MenuRole.NoRole)
-
-        self.window.ui.menu['config.models'] = QAction(QIcon(":/icons/settings_filled.svg"),
-                                                       trans("menu.config.models"), self.window)
-
-        css_files = []
-        css_files.append("style.css")
-        css_files.append("style.dark.css")
-        css_files.append("style.light.css")
-        css_files.append("markdown.css")
-        css_files.append("markdown.dark.css")
-        css_files.append("markdown.light.css")
-
-        json_files = []
-        json_files.append("attachments.json")
-        json_files.append("assistants.json")
-        json_files.append("config.json")
-        json_files.append("indexes.json")
-        json_files.append("models.json")
-
-        # create submenu for css files
-        self.window.ui.menu['config.edit.css'] = QMenu(trans("menu.config.edit.css"), self.window)
-
-        # create submenu for JSON files
-        self.window.ui.menu['config.edit.json'] = QMenu(trans("menu.config.edit.json"), self.window)
-
-        for css_file in css_files:
-            name = css_file.split("/")[-1]
-            self.window.ui.menu['config.edit.css.' + name] = QAction(QIcon(":/icons/edit.svg"),
-                                                                     name, self.window)
-            self.window.ui.menu['config.edit.css.' + name].triggered.connect(
-                lambda checked=True, file=css_file: self.window.controller.settings.toggle_file_editor(file))
-            self.window.ui.menu['config.edit.css'].addAction(self.window.ui.menu['config.edit.css.' + name])
-
-        for json_file in json_files:
-            name = json_file
-            self.window.ui.menu['config.edit.json.' + name] = QAction(QIcon(":/icons/edit.svg"),
-                                                                      name, self.window)
-            self.window.ui.menu['config.edit.json.' + name].triggered.connect(
-                lambda checked=True, file=json_file: self.window.controller.settings.toggle_file_editor(file))
-            self.window.ui.menu['config.edit.json'].addAction(self.window.ui.menu['config.edit.json.' + name])
-
-        self.window.ui.menu['config.open_dir'] = QAction(QIcon(":/icons/folder_filled.svg"),
-                                                         trans("menu.config.open_dir"), self.window)
-        self.window.ui.menu['config.save'] = QAction(QIcon(":/icons/save.svg"),
-                                                     trans("menu.config.save"), self.window)
-
-        self.window.ui.menu['config.settings'].triggered.connect(
-            lambda: self.window.controller.settings.toggle_editor('settings'))
-
-        self.window.ui.menu['config.models'].triggered.connect(
-            lambda: self.window.controller.model.editor.toggle_editor())
-
-        self.window.ui.menu['config.open_dir'].triggered.connect(
-            lambda: self.window.controller.settings.open_config_dir())
-
-        self.window.ui.menu['config.save'].triggered.connect(
-            lambda: self.window.controller.settings.save_all())
-
-        self.lang.setup()
-        self.theme.setup()
-
-        self.window.ui.menu['menu.config'] = self.window.menuBar().addMenu(trans("menu.config"))
-        self.window.ui.menu['menu.config'].addAction(self.window.ui.menu['config.settings'])
-        self.window.ui.menu['menu.config'].addAction(self.window.ui.menu['config.models'])
-
-        self.window.ui.menu['menu.config'].addMenu(self.window.ui.menu['menu.theme'])
-        self.window.ui.menu['menu.config'].addMenu(self.window.ui.menu['menu.lang'])
-        self.window.ui.menu['menu.config'].addMenu(self.window.ui.menu['config.edit.css'])
-        self.window.ui.menu['menu.config'].addMenu(self.window.ui.menu['config.edit.json'])
-        self.window.ui.menu['menu.config'].addAction(self.window.ui.menu['config.open_dir'])
-        self.window.ui.menu['menu.config'].addAction(self.window.ui.menu['config.save'])
+        """Setup debug menu"""
+        self.window.ui.menu['debug.config'] = QAction(trans("menu.debug.config"), self.window, checkable=True)
+        self.window.ui.menu['debug.context'] = QAction(trans("menu.debug.context"), self.window, checkable=True)
+        self.window.ui.menu['debug.presets'] = QAction(trans("menu.debug.presets"), self.window, checkable=True)
+        self.window.ui.menu['debug.models'] = QAction(trans("menu.debug.models"), self.window, checkable=True)
+        self.window.ui.menu['debug.plugins'] = QAction(trans("menu.debug.plugins"), self.window, checkable=True)
+        self.window.ui.menu['debug.attachments'] = QAction(trans("menu.debug.attachments"), self.window, checkable=True)
+        self.window.ui.menu['debug.assistants'] = QAction(trans("menu.debug.assistants"), self.window, checkable=True)
+        self.window.ui.menu['debug.agent'] = QAction(trans("menu.debug.agent"), self.window, checkable=True)
+        self.window.ui.menu['debug.indexes'] = QAction(trans("menu.debug.indexes"), self.window, checkable=True)
+        self.window.ui.menu['debug.ui'] = QAction(trans("menu.debug.ui"), self.window, checkable=True)
+        self.window.ui.menu['debug.db'] = QAction(trans("menu.debug.db"), self.window, checkable=True)
+        self.window.ui.menu['debug.logger'] = QAction(trans("menu.debug.logger"), self.window, checkable=True)
+        self.window.ui.menu['debug.app.log'] = QAction(trans("menu.debug.app.log"), self.window, checkable=True)
+
+        self.window.ui.menu['debug.config'].triggered.connect(
+            lambda: self.window.controller.debug.toggle('config'))
+        self.window.ui.menu['debug.context'].triggered.connect(
+            lambda: self.window.controller.debug.toggle('context'))
+        self.window.ui.menu['debug.presets'].triggered.connect(
+            lambda: self.window.controller.debug.toggle('presets'))
+        self.window.ui.menu['debug.models'].triggered.connect(
+            lambda: self.window.controller.debug.toggle('models'))
+        self.window.ui.menu['debug.plugins'].triggered.connect(
+            lambda: self.window.controller.debug.toggle('plugins'))
+        self.window.ui.menu['debug.attachments'].triggered.connect(
+            lambda: self.window.controller.debug.toggle('attachments'))
+        self.window.ui.menu['debug.assistants'].triggered.connect(
+            lambda: self.window.controller.debug.toggle('assistants'))
+        self.window.ui.menu['debug.agent'].triggered.connect(
+            lambda: self.window.controller.debug.toggle('agent'))
+        self.window.ui.menu['debug.indexes'].triggered.connect(
+            lambda: self.window.controller.debug.toggle('indexes'))
+        self.window.ui.menu['debug.logger'].triggered.connect(
+            lambda: self.window.controller.debug.toggle_logger())
+        self.window.ui.menu['debug.ui'].triggered.connect(
+            lambda: self.window.controller.debug.toggle('ui'))
+        self.window.ui.menu['debug.app.log'].triggered.connect(
+            lambda: self.window.controller.debug.toggle_app_log())
+        self.window.ui.menu['debug.db'].triggered.connect(
+            lambda: self.window.controller.debug.toggle('db'))
+
+        self.window.ui.menu['menu.debug'] = self.window.menuBar().addMenu(trans("menu.debug"))
+        self.window.ui.menu['menu.debug'].addAction(self.window.ui.menu['debug.config'])
+        self.window.ui.menu['menu.debug'].addAction(self.window.ui.menu['debug.context'])
+        self.window.ui.menu['menu.debug'].addAction(self.window.ui.menu['debug.presets'])
+        self.window.ui.menu['menu.debug'].addAction(self.window.ui.menu['debug.models'])
+        self.window.ui.menu['menu.debug'].addAction(self.window.ui.menu['debug.plugins'])
+        self.window.ui.menu['menu.debug'].addAction(self.window.ui.menu['debug.attachments'])
+        self.window.ui.menu['menu.debug'].addAction(self.window.ui.menu['debug.assistants'])
+        self.window.ui.menu['menu.debug'].addAction(self.window.ui.menu['debug.indexes'])
+        self.window.ui.menu['menu.debug'].addAction(self.window.ui.menu['debug.agent'])
+        self.window.ui.menu['menu.debug'].addAction(self.window.ui.menu['debug.ui'])
+        self.window.ui.menu['menu.debug'].addAction(self.window.ui.menu['debug.db'])
+        self.window.ui.menu['menu.debug'].addAction(self.window.ui.menu['debug.logger'])
+        self.window.ui.menu['menu.debug'].addAction(self.window.ui.menu['debug.app.log'])
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/ui/menu/lang.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/menu/lang.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/ui/menu/theme.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/menu/theme.py`

 * *Files 10% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.16 16:00:00                  #
+# Updated Date: 2024.04.24 02:00:00                  #
 # ================================================== #
 
 from PySide6.QtGui import QAction, QIcon
 from PySide6.QtWidgets import QMenu
 
 from pygpt_net.utils import trans
 import pygpt_net.icons_rc
@@ -24,24 +24,33 @@
         :param window: Window instance
         """
         self.window = window
 
     def setup(self):
         """Setup theme menu"""
         self.window.ui.menu['theme'] = {}
+        self.window.ui.menu['theme_syntax'] = {}
         self.window.ui.menu['theme.layout.density'] = {}
         self.window.ui.menu['menu.theme'] = QMenu(trans("menu.theme"), self.window)
 
         # color themes
         self.window.ui.menu['theme.dark'] = QMenu(trans("menu.theme.dark"), self.window)
         self.window.ui.menu['theme.light'] = QMenu(trans("menu.theme.light"), self.window)
+        self.window.ui.menu['theme.syntax'] = QMenu(trans("menu.theme.syntax"), self.window)
 
         # layout density
         self.window.ui.menu['theme.density'] = QMenu(trans("menu.theme.density"), self.window)
 
+        # blocks
+        self.window.ui.menu['theme.blocks'] = QAction(trans("menu.theme.blocks"), self.window, checkable=True)
+        self.window.ui.menu['theme.blocks'].triggered.connect(
+            lambda: self.window.controller.theme.toggle_option('render.blocks'))
+        self.window.ui.menu['theme.blocks'].setCheckable(True)
+        self.window.ui.menu['theme.blocks'].setChecked(self.window.core.config.get('render.blocks'))
+
         # tooltips
         self.window.ui.menu['theme.tooltips'] = QAction(trans("menu.theme.tooltips"), self.window, checkable=True)
         self.window.ui.menu['theme.tooltips'].triggered.connect(
             lambda: self.window.controller.theme.toggle_option('layout.tooltips'))
         self.window.ui.menu['theme.tooltips'].setCheckable(True)
         self.window.ui.menu['theme.tooltips'].setChecked(self.window.core.config.get('layout.tooltips'))
 
@@ -51,10 +60,12 @@
         self.window.ui.menu['theme.settings'].setMenuRole(QAction.MenuRole.NoRole)
 
         self.window.ui.menu['theme.settings'].triggered.connect(
             lambda: self.window.controller.settings.open_section('layout'))
 
         self.window.ui.menu['menu.theme'].addMenu(self.window.ui.menu['theme.dark'])
         self.window.ui.menu['menu.theme'].addMenu(self.window.ui.menu['theme.light'])
+        self.window.ui.menu['menu.theme'].addMenu(self.window.ui.menu['theme.syntax'])
         self.window.ui.menu['menu.theme'].addMenu(self.window.ui.menu['theme.density'])
+        self.window.ui.menu['menu.theme'].addAction(self.window.ui.menu['theme.blocks'])
         self.window.ui.menu['menu.theme'].addAction(self.window.ui.menu['theme.tooltips'])
         self.window.ui.menu['menu.theme'].addAction(self.window.ui.menu['theme.settings'])
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/ui/menu/video.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/menu/video.py`

 * *Files 2% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.29 01:00:00                  #
+# Updated Date: 2024.03.20 06:00:00                  #
 # ================================================== #
 
 from PySide6.QtGui import QAction
 
 from pygpt_net.utils import trans
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/ui/tray.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/tray.py`

 * *Files 4% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.01 22:00:00                  #
+# Updated Date: 2024.04.14 20:00:00                  #
 # ================================================== #
 
 from PySide6.QtGui import QAction, QIcon
 from PySide6.QtWidgets import QSystemTrayIcon, QMenu
 
 from pygpt_net.utils import trans
 import pygpt_net.icons_rc
@@ -123,26 +123,26 @@
         self.window.ui.tray_menu['exit'] = action
         self.window.ui.tray_menu['exit'].triggered.connect(app.quit)
 
         menu = QMenu(self.window)
         menu.addAction(self.window.ui.tray_menu['restore'])
         menu.addAction(self.window.ui.tray_menu['new'])
         menu.addAction(self.window.ui.tray_menu['scheduled'])
-        menu.addAction(self.window.ui.tray_menu['update'])
         menu.addAction(self.window.ui.tray_menu['open_notepad'])
         menu.addAction(self.window.ui.tray_menu['screenshot'])
+        menu.addAction(self.window.ui.tray_menu['update'])
         menu.addAction(self.window.ui.tray_menu['exit'])
         self.icon.activated.connect(self.window.tray_toggle)
         self.icon.setContextMenu(menu)
         self.icon.show()
 
     def new_ctx(self):
         """Create new context"""
         self.window.restore()
-        self.window.controller.ctx.new()
+        self.window.controller.ctx.new_ungrouped()  # new context without group
 
     def open_notepad(self):
         """Open notepad"""
         self.window.restore()
         self.window.controller.notepad.open()
 
     def open_scheduled_tasks(self):
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/ui/widget/audio/input.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/widget/audio/input.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/ui/widget/audio/input_button.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/widget/audio/input_button.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/ui/widget/audio/output.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/widget/audio/output.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/ui/widget/calendar/select.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/widget/calendar/select.py`

 * *Files 4% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.17 15:00:00                  #
+# Updated Date: 2024.04.27 10:00:00                  #
 # ================================================== #
 
 from PySide6.QtCore import QRect, QDate
 from PySide6.QtGui import QColor, QBrush, QFont, Qt, QAction, QContextMenuEvent, QIcon, QPixmap, QPen
 from PySide6.QtWidgets import QCalendarWidget, QMenu
 
 from pygpt_net.utils import trans
@@ -38,14 +38,15 @@
         self.setVerticalHeaderFormat(QCalendarWidget.NoVerticalHeader)  # disable num of weeks display
         self.currentPageChanged.connect(self.page_changed)
         self.clicked[QDate].connect(self.on_day_clicked)
 
         # context menu
         self.setContextMenuPolicy(Qt.CustomContextMenu)
         self.customContextMenuRequested.connect(self.open_context_menu)
+        self.setProperty('class', 'calendar')
 
     def page_changed(self, year, month):
         """
         On page changed
 
         :param year: Year
         :param month: Month
@@ -80,15 +81,15 @@
             task_rect = QRect(
                 rect.right() - padding - 20,
                 rect.top() + padding,
                 20,
                 20,
             )
             painter.save()
-            painter.setBrush(QBrush(QColor(0, 0, 0)))
+            painter.setBrush(QBrush(QColor(40, 40, 40)))
             painter.drawRect(task_rect)
             painter.setPen(QColor(255, 255, 255))
             painter.setFont(QFont('Lato', self.font_size))
             painter.drawText(
                 task_rect,
                 Qt.AlignCenter,
                 str(self.counters['ctx'][date]),
@@ -122,17 +123,17 @@
     def get_color_for_status(self, status: int) -> (QColor, QColor):
         """
         Get color for status
 
         :param status: status
         :return: color, font color
         """
-        if status in self.window.controller.calendar.statuses:
-            return self.window.controller.calendar.statuses[status]['color'], \
-                   self.window.controller.calendar.statuses[status]['font']
+        colors = self.window.controller.ui.get_colors()
+        if status in colors:
+            return colors[status]['color'], colors[status]['font']
         else:
             return QColor(100, 100, 100), QColor(255, 255, 255)
 
     def on_day_clicked(self, date: QDate):
         """
         On day clicked
 
@@ -184,25 +185,26 @@
 
     def open_context_menu(self, position):
         """
         Open context menu
 
         :param position: position
         """
+        colors = self.window.controller.ui.get_colors()
         selected_date = self.selectedDate()
         context_menu = QMenu(self)
         action_text = trans('calendar.day.search') + ': ' + selected_date.toString()
         action = QAction(action_text, self)
         action.setIcon(QIcon(":/icons/history.svg"))
         action.triggered.connect(lambda: self.execute_action(selected_date))
         context_menu.addAction(action)
         
         # set label menu
         set_label_menu = context_menu.addMenu(trans('calendar.day.label'))
-        for status_id, status_info in self.window.controller.calendar.statuses.items():
+        for status_id, status_info in colors.items():
             name = trans('calendar.day.' + status_info['label'])
             if status_id == 0:
                 name = '-'
             color = status_info['color']
             pixmap = QPixmap(16, 16)
             pixmap.fill(color)
             icon = QIcon(pixmap)
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/ui/widget/dialog/alert.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/widget/dialog/alert.py`

 * *Files 21% similar despite different names*

```diff
@@ -2,17 +2,18 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2023.12.25 21:00:00                  #
+# Updated Date: 2024.04.17 01:00:00                  #
 # ================================================== #
 
+from PySide6.QtCore import Qt
 from PySide6.QtWidgets import QDialog, QDialogButtonBox, QVBoxLayout, QPlainTextEdit
 
 from pygpt_net.utils import trans
 
 
 class AlertDialog(QDialog):
     def __init__(self, window=None):
@@ -20,14 +21,15 @@
         Alert dialog
 
         :param window: main window
         """
         super(AlertDialog, self).__init__(window)
         self.window = window
         self.setWindowTitle(trans('alert.title'))
+        self.setWindowFlags(self.windowFlags() | Qt.WindowStaysOnTopHint)  # always on top
 
         QBtn = QDialogButtonBox.Ok
 
         self.buttonBox = QDialogButtonBox(QBtn)
         self.buttonBox.accepted.connect(self.accept)
 
         self.layout = QVBoxLayout()
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/ui/widget/dialog/applog.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/widget/dialog/applog.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/ui/widget/dialog/create.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/widget/dialog/create.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/ui/widget/dialog/debug.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/widget/dialog/debug.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/ui/widget/dialog/editor.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/widget/dialog/editor.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/ui/widget/dialog/editor_file.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/widget/dialog/model.py`

 * *Files 14% similar despite different names*

```diff
@@ -9,47 +9,47 @@
 # Updated Date: 2024.02.17 20:00:00                  #
 # ================================================== #
 
 from PySide6.QtCore import Qt
 from .base import BaseDialog
 
 
-class EditorFileDialog(BaseDialog):
-    def __init__(self, window=None, id="editor_file"):
+class ModelDialog(BaseDialog):
+    def __init__(self, window=None, id=None):
         """
-        File editor dialog
+        Models dialog
 
         :param window: main window
-        :param id: dialog id
+        :param id: settings id
         """
-        super(EditorFileDialog, self).__init__(window, id)
+        super(ModelDialog, self).__init__(window, id)
         self.window = window
-        self.file = None
+        self.id = id
 
     def closeEvent(self, event):
         """
         Close event
 
         :param event: close event
         """
-        self.cleanup()
-        super(EditorFileDialog, self).closeEvent(event)
+        self.window.controller.model.editor.dialog = False
+        self.window.controller.model.update()
+        super(ModelDialog, self).closeEvent(event)
 
     def keyPressEvent(self, event):
         """
         Key press event
 
         :param event: key press event
         """
         if event.key() == Qt.Key_Escape:
             self.cleanup()
             self.close()  # close dialog when the Esc key is pressed.
         else:
-            super(EditorFileDialog, self).keyPressEvent(event)
+            super(ModelDialog, self).keyPressEvent(event)
 
     def cleanup(self):
         """
         Cleanup on close
         """
-        self.window.core.settings.active['editor'] = False
-        self.window.controller.settings.close('editor')
-        self.window.controller.settings.update()
+        self.window.controller.model.editor.dialog = False
+        self.window.controller.model.update()
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/ui/widget/dialog/image.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/widget/lists/plugin.py`

 * *Files 18% similar despite different names*

```diff
@@ -2,24 +2,30 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.17 20:00:00                  #
+# Updated Date: 2024.01.12 08:00:00                  #
 # ================================================== #
 
-from .base import BaseDialog
+from pygpt_net.ui.widget.lists.base import BaseList
 
 
-class ImageDialog(BaseDialog):
+class PluginList(BaseList):
     def __init__(self, window=None, id=None):
         """
-        Image dialog
+        Plugin select menu (in settings dialog)
 
         :param window: main window
-        :param id: info window id
+        :param id: parent id
         """
-        super(ImageDialog, self).__init__(window, id)
+        super(PluginList, self).__init__(window)
         self.window = window
         self.id = id
+
+    def click(self, val):
+        idx = val.row()
+        self.window.ui.tabs['plugin.settings'].setCurrentIndex(idx)
+        self.window.controller.plugins.set_by_tab(idx)
+
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/ui/widget/dialog/info.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/widget/dialog/info.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/ui/widget/dialog/license.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/widget/dialog/license.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/ui/widget/dialog/logger.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/widget/dialog/logger.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/ui/widget/dialog/model.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/widget/dialog/preset_plugins.py`

 * *Files 19% similar despite different names*

```diff
@@ -2,54 +2,54 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.17 20:00:00                  #
+# Updated Date: 2024.04.09 23:00:00                  #
 # ================================================== #
 
 from PySide6.QtCore import Qt
 from .base import BaseDialog
 
 
-class ModelDialog(BaseDialog):
+class PresetPluginsDialog(BaseDialog):
     def __init__(self, window=None, id=None):
         """
-        Models dialog
+        Presets dialog
 
         :param window: main window
         :param id: settings id
         """
-        super(ModelDialog, self).__init__(window, id)
+        super(PresetPluginsDialog, self).__init__(window, id)
         self.window = window
         self.id = id
 
     def closeEvent(self, event):
         """
         Close event
 
         :param event: close event
         """
-        self.window.controller.model.editor.dialog = False
-        self.window.controller.model.update()
-        super(ModelDialog, self).closeEvent(event)
+        self.window.controller.plugins.presets.dialog = False
+        self.window.controller.plugins.presets.update_menu()
+        super(PresetPluginsDialog, self).closeEvent(event)
 
     def keyPressEvent(self, event):
         """
         Key press event
 
         :param event: key press event
         """
         if event.key() == Qt.Key_Escape:
             self.cleanup()
             self.close()  # close dialog when the Esc key is pressed.
         else:
-            super(ModelDialog, self).keyPressEvent(event)
+            super(PresetPluginsDialog, self).keyPressEvent(event)
 
     def cleanup(self):
         """
         Cleanup on close
         """
-        self.window.controller.model.editor.dialog = False
-        self.window.controller.model.update()
+        self.window.controller.plugins.presets.dialog = False
+        self.window.controller.plugins.presets.update_menu()
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/ui/widget/dialog/rename.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/widget/dialog/rename.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/ui/widget/dialog/settings.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/widget/dialog/settings.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/ui/widget/dialog/settings_plugin.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/widget/dialog/settings_plugin.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/ui/widget/dialog/snap.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/widget/dialog/snap.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/ui/widget/dialog/update.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/widget/dialog/update.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/ui/widget/draw/painter.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/widget/draw/painter.py`

 * *Files 6% similar despite different names*

```diff
@@ -2,21 +2,21 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.17 15:00:00                  #
+# Updated Date: 2024.04.12 08:00:00                  #
 # ================================================== #
 
 import datetime
 
 from PySide6.QtCore import Qt, QPoint
-from PySide6.QtGui import QImage, QPainter, QPen, QAction, QIcon
+from PySide6.QtGui import QImage, QPainter, QPen, QAction, QIcon, QKeySequence
 from PySide6.QtWidgets import QMenu, QWidget, QFileDialog, QMessageBox, QApplication
 
 from pygpt_net.utils import trans
 import pygpt_net.icons_rc
 
 
 class PainterWidget(QWidget):
@@ -32,27 +32,71 @@
         self.originalImage = None
         self.undoStack = []
         self.redoStack = []
         self.undoLimit = 10
         self.setFocusPolicy(Qt.StrongFocus)
         self.setFocus()
 
+    def handle_paste(self):
+        """Handle clipboard paste"""
+        clipboard = QApplication.clipboard()
+        source = clipboard.mimeData()
+        if source.hasImage():
+            image = clipboard.image()
+            if isinstance(image, QImage):
+                self.window.ui.painter.set_image(image)
+
+    def handle_copy(self):
+        """Handle clipboard copy"""
+        clipboard = QApplication.clipboard()
+        clipboard.setImage(self.image)
+
     def contextMenuEvent(self, event):
         """
         Context menu event
 
         :param event: Event
         """
         actions = {}
         actions['undo'] = QAction(QIcon(":/icons/undo.svg"), trans('action.undo'), self)
         actions['undo'].triggered.connect(
             lambda: self.undo())
+        if self.has_undo():
+            actions['undo'].setEnabled(True)
+        else:
+            actions['undo'].setEnabled(False)
+
         actions['redo'] = QAction(QIcon(":/icons/redo.svg"), trans('action.redo'), self)
         actions['redo'].triggered.connect(
             lambda: self.redo())
+        if self.has_redo():
+            actions['redo'].setEnabled(True)
+        else:
+            actions['redo'].setEnabled(False)
+
+        actions['copy'] = QAction(QIcon(":/icons/copy.svg"),  trans('action.copy'), self)
+        actions['copy'].triggered.connect(
+            lambda: self.handle_copy()
+        )
+
+        is_paste = False
+        clipboard = QApplication.clipboard()
+        mime_data = clipboard.mimeData()
+        if mime_data.hasImage():
+            is_paste = True
+
+        actions['paste'] = QAction(QIcon(":/icons/paste.svg"), trans('action.paste'), self)
+        actions['paste'].triggered.connect(
+            lambda: self.handle_paste()
+        )
+        if is_paste:
+            actions['paste'].setEnabled(True)
+        else:
+            actions['paste'].setEnabled(False)
+
         actions['open'] = QAction(QIcon(":/icons/folder_filled.svg"), trans('action.open'), self)
         actions['open'].triggered.connect(
             lambda: self.action_open())
         actions['capture'] = QAction(QIcon(":/icons/fullscreen.svg"), trans('painter.btn.capture'), self)
         actions['capture'].triggered.connect(
             lambda: self.action_capture())
         actions['save'] = QAction(QIcon(":/icons/save.svg"), trans('img.action.save'), self)
@@ -63,14 +107,16 @@
             lambda: self.action_clear())
 
         menu = QMenu(self)
         menu.addAction(actions['undo'])
         menu.addAction(actions['redo'])
         menu.addAction(actions['open'])
         menu.addAction(actions['capture'])
+        menu.addAction(actions['copy'])
+        menu.addAction(actions['paste'])
         menu.addAction(actions['save'])
         menu.addAction(actions['clear'])
         menu.exec_(event.globalPos())
 
     def action_open(self):
         """Open the image"""
         path, _ = QFileDialog.getOpenFileName(
@@ -187,14 +233,22 @@
     def redo(self):
         """Redo the last undo action"""
         if self.redoStack:
             self.undoStack.append(self.image.copy())
             self.image = self.redoStack.pop()
             self.update()
 
+    def has_undo(self) -> bool:
+        """Check if undo is available"""
+        return bool(self.undoStack)
+
+    def has_redo(self) -> bool:
+        """Check if redo is available"""
+        return bool(self.redoStack)
+
     def set_brush_color(self, color):
         """
         Set the brush color
 
         :param color: Color
         """
         self.brushColor = color
@@ -270,14 +324,16 @@
         """
         Key press event to handle undo action
 
         :param event: Event
         """
         if event.key() == Qt.Key_Z and QApplication.keyboardModifiers() == Qt.ControlModifier:
             self.undo()
+        elif event.key() == Qt.Key_V and QApplication.keyboardModifiers() == Qt.ControlModifier:
+            self.handle_paste()
 
     def paintEvent(self, event):
         """
         Paint event (draw)
 
         :param event: Event
         """
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/ui/widget/element/group.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/widget/element/group.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/ui/widget/element/labels.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/widget/element/labels.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/ui/widget/filesystem/explorer.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/widget/filesystem/explorer.py`

 * *Files 5% similar despite different names*

```diff
@@ -2,22 +2,21 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.26 22:00:00                  #
+# Updated Date: 2024.03.20 06:00:00                  #
 # ================================================== #
 
 import datetime
 import os
-from pathlib import Path
 
-from PySide6.QtCore import Qt, QModelIndex
+from PySide6.QtCore import Qt, QModelIndex, QDir
 from PySide6.QtGui import QAction, QIcon, QCursor, QResizeEvent
 from PySide6.QtWidgets import QTreeView, QMenu, QWidget, QVBoxLayout, QFileSystemModel, QLabel, QHBoxLayout, \
     QPushButton, QSizePolicy
 
 from pygpt_net.ui.widget.element.button import ContextMenuButton
 from pygpt_net.ui.widget.element.labels import HelpLabel
 from pygpt_net.utils import trans
@@ -35,19 +34,19 @@
         """
         super().__init__()
 
         self.window = window
         self.index_data = index_data
         self.directory = directory
         self.model = IndexedFileSystemModel(self.window, self.index_data)
-        self.model.setRootPath(directory)
-
+        self.model.setRootPath(self.directory)
+        self.model.setFilter(self.model.filter() | QDir.Hidden)
         self.treeView = QTreeView()
         self.treeView.setModel(self.model)
-        self.treeView.setRootIndex(self.model.index(directory))
+        self.treeView.setRootIndex(self.model.index(self.directory))
 
         header = QHBoxLayout()
 
         self.btn_open = QPushButton(trans('action.open'))
         self.btn_open.setMaximumHeight(40)
         self.btn_open.clicked.connect(
                 lambda: self.action_open(self.directory)
@@ -65,35 +64,44 @@
         self.btn_idx.setSizePolicy(QSizePolicy.Minimum, QSizePolicy.Minimum)
 
         self.btn_clear = ContextMenuButton(trans('idx.btn.clear'), self)
         self.btn_clear.action = self.clear_context_menu
         self.btn_clear.setMaximumHeight(40)
         self.btn_clear.setSizePolicy(QSizePolicy.Minimum, QSizePolicy.Minimum)
 
+        # btn with icon
+        self.btn_tool = QPushButton(QIcon(":/icons/db.svg"), "")
+        self.btn_tool.setMaximumHeight(40)
+        self.btn_tool.setSizePolicy(QSizePolicy.Minimum, QSizePolicy.Minimum)
+        self.btn_tool.clicked.connect(
+            lambda: self.window.tools.get("indexer").toggle()
+        )
+
         self.path_label = QLabel(self.directory)
         self.path_label.setMaximumHeight(40)
         self.path_label.setAlignment(Qt.AlignCenter | Qt.AlignVCenter)
 
         header.addWidget(self.btn_open)
         header.addWidget(self.btn_upload)
         header.addStretch()
         header.addWidget(self.path_label)
         header.addStretch()
 
+        header.addWidget(self.btn_tool)
         header.addWidget(self.btn_idx)
         header.addWidget(self.btn_clear)
-        layout = QVBoxLayout()
+        self.layout = QVBoxLayout()
 
         self.window.ui.nodes['tip.output.tab.files'] = HelpLabel(trans('tip.output.tab.files'), self.window)
 
-        layout.addWidget(self.treeView)
-        layout.addWidget(self.window.ui.nodes['tip.output.tab.files'])
-        layout.addLayout(header)
-        layout.setContentsMargins(0, 0, 0, 0)
-        self.setLayout(layout)
+        self.layout.addWidget(self.treeView)
+        self.layout.addWidget(self.window.ui.nodes['tip.output.tab.files'])
+        self.layout.addLayout(header)
+        self.layout.setContentsMargins(0, 0, 0, 0)
+        self.setLayout(self.layout)
 
         self.treeView.setContextMenuPolicy(Qt.CustomContextMenu)
         self.treeView.customContextMenuRequested.connect(self.openContextMenu)
         self.treeView.setColumnWidth(0, self.width() / 2)
 
         self.header = self.treeView.header()
         self.header.setStretchLastSection(True)
@@ -105,14 +113,21 @@
         self.header.setStyleSheet("""
            QHeaderView::section {
                text-align: center;
                vertical-align: middle;
            }
        """)
 
+    def update_view(self):
+        """Update explorer view"""
+        self.model.beginResetModel()
+        self.model.setRootPath(self.directory)
+        self.model.endResetModel()
+        self.treeView.setRootIndex(self.model.index(self.directory))
+
     def idx_context_menu(self, parent, pos):
         """
         Index all btn context menu
 
         :param parent: parent widget
         :param pos: mouse  position
         """
@@ -173,14 +188,19 @@
         :param position: mouse position
         """
         indexes = self.treeView.selectedIndexes()
         if indexes:
             index = indexes[0]
             path = self.model.filePath(index)
             actions = {}
+            preview_actions = []
+            use_actions = []
+
+            if self.window.core.filesystem.actions.has_preview(path):
+                preview_actions = self.window.core.filesystem.actions.get_preview(self, path)
 
             # open file
             actions['open'] = QAction(QIcon(":/icons/view.svg"), trans('action.open'), self)
             actions['open'].triggered.connect(
                 lambda: self.action_open(path),
             )
 
@@ -215,15 +235,15 @@
 
             # touch file
             actions['touch'] = QAction(QIcon(":/icons/add.svg"), trans('action.touch'), self)
             actions['touch'].triggered.connect(
                 lambda: self.window.controller.files.touch_file(parent),
             )
 
-            # make dir in dir
+            # make dir
             actions['mkdir'] = QAction(QIcon(":/icons/add_folder.svg"), trans('action.mkdir'), self)
             actions['mkdir'].triggered.connect(
                 lambda: self.action_make_dir(parent),
             )
 
             # refresh
             actions['refresh'] = QAction(QIcon(":/icons/reload.svg"), trans('action.refresh'), self)
@@ -239,31 +259,39 @@
 
             # delete
             actions['delete'] = QAction(QIcon(":/icons/delete.svg"), trans('action.delete'), self)
             actions['delete'].triggered.connect(
                 lambda: self.action_delete(path),
             )
 
+            # menu
             menu = QMenu(self)
+            if preview_actions:
+                for action in preview_actions:
+                    menu.addAction(action)
             menu.addAction(actions['open'])
             menu.addAction(actions['open_dir'])
 
-            # use
+            # use menu
             use_menu = QMenu(trans('action.use'), self)
 
-            # use as attachment
+            # use
             if not os.path.isdir(path):
+                # use as attachment
                 actions['use_attachment'] = QAction(
                     QIcon(":/icons/attachment.svg"),
                     trans('action.use.attachment'),
                     self,
                 )
                 actions['use_attachment'].triggered.connect(
                     lambda: self.window.controller.files.use_attachment(path),
                 )
+                # use by filetype
+                if self.window.core.filesystem.actions.has_use(path):
+                    use_actions = self.window.core.filesystem.actions.get_use(self, path)
 
             # copy work path
             actions['use_copy_work_path'] = QAction(
                 QIcon(":/icons/copy.svg"),
                 trans('action.use.copy_work_path'),
                 self,
             )
@@ -286,14 +314,21 @@
             actions['use_read_cmd'].triggered.connect(
                 lambda: self.window.controller.files.make_read_cmd(path),
             )
 
             # add actions to menu
             if not os.path.isdir(path):
                 use_menu.addAction(actions['use_attachment'])
+
+            # use by type
+            if use_actions:
+                for action in use_actions:
+                    use_menu.addAction(action)
+
+            # use common actions
             use_menu.addAction(actions['use_copy_work_path'])
             use_menu.addAction(actions['use_copy_sys_path'])
             use_menu.addAction(actions['use_read_cmd'])
             menu.addMenu(use_menu)
 
             # remove from index
             file_id = self.window.core.idx.files.get_id(path)
@@ -315,15 +350,15 @@
                 idx_list = self.window.core.config.get('llama.idx.list')
                 if len(idx_list) > 0 or len(remove_actions) > 0:
                     # add
                     if len(idx_list) > 0:
                         for idx in idx_list:
                             id = idx['id']
                             name = idx['name'] + " (" + idx['id'] + ")"
-                            action = QAction(QIcon(":/icons/search.svg"), "IDX: " + name, self)
+                            action = QAction(QIcon(":/icons/db.svg"), "IDX: " + name, self)
                             action.triggered.connect(
                                 lambda checked=False,
                                        id=id,
                                        path=path: self.action_idx(path, id)
                             )
                             idx_menu.addAction(action)
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/ui/widget/lists/assistant.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/widget/lists/assistant.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/ui/widget/lists/attachment.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/widget/lists/uploaded.py`

 * *Files 16% similar despite different names*

```diff
@@ -2,149 +2,140 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.01.29 14:00:00                  #
+# Updated Date: 2024.04.26 23:00:00                  #
 # ================================================== #
 
-from PySide6.QtGui import QAction, QIcon, QResizeEvent
+from PySide6.QtGui import QAction, QIcon, QResizeEvent, Qt
 from PySide6.QtWidgets import QMenu
 
 from pygpt_net.ui.widget.lists.base import BaseList
 from pygpt_net.utils import trans
 import pygpt_net.icons_rc
 
 
-class AttachmentList(BaseList):
+class UploadedFileList(BaseList):
     def __init__(self, window=None, id=None):
         """
         Attachments menu
 
         :param window: main window
         :param id: input id
         """
-        super(AttachmentList, self).__init__(window)
+        super(UploadedFileList, self).__init__(window)
         self.window = window
         self.id = id
         self.doubleClicked.connect(self.dblclick)
         self.setHeaderHidden(False)
+        self.clicked.disconnect(self.click)
 
         self.header = self.header()
-        self.header.setStretchLastSection(True)
+        self.header.setStretchLastSection(False)
 
-        self.column_proportion = 0.5
+        self.column_proportion = 0.3
         self.adjustColumnWidths()
 
     def adjustColumnWidths(self):
         total_width = self.width()
         first_column_width = int(total_width * self.column_proportion)
         self.setColumnWidth(0, first_column_width)
-        for column in range(1, 2):
-            self.setColumnWidth(column, (total_width - first_column_width) // (2 - 1))
+        for column in range(1, 4):
+            self.setColumnWidth(column, (total_width - first_column_width) // (4 - 1))
 
     def resizeEvent(self, event: QResizeEvent):
         super().resizeEvent(event)
         self.adjustColumnWidths()
 
+    def mousePressEvent(self, event):
+        """
+        Mouse press event
+
+        :param event: mouse event
+        """
+        if event.buttons() == Qt.LeftButton:
+            index = self.indexAt(event.pos())
+            if index.isValid():
+                self.window.controller.assistant.files.select(index.row())
+        super(UploadedFileList, self).mousePressEvent(event)
+
     def click(self, val):
         """
         Click event
 
         :param val: click event
         """
-        mode = self.window.core.config.get('mode')
-        self.window.controller.attachment.select(mode, val.row())
+        pass
 
     def dblclick(self, val):
         """
         Double click event
 
         :param val: double click event
         """
-        mode = self.window.core.config.get('mode')
-        self.window.controller.attachment.select(mode, val.row())
+        self.window.controller.assistant.files.select(val.row())
 
     def contextMenuEvent(self, event):
         """
         Context menu event
 
         :param event: context menu event
         """
         actions = {}
-        actions['open'] = QAction(QIcon(":/icons/view.svg"), trans('action.open'), self)
-        actions['open'].triggered.connect(
-            lambda: self.action_open(event))
-
-        actions['open_dir'] = QAction(QIcon(":/icons/folder_filled.svg"), trans('action.open_dir'), self)
-        actions['open_dir'].triggered.connect(
-            lambda: self.action_open_dir(event))
+        actions['download'] = QAction(QIcon(":/icons/download.svg"), trans('action.download'), self)
+        actions['download'].triggered.connect(
+            lambda: self.action_download(event))
 
         actions['rename'] = QAction(QIcon(":/icons/edit.svg"), trans('action.rename'), self)
         actions['rename'].triggered.connect(
             lambda: self.action_rename(event))
 
         actions['delete'] = QAction(QIcon(":/icons/delete.svg"), trans('action.delete'), self)
         actions['delete'].triggered.connect(
             lambda: self.action_delete(event))
 
         menu = QMenu(self)
-        menu.addAction(actions['open'])
-        menu.addAction(actions['open_dir'])
+        # menu.addAction(actions['download'])  # not allowed for download files with purpose: assistants :(
         menu.addAction(actions['rename'])
         menu.addAction(actions['delete'])
 
         item = self.indexAt(event.pos())
         idx = item.row()
         if idx >= 0:
-            mode = self.window.core.config.get('mode')
-            self.window.controller.attachment.select(mode, item.row())
+            self.window.controller.assistant.files.select(item.row())
             menu.exec_(event.globalPos())
 
-    def action_open(self, event):
-        """
-        Open action handler
-
-        :param event: mouse event
-        """
-        item = self.indexAt(event.pos())
-        idx = item.row()
-        if idx >= 0:
-            mode = self.window.core.config.get('mode')
-            self.window.controller.attachment.open(mode, idx)
-
-    def action_open_dir(self, event):
+    def action_rename(self, event):
         """
-        Open dir action handler
+        Rename action handler
 
         :param event: mouse event
         """
         item = self.indexAt(event.pos())
         idx = item.row()
         if idx >= 0:
-            mode = self.window.core.config.get('mode')
-            self.window.controller.attachment.open_dir(mode, idx)
+            self.window.controller.assistant.files.rename(idx)
 
-    def action_rename(self, event):
+    def action_download(self, event):
         """
-        Rename action handler
+        Download action handler
 
         :param event: mouse event
         """
         item = self.indexAt(event.pos())
         idx = item.row()
         if idx >= 0:
-            mode = self.window.core.config.get('mode')
-            self.window.controller.attachment.rename(mode, idx)
+            self.window.controller.assistant.files.download(idx)
 
     def action_delete(self, event):
         """
         Delete action handler
 
         :param event: mouse event
         """
         item = self.indexAt(event.pos())
         idx = item.row()
         if idx >= 0:
-            self.window.controller.attachment.delete(idx)
+            self.window.controller.assistant.files.delete(idx)
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/ui/widget/lists/base.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/widget/lists/base.py`

 * *Files 2% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2023.12.25 21:00:00                  #
+# Updated Date: 2024.04.08 21:00:00                  #
 # ================================================== #
 
 from PySide6.QtCore import QItemSelectionModel
 from PySide6.QtWidgets import QTreeView, QAbstractItemView
 
 
 class BaseList(QTreeView):
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/ui/widget/lists/context.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/widget/lists/context.py`

 * *Files 27% similar despite different names*

```diff
@@ -2,287 +2,392 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.25 01:00:00                  #
+# Updated Date: 2024.04.12 10:00:00                  #
 # ================================================== #
+
 import datetime
 
 from PySide6 import QtWidgets, QtCore, QtGui
-from PySide6.QtGui import QAction, QIcon, QColor, QPixmap
+from PySide6.QtGui import QAction, QIcon, QColor, QPixmap, QStandardItem
 from PySide6.QtWidgets import QMenu
 
 from pygpt_net.ui.widget.lists.base import BaseList
 from pygpt_net.utils import trans
 import pygpt_net.icons_rc
 
 
 class ContextList(BaseList):
     def __init__(self, window=None, id=None):
         """
-        Presets select menu
+        Context select menu
 
         :param window: main window
         :param id: input id
         """
         super(ContextList, self).__init__(window)
         self.window = window
         self.id = id
-
-        self.doubleClicked.connect(self.dblclick)
+        self.clicked.connect(self.click)
+        self.expanded_items = set()
         self.setItemDelegate(ImportantItemDelegate())
 
-    def click(self, val):
+    def click(self, index):
         """
         Click event
 
-        :param val: click event
+        :param index: index
+        """
+        item = self.window.ui.models['ctx.list'].itemFromIndex(index)
+        if item is not None:
+            if not hasattr(item, 'isFolder'):
+                return
+            if item.isFolder:
+                self.window.controller.ctx.set_group(item.id)
+                if self.window.ui.nodes['ctx.list'].isExpanded(index):
+                    self.expanded_items.discard(item.id)
+                else:
+                    self.expanded_items.add(item.id)
+            else:
+                self.window.controller.ctx.select_by_id(item.id)
+        else:
+            pass  # unselected
+
+    def expand_group(self, id):
+        """
+        Expand group
+
+        :param id: group id
         """
-        self.window.controller.ctx.select_by_idx(val.row())
+        for i in range(self.window.ui.models['ctx.list'].rowCount()):
+            item = self.window.ui.models['ctx.list'].item(i)
+            if item.id == id:
+                index = self.window.ui.models['ctx.list'].indexFromItem(item)
+                self.window.ui.nodes['ctx.list'].expand(index)
+                self.expanded_items.add(id)
 
-    def dblclick(self, val):
+    def dblclick(self, index):
         """
         Double click event
 
-        :param val: double click event
+        :param index: index
+        """
+        pass
+
+    def mousePressEvent(self, event):
         """
-        self.window.controller.ctx.select_by_idx(val.row())
+        Mouse press event
+        :param event: event
+        """
+        index = self.indexAt(event.pos())
+        if not index.isValid():
+            self.window.controller.ctx.unselect()
+            return
+        super(BaseList, self).mousePressEvent(event)
 
     def contextMenuEvent(self, event):
         """
         Context menu event
 
         :param event: context menu event
         """
-        item = self.indexAt(event.pos())
-        idx = item.row()
-        id = self.window.core.ctx.get_id_by_idx(idx)
-        ctx_id = id
-        ctx = self.window.core.ctx.get_meta_by_id(id)
-        if ctx is None:
-            return
+        index = self.indexAt(event.pos())
+        item = self.window.ui.models['ctx.list'].itemFromIndex(index)
 
-        is_important = ctx.important
+        if item is not None:
+            idx = item.row()
+            id = item.id
+
+            # group context menu
+            if hasattr(item, 'isFolder') and item.isFolder:
+                actions = {}
+                actions['new'] = QAction(QIcon(":/icons/add.svg"), trans('action.ctx.new'), self)
+                actions['new'].triggered.connect(
+                    lambda checked=False, id=id: self.window.controller.ctx.new(force=False, group_id=id)
+                )
+                actions['rename'] = QAction(QIcon(":/icons/edit.svg"), trans('action.rename'), self)
+                actions['rename'].triggered.connect(
+                    lambda checked=False, id=id: self.window.controller.ctx.rename_group(id)
+                )
+                actions['delete'] = QAction(QIcon(":/icons/delete.svg"), trans('action.group.delete.only'), self)
+                actions['delete'].triggered.connect(
+                    lambda checked=False, id=id: self.window.controller.ctx.delete_group(id)
+                )
+                actions['delete_all'] = QAction(QIcon(":/icons/delete.svg"), trans('action.group.delete.all'), self)
+                actions['delete_all'].triggered.connect(
+                    lambda checked=False, id=id: self.window.controller.ctx.delete_group_all(id)
+                )
 
-        actions = {}
-        actions['rename'] = QAction(QIcon(":/icons/edit.svg"), trans('action.rename'), self)
-        actions['rename'].triggered.connect(
-            lambda: self.action_rename(event)
-        )
-
-        if is_important:
-            actions['important'] = QAction(QIcon(":/icons/pin.svg"), trans('action.unpin'), self)
-            actions['important'].triggered.connect(
-                lambda: self.action_unpin(event)
-            )
-        else:
-            actions['important'] = QAction(QIcon(":/icons/pin.svg"), trans('action.pin'), self)
-            actions['important'].triggered.connect(
-                lambda: self.action_pin(event)
-            )
-
-        actions['duplicate'] = QAction(QIcon(":/icons/copy.svg"), trans('action.duplicate'), self)
-        actions['duplicate'].triggered.connect(
-            lambda: self.action_duplicate(event)
-        )
-
-        actions['delete'] = QAction(QIcon(":/icons/delete.svg"), trans('action.delete'), self)
-        actions['delete'].triggered.connect(
-            lambda: self.action_delete(event)
-        )
-
-        actions['copy_id'] = QAction(QIcon(":/icons/copy.svg"), trans('action.ctx_copy_id') + " @" + str(id), self)
-        actions['copy_id'].triggered.connect(
-            lambda: self.action_copy_id(event)
-        )
-
-        menu = QMenu(self)
-        menu.addAction(actions['rename'])
-        menu.addAction(actions['duplicate'])
-        menu.addAction(actions['important'])
-        menu.addAction(actions['delete'])
-
-        # set label menu
-        set_label_menu = menu.addMenu(trans('calendar.day.label'))
-        for status_id, status_info in self.window.controller.calendar.statuses.items():
-            name = trans('calendar.day.' + status_info['label'])
-            if status_id == 0:
-                name = '-'
-            color = status_info['color']
-            pixmap = QPixmap(16, 16)
-            pixmap.fill(color)
-            icon = QIcon(pixmap)
-            status_action = QAction(icon, name, self)
-            status_action.triggered.connect(
-                lambda checked=False, s_id=status_id: self.window.controller.ctx.set_label(idx, s_id)
-            )
-            set_label_menu.addAction(status_action)
-
-        idx_menu = QMenu(trans('action.idx'), self)
-
-        # indexes list
-        idxs = self.window.core.config.get('llama.idx.list')
-        store = self.window.core.idx.get_current_store()  # get current idx store provider
-        if len(idxs) > 0:
-            for index in idxs:
-                id = index['id']
-                name = index['name'] + " (" + index['id'] + ")"
-
-                # add to index
-                action = idx_menu.addAction("IDX: " + name)
-                action.setIcon(QIcon(":/icons/search.svg"))
+                menu = QMenu(self)
+                menu.addAction(actions['new'])
+                menu.addAction(actions['rename'])
+                menu.addAction(actions['delete'])  # delete group
+                menu.addAction(actions['delete_all'])  # delete group and all contexts
+
+                if idx >= 0:
+                    menu.exec_(event.globalPos())
+
+            # children context menu
+            else:
+                ctx_id = id
+                ctx = self.window.core.ctx.get_meta_by_id(id)
+                if ctx is None:
+                    return
+
+                is_important = ctx.important
+
+                actions = {}
+                actions['rename'] = QAction(QIcon(":/icons/edit.svg"), trans('action.rename'), self)
+                actions['rename'].triggered.connect(
+                    lambda checked=False, ctx_id=ctx_id: self.action_rename(ctx_id)
+                )
+
+                if is_important:
+                    actions['important'] = QAction(QIcon(":/icons/pin.svg"), trans('action.unpin'), self)
+                    actions['important'].triggered.connect(
+                        lambda checked=False, ctx_id=ctx_id: self.action_unpin(ctx_id)
+                    )
+                else:
+                    actions['important'] = QAction(QIcon(":/icons/pin.svg"), trans('action.pin'), self)
+                    actions['important'].triggered.connect(
+                        lambda checked=False, ctx_id=ctx_id: self.action_pin(ctx_id)
+                    )
+
+                actions['duplicate'] = QAction(QIcon(":/icons/copy.svg"), trans('action.duplicate'), self)
+                actions['duplicate'].triggered.connect(
+                    lambda checked=False, ctx_id=ctx_id: self.action_duplicate(ctx_id)
+                )
+
+                actions['delete'] = QAction(QIcon(":/icons/delete.svg"), trans('action.delete'), self)
+                actions['delete'].triggered.connect(
+                    lambda checked=False, ctx_id=ctx_id: self.action_delete(ctx_id)
+                )
+
+                actions['copy_id'] = QAction(QIcon(":/icons/copy.svg"), trans('action.ctx_copy_id') + " @" + str(id), self)
+                actions['copy_id'].triggered.connect(
+                    lambda checked=False, ctx_id=ctx_id: self.action_copy_id(ctx_id)
+                )
+
+                menu = QMenu(self)
+                menu.addAction(actions['rename'])
+                menu.addAction(actions['duplicate'])
+                menu.addAction(actions['important'])
+                menu.addAction(actions['delete'])
+
+                # set label menu
+                colors = self.window.controller.ui.get_colors()
+                set_label_menu = menu.addMenu(trans('calendar.day.label'))
+                for status_id, status_info in colors.items():
+                    name = trans('calendar.day.' + status_info['label'])
+                    if status_id == 0:
+                        name = '-'
+                    color = status_info['color']
+                    pixmap = QPixmap(16, 16)
+                    pixmap.fill(color)
+                    icon = QIcon(pixmap)
+                    status_action = QAction(icon, name, self)
+                    status_action.triggered.connect(
+                        lambda checked=False,
+                               ctx_id=ctx_id,
+                               s_id=status_id: self.window.controller.ctx.set_label(ctx_id, s_id)
+                    )
+                    set_label_menu.addAction(status_action)
+
+                idx_menu = QMenu(trans('action.idx'), self)
+
+                # indexes list
+                idxs = self.window.core.config.get('llama.idx.list')
+                store = self.window.core.idx.get_current_store()  # get current idx store provider
+                if len(idxs) > 0:
+                    for index in idxs:
+                        id = index['id']
+                        name = index['name'] + " (" + index['id'] + ")"
+
+                        # add to index
+                        action = idx_menu.addAction("IDX: " + name)
+                        action.setIcon(QIcon(":/icons/db.svg"))
+                        action.triggered.connect(
+                            lambda checked=False,
+                                   ctx_id=ctx_id,
+                                   index=id: self.action_idx(ctx_id, index)
+                        )
+
+                    # remove from index
+                    if ctx.indexed is not None and ctx.indexed > 0:
+                        # get list of indexes in which context is indexed
+                        if store in ctx.indexes:
+                            store_indexes = ctx.indexes[store]
+                            idx_menu.addSeparator()
+                            for store_index in store_indexes:
+                                action = idx_menu.addAction(trans("action.idx.remove") + ": " + store_index)
+                                action.setIcon(QIcon(":/icons/delete.svg"))
+                                action.triggered.connect(
+                                    lambda checked=False,
+                                           store_index=store_index,
+                                           ctx_id=ctx_id: self.action_idx_remove(store_index, ctx_id)  # by context meta id
+                                )
+                    menu.addMenu(idx_menu)
+
+                # -----------------------------------------
+
+                # move to group menu
+                group_menu = QMenu(trans('action.move_to'), self)
+                groups = self.window.core.ctx.get_groups()
+
+                # add group
+                action = group_menu.addAction(trans("action.group.new"))
+                action.setIcon(QIcon(":/icons/add.svg"))
                 action.triggered.connect(
-                    lambda checked=False,
-                           idx=idx,
-                           index=id: self.action_idx(idx, index)
+                    lambda checked=False, ctx_id=ctx_id: self.window.controller.ctx.new_group(ctx_id)
                 )
 
-                # remove from index
-                if ctx.indexed is not None and ctx.indexed > 0:
+                # add separator if groups exists
+                if len(groups) > 0:
+                    group_menu.addSeparator()
+
+                # list of groups
+                for group_id in groups:
+                    group = groups[group_id]
+                    action = group_menu.addAction(group.name)
+                    action.setIcon(QIcon(":/icons/folder_filled.svg"))
+                    action.triggered.connect(
+                        lambda checked=False,
+                               group_id=group_id,
+                               ctx_id=ctx_id: self.window.controller.ctx.move_to_group(ctx_id, group_id)
+                    )
+
+                # add separator if groups exists
+                if len(groups) > 0:
+                    group_menu.addSeparator()
+
+                # if in group add remove from group
+                if ctx.group_id is not None and ctx.group_id > 0:
+                    group_name = str(ctx.group_id)
+                    if ctx.group_id in groups:
+                        group_name = groups[ctx.group_id].name
+                    action = group_menu.addAction(trans("action.group.remove") + ": " + group_name)
+                    action.setIcon(QIcon(":/icons/delete.svg"))
+                    action.triggered.connect(
+                        lambda checked=False,
+                               ctx_id=ctx_id: self.window.controller.ctx.remove_from_group(ctx_id)
+                    )
+
+                menu.addMenu(group_menu)
 
-                    # get list of indexes in which context is indexed
-                    if store in ctx.indexes:
-                        store_indexes = ctx.indexes[store]
-                        for store_index in store_indexes:
-                            action = idx_menu.addAction(trans("action.idx.remove") + ": " + store_index)
-                            action.setIcon(QIcon(":/icons/delete.svg"))
-                            action.triggered.connect(
-                                lambda checked=False,
-                                       store_index=store_index,
-                                       ctx_id=ctx_id: self.action_idx_remove(store_index, ctx_id)  # by context meta id
-                            )
-
-            menu.addMenu(idx_menu)
-
-        menu.addAction(actions['copy_id'])
-
-        # show last indexed date if available
-        if ctx.indexed is not None and ctx.indexed > 0:
-            suffix = ""
-            if ctx.updated > ctx.indexed:
-                suffix = " *"
-            dt = datetime.datetime.fromtimestamp(ctx.indexed).strftime("%Y-%m-%d %H:%M")
-            action = QAction(QIcon(":/icons/clock.svg"), trans('action.ctx.indexed') + ": " + dt + suffix, self)
-            action.setEnabled(False)  # disable action, only for info
-            menu.addAction(action)
-
-        if idx >= 0:
-            self.window.controller.ctx.select_by_idx(item.row())
-            menu.exec_(event.globalPos())
+                menu.addAction(actions['copy_id'])
 
-    def action_idx(self, ctx_idx: int, idx: int):
+                # -----------------------------------------
+
+                # show last indexed date if available
+                if ctx.indexed is not None and ctx.indexed > 0:
+                    suffix = ""
+                    if ctx.updated > ctx.indexed:
+                        suffix = " *"
+                    dt = datetime.datetime.fromtimestamp(ctx.indexed).strftime("%Y-%m-%d %H:%M")
+                    action = QAction(QIcon(":/icons/clock.svg"), trans('action.ctx.indexed') + ": " + dt + suffix, self)
+                    action.setEnabled(False)  # disable action, only for info
+                    menu.addAction(action)
+
+                if idx >= 0:
+                    self.window.controller.ctx.select_by_id(ctx_id)
+                    menu.exec_(event.globalPos())
+
+    def action_idx(self, id: int, idx: int):
         """
         Index with llama context action handler
 
-        :param ctx_idx: row idx in context list
+        :param id: context id
         :param idx: index name
         """
-        self.window.controller.idx.indexer.index_ctx_meta(ctx_idx, idx)
+        self.window.controller.idx.indexer.index_ctx_meta(id, idx)
 
     def action_idx_remove(self, idx: str, meta_id: int):
         """
         Remove from index action handler
 
         :param idx: index id
         :param meta_id: meta id
         """
         self.window.controller.idx.indexer.index_ctx_meta_remove(idx, meta_id)
 
-    def action_rename(self, event):
+    def action_rename(self, id):
         """
         Rename action handler
 
-        :param event: mouse event
+        :param id: context id
         """
-        item = self.indexAt(event.pos())
-        idx = item.row()
-        if idx >= 0:
-            self.window.controller.ctx.rename(idx)
+        self.window.controller.ctx.rename(id)
 
-    def action_pin(self, event):
+    def action_pin(self, id):
         """
         Pin action handler
 
-        :param event: mouse event
+        :param id: context id
         """
-        item = self.indexAt(event.pos())
-        idx = item.row()
-        if idx >= 0:
-            self.window.controller.ctx.set_important(idx, True)
+        self.window.controller.ctx.set_important(id, True)
 
-    def action_unpin(self, event):
+    def action_unpin(self, id):
         """
         Unpin action handler
 
-        :param event: mouse event
+        :param id: context id
         """
-        item = self.indexAt(event.pos())
-        idx = item.row()
-        if idx >= 0:
-            self.window.controller.ctx.set_important(idx, False)
+        self.window.controller.ctx.set_important(id, False)
 
-    def action_duplicate(self, event):
+    def action_important(self, id):
         """
-        Rename duplicate handler
+        Set as important action handler
 
-        :param event: mouse event
+        :param id: context id
         """
-        item = self.indexAt(event.pos())
-        idx = item.row()
-        if idx >= 0:
-            self.window.controller.ctx.common.duplicate_by_idx(idx)
+        self.window.controller.ctx.set_important(id)
 
-    def action_important(self, event):
+    def action_duplicate(self, id):
         """
-        Set as important action handler
+        Rename duplicate handler
 
-        :param event: mouse event
+        :param id: context id
         """
-        item = self.indexAt(event.pos())
-        idx = item.row()
-        if idx >= 0:
-            self.window.controller.ctx.set_important(idx)
+        self.window.controller.ctx.common.duplicate(id)
 
-    def action_delete(self, event):
+    def action_delete(self, id):
         """
         Delete action handler
 
-        :param event: mouse event
+        :param id: context id
         """
-        item = self.indexAt(event.pos())
-        idx = item.row()
-        if idx >= 0:
-            self.window.controller.ctx.delete(idx)
+        self.window.controller.ctx.delete(id)
 
-    def action_copy_id(self, event):
+    def action_copy_id(self, id):
         """
         Copy ID tag action handler
 
-        :param event: mouse event
+        :param id: context id
         """
-        item = self.indexAt(event.pos())
-        idx = item.row()
-        if idx >= 0:
-            self.window.controller.ctx.common.copy_id(idx)
+        self.window.controller.ctx.common.copy_id(id)
 
 
 class ImportantItemDelegate(QtWidgets.QStyledItemDelegate):
     """
     Label color delegate
 
     :param QtWidgets.QStyledItemDelegate: parent class
     """
     def paint(self, painter, option, index):
+        if index.parent().isValid():
+            option.rect.adjust(15, 0, 0, 0)
+
         super(ImportantItemDelegate, self).paint(painter, option, index)
 
         # pin (>= 10)
-        if index.data(QtCore.Qt.ItemDataRole.UserRole) > 0:
+        if index.data(QtCore.Qt.ItemDataRole.UserRole) and index.data(QtCore.Qt.ItemDataRole.UserRole) > 0:
             label = index.data(QtCore.Qt.ItemDataRole.UserRole)
             painter.save()
 
             if label >= 10:
                 color = self.get_color_for_status(3)
                 square_size = 3
                 square_margin = 0
@@ -338,7 +443,21 @@
             6: {'label': 'label.color.indigo', 'color': QColor(75, 0, 130)},
             7: {'label': 'label.color.violet', 'color': QColor(238, 130, 238)},
         }
         if status in statuses:
             return statuses[status]['color']
         else:
             return statuses[0]['color']
+
+class GroupItem(QStandardItem):
+    def __init__(self, icon, name, id):
+        super().__init__(icon, name)
+        self.id = id
+        self.name = name
+        self.isFolder = True
+
+class Item(QStandardItem):
+    def __init__(self, name, id):
+        super().__init__(name)
+        self.id = id
+        self.name = name
+        self.isFolder = False
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/ui/widget/lists/debug.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/widget/lists/debug.py`

 * *Files 4% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.25 22:00:00                  #
+# Updated Date: 2024.03.06 02:00:00                  #
 # ================================================== #
 
 import json
 import ast
 from PySide6.QtCore import Qt
 from PySide6.QtGui import QCursor
 from PySide6.QtWidgets import QAbstractItemView, QApplication, QMenu, \
@@ -109,10 +109,10 @@
         """
         On item clicked
 
         :param index: Index
         """
         # update data viewer
         data = self.model().data(index)
-        self.viewer.setPlainText(self.parse_view(data))
+        self.viewer.setPlainText(str(self.parse_view(data)))
         self.viewer_index = index
         self.viewer_current = data
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/ui/widget/lists/index.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/widget/lists/index.py`

 * *Files 2% similar despite different names*

```diff
@@ -41,27 +41,27 @@
         actions = {}
         actions['edit'] = QAction(QIcon(":/icons/edit.svg"), trans('action.edit'), self)
         actions['edit'].triggered.connect(
             lambda: self.action_edit(event)
         )
 
         txt = trans('idx.index_now') + ': ' + trans('settings.llama.extra.btn.idx_db_all')
-        actions['idx_db_all'] = QAction(QIcon(":/icons/search.svg"), txt, self)
+        actions['idx_db_all'] = QAction(QIcon(":/icons/search.db"), txt, self)
         actions['idx_db_all'].triggered.connect(
             lambda: self.action_idx_db_all(event)
         )
 
         txt = trans('idx.index_now') + ': ' + trans('settings.llama.extra.btn.idx_db_update')
-        actions['idx_db_update'] = QAction(QIcon(":/icons/search.svg"), txt, self)
+        actions['idx_db_update'] = QAction(QIcon(":/icons/search.db"), txt, self)
         actions['idx_db_update'].triggered.connect(
             lambda: self.action_idx_db_update(event)
         )
 
         txt = trans('idx.index_now') + ': ' + trans('settings.llama.extra.btn.idx_files_all')
-        actions['idx_files_all'] = QAction(QIcon(":/icons/search.svg"), txt, self)
+        actions['idx_files_all'] = QAction(QIcon(":/icons/search.db"), txt, self)
         actions['idx_files_all'].triggered.connect(
             lambda: self.action_idx_files_all(event)
         )
 
         actions['clear'] = QAction(QIcon(":/icons/close.svg"), trans('idx.btn.clear'), self)
         actions['clear'].triggered.connect(
             lambda: self.action_clear(event)
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/ui/widget/lists/mode.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/widget/lists/mode.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/ui/widget/lists/model.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/widget/lists/model.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/ui/widget/lists/model_editor.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/widget/lists/model_editor.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/ui/widget/lists/plugin.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/widget/lists/settings.py`

 * *Files 10% similar despite different names*

```diff
@@ -8,24 +8,23 @@
 # Created By  : Marcin Szczygliński                  #
 # Updated Date: 2024.01.12 08:00:00                  #
 # ================================================== #
 
 from pygpt_net.ui.widget.lists.base import BaseList
 
 
-class PluginList(BaseList):
+class SettingsSectionList(BaseList):
     def __init__(self, window=None, id=None):
         """
-        Plugin select menu (in settings dialog)
+        Settings section menu (in settings dialog)
 
         :param window: main window
-        :param id: parent id
+        :param id: settings id
         """
-        super(PluginList, self).__init__(window)
+        super(SettingsSectionList, self).__init__(window)
         self.window = window
         self.id = id
 
     def click(self, val):
         idx = val.row()
-        self.window.ui.tabs['plugin.settings'].setCurrentIndex(idx)
-        self.window.controller.plugins.set_by_tab(idx)
-
+        self.window.ui.tabs['settings.section'].setCurrentIndex(idx)
+        self.window.controller.settings.set_by_tab(idx)
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/ui/widget/lists/preset.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/widget/lists/preset.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/ui/widget/lists/settings.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/widget/textarea/name.py`

 * *Files 25% similar despite different names*

```diff
@@ -2,29 +2,34 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.01.12 08:00:00                  #
+# Updated Date: 2024.01.27 11:00:00                  #
 # ================================================== #
 
-from pygpt_net.ui.widget.lists.base import BaseList
+from PySide6.QtWidgets import QLineEdit
 
 
-class SettingsSectionList(BaseList):
+class NameInput(QLineEdit):
     def __init__(self, window=None, id=None):
         """
-        Settings section menu (in settings dialog)
+        AI or user name input
 
-        :param window: main window
-        :param id: settings id
+        :param window: Window instance
+        :param id: input id
         """
-        super(SettingsSectionList, self).__init__(window)
+        super(NameInput, self).__init__(window)
         self.window = window
         self.id = id
 
-    def click(self, val):
-        idx = val.row()
-        self.window.ui.tabs['settings.section'].setCurrentIndex(idx)
-        self.window.controller.settings.set_by_tab(idx)
+    def keyPressEvent(self, event):
+        """
+        Key press event
+
+        :param event: key event
+        """
+        super(NameInput, self).keyPressEvent(event)
+        self.window.controller.ui.update_tokens()
+        self.window.controller.presets.editor.update_from_global(self.id, self.text())
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/ui/widget/lists/uploaded.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/widget/lists/preset_plugins.py`

 * *Files 13% similar despite different names*

```diff
@@ -2,127 +2,123 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.01.29 14:00:00                  #
+# Updated Date: 2024.03.06 22:00:00                  #
 # ================================================== #
 
-from PySide6.QtGui import QAction, QIcon, QResizeEvent
+from PySide6.QtGui import QAction, QIcon
 from PySide6.QtWidgets import QMenu
 
 from pygpt_net.ui.widget.lists.base import BaseList
 from pygpt_net.utils import trans
 import pygpt_net.icons_rc
 
 
-class UploadedFileList(BaseList):
+class PresetPluginsList(BaseList):
     def __init__(self, window=None, id=None):
         """
-        Attachments menu
+        Preset plugins menu (in editor)
 
         :param window: main window
-        :param id: input id
+        :param id: parent id
         """
-        super(UploadedFileList, self).__init__(window)
+        super(PresetPluginsList, self).__init__(window)
         self.window = window
         self.id = id
-        self.doubleClicked.connect(self.dblclick)
-        self.setHeaderHidden(False)
-
-        self.header = self.header()
-        self.header.setStretchLastSection(True)
-
-        self.column_proportion = 0.5
-        self.adjustColumnWidths()
-
-    def adjustColumnWidths(self):
-        total_width = self.width()
-        first_column_width = int(total_width * self.column_proportion)
-        self.setColumnWidth(0, first_column_width)
-        for column in range(1, 2):
-            self.setColumnWidth(column, (total_width - first_column_width) // (2 - 1))
-
-    def resizeEvent(self, event: QResizeEvent):
-        super().resizeEvent(event)
-        self.adjustColumnWidths()
 
     def click(self, val):
-        """
-        Click event
-
-        :param val: click event
-        """
-        self.window.controller.assistant.files.select(val.row())
-
-    def dblclick(self, val):
-        """
-        Double click event
-
-        :param val: double click event
-        """
-        self.window.controller.assistant.files.select(val.row())
+        pass
 
     def contextMenuEvent(self, event):
         """
         Context menu event
 
         :param event: context menu event
         """
         actions = {}
-        actions['download'] = QAction(QIcon(":/icons/download.svg"), trans('action.download'), self)
-        actions['download'].triggered.connect(
-            lambda: self.action_download(event))
-
+        actions['use'] = QAction(QIcon(":/icons/check.svg"), trans('action.use'), self)
+        actions['use'].triggered.connect(
+            lambda: self.action_use(event))
         actions['rename'] = QAction(QIcon(":/icons/edit.svg"), trans('action.rename'), self)
         actions['rename'].triggered.connect(
             lambda: self.action_rename(event))
-
+        actions['duplicate'] = QAction(QIcon(":/icons/copy.svg"), trans('action.duplicate'), self)
+        actions['duplicate'].triggered.connect(
+            lambda: self.action_duplicate(event))
+        actions['reset'] = QAction(QIcon(":/icons/close.svg"), trans('action.reset'), self)
+        actions['reset'].triggered.connect(
+            lambda: self.action_reset(event))
         actions['delete'] = QAction(QIcon(":/icons/delete.svg"), trans('action.delete'), self)
         actions['delete'].triggered.connect(
             lambda: self.action_delete(event))
 
         menu = QMenu(self)
-        # menu.addAction(actions['download'])  # not allowed for download files with purpose: assistants :(
+        menu.addAction(actions['use'])
         menu.addAction(actions['rename'])
+        menu.addAction(actions['duplicate'])
+        menu.addAction(actions['reset'])
         menu.addAction(actions['delete'])
 
         item = self.indexAt(event.pos())
         idx = item.row()
         if idx >= 0:
-            self.window.controller.assistant.files.select(item.row())
             menu.exec_(event.globalPos())
 
-    def action_rename(self, event):
+    def action_use(self, event):
         """
-        Rename action handler
+        Use action handler
 
         :param event: mouse event
         """
         item = self.indexAt(event.pos())
         idx = item.row()
         if idx >= 0:
-            self.window.controller.assistant.files.rename(idx)
+            self.window.controller.plugins.presets.select_by_idx(idx)
 
-    def action_download(self, event):
+    def action_duplicate(self, event):
         """
-        Download action handler
+        Duplicate action handler
 
         :param event: mouse event
         """
         item = self.indexAt(event.pos())
         idx = item.row()
         if idx >= 0:
-            self.window.controller.assistant.files.download(idx)
+            self.window.controller.plugins.presets.duplicate_by_idx(idx)
+
+    def action_reset(self, event):
+        """
+        Reset action handler
+
+        :param event: mouse event
+        """
+        item = self.indexAt(event.pos())
+        idx = item.row()
+        if idx >= 0:
+            self.window.controller.plugins.presets.reset_by_idx(idx)
 
     def action_delete(self, event):
         """
         Delete action handler
 
         :param event: mouse event
         """
         item = self.indexAt(event.pos())
         idx = item.row()
         if idx >= 0:
-            self.window.controller.assistant.files.delete(idx)
+            self.window.controller.plugins.presets.delete_by_idx(idx)
+
+    def action_rename(self, event):
+        """
+        Rename action handler
+
+        :param event: mouse event
+        """
+        item = self.indexAt(event.pos())
+        idx = item.row()
+        if idx >= 0:
+            self.window.controller.plugins.presets.rename_by_idx(idx)
+
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/ui/widget/option/checkbox.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/widget/option/checkbox.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/ui/widget/option/slider.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/widget/option/slider.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/ui/widget/option/textarea.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/widget/option/textarea.py`

 * *Files 20% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.18 18:00:00                  #
+# Updated Date: 2024.04.26 23:00:00                  #
 # ================================================== #
 
 from PySide6.QtWidgets import QTextEdit
 
 
 class OptionTextarea(QTextEdit):
     def __init__(
@@ -34,23 +34,39 @@
         self.parent_id = parent_id
         self.option = option
         self.value = False
         self.title = ""
         self.real_time = False
         self.update_ui = True
         self.setAcceptRichText(False)
+        self.context_options = []
 
         # init from option data
         if self.option is not None:
             if "label" in self.option:
                 self.title = self.option["label"]
             if "value" in self.option:
                 self.value = self.option["value"]
             if "real_time" in self.option:
                 self.real_time = self.option["real_time"]
+            if "context_options" in self.option:
+                self.context_options = self.option["context_options"]
+            if "read_only" in self.option and self.option["read_only"]:
+                self.setReadOnly(True)
+
+    def contextMenuEvent(self, event):
+        """
+        Context menu event
+
+        :param event: Event
+        """
+        menu = self.createStandardContextMenu()
+        if "prompt.template.paste" in self.context_options:
+            self.window.core.prompt.template.to_menu_options(menu, "editor")
+        menu.exec_(event.globalPos())
 
     def keyPressEvent(self, event):
         """
         Key press event
 
         :param event: key event
         """
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/ui/widget/tabs/Input.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/widget/tabs/Input.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/ui/widget/tabs/output.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/widget/tabs/output.py`

 * *Files 4% similar despite different names*

```diff
@@ -2,29 +2,30 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.16 16:00:00                  #
+# Updated Date: 2024.04.09 23:00:00                  #
 # ================================================== #
 
 from PySide6.QtWidgets import QTabWidget, QMenu
 from PySide6.QtCore import Qt, Slot
 from PySide6.QtGui import QAction, QIcon
 
 from pygpt_net.utils import trans
 import pygpt_net.icons_rc
 
 
 class OutputTabs(QTabWidget):
     def __init__(self, window=None):
         super(OutputTabs, self).__init__(window)
         self.window = window
+        self.setMinimumHeight(1)
 
     def mousePressEvent(self, event):
         """
         Mouse press event
         :param event: event
         """
         if event.button() == Qt.RightButton:
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/ui/widget/textarea/calendar_note.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/widget/lists/profile.py`

 * *Files 26% similar despite different names*

```diff
@@ -2,107 +2,140 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.01.29 18:00:00                  #
+# Updated Date: 2024.04.09 23:00:00                  #
 # ================================================== #
 
-from PySide6.QtCore import Qt
 from PySide6.QtGui import QAction, QIcon
-from PySide6.QtWidgets import QTextEdit, QMenu
+from PySide6.QtWidgets import QMenu
 
+from pygpt_net.ui.widget.lists.base import BaseList
 from pygpt_net.utils import trans
 import pygpt_net.icons_rc
 
 
-class CalendarNote(QTextEdit):
-    def __init__(self, window=None):
+class ProfileList(BaseList):
+    def __init__(self, window=None, id=None):
         """
-        Notepad
+        Profile menu (in editor)
 
         :param window: main window
+        :param id: parent id
         """
-        super(CalendarNote, self).__init__(window)
+        super(ProfileList, self).__init__(window)
         self.window = window
-        self.setAcceptRichText(False)
-        self.setStyleSheet(self.window.controller.theme.style('font.chat.output'))
-        self.value = int(self.window.core.config.get('font_size.calendar.note') or 12)
-        self.textChanged.connect(self.window.controller.calendar.note.update)
-        self.max_font_size = 42
-        self.min_font_size = 8
+        self.id = id
+
+    def click(self, val):
+        pass
 
     def contextMenuEvent(self, event):
-        menu = self.createStandardContextMenu()
-        selected_text = self.textCursor().selectedText()
-        if selected_text:
-            # plain text
-            plain_text = self.textCursor().selection().toPlainText()
-
-            # audio read
-            action = QAction(QIcon(":/icons/volume.svg"), trans('text.context_menu.audio.read'), self)
-            action.triggered.connect(self.audio_read_selection)
-            menu.addAction(action)
-
-            # copy to
-            copy_to_menu = QMenu(trans('text.context_menu.copy_to'), self)
-
-            # input
-            action = QAction(QIcon(":/icons/input.svg"), trans('text.context_menu.copy_to.input'), self)
-            action.triggered.connect(
-                lambda: self.window.controller.chat.common.append_to_input(selected_text))
-            copy_to_menu.addAction(action)
-
-            # notepad
-            num_notepads = self.window.controller.notepad.get_num_notepads()
-            if num_notepads > 0:
-                for i in range(1, num_notepads + 1):
-                    name = self.window.controller.notepad.get_notepad_name(i)
-                    action = QAction(QIcon(":/icons/paste.svg"), name, self)
-                    action.triggered.connect(lambda checked=False, i=i:
-                                             self.window.controller.notepad.append_text(selected_text, i))
-                    copy_to_menu.addAction(action)
-
-            menu.addMenu(copy_to_menu)
-
-            # save as (selected)
-            action = QAction(QIcon(":/icons/save.svg"), trans('action.save_as'), self)
-            action.triggered.connect(
-                lambda: self.window.controller.chat.common.save_text(plain_text))
-            menu.addAction(action)
-        else:
-            # save as (all)
-            action = QAction(QIcon(":/icons/save.svg"), trans('action.save_as'), self)
-            action.triggered.connect(
-                lambda: self.window.controller.chat.common.save_text(self.toPlainText()))
-            menu.addAction(action)
-
-        menu.exec_(event.globalPos())
-
-    def audio_read_selection(self):
-        """
-        Read selected text (audio)
-        """
-        self.window.controller.audio.read_text(self.textCursor().selectedText())
-
-    def wheelEvent(self, event):
-        """
-        Wheel event: set font size
-
-        :param event: Event
-        """
-        if event.modifiers() & Qt.ControlModifier:
-            if event.angleDelta().y() > 0:
-                if self.value < self.max_font_size:
-                    self.value += 1
-            else:
-                if self.value > self.min_font_size:
-                    self.value -= 1
-
-            self.window.core.config.data['font_size.calendar.note'] = self.value
-            self.window.core.config.save()
-            self.window.controller.ui.update_font_size()
-            event.accept()
-        else:
-            super(CalendarNote, self).wheelEvent(event)
+        """
+        Context menu event
+
+        :param event: context menu event
+        """
+        actions = {}
+        actions['use'] = QAction(QIcon(":/icons/check.svg"), trans('action.use'), self)
+        actions['use'].triggered.connect(
+            lambda: self.action_use(event))
+        actions['edit'] = QAction(QIcon(":/icons/edit.svg"), trans('action.edit'), self)
+        actions['edit'].triggered.connect(
+            lambda: self.action_edit(event))
+        actions['duplicate'] = QAction(QIcon(":/icons/copy.svg"), trans('action.duplicate'), self)
+        actions['duplicate'].triggered.connect(
+            lambda: self.action_duplicate(event))
+
+
+        actions['reset'] = QAction(QIcon(":/icons/close.svg"), trans('action.reset'), self)
+        actions['reset'].triggered.connect(
+            lambda: self.action_reset(event))
+        actions['delete'] = QAction(QIcon(":/icons/delete.svg"), trans('action.profile.delete'), self)
+        actions['delete'].triggered.connect(
+            lambda: self.action_delete(event))
+        actions['delete_all'] = QAction(QIcon(":/icons/delete.svg"), trans('action.profile.delete_all'), self)
+        actions['delete_all'].triggered.connect(
+            lambda: self.action_delete_all(event))
+
+        menu = QMenu(self)
+        menu.addAction(actions['edit'])
+        menu.addAction(actions['use'])
+        menu.addAction(actions['duplicate'])
+        menu.addAction(actions['reset'])
+        menu.addAction(actions['delete'])
+        menu.addAction(actions['delete_all'])
+
+        item = self.indexAt(event.pos())
+        idx = item.row()
+        if idx >= 0:
+            menu.exec_(event.globalPos())
+
+    def action_use(self, event):
+        """
+        Use action handler
+
+        :param event: mouse event
+        """
+        item = self.indexAt(event.pos())
+        idx = item.row()
+        if idx >= 0:
+            self.window.controller.settings.profile.select_by_idx(idx)
+
+    def action_duplicate(self, event):
+        """
+        Duplicate action handler
+
+        :param event: mouse event
+        """
+        item = self.indexAt(event.pos())
+        idx = item.row()
+        if idx >= 0:
+            self.window.controller.settings.profile.duplicate_by_idx(idx)
+
+    def action_reset(self, event):
+        """
+        Reset action handler
+
+        :param event: mouse event
+        """
+        item = self.indexAt(event.pos())
+        idx = item.row()
+        if idx >= 0:
+            self.window.controller.settings.profile.reset_by_idx(idx)
+
+    def action_delete(self, event):
+        """
+        Delete action handler
+
+        :param event: mouse event
+        """
+        item = self.indexAt(event.pos())
+        idx = item.row()
+        if idx >= 0:
+            self.window.controller.settings.profile.delete_by_idx(idx)
+
+    def action_delete_all(self, event):
+        """
+        Delete all action handler
+
+        :param event: mouse event
+        """
+        item = self.indexAt(event.pos())
+        idx = item.row()
+        if idx >= 0:
+            self.window.controller.settings.profile.delete_all_by_idx(idx)
+
+    def action_edit(self, event):
+        """
+        Edit action handler
+
+        :param event: mouse event
+        """
+        item = self.indexAt(event.pos())
+        idx = item.row()
+        if idx >= 0:
+            self.window.controller.settings.profile.edit_by_idx(idx)
+
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/ui/widget/textarea/create.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/widget/textarea/create.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/ui/widget/textarea/input.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/widget/textarea/editor.py`

 * *Files 21% similar despite different names*

```diff
@@ -2,125 +2,171 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.25 01:00:00                  #
+# Updated Date: 2024.04.11 16:00:00                  #
 # ================================================== #
 
-from PySide6 import QtCore
 from PySide6.QtCore import Qt
-from PySide6.QtGui import QAction, QIcon
-from PySide6.QtWidgets import QTextEdit, QApplication, QMenu
+from PySide6.QtGui import QAction, QIcon, QKeySequence
+from PySide6.QtWidgets import QTextEdit
 
+from pygpt_net.core.text.finder import Finder
 from pygpt_net.utils import trans
+
 import pygpt_net.icons_rc
 
 
-class ChatInput(QTextEdit):
+class BaseCodeEditor(QTextEdit):
     def __init__(self, window=None):
         """
-        Chat input
+        Base code editor
 
         :param window: main window
         """
-        super(ChatInput, self).__init__(window)
+        super(BaseCodeEditor, self).__init__(window)
         self.window = window
+        self.finder = Finder(window, self)
+        self.setReadOnly(True)
         self.setAcceptRichText(False)
-        self.setFocus()
-        self.value = self.window.core.config.data['font_size.input']
+        self.value = 12
         self.max_font_size = 42
         self.min_font_size = 8
-        self.textChanged.connect(self.window.controller.ui.update_tokens)
+        self.setProperty('class', 'code-editor')
+        self.default_stylesheet = ""
+        self.setStyleSheet(self.default_stylesheet)
+        self.excluded_copy_to = []
+        self.textChanged.connect(self.text_changed)
+
+    def text_changed(self):
+        """On text changed"""
+        self.finder.text_changed()
+
+    def update_stylesheet(self, data: str):
+        """
+        Update stylesheet
+
+        :param data: stylesheet CSS
+        """
+        self.setStyleSheet(self.default_stylesheet + data)
 
     def contextMenuEvent(self, event):
+        """
+        Context menu event
+
+        :param event: Event
+        """
         menu = self.createStandardContextMenu()
         selected_text = self.textCursor().selectedText()
+
         if selected_text:
             # plain text
             plain_text = self.textCursor().selection().toPlainText()
 
             # audio read
             action = QAction(QIcon(":/icons/volume.svg"), trans('text.context_menu.audio.read'), self)
             action.triggered.connect(self.audio_read_selection)
             menu.addAction(action)
 
             # copy to
-            copy_to_menu = QMenu(trans('text.context_menu.copy_to'), self)
-
-            # notepad
-            num_notepads = self.window.controller.notepad.get_num_notepads()
-            if num_notepads > 0:
-                for i in range(1, num_notepads + 1):
-                    name = self.window.controller.notepad.get_notepad_name(i)
-                    action = QAction(QIcon(":/icons/paste.svg"), name, self)
-                    action.triggered.connect(lambda checked=False, i=i:
-                                             self.window.controller.notepad.append_text(selected_text, i))
-                    copy_to_menu.addAction(action)
-
-            # calendar
-            action = QAction(QIcon(":/icons/schedule.svg"), trans('text.context_menu.copy_to.calendar'), self)
-            action.triggered.connect(
-                lambda: self.window.controller.calendar.note.append_text(selected_text))
-            copy_to_menu.addAction(action)
-
+            copy_to_menu = self.window.ui.context_menu.get_copy_to_menu(
+                self,
+                selected_text,
+                excluded=self.excluded_copy_to
+            )
             menu.addMenu(copy_to_menu)
 
             # save as (selected)
-            action = QAction(QIcon(":/icons/save.svg"), trans('action.save_as'), self)
+            action = QAction(QIcon(":/icons/save.svg"), trans('action.save_selection_as'), self)
             action.triggered.connect(
                 lambda: self.window.controller.chat.common.save_text(plain_text))
             menu.addAction(action)
         else:
             # save as (all)
             action = QAction(QIcon(":/icons/save.svg"), trans('action.save_as'), self)
             action.triggered.connect(
                 lambda: self.window.controller.chat.common.save_text(self.toPlainText()))
             menu.addAction(action)
 
+        action = QAction(QIcon(":/icons/search.svg"), trans('text.context_menu.find'), self)
+        action.triggered.connect(self.find_open)
+        action.setShortcut(QKeySequence("Ctrl+F"))
+        menu.addAction(action)
+
         menu.exec_(event.globalPos())
 
     def audio_read_selection(self):
-        """
-        Read selected text (audio)
-        """
+        """Read selected text (audio)"""
         self.window.controller.audio.read_text(self.textCursor().selectedText())
 
-    def keyPressEvent(self, event):
+    def find_open(self):
+        """Open find dialog"""
+        self.window.controller.finder.open(self.finder)
+
+    def on_update(self):
+        """On content update"""
+        self.finder.clear()  # clear finder
+
+    def on_destroy(self):
+        """On destroy"""
+        self.window.controller.finder.unset(self.finder)  # unregister finder from memory
+
+    def keyPressEvent(self, e):
         """
         Key press event
 
-        :param event: key event
+        :param e: Event
         """
-        super(ChatInput, self).keyPressEvent(event)
-        if event.key() in (QtCore.Qt.Key_Return, QtCore.Qt.Key_Enter):
-            mode = self.window.core.config.get('send_mode')
-            if mode > 0:  # Enter or Shift + Enter
-                if mode == 2:  # Shift + Enter
-                    modifiers = QApplication.keyboardModifiers()
-                    if modifiers == QtCore.Qt.ShiftModifier:
-                        self.window.controller.chat.input.send_input()
-                else:  # Enter
-                    self.window.controller.chat.input.send_input()
-                self.setFocus()
+        if e.key() == Qt.Key_F and e.modifiers() & Qt.ControlModifier:
+            self.find_open()
+        else:
+            super(BaseCodeEditor, self).keyPressEvent(e)
 
     def wheelEvent(self, event):
         """
         Wheel event: set font size
+
         :param event: Event
         """
         if event.modifiers() & Qt.ControlModifier:
             if event.angleDelta().y() > 0:
                 if self.value < self.max_font_size:
                     self.value += 1
             else:
                 if self.value > self.min_font_size:
                     self.value -= 1
 
-            self.window.core.config.data['font_size.input'] = self.value
-            self.window.core.config.save()
-            self.window.controller.ui.update_font_size()
+            size_str = f"{self.value}px"
+            self.update_stylesheet(f"font-size: {size_str};")
             event.accept()
         else:
-            super(ChatInput, self).wheelEvent(event)
+            super(BaseCodeEditor, self).wheelEvent(event)
+
+    def focusInEvent(self, e):
+        """
+        Focus in event
+
+        :param e: focus event
+        """
+        super(BaseCodeEditor, self).focusInEvent(e)
+        self.window.controller.finder.focus_in(self.finder)
+
+
+class CodeEditor(BaseCodeEditor):
+    def __init__(self, window=None):
+        """
+        Code editor
+
+        :param window: main window
+        """
+        super(CodeEditor, self).__init__(window)
+        self.window = window
+        self.setReadOnly(True)
+        self.value = 12
+        self.max_font_size = 42
+        self.min_font_size = 8
+        self.setProperty('class', 'code-editor')
+        self.default_stylesheet = ""
+        self.setStyleSheet(self.default_stylesheet)
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/ui/widget/textarea/name.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/widget/textarea/rename.py`

 * *Files 18% similar despite different names*

```diff
@@ -2,34 +2,42 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.01.27 11:00:00                  #
+# Updated Date: 2024.01.27 19:00:00                  #
 # ================================================== #
 
+from PySide6 import QtCore
 from PySide6.QtWidgets import QLineEdit
 
 
-class NameInput(QLineEdit):
+class RenameInput(QLineEdit):
     def __init__(self, window=None, id=None):
         """
-        AI or user name input
+        Rename dialog input
 
-        :param window: Window instance
-        :param id: input id
+        :param window: main window
+        :param id: info window id
         """
-        super(NameInput, self).__init__(window)
+        super(RenameInput, self).__init__(window)
+
         self.window = window
         self.id = id
 
     def keyPressEvent(self, event):
         """
         Key press event
 
         :param event: key event
         """
-        super(NameInput, self).keyPressEvent(event)
-        self.window.controller.ui.update_tokens()
-        self.window.controller.presets.editor.update_from_global(self.id, self.text())
+        super(RenameInput, self).keyPressEvent(event)
+
+        # save on Enter
+        if event.key() == QtCore.Qt.Key_Return or event.key() == QtCore.Qt.Key_Enter:
+            self.window.controller.dialogs.confirm.accept_rename(
+                self.window.ui.dialog['rename'].id,
+                self.window.ui.dialog['rename'].current,
+                self.text(),
+            )
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/ui/widget/textarea/notepad.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/widget/textarea/notepad.py`

 * *Files 10% similar despite different names*

```diff
@@ -2,131 +2,160 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.25 01:00:00                  #
+# Updated Date: 2024.04.11 16:00:00                  #
 # ================================================== #
 
 from PySide6.QtCore import Qt
-from PySide6.QtGui import QAction, QIcon
-from PySide6.QtWidgets import QTextEdit, QMenu, QWidget, QVBoxLayout
+from PySide6.QtGui import QAction, QIcon, QKeySequence
+from PySide6.QtWidgets import QTextEdit, QWidget, QVBoxLayout
 
+from pygpt_net.core.text.finder import Finder
 from pygpt_net.ui.widget.element.labels import HelpLabel
 from pygpt_net.utils import trans
 import pygpt_net.icons_rc
 
 
 class NotepadWidget(QWidget):
     def __init__(self, window=None):
         """
         Notepad
 
         :param window: main window
         """
         super(NotepadWidget, self).__init__(window)
         self.window = window
-        self.id = 1
+        self.id = 1  # assigned in setup
         self.textarea = NotepadOutput(self.window)
         self.window.ui.nodes['tip.output.tab.notepad'] = HelpLabel(trans('tip.output.tab.notepad'), self.window)
 
         layout = QVBoxLayout()
         layout.addWidget(self.textarea)
         layout.addWidget(self.window.ui.nodes['tip.output.tab.notepad'])
         layout.setContentsMargins(0, 0, 0, 0)
         self.setLayout(layout)
 
-    def setText(self, text):
+    def setText(self, text: str):
+        """
+        Set text
+
+        :param text: Text
+        """
         self.textarea.setText(text)
+        self.textarea.on_update()
+
+    def toPlainText(self) -> str:
+        """
+        Get plain text
 
-    def toPlainText(self):
+        :return: Plain text
+        """
         return self.textarea.toPlainText()
 
+    def on_destroy(self):
+        """On destroy"""
+        # unregister finder from memory
+        self.window.controller.finder.unset(self.textarea.finder)
+
 
 class NotepadOutput(QTextEdit):
     def __init__(self, window=None):
         """
         Notepad
 
         :param window: main window
         """
         super(NotepadOutput, self).__init__(window)
         self.window = window
+        self.finder = Finder(window, self)
         self.setAcceptRichText(False)
         self.setStyleSheet(self.window.controller.theme.style('font.chat.output'))
-        self.textChanged.connect(
-            lambda: self.window.controller.notepad.save(self.id))
         self.value = self.window.core.config.data['font_size']
         self.max_font_size = 42
         self.min_font_size = 8
-        self.id = 1
+        self.id = 1  # assigned in setup
+        self.textChanged.connect(self.text_changed)
+
+    def text_changed(self):
+        """On text changed"""
+        if not self.window.core.notepad.locked:
+            self.window.controller.notepad.save(self.id)  # use notepad id
+        self.finder.text_changed()
 
     def contextMenuEvent(self, event):
+        """
+        Context menu event
+
+        :param event: Event
+        """
         menu = self.createStandardContextMenu()
         selected_text = self.textCursor().selectedText()
         if selected_text:
             # plain text
             plain_text = self.textCursor().selection().toPlainText()
 
             # audio read
             action = QAction(QIcon(":/icons/volume.svg"), trans('text.context_menu.audio.read'), self)
             action.triggered.connect(self.audio_read_selection)
             menu.addAction(action)
 
-            # copy to
-            copy_to_menu = QMenu(trans('text.context_menu.copy_to'), self)
-
-            # input
-            action = QAction(QIcon(":/icons/input.svg"), trans('text.context_menu.copy_to.input'), self)
-            action.triggered.connect(
-                lambda: self.window.controller.chat.common.append_to_input(selected_text))
-            copy_to_menu.addAction(action)
-
-            # notepad
-            num_notepads = self.window.controller.notepad.get_num_notepads()
-            if num_notepads > 0:
-                for i in range(1, num_notepads + 1):
-                    if i == self.id:
-                        continue
-                    name = self.window.controller.notepad.get_notepad_name(i)
-                    action = QAction(QIcon(":/icons/paste.svg"), name, self)
-                    action.triggered.connect(lambda checked=False, i=i:
-                                             self.window.controller.notepad.append_text(selected_text, i))
-                    copy_to_menu.addAction(action)
-
-            # calendar
-            action = QAction(QIcon(":/icons/schedule.svg"), trans('text.context_menu.copy_to.calendar'), self)
-            action.triggered.connect(
-                lambda: self.window.controller.calendar.note.append_text(selected_text))
-            copy_to_menu.addAction(action)
-
+            # copy to (without current notepad)
+            excluded_id = "notepad_id_{}".format(self.id)
+            copy_to_menu = self.window.ui.context_menu.get_copy_to_menu(self, selected_text, excluded=[excluded_id])
             menu.addMenu(copy_to_menu)
 
             # save as (selected)
-            action = QAction(QIcon(":/icons/save.svg"), trans('action.save_as'), self)
+            action = QAction(QIcon(":/icons/save.svg"), trans('action.save_selection_as'), self)
             action.triggered.connect(
                 lambda: self.window.controller.chat.common.save_text(plain_text))
             menu.addAction(action)
         else:
             # save as (all)
             action = QAction(QIcon(":/icons/save.svg"), trans('action.save_as'), self)
             action.triggered.connect(
                 lambda: self.window.controller.chat.common.save_text(self.toPlainText()))
             menu.addAction(action)
 
+        action = QAction(QIcon(":/icons/search.svg"), trans('text.context_menu.find'), self)
+        action.triggered.connect(self.find_open)
+        action.setShortcut(QKeySequence("Ctrl+F"))
+        menu.addAction(action)
+
         menu.exec_(event.globalPos())
 
     def audio_read_selection(self):
         """
         Read selected text (audio)
         """
         self.window.controller.audio.read_text(self.textCursor().selectedText())
 
+    def find_open(self):
+        """Open find dialog"""
+        self.window.controller.finder.open(self.finder)
+
+    def on_update(self):
+        """On content update"""
+        self.finder.clear()  # clear finder
+
+    def keyPressEvent(self, e):
+        """
+        Key press event
+
+        :param e: Event
+        """
+        if e.key() == Qt.Key_F and e.modifiers() & Qt.ControlModifier:
+            self.find_open()
+        else:
+            self.finder.clear(restore=True, to_end=False)
+            super(NotepadOutput, self).keyPressEvent(e)
+
     def wheelEvent(self, event):
         """
         Wheel event: set font size
 
         :param event: Event
         """
         if event.modifiers() & Qt.ControlModifier:
@@ -146,7 +175,26 @@
                 key='font_size', 
                 option=option,
             )
             self.window.controller.ui.update_font_size()
             event.accept()
         else:
             super(NotepadOutput, self).wheelEvent(event)
+
+    def focusInEvent(self, e):
+        """
+        Focus in event
+
+        :param e: focus event
+        """
+        self.window.controller.finder.focus_in(self.finder)
+        super(NotepadOutput, self).focusInEvent(e)
+
+    def focusOutEvent(self, e):
+        """
+        Focus out event
+
+        :param e: focus event
+        """
+        super(NotepadOutput, self).focusOutEvent(e)
+        self.window.controller.finder.focus_out(self.finder)
+
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/ui/widget/textarea/output.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/widget/textarea/input.py`

 * *Files 13% similar despite different names*

```diff
@@ -2,139 +2,165 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.02.25 01:00:00                  #
+# Updated Date: 2024.04.12 10:00:00                  #
 # ================================================== #
 
+from PySide6 import QtCore
 from PySide6.QtCore import Qt
-from PySide6.QtWidgets import QTextBrowser, QMenu
-from PySide6.QtGui import QDesktopServices, QAction, QIcon
+from PySide6.QtGui import QAction, QIcon, QImage
+from PySide6.QtWidgets import QTextEdit, QApplication
 
 from pygpt_net.utils import trans
 import pygpt_net.icons_rc
 
 
-class ChatOutput(QTextBrowser):
+class ChatInput(QTextEdit):
     def __init__(self, window=None):
         """
-        Chat output
+        Chat input
 
         :param window: main window
         """
-        super(ChatOutput, self).__init__(window)
+        super(ChatInput, self).__init__(window)
         self.window = window
-        self.setReadOnly(True)
-        self.setStyleSheet(self.window.controller.theme.style('font.chat.output'))
-        self.value = self.window.core.config.data['font_size']
+        self.setAcceptRichText(False)
+        self.setFocus()
+        self.value = self.window.core.config.data['font_size.input']
         self.max_font_size = 42
         self.min_font_size = 8
-        self.setOpenExternalLinks(False)
-        self.setOpenLinks(False)
-        self.anchorClicked.connect(self.open_external_link)
+        self.textChanged.connect(self.window.controller.ui.update_tokens)
 
-    def open_external_link(self, url):
+    def insertFromMimeData(self, source):
         """
-        Open external link
+        Insert from mime data
 
-        :param url: url
+        :param source: source
         """
-        # local file
-        if not url.scheme().startswith('http'):
-            self.window.controller.files.open(url.toLocalFile())
-        else:
-            # external link
-            QDesktopServices.openUrl(url)
+        self.handle_clipboard(source)
+        if not source.hasImage():
+            super().insertFromMimeData(source)
+
+    def handle_clipboard(self, source):
+        """
+        Handle clipboard
+
+        :param source: source
+        """
+        if source.hasImage():
+            image = source.imageData()
+            if isinstance(image, QImage):
+                self.window.controller.attachment.from_clipboard_image(image)
+        elif source.hasUrls():
+            urls = source.urls()
+            for url in urls:
+                if url.isLocalFile():
+                    local_path = url.toLocalFile()
+                    self.window.controller.attachment.from_clipboard_url(local_path)
+        elif source.hasText():
+            text = source.text()
+            self.window.controller.attachment.from_clipboard_text(text)
 
     def contextMenuEvent(self, event):
         """
         Context menu event
 
-        :param event: Event
+        :param event: event
         """
         menu = self.createStandardContextMenu()
-        selected_text = self.textCursor().selectedText()
 
+        # paste attachment
+        if self.window.controller.attachment.clipboard_has_attachment():
+            action = QAction(QIcon(":/icons/paste.svg"), trans("action.use.attachment"), self)
+            action.triggered.connect(self.action_from_clipboard)
+            menu.addAction(action)
+
+        selected_text = self.textCursor().selectedText()
         if selected_text:
             # plain text
             plain_text = self.textCursor().selection().toPlainText()
 
             # audio read
             action = QAction(QIcon(":/icons/volume.svg"), trans('text.context_menu.audio.read'), self)
             action.triggered.connect(self.audio_read_selection)
             menu.addAction(action)
 
             # copy to
-            copy_to_menu = QMenu(trans('text.context_menu.copy_to'), self)
-
-            # input
-            action = QAction(QIcon(":/icons/input.svg"), trans('text.context_menu.copy_to.input'), self)
-            action.triggered.connect(
-                lambda: self.window.controller.chat.common.append_to_input(selected_text))
-            copy_to_menu.addAction(action)
-
-            # notepad
-            num_notepads = self.window.controller.notepad.get_num_notepads()
-            if num_notepads > 0:
-                for i in range(1, num_notepads + 1):
-                    name = self.window.controller.notepad.get_notepad_name(i)
-                    action = QAction(QIcon(":/icons/paste.svg"), name, self)
-                    action.triggered.connect(lambda checked=False, i=i:
-                                             self.window.controller.notepad.append_text(selected_text, i))
-                    copy_to_menu.addAction(action)
-
-            # calendar
-            action = QAction(QIcon(":/icons/schedule.svg"), trans('text.context_menu.copy_to.calendar'), self)
-            action.triggered.connect(
-                lambda: self.window.controller.calendar.note.append_text(selected_text))
-            copy_to_menu.addAction(action)
-
+            copy_to_menu = self.window.ui.context_menu.get_copy_to_menu(self, selected_text, excluded=["input"])
             menu.addMenu(copy_to_menu)
 
             # save as (selected)
-            action = QAction(QIcon(":/icons/save.svg"), trans('action.save_as'), self)
+            action = QAction(QIcon(":/icons/save.svg"), trans('action.save_selection_as'), self)
             action.triggered.connect(
                 lambda: self.window.controller.chat.common.save_text(plain_text))
             menu.addAction(action)
         else:
             # save as (all)
             action = QAction(QIcon(":/icons/save.svg"), trans('action.save_as'), self)
             action.triggered.connect(
                 lambda: self.window.controller.chat.common.save_text(self.toPlainText()))
             menu.addAction(action)
 
+        self.window.core.prompt.template.to_menu_options(menu, "input")
+
         menu.exec_(event.globalPos())
 
+    def action_from_clipboard(self):
+        """
+        Get from clipboard
+        """
+        clipboard = QApplication.clipboard()
+        source = clipboard.mimeData()
+        self.handle_clipboard(source)
+
     def audio_read_selection(self):
         """Read selected text (audio)"""
         self.window.controller.audio.read_text(self.textCursor().selectedText())
 
+    def keyPressEvent(self, event):
+        """
+        Key press event
+
+        :param event: key event
+        """
+        super(ChatInput, self).keyPressEvent(event)
+        if event.key() in (QtCore.Qt.Key_Return, QtCore.Qt.Key_Enter):
+            mode = self.window.core.config.get('send_mode')
+            if mode > 0:  # Enter or Shift + Enter
+                if mode == 2:  # Shift + Enter
+                    modifiers = QApplication.keyboardModifiers()
+                    if modifiers == QtCore.Qt.ShiftModifier or modifiers == QtCore.Qt.ControlModifier:
+                        self.window.controller.chat.input.send_input()
+                else:  # Enter
+                    modifiers = QApplication.keyboardModifiers()
+                    if modifiers != QtCore.Qt.ShiftModifier and modifiers != QtCore.Qt.ControlModifier:
+                        self.window.controller.chat.input.send_input()
+                self.setFocus()
+
+        # cancel edit
+        elif event.key() == Qt.Key_Escape and self.window.controller.ctx.extra.is_editing():
+            self.window.controller.ctx.extra.edit_cancel()
+
     def wheelEvent(self, event):
         """
         Wheel event: set font size
 
         :param event: Event
         """
         if event.modifiers() & Qt.ControlModifier:
             if event.angleDelta().y() > 0:
                 if self.value < self.max_font_size:
                     self.value += 1
             else:
                 if self.value > self.min_font_size:
                     self.value -= 1
 
-            self.window.core.config.data['font_size'] = self.value
+            self.window.core.config.data['font_size.input'] = self.value
             self.window.core.config.save()
-            option = self.window.controller.settings.editor.get_option('font_size')
-            option['value'] = self.value
-            self.window.controller.config.apply(
-                parent_id='config', 
-                key='font_size', 
-                option=option,
-            )
             self.window.controller.ui.update_font_size()
             event.accept()
         else:
-            super(ChatOutput, self).wheelEvent(event)
+            super(ChatInput, self).wheelEvent(event)
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/ui/widget/textarea/rename.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/widget/textarea/search_input.py`

 * *Files 20% similar despite different names*

```diff
@@ -2,42 +2,56 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.01.27 19:00:00                  #
+# Updated Date: 2024.04.12 10:00:00                  #
 # ================================================== #
 
-from PySide6 import QtCore
-from PySide6.QtWidgets import QLineEdit
+from PySide6.QtGui import QAction, QIcon
+from PySide6.QtWidgets import QLineEdit, QStyle
 
+from pygpt_net.utils import trans
+import pygpt_net.icons_rc
 
-class RenameInput(QLineEdit):
-    def __init__(self, window=None, id=None):
-        """
-        Rename dialog input
 
-        :param window: main window
-        :param id: info window id
+class CtxSearchInput(QLineEdit):
+    def __init__(self, window=None):
         """
-        super(RenameInput, self).__init__(window)
+        Search input
 
+        :param window: Window instance
+        """
+        super(CtxSearchInput, self).__init__(window)
         self.window = window
-        self.id = id
+        self.setPlaceholderText(trans('ctx.list.search.placeholder'))
+
+        self.clear_action = QAction(self)
+        self.clear_action.setIcon(QIcon(":/icons/close.svg"))
+        self.clear_action.triggered.connect(self.clear_search_string)
+        self.addAction(self.clear_action, QLineEdit.TrailingPosition)
+        self.clear_action.setVisible(False)
+
+        self.textChanged.connect(self.on_text_changed)
+
+    def clear_search_string(self):
+        """Clear input"""
+        self.clear()
+        self.window.controller.ctx.search_string_clear()
 
-    def keyPressEvent(self, event):
+    def on_text_changed(self, text):
         """
-        Key press event
+        On text changed
 
-        :param event: key event
+        :param text: text
         """
-        super(RenameInput, self).keyPressEvent(event)
+        self.window.controller.ctx.search_string_change(text)
+        self.clear_action.setVisible(bool(text))
+
+    def focusInEvent(self, event):
+        """Focus in event"""
+        super(CtxSearchInput, self).focusInEvent(event)
+        self.window.controller.ctx.search_focus_in()
+
 
-        # save on Enter
-        if event.key() == QtCore.Qt.Key_Return or event.key() == QtCore.Qt.Key_Enter:
-            self.window.controller.dialogs.confirm.accept_rename(
-                self.window.ui.dialog['rename'].id,
-                self.window.ui.dialog['rename'].current,
-                self.text(),
-            )
```

### Comparing `pygpt_net-2.1.9/src/pygpt_net/ui/widget/vision/camera.py` & `pygpt_net-2.2.0/src/pygpt_net/ui/widget/vision/camera.py`

 * *Files identical despite different names*

### Comparing `pygpt_net-2.1.9/src/pygpt_net/utils.py` & `pygpt_net-2.2.0/src/pygpt_net/utils.py`

 * *Files 27% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 # -*- coding: utf-8 -*-
 # ================================================== #
 # This file is a part of PYGPT package               #
 # Website: https://pygpt.net                         #
 # GitHub:  https://github.com/szczyglis-dev/py-gpt   #
 # MIT License                                        #
 # Created By  : Marcin Szczygliński                  #
-# Updated Date: 2024.01.22 09:00:00                  #
+# Updated Date: 2024.04.26 23:00:00                  #
 # ================================================== #
 
 import json
 import os
 import re
 from pygpt_net.core.locale import Locale
 
@@ -25,14 +25,23 @@
     :param key: translation key
     :param reload: force reload translations
     :param domain: translation domain
     :return: translated string
     """
     return trans(key, reload, domain)
 
+def trans_reload():
+    """
+    Reload translations
+    """
+    global locale
+    if locale is None:
+        locale = Locale()
+    locale.reload_config()
+
 
 def trans(key: str, reload: bool = False, domain: str = None) -> str:
     """
     Return translation
 
     :param key: translation key
     :param reload: force reload translations
@@ -79,14 +88,15 @@
     """
     return {
         'github': get_init_value("__github__"),
         'website': get_init_value("__website__"),
         'docs': get_init_value("__documentation__"),
         'pypi': get_init_value("__pypi__"),
         'snap': get_init_value("__snap__"),
+        'donate': get_init_value("__donate__"),
         'version': get_init_value("__version__"),
         'build': get_init_value("__build__"),
         'author': get_init_value("__author__"),
         'email': get_init_value("__email__")
     }
 
 
@@ -95,30 +105,104 @@
     Parse keyword arguments from list of items
 
     :param data: list of arguments items
     :return: dict of parsed keyword arguments
     """
     args = {}
     for item in data:
+        type = "str"
         key = item['name']
         value = item['value']
-        type = item['type']
+        if "type" in item:
+            type = item['type']
         if type == 'int':
-            args[key] = int(value)
+            try:
+                args[key] = int(value)
+            except Exception:
+                args[key] = 0
         elif type == 'float':
-            args[key] = float(value)
+            try:
+                args[key] = float(value)
+            except Exception:
+                args[key] = 0.0
         elif type == 'bool':
             if str(value).lower() == 'true':
                 args[key] = True
             elif str(value).lower() == 'false':
                 args[key] = False
             else:
-                args[key] = bool(int(value))
+                try:
+                    args[key] = bool(int(value))
+                except Exception:
+                    args[key] = False
         elif type == 'dict':
-            args[key] = json.loads(value)
+            try:
+                args[key] = json.loads(value)
+            except json.JSONDecodeError:
+                args[key] = {}
         elif type == 'list':
             args[key] = [x.strip() for x in value.split(',')]
         elif type == 'None':
             args[key] = None
         else:
             args[key] = str(value)
     return args
+
+
+def unpack_var(var: any, type: str) -> any:
+    """
+    Unpack variable from DB row
+
+    :param var: Variable
+    :param type: Variable type
+    """
+    if type == 'int':
+        try:
+            return int(var)
+        except Exception:
+            return 0
+    elif type == 'float':
+        try:
+            return float(var)
+        except Exception:
+            return 0.0
+    elif type == 'bool':
+        try:
+            return bool(var)
+        except Exception:
+            return False
+    return var
+
+def pack_arg(arg: any, type: str) -> any:
+    """
+    Pack argument to store in JSON
+
+    :param arg: Argument value
+    :param type: Argument type
+    """
+    if arg is None or arg == "":
+        return ""
+    if type == "list":
+        try:
+            return ",".join(arg)
+        except Exception:
+            return ""
+    elif type == "dict":
+        try:
+            return json.dumps(arg)
+        except Exception:
+            return ""
+    elif type == "bool":
+        try:
+            return str(arg)
+        except Exception:
+            return ""
+    return arg
+
+
+def get_image_extensions() -> list:
+    """
+    Return list of image extensions
+
+    :return: list of image extensions
+    """
+    return ['jpg', 'jpeg', 'png', 'gif', 'bmp', 'tiff', 'webp']
```

### Comparing `pygpt_net-2.1.9/PKG-INFO` & `pygpt_net-2.2.0/PKG-INFO`

 * *Files 5% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: pygpt-net
-Version: 2.1.9
+Version: 2.2.0
 Summary: Desktop AI Assistant powered by GPT-4, GPT-4V, GPT-3.5, DALL-E 3, Langchain LLMs, Llama-index, Whisper with chatbot, assistant, text completion, vision and image generation, internet access, chat with files, commands and code execution, file upload and download and more
 Home-page: https://github.com/szczyglis-dev/py-gpt
 License: MIT
 Keywords: py_gpt,py-gpt,pygpt,desktop,app,gpt,gpt4,gpt4-v,gpt3.5,gpt-4,gpt-4V,gpt-3.5,tts,whisper,vision,chatgpt,dall-e,chat,chatbot,assistant,text completion,image generation,ai,api,openai,api key,langchain,llama-index,presets,ui,qt,pyside
 Author: Marcin Szczyglinski
 Author-email: info@pygpt.net
 Requires-Python: >=3.10,<3.12
@@ -16,40 +16,45 @@
 Classifier: Topic :: Utilities
 Requires-Dist: EbookLib (>=0.18,<0.19)
 Requires-Dist: Markdown (>=3.5.1,<4.0.0)
 Requires-Dist: PyAudio (>=0.2.14,<0.3.0)
 Requires-Dist: PySide6 (==6.4.2)
 Requires-Dist: PySide6-Addons (==6.4.2)
 Requires-Dist: PySide6-Essentials (==6.4.2)
+Requires-Dist: Pygments (>=2.15.0,<3.0.0)
 Requires-Dist: SQLAlchemy (>=2.0.23,<3.0.0)
 Requires-Dist: SpeechRecognition (>=3.10.0,<4.0.0)
 Requires-Dist: beautifulsoup4 (>=4.12.2,<5.0.0)
 Requires-Dist: chromadb (>=0.4.23,<0.5.0)
 Requires-Dist: croniter (>=2.0.1,<3.0.0)
 Requires-Dist: docker (>=7.0.0,<8.0.0)
 Requires-Dist: docx2txt (>=0.8,<0.9)
 Requires-Dist: langchain (>=0.1.9,<0.2.0)
 Requires-Dist: langchain-community (>=0.0.24,<0.0.25)
-Requires-Dist: langchain-experimental (>=0.0.49,<0.0.50)
+Requires-Dist: langchain-experimental (>=0.0.52,<0.0.53)
 Requires-Dist: langchain-openai (>=0.0.2.post1,<0.0.3)
 Requires-Dist: llama-index (>=0.10.13.post1,<0.11.0)
+Requires-Dist: llama-index-core (==0.10.13)
+Requires-Dist: llama-index-embeddings-azure-openai (>=0.1.6,<0.2.0)
+Requires-Dist: llama-index-llms-azure-openai (>=0.1.5,<0.2.0)
+Requires-Dist: llama-index-llms-openai (==0.1.6)
 Requires-Dist: llama-index-readers-chatgpt-plugin (>=0.1.3,<0.2.0)
 Requires-Dist: llama-index-readers-database (>=0.1.3,<0.2.0)
 Requires-Dist: llama-index-readers-file (>=0.1.6,<0.2.0)
 Requires-Dist: llama-index-readers-github (>=0.1.7,<0.2.0)
 Requires-Dist: llama-index-readers-google (>=0.1.4,<0.2.0)
 Requires-Dist: llama-index-readers-microsoft-onedrive (>=0.1.3,<0.2.0)
 Requires-Dist: llama-index-readers-twitter (>=0.1.3,<0.2.0)
 Requires-Dist: llama-index-readers-web (>=0.1.6,<0.2.0)
 Requires-Dist: llama-index-vector-stores-chroma (>=0.1.4,<0.2.0)
 Requires-Dist: llama-index-vector-stores-elasticsearch (>=0.1.4,<0.2.0)
 Requires-Dist: llama-index-vector-stores-pinecone (>=0.1.3,<0.2.0)
 Requires-Dist: llama-index-vector-stores-redis (>=0.1.2,<0.2.0)
 Requires-Dist: nbconvert (>=7.16.1,<8.0.0)
-Requires-Dist: openai (>=1.12.0,<2.0.0)
+Requires-Dist: openai (>=1.23.6,<1.24.0)
 Requires-Dist: opencv-python (>=4.8.1.78,<5.0.0.0)
 Requires-Dist: packaging (>=23.2,<24.0)
 Requires-Dist: pandas (>=2.1.4,<3.0.0)
 Requires-Dist: pillow (>=10.2.0,<11.0.0)
 Requires-Dist: pinecone-client (>=3.1.0,<4.0.0)
 Requires-Dist: pydub (>=0.25.1,<0.26.0)
 Requires-Dist: pygame (>=2.5.2,<3.0.0)
@@ -65,15 +70,15 @@
 Project-URL: Repository, https://github.com/szczyglis-dev/py-gpt
 Description-Content-Type: text/markdown
 
 # PyGPT - Desktop AI Assistant
 
 [![pygpt](https://snapcraft.io/pygpt/badge.svg)](https://snapcraft.io/pygpt)
 
-Release: **2.1.9** | build: **2024.03.04** | Python: **>=3.10, <3.12**
+Release: **2.2.0** | build: **2024.04.28** | Python: **>=3.10, <3.12**
 
 Official website: https://pygpt.net | Documentation: https://pygpt.readthedocs.io
 
 Snap Store: https://snapcraft.io/pygpt | PyPi: https://pypi.org/project/pygpt-net
 
 Compiled version for Linux (`tar.gz`) and Windows 10/11 (`msi`) 64-bit: https://pygpt.net/#download
 
@@ -85,21 +90,21 @@
 
 For audio interactions, **PyGPT** includes speech synthesis using the `Microsoft Azure`, `Google`, `Eleven Labs` and `OpenAI` Text-To-Speech services. Additionally, it features speech recognition capabilities provided by `OpenAI Whisper`, `Google` and `Bing` enabling the application to understand spoken commands and transcribe audio inputs into text. It features context memory with save and load functionality, enabling users to resume interactions from predefined points in the conversation. Prompt creation and management are streamlined through an intuitive preset system.
 
 **PyGPT**'s functionality extends through plugin support, allowing for custom enhancements. Its multi-modal capabilities make it an adaptable tool for a range of AI-assisted operations, such as text-based interactions, system automation, daily assisting, vision applications, natural language processing, code generation and image creation.
 
 Multiple operation modes are included, such as chat, text completion, assistant, vision, Langchain, Chat with files (via `Llama-index`), commands execution, external API calls and image generation, making **PyGPT** a multi-tool for many AI-driven tasks.
 
-**Video** (mp4, version `2.0.153`, build `2024-02-18`):
+**Video** (mp4, version `2.2.0`, build `2024-04-28`):
 
-https://github.com/szczyglis-dev/py-gpt/assets/61396542/996db435-fea3-4836-85b5-4f93505df6c4
+https://github.com/szczyglis-dev/py-gpt/assets/61396542/7140ded4-1639-4c12-ac33-201b68b99a16
 
-**Screenshot** (version `2.0.153` build `2024-02-18`):
+**Screenshot** (version `2.2.0`, build `2024-04-28`):
 
-![v2_main](https://github.com/szczyglis-dev/py-gpt/assets/61396542/3a7fe49f-b6c4-4daa-b3ba-521affd5af28)
+![v2_main](https://github.com/szczyglis-dev/py-gpt/assets/61396542/d9f2e67f-919c-4faa-b059-6e2f5efd23e6)
 
 You can download compiled 64-bit versions for Windows and Linux here: https://pygpt.net/#download
 
 ## Features
 
 - Desktop AI Assistant for `Linux`, `Windows` and `Mac`, written in Python.
 - Works similarly to `ChatGPT`, but locally (on a desktop computer).
@@ -127,14 +132,15 @@
 - Supports multiple languages.
 - Enables the use of all the powerful features of `GPT-4`, `GPT-4V`, and `GPT-3.5`.
 - Requires no previous knowledge of using AI models.
 - Simplifies image generation using `DALL-E 3` and `DALL-E 2`.
 - Possesses the potential to support future OpenAI models.
 - Fully configurable.
 - Themes support.
+- Real-time code syntax highlighting.
 - Plugins support.
 - Built-in token usage calculation.
 - It's open source; source code is available on `GitHub`.
 - Utilizes the user's own API key.
 
 The application is free, open-source, and runs on PCs with `Linux`, `Windows 10`, `Windows 11` and `Mac`. 
 Full Python source code is available on `GitHub`.
@@ -324,14 +330,35 @@
 https://learn.microsoft.com/en-us/cpp/windows/latest-supported-vc-redist
 
 The libraries from this environment are used by `PySide6` - one of the base packages used by PyGPT. 
 The absence of the installed libraries may cause display errors or completely prevent the application from running.
 
 It may also be necessary to add the path `C:\path\to\venv\Lib\python3.x\site-packages\PySide6` to the `PATH` variable.
 
+**WebEngine/Chromium renderer and OpenGL problems**
+
+If you have a problems with `WebEngine / Chromium` renderer you can force the legacy mode by launching the app with command line arguments:
+
+``` ini
+python3 run.py --legacy=1
+```
+
+and to force disable OpenGL hardware acceleration:
+
+``` ini
+python3 run.py --disable-gpu=1
+```
+
+You can also manualy enable legacy mode by editing config file - open the `%WORKDIR%/config.json` config file in editor and set the following options:
+
+``` json
+"render.engine": "legacy",
+"render.open_gl": false,
+```
+
 ## Other requirements
 
 For operation, an internet connection is needed (for API connectivity), a registered OpenAI account, 
 and an active API key that must be input into the program.
 
 ## Debugging and logging
 
@@ -348,111 +375,125 @@
 
 ``` ini
 Config -> Settings...
 ```
 
 and then paste the API key into the `OpenAI API KEY` field.
 
-## Overview
-
-![v2_settings](https://github.com/szczyglis-dev/py-gpt/assets/61396542/21d7e43d-858f-4bc7-a06f-ec848338e7a9)
+![v2_settings](https://github.com/szczyglis-dev/py-gpt/assets/61396542/43622c58-6cdb-4ed8-b47d-47729763db04)
 
 The API key can be obtained by registering on the OpenAI website:
 
 <https://platform.openai.com>
 
 Your API keys will be available here:
 
 <https://platform.openai.com/account/api-keys>
 
 **Note:** The ability to use models within the application depends on the API user's access to a given model!
 
-# Chat, completion, assistants and vision (GPT-4, GPT-3.5, Langchain)
+# Working modes
 
 ## Chat
 
 **+ inline Vision and Image generation**
 
 This mode in **PyGPT** mirrors `ChatGPT`, allowing you to chat with models such as `GPT-4`, `GPT-4 Turbo` and `GPT-3.5`. It's easy to switch models whenever you want. It works by using the `ChatCompletion API`.
 
 The main part of the interface is a chat window where conversations appear. Right below that is where you type your messages. On the right side of the screen, there's a section to set up or change your system prompts. You can also save these setups as presets to quickly switch between different models or tasks.
 
 Above where you type your messages, the interface shows you the number of tokens your message will use up as you type it – this helps to keep track of usage. There's also a feature to upload files in this area. Go to the `Files` tab to manage your uploads or add attachments to send to the OpenAI API (but this makes effect only in `Assisant` and `Vision` modes).
 
-![v2_mode_chat](https://github.com/szczyglis-dev/py-gpt/assets/61396542/931a07f3-9fd5-40b3-a446-1540d2587899)
+![v2_mode_chat](https://github.com/szczyglis-dev/py-gpt/assets/61396542/f573ee22-8539-4259-b180-f97e54bc0d94)
 
 **Vision:** If you want to send photos or image from camera to analysis you must enable plugin **GPT-4 Vision Inline** in the Plugins menu.
 Plugin allows you to send photos or image from camera to analysis in any Chat mode:
 
 ![v3_vision_plugins](https://github.com/szczyglis-dev/py-gpt/assets/61396542/104b0a80-7cf8-4a02-aa74-27e89ad2e409)
 
 With this plugin, you can capture an image with your camera or attach an image and send it for analysis to discuss the photograph:
 
-![v3_vision_chat](https://github.com/szczyglis-dev/py-gpt/assets/61396542/93d3928c-f86a-4313-b645-6277c26a39b9)
+![v3_vision_chat](https://github.com/szczyglis-dev/py-gpt/assets/61396542/3fbd99e2-5bbf-4bd4-81d8-fd4d7db9d8eb)
 
 **Image generation:** If you want to generate images (using DALL-E) directly in chat you must enable plugin **DALL-E 3 Inline** in the Plugins menu.
 Plugin allows you to generate images in Chat mode:
 
-![v3_img_chat](https://github.com/szczyglis-dev/py-gpt/assets/61396542/52715d3e-725b-4e8c-b62d-669bd5da595d)
+![v3_img_chat](https://github.com/szczyglis-dev/py-gpt/assets/61396542/c288a4b3-c932-4201-b5a3-8452aea49817)
 
 ## Completion
 
 This mode provides in-depth access to a broader range of capabilities offered by Large Language Models (LLMs). While it maintains a chat-like interface for user interaction, it introduces additional settings and functional richness beyond typical chat exchanges. Users can leverage this mode to prompt models for complex text completions, role-play dialogues between different characters, perform text analysis, and execute a variety of other sophisticated tasks. It supports any model provided by the OpenAI API as well as other models through `Langchain`.
 
 Similar to chat mode, on the right-hand side of the interface, there are convenient presets. These allow you to fine-tune instructions and swiftly transition between varied configurations and pre-made prompt templates.
 
 Additionally, this mode offers options for labeling the AI and the user, making it possible to simulate dialogues between specific characters - for example, you could create a conversation between Batman and the Joker, as predefined in the prompt. This feature presents a range of creative possibilities for setting up different conversational scenarios in an engaging and exploratory manner.
 
-![v2_mode_completion](https://github.com/szczyglis-dev/py-gpt/assets/61396542/56e45c45-067c-4d63-9f41-f26dbbf08660)
+![v2_mode_completion](https://github.com/szczyglis-dev/py-gpt/assets/61396542/045ecb99-edcb-4eb1-9ff0-0b493dee0e27)
 
 From version `2.0.107` the `davinci` models are deprecated and has been replaced with `gpt-3.5-turbo-instruct` model in Completion mode.
 
 ## Assistants
 
 This mode uses the new OpenAI's **Assistants API**.
 
 This mode expands on the basic chat functionality by including additional external tools like a `Code Interpreter` for executing code, `Retrieval Files` for accessing files, and custom `Functions` for enhanced interaction and integration with other APIs or services. In this mode, you can easily upload and download files. **PyGPT** streamlines file management, enabling you to quickly upload documents and manage files created by the model.
 
 Setting up new assistants is simple - a single click is all it takes, and they instantly sync with the `OpenAI API`. Importing assistants you've previously created with OpenAI into **PyGPT** is also a seamless process.
 
-![v2_mode_assistant](https://github.com/szczyglis-dev/py-gpt/assets/61396542/e0c2c248-82c4-41d2-a0f5-5fa595911745)
+![v2_mode_assistant](https://github.com/szczyglis-dev/py-gpt/assets/61396542/5c3b5604-928d-4f29-940a-21cc83c8dc34)
 
 In Assistant mode you are allowed to storage your files (per Assistant) and manage them easily from app:
 
-![v2_mode_assistant_upload](https://github.com/szczyglis-dev/py-gpt/assets/61396542/0a25c34d-e989-4d00-b049-6acf8c271606)
+![v2_mode_assistant_upload](https://github.com/szczyglis-dev/py-gpt/assets/61396542/b2c835ea-2816-4b85-bb6f-e08874e758f7)
 
 Please note that token usage calculation is unavailable in this mode. Nonetheless, file (attachment) 
 uploads are supported. Simply navigate to the `Files` tab to effortlessly manage files and attachments which 
 can be sent to the OpenAI API.
 
+### Vector stores (via Assistants API)
+
+Assistant mode supports the use of external vector databases offered by the OpenAI API. This feature allows you to store your files in a database and then search them using the Assistant's API. Each assistant can be linked to one vector database—if a database is linked, all files uploaded in this mode will be stored in the linked vector database. If an assistant does not have a linked vector database, a temporary database is automatically created during the file upload, which is accessible only in the current thread. Files from temporary databases are automatically deleted after 7 days.
+
+To enable the use of vector stores, enable the `Chat with files` checkbox in the Assistant settings. This enables the `File search` tool in Assistants API.
+
+To manage external vector databases, click the DB icon next to the vector database selection list in the Assistant creation and editing window. In this management window, you can create a new database, edit an existing one, or import a list of all existing databases from the OpenAI server:
+
+![v2_assistant_stores](https://github.com/szczyglis-dev/py-gpt/assets/61396542/2f605326-5bf5-4c82-8dfd-cb1c0edf6724)
+
+You can define, using `Expire days`, how long files should be automatically kept in the database before deletion (as storing files on OpenAI incurs costs). If the value is set to 0, files will not be automatically deleted.
+
+The vector database in use will be displayed in the list of uploaded files, on the field to the right—if a file is stored in a database, the name of the database will be displayed there; if not, information will be shown indicating that the file is only accessible within the thread:
+
+![v2_assistant_stores_upload](https://github.com/szczyglis-dev/py-gpt/assets/61396542/8f13c2eb-f961-4eae-b08b-0b4937f06ca9)
+
 ## Vision (GPT-4 Vision)
 
 This mode enables image analysis using the `GPT-4 Vision` model. Functioning much like the chat mode, 
 it also allows you to upload images or provide URLs to images. The vision feature can analyze both local 
 images and those found online. 
 
-**From version 2.0.68** - Vision is integrated into any chat mode via plugin `GPT-4 Vision (inline)`. Just enable the plugin and use Vision in standard modes.
+Vision is integrated into any chat mode via plugin `GPT-4 Vision (inline)`. Just enable the plugin and use Vision in standard modes.
 
-**From version 2.0.14** - Vision mode also includes real-time video capture from camera. To enable capture check the option `Camera` on the right-bottom corner. It will enable real-time capturing from your camera. To capture image from camera and append it to chat just click on video at left side. You can also enable `Auto capture` - image will be captured and appended to chat message every time you send message.
+Vision mode also includes real-time video capture from camera. To enable capture check the option `Camera` on the right-bottom corner. It will enable real-time capturing from your camera. To capture image from camera and append it to chat just click on video at left side. You can also enable `Auto capture` - image will be captured and appended to chat message every time you send message.
 
 ![v2_capture_enable](https://github.com/szczyglis-dev/py-gpt/assets/61396542/c40ce0b4-57c8-4643-9982-25d15e68377e)
 
 **1) Video camera real-time image capture**
 
-![v2_capture1](https://github.com/szczyglis-dev/py-gpt/assets/61396542/d6d26a81-c559-470f-ba28-8d2d836dc138)
+![v2_capture1](https://github.com/szczyglis-dev/py-gpt/assets/61396542/477bb7fa-4639-42bb-8466-937e88e4a835)
 
-![v3_vision_chat](https://github.com/szczyglis-dev/py-gpt/assets/61396542/93d3928c-f86a-4313-b645-6277c26a39b9)
+![v3_vision_chat](https://github.com/szczyglis-dev/py-gpt/assets/61396542/3fbd99e2-5bbf-4bd4-81d8-fd4d7db9d8eb)
 
 **2) you can also provide an image URL**
 
-![v2_mode_vision](https://github.com/szczyglis-dev/py-gpt/assets/61396542/6c8bbec7-6f67-46d9-bb5f-e833c015b39c)
+![v2_mode_vision](https://github.com/szczyglis-dev/py-gpt/assets/61396542/d1b68225-bf7f-4aa5-9562-b973211b57d7)
 
 **3) or you can just upload your local images or use the inline Vision in the standard chat mode:**
 
-![v2_mode_vision_upload](https://github.com/szczyglis-dev/py-gpt/assets/61396542/68d26c32-9c7e-4068-b7d2-6c00e27a1d80)
+![v2_mode_vision_upload](https://github.com/szczyglis-dev/py-gpt/assets/61396542/7885d7d0-072e-4053-a81b-6374711fd348)
 
 **Tip:** When using `Vision (inline)` by utilizing a plugin in standard mode, such as `Chat` (not `Vision` mode), the `+ Vision` special checkbox will appear at the bottom of the Chat window. It will be automatically enabled any time you provide content for analysis (like an uploaded photo). When the checkbox is enabled, the vision model is used. If you wish to exit the vision model after image analysis, simply uncheck the checkbox. It will activate again automatically when the next image content for analysis is provided.
 
 ## Langchain
 
 This mode enables you to work with models that are supported by `Langchain`. The Langchain support is integrated 
 into the application, allowing you to interact with any LLM by simply supplying a configuration 
@@ -466,28 +507,28 @@
 - Azure OpenAI
 - HuggingFace
 - Anthropic
 - Llama 2
 - Ollama
 ```
 
-![v2_mode_langchain](https://github.com/szczyglis-dev/py-gpt/assets/61396542/85e95c38-86db-4c75-b994-ba42521c278b)
+![v2_mode_langchain](https://github.com/szczyglis-dev/py-gpt/assets/61396542/0471b6f9-7953-42cc-92bd-007f2c2e59d0)
 
 You have the ability to add custom model wrappers for models that are not available by default in **PyGPT**. 
 To integrate a new model, you can create your own wrapper and register it with the application. 
 Detailed instructions for this process are provided in the section titled `Managing models / Adding models via Langchain`.
 
 ##  Chat with files (Llama-index)
 
 This mode enables chat interaction with your documents and entire context history through conversation. 
 It seamlessly incorporates `Llama-index` into the chat interface, allowing for immediate querying of your indexed documents.
 
 **Querying single files**
 
-From version `2.1.8`, you can also query individual files "on the fly" using the `query_file` command from the `Files I/O` plugin. This allows you to query any file by simply asking a question about that file. A temporary index will be created in memory for the file being queried, and an answer will be returned from it. From version `2.1.9` similar command is available for querying web and external content: `Directly query web content with Llama-index`.
+You can also query individual files "on the fly" using the `query_file` command from the `Files I/O` plugin. This allows you to query any file by simply asking a question about that file. A temporary index will be created in memory for the file being queried, and an answer will be returned from it. From version `2.1.9` similar command is available for querying web and external content: `Directly query web content with Llama-index`.
 
 For example:
 
 If you have a file: `data/my_cars.txt` with content `My car is red.`
 
 You can ask for: `Query the file my_cars.txt about what color my car is.`
 
@@ -511,15 +552,15 @@
 
 To index your files, simply copy or upload them  into the `data` directory and initiate indexing (embedding) by clicking the `Index all` button, or right-click on a file and select `Index...`. Additionally, you have the option to utilize data from indexed files in any Chat mode by activating the `Chat with files (Llama-index, inline)` plugin.
 
 ![v2_idx1](https://github.com/szczyglis-dev/py-gpt/assets/61396542/c3dfbc89-cbfe-4ae3-b7e7-821401d755cd)
 
 After the file(s) are indexed (embedded in vector store), you can use context from them in chat mode:
 
-![v2_idx2](https://github.com/szczyglis-dev/py-gpt/assets/61396542/29c89de9-ba3c-49ca-97b3-e6397fd648ad)
+![v2_idx2](https://github.com/szczyglis-dev/py-gpt/assets/61396542/70c9ab66-82d9-4f61-81ed-268743bfa6b4)
 
 Built-in file loaders: 
 
 **Files:**
 
 - CSV files (csv)
 - Epub files (epub)
@@ -554,18 +595,18 @@
 - Twitter/X posts
 - Webpages (crawling any webpage content)
 - YouTube (transcriptions)
 
 You can configure data loaders in `Settings / Llama-index / Data Loaders` by providing list of keyword arguments for specified loaders.
 You can also develop and provide your own custom loader and register it within the application.
 
-**From version `2.0.100` Llama-index is also integrated with context database - you can use data from database (your context history) as additional context in discussion. 
-Options for indexing existing context history or enabling real-time indexing new ones (from database) are available in `Settings / Llama-index` section.**
+Llama-index is also integrated with context database - you can use data from database (your context history) as additional context in discussion. 
+Options for indexing existing context history or enabling real-time indexing new ones (from database) are available in `Settings / Llama-index` section.
 
-**WARNING:** remember that when indexing content, API calls to the embedding model (`text-embedding-ada-002`) are used. Each indexing consumes additional tokens. Always control the number of tokens used on the OpenAI page.
+**WARNING:** remember that when indexing content, API calls to the embedding model are used. Each indexing consumes additional tokens. Always control the number of tokens used on the OpenAI page.
 
 **Tip:** when using `Chat with files` you are using additional context from db data and files indexed from `data` directory, not the files sending via `Attachments` tab. 
 Attachments tab in `Chat with files` mode can be used to provide images to `Vision (inline)` plugin only.
 
 **Token limit:** When you use `Chat with files` in non-query mode, Llama-index adds extra context to the system prompt. If you use a plugins (which also adds more instructions to system prompt), you might go over the maximum number of tokens allowed. If you get a warning that says you've used too many tokens, turn off plugins you're not using or turn off the "Execute commands" option to reduce the number of tokens used by the system prompt.
 
 **Available vector stores** (provided by `Llama-index`):
@@ -861,15 +902,15 @@
 
 # Files and attachments
 
 ## Input attachments (upload)
 
 **PyGPT** makes it simple for users to upload files to the server and send them to the model for tasks like analysis, similar to attaching files in `ChatGPT`. There's a separate `Files` tab next to the text input area specifically for managing file uploads. Users can opt to have files automatically deleted after each upload or keep them on the list for repeated use.
 
-![v2_file_input](https://github.com/szczyglis-dev/py-gpt/assets/61396542/00263f3d-ec62-4daa-85b3-5a5ce178dce0)
+![v2_file_input](https://github.com/szczyglis-dev/py-gpt/assets/61396542/bd3d9840-2bc4-4ba8-a603-69724f9eb620)
 
 The attachment feature is available in both the `Assistant` and `Vision` modes at default.
 In `Assistant` mode, you can send documents and files to analyze, while in `Vision` mode, you can send images.
 In other modes, you can enable attachments by activating the `Vision (inline)` plugin (for providing images only).
 
 ## Files (download, code generation)
 
@@ -953,20 +994,20 @@
 
 ## DALL-E 3
 
 **PyGPT** enables quick and easy image creation with `DALL-E 3`. 
 The older model version, `DALL-E 2`, is also accessible. Generating images is akin to a chat conversation  -  a user's prompt triggers the generation, followed by downloading, saving to the computer, 
 and displaying the image onscreen. You can send raw prompt to `DALL-E` in `Image generation` mode or ask the model for the best prompt.
 
-**From version 2.0.68 (released 2023-12-31) image generation using DALL-E is available in every mode via plugin `DALL-E 3 Image Generation (inline)`. Just ask any model, in any mode, like e.g. GPT-4 to generate an image and it will do it inline, without need to mode change.**
+Image generation using DALL-E is available in every mode via plugin `DALL-E 3 Image Generation (inline)`. Just ask any model, in any mode, like e.g. GPT-4 to generate an image and it will do it inline, without need to mode change.
 
 If you want to generate images (using DALL-E) directly in chat you must enable plugin **DALL-E 3 Inline** in the Plugins menu.
 Plugin allows you to generate images in Chat mode:
 
-![v3_img_chat](https://github.com/szczyglis-dev/py-gpt/assets/61396542/52715d3e-725b-4e8c-b62d-669bd5da595d)
+![v3_img_chat](https://github.com/szczyglis-dev/py-gpt/assets/61396542/c288a4b3-c932-4201-b5a3-8452aea49817)
 
 ## Multiple variants
 
 You can generate up to **4 different variants** (DALL-E 2) for a given prompt in one session. DALL-E 3 allows one image.
 To select the desired number of variants to create, use the slider located in the right-hand corner at 
 the bottom of the screen. This replaces the conversation temperature slider when you switch to image generation mode.
 
@@ -1541,15 +1582,15 @@
 *Default:* `3`
 
 **WARNING**: Setting this option to `0` activates an **infinity loop** which can generate a large number of requests and cause very high token consumption, so use this option with caution!
 
 - `Prompts` *prompts*
 
 Editable list of prompts used to instruct how to handle autonomous mode, you can create as many prompts as you want. 
-First active prompt on list will be used to handle autonomous mode.
+First active prompt on list will be used to handle autonomous mode. **INFO:** At least one active prompt is required!
 
 - `Auto-stop after goal is reached` *auto_stop*
 
 If enabled, plugin will stop after goal is reached." *Default:* `True`
 
 - `Reverse roles between iterations` *reverse_roles*
 
@@ -1560,43 +1601,47 @@
 
 ## Chat with files (Llama-index, inline)
 
 Plugin integrates `Llama-index` storage in any chat and provides additional knowledge into context.
 
 - `Ask Llama-index first` *ask_llama_first*
 
-When enabled, then `Llama-index` will be asked first, and response will be used as additional knowledge in prompt. When disabled, then `Llama-index` will be asked only when needed.
+When enabled, then `Llama-index` will be asked first, and response will be used as additional knowledge in prompt. When disabled, then `Llama-index` will be asked only when needed. **INFO: Disabled in autonomous mode (via plugin)!** *Default:* `False`
 
 - `Auto-prepare question before asking Llama-index first` *prepare_question*
 
-When enabled, then question will be prepared before asking Llama-index first to create best query.
+When enabled, then question will be prepared before asking Llama-index first to create best query. *Default:* `False`
 
 - `Model for question preparation` *model_prepare_question*
 
-Model used to prepare question before asking Llama-index, default: gpt-3.5-turbo
+Model used to prepare question before asking Llama-index. *Default:* `gpt-3.5-turbo`
 
 - `Max output tokens for question preparation` *prepare_question_max_tokens*
 
-Max tokens in output when preparing question before asking Llama-index
+Max tokens in output when preparing question before asking Llama-index. *Default:* `500`
 
 - `Prompt for question preparation` *syntax_prepare_question*
 
-System prompt for question preparation
+System prompt for question preparation.
 
 - `Max characters in question` *max_question_chars*
 
-Max characters in question when querying Llama-index, 0 = no limit, default: 1000
+Max characters in question when querying Llama-index, 0 = no limit. *Default:* `1000`
+
+- `Append metadata to context` *append_meta*
+
+If enabled, then metadata from Llama-index will be appended to additional context. *Default:* `False`
 
 - `Model` *model_query*
 
-Model used for querying `Llama-index`, default: `gpt-3.5-turbo`
+Model used for querying `Llama-index`. *Default:* `gpt-3.5-turbo`
 
 - `Indexes IDs` *idx*
 
-Indexes to use, default: base, if you want to use multiple indexes at once then separate them by comma.
+Indexes to use. If you want to use multiple indexes at once then separate them by comma. *Default:* `base`
 
 
 ## Command: API calls
 
 **PyGPT** lets you connect the model to the external services using custom defined API calls.
 
 To activate this feature, turn on the `Command: API calls` plugin found in the `Plugins` menu.
@@ -1637,67 +1682,93 @@
 
 In the `POST JSON` request you must provide JSON object template to be send, using `%param%` placeholders in the JSON object to be replaced with the model.
 
 You can also provide any required credentials, like Authorization headers, API keys, tokens, etc. using the `headers` field - you can provide a JSON object here with a dictionary `key => value` - provided JSON object will be converted to headers dictonary and send with the request.
 
 - `Disable SSL verify` *disable_ssl*
 
-Disables SSL verification when making requests
+Disables SSL verification when making requests. *Default:* `False`
 
 - `Timeout` *timeout*
 
-Connection timeout (seconds)
+Connection timeout (seconds). *Default:* `5`
 
 - `User agent` *user_agent*
 
-User agent to use when making requests, default: `Mozilla/5.0`
+User agent to use when making requests. *Default:* `Mozilla/5.0`
 
 
 ## Command: Code Interpreter
 
 ### Executing Code
 
 The plugin operates similarly to the `Code Interpreter` in `ChatGPT`, with the key difference that it works locally on the user's system. It allows for the execution of any Python code on the computer that the model may generate. When combined with the `Command: Files I/O` plugin, it facilitates running code from files saved in the `data` directory. You can also prepare your own code files and enable the model to use them or add your own plugin for this purpose. You can execute commands and code on the host machine or in Docker container.
 
+**Code interpreter:** a real-time Python code interpreter is built-in. Click the `<>` icon to open the interpreter window. Both the input and output of the interpreter are connected to the plugin. Any output generated by the executed code will be displayed in the interpreter. Additionally, you can request the model to retrieve contents from the interpreter window output.
+
+![v2_python](https://github.com/szczyglis-dev/py-gpt/assets/61396542/793e554c-7619-402a-8370-ab89c7464fec)
+
 ### Executing system commands
 
 Another feature is the ability to execute system commands and return their results. With this functionality, the plugin can run any system command, retrieve the output, and then feed the result back to the model. When used with other features, this provides extensive integration capabilities with the system.
 
+
+
 **Tip:** always remember to enable the `Execute commands` option to allow execute commands from the plugins.
 
 
 **Options:**
 
 - `Python command template` *python_cmd_tpl*
 
 Python command template (use {filename} as path to file placeholder). *Default:* `python3 {filename}`
 
-- `Enable: Python Code Generate and Execute` *cmd_code_execute*
+- `Enable: code_execute` *cmd.code_execute*
+
+Allows `code_execute` command execution. If enabled, provides Python code execution (generate and execute from file). *Default:* `True`
+
+- `Enable: code_execute_all` *cmd.code_execute_all*
 
-Allows Python code execution (generate and execute from file). *Default:* `True`
+Allows `code_execute_all` command execution. If enabled, provides execution of all the Python code in interpreter window. *Default:* `True`
 
-- `Enable: Python Code Execute (File)` *cmd_code_execute_file*
+- `Enable: code_execute_file` *cmd.code_execute_file*
 
-Allows Python code execution from existing file. *Default:* `True`
+Allows `code_execute_file` command execution. If enabled, provides Python code execution from existing .py file. *Default:* `True`
  
-- `Enable: System Command Execute` *cmd_sys_exec*
+- `Enable: sys_exec` *cmd.sys_exec*
+
+Allows `sys_exec` command execution. If enabled, provides system commands execution. *Default:* `True`
+
+- `Enable: get_python_output` *cmd.get_python_output*
+
+Allows `get_python_output` command execution. If enabled, it allows retrieval of the output from the Python code interpreter window. *Default:* `True`
+
+- `Enable: get_python_input` *cmd.get_python_input*
+
+Allows `get_python_input` command execution. If enabled, it allows retrieval all input code (from edit section) from the Python code interpreter window. *Default:* `True`
+
+- `Enable: clear_python_output` *cmd.clear_python_output*
 
-Allows system commands execution. *Default:* `True`
+Allows `clear_python_output` command execution. If enabled, it allows clear the output of the Python code interpreter window. *Default:* `True`
 
 - `Sandbox (docker container)` *sandbox_docker*
 
 Execute commands in sandbox (docker container). Docker must be installed and running. *Default:* `False`
 
 - `Docker image` *sandbox_docker_image*
 
 Docker image to use for sandbox *Default:* `python:3.8-alpine`
 
 - `Auto-append CWD to sys_exec` *auto_cwd*
 
-Automatically append current working directory to sys_exec command. *Default:* `True`
+Automatically append current working directory to `sys_exec` command. *Default:* `True`
+
+- `Connect to the Python code interpreter window` *attach_output*
+
+Automatically attach code input/output to the Python code interpreter window. *Default:* `True`
 
 
 ## Command: Custom Commands
 
 With the `Custom Commands` plugin, you can integrate **PyGPT** with your operating system and scripts or applications. You can define an unlimited number of custom commands and instruct GPT on when and how to execute them. Configuration is straightforward, and **PyGPT** includes a simple tutorial command for testing and learning how it works:
 
 ![v2_custom_cmd](https://github.com/szczyglis-dev/py-gpt/assets/61396542/b30b8724-9ca1-44b1-abc7-78241588e1f6)
@@ -1752,15 +1823,15 @@
 
 **Example tutorial command**
 
 **PyGPT** provides simple tutorial command to show how it works, to run it just ask GPT for execute `tutorial test command` and it will show you how it works:
 
 ```> please execute tutorial test command```
 
-![v2_custom_cmd_example](https://github.com/szczyglis-dev/py-gpt/assets/61396542/64a95a9c-634c-4d71-ad7d-4eabe8b2509b)
+![v2_custom_cmd_example](https://github.com/szczyglis-dev/py-gpt/assets/61396542/97cbc5b9-0dd9-487e-9182-d9873dea42ab)
 
 ## Command: Files I/O
 
 The plugin allows for file management within the local filesystem. It enables the model to create, read, write and query files located in the `data` directory, which can be found in the user's work directory. With this plugin, the AI can also generate Python code files and thereafter execute that code within the user's system.
 
 Plugin capabilities include:
 
@@ -1773,128 +1844,142 @@
 - Creating directories
 - Downloading files
 - Copying files and directories
 - Moving (renaming) files and directories
 - Reading file info
 - Indexing files and directories using Llama-index
 - Querying files using Llama-index
+- Searching for files and directories
 
 If a file being created (with the same name) already exists, a prefix including the date and time is added to the file name.
 
 **Options:**
 
-- `Enable: Send (upload) file as attachment` *cmd_send_file*
-
-Allows `cmd_send_file` command execution. *Default:* `True`
+**General**
 
-- `Enable: Read file` *cmd_read_file*
+- `Enable: send (upload) file as attachment` *cmd.send_file*
 
-Allows `read_file` command execution. *Default:* `True`
+Allows `cmd.send_file` command execution. *Default:* `True`
 
-- `Enable: Query file with Llama-index` *cmd_query_file*
+- `Enable: read file` *cmd.read_file*
 
-Allows `query_file` command execution  (temporary index, on the fly) *Default:* `True`
+Allows `read_file` command execution. *Default:* `True`
 
-- `Enable: Append to file` *cmd_append_file*
+- `Enable: append to file` *cmd.append_file*
 
-Allows `append_file` command execution. *Default:* `True`
+Allows `append_file` command execution. Text-based files only (plain text, JSON, CSV, etc.) *Default:* `True`
 
-- `Enable: Save file` *cmd_save_file*
+- `Enable: save file` *cmd.save_file*
 
-Allows `save_file` command execution. *Default:* `True`
+Allows `save_file` command execution. Text-based files only (plain text, JSON, CSV, etc.) *Default:* `True`
 
-- `Enable: Delete file` *cmd_delete_file*
+- `Enable: delete file` *cmd.delete_file*
 
 Allows `delete_file` command execution. *Default:* `True`
 
-- `Enable: List files (ls)` *cmd_list_files*
+- `Enable: list files (ls)` *cmd.list_files*
 
 Allows `list_dir` command execution. *Default:* `True`
 
-- `Enable: List files in dirs in directory (ls)` *cmd_list_dir*
+- `Enable: list files in dirs in directory (ls)` *cmd.list_dir*
 
 Allows `mkdir` command execution. *Default:* `True`
 
-- `Enable: Downloading files` *cmd_download_file*
+- `Enable: downloading files` *cmd.download_file*
 
 Allows `download_file` command execution. *Default:* `True`
 
-- `Enable: Removing directories` *cmd_rmdir*
+- `Enable: removing directories` *cmd.rmdir*
 
 Allows `rmdir` command execution. *Default:* `True`
 
-- `Enable: Copying files` *cmd_copy_file*
+- `Enable: copying files` *cmd.copy_file*
 
 Allows `copy_file` command execution. *Default:* `True`
 
-- `Enable: Copying directories (recursive)` *cmd_copy_dir*
+- `Enable: copying directories (recursive)` *cmd.copy_dir*
 
 Allows `copy_dir` command execution. *Default:* `True`
 
-- `Enable: Move files and directories (rename)` *cmd_move*
+- `Enable: move files and directories (rename)` *cmd.move*
 
 Allows `move` command execution. *Default:* `True`
 
-- `Enable: Check if path is directory` *cmd_is_dir*
+- `Enable: check if path is directory` *cmd.is_dir*
 
 Allows `is_dir` command execution. *Default:* `True`
 
-- `Enable: Check if path is file` *cmd_is_file*
+- `Enable: check if path is file` *cmd.is_file*
 
 Allows `is_file` command execution. *Default:* `True`
 
-- `Enable: Check if file or directory exists` *cmd_file_exists*
+- `Enable: check if file or directory exists` *cmd.file_exists*
 
 Allows `file_exists` command execution. *Default:* `True`
 
-- `Enable: Get file size` *cmd_file_size*
+- `Enable: get file size` *cmd.file_size*
 
 Allows `file_size` command execution. *Default:* `True`
 
-- `Enable: Get file info` *cmd_file_info*
+- `Enable: get file info` *cmd.file_info*
 
 Allows `file_info` command execution. *Default:* `True`
 
-- `Enable: Get current working directory` *cmd_cwd*
+- `Enable: find file or directory` *cmd.find*
+
+Allows `find` command execution. *Default:* `True`
+
+- `Enable: get current working directory` *cmd.cwd*
 
 Allows `cwd` command execution. *Default:* `True`
 
-- `Enable: indexing files` *cmd_file_index*
+- `Use data loaders` *use_loaders*
 
-If enabled, model will be able to index file or directory using Llama-index (`file_index` command). *Default:* `True`
+Use data loaders from Llama-index for file reading (`read_file` command). *Default:* `True`
 
-- `Index to use when indexing files` *idx*
+**Indexing**
 
-ID of index to use for files indexing. *Default:* `base`
+- `Enable: quick query the file with Llama-index` *cmd.query_file*
 
-- `Use data loaders` *use_loaders*
+Allows `query_file` command execution (in-memory index). If enabled, model will be able to quick index file into memory and query it for data (in-memory index) *Default:* `True`
 
-Use data loaders from Llama-index for file reading (`read_file` command). *Default:* `True`
+- `Model for query in-memory index` *model_tmp_query*
+
+Model used for query temporary index for `query_file` command (in-memory index). *Default:* `gpt-3.5-turbo`
+
+- `Enable: indexing files to persistent index` *cmd.file_index*
+
+Allows `file_index` command execution. If enabled, model will be able to index file or directory using Llama-index (persistent index). *Default:* `True`
+
+- `Index to use when indexing files` *idx*
+
+ID of index to use for indexing files (persistent index). *Default:* `base`
 
 - `Auto index reading files` *auto_index*
 
-If enabled, every time file is read, it will be automatically indexed. *Default:* `False`
+If enabled, every time file is read, it will be automatically indexed (persistent index). *Default:* `False`
 
 - `Only index reading files` *only_index*
 
-If enabled, file will be indexed without return its content on file read. *Default:* `False`
+If enabled, file will be indexed without return its content on file read (persistent index). *Default:* `False`
+
 
 ## Command: Web Search
 
 **PyGPT** lets you connect GPT to the internet and carry out web searches in real time as you make queries.
 
 To activate this feature, turn on the `Command: Web Search` plugin found in the `Plugins` menu.
 
 Web searches are provided by `Google Custom Search Engine` and `Microsoft Bing` APIs and can be extended with other search engine providers. 
 
 **Options**
 
 - `Provider` *provider*
 
-Choose the provider. *Default:* `OpenAI TTS`
+Choose the provider. *Default:* `Google`
 
 Available providers:
 
 - Google
 - Microsoft Bing
 
 **Google**
@@ -1935,107 +2020,87 @@
 
 API endpoint for Bing Search API, default: https://api.bing.microsoft.com/v7.0/search
 
 **General options**
 
 - `Number of pages to search` *num_pages*
 
-Number of max pages to search per query
+Number of max pages to search per query. *Default:* `10`
 
-- ` Max content characters` *max_page_content_length*
+- `Max content characters` *max_page_content_length*
 
-Max characters of page content to get (0 = unlimited)
+Max characters of page content to get (0 = unlimited). *Default:* `0`
 
 - `Per-page content chunk size` *chunk_size*
 
-Per-page content chunk size (max characters per chunk)
+Per-page content chunk size (max characters per chunk). *Default:* `20000`
 
 - `Disable SSL verify` *disable_ssl*
 
-Disables SSL verification when crawling web pages
+Disables SSL verification when crawling web pages. *Default:* `False`
 
 - `Timeout` *timeout*
 
-Connection timeout (seconds)
+Connection timeout (seconds). *Default:* `5`
 
 - `User agent` *user_agent*
 
-User agent to use when making requests, default: Mozilla/5.0
+User agent to use when making requests. *Default:* `Mozilla/5.0`.
 
 - `Max result length` *max_result_length*
 
-Max length of summarized result (characters)
+Max length of summarized result (characters). *Default:* `1500`
 
 - `Max summary tokens` *summary_max_tokens*
 
-Max tokens in output when generating summary
+Max tokens in output when generating summary. *Default:* `1500`
 
-- `Enable: "web_search" command` *cmd_web_search*
+- `Enable: search the Web` *cmd.web_search*
 
-If enabled, model will be able to search the Web
+Allows `web_search` command execution. If enabled, model will be able to search the Web. *Default:* `True`
 
-- `Enable: "web_url_open" command` *cmd_web_url_open*
+- `Enable: opening URLs` *cmd.web_url_open*
 
-If enabled, model will be able to open specified URL and summarize content
+Allows `web_url_open` command execution. If enabled, model will be able to open specified URL and summarize content. *Default:* `True`
 
-- `Enable: "web_url_raw" command` *cmd_web_url_raw*
+- `Enable: reading the raw content from URLs` *cmd.web_url_raw*
 
-If enabled, model will be able to open specified URL and get raw content
+Allows `web_url_raw` command execution. If enabled, model will be able to open specified URL and get the raw content. *Default:* `True`
 
-- `Enable: "web_urls" command` *cmd_web_urls*
+- `Enable: getting a list of URLs from search results` *cmd.web_urls*
 
-If enabled, model will be able to search the Web and get founded URLs list
+Allows `web_urls` command execution. If enabled, model will be able to search the Web and get founded URLs list. *Default:* `True`
 
-- `Enable: "web_index" command` *cmd_web_index*
+- `Enable: indexing web and external content` *cmd.web_index*
 
-If enabled, model will be able to index (on the fly) web pages using Llama-index (persistent index)
+Allows `web_index` command execution. If enabled, model will be able to index pages and external content using Llama-index (persistent index). *Default:* `True`
 
-- `Enable: "web_index_query" command - quick query the web content with Llama-index` *cmd_web_index_query*
+- `Enable: quick query the web and external content` *cmd.web_index_query*
 
-If enabled, model will be able to index and query web content using Llama-index (temporary index, on the fly)
+Allows `web_index_query` command execution. If enabled, model will be able to quick index and query web content using Llama-index (in-memory index). *Default:* `True`
 
 - `Auto-index all used URLs using Llama-index` *auto_index*
 
-If enabled, every URL used by the model will be automatically indexed using Llama-index (persistent index)
+If enabled, every URL used by the model will be automatically indexed using Llama-index (persistent index). *Default:* `False`
 
 - `Index to use` *idx*
 
-ID of index to use for web page indexing (persistent index)
+ID of index to use for web page indexing (persistent index). *Default:* `base`
 
 - `Model used for web page summarize` *summary_model*
 
-Model used for web page summarize, default: gpt-3.5-turbo-1106
+Model used for web page summarize. *Default:* `gpt-3.5-turbo-1106`
 
 - `Summarize prompt` *prompt_summarize*
 
-Prompt used for web search results summarize, use {query} as a placeholder for search query
+Prompt used for web search results summarize, use {query} as a placeholder for search query.
 
 - `Summarize prompt (URL open)` *prompt_summarize_url*
 
-Prompt used for specified URL page summarize
-
-- `Syntax: web_search` *syntax_web_search*
-
-Syntax for web_search command
-
-- `Syntax: web_url_open` *syntax_web_url_open*
-
-Syntax for web_url_open command
-
-- `Syntax: web_url_raw` *syntax_web_url_raw*
-
-Syntax for web_url_raw command
-
-- `Syntax: web_urls` *syntax_web_urls*
-
-Syntax for web_urls command
-
-- `Syntax: web_index` *syntax_web_index*
-
-Syntax for web_index command
+Prompt used for specified URL page summarize.
 
 ## Command: Serial port / USB
 
 Provides commands for reading and sending data to USB ports.
 
 **Tip:** in Snap version you must connect the interface first: https://snapcraft.io/docs/serial-port-interface
 
@@ -2062,51 +2127,39 @@
 }
 ```
 
 **Options**
 
 - `USB port` *serial_port*
 
-USB port name, e.g. `/dev/ttyUSB0`, `/dev/ttyACM0`, `COM3` *Default:* `/dev/ttyUSB0`
+USB port name, e.g. `/dev/ttyUSB0`, `/dev/ttyACM0`, `COM3`. *Default:* `/dev/ttyUSB0`
 
 - `Connection speed (baudrate, bps)` *serial_bps*
 
-Port connection speed, in bps *Default:* `9600`
+Port connection speed, in bps. *Default:* `9600`
 
 - `Timeout` *timeout*
 
-Timeout in seconds *Default:* `1`
+Timeout in seconds. *Default:* `1`
 
 - `Sleep` *sleep*
 
 Sleep in seconds after connection *Default:* `2`
 
-- `Enable: Send text commands to USB port` *cmd_serial_send*
-
-Allows `serial_send` command execution" *Default:* `True`
-
-- `Enable: Send raw bytes to USB port` *cmd_serial_send_bytes*
-
-Allows `serial_send_bytes` command execution *Default:* `True`
-
-- `Enable: Read data from USB port` *cmd_serial_read*
+- `Enable: Send text commands to USB port` *cmd.serial_send*
 
-Allows `serial_read` command execution *Default:* `True`
+Allows `serial_send` command execution. *Default:* `True`
 
-- `Syntax: serial_send` *syntax_serial_send*
+- `Enable: Send raw bytes to USB port` *cmd.serial_send_bytes*
 
-Syntax for sending text command to USB port *Default:* `"serial_send": send text command to USB port, params: "command"`
+Allows `serial_send_bytes` command execution. *Default:* `True`
 
-- `Syntax: serial_send_bytes` *syntax_serial_send_bytes*
+- `Enable: Read data from USB port` *cmd.serial_read*
 
-Syntax for sending raw bytes to USB port *Default:* `"serial_send_bytes": send raw bytes to USB port, params: "bytes"`
-
-- `Syntax: serial_read` *syntax_serial_read*
-
-Syntax for reading data from USB port *Default:* `"serial_read": read data from serial port in seconds duration, params: "duration"`
+Allows `serial_read` command execution. *Default:* `True`
 
 ## Context history (calendar, inline)
 
 Provides access to context history database.
 Plugin also provides access to reading and creating day notes.
 
 Examples of use, you can ask e.g. for the following:
@@ -2119,15 +2172,15 @@
 
 ```Get the list of yesterday conversations```
 
 ```Get contents of conversation ID 123```
 
 etc.
 
-From version `2.0.147` it is possible to use `@` ID tags to automatically use summary of previous contexts in current discussion.
+You can also use `@` ID tags to automatically use summary of previous contexts in current discussion.
 To use context from previous discussion with specified ID use following syntax in your query:
 
 ```@123```
 
 Where `123` is the ID of previous context (conversation) in database, example of use:
 
 ```Let's talk about discussion @123```
@@ -2135,41 +2188,41 @@
 
 **Options**
 
 - `Enable: using context @ ID tags` *use_tags*
 
 When enabled, it allows to automatically retrieve context history using @ tags, e.g. use @123 in question to use summary of context with ID 123 as additional context. *Default:* `False`
 
-- `Enable: get date range context list` *cmd_get_ctx_list_in_date_range*
+- `Enable: get date range context list` *cmd.get_ctx_list_in_date_range*
 
-When enabled, it allows getting the list of context history (previous conversations). *Default:* `True`
+Allows `get_ctx_list_in_date_range` command execution. If enabled, it allows getting the list of context history (previous conversations). *Default:* `True
 
-- `Enable: get context content by ID` *cmd_get_ctx_content_by_id*
+- `Enable: get context content by ID` *cmd.get_ctx_content_by_id*
 
-When enabled, it allows getting summarized content of context with defined ID. *Default:* `True`
+Allows `get_ctx_content_by_id` command execution. If enabled, it allows getting summarized content of context with defined ID. *Default:* `True`
 
-- `Enable: count contexts in date range` *cmd_count_ctx_in_date*
+- `Enable: count contexts in date range` *cmd.count_ctx_in_date*
 
-When enabled, it allows counting contexts in date range. *Default:* `True`
+Allows `count_ctx_in_date` command execution. If enabled, it allows counting contexts in date range. *Default:* `True`
 
-- `Enable: get day note` *cmd_get_day_note*
+- `Enable: get day note` *cmd.get_day_note*
 
-When enabled, it allows retrieving day note for specific date. *Default:* `True`
+Allows `get_day_note` command execution. If enabled, it allows retrieving day note for specific date. *Default:* `True`
 
-- `Enable: add day note` *cmd_add_day_note*
+- `Enable: add day note` *cmd.add_day_note*
 
-When enabled, it allows adding day note for specific date. *Default:* `True`
+Allows `add_day_note` command execution. If enabled, it allows adding day note for specific date. *Default:* `True`
 
-- `Enable: update day note` *cmd_update_day_note*
+- `Enable: update day note` *cmd.update_day_note*
 
-When enabled, it allows updating day note for specific date. *Default:* `True`
+Allows `update_day_note` command execution. If enabled, it allows updating day note for specific date. *Default:* `True`
 
-- `Enable: remove day note` *cmd_remove_day_note*
+- `Enable: remove day note` *cmd.remove_day_note*
 
-When enabled, it allows removing day note for specific date. *Default:* `True`
+Allows `remove_day_note` command execution. If enabled, it allows removing day note for specific date. *Default:* `True`
 
 - `Model` *model_summarize*
 
 Model used for summarize. *Default:* `gpt-3.5-turbo`
 
 - `Max summary tokens` *summary_max_tokens*
 
@@ -2181,42 +2234,14 @@
 
 - `Per-context items content chunk size` *chunk_size*
 
 Per-context content chunk size (max characters per chunk). *Default:* `100000 chars`
 
 **Options (advanced)**
 
-- `Syntax: get_ctx_list_in_date_range` *syntax_get_ctx_list_in_date_range*
-
-Syntax for get_ctx_list_in_date_range command.
-
-- `Syntax: get_ctx_content_by_id` *syntax_get_ctx_content_by_id*
-
-Syntax for get_ctx_content_by_id command.
-
-- `Syntax: count_ctx_in_date` *syntax_count_ctx_in_date*
-
-Syntax for count_ctx_in_date command
-
-- `Syntax: get_day_note` *syntax_get_day_note*
-
-Syntax for get_day_note command
-
-- `Syntax: add_day_note` *syntax_add_day_note*
-
-Syntax for add_day_note command.
-
-- `Syntax: update_day_note` *syntax_update_day_note*
-
-Syntax for update_day_note command.
-
-- `Syntax: remove_day_note` *syntax_remove_day_note*
-
-Syntax for remove_day_note command.
-
 - `Prompt: @ tags (system)` *prompt_tag_system*
 
 Prompt for use @ tag (system).
 
 - `Prompt: @ tags (summary)` *prompt_tag_summary*
 
 Prompt for use @ tag (summary).
@@ -2263,37 +2288,31 @@
 
 **Tip:** When using `Vision (inline)` by utilizing a plugin in standard mode, such as `Chat` (not `Vision` mode), the `+ Vision` special checkbox will appear at the bottom of the Chat window. It will be automatically enabled any time you provide content for analysis (like an uploaded photo). When the checkbox is enabled, the vision model is used. If you wish to exit the vision model after image analysis, simply uncheck the checkbox. It will activate again automatically when the next image content for analysis is provided.
 
 **Options**
 
 - `Model` *model*
 
-The model used to temporarily provide vision capabilities; default is `gpt-4-vision-preview`.
-
+The model used to temporarily provide vision capabilities. *Default:* `gpt-4-vision-preview`.
 
 - `Prompt` *prompt*
 
 The prompt used for vision mode. It will append or replace current system prompt when using vision model.
 
-
 - `Replace prompt` *replace_prompt*
 
-Replace whole system prompt with vision prompt against appending it to the current prompt.
+Replace whole system prompt with vision prompt against appending it to the current prompt. *Default:* `False`
 
+- `Enable: capturing images from camera` *cmd.camera_capture*
 
-- `Enable: "camera capture" command` *cmd_capture*
+Allows `capture` command execution. If enabled, model will be able to capture images from camera itself. The `Execute commands` option must be enabled. *Default:* `False`
 
-Allows using command: camera capture (`Execute commands` option enabled is required).
-If enabled, model will be able to capture images from camera itself.
+- `Enable: making screenshots` *cmd.make_screenshot*
 
-
-- `Enable: "make screenshot" command` *cmd_screenshot*
-
-Allows using command: make screenshot (`Execute commands` option enabled is required).
-If enabled, model will be able to making screenshots itself.
+Allows `screenshot` command execution. If enabled, model will be able to making screenshots itself. The `Execute commands` option must be enabled. *Default:* `False`
 
 ## Real Time
 
 This plugin automatically adds the current date and time to each system prompt you send. 
 You have the option to include just the date, just the time, or both.
 
 When enabled, it quietly enhances each system prompt with current time information before sending it to GPT.
@@ -2558,15 +2577,15 @@
 These are functions - defined on the OpenAI API side and described using JSON objects. You can find a complete guide on how to define functions here:
 
 https://platform.openai.com/docs/guides/function-calling
 
 https://cookbook.openai.com/examples/how_to_call_functions_with_chat_models
 
 
-From version **2.0.150**, PyGPT offers compatibility of these functions with commands used in the application. All you need to do is define the appropriate functions using the syntax required by OpenAI, and PyGPT will do the rest, translating such syntax on the fly into its own internal format.
+PyGPT offers compatibility of these functions with commands used in the application. All you need to do is define the appropriate functions using the syntax required by OpenAI, and PyGPT will do the rest, translating such syntax on the fly into its own internal format.
 
 You can define functions for modes: `Chat` and `Assistants`.
 Note that - in Chat mode, they should be defined in `Presets`, and for Assistants, in the `Assistant` settings.
 
 **Example of usage:**
 
 1) Chat
@@ -2623,14 +2642,64 @@
 
 2) Assistant
 
 In this mode (via Assistants API), it should be done similarly, with the difference that here the functions should be defined in the assistant's settings.
 
 With this flow you can use both forms - OpenAI and PyGPT - to define and execute commands and functions in the application. They will cooperate with each other and you can use them interchangeably.
 
+# Tools
+
+PyGPT features several useful tools, including:
+
+- Indexer
+- Media Player
+- Image viewer
+- Text editor
+- Transcribe audio/video files
+- Python code interpreter
+
+![v2_tool_menu](https://github.com/szczyglis-dev/py-gpt/assets/61396542/fb3f44af-f0de-4e18-bcac-e20389a651c9)
+
+
+### Indexer
+
+
+This tool allows indexing of local files or directories and external web content to a vector database, which can then be used with the `Chat with Files` mode. Using this tool, you can manage local indexes and add new data with built-in `Llama-index` integration.
+
+![v2_tool_indexer](https://github.com/szczyglis-dev/py-gpt/assets/61396542/1caeab6e-6119-44e2-a7cb-ed34f8fe9e30)
+
+### Media Player
+
+
+A simple video/audio player that allows you to play video files directly from within the app.
+
+
+### Image Viewer
+
+
+A simple image browser that lets you preview images directly within the app.
+
+
+### Text Editor
+
+
+A simple text editor that enables you to edit text files directly within the app.
+
+
+### Transcribe Audio/Video Files
+
+
+An audio transcription tool with which you can prepare a transcript from a video or audio file. It will use a speech recognition plugin to generate the text from the file.
+
+
+### Python Code Interpreter
+
+
+This tool allows you to run Python code directly from within the app. It is integrated with the `Code Interpreter` plugin, ensuring that code generated by the model is automatically available from the interpreter. In the plugin settings, you can enable the execution of code in a Docker environment.
+
 # Token usage calculation
 
 ## Input tokens
 
 The application features a token calculator. It attempts to forecast the number of tokens that 
 a particular query will consume and displays this estimate in real time. This gives you improved 
 control over your token usage. The app provides detailed information about the tokens used for the user's prompt, 
@@ -2652,29 +2721,39 @@
 
 The following basic options can be modified directly within the application:
 
 ``` ini
 Config -> Settings...
 ```
 
-![v2_settings](https://github.com/szczyglis-dev/py-gpt/assets/61396542/21d7e43d-858f-4bc7-a06f-ec848338e7a9)
+![v2_settings](https://github.com/szczyglis-dev/py-gpt/assets/61396542/43622c58-6cdb-4ed8-b47d-47729763db04)
 
 **General**
 
 - `OpenAI API KEY`: The personal API key you'll need to enter into the application for it to function.
 
 - `OpenAI ORGANIZATION KEY`: The organization's API key, which is optional for use within the application.
 
+- `API Endpoint`: OpenAI API endpoint URL, default: https://api.openai.com/v1.
+
 - `Number of notepads`: Number of notepad tabs. Restart of the application is required for this option to take effect.
 
 - `Minimize to tray on exit`: Minimize to tray icon on exit. Tray icon enabled is required for this option to work. Default: False.
 
+- `Render engine`: chat output render engine: `WebEngine / Chromium` - for full HTML/CSS and `Legacy (markdown)` for legacy, simple markdown CSS output. Default: WebEngine / Chromium.
+
+- `OpenGL hardware acceleration`: enables hardware acceleration in `WebEngine / Chromium` renderer.  Default: False.
+
 **Layout**
 
-- `Font Size (chat window)`: Adjusts the font size in the chat window.
+- `Zoom`: Adjusts the zoom in chat window (web render view). `WebEngine / Chromium` render mode only.
+
+- `Code syntax highlight`: Syntax highlight theme in code blocks. `WebEngine / Chromium` render mode only.
+
+- `Font Size (chat window)`: Adjusts the font size in the chat window (plain-text) and notepads.
 
 - `Font Size (input)`: Adjusts the font size in the input window.
 
 - `Font Size (ctx list)`: Adjusts the font size in contexts list.
 
 - `Font Size (toolbox)`: Adjusts the font size in toolbox on right.
 
@@ -2714,47 +2793,67 @@
 
 - `Context Auto-summary`: Enables automatic generation of titles for contexts, Default: True.
 
 - `Lock incompatible modes`: If enabled, the app will create a new context when switched to an incompatible mode within an existing context.
 
 - `Search also in conversation content, not only in titles`: When enabled, context search will also consider the content of conversations, not just the titles of conversations.
 
-- `Model used for auto-summary`: Model used for context auto-summary (default: *gpt-3.5-turbo-1106*).
+- `Show Llama-index sources`: If enabled, sources utilized will be displayed in the response (if available, it will not work in streamed chat).
 
-- `Prompt (sys): auto summary`: System prompt for context auto-summary.
+- `Show code interpreter output`: If enabled, output from the code interpreter in the Assistant API will be displayed in real-time (in stream mode), Default: True.
 
-- `Prompt (user): auto summary`: User prompt for context auto-summary.
+- `Use extra context output`: If enabled, plain text output (if available) from command results will be displayed alongside the JSON output, Default: True.
+
+- `Convert lists to paragraphs`: If enabled, lists (ul, ol) will be converted to paragraphs (p), Default: True.
+
+- `Model used for auto-summary`: Model used for context auto-summary (default: *gpt-3.5-turbo-1106*).
 
 **Models**
 
-- `Max Output Tokens`: Determines the maximum number of tokens the model can generate for a single response.
+- `Max Output Tokens`: Sets the maximum number of tokens the model can generate for a single response.
 
-- `Max Total Tokens`: Defines the maximum token count that the application can send to the model, including the conversation context.
+- `Max Total Tokens`: Sets the maximum token count that the application can send to the model, including the conversation context.
+
+- `RPM limit`: Sets the limit of maximum requests per minute (RPM), 0 = no limit.
 
 - `Temperature`: Sets the randomness of the conversation. A lower value makes the model's responses more deterministic, while a higher value increases creativity and abstraction.
 
 - `Top-p`: A parameter that influences the model's response diversity, similar to temperature. For more information, please check the OpenAI documentation.
 
 - `Frequency Penalty`: Decreases the likelihood of repetition in the model's responses.
 
 - `Presence Penalty`: Discourages the model from mentioning topics that have already been brought up in the conversation.
 
-- `Prompt (append): command execute instruction`: Prompt for appending command execution instructions.
+**Prompts**
+
+- `Command execute: instruction`: Prompt for appending command execution instructions. Placeholders: {schema}, {extra}
+
+- `Command execute: extra footer (non-Assistant modes)`: Extra footer to append after commands JSON schema.
+
+- `Command execute: extra footer (Assistant mode only)`: PAdditional instructions to separate local commands from the remote environment that is already configured in the Assistants.
+
+- `Context: auto-summary (system prompt)`: System prompt for context auto-summary.
+
+- `Context: auto-summary (user message)`: User message for context auto-summary. Placeholders: {input}, {output}
+
+- `Agent: continue`: Prompt sent to automatically continue the conversation. Default: `continue...`
+
+- `Agent: goal update`: Prompt to instruct how to update current goal status.
+
+- `DALL-E: image generate`: Prompt for generating prompts for DALL-E (if raw-mode is disabled).
 
 **Images**
 
 - `DALL-E Image size`: The resolution of the generated images (DALL-E). Default: 1792x1024.
 
 - `DALL-E Image quality`: The image quality of the generated images (DALL-E). Default: standard.
 
 - `Open image dialog after generate`: Enable the image dialog to open after an image is generated in Image mode.
 
-- `DALL-E: Prompt (sys): prompt generation`: Prompt for generating prompts for DALL-E (if RAW mode is disabled).
-
-- `DALL-E: prompt generation model`: Model used for generating prompts for DALL-E (if RAW mode is disabled).
+- `DALL-E: prompt generation model`: Model used for generating prompts for DALL-E (if raw-mode is disabled).
 
 **Vision**
 
 - `Vision: Camera capture width (px)`: Video capture resolution (width).
 
 - `Vision: Camera capture height (px)`: Video capture resolution (height).
 
@@ -2762,32 +2861,48 @@
 
 - `Vision: Image capture quality`: Video capture image JPEG quality (%).
 
 **Indexes (Llama-index)**
 
 - `Indexes`: List of created indexes.
 
-- `Vector Store`: Vector store in use (vector database provided by Llama-index).
+- `Vector Store`: Vector store to use (vector database provided by Llama-index).
+
+- `Vector Store (**kwargs)`: Keyword arguments for vector store provider (api_key, index_name, etc.).
+
+- `Embeddings provider`: Embeddings provider.
 
-- `Vector Store (**kwargs)`: Arguments for vector store (api_key, index_name, etc.).
+- `Embeddings provider (ENV)`: ENV vars to embeddings provider (API keys, etc.).
+
+- `Embeddings provider (**kwargs)`: Keyword arguments for embeddings provider (model name, etc.).
+
+- `RPM limit for embeddings API calls`: Specify the limit of maximum requests per minute (RPM), 0 = no limit.
 
 - `Recursive directory indexing`: Enables recursive directory indexing, default is False.
 
 - `Replace old document versions in the index during re-indexing`: If enabled, previous versions of documents will be deleted from the index when the newest versions are indexed, default is True.
 
 - `Excluded file extensions`: File extensions to exclude if no data loader for this extension, separated by comma.
 
+- `Force exclude files`: If enabled, the exclusion list will be applied even when the data loader for the extension is active. Default: False.
+
+- `Custom metadata to append/replace to indexed documents (file)`: Define custom metadata key => value fields for specified file extensions, separate extensions by comma.\nAllowed placeholders: {path}, {relative_path} {filename}, {dirname}, {relative_dir} {ext}, {size}, {mtime}, {date}, {date_time}, {time}, {timestamp}. Use * (asterisk) as extension if you want to apply field to all files. Set empty value to remove field with specified key from metadata.
+
+- `Custom metadata to append/replace to indexed documents (web)`: Define custom metadata key => value fields for specified external data loaders.\nAllowed placeholders: {date}, {date_time}, {time}, {timestamp} + {data loader args}
+
 - `Additional keyword arguments (**kwargs) for data loaders`: Additional keyword arguments, such as settings, API keys, for the data loader. These arguments will be passed to the loader; please refer to the Llama-index or LlamaHub loaders reference for a list of allowed arguments for the specified data loader.
 
-- `Use local models in Video/Audio and Image (vision) loaders`: Enable usage of local models in Video/Audio and Image (vision) loaders. If disabled then API models will be used (GPT-4 Vision and Whisper). Note: local models will work only in Python version (not compiled/Snap). Default: False.
+- `Use local models in Video/Audio and Image (vision) loaders`: Enables usage of local models in Video/Audio and Image (vision) loaders. If disabled then API models will be used (GPT-4 Vision and Whisper). Note: local models will work only in Python version (not compiled/Snap). Default: False.
 
-- `Auto-index DB in real time`: Enables conversation context auto-indexing.
+- `Auto-index DB in real time`: Enables conversation context auto-indexing in defined modes.
 
 - `ID of index for auto-indexing`: Index to use if auto-indexing of conversation context is enabled.
 
+- `Enable auto-index in modes`: List of modes with enabled context auto-index, separated by comma.
+
 - `DB (ALL), DB (UPDATE), FILES (ALL)`: Index the data – batch indexing is available here.
 
 **Agent (autonomous)**
 
 - `Sub-mode to use`: Sub-mode to use in Agent mode (chat, completion, langchain, llama_index, etc.). Default: chat.
 
 - `Index to use`: Only if sub-mode is llama_index (Chat with files), choose the index to use in Agent mode.
@@ -2798,17 +2913,19 @@
 
 - `Check for updates on start`: Enables checking for updates on start. Default: True.
 
 - `Check for updates in background`: Enables checking for updates in background (checking every 5 minutes). Default: True.
 
 **Developer**
 
-- `Show debug menu`: enables debug (developer) menu.
+- `Show debug menu`: Enables debug (developer) menu.
 
-- `Log and debug events`: Enables logging of events dispatch.
+- `Log and debug context`: Enables logging of context input/output.
+
+- `Log and debug events`: Enables logging of event dispatch.
 
 - `Log plugin usage to console`: Enables logging of plugin usage to console.
 
 - `Log DALL-E usage to console`: Enables logging of DALL-E usage to console.
 
 - `Log Llama-index usage to console`: Enables logging of Llama-index usage to console.
 
@@ -2828,14 +2945,30 @@
 
 # Notepad
 
 The application has a built-in notepad, divided into several tabs. This can be useful for storing information in a convenient way, without the need to open an external text editor. The content of the notepad is automatically saved whenever the content changes.
 
 ![v2_notepad](https://github.com/szczyglis-dev/py-gpt/assets/61396542/f6aa0126-bad1-4e6c-ace6-72e979186433)
 
+# Profiles
+
+You can create many "profiles" for an app and switch between them. Each profile uses its own configuration, settings, history of contexts, and a separate folder for user files. This allows you to make many setups and quickly switch between them, changing the whole setting with one click.
+
+The app allows you to make new profiles, edit existing ones, and duplicate current ones.
+
+To make a new profile, select the option from the menu `Config -> Profile -> New profile...`
+
+To edit saved profiles, choose the option from the menu `Config -> Profile -> Edit profiles...`
+
+To switch to a created profile, pick the profile from the menu: `Config -> Profile -> (profile name)`
+
+Each profile uses its own user directory (workdir). You can link a newly created (or edited) profile to an already existing workdir with its configuration.
+
+The name of the currently active profile is shown in (Profile Name) in the window title.
+
 # Advanced configuration
 
 ## Manual configuration
 
 
 You can manually edit the configuration files in this directory (this is your work directory):
 
@@ -2874,27 +3007,50 @@
 
 ``` ini
 locale.es.ini   
 ```
 
 This will add Spanish as a selectable language in the application's language menu.
 
-**Overwriting CSS and locales with your own files:**
+**Overwriting CSS and locales with Your Own Files:**
 
 You can also overwrite files in the `locale` and `css` app directories with your own files in the user directory. 
 This allows you to overwrite language files or CSS styles in a very simple way - by just creating files in your working directory.
 
 
 ``` ini
 {HOME_DIR}/.config/pygpt-net/
 ```
 
 - `locale` - a directory for locales in `.ini` format.
 - `css` - a directory for CSS styles in `.css` format.
 
+**Adding Your Own Fonts**
+
+You can add your own fonts and use them in CSS files. To load your own fonts, you should place them in the `%workdir%/fonts` directory. Supported font types include: `otf`, `ttf`.
+You can see the list of loaded fonts in `Debug / Config`.
+
+**Example:**
+
+```
+%workdir%
+|_css
+|_data
+|_fonts
+   |_MyFont
+     |_MyFont-Regular.ttf
+     |_MyFont-Bold.ttf
+     |...
+```
+
+```css
+pre {{
+    font-family: 'MyFont';
+}}
+```
 
 ## Debugging and Logging
 
 In `Settings -> Developer` dialog, you can enable the `Show debug menu` option to turn on the debugging menu. The menu allows you to inspect the status of application elements. In the debugging menu, there is a `Logger` option that opens a log window. In the window, the program's operation is displayed in real-time.
 
 **Logging levels**:
 
@@ -2916,14 +3072,35 @@
 python3 run.py --debug=2
 ```
 
 The value `1` enables the `INFO`logging level.
 
 The value `2` enables the `DEBUG` logging level (most information).
 
+## Compatibility (legacy) mode
+
+If you have a problems with `WebEngine / Chromium` renderer you can force the legacy mode by launching the app with command line arguments:
+
+``` ini
+python3 run.py --legacy=1
+```
+
+and to force disable OpenGL hardware acceleration:
+
+``` ini
+python3 run.py --disable-gpu=1
+```
+
+You can also manualy enable legacy mode by editing config file - open the `%WORKDIR%/config.json` config file in editor and set the following options:
+
+``` json
+"render.engine": "legacy",
+"render.open_gl": false,
+```
+
 ## Updates
 
 ### Updating PyGPT
 
 **PyGPT** comes with an integrated update notification system. When a new version with additional features is released, you'll receive an alert within the app. 
 
 To get the new version, simply download it and start using it in place of the old one. All your custom settings like configuration, presets, indexes, and past conversations will be kept and ready to use right away in the new version.
@@ -2947,244 +3124,207 @@
 
 ---
 
 # CHANGELOG
 
 ## Recent changes:
 
-# 2.1.9 (2024-03-04)
-
-- A new option has been added to the `Web Search` plugin: `web_index_query`, which allows for indexing a web and external content in a temporary index (in memory) and quickly querying its content. Works similar to `query_file` command.
-- The `read_file` command has been expanded to handle multiple files at once.
-- Added `Log and debug events` option to Developer settings.
-
-# 2.1.8 (2024-03-03)
-
-- A new option has been added to the `Files I/O` plugin: `query_file`, which allows for indexing a file in a temporary index (in memory) and quickly querying its content. This enables the use of Llama-index for fast querying or adding context from individual files. From now on, you can ask questions about individual files without indexing them to the main vector store. See the "Querying single files" in "Modes -> Chat with files" section in a README for more info.
-- The `read_file` command has been expanded to return just the exact file content, without wrapping it in JSON.
-- Improved prompt for preparing queries in the Chat with files plugin.
-- Updated docs.
-
-# 2.1.7 (2024-03-03)
-
-- Enhanced the Llama-index plugin with additional options for automatically refining queries before requesting additional context from Llama-index.
-
-# 2.1.6 (2024-03-03)
+**2.2.0 (2024-04-28)**
 
-- Added Twitter/X data loader.
-- Added check if message is not a reply when calling Llama-index using a plugin.
-- Added list of Agent indexes auto-reload after Llama-index list has changed.
-- Disabled anonymized telemetry in Chroma by default.
+- Improved code interpreter stream handling in Assistant mode.
+- Improved preset plugins reloading on profile switch.
+- Fixes and core improvements.
+- Updated docs to v2.2.0.
 
-# 2.1.5 (2024-03-02)
+**2.1.83 (2024-04-27)**
 
-- Recompiled SVG resources.
-- Fixed file explorer update after file commands execute.
+- Index list in 'Chat with files' mode moved to combo-box at bottom.
+- Enabled display of remote images in chat output.
 - Updated docs.
 
-# 2.1.4 (2024-03-02)
+**2.1.82 (2024-04-27)**
 
-- PySide6 downgraded to 6.4.2 due to a bug in signals emitting.
+- Fixed correct store id saving if hidden thread stores on list.
 
-# 2.1.3 (2024-03-01)
+**2.1.81 (2024-04-27)**
 
-- Added data loaders: Bitbucket, ChatGPT Retrieval Plugin, SQL Databases, GitHub, Microsoft OneDrive.
-- Added indexing configuration tab in `Web Search` plugin.
+- Improved remote vector stores management.
 
-# 2.1.2 (2024-03-01)
+**2.1.80 (2024-04-27)**
 
-- Added data loaders: Google Drive, Google Docs, Google Gmail, Google Calendar, Google Sheets, Google Keep.
-- Added data loaders: Video/Audio and Images, with local model and API modes.
-- Added Whisper (local hosted) model to `Audio Input` providers, available only in Python version.
+- Fixed missing selection in Assistant store select combo.
+- Fixed store deletion.
+- Added tooltip to Stores button.
 
-# 2.1.1 (2024-02-29)
+**2.1.79 (2024-04-26)**
 
-- Llama-index settings split into tabs.
-- Added keyword argument settings for data loaders.
-- Added data loaders for RSS, XML sitemaps, IPYNB notebooks, and XML and HTML files.
-- Added audio notes - simply use speech recognition in the Notepad tab to append transcribed audio to the Notepad.
-- Added an icon for quick toggling of video camera capture.
-- Added a Video menu.
-- Moved video capture toggle checkboxes to the Video menu.
+- OpenAI API upgraded to version 1.23.6.
+- Assistants API: added tool: File search and removed deprecated tool: Retrieval.
+- Support for remote Assistant Vector Stores added (accessible through the Assistants API).
+- Remote Vector Stores management tool introduced (right-click on an Assistant, select 'Edit', then click the database icon to open Remote Vector Stores editor).
+- Importer for Remote Assistant Vector Stores and files included.
+- Files uploaded in Assistants mode can now be shared between threads using Vector Stores.
 
-# 2.1.0 (2024-02-28)
+**2.1.78 (2024-04-25)**
 
-- Upgraded Llama-index from the legacy version `0.9` to the current version `0.10` (note: upgrading PyPi version of PyGPT to `2.1.0` requires reinstallation in a virtual environment to remove old library versions).
-- Upgraded Langchain to `0.1.9`.
-- Upgraded PyInstaller (and compiled versions) to version `6`.
-- Removed LlamaHub and restored support for Python `3.12`.
-- Fixed imports for Llama-index in the compiled versions.
-- Added icons for quickly toggling audio input/output.
-- UI fixes.
+- Removed redundant names in block view.
+- Scrollbars background integrated with blocks bg.
 
-# 2.0.171 (2024-02-27)
+**2.1.77 (2024-04-25)**
 
-- Added core for loading web resources (not only webpages) to Llama-index.
-- Added a data loader for transcriptions of YouTube videos (simply ask for index a YouTube video URL using the `Command: Web Search` plugin - the `web_index` command must be enabled).
-- Fixed the "Initial token count exceeds token limit" error in Chat with files mode.
-- Added missing translations for dictionary items in settings dialogs.
+- Added the "tree" command to the I/O Files plugin to retrieve the full directory tree.
 
-# 2.0.170 (2024-02-26)
+**2.1.76 (2024-04-25)**
 
-- Added "simplified" mode to the "Audio Input" plugin, now set as default, allowing for faster and simpler speech recognition without requiring any configuration. Meanwhile, all current options have been moved to "advanced" mode.
-- Improved microphone support in Snap version.
-- Improved file browser update after performing file operations.
-- Added check for file availability for indexing in the file browser.
+- Chat items now displayed in blocks.
 
-# 2.0.169 (2024-02-25)
+**2.1.75 (2024-04-24)**
 
-- Improved and refactored debugging
+- Copy to clipboard in web view fixed and moved to JS bridge.
 
-# 2.0.168 (2024-02-25)
+**2.1.74 (2024-04-24)**
 
-- Added auto index file on read option in the `Files I/O` plugin
-- Improved debugger
-- Fixed Bing speech recognition
+- Added syntax highlight choose to Theme menu.
+- Syntax highlight style colors integrated with Dark/Light app themes.
 
-# 2.0.167 (2024-02-25)
+**2.1.73 (2024-04-24)**
 
-- Fixed empty API key dialog.
+- Fixed issue #50 - missing type key in config.
 
-# 2.0.166 (2024-02-25)
+**2.1.72 (2024-04-24)**
 
-- Enabled the use of data loaders from Llama-index in the `Files I/O` plugin for reading files, which allows for reading not only text files using the plugin's `read_file` command.
-- Added a command for indexing files to the `Files I/O` plugin.
-- The `self_loop` plugin has been internally renamed to the `agent` plugin.
-- Fixed the display of pinned contexts when the indexed filter is enabled.
+- Fixed context initialization in web view on app load.
+- Improved and optimized items rendering.
+- Refactored web view CSS.
+- Rendering optimization.
+- Added real-time items reload and append.
+- Added theme CSS to scrollbars.
+- Added JS console debug to Logger window.
 
-# 2.0.165 (2024-02-25)
+**2.1.71 (2024-04-23)**
 
-- Added search provider: `Bing`.
-- Added audio output providers: `Google` and `Eleven Labs`.
-- Added audio input providers: `Google`, `Google Cloud`, and `Bing`.
-- Added a new plugin: `Command: API calls` which allows defining commands for API calls to external services.
-- Added an `Excluded file extensions` configuration option in `Settings -> Llama-index`.
-- Fixed audio input listener initialization in the Audio Input plugin.
+- Added 160+ prompt templates from ["Awesome ChatGPT Prompts"](https://github.com/f/awesome-chatgpt-prompts) repository - to use them, right-click on the input or system prompt textarea and select the "Paste from template..." option.
 
-# 2.0.164 (2024-02-24)
+**2.1.70 (2024-04-22)**
 
-- Refactored the Audio Input, Audio Output, and Google Web Search plugins to support multiple audio and search engine providers.
-- Introduced the option to add your own audio input, output, and web search providers.
+- Added web view CSS reload on theme switch.
+- Fixed time display CSS in web view.
 
-# 2.0.163 (2024-02-23)
+**2.1.69 (2024-04-22)**
 
-- Added storage of indexed urls
-- Added info about used library versions in About dialog
+- Added html buffer to speed-up context initialization in web view.
+- Fixed items append in web view in agent mode.
 
-# 2.0.162 (2024-02-23)
+**2.1.68 (2024-04-22)**
 
-- Index data storage migrated from JSON to DB.
-- Added add/remove to index context menu on ctx list.
-- Added last indexed info on ctx list.
-- Added option "Replace old document versions in the index during re-indexing" in "Settings -> Llama-index".
-- Refactored, optimized and improved file and context indexing.
-- Fixed context search SQL query.
+- Fix: CPU usage on multiple items.
 
-# 2.0.161 (2024-02-22)
+**2.1.67 (2024-04-22)**
 
-- Added the option to search within conversation content, not just by titles (disabled by default, can be enabled in: "Settings -> Context -> Search also in conversation content, not only in titles").
-- Added a "download" subdirectory for files downloaded in Assistants mode and an option to configure the directory in: "Settings -> Files and attachments -> Directory for file downloads")
-- Added logging of options available in: "Config -> Debug" to the logger window, not just to the console.
-- Added descriptions in the models editor.
+- Optimized items rendering.
 
-# 2.0.160 (2024-02-21)
+**2.1.66 (2024-04-22)**
 
-- Added auto-replacement of sandbox download links in Assistants with links to downloaded local files.
-- Added setup for Poetry.
-- Added connection timeout config option to Google Search plugin.
-- Fixed recursion error on app exit.
-- Updated dependencies.
+- Improved content formatting in HTML export.
 
-# 2.0.159 (2024-02-21)
+**2.1.65 (2024-04-22)**
 
-- Added workdir placeholders to images stored from Assistants.
-- Added tooltips on modes list.
-- Added force synchronous command call if more than one command to execute.
+- Improved save as in Web View output.
+- Added save as text and save as html separated options.
 
-# 2.0.158 (2024-02-21)
+**2.1.64 (2024-04-22)**
 
-- Improved Assistants: added annotations handling, added async function outputs submit
-- Fixed creating function duplicates on re-import existing Assistant
+- Improved real-time CSS reloading.
 
-# 2.0.157 (2024-02-20)
+**2.1.63 (2024-04-22)**
 
-- Added webpage (URL) indexing using Llama-Index; new options were added to the Google Search plugin: the command "web_index" for indexing a specified page (just ask to index any URL) and "Auto-index", which enables automatic indexing of URLs used by the plugin (disabled by default).
-- Decreased the default chunk size in the Google Search plugin.
-- Assistant run creation and message sending moved to an async thread.
-- Improved files receive from Assistants.
+- Improved rendering output.
+- Updated CSS.
 
-# 2.0.156 (2024-02-19)
+**2.1.62 (2024-04-22)**
 
-- Added disable SSL verify option for search engine calls (not only for search results) in `Google Search plugin` - issue #20.
-- Updated certifi to 2024.2.2.
-- Added custom launcher, custom plugin, custom vector store, custom LLM provider and custom data loader code examples in `examples` directory in repository.
-- Updated documentation.
+- Added default lexer for code syntax highlighting if no language provided.
 
-# 2.0.155 (2024-02-18)
+**2.1.61 (2024-04-21)**
 
-- Importing assistants and assistant files (from API) has been moved to an asynchronous thread.
-- Upgraded OpenAI API to 1.12.0.
+- Added real-time HTML formatting of text chunks in stream mode.
 
-# 2.0.154 (2024-02-18)
+**2.1.60 (2024-04-21)**
 
-- Fixed hidden user input in Assistants mode
-- Fixed system prompt change when switching to Assistants mode without selected Assistant
+- Fixed "Save as" option in WebEngine view.
+- Added hiding of empty groups on search.
+- Updated formatting and CSS.
 
-# 2.0.153 (2024-02-17)
+**2.1.59 (2024-04-20)**
 
-- Added image display in the chat window when a file received from the Assistant is an image
-- Added color labels in color select combo boxes
-- Added dialog window position save and restore (+ option in Settings to enable/disable this feature)
-- Added command "web_url_raw" to the Google Search Plugin which allows you to get the raw HTML/txt content from web pages (without summary)
-- Fixed CSS backup path
-- Updated documentation
+- Added output renderer: WebEngine/Chromium – with full HTML/CSS/JS support. (Experimental)
+- Added a new option to choose a render engine in Settings -> General -> Rendering engine to select between WebEngine / Chromium mode and the Legacy mode (old, with simple markdown CSS support only - for compatibility reasons and troubleshooting).
+- Added syntax highlighting to code blocks – issue #43.
+- Added a new option in Settings -> Layout -> Code syntax highlight to select a highlight theme.
+- Added a new option in Settings -> Context -> Convert lists to paragraphs to enable/disable converting ul and li into p for better copying.
+- Copy to clipboard and regenerate response icons are now visible by default.
 
-# 2.0.152 (2024-02-16)
+**2.1.58 (2024-04-19)**
 
-- Improved updater, added direct links to new releases
-- Improved command execute system prompt
-- Added `cwd` command to `Files I/O` plugin
-- Added automatic current working directory passing to `sys_exec` command prompt in `Code Interpreter`.
-- Added `Refresh` option in File Explorer
-- Added monit about camera connect in Snap version with command to execute
-- Disabled MenuRoles on MacOS-affected menu items - issue #19
+- Fixed Markdown rendering if the content starts with a code block.
+- Added a "Switch to created profile" option in the profile creation/duplication dialogs.
+- Updated the locale.
+- Added a donate option.
 
-The full changelog is located in the **[CHANGELOG.md](CHANGELOG.md)** file in the main folder of this repository.
+The full changelog is located in the [CHANGELOG.md](https://github.com/szczyglis-dev/py-gpt/blob/master/CHANGELOG.md) file in the main folder of this repository.
 
 
 # Credits and links
 
 **Official website:** <https://pygpt.net>
 
 **Documentation:** <https://pygpt.readthedocs.io>
 
+**Support and donate:** <https://pygpt.net/#donate>
+
 **GitHub:** <https://github.com/szczyglis-dev/py-gpt>
 
 **Snap Store:** <https://snapcraft.io/pygpt>
 
 **PyPI:** <https://pypi.org/project/pygpt-net>
 
 **Author:** Marcin Szczygliński (Poland, EU)
 
 **Contact:** <info@pygpt.net>
 
 **License:** MIT License
 
 # Special thanks
 
-GitHub community:
+GitHub's community:
+
+- [@BillionShields](https://github.com/BillionShields)
+
+- [@gfsysa](https://github.com/gfsysa)
 
-- **kaneda2004**
+- [@glinkot](https://github.com/glinkot)
 
-- **moritz-t-w**
+- [@kaneda2004](https://github.com/kaneda2004)
+
+- [@linnflux](https://github.com/linnflux)
+
+- [@moritz-t-w](https://github.com/moritz-t-w)
+
+- [@oleksii-honchar](https://github.com/oleksii-honchar)
+
+- [@yf007](https://github.com/yf007)
 
 ## Third-party libraries
 
-Full list of external libraries used in this project is located in the **[requirements.txt](requirements.txt)** file in the main folder of this repository.
+Full list of external libraries used in this project is located in the [requirements.txt](https://github.com/szczyglis-dev/py-gpt/blob/master/requirements.txt) file in the main folder of the repository.
 
 All used SVG icons are from `Material Design Icons` provided by Google:
 
 https://github.com/google/material-design-icons
 
 https://fonts.google.com/icons
 
+Monaspace fonts provided by GitHub: https://github.com/githubnext/monaspace
+
 Code of the Llama-index offline loaders integrated into app is taken from LlamaHub: https://llamahub.ai
+
+Awesome ChatGPT Prompts (used in templates): https://github.com/f/awesome-chatgpt-prompts/
```

